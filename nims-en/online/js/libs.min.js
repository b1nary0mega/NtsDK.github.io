function HighlightedDate(t,e,i){"use strict";this.date=t,this.desc=e,this.style=i}if(!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function i(t,e){e=e||et;var i=e.createElement("script");i.text=t,e.head.appendChild(i).parentNode.removeChild(i)}function n(t){var e=!!t&&"length"in t&&t.length,i=pt.type(t);return"function"!==i&&!pt.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t,e,i){return pt.isFunction(e)?pt.grep(t,function(t,n){return!!e.call(t,n,t)!==i}):e.nodeType?pt.grep(t,function(t){return t===e!==i}):"string"!=typeof e?pt.grep(t,function(t){return st.call(e,t)>-1!==i}):_t.test(e)?pt.filter(e,t,i):(e=pt.filter(e,t),pt.grep(t,function(t){return st.call(e,t)>-1!==i&&1===t.nodeType}))}function o(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function s(t){var e={};return pt.each(t.match(Mt)||[],function(t,i){e[i]=!0}),e}function a(t){return t}function h(t){throw t}function l(t,e,i){var n;try{t&&pt.isFunction(n=t.promise)?n.call(t).done(e).fail(i):t&&pt.isFunction(n=t.then)?n.call(t,e,i):e.call(void 0,t)}catch(t){i.call(void 0,t)}}function c(){et.removeEventListener("DOMContentLoaded",c),t.removeEventListener("load",c),pt.ready()}function d(){this.expando=pt.expando+d.uid++}function u(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Bt.test(t)?JSON.parse(t):t)}function f(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Ft,"-$&").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i=u(i)}catch(r){}It.set(t,e,i)}else i=void 0;return i}function p(t,e,i,n){var r,o=1,s=20,a=n?function(){return n.cur()}:function(){return pt.css(t,e,"")},h=a(),l=i&&i[3]||(pt.cssNumber[e]?"":"px"),c=(pt.cssNumber[e]||"px"!==l&&+h)&&zt.exec(pt.css(t,e));if(c&&c[3]!==l){l=l||c[3],i=i||[],c=+h||1;do o=o||".5",c/=o,pt.style(t,e,c+l);while(o!==(o=a()/h)&&1!==o&&--s)}return i&&(c=+c||+h||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=l,n.start=c,n.end=r)),r}function m(t){var e,i=t.ownerDocument,n=t.nodeName,r=Wt[n];return r?r:(e=i.body.appendChild(i.createElement(n)),r=pt.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),Wt[n]=r,r)}function g(t,e){for(var i,n,r=[],o=0,s=t.length;s>o;o++)n=t[o],n.style&&(i=n.style.display,e?("none"===i&&(r[o]=Lt.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&Ut(n)&&(r[o]=m(n))):"none"!==i&&(r[o]="none",Lt.set(n,"display",i)));for(o=0;s>o;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}function v(t,e){var i;return i="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&pt.nodeName(t,e)?pt.merge([t],i):i}function A(t,e){for(var i=0,n=t.length;n>i;i++)Lt.set(t[i],"globalEval",!e||Lt.get(e[i],"globalEval"))}function y(t,e,i,n,r){for(var o,s,a,h,l,c,d=e.createDocumentFragment(),u=[],f=0,p=t.length;p>f;f++)if(o=t[f],o||0===o)if("object"===pt.type(o))pt.merge(u,o.nodeType?[o]:o);else if(Qt.test(o)){for(s=s||d.appendChild(e.createElement("div")),a=(Yt.exec(o)||["",""])[1].toLowerCase(),h=Xt[a]||Xt._default,s.innerHTML=h[1]+pt.htmlPrefilter(o)+h[2],c=h[0];c--;)s=s.lastChild;pt.merge(u,s.childNodes),s=d.firstChild,s.textContent=""}else u.push(e.createTextNode(o));for(d.textContent="",f=0;o=u[f++];)if(n&&pt.inArray(o,n)>-1)r&&r.push(o);else if(l=pt.contains(o.ownerDocument,o),s=v(d.appendChild(o),"script"),l&&A(s),i)for(c=0;o=s[c++];)qt.test(o.type||"")&&i.push(o);return d}function b(){return!0}function E(){return!1}function w(){try{return et.activeElement}catch(t){}}function x(t,e,i,n,r,o){var s,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=void 0);for(a in e)x(t,a,i,n,e[a],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),r===!1)r=E;else if(!r)return t;return 1===o&&(s=r,r=function(t){return pt().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=pt.guid++)),t.each(function(){pt.event.add(this,e,r,n,i)})}function _(t,e){return pt.nodeName(t,"table")&&pt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t:t}function T(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function S(t){var e=ne.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function R(t,e){var i,n,r,o,s,a,h,l;if(1===e.nodeType){if(Lt.hasData(t)&&(o=Lt.access(t),s=Lt.set(e,o),l=o.events)){delete s.handle,s.events={};for(r in l)for(i=0,n=l[r].length;n>i;i++)pt.event.add(e,r,l[r][i])}It.hasData(t)&&(a=It.access(t),h=pt.extend({},a),It.set(e,h))}}function C(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Gt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function k(t,e,n,r){e=rt.apply([],e);var o,s,a,h,l,c,d=0,u=t.length,f=u-1,p=e[0],m=pt.isFunction(p);if(m||u>1&&"string"==typeof p&&!ut.checkClone&&ie.test(p))return t.each(function(i){var o=t.eq(i);m&&(e[0]=p.call(this,i,o.html())),k(o,e,n,r)});if(u&&(o=y(e,t[0].ownerDocument,!1,t,r),s=o.firstChild,1===o.childNodes.length&&(o=s),s||r)){for(a=pt.map(v(o,"script"),T),h=a.length;u>d;d++)l=o,d!==f&&(l=pt.clone(l,!0,!0),h&&pt.merge(a,v(l,"script"))),n.call(t[d],l,d);if(h)for(c=a[a.length-1].ownerDocument,pt.map(a,S),d=0;h>d;d++)l=a[d],qt.test(l.type||"")&&!Lt.access(l,"globalEval")&&pt.contains(c,l)&&(l.src?pt._evalUrl&&pt._evalUrl(l.src):i(l.textContent.replace(re,""),c))}return t}function M(t,e,i){for(var n,r=e?pt.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||pt.cleanData(v(n)),n.parentNode&&(i&&pt.contains(n.ownerDocument,n)&&A(v(n,"script")),n.parentNode.removeChild(n));return t}function H(t,e,i){var n,r,o,s,a=t.style;return i=i||ae(t),i&&(s=i.getPropertyValue(e)||i[e],""!==s||pt.contains(t.ownerDocument,t)||(s=pt.style(t,e)),!ut.pixelMarginRight()&&se.test(s)&&oe.test(e)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function P(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function D(t){if(t in ue)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=de.length;i--;)if(t=de[i]+e,t in ue)return t}function O(t,e,i){var n=zt.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function L(t,e,i,n,r){var o,s=0;for(o=i===(n?"border":"content")?4:"width"===e?1:0;4>o;o+=2)"margin"===i&&(s+=pt.css(t,i+jt[o],!0,r)),n?("content"===i&&(s-=pt.css(t,"padding"+jt[o],!0,r)),"margin"!==i&&(s-=pt.css(t,"border"+jt[o]+"Width",!0,r))):(s+=pt.css(t,"padding"+jt[o],!0,r),"padding"!==i&&(s+=pt.css(t,"border"+jt[o]+"Width",!0,r)));return s}function I(t,e,i){var n,r=!0,o=ae(t),s="border-box"===pt.css(t,"boxSizing",!1,o);if(t.getClientRects().length&&(n=t.getBoundingClientRect()[e]),0>=n||null==n){if(n=H(t,e,o),(0>n||null==n)&&(n=t.style[e]),se.test(n))return n;r=s&&(ut.boxSizingReliable()||n===t.style[e]),n=parseFloat(n)||0}return n+L(t,e,i||(s?"border":"content"),r,o)+"px"}function B(t,e,i,n,r){return new B.prototype.init(t,e,i,n,r)}function F(){pe&&(t.requestAnimationFrame(F),pt.fx.tick())}function N(){return t.setTimeout(function(){fe=void 0}),fe=pt.now()}function z(t,e){var i,n=0,r={height:t};for(e=e?1:0;4>n;n+=2-e)i=jt[n],r["margin"+i]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function j(t,e,i){for(var n,r=(W.tweeners[e]||[]).concat(W.tweeners["*"]),o=0,s=r.length;s>o;o++)if(n=r[o].call(i,e,t))return n}function U(t,e,i){var n,r,o,s,a,h,l,c,d="width"in e||"height"in e,u=this,f={},p=t.style,m=t.nodeType&&Ut(t),v=Lt.get(t,"fxshow");i.queue||(s=pt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,pt.queue(t,"fx").length||s.empty.fire()})}));for(n in e)if(r=e[n],me.test(r)){if(delete e[n],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!v||void 0===v[n])continue;m=!0}f[n]=v&&v[n]||pt.style(t,n)}if(h=!pt.isEmptyObject(e),h||!pt.isEmptyObject(f)){d&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],l=v&&v.display,null==l&&(l=Lt.get(t,"display")),c=pt.css(t,"display"),"none"===c&&(l?c=l:(g([t],!0),l=t.style.display||l,c=pt.css(t,"display"),g([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===pt.css(t,"float")&&(h||(u.done(function(){p.display=l}),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),h=!1;for(n in f)h||(v?"hidden"in v&&(m=v.hidden):v=Lt.access(t,"fxshow",{display:l}),o&&(v.hidden=!m),m&&g([t],!0),u.done(function(){m||g([t]),Lt.remove(t,"fxshow");for(n in f)pt.style(t,n,f[n])})),h=j(m?v[n]:0,n,u),n in v||(v[n]=h.start,m&&(h.end=h.start,h.start=0))}}function V(t,e){var i,n,r,o,s;for(i in t)if(n=pt.camelCase(i),r=e[n],o=t[i],pt.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),s=pt.cssHooks[n],s&&"expand"in s){o=s.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=r)}else e[n]=r}function W(t,e,i){var n,r,o=0,s=W.prefilters.length,a=pt.Deferred().always(function(){delete h.elem}),h=function(){if(r)return!1;for(var e=fe||N(),i=Math.max(0,l.startTime+l.duration-e),n=i/l.duration||0,o=1-n,s=0,h=l.tweens.length;h>s;s++)l.tweens[s].run(o);return a.notifyWith(t,[l,o,i]),1>o&&h?i:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:pt.extend({},e),opts:pt.extend(!0,{specialEasing:{},easing:pt.easing._default},i),originalProperties:e,originalOptions:i,startTime:fe||N(),duration:i.duration,tweens:[],createTween:function(e,i){var n=pt.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var i=0,n=e?l.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)l.tweens[i].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),c=l.props;for(V(c,l.opts.specialEasing);s>o;o++)if(n=W.prefilters[o].call(l,t,c,l.opts))return pt.isFunction(n.stop)&&(pt._queueHooks(l.elem,l.opts.queue).stop=pt.proxy(n.stop,n)),n;return pt.map(c,j,l),pt.isFunction(l.opts.start)&&l.opts.start.call(t,l),pt.fx.timer(pt.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function G(t){var e=t.match(Mt)||[];return e.join(" ")}function Y(t){return t.getAttribute&&t.getAttribute("class")||""}function q(t,e,i,n){var r;if(pt.isArray(e))pt.each(e,function(e,r){i||Se.test(t)?n(t,r):q(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)});else if(i||"object"!==pt.type(e))n(t,e);else for(r in e)q(t+"["+r+"]",e[r],i,n)}function X(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(Mt)||[];if(pt.isFunction(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Q(t,e,i,n){function r(a){var h;return o[a]=!0,pt.each(t[a]||[],function(t,a){var l=a(e,i,n);return"string"!=typeof l||s||o[l]?s?!(h=l):void 0:(e.dataTypes.unshift(l),r(l),!1)}),h}var o={},s=t===Fe;return r(e.dataTypes[0])||!o["*"]&&r("*")}function Z(t,e){var i,n,r=pt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&pt.extend(!0,t,n),t}function K(t,e,i){for(var n,r,o,s,a=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){h.unshift(r);break}if(h[0]in i)o=h[0];else{for(r in i){if(!h[0]||t.converters[r+" "+h[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==h[0]&&h.unshift(o),i[o]):void 0}function J(t,e,i,n){var r,o,s,a,h,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!h&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=o,o=c.shift())if("*"===o)o=h;else if("*"!==h&&h!==o){if(s=l[h+" "+o]||l["* "+o],!s)for(r in l)if(a=r.split(" "),a[1]===o&&(s=l[h+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[r]:l[r]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+h+" to "+o}}}return{state:"success",data:e}}function $(t){return pt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var tt=[],et=t.document,it=Object.getPrototypeOf,nt=tt.slice,rt=tt.concat,ot=tt.push,st=tt.indexOf,at={},ht=at.toString,lt=at.hasOwnProperty,ct=lt.toString,dt=ct.call(Object),ut={},ft="3.1.1",pt=function(t,e){return new pt.fn.init(t,e)},mt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,gt=/^-ms-/,vt=/-([a-z])/g,At=function(t,e){return e.toUpperCase()};pt.fn=pt.prototype={jquery:ft,constructor:pt,length:0,toArray:function(){return nt.call(this)},get:function(t){return null==t?nt.call(this):0>t?this[t+this.length]:this[t]},pushStack:function(t){var e=pt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return pt.each(this,t)},map:function(t){return this.pushStack(pt.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(nt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:ot,sort:tt.sort,splice:tt.splice},pt.extend=pt.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,h=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||pt.isFunction(s)||(s={}),a===h&&(s=this,a--);h>a;a++)if(null!=(t=arguments[a]))for(e in t)i=s[e],n=t[e],s!==n&&(l&&n&&(pt.isPlainObject(n)||(r=pt.isArray(n)))?(r?(r=!1,o=i&&pt.isArray(i)?i:[]):o=i&&pt.isPlainObject(i)?i:{},s[e]=pt.extend(l,o,n)):void 0!==n&&(s[e]=n));return s},pt.extend({expando:"jQuery"+(ft+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===pt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=pt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==ht.call(t)||(e=it(t))&&(i=lt.call(e,"constructor")&&e.constructor,"function"!=typeof i||ct.call(i)!==dt))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?at[ht.call(t)]||"object":typeof t},globalEval:function(t){i(t)},camelCase:function(t){return t.replace(gt,"ms-").replace(vt,At)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var i,r=0;if(n(t))for(i=t.length;i>r&&e.call(t[r],r,t[r])!==!1;r++);else for(r in t)if(e.call(t[r],r,t[r])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(mt,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?pt.merge(i,"string"==typeof t?[t]:t):ot.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:st.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;i>n;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n,r=[],o=0,s=t.length,a=!i;s>o;o++)n=!e(t[o],o),n!==a&&r.push(t[o]);return r},map:function(t,e,i){var r,o,s=0,a=[];if(n(t))for(r=t.length;r>s;s++)o=e(t[s],s,i),null!=o&&a.push(o);else for(s in t)o=e(t[s],s,i),null!=o&&a.push(o);return rt.apply([],a)},guid:1,proxy:function(t,e){var i,n,r;return"string"==typeof e&&(i=t[e],e=t,t=i),pt.isFunction(t)?(n=nt.call(arguments,2),r=function(){return t.apply(e||this,n.concat(nt.call(arguments)))},r.guid=t.guid=t.guid||pt.guid++,r):void 0},now:Date.now,support:ut}),"function"==typeof Symbol&&(pt.fn[Symbol.iterator]=tt[Symbol.iterator]),pt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){at["[object "+e+"]"]=e.toLowerCase()});var yt=function(t){function e(t,e,i,n){var r,o,s,a,h,l,c,u=e&&e.ownerDocument,p=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return i;if(!n&&((e?e.ownerDocument||e:j)!==D&&P(e),e=e||D,L)){if(11!==p&&(h=vt.exec(t)))if(r=h[1]){if(9===p){if(!(s=e.getElementById(r)))return i;if(s.id===r)return i.push(s),i}else if(u&&(s=u.getElementById(r))&&N(e,s)&&s.id===r)return i.push(s),i}else{if(h[2])return J.apply(i,e.getElementsByTagName(t)),i;if((r=h[3])&&w.getElementsByClassName&&e.getElementsByClassName)return J.apply(i,e.getElementsByClassName(r)),i}if(w.qsa&&!Y[t+" "]&&(!I||!I.test(t))){if(1!==p)u=e,c=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(Et,wt):e.setAttribute("id",a=z),l=S(t),o=l.length;o--;)l[o]="#"+a+" "+f(l[o]);c=l.join(","),u=At.test(t)&&d(e.parentNode)||e}if(c)try{return J.apply(i,u.querySelectorAll(c)),i}catch(m){}finally{a===z&&e.removeAttribute("id")}}}return C(t.replace(at,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>x.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[z]=!0,t}function r(t){var e=D.createElement("fieldset");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=i.length;n--;)x.attrHandle[i[n]]=e}function s(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function h(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function l(t){return function(e){return"form"in e?e.parentNode&&e.disabled===!1?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&_t(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function c(t){return n(function(e){return e=+e,n(function(i,n){for(var r,o=t([],i.length,e),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})})}function d(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function u(){}function f(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,r=e.next,o=r||n,s=i&&"parentNode"===o,a=V++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,r);return!1}:function(e,i,h){var l,c,d,u=[U,a];if(h){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,h))return!0}else for(;e=e[n];)if(1===e.nodeType||s)if(d=e[z]||(e[z]={}),c=d[e.uniqueID]||(d[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[n]||e;else{if((l=c[o])&&l[0]===U&&l[1]===a)return u[2]=l[2];if(c[o]=u,u[2]=t(e,i,h))return!0}return!1}}function m(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function g(t,i,n){for(var r=0,o=i.length;o>r;r++)e(t,i[r],n);return n}function v(t,e,i,n,r){for(var o,s=[],a=0,h=t.length,l=null!=e;h>a;a++)(o=t[a])&&(i&&!i(o,n,r)||(s.push(o),l&&e.push(a)));return s}function A(t,e,i,r,o,s){return r&&!r[z]&&(r=A(r)),o&&!o[z]&&(o=A(o,s)),n(function(n,s,a,h){var l,c,d,u=[],f=[],p=s.length,m=n||g(e||"*",a.nodeType?[a]:a,[]),A=!t||!n&&e?m:v(m,u,t,a,h),y=i?o||(n?t:p||r)?[]:s:A;if(i&&i(A,y,a,h),r)for(l=v(y,f),r(l,[],a,h),c=l.length;c--;)(d=l[c])&&(y[f[c]]=!(A[f[c]]=d));if(n){if(o||t){if(o){for(l=[],c=y.length;c--;)(d=y[c])&&l.push(A[c]=d);o(null,y=[],l,h)}for(c=y.length;c--;)(d=y[c])&&(l=o?tt(n,d):u[c])>-1&&(n[l]=!(s[l]=d))}}else y=v(y===s?y.splice(p,y.length):y),o?o(null,s,y,h):J.apply(s,y)})}function y(t){for(var e,i,n,r=t.length,o=x.relative[t[0].type],s=o||x.relative[" "],a=o?1:0,h=p(function(t){return t===e},s,!0),l=p(function(t){return tt(e,t)>-1},s,!0),c=[function(t,i,n){var r=!o&&(n||i!==k)||((e=i).nodeType?h(t,i,n):l(t,i,n));return e=null,r}];r>a;a++)if(i=x.relative[t[a].type])c=[p(m(c),i)];else{if(i=x.filter[t[a].type].apply(null,t[a].matches),i[z]){for(n=++a;r>n&&!x.relative[t[n].type];n++);return A(a>1&&m(c),a>1&&f(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(at,"$1"),i,n>a&&y(t.slice(a,n)),r>n&&y(t=t.slice(n)),r>n&&f(t))}c.push(i)}return m(c)}function b(t,i){var r=i.length>0,o=t.length>0,s=function(n,s,a,h,l){var c,d,u,f=0,p="0",m=n&&[],g=[],A=k,y=n||o&&x.find.TAG("*",l),b=U+=null==A?1:Math.random()||.1,E=y.length;for(l&&(k=s===D||s||l);p!==E&&null!=(c=y[p]);p++){if(o&&c){for(d=0,s||c.ownerDocument===D||(P(c),a=!L);u=t[d++];)if(u(c,s||D,a)){h.push(c);break}l&&(U=b)}r&&((c=!u&&c)&&f--,n&&m.push(c))}if(f+=p,r&&p!==f){for(d=0;u=i[d++];)u(m,g,s,a);if(n){if(f>0)for(;p--;)m[p]||g[p]||(g[p]=Z.call(h));g=v(g)}J.apply(h,g),l&&!n&&g.length>0&&f+i.length>1&&e.uniqueSort(h)}return l&&(U=b,k=A),m};return r?n(s):s}var E,w,x,_,T,S,R,C,k,M,H,P,D,O,L,I,B,F,N,z="sizzle"+1*new Date,j=t.document,U=0,V=0,W=i(),G=i(),Y=i(),q=function(t,e){return t===e&&(H=!0),0},X={}.hasOwnProperty,Q=[],Z=Q.pop,K=Q.push,J=Q.push,$=Q.slice,tt=function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\x00-\\xa0])+",rt="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nt+"))|)"+it+"*\\]",ot=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",st=new RegExp(it+"+","g"),at=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ht=new RegExp("^"+it+"*,"+it+"*"),lt=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ct=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),dt=new RegExp(ot),ut=new RegExp("^"+nt+"$"),ft={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,At=/[+~]/,yt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),bt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wt=function(t,e){return e?"\x00"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},xt=function(){P()},_t=p(function(t){return t.disabled===!0&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{J.apply(Q=$.call(j.childNodes),j.childNodes),Q[j.childNodes.length].nodeType}catch(Tt){J={apply:Q.length?function(t,e){K.apply(t,$.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}w=e.support={},T=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:j;return n!==D&&9===n.nodeType&&n.documentElement?(D=n,O=D.documentElement,L=!T(D),j!==D&&(i=D.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",xt,!1):i.attachEvent&&i.attachEvent("onunload",xt)),w.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=r(function(t){return t.appendChild(D.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=gt.test(D.getElementsByClassName),w.getById=r(function(t){return O.appendChild(t).id=z,!D.getElementsByName||!D.getElementsByName(z).length}),w.getById?(x.filter.ID=function(t){var e=t.replace(yt,bt);return function(t){return t.getAttribute("id")===e}},x.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&L){var i=e.getElementById(t);return i?[i]:[]}}):(x.filter.ID=function(t){var e=t.replace(yt,bt);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},x.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&L){var i,n,r,o=e.getElementById(t);if(o){if(i=o.getAttributeNode("id"),i&&i.value===t)return[o];for(r=e.getElementsByName(t),n=0;o=r[n++];)if(i=o.getAttributeNode("id"),i&&i.value===t)return[o]}return[]}}),x.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},x.find.CLASS=w.getElementsByClassName&&function(t,e){return"undefined"!=typeof e.getElementsByClassName&&L?e.getElementsByClassName(t):void 0},B=[],I=[],(w.qsa=gt.test(D.querySelectorAll))&&(r(function(t){O.appendChild(t).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+it+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+z+"-]").length||I.push("~="),t.querySelectorAll(":checked").length||I.push(":checked"),t.querySelectorAll("a#"+z+"+*").length||I.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=D.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+it+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&I.push(":enabled",":disabled"),O.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(w.matchesSelector=gt.test(F=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(t){w.disconnectedMatch=F.call(t,"*"),F.call(t,"[s!='']:x"),B.push("!=",ot)}),I=I.length&&new RegExp(I.join("|")),B=B.length&&new RegExp(B.join("|")),e=gt.test(O.compareDocumentPosition),N=e||gt.test(O.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=e?function(t,e){if(t===e)return H=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!w.sortDetached&&e.compareDocumentPosition(t)===i?t===D||t.ownerDocument===j&&N(j,t)?-1:e===D||e.ownerDocument===j&&N(j,e)?1:M?tt(M,t)-tt(M,e):0:4&i?-1:1)}:function(t,e){if(t===e)return H=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],h=[e];if(!r||!o)return t===D?-1:e===D?1:r?-1:o?1:M?tt(M,t)-tt(M,e):0;if(r===o)return s(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;a[n]===h[n];)n++;return n?s(a[n],h[n]):a[n]===j?-1:h[n]===j?1:0},D):D},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==D&&P(t),i=i.replace(ct,"='$1']"),w.matchesSelector&&L&&!Y[i+" "]&&(!B||!B.test(i))&&(!I||!I.test(i)))try{var n=F.call(t,i);if(n||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(r){}return e(i,D,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==D&&P(t),N(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==D&&P(t);var i=x.attrHandle[e.toLowerCase()],n=i&&X.call(x.attrHandle,e.toLowerCase())?i(t,e,!L):void 0;return void 0!==n?n:w.attributes||!L?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.escape=function(t){return(t+"").replace(Et,wt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(H=!w.detectDuplicates,M=!w.sortStable&&t.slice(0),t.sort(q),H){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return M=null,t},_=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=_(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=_(e);return i},x=e.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(yt,bt),t[3]=(t[3]||t[4]||t[5]||"").replace(yt,bt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&dt.test(i)&&(e=S(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(yt,bt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var o=e.attr(r,t);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(st," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,h){var l,c,d,u,f,p,m=o!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),A=!h&&!a,y=!1;if(g){if(o){for(;m;){for(u=e;u=u[m];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&A){for(u=g,d=u[z]||(u[z]={}),c=d[u.uniqueID]||(d[u.uniqueID]={}),l=c[t]||[],f=l[0]===U&&l[1],y=f&&l[2],u=f&&g.childNodes[f];u=++f&&u&&u[m]||(y=f=0)||p.pop();)if(1===u.nodeType&&++y&&u===e){c[t]=[U,f,y];break}}else if(A&&(u=e,d=u[z]||(u[z]={}),c=d[u.uniqueID]||(d[u.uniqueID]={}),l=c[t]||[],f=l[0]===U&&l[1],y=f),y===!1)for(;(u=++f&&u&&u[m]||(y=f=0)||p.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++y||(A&&(d=u[z]||(u[z]={}),c=d[u.uniqueID]||(d[u.uniqueID]={}),c[t]=[U,y]),u!==e)););return y-=r,y===n||y%n===0&&y/n>=0}}},PSEUDO:function(t,i){var r,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[z]?o(i):o.length>1?(r=[t,t,"",i],x.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=o(t,i),s=r.length;s--;)n=tt(t,r[s]),t[n]=!(e[n]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:n(function(t){var e=[],i=[],r=R(t.replace(at,"$1"));return r[z]?n(function(t,e,i,n){for(var o,s=r(t,null,n,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,r(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(yt,bt),function(e){return(e.textContent||e.innerText||_(e)).indexOf(t)>-1}}),lang:n(function(t){return ut.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(yt,bt).toLowerCase(),function(e){var i;do if(i=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),
i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:l(!1),disabled:l(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[0>i?i+e:i]}),even:c(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},x.pseudos.nth=x.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[E]=a(E);for(E in{submit:!0,reset:!0})x.pseudos[E]=h(E);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,S=e.tokenize=function(t,i){var n,r,o,s,a,h,l,c=G[t+" "];if(c)return i?0:c.slice(0);for(a=t,h=[],l=x.preFilter;a;){n&&!(r=ht.exec(a))||(r&&(a=a.slice(r[0].length)||a),h.push(o=[])),n=!1,(r=lt.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(at," ")}),a=a.slice(n.length));for(s in x.filter)!(r=ft[s].exec(a))||l[s]&&!(r=l[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):G(t,h).slice(0)},R=e.compile=function(t,e){var i,n=[],r=[],o=Y[t+" "];if(!o){for(e||(e=S(t)),i=e.length;i--;)o=y(e[i]),o[z]?n.push(o):r.push(o);o=Y(t,b(r,n)),o.selector=t}return o},C=e.select=function(t,e,i,n){var r,o,s,a,h,l="function"==typeof t&&t,c=!n&&S(t=l.selector||t);if(i=i||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&9===e.nodeType&&L&&x.relative[o[1].type]){if(e=(x.find.ID(s.matches[0].replace(yt,bt),e)||[])[0],!e)return i;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=ft.needsContext.test(t)?0:o.length;r--&&(s=o[r],!x.relative[a=s.type]);)if((h=x.find[a])&&(n=h(s.matches[0].replace(yt,bt),At.test(o[0].type)&&d(e.parentNode)||e))){if(o.splice(r,1),t=n.length&&f(o),!t)return J.apply(i,n),i;break}}return(l||R(t,c))(n,e,!L,i,!e||At.test(t)&&d(e.parentNode)||e),i},w.sortStable=z.split("").sort(q).join("")===z,w.detectDuplicates=!!H,P(),w.sortDetached=r(function(t){return 1&t.compareDocumentPosition(D.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);pt.find=yt,pt.expr=yt.selectors,pt.expr[":"]=pt.expr.pseudos,pt.uniqueSort=pt.unique=yt.uniqueSort,pt.text=yt.getText,pt.isXMLDoc=yt.isXML,pt.contains=yt.contains,pt.escapeSelector=yt.escape;var bt=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&pt(t).is(i))break;n.push(t)}return n},Et=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},wt=pt.expr.match.needsContext,xt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,_t=/^.[^:#\[\.,]*$/;pt.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?pt.find.matchesSelector(n,t)?[n]:[]:pt.find.matches(t,pt.grep(e,function(t){return 1===t.nodeType}))},pt.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(pt(t).filter(function(){for(e=0;n>e;e++)if(pt.contains(r[e],this))return!0}));for(i=this.pushStack([]),e=0;n>e;e++)pt.find(t,r[e],i);return n>1?pt.uniqueSort(i):i},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&wt.test(t)?pt(t):t||[],!1).length}});var Tt,St=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Rt=pt.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||Tt,"string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:St.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof pt?e[0]:e,pt.merge(this,pt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:et,!0)),xt.test(n[1])&&pt.isPlainObject(e))for(n in e)pt.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=et.getElementById(n[2]),r&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):pt.isFunction(t)?void 0!==i.ready?i.ready(t):t(pt):pt.makeArray(t,this)};Rt.prototype=pt.fn,Tt=pt(et);var Ct=/^(?:parents|prev(?:Until|All))/,kt={children:!0,contents:!0,next:!0,prev:!0};pt.fn.extend({has:function(t){var e=pt(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(pt.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,r=this.length,o=[],s="string"!=typeof t&&pt(t);if(!wt.test(t))for(;r>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&pt.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?pt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?st.call(pt(t),this[0]):st.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(pt.uniqueSort(pt.merge(this.get(),pt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),pt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return bt(t,"parentNode")},parentsUntil:function(t,e,i){return bt(t,"parentNode",i)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return bt(t,"nextSibling")},prevAll:function(t){return bt(t,"previousSibling")},nextUntil:function(t,e,i){return bt(t,"nextSibling",i)},prevUntil:function(t,e,i){return bt(t,"previousSibling",i)},siblings:function(t){return Et((t.parentNode||{}).firstChild,t)},children:function(t){return Et(t.firstChild)},contents:function(t){return t.contentDocument||pt.merge([],t.childNodes)}},function(t,e){pt.fn[t]=function(i,n){var r=pt.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=pt.filter(n,r)),this.length>1&&(kt[t]||pt.uniqueSort(r),Ct.test(t)&&r.reverse()),this.pushStack(r)}});var Mt=/[^\x20\t\r\n\f]+/g;pt.Callbacks=function(t){t="string"==typeof t?s(t):pt.extend({},t);var e,i,n,r,o=[],a=[],h=-1,l=function(){for(r=t.once,n=e=!0;a.length;h=-1)for(i=a.shift();++h<o.length;)o[h].apply(i[0],i[1])===!1&&t.stopOnFalse&&(h=o.length,i=!1);t.memory||(i=!1),e=!1,r&&(o=i?[]:"")},c={add:function(){return o&&(i&&!e&&(h=o.length-1,a.push(i)),function n(e){pt.each(e,function(e,i){pt.isFunction(i)?t.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==pt.type(i)&&n(i)})}(arguments),i&&!e&&l()),this},remove:function(){return pt.each(arguments,function(t,e){for(var i;(i=pt.inArray(e,o,i))>-1;)o.splice(i,1),h>=i&&h--}),this},has:function(t){return t?pt.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=a=[],i||e||(o=i=""),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=i||[],i=[t,i.slice?i.slice():i],a.push(i),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},pt.extend({Deferred:function(e){var i=[["notify","progress",pt.Callbacks("memory"),pt.Callbacks("memory"),2],["resolve","done",pt.Callbacks("once memory"),pt.Callbacks("once memory"),0,"resolved"],["reject","fail",pt.Callbacks("once memory"),pt.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(t){return r.then(null,t)},pipe:function(){var t=arguments;return pt.Deferred(function(e){pt.each(i,function(i,n){var r=pt.isFunction(t[n[4]])&&t[n[4]];o[n[1]](function(){var t=r&&r.apply(this,arguments);t&&pt.isFunction(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,n,r){function o(e,i,n,r){return function(){var l=this,c=arguments,d=function(){var t,d;if(!(s>e)){if(t=n.apply(l,c),t===i.promise())throw new TypeError("Thenable self-resolution");d=t&&("object"==typeof t||"function"==typeof t)&&t.then,pt.isFunction(d)?r?d.call(t,o(s,i,a,r),o(s,i,h,r)):(s++,d.call(t,o(s,i,a,r),o(s,i,h,r),o(s,i,a,i.notifyWith))):(n!==a&&(l=void 0,c=[t]),(r||i.resolveWith)(l,c))}},u=r?d:function(){try{d()}catch(t){pt.Deferred.exceptionHook&&pt.Deferred.exceptionHook(t,u.stackTrace),e+1>=s&&(n!==h&&(l=void 0,c=[t]),i.rejectWith(l,c))}};e?u():(pt.Deferred.getStackHook&&(u.stackTrace=pt.Deferred.getStackHook()),t.setTimeout(u))}}var s=0;return pt.Deferred(function(t){i[0][3].add(o(0,t,pt.isFunction(r)?r:a,t.notifyWith)),i[1][3].add(o(0,t,pt.isFunction(e)?e:a)),i[2][3].add(o(0,t,pt.isFunction(n)?n:h))}).promise()},promise:function(t){return null!=t?pt.extend(t,r):r}},o={};return pt.each(i,function(t,e){var s=e[2],a=e[5];r[e[1]]=s.add,a&&s.add(function(){n=a},i[3-t][2].disable,i[0][2].lock),s.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=s.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,i=e,n=Array(i),r=nt.call(arguments),o=pt.Deferred(),s=function(t){return function(i){n[t]=this,r[t]=arguments.length>1?nt.call(arguments):i,--e||o.resolveWith(n,r)}};if(1>=e&&(l(t,o.done(s(i)).resolve,o.reject),"pending"===o.state()||pt.isFunction(r[i]&&r[i].then)))return o.then();for(;i--;)l(r[i],s(i),o.reject);return o.promise()}});var Ht=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;pt.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&Ht.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},pt.readyException=function(e){t.setTimeout(function(){throw e})};var Pt=pt.Deferred();pt.fn.ready=function(t){return Pt.then(t)["catch"](function(t){pt.readyException(t)}),this},pt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?pt.readyWait++:pt.ready(!0)},ready:function(t){(t===!0?--pt.readyWait:pt.isReady)||(pt.isReady=!0,t!==!0&&--pt.readyWait>0||Pt.resolveWith(et,[pt]))}}),pt.ready.then=Pt.then,"complete"===et.readyState||"loading"!==et.readyState&&!et.documentElement.doScroll?t.setTimeout(pt.ready):(et.addEventListener("DOMContentLoaded",c),t.addEventListener("load",c));var Dt=function(t,e,i,n,r,o,s){var a=0,h=t.length,l=null==i;if("object"===pt.type(i)){r=!0;for(a in i)Dt(t,e,a,i[a],!0,o,s)}else if(void 0!==n&&(r=!0,pt.isFunction(n)||(s=!0),l&&(s?(e.call(t,n),e=null):(l=e,e=function(t,e,i){return l.call(pt(t),i)})),e))for(;h>a;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return r?t:l?e.call(t):h?e(t[0],i):o},Ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};d.uid=1,d.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[pt.camelCase(e)]=i;else for(n in e)r[pt.camelCase(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][pt.camelCase(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){pt.isArray(e)?e=e.map(pt.camelCase):(e=pt.camelCase(e),e=e in n?[e]:e.match(Mt)||[]),i=e.length;for(;i--;)delete n[e[i]]}(void 0===e||pt.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!pt.isEmptyObject(e)}};var Lt=new d,It=new d,Bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ft=/[A-Z]/g;pt.extend({hasData:function(t){return It.hasData(t)||Lt.hasData(t)},data:function(t,e,i){return It.access(t,e,i)},removeData:function(t,e){It.remove(t,e)},_data:function(t,e,i){return Lt.access(t,e,i)},_removeData:function(t,e){Lt.remove(t,e)}}),pt.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=It.get(o),1===o.nodeType&&!Lt.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=pt.camelCase(n.slice(5)),f(o,n,r[n])));Lt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){It.set(this,t)}):Dt(this,function(e){var i;if(o&&void 0===e){if(i=It.get(o,t),void 0!==i)return i;if(i=f(o,t),void 0!==i)return i}else this.each(function(){It.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){It.remove(this,t)})}}),pt.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=Lt.get(t,e),i&&(!n||pt.isArray(i)?n=Lt.access(t,e,pt.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=pt.queue(t,e),n=i.length,r=i.shift(),o=pt._queueHooks(t,e),s=function(){pt.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Lt.get(t,i)||Lt.access(t,i,{empty:pt.Callbacks("once memory").add(function(){Lt.remove(t,[e+"queue",i])})})}}),pt.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?pt.queue(this[0],t):void 0===e?this:this.each(function(){var i=pt.queue(this,t,e);pt._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&pt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){pt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=pt.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)i=Lt.get(o[s],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var Nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,zt=new RegExp("^(?:([+-])=|)("+Nt+")([a-z%]*)$","i"),jt=["Top","Right","Bottom","Left"],Ut=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&pt.contains(t.ownerDocument,t)&&"none"===pt.css(t,"display")},Vt=function(t,e,i,n){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=i.apply(t,n||[]);for(o in e)t.style[o]=s[o];return r},Wt={};pt.fn.extend({show:function(){return g(this,!0)},hide:function(){return g(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ut(this)?pt(this).show():pt(this).hide()})}});var Gt=/^(?:checkbox|radio)$/i,Yt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,qt=/^$|\/(?:java|ecma)script/i,Xt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td;var Qt=/<|&#?\w+;/;!function(){var t=et.createDocumentFragment(),e=t.appendChild(et.createElement("div")),i=et.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),ut.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",ut.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Zt=et.documentElement,Kt=/^key/,Jt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,$t=/^([^.]*)(?:\.(.+)|)/;pt.event={global:{},add:function(t,e,i,n,r){var o,s,a,h,l,c,d,u,f,p,m,g=Lt.get(t);if(g)for(i.handler&&(o=i,i=o.handler,r=o.selector),r&&pt.find.matchesSelector(Zt,r),i.guid||(i.guid=pt.guid++),(h=g.events)||(h=g.events={}),(s=g.handle)||(s=g.handle=function(e){return"undefined"!=typeof pt&&pt.event.triggered!==e.type?pt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Mt)||[""],l=e.length;l--;)a=$t.exec(e[l])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f&&(d=pt.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=pt.event.special[f]||{},c=pt.extend({type:f,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&pt.expr.match.needsContext.test(r),namespace:p.join(".")},o),(u=h[f])||(u=h[f]=[],u.delegateCount=0,d.setup&&d.setup.call(t,n,p,s)!==!1||t.addEventListener&&t.addEventListener(f,s)),d.add&&(d.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),r?u.splice(u.delegateCount++,0,c):u.push(c),pt.event.global[f]=!0)},remove:function(t,e,i,n,r){var o,s,a,h,l,c,d,u,f,p,m,g=Lt.hasData(t)&&Lt.get(t);if(g&&(h=g.events)){for(e=(e||"").match(Mt)||[""],l=e.length;l--;)if(a=$t.exec(e[l])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(d=pt.event.special[f]||{},f=(n?d.delegateType:d.bindType)||f,u=h[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=u.length;o--;)c=u[o],!r&&m!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(u.splice(o,1),c.selector&&u.delegateCount--,d.remove&&d.remove.call(t,c));s&&!u.length&&(d.teardown&&d.teardown.call(t,p,g.handle)!==!1||pt.removeEvent(t,f,g.handle),delete h[f])}else for(f in h)pt.event.remove(t,f+e[l],i,n,!0);pt.isEmptyObject(h)&&Lt.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,o,s,a=pt.event.fix(t),h=new Array(arguments.length),l=(Lt.get(this,"events")||{})[a.type]||[],c=pt.event.special[a.type]||{};for(h[0]=a,e=1;e<arguments.length;e++)h[e]=arguments[e];if(a.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,a)!==!1){for(s=pt.event.handlers.call(this,a,l),e=0;(r=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,n=((pt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,h),void 0!==n&&(a.result=n)===!1&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(t,e){var i,n,r,o,s,a=[],h=e.delegateCount,l=t.target;if(h&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||l.disabled!==!0)){for(o=[],s={},i=0;h>i;i++)n=e[i],r=n.selector+" ",void 0===s[r]&&(s[r]=n.needsContext?pt(r,this).index(l)>-1:pt.find(r,this,null,[l]).length),s[r]&&o.push(n);o.length&&a.push({elem:l,handlers:o})}return l=this,h<e.length&&a.push({elem:l,handlers:e.slice(h)}),a},addProp:function(t,e){Object.defineProperty(pt.Event.prototype,t,{enumerable:!0,configurable:!0,get:pt.isFunction(e)?function(){return this.originalEvent?e(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[t]:void 0},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[pt.expando]?t:new pt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==w()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===w()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&pt.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return pt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},pt.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},pt.Event=function(t,e){return this instanceof pt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?b:E,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&pt.extend(this,e),this.timeStamp=t&&t.timeStamp||pt.now(),void(this[pt.expando]=!0)):new pt.Event(t,e)},pt.Event.prototype={constructor:pt.Event,isDefaultPrevented:E,isPropagationStopped:E,isImmediatePropagationStopped:E,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=b,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=b,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=b,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},pt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Kt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Jt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},pt.event.addProp),pt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){pt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===n||pt.contains(n,r))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),pt.fn.extend({on:function(t,e,i,n){return x(this,t,e,i,n)},one:function(t,e,i,n){return x(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,pt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return e!==!1&&"function"!=typeof e||(i=e,e=void 0),i===!1&&(i=E),this.each(function(){pt.event.remove(this,t,i,e)})}});var te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ee=/<script|<style|<link/i,ie=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^true\/(.*)/,re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;pt.extend({htmlPrefilter:function(t){return t.replace(te,"<$1></$2>")},clone:function(t,e,i){var n,r,o,s,a=t.cloneNode(!0),h=pt.contains(t.ownerDocument,t);if(!(ut.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||pt.isXMLDoc(t)))for(s=v(a),o=v(t),n=0,r=o.length;r>n;n++)C(o[n],s[n]);if(e)if(i)for(o=o||v(t),s=s||v(a),n=0,r=o.length;r>n;n++)R(o[n],s[n]);else R(t,a);return s=v(a,"script"),s.length>0&&A(s,!h&&v(t,"script")),a},cleanData:function(t){for(var e,i,n,r=pt.event.special,o=0;void 0!==(i=t[o]);o++)if(Ot(i)){if(e=i[Lt.expando]){if(e.events)for(n in e.events)r[n]?pt.event.remove(i,n):pt.removeEvent(i,n,e.handle);i[Lt.expando]=void 0}i[It.expando]&&(i[It.expando]=void 0)}}}),pt.fn.extend({detach:function(t){return M(this,t,!0)},remove:function(t){return M(this,t)},text:function(t){return Dt(this,function(t){return void 0===t?pt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return k(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=_(this,t);e.appendChild(t)}})},prepend:function(){return k(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=_(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return k(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return k(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(pt.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return pt.clone(this,t,e)})},html:function(t){return Dt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ee.test(t)&&!Xt[(Yt.exec(t)||["",""])[1].toLowerCase()]){t=pt.htmlPrefilter(t);try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(pt.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return k(this,arguments,function(e){var i=this.parentNode;pt.inArray(this,t)<0&&(pt.cleanData(v(this)),i&&i.replaceChild(e,this))},t)}}),pt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){pt.fn[t]=function(t){for(var i,n=[],r=pt(t),o=r.length-1,s=0;o>=s;s++)i=s===o?this:this.clone(!0),pt(r[s])[e](i),ot.apply(n,i.get());return this.pushStack(n)}});var oe=/^margin/,se=new RegExp("^("+Nt+")(?!px)[a-z%]+$","i"),ae=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)};!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Zt.appendChild(s);var e=t.getComputedStyle(a);i="1%"!==e.top,o="2px"===e.marginLeft,n="4px"===e.width,a.style.marginRight="50%",r="4px"===e.marginRight,Zt.removeChild(s),a=null}}var i,n,r,o,s=et.createElement("div"),a=et.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ut.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),pt.extend(ut,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return e(),n},pixelMarginRight:function(){return e(),r},reliableMarginLeft:function(){return e(),o}}))}();var he=/^(none|table(?!-c[ea]).+)/,le={position:"absolute",visibility:"hidden",display:"block"},ce={letterSpacing:"0",fontWeight:"400"},de=["Webkit","Moz","ms"],ue=et.createElement("div").style;pt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=H(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=pt.camelCase(e),h=t.style;return e=pt.cssProps[a]||(pt.cssProps[a]=D(a)||a),s=pt.cssHooks[e]||pt.cssHooks[a],void 0===i?s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:h[e]:(o=typeof i,"string"===o&&(r=zt.exec(i))&&r[1]&&(i=p(t,e,r),o="number"),void(null!=i&&i===i&&("number"===o&&(i+=r&&r[3]||(pt.cssNumber[a]?"":"px")),ut.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(h[e]=i))))}},css:function(t,e,i,n){var r,o,s,a=pt.camelCase(e);return e=pt.cssProps[a]||(pt.cssProps[a]=D(a)||a),s=pt.cssHooks[e]||pt.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,i)),void 0===r&&(r=H(t,e,n)),"normal"===r&&e in ce&&(r=ce[e]),""===i||i?(o=parseFloat(r),i===!0||isFinite(o)?o||0:r):r}}),pt.each(["height","width"],function(t,e){pt.cssHooks[e]={get:function(t,i,n){return i?!he.test(pt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?I(t,e,n):Vt(t,le,function(){return I(t,e,n)}):void 0},set:function(t,i,n){var r,o=n&&ae(t),s=n&&L(t,e,n,"border-box"===pt.css(t,"boxSizing",!1,o),o);return s&&(r=zt.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=pt.css(t,e)),O(t,i,s)}}}),pt.cssHooks.marginLeft=P(ut.reliableMarginLeft,function(t,e){return e?(parseFloat(H(t,"marginLeft"))||t.getBoundingClientRect().left-Vt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px":void 0}),pt.each({margin:"",padding:"",border:"Width"},function(t,e){pt.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];4>n;n++)r[t+jt[n]+e]=o[n]||o[n-2]||o[0];return r}},oe.test(t)||(pt.cssHooks[t+e].set=O)}),pt.fn.extend({css:function(t,e){return Dt(this,function(t,e,i){var n,r,o={},s=0;if(pt.isArray(e)){for(n=ae(t),r=e.length;r>s;s++)o[e[s]]=pt.css(t,e[s],!1,n);return o}return void 0!==i?pt.style(t,e,i):pt.css(t,e)},t,e,arguments.length>1)}}),pt.Tween=B,B.prototype={constructor:B,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||pt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(pt.cssNumber[i]?"":"px")},cur:function(){var t=B.propHooks[this.prop];return t&&t.get?t.get(this):B.propHooks._default.get(this)},run:function(t){var e,i=B.propHooks[this.prop];return this.options.duration?this.pos=e=pt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=pt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){pt.fx.step[t.prop]?pt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[pt.cssProps[t.prop]]&&!pt.cssHooks[t.prop]?t.elem[t.prop]=t.now:pt.style(t.elem,t.prop,t.now+t.unit)}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},pt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},pt.fx=B.prototype.init,pt.fx.step={};var fe,pe,me=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;pt.Animation=pt.extend(W,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return p(i.elem,t,zt.exec(e),i),i}]},tweener:function(t,e){pt.isFunction(t)?(e=t,t=["*"]):t=t.match(Mt);for(var i,n=0,r=t.length;r>n;n++)i=t[n],W.tweeners[i]=W.tweeners[i]||[],W.tweeners[i].unshift(e)},prefilters:[U],prefilter:function(t,e){e?W.prefilters.unshift(t):W.prefilters.push(t)}}),pt.speed=function(t,e,i){var n=t&&"object"==typeof t?pt.extend({},t):{complete:i||!i&&e||pt.isFunction(t)&&t,duration:t,easing:i&&e||e&&!pt.isFunction(e)&&e};return pt.fx.off||et.hidden?n.duration=0:"number"!=typeof n.duration&&(n.duration in pt.fx.speeds?n.duration=pt.fx.speeds[n.duration]:n.duration=pt.fx.speeds._default),null!=n.queue&&n.queue!==!0||(n.queue="fx"),n.old=n.complete,n.complete=function(){pt.isFunction(n.old)&&n.old.call(this),n.queue&&pt.dequeue(this,n.queue)},n},pt.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Ut).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=pt.isEmptyObject(t),o=pt.speed(e,i,n),s=function(){var e=W(this,pt.extend({},t),o);(r||Lt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,
e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=pt.timers,s=Lt.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&ge.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));!e&&i||pt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=Lt.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=pt.timers,s=n?n.length:0;for(i.finish=!0,pt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),pt.each(["toggle","show","hide"],function(t,e){var i=pt.fn[e];pt.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(z(e,!0),t,n,r)}}),pt.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){pt.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),pt.timers=[],pt.fx.tick=function(){var t,e=0,i=pt.timers;for(fe=pt.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||pt.fx.stop(),fe=void 0},pt.fx.timer=function(t){pt.timers.push(t),t()?pt.fx.start():pt.timers.pop()},pt.fx.interval=13,pt.fx.start=function(){pe||(pe=t.requestAnimationFrame?t.requestAnimationFrame(F):t.setInterval(pt.fx.tick,pt.fx.interval))},pt.fx.stop=function(){t.cancelAnimationFrame?t.cancelAnimationFrame(pe):t.clearInterval(pe),pe=null},pt.fx.speeds={slow:600,fast:200,_default:400},pt.fn.delay=function(e,i){return e=pt.fx?pt.fx.speeds[e]||e:e,i=i||"fx",this.queue(i,function(i,n){var r=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(r)}})},function(){var t=et.createElement("input"),e=et.createElement("select"),i=e.appendChild(et.createElement("option"));t.type="checkbox",ut.checkOn=""!==t.value,ut.optSelected=i.selected,t=et.createElement("input"),t.value="t",t.type="radio",ut.radioValue="t"===t.value}();var ve,Ae=pt.expr.attrHandle;pt.fn.extend({attr:function(t,e){return Dt(this,pt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){pt.removeAttr(this,t)})}}),pt.extend({attr:function(t,e,i){var n,r,o=t.nodeType;return 3!==o&&8!==o&&2!==o?"undefined"==typeof t.getAttribute?pt.prop(t,e,i):(1===o&&pt.isXMLDoc(t)||(r=pt.attrHooks[e.toLowerCase()]||(pt.expr.match.bool.test(e)?ve:void 0)),void 0!==i?null===i?void pt.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:(n=pt.find.attr(t,e),null==n?void 0:n)):void 0},attrHooks:{type:{set:function(t,e){if(!ut.radioValue&&"radio"===e&&pt.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(Mt);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),ve={set:function(t,e,i){return e===!1?pt.removeAttr(t,i):t.setAttribute(i,i),i}},pt.each(pt.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Ae[e]||pt.find.attr;Ae[e]=function(t,e,n){var r,o,s=e.toLowerCase();return n||(o=Ae[s],Ae[s]=r,r=null!=i(t,e,n)?s:null,Ae[s]=o),r}});var ye=/^(?:input|select|textarea|button)$/i,be=/^(?:a|area)$/i;pt.fn.extend({prop:function(t,e){return Dt(this,pt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[pt.propFix[t]||t]})}}),pt.extend({prop:function(t,e,i){var n,r,o=t.nodeType;return 3!==o&&8!==o&&2!==o?(1===o&&pt.isXMLDoc(t)||(e=pt.propFix[e]||e,r=pt.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]):void 0},propHooks:{tabIndex:{get:function(t){var e=pt.find.attr(t,"tabindex");return e?parseInt(e,10):ye.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ut.optSelected||(pt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),pt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pt.propFix[this.toLowerCase()]=this}),pt.fn.extend({addClass:function(t){var e,i,n,r,o,s,a,h=0;if(pt.isFunction(t))return this.each(function(e){pt(this).addClass(t.call(this,e,Y(this)))});if("string"==typeof t&&t)for(e=t.match(Mt)||[];i=this[h++];)if(r=Y(i),n=1===i.nodeType&&" "+G(r)+" "){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");a=G(n),r!==a&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,o,s,a,h=0;if(pt.isFunction(t))return this.each(function(e){pt(this).removeClass(t.call(this,e,Y(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Mt)||[];i=this[h++];)if(r=Y(i),n=1===i.nodeType&&" "+G(r)+" "){for(s=0;o=e[s++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");a=G(n),r!==a&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):pt.isFunction(t)?this.each(function(i){pt(this).toggleClass(t.call(this,i,Y(this),e),e)}):this.each(function(){var e,n,r,o;if("string"===i)for(n=0,r=pt(this),o=t.match(Mt)||[];e=o[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==i||(e=Y(this),e&&Lt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":Lt.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+G(Y(i))+" ").indexOf(e)>-1)return!0;return!1}});var Ee=/\r/g;pt.fn.extend({val:function(t){var e,i,n,r=this[0];return arguments.length?(n=pt.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,pt(this).val()):t,null==r?r="":"number"==typeof r?r+="":pt.isArray(r)&&(r=pt.map(r,function(t){return null==t?"":t+""})),e=pt.valHooks[this.type]||pt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=pt.valHooks[r.type]||pt.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(Ee,""):null==i?"":i)):void 0}}),pt.extend({valHooks:{option:{get:function(t){var e=pt.find.attr(t,"value");return null!=e?e:G(pt.text(t))}},select:{get:function(t){var e,i,n,r=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],h=s?o+1:r.length;for(n=0>o?h:s?o:0;h>n;n++)if(i=r[n],(i.selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!pt.nodeName(i.parentNode,"optgroup"))){if(e=pt(i).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var i,n,r=t.options,o=pt.makeArray(e),s=r.length;s--;)n=r[s],(n.selected=pt.inArray(pt.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),pt.each(["radio","checkbox"],function(){pt.valHooks[this]={set:function(t,e){return pt.isArray(e)?t.checked=pt.inArray(pt(t).val(),e)>-1:void 0}},ut.checkOn||(pt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var we=/^(?:focusinfocus|focusoutblur)$/;pt.extend(pt.event,{trigger:function(e,i,n,r){var o,s,a,h,l,c,d,u=[n||et],f=lt.call(e,"type")?e.type:e,p=lt.call(e,"namespace")?e.namespace.split("."):[];if(s=a=n=n||et,3!==n.nodeType&&8!==n.nodeType&&!we.test(f+pt.event.triggered)&&(f.indexOf(".")>-1&&(p=f.split("."),f=p.shift(),p.sort()),l=f.indexOf(":")<0&&"on"+f,e=e[pt.expando]?e:new pt.Event(f,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:pt.makeArray(i,[e]),d=pt.event.special[f]||{},r||!d.trigger||d.trigger.apply(n,i)!==!1)){if(!r&&!d.noBubble&&!pt.isWindow(n)){for(h=d.delegateType||f,we.test(h+f)||(s=s.parentNode);s;s=s.parentNode)u.push(s),a=s;a===(n.ownerDocument||et)&&u.push(a.defaultView||a.parentWindow||t)}for(o=0;(s=u[o++])&&!e.isPropagationStopped();)e.type=o>1?h:d.bindType||f,c=(Lt.get(s,"events")||{})[e.type]&&Lt.get(s,"handle"),c&&c.apply(s,i),c=l&&s[l],c&&c.apply&&Ot(s)&&(e.result=c.apply(s,i),e.result===!1&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||d._default&&d._default.apply(u.pop(),i)!==!1||!Ot(n)||l&&pt.isFunction(n[f])&&!pt.isWindow(n)&&(a=n[l],a&&(n[l]=null),pt.event.triggered=f,n[f](),pt.event.triggered=void 0,a&&(n[l]=a)),e.result}},simulate:function(t,e,i){var n=pt.extend(new pt.Event,i,{type:t,isSimulated:!0});pt.event.trigger(n,null,e)}}),pt.fn.extend({trigger:function(t,e){return this.each(function(){pt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?pt.event.trigger(t,e,i,!0):void 0}}),pt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){pt.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),pt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),ut.focusin="onfocusin"in t,ut.focusin||pt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){pt.event.simulate(e,t.target,pt.event.fix(t))};pt.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=Lt.access(n,e);r||n.addEventListener(t,i,!0),Lt.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=Lt.access(n,e)-1;r?Lt.access(n,e,r):(n.removeEventListener(t,i,!0),Lt.remove(n,e))}}});var xe=t.location,_e=pt.now(),Te=/\?/;pt.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(n){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||pt.error("Invalid XML: "+e),i};var Se=/\[\]$/,Re=/\r?\n/g,Ce=/^(?:submit|button|image|reset|file)$/i,ke=/^(?:input|select|textarea|keygen)/i;pt.param=function(t,e){var i,n=[],r=function(t,e){var i=pt.isFunction(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(pt.isArray(t)||t.jquery&&!pt.isPlainObject(t))pt.each(t,function(){r(this.name,this.value)});else for(i in t)q(i,t[i],e,r);return n.join("&")},pt.fn.extend({serialize:function(){return pt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=pt.prop(this,"elements");return t?pt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!pt(this).is(":disabled")&&ke.test(this.nodeName)&&!Ce.test(t)&&(this.checked||!Gt.test(t))}).map(function(t,e){var i=pt(this).val();return null==i?null:pt.isArray(i)?pt.map(i,function(t){return{name:e.name,value:t.replace(Re,"\r\n")}}):{name:e.name,value:i.replace(Re,"\r\n")}}).get()}});var Me=/%20/g,He=/#.*$/,Pe=/([?&])_=[^&]*/,De=/^(.*?):[ \t]*([^\r\n]*)$/gm,Oe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Le=/^(?:GET|HEAD)$/,Ie=/^\/\//,Be={},Fe={},Ne="*/".concat("*"),ze=et.createElement("a");ze.href=xe.href,pt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe.href,type:"GET",isLocal:Oe.test(xe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ne,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":pt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Z(Z(t,pt.ajaxSettings),e):Z(pt.ajaxSettings,t)},ajaxPrefilter:X(Be),ajaxTransport:X(Fe),ajax:function(e,i){function n(e,i,n,a){var l,u,f,b,E,w=i;c||(c=!0,h&&t.clearTimeout(h),r=void 0,s=a||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(b=K(p,x,n)),b=J(p,b,x,l),l?(p.ifModified&&(E=x.getResponseHeader("Last-Modified"),E&&(pt.lastModified[o]=E),E=x.getResponseHeader("etag"),E&&(pt.etag[o]=E)),204===e||"HEAD"===p.type?w="nocontent":304===e?w="notmodified":(w=b.state,u=b.data,f=b.error,l=!f)):(f=w,!e&&w||(w="error",0>e&&(e=0))),x.status=e,x.statusText=(i||w)+"",l?v.resolveWith(m,[u,w,x]):v.rejectWith(m,[x,w,f]),x.statusCode(y),y=void 0,d&&g.trigger(l?"ajaxSuccess":"ajaxError",[x,p,l?u:f]),A.fireWith(m,[x,w]),d&&(g.trigger("ajaxComplete",[x,p]),--pt.active||pt.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=void 0),i=i||{};var r,o,s,a,h,l,c,d,u,f,p=pt.ajaxSetup({},i),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?pt(m):pt.event,v=pt.Deferred(),A=pt.Callbacks("once memory"),y=p.statusCode||{},b={},E={},w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a)for(a={};e=De.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(t,e){return null==c&&(t=E[t.toLowerCase()]=E[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)x.always(t[x.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||w;return r&&r.abort(e),n(0,e),this}};if(v.promise(x),p.url=((e||p.url||xe.href)+"").replace(Ie,xe.protocol+"//"),p.type=i.method||i.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Mt)||[""],null==p.crossDomain){l=et.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=ze.protocol+"//"+ze.host!=l.protocol+"//"+l.host}catch(_){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=pt.param(p.data,p.traditional)),Q(Be,p,i,x),c)return x;d=pt.event&&p.global,d&&0===pt.active++&&pt.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Le.test(p.type),o=p.url.replace(He,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Me,"+")):(f=p.url.slice(o.length),p.data&&(o+=(Te.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(o=o.replace(Pe,"$1"),f=(Te.test(o)?"&":"?")+"_="+_e++ +f),p.url=o+f),p.ifModified&&(pt.lastModified[o]&&x.setRequestHeader("If-Modified-Since",pt.lastModified[o]),pt.etag[o]&&x.setRequestHeader("If-None-Match",pt.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ne+"; q=0.01":""):p.accepts["*"]);for(u in p.headers)x.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(p.beforeSend.call(m,x,p)===!1||c))return x.abort();if(w="abort",A.add(p.complete),x.done(p.success),x.fail(p.error),r=Q(Fe,p,i,x)){if(x.readyState=1,d&&g.trigger("ajaxSend",[x,p]),c)return x;p.async&&p.timeout>0&&(h=t.setTimeout(function(){x.abort("timeout")},p.timeout));try{c=!1,r.send(b,n)}catch(_){if(c)throw _;n(-1,_)}}else n(-1,"No Transport");return x},getJSON:function(t,e,i){return pt.get(t,e,i,"json")},getScript:function(t,e){return pt.get(t,void 0,e,"script")}}),pt.each(["get","post"],function(t,e){pt[e]=function(t,i,n,r){return pt.isFunction(i)&&(r=r||n,n=i,i=void 0),pt.ajax(pt.extend({url:t,type:e,dataType:r,data:i,success:n},pt.isPlainObject(t)&&t))}}),pt._evalUrl=function(t){return pt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},pt.fn.extend({wrapAll:function(t){var e;return this[0]&&(pt.isFunction(t)&&(t=t.call(this[0])),e=pt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return pt.isFunction(t)?this.each(function(e){pt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=pt(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=pt.isFunction(t);return this.each(function(i){pt(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){pt(this).replaceWith(this.childNodes)}),this}}),pt.expr.pseudos.hidden=function(t){return!pt.expr.pseudos.visible(t)},pt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},pt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var je={0:200,1223:204},Ue=pt.ajaxSettings.xhr();ut.cors=!!Ue&&"withCredentials"in Ue,ut.ajax=Ue=!!Ue,pt.ajaxTransport(function(e){var i,n;return ut.cors||Ue&&!e.crossDomain?{send:function(r,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);i=function(t){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(je[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(h){if(i)throw h}},abort:function(){i&&i()}}:void 0}),pt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),pt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return pt.globalEval(t),t}}}),pt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),pt.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,r){e=pt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),et.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Ve=[],We=/(=)\?(?=&|$)|\?\?/;pt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ve.pop()||pt.expando+"_"+_e++;return this[t]=!0,t}}),pt.ajaxPrefilter("json jsonp",function(e,i,n){var r,o,s,a=e.jsonp!==!1&&(We.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&We.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=pt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(We,"$1"+r):e.jsonp!==!1&&(e.url+=(Te.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||pt.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},n.always(function(){void 0===o?pt(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=i.jsonpCallback,Ve.push(r)),s&&pt.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),ut.createHTMLDocument=function(){var t=et.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),pt.parseHTML=function(t,e,i){if("string"!=typeof t)return[];"boolean"==typeof e&&(i=e,e=!1);var n,r,o;return e||(ut.createHTMLDocument?(e=et.implementation.createHTMLDocument(""),n=e.createElement("base"),n.href=et.location.href,e.head.appendChild(n)):e=et),r=xt.exec(t),o=!i&&[],r?[e.createElement(r[1])]:(r=y([t],e,o),o&&o.length&&pt(o).remove(),pt.merge([],r.childNodes))},pt.fn.load=function(t,e,i){var n,r,o,s=this,a=t.indexOf(" ");return a>-1&&(n=G(t.slice(a)),t=t.slice(0,a)),pt.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&pt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(n?pt("<div>").append(pt.parseHTML(t)).find(n):t)}).always(i&&function(t,e){s.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},pt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){pt.fn[e]=function(t){return this.on(e,t)}}),pt.expr.pseudos.animated=function(t){return pt.grep(pt.timers,function(e){return t===e.elem}).length},pt.offset={setOffset:function(t,e,i){var n,r,o,s,a,h,l,c=pt.css(t,"position"),d=pt(t),u={};"static"===c&&(t.style.position="relative"),a=d.offset(),o=pt.css(t,"top"),h=pt.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+h).indexOf("auto")>-1,l?(n=d.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(h)||0),pt.isFunction(e)&&(e=e.call(t,i,pt.extend({},a))),null!=e.top&&(u.top=e.top-a.top+s),null!=e.left&&(u.left=e.left-a.left+r),"using"in e?e.using.call(t,u):d.css(u)}},pt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){pt.offset.setOffset(this,t,e)});var e,i,n,r,o=this[0];return o?o.getClientRects().length?(n=o.getBoundingClientRect(),n.width||n.height?(r=o.ownerDocument,i=$(r),e=r.documentElement,{top:n.top+i.pageYOffset-e.clientTop,left:n.left+i.pageXOffset-e.clientLeft}):n):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===pt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),pt.nodeName(t[0],"html")||(n=t.offset()),n={top:n.top+pt.css(t[0],"borderTopWidth",!0),left:n.left+pt.css(t[0],"borderLeftWidth",!0)}),{top:e.top-n.top-pt.css(i,"marginTop",!0),left:e.left-n.left-pt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===pt.css(t,"position");)t=t.offsetParent;return t||Zt})}}),pt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;pt.fn[t]=function(n){return Dt(this,function(t,n,r){var o=$(t);return void 0===r?o?o[e]:t[n]:void(o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):t[n]=r)},t,n,arguments.length)}}),pt.each(["top","left"],function(t,e){pt.cssHooks[e]=P(ut.pixelPosition,function(t,i){return i?(i=H(t,e),se.test(i)?pt(t).position()[e]+"px":i):void 0})}),pt.each({Height:"height",Width:"width"},function(t,e){pt.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){pt.fn[n]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||o===!0?"margin":"border");return Dt(this,function(e,i,r){var o;return pt.isWindow(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?pt.css(e,i,a):pt.style(e,i,r,a)},e,s?r:void 0,s)}})}),pt.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),pt.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pt});var Ge=t.jQuery,Ye=t.$;return pt.noConflict=function(e){return t.$===pt&&(t.$=Ye),e&&t.jQuery===pt&&(t.jQuery=Ge),pt},e||(t.jQuery=t.$=pt),pt}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Ajv=t()}}(function(){var define,module,exports;return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return r(i?i:t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;n.length>s;s++)r(n[s]);return r}({1:[function(require,module,exports){"use strict";function setupAsync(t,e){e!==!1&&(e=!0);var i,n=t.async,r=t.transpile;switch(typeof r){case"string":var o=TRANSPILE[r];if(!o)throw new Error("bad transpiler: "+r);return t._transpileFunc=o(t,e);case"undefined":case"boolean":if("string"==typeof n){if(i=ASYNC[n],!i)throw new Error("bad async mode: "+n);return t.transpile=i(t,e)}for(var s=0;MODES.length>s;s++){var a=MODES[s];if(setupAsync(a,!1))return util.copy(a,t),t.transpile}throw new Error("generators, nodent and regenerator are not available");case"function":return t._transpileFunc=t.transpile;default:throw new Error("bad transpiler: "+r)}}function checkGenerators(opts,required){try{return eval("(function*(){})()"),!0}catch(e){if(required)throw new Error("generators not supported")}}function checkAsyncFunction(opts,required){try{return eval("(async function(){})()"),!0}catch(e){if(required)throw new Error("es7 async functions not supported")}}function getRegenerator(t,e){try{return regenerator||(regenerator=require("regenerator"),regenerator.runtime()),t.async&&t.async!==!0||(t.async="es7"),regeneratorTranspile}catch(i){if(e)throw new Error("regenerator not available")}}function regeneratorTranspile(t){return regenerator.compile(t).code}function getNodent(t,e){try{return nodent||(nodent=require("nodent")({log:!1,dontInstallRequireHook:!0})),"es7"!=t.async&&(t.async&&t.async!==!0&&console.warn("nodent transpiles only es7 async functions"),t.async="es7"),nodentTranspile}catch(i){if(e)throw new Error("nodent not available")}}function nodentTranspile(t){return nodent.compile(t,"",{promises:!0,sourcemap:!1}).code}function compileAsync(t,e){function i(t,e,n){function o(n){function o(n,o){if(n)return e(n);if(!r._refs[s]&&!r._schemas[s])try{r.addSchema(o,s)}catch(a){return void e(a)}i(t,e)}var s=n.missingSchema;if(r._refs[s]||r._schemas[s])return e(new Error("Schema "+s+" is loaded but"+n.missingRef+"cannot be resolved"));var a=r._loadingSchemas[s];a?"function"==typeof a?r._loadingSchemas[s]=[a,o]:a[a.length]=o:(r._loadingSchemas[s]=o,r._opts.loadSchema(s,function(t,e){var i=r._loadingSchemas[s];if(delete r._loadingSchemas[s],"function"==typeof i)i(t,e);else for(var n=0;i.length>n;n++)i[n](t,e)}))}function s(t,i){return n?void setTimeout(function(){e(t,i)}):e(t,i)}var a;try{a=r.compile(t)}catch(h){return void(h.missingSchema?o(h):s(h))}s(null,a)}var n,r=this;try{n=this._addSchema(t)}catch(o){return void setTimeout(function(){e(o)})}if(n.validate)setTimeout(function(){e(null,n.validate)});else{if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");i(t,e,!0)}}module.exports={setup:setupAsync,compile:compileAsync};var util=require("./compile/util"),ASYNC={"*":checkGenerators,"co*":checkGenerators,es7:checkAsyncFunction},TRANSPILE={nodent:getNodent,regenerator:getRegenerator},MODES=[{async:"co*"},{async:"es7",transpile:"nodent"},{async:"co*",transpile:"regenerator"}],regenerator,nodent},{"./compile/util":10}],2:[function(t,e,i){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(t,e){this._cache[t]=e},n.prototype.get=function(t){return this._cache[t]},n.prototype.del=function(t){delete this._cache[t]},n.prototype.clear=function(){this._cache={}}},{}],3:[function(t,e,i){"use strict";e.exports={$ref:t("../dotjs/ref"),allOf:t("../dotjs/allOf"),anyOf:t("../dotjs/anyOf"),dependencies:t("../dotjs/dependencies"),"enum":t("../dotjs/enum"),format:t("../dotjs/format"),items:t("../dotjs/items"),maximum:t("../dotjs/_limit"),minimum:t("../dotjs/_limit"),maxItems:t("../dotjs/_limitItems"),minItems:t("../dotjs/_limitItems"),maxLength:t("../dotjs/_limitLength"),minLength:t("../dotjs/_limitLength"),maxProperties:t("../dotjs/_limitProperties"),minProperties:t("../dotjs/_limitProperties"),multipleOf:t("../dotjs/multipleOf"),not:t("../dotjs/not"),oneOf:t("../dotjs/oneOf"),pattern:t("../dotjs/pattern"),properties:t("../dotjs/properties"),required:t("../dotjs/required"),uniqueItems:t("../dotjs/uniqueItems"),validate:t("../dotjs/validate")}},{"../dotjs/_limit":13,"../dotjs/_limitItems":14,"../dotjs/_limitLength":15,"../dotjs/_limitProperties":16,"../dotjs/allOf":17,"../dotjs/anyOf":18,"../dotjs/dependencies":20,"../dotjs/enum":21,"../dotjs/format":22,"../dotjs/items":23,"../dotjs/multipleOf":24,"../dotjs/not":25,"../dotjs/oneOf":26,"../dotjs/pattern":27,"../dotjs/properties":29,"../dotjs/ref":30,"../dotjs/required":31,"../dotjs/uniqueItems":33,"../dotjs/validate":34}],4:[function(t,e,i){"use strict";e.exports=function n(t,e){if(t===e)return!0;var i,r=Array.isArray(t),o=Array.isArray(e);if(r&&o){if(t.length!=e.length)return!1;for(i=0;t.length>i;i++)if(!n(t[i],e[i]))return!1;return!0}if(r!=o)return!1;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s=Object.keys(t);if(s.length!==Object.keys(e).length)return!1;for(i=0;s.length>i;i++)if(void 0===e[s[i]])return!1;for(i=0;s.length>i;i++)if(!n(t[s[i]],e[s[i]]))return!1;return!0}return!1}},{}],5:[function(t,e,i){"use strict";function n(t){t="full"==t?"full":"fast";var e=f.copy(n[t]);for(var i in n.compare)e[i]={validate:e[i],compare:n.compare[i]};return e}function r(t){var e=t.match(p);if(!e)return!1;var i=+e[1],n=+e[2];return i>=1&&12>=i&&n>=1&&m[i]>=n}function o(t,e){var i=t.match(g);if(!i)return!1;var n=i[1],r=i[2],o=i[3],s=i[5];return 23>=n&&59>=r&&59>=o&&(!e||s)}function s(t){var e=t.split(w);return r(e[0])&&o(e[1],!0)}function a(t){return 255>=t.length&&v.test(t)}function h(t){return x.test(t)&&A.test(t)}function l(t){try{return new RegExp(t),!0}catch(e){return!1}}function c(t,e){return t&&e?t>e?1:e>t?-1:t===e?0:void 0:void 0}function d(t,e){return t&&e&&(t=t.match(g),e=e.match(g),t&&e)?(t=t[1]+t[2]+t[3]+(t[4]||""),e=e[1]+e[2]+e[3]+(e[4]||""),t>e?1:e>t?-1:t===e?0:void 0):void 0}function u(t,e){if(t&&e){t=t.split(w),e=e.split(w);var i=c(t[0],e[0]);if(void 0!==i)return i||d(t[1],e[1])}}var f=t("./util"),p=/^\d\d\d\d-(\d\d)-(\d\d)$/,m=[0,31,29,31,30,31,30,31,31,30,31,30,31],g=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,v=/^[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?(\.[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?)*$/i,A=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:\#(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,y=/^(?:urn\:uuid\:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,b=/^(?:\/(?:[^~\/]|~0|~1)+)*(?:\/)?$|^\#(?:\/(?:[a-z0-9_\-\.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)+)*(?:\/)?$/i,E=/^(?:0|[1-9][0-9]*)(?:\#|(?:\/(?:[^~\/]|~0|~1)+)*(?:\/)?)$/;e.exports=n,n.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*)?(?:\:|\/)\/?[^\s]*$/i,email:/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:v,
ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:l,uuid:y,"json-pointer":b,"relative-json-pointer":E},n.full={date:r,time:o,"date-time":s,uri:h,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:l,uuid:y,"json-pointer":b,"relative-json-pointer":E},n.compare={date:c,time:d,"date-time":u};var w=/t|\s/i,x=/\/|\:/},{"./util":10}],6:[function(require,module,exports){"use strict";function compile(schema,root,localRefs,baseId){function localCompile(_schema,_root,localRefs,baseId){var isRoot=!_root||_root&&_root.schema==_schema;if(_root.schema!=root.schema)return compile.call(self,_schema,_root,localRefs,baseId);var $async=_schema.$async===!0;$async&&!opts.transpile&&async.setup(opts);var sourceCode=validateGenerator({isTop:!0,schema:_schema,isRoot:isRoot,baseId:baseId,root:_root,schemaPath:"",errSchemaPath:"#",errorPath:'""',RULES:RULES,validate:validateGenerator,util:util,resolve:resolve,resolveRef:resolveRef,usePattern:usePattern,useDefault:useDefault,useCustomRule:useCustomRule,opts:opts,formats:formats,self:self});sourceCode=vars(refVal,refValCode)+vars(patterns,patternCode)+vars(defaults,defaultCode)+vars(customRules,customRuleCode)+sourceCode,opts.beautify&&(beautify?sourceCode=beautify(sourceCode,opts.beautify):console.error('"npm install js-beautify" to use beautify option'));var validate,validateCode,transpile=opts._transpileFunc;try{validateCode=$async&&transpile?transpile(sourceCode):sourceCode,eval(validateCode),refVal[0]=validate}catch(e){throw console.error("Error compiling schema, function code:",validateCode),e}return validate.schema=_schema,validate.errors=null,validate.refs=refs,validate.refVal=refVal,validate.root=isRoot?validate:_root,$async&&(validate.$async=!0),validate.sourceCode=sourceCode,validate}function resolveRef(t,e,i){e=resolve.url(t,e);var n,r,o=refs[e];if(void 0!==o)return n=refVal[o],r="refVal["+o+"]",resolvedRef(n,r);if(!i){var s=root.refs[e];if(void 0!==s)return n=root.refVal[s],r=addLocalRef(e,n),resolvedRef(n,r)}r=addLocalRef(e);var a=resolve.call(self,localCompile,root,e);if(!a){var h=localRefs&&localRefs[e];h&&(a=resolve.inlineRef(h,opts.inlineRefs)?h:compile.call(self,h,root,localRefs,t))}return a?(replaceLocalRef(e,a),resolvedRef(a,r)):void 0}function addLocalRef(t,e){var i=refVal.length;return refVal[i]=e,refs[t]=i,"refVal"+i}function replaceLocalRef(t,e){var i=refs[t];refVal[i]=e}function resolvedRef(t,e){return"object"==typeof t?{code:e,schema:t,inline:!0}:{code:e,$async:t&&t.$async}}function usePattern(t){var e=patternsHash[t];return void 0===e&&(e=patternsHash[t]=patterns.length,patterns[e]=t),"pattern"+e}function useDefault(t){switch(typeof t){case"boolean":case"number":return""+t;case"string":return util.toQuotedString(t);case"object":if(null===t)return"null";var e=stableStringify(t),i=defaultsHash[e];return void 0===i&&(i=defaultsHash[e]=defaults.length,defaults[i]=t),"default"+i}}function useCustomRule(t,e,i,n){var r,o=t.definition.compile,s=t.definition.inline,a=t.definition.macro;o?r=o.call(self,e,i):a?(r=a.call(self,e,i),opts.validateSchema!==!1&&self.validateSchema(r,!0)):r=s?s.call(self,n,t.keyword,e,i):t.definition.validate;var h=customRules.length;return customRules[h]=r,{code:"customRule"+h,validate:r}}var self=this,opts=this._opts,refVal=[void 0],refs={},patterns=[],patternsHash={},defaults=[],defaultsHash={},customRules=[];root=root||{schema:schema,refVal:refVal,refs:refs};var formats=this._formats,RULES=this.RULES;return localCompile(schema,root,localRefs,baseId)}function patternCode(t,e){return"var pattern"+t+" = new RegExp("+util.toQuotedString(e[t])+");"}function defaultCode(t){return"var default"+t+" = defaults["+t+"];"}function refValCode(t,e){return e[t]?"var refVal"+t+" = refVal["+t+"];":""}function customRuleCode(t){return"var customRule"+t+" = customRules["+t+"];"}function vars(t,e){if(!t.length)return"";for(var i="",n=0;t.length>n;n++)i+=e(n,t);return i}var resolve=require("./resolve"),util=require("./util"),stableStringify=require("json-stable-stringify"),async=require("../async"),beautify=function(){try{return require("js-beautify").js_beautify}catch(t){}}(),validateGenerator=require("../dotjs/validate");module.exports=compile;var co=require("co"),ucs2length=util.ucs2length,equal=require("./equal"),ValidationError=require("./validation_error")},{"../async":1,"../dotjs/validate":34,"./equal":4,"./resolve":7,"./util":10,"./validation_error":11,co:45,"json-stable-stringify":46}],7:[function(t,e,i){"use strict";function n(t,e,i){var o=this._refs[i];if("string"==typeof o){if(!this._refs[o])return n.call(this,t,e,o);o=this._refs[o]}if(o=o||this._schemas[i],o instanceof A)return a(o.schema,this._opts.inlineRefs)?o.schema:o.validate||this._compile(o);var s,h,l,c=r.call(this,e,i);return c&&(s=c.schema,e=c.root,l=c.baseId),s instanceof A?h=s.validate||t.call(this,s.schema,e,void 0,l):s&&(h=a(s,this._opts.inlineRefs)?s:t.call(this,s,e,void 0,l)),h}function r(t,e){var i=m.parse(e,!1,!0),n=d(i),r=c(t.schema.id);if(n!==r){var a=u(n),h=this._refs[a];if("string"==typeof h)return o.call(this,t,h,i);if(h instanceof A)h.validate||this._compile(h),t=h;else if(h=this._schemas[a],h instanceof A){if(h.validate||this._compile(h),a==u(e))return{schema:h,root:t,baseId:r};t=h}if(!t.schema)return;r=c(t.schema.id)}return s.call(this,i,r,t.schema,t)}function o(t,e,i){var n=r.call(this,t,e);if(n){var o=n.schema,a=n.baseId;return t=n.root,o.id&&(a=f(a,o.id)),s.call(this,i,a,o,t)}}function s(t,e,i,n){if(t.hash=t.hash||"","#/"==t.hash.slice(0,2)){for(var o=t.hash.split("/"),s=1;o.length>s;s++){var a=o[s];if(a){if(a=v.unescapeFragment(a),i=i[a],!i)break;if(i.id&&!y[a]&&(e=f(e,i.id)),i.$ref){var h=f(e,i.$ref),l=r.call(this,n,h);l&&(i=l.schema,n=l.root,e=l.baseId)}}}return i&&i!=n.schema?{schema:i,root:n,baseId:e}:void 0}}function a(t,e){return e===!1?!1:void 0===e||e===!0?h(t):e?l(t)<=e:void 0}function h(t){var e;if(Array.isArray(t)){for(var i=0;t.length>i;i++)if(e=t[i],"object"==typeof e&&!h(e))return!1}else for(var n in t){if("$ref"==n)return!1;if(e=t[n],"object"==typeof e&&!h(e))return!1}return!0}function l(t){var e,i=0;if(Array.isArray(t)){for(var n=0;t.length>n;n++)if(e=t[n],"object"==typeof e&&(i+=l(e)),i==1/0)return 1/0}else for(var r in t){if("$ref"==r)return 1/0;if(b[r])i++;else if(e=t[r],"object"==typeof e&&(i+=l(e)+1),i==1/0)return 1/0}return i}function c(t,e){e!==!1&&(t=u(t));var i=m.parse(t,!1,!0);return d(i)}function d(t){return(t.protocol||"")+(t.protocol?"//":"")+(t.host||"")+(t.path||"")+"#"}function u(t){return t?t.replace(E,""):""}function f(t,e){return e=u(e),m.resolve(t,e)}function p(t){function e(t,i,r){if(Array.isArray(t))for(var o=0;t.length>o;o++)e.call(this,t[o],i+"/"+o,r);else if(t&&"object"==typeof t){if("string"==typeof t.id){var s=r=r?m.resolve(r,t.id):t.id;s=u(s);var a=this._refs[s];if("string"==typeof a&&(a=this._refs[a]),a&&a.schema){if(!g(t,a.schema))throw new Error('id "'+s+'" resolves to more than one schema')}else if(s!=u(i))if("#"==s[0]){if(n[s]&&!g(t,n[s]))throw new Error('id "'+s+'" resolves to more than one schema');n[s]=t}else this._refs[s]=i}for(var h in t)e.call(this,t[h],i+"/"+v.escapeFragment(h),r)}}var i=u(t.id),n={};return e.call(this,t,c(i,!1),i),n}var m=t("url"),g=t("./equal"),v=t("./util"),A=t("./schema_obj");e.exports=n,n.normalizeId=u,n.fullPath=c,n.url=f,n.ids=p,n.inlineRef=a;var y=v.toHash(["properties","patternProperties","enum","dependencies","definitions"]),b=v.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]),E=/#\/?$/},{"./equal":4,"./schema_obj":9,"./util":10,url:43}],8:[function(t,e,i){"use strict";var n=t("./_rules"),r=t("./util");e.exports=function(){var t=[{type:"number",rules:["maximum","minimum","multipleOf"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","uniqueItems","items"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","properties"]},{rules:["$ref","enum","not","anyOf","oneOf","allOf"]}];return t.all=["type","additionalProperties","patternProperties"],t.keywords=["additionalItems","$schema","id","title","description","default"],t.types=["number","integer","string","array","object","boolean","null"],t.forEach(function(e){e.rules=e.rules.map(function(e){return t.all.push(e),{keyword:e,code:n[e]}})}),t.keywords=r.toHash(t.all.concat(t.keywords)),t.all=r.toHash(t.all),t.types=r.toHash(t.types),t}},{"./_rules":3,"./util":10}],9:[function(t,e,i){"use strict";function n(t){r.copy(t,this)}var r=t("./util");e.exports=n},{"./util":10}],10:[function(t,e,i){"use strict";function n(t,e){e=e||{};for(var i in t)e[i]=t[i];return e}function r(t,e,i){var n=i?" !== ":" === ",r=i?" || ":" && ",o=i?"!":"",s=i?"":"!";switch(t){case"null":return e+n+"null";case"array":return o+"Array.isArray("+e+")";case"object":return"("+o+e+r+"typeof "+e+n+'"object"'+r+s+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+n+'"number"'+r+s+"("+e+" % 1)"+r+e+n+e+")";default:return"typeof "+e+n+'"'+t+'"'}}function o(t,e){switch(t.length){case 1:return r(t[0],e,!0);default:var i="",n=a(t);n.array&&n.object&&(i=n["null"]?"(":"(!"+e+" || ",i+="typeof "+e+' !== "object")',delete n["null"],delete n.array,delete n.object),n.number&&delete n.integer;for(var o in n)i+=(i?" && ":"")+r(o,e,!0);return i}}function s(t){if(Array.isArray(t)){for(var e=[],i=0;t.length>i;i++){var n=t[i];T[n]&&(e[e.length]=n)}if(e.length)return e}else if(T[t])return[t]}function a(t){for(var e={},i=0;t.length>i;i++)e[t[i]]=!0;return e}function h(t){return"number"==typeof t?"["+t+"]":S.test(t)?"."+t:"['"+t.replace(R,"\\$&")+"']"}function l(t){return t.replace(R,"\\$&")}function c(t){for(var e,i=0,n=t.length,r=0;n>r;)i++,e=t.charCodeAt(r++),e>=55296&&56319>=e&&n>r&&(e=t.charCodeAt(r),56320==(64512&e)&&r++);return i}function d(t,e){e+="[^0-9]";var i=t.match(new RegExp(e,"g"));return i?i.length:0}function u(t,e,i){return e+="([^0-9])",i=i.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),i+"$1")}function f(t){return t.replace(C,"").replace(k,"").replace(M,"if (!($1))")}function p(t,e){var i=t.match(H);return i&&2===i.length?e?t.replace(D,"").replace(I,B):t.replace(P,"").replace(O,L):t}function m(t,e){for(var i in t)if(e[i])return!0}function g(t){return"'"+l(t)+"'"}function v(t,e,i,n){var r=i?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return b(t,r)}function A(t,e,i){var n=g(i?"/"+x(e):h(e));return b(t,n)}function y(t,e,i){var n=t.match(F);if(!n)throw new Error("Invalid relative JSON-pointer: "+t);var r=+n[1],o=n[2];if("#"==o){if(r>=e)throw new Error("Cannot access property/index "+r+" levels up, current level is "+e);return i[e-r]}if(r>e)throw new Error("Cannot access data "+r+" levels up, current level is "+e);var s="data"+(e-r||"");if(!o)return s;for(var a=s,l=o.split("/"),c=0;l.length>c;c++){var d=l[c];d&&(s+=h(_(d)),a+=" && "+s)}return a}function b(t,e){return'""'==t?e:(t+" + "+e).replace(/' \+ '/g,"")}function E(t){return _(decodeURIComponent(t))}function w(t){return encodeURIComponent(x(t))}function x(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}function _(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}e.exports={copy:n,checkDataType:r,checkDataTypes:o,coerceToTypes:s,toHash:a,getProperty:h,escapeQuotes:l,ucs2length:c,varOccurences:d,varReplace:u,cleanUpCode:f,cleanUpVarErrors:p,schemaHasRules:m,stableStringify:t("json-stable-stringify"),toQuotedString:g,getPathExpr:v,getPath:A,getData:y,unescapeFragment:E,escapeFragment:w,escapeJsonPointer:x};var T=a(["string","number","integer","boolean","null"]),S=/^[a-z$_][a-z$_0-9]*$/i,R=/'|\\/g,C=/else\s*{\s*}/g,k=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,M=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g,H=/[^v\.]errors/g,P=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,D=/var errors = 0;|var vErrors = null;/g,O="return errors === 0;",L="validate.errors = null; return true;",I=/if \(errors === 0\) return true;\s*else throw new ValidationError\(vErrors\);/,B="return true;",F=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/},{"json-stable-stringify":46}],11:[function(t,e,i){"use strict";function n(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}e.exports=n,n.prototype=Object.create(Error.prototype),n.prototype.constructor=n},{}],12:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="valid"+r;if(n+="var "+d+" = undefined;",t.opts.format===!1)return n+=" "+d+" = true; ";var u=t.schema.format,f=t.opts.v5&&u.$data,p="";if(f){var m=t.util.getData(u.$data,o,t.dataPathArr),g="format"+r,v="compare"+r;n+=" var "+g+" = formats["+m+"] , "+v+" = "+g+" && "+g+".compare;"}else{var g=t.formats[u];if(!g||!g.compare)return n+="  "+d+" = true; ";var v="formats"+t.util.getProperty(u)+".compare"}var A="formatMaximum"==e,y="formatExclusive"+(A?"Maximum":"Minimum"),b=t.schema[y],E=t.opts.v5&&b&&b.$data,w=A?"<":">",x="result"+r,_=t.opts.v5&&s.$data,T=_?t.util.getData(s.$data,o,t.dataPathArr):s;if(_&&(n+=" var schema"+r+" = "+T+"; ",T="schema"+r),E){var S=t.util.getData(b.$data,o,t.dataPathArr),R="exclusive"+r,C="op"+r,k="' + "+C+" + '";n+=" var schemaExcl"+r+" = "+S+"; ",S="schemaExcl"+r,n+=" if (typeof "+S+" != 'boolean' && "+S+" !== undefined) { "+d+" = false; ";var i=y,M=M||[];M.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_formatExclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: '"+y+" should be boolean' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var H=n;n=M.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+H+"]); ":" validate.errors = ["+H+"]; return false; ":" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }  ",l&&(p+="}",n+=" else { "),_&&(n+=" if ("+T+" === undefined) "+d+" = true; else if (typeof "+T+" != 'string') "+d+" = false; else { ",p+="}"),f&&(n+=" if (!"+v+") "+d+" = true; else { ",p+="}"),n+=" var "+x+" = "+v+"("+c+",  ",n+=_?""+T:""+t.util.toQuotedString(s),n+=" ); if ("+x+" === undefined) "+d+" = false; var "+R+" = "+S+" === true; if ("+d+" === undefined) { "+d+" = "+R+" ? "+x+" "+w+" 0 : "+x+" "+w+"= 0; } if (!"+d+") var op"+r+" = "+R+" ? '"+w+"' : '"+w+"=';"}else{var R=b===!0,k=w;R||(k+="=");var C="'"+k+"'";_&&(n+=" if ("+T+" === undefined) "+d+" = true; else if (typeof "+T+" != 'string') "+d+" = false; else { ",p+="}"),f&&(n+=" if (!"+v+") "+d+" = true; else { ",p+="}"),n+=" var "+x+" = "+v+"("+c+",  ",n+=_?""+T:""+t.util.toQuotedString(s),n+=" ); if ("+x+" === undefined) "+d+" = false; if ("+d+" === undefined) "+d+" = "+x+" "+w,R||(n+="="),n+=" 0;"}n+=""+p+"if (!"+d+") { ";var i=e,M=M||[];M.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_formatLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { comparison: '+C+", limit:  ",n+=_?""+T:""+t.util.toQuotedString(s),n+=" , exclusive: "+R+" } ",t.opts.messages!==!1&&(n+=" , message: 'should be "+k+' "',n+=_?"' + "+T+" + '":""+t.util.escapeQuotes(s),n+="\"' "),t.opts.verbose&&(n+=" , schema:  ",n+=_?"validate.schema"+a:""+t.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var H=n;return n=M.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+H+"]); ":" validate.errors = ["+H+"]; return false; ":" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="}"}},{}],13:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d=t.opts.v5&&s.$data,u=d?t.util.getData(s.$data,o,t.dataPathArr):s;d&&(n+=" var schema"+r+" = "+u+"; ",u="schema"+r);var f="maximum"==e,p=f?"exclusiveMaximum":"exclusiveMinimum",m=t.schema[p],g=t.opts.v5&&m&&m.$data,v=f?"<":">",A=f?">":"<";if(g){var y=t.util.getData(m.$data,o,t.dataPathArr),b="exclusive"+r,E="op"+r,w="' + "+E+" + '";n+=" var schemaExcl"+r+" = "+y+"; ",y="schemaExcl"+r,n+=" var exclusive"+r+"; if (typeof "+y+" != 'boolean' && typeof "+y+" != 'undefined') { ";var i=p,x=x||[];x.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: '"+p+" should be boolean' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var _=n;n=x.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+_+"]); ":" validate.errors = ["+_+"]; return false; ":" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if( ",d&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),n+=" ((exclusive"+r+" = "+y+" === true) ? "+c+" "+A+"= "+u+" : "+c+" "+A+" "+u+") || "+c+" !== "+c+") { var op"+r+" = exclusive"+r+" ? '"+v+"' : '"+v+"=';"}else{var b=m===!0,w=v;b||(w+="=");var E="'"+w+"'";n+=" if ( ",d&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),n+=" "+c+" "+A,b&&(n+="="),n+=" "+u+" || "+c+" !== "+c+") {"}var i=e,x=x||[];x.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { comparison: '+E+", limit: "+u+", exclusive: "+b+" } ",t.opts.messages!==!1&&(n+=" , message: 'should be "+w+" ",n+=d?"' + "+u:""+s+"'"),t.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var _=n;return n=x.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+_+"]); ":" validate.errors = ["+_+"]; return false; ":" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n}},{}],14:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d=t.opts.v5&&s.$data,u=d?t.util.getData(s.$data,o,t.dataPathArr):s;d&&(n+=" var schema"+r+" = "+u+"; ",u="schema"+r);var f="maxItems"==e?">":"<";n+="if ( ",d&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),n+=" "+c+".length "+f+" "+u+") { ";var i=e,p=p||[];p.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { limit: '+u+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have ",n+="maxItems"==e?"more":"less",n+=" than ",n+=d?"' + "+u+" + '":""+s,n+=" items' "),t.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},{}],15:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d=t.opts.v5&&s.$data,u=d?t.util.getData(s.$data,o,t.dataPathArr):s;d&&(n+=" var schema"+r+" = "+u+"; ",u="schema"+r);var f="maxLength"==e?">":"<";n+="if ( ",d&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),n+=t.opts.unicode===!1?" "+c+".length ":" ucs2length("+c+") ",n+=" "+f+" "+u+") { ";var i=e,p=p||[];p.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { limit: '+u+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT be ",n+="maxLength"==e?"longer":"shorter",n+=" than ",n+=d?"' + "+u+" + '":""+s,n+=" characters' "),t.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},{}],16:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d=t.opts.v5&&s.$data,u=d?t.util.getData(s.$data,o,t.dataPathArr):s;d&&(n+=" var schema"+r+" = "+u+"; ",u="schema"+r);var f="maxProperties"==e?">":"<";n+="if ( ",d&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),n+=" Object.keys("+c+").length "+f+" "+u+") { ";var i=e,p=p||[];p.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { limit: '+u+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have ",n+="maxProperties"==e?"more":"less",n+=" than ",n+=d?"' + "+u+" + '":""+s,n+=" properties' "),t.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},{}],17:[function(t,e,i){"use strict";e.exports=function(t,e){var i=" ",n=t.schema[e],r=t.schemaPath+"."+e,o=t.errSchemaPath+"/"+e,s=!t.opts.allErrors,a=t.util.copy(t),h="";a.level++;var l=a.baseId,c=n;if(c)for(var d,u=-1,f=c.length-1;f>u;)d=c[u+=1],t.util.schemaHasRules(d,t.RULES.all)&&(a.schema=d,a.schemaPath=r+"["+u+"]",a.errSchemaPath=o+"/"+u,i+="  "+t.validate(a)+" ",a.baseId=l,s&&(i+=" if (valid"+a.level+") { ",h+="}"));return s&&(i+=" "+h.slice(0,-1)),i=t.util.cleanUpCode(i)}},{}],18:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="valid"+r,u="errs__"+r,f=t.util.copy(t),p="";f.level++;var m=s.every(function(e){return t.util.schemaHasRules(e,t.RULES.all)});if(m){var g=f.baseId;n+=" var "+u+" = errors; var "+d+" = false;  ";var v=t.compositeRule;t.compositeRule=f.compositeRule=!0;var A=s;if(A)for(var y,b=-1,E=A.length-1;E>b;)y=A[b+=1],f.schema=y,f.schemaPath=a+"["+b+"]",f.errSchemaPath=h+"/"+b,n+="  "+t.validate(f)+" ",f.baseId=g,n+=" "+d+" = "+d+" || valid"+f.level+"; if (!"+d+") { ",p+="}";t.compositeRule=f.compositeRule=v,n+=" "+p+" if (!"+d+") {  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"anyOf")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } "),n=t.util.cleanUpCode(n)}else l&&(n+=" if (true) { ");return n}},{}],19:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="valid"+r,u=t.opts.v5&&s.$data,f=u?t.util.getData(s.$data,o,t.dataPathArr):s;u&&(n+=" var schema"+r+" = "+f+"; ",f="schema"+r),u||(n+=" var schema"+r+" = validate.schema"+a+";"),n+="var "+d+" = equal("+c+", schema"+r+"); if (!"+d+") {   ";var p=p||[];p.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"constant")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should be equal to constant' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }"}},{}],20:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="errs__"+r,u=t.util.copy(t),f="";u.level++;var p={},m={};for(y in s){var g=s[y],v=Array.isArray(g)?m:p;v[y]=g}n+="var "+d+" = errors;";var A=t.errorPath;n+="var missing"+r+";";for(var y in m){if(v=m[y],n+=" if ("+c+t.util.getProperty(y)+" !== undefined ",l){n+=" && ( ";var b=v;if(b)for(var E,w=-1,x=b.length-1;x>w;){E=b[w+=1],w&&(n+=" || ");var _=t.util.getProperty(E);n+=" ( "+c+_+" === undefined && (missing"+r+" = "+t.util.toQuotedString(t.opts.jsonPointers?E:_)+") ) "}n+=")) {  ";var T="missing"+r,S="' + "+T+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(A,T,!0):A+" + "+T);var R=R||[];R.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"dependencies")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { property: '"+t.util.escapeQuotes(y)+"', missingProperty: '"+S+"', depsCount: "+v.length+", deps: '"+t.util.escapeQuotes(1==v.length?v[0]:v.join(", "))+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should have ",n+=1==v.length?"property "+t.util.escapeQuotes(v[0]):"properties "+t.util.escapeQuotes(v.join(", ")),n+=" when property "+t.util.escapeQuotes(y)+" is present' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var C=n;n=R.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+C+"]); ":" validate.errors = ["+C+"]; return false; ":" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var k=v;if(k)for(var M,H=-1,P=k.length-1;P>H;){M=k[H+=1];var _=t.util.getProperty(M),S=t.util.escapeQuotes(M);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(A,M,t.opts.jsonPointers)),n+=" if ("+c+_+" === undefined) {  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"dependencies")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { property: '"+t.util.escapeQuotes(y)+"', missingProperty: '"+S+"', depsCount: "+v.length+", deps: '"+t.util.escapeQuotes(1==v.length?v[0]:v.join(", "))+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should have ",n+=1==v.length?"property "+t.util.escapeQuotes(v[0]):"properties "+t.util.escapeQuotes(v.join(", ")),n+=" when property "+t.util.escapeQuotes(y)+" is present' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",l&&(f+="}",n+=" else { ")}t.errorPath=A;var D=u.baseId;for(var y in p){var g=p[y];t.util.schemaHasRules(g,t.RULES.all)&&(n+=" valid"+u.level+" = true; if ("+c+"['"+y+"'] !== undefined) { ",u.schema=g,u.schemaPath=a+t.util.getProperty(y),u.errSchemaPath=h+"/"+t.util.escapeFragment(y),n+="  "+t.validate(u)+" ",u.baseId=D,n+=" }  ",l&&(n+=" if (valid"+u.level+") { ",f+="}"))}return l&&(n+="   "+f+" if ("+d+" == errors) {"),n=t.util.cleanUpCode(n)}},{}],21:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="valid"+r,u=t.opts.v5&&s.$data,f=u?t.util.getData(s.$data,o,t.dataPathArr):s;u&&(n+=" var schema"+r+" = "+f+"; ",f="schema"+r);var p="i"+r;u||(n+=" var schema"+r+" = validate.schema"+a+";"),n+="var "+d+";",u&&(n+=" if (schema"+r+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+r+")) "+d+" = false; else {"),n+=""+d+" = false;for (var "+p+"=0; "+p+"<schema"+r+".length; "+p+"++) if (equal("+c+", schema"+r+"["+p+"])) { "+d+" = true; break; }",u&&(n+="  }  "),n+=" if (!"+d+") {   ";var m=m||[];m.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"enum")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),
n}},{}],22:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||"");if(t.opts.format===!1)return l&&(n+=" if (true) { "),n;var d=t.opts.v5&&s.$data,u=d?t.util.getData(s.$data,o,t.dataPathArr):s;if(d&&(n+=" var schema"+r+" = "+u+"; ",u="schema"+r),d){var f="format"+r;n+=" var "+f+" = formats["+u+"]; var isObject"+r+" = typeof "+f+" == 'object' && !("+f+" instanceof RegExp) && "+f+".validate; if (isObject"+r+") { var async"+r+" = "+f+".async; "+f+" = "+f+".validate; } if (  ",d&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),n+=" ("+f+" && !(typeof "+f+" == 'function' ? ",n+=t.async?" (async"+r+" ? "+t.yieldAwait+" "+f+"("+c+") : "+f+"("+c+")) ":" "+f+"("+c+") ",n+=" : "+f+".test("+c+")))) {"}else{var f=t.formats[s];if(!f)return l&&(n+=" if (true) { "),n;var p="object"==typeof f&&!(f instanceof RegExp)&&f.validate;if(p){var m=f.async===!0;f=f.validate}if(m){if(!t.async)throw new Error("async format in sync schema");var g="formats"+t.util.getProperty(s)+".validate";n+=" if (!("+t.yieldAwait+" "+g+"("+c+"))) { "}else{n+=" if (! ";var g="formats"+t.util.getProperty(s);p&&(g+=".validate"),n+="function"==typeof f?" "+g+"("+c+") ":" "+g+".test("+c+") ",n+=") { "}}var v=v||[];v.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"format")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { format:  ',n+=d?""+u:""+t.util.toQuotedString(s),n+="  } ",t.opts.messages!==!1&&(n+=" , message: 'should match format \"",n+=d?"' + "+u+" + '":""+t.util.escapeQuotes(s),n+="\"' "),t.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+t.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var A=n;return n=v.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+A+"]); ":" validate.errors = ["+A+"]; return false; ":" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n}},{}],23:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="valid"+r,u="errs__"+r,f=t.util.copy(t),p="";f.level++;var m=f.dataLevel=t.dataLevel+1,g="data"+m,v=t.baseId;if(n+="var "+u+" = errors;var "+d+";",Array.isArray(s)){var A=t.schema.additionalItems;if(A===!1){n+=" "+d+" = "+c+".length <= "+s.length+"; ";var y=h;h=t.errSchemaPath+"/additionalItems",n+="  if (!"+d+") {   ";var b=b||[];b.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"additionalItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { limit: '+s.length+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have more than "+s.length+" items' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var E=n;n=b.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+E+"]); ":" validate.errors = ["+E+"]; return false; ":" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",h=y,l&&(p+="}",n+=" else { ")}var w=s;if(w)for(var x,_=-1,T=w.length-1;T>_;)if(x=w[_+=1],t.util.schemaHasRules(x,t.RULES.all)){n+=" valid"+f.level+" = true; if ("+c+".length > "+_+") { ";var S=c+"["+_+"]";f.schema=x,f.schemaPath=a+"["+_+"]",f.errSchemaPath=h+"/"+_,f.errorPath=t.util.getPathExpr(t.errorPath,_,t.opts.jsonPointers,!0),f.dataPathArr[m]=_;var R=t.validate(f);f.baseId=v,n+=t.util.varOccurences(R,g)<2?" "+t.util.varReplace(R,g,S)+" ":" var "+g+" = "+S+"; "+R+" ",n+=" }  ",l&&(n+=" if (valid"+f.level+") { ",p+="}")}if("object"==typeof A&&t.util.schemaHasRules(A,t.RULES.all)){f.schema=A,f.schemaPath=t.schemaPath+".additionalItems",f.errSchemaPath=t.errSchemaPath+"/additionalItems",n+=" valid"+f.level+" = true; if ("+c+".length > "+s.length+") {  for (var i"+r+" = "+s.length+"; i"+r+" < "+c+".length; i"+r+"++) { ",f.errorPath=t.util.getPathExpr(t.errorPath,"i"+r,t.opts.jsonPointers,!0);var S=c+"[i"+r+"]";f.dataPathArr[m]="i"+r;var R=t.validate(f);f.baseId=v,n+=t.util.varOccurences(R,g)<2?" "+t.util.varReplace(R,g,S)+" ":" var "+g+" = "+S+"; "+R+" ",l&&(n+=" if (!valid"+f.level+") break; "),n+=" } }  ",l&&(n+=" if (valid"+f.level+") { ",p+="}")}}else if(t.util.schemaHasRules(s,t.RULES.all)){f.schema=s,f.schemaPath=a,f.errSchemaPath=h,n+="  for (var i"+r+" = 0; i"+r+" < "+c+".length; i"+r+"++) { ",f.errorPath=t.util.getPathExpr(t.errorPath,"i"+r,t.opts.jsonPointers,!0);var S=c+"[i"+r+"]";f.dataPathArr[m]="i"+r;var R=t.validate(f);f.baseId=v,n+=t.util.varOccurences(R,g)<2?" "+t.util.varReplace(R,g,S)+" ":" var "+g+" = "+S+"; "+R+" ",l&&(n+=" if (!valid"+f.level+") break; "),n+=" }  ",l&&(n+=" if (valid"+f.level+") { ",p+="}")}return l&&(n+=" "+p+" if ("+u+" == errors) {"),n=t.util.cleanUpCode(n)}},{}],24:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d=t.opts.v5&&s.$data,u=d?t.util.getData(s.$data,o,t.dataPathArr):s;d&&(n+=" var schema"+r+" = "+u+"; ",u="schema"+r),n+="var division"+r+";if (",d&&(n+=" "+u+" !== undefined && ( typeof "+u+" != 'number' || "),n+=" (division"+r+" = "+c+" / "+u+", ",n+=t.opts.multipleOfPrecision?" Math.abs(Math.round(division"+r+") - division"+r+") > 1e-"+t.opts.multipleOfPrecision+" ":" division"+r+" !== parseInt(division"+r+") ",n+=" ) ",d&&(n+="  )  "),n+=" ) {   ";var f=f||[];f.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"multipleOf")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { multipleOf: '+u+" } ",t.opts.messages!==!1&&(n+=" , message: 'should be multiple of ",n+=d?"' + "+u:""+s+"'"),t.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var p=n;return n=f.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},{}],25:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="errs__"+r,u=t.util.copy(t);if(u.level++,t.util.schemaHasRules(s,t.RULES.all)){u.schema=s,u.schemaPath=a,u.errSchemaPath=h,n+=" var "+d+" = errors;  ";var f=t.compositeRule;t.compositeRule=u.compositeRule=!0,u.createErrors=!1;var p;u.opts.allErrors&&(p=u.opts.allErrors,u.opts.allErrors=!1),n+=" "+t.validate(u)+" ",u.createErrors=!0,p&&(u.opts.allErrors=p),t.compositeRule=u.compositeRule=f,n+=" if (valid"+u.level+") {   ";var m=m||[];m.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"not")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var g=n;n=m.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"not")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(n+=" if (false) { ");return n}},{}],26:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="valid"+r,u="errs__"+r,f=t.util.copy(t),p="";f.level++,n+="var "+u+" = errors;var prevValid"+r+" = false;var "+d+" = false;";var m=f.baseId,g=t.compositeRule;t.compositeRule=f.compositeRule=!0;var v=s;if(v)for(var A,y=-1,b=v.length-1;b>y;)A=v[y+=1],t.util.schemaHasRules(A,t.RULES.all)?(f.schema=A,f.schemaPath=a+"["+y+"]",f.errSchemaPath=h+"/"+y,n+="  "+t.validate(f)+" ",f.baseId=m):n+=" var valid"+f.level+" = true; ",y&&(n+=" if (valid"+f.level+" && prevValid"+r+") "+d+" = false; else { ",p+="}"),n+=" if (valid"+f.level+") "+d+" = prevValid"+r+" = true;";t.compositeRule=f.compositeRule=g,n+=""+p+"if (!"+d+") {   ";var E=E||[];E.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"oneOf")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var w=n;return n=E.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+w+"]); ":" validate.errors = ["+w+"]; return false; ":" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }",t.opts.allErrors&&(n+=" } "),n}},{}],27:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d=t.opts.v5&&s.$data,u=d?t.util.getData(s.$data,o,t.dataPathArr):s;d&&(n+=" var schema"+r+" = "+u+"; ",u="schema"+r);var f=d?"(new RegExp("+u+"))":t.usePattern(s);n+="if ( ",d&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),n+=" !"+f+".test("+c+") ) {   ";var p=p||[];p.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"pattern")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { pattern:  ',n+=d?""+u:""+t.util.toQuotedString(s),n+="  } ",t.opts.messages!==!1&&(n+=" , message: 'should match pattern \"",n+=d?"' + "+u+" + '":""+t.util.escapeQuotes(s),n+="\"' "),t.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+t.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},{}],28:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="valid"+r,u="key"+r,f="patternMatched"+r,p="",m=t.opts.ownProperties;n+="var "+d+" = true;";var g=s;if(g)for(var v,A=-1,y=g.length-1;y>A;){v=g[A+=1],n+=" var "+f+" = false; for (var "+u+" in "+c+") {  ",m&&(n+=" if (!Object.prototype.hasOwnProperty.call("+c+", "+u+")) continue; "),n+=" "+f+" = "+t.usePattern(v)+".test("+u+"); if ("+f+") break; } ";var b=t.util.escapeQuotes(v);n+=" if (!"+f+") { "+d+" = false;  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"patternRequired")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingPattern: '"+b+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should have property matching pattern \\'"+b+"\\'' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; }   ",l&&(p+="}",n+=" else { ")}return n+=""+p}},{}],29:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="valid"+r,u="errs__"+r,f=t.util.copy(t),p="";f.level++;var m="key"+r,g=f.dataLevel=t.dataLevel+1,v="data"+g,A=Object.keys(s||{}),y=t.schema.patternProperties||{},b=Object.keys(y),E=t.schema.additionalProperties,w=A.length||b.length,x=E===!1,_="object"==typeof E&&Object.keys(E).length,T=t.opts.removeAdditional,S=x||_||T,R=t.opts.ownProperties,C=t.baseId,k=t.schema.required;if(k&&(!t.opts.v5||!k.$data)&&t.opts.loopRequired>k.length)var M=t.util.toHash(k);if(t.opts.v5)var H=t.schema.patternGroups||{},P=Object.keys(H);if(n+="var "+u+" = errors;var valid"+f.level+" = true;",S){if(n+=" for (var "+m+" in "+c+") {  ",R&&(n+=" if (!Object.prototype.hasOwnProperty.call("+c+", "+m+")) continue; "),w){if(n+=" var isAdditional"+r+" = !(false ",A.length)if(A.length>5)n+=" || validate.schema"+a+"["+m+"] ";else{var D=A;if(D)for(var O,L=-1,I=D.length-1;I>L;)O=D[L+=1],n+=" || "+m+" == "+t.util.toQuotedString(O)+" "}if(b.length){var B=b;if(B)for(var F,N=-1,z=B.length-1;z>N;)F=B[N+=1],n+=" || "+t.usePattern(F)+".test("+m+") "}if(t.opts.v5&&P&&P.length){var j=P;if(j)for(var U,N=-1,V=j.length-1;V>N;)U=j[N+=1],n+=" || "+t.usePattern(U)+".test("+m+") "}n+=" ); if (isAdditional"+r+") { "}if("all"==T)n+=" delete "+c+"["+m+"]; ";else{var W=t.errorPath,G="' + key"+r+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,"key"+r,t.opts.jsonPointers)),x)if(T)n+=" delete "+c+"["+m+"]; ";else{n+=" valid"+f.level+" = false; ";var Y=h;h=t.errSchemaPath+"/additionalProperties";var q=q||[];q.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"additionalProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { additionalProperty: '"+G+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have additional properties' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var X=n;n=q.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+X+"]); ":" validate.errors = ["+X+"]; return false; ":" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=Y,l&&(n+=" break; ")}else if(_)if("failing"==T){n+=" var "+u+" = errors;  ";var Q=t.compositeRule;t.compositeRule=f.compositeRule=!0,f.schema=E,f.schemaPath=t.schemaPath+".additionalProperties",f.errSchemaPath=t.errSchemaPath+"/additionalProperties",f.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,"key"+r,t.opts.jsonPointers);var Z=c+"[key"+r+"]";f.dataPathArr[g]="key"+r;var K=t.validate(f);f.baseId=C,n+=t.util.varOccurences(K,v)<2?" "+t.util.varReplace(K,v,Z)+" ":" var "+v+" = "+Z+"; "+K+" ",n+=" if (!valid"+f.level+") { errors = "+u+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+c+"["+m+"]; }  ",t.compositeRule=f.compositeRule=Q}else{f.schema=E,f.schemaPath=t.schemaPath+".additionalProperties",f.errSchemaPath=t.errSchemaPath+"/additionalProperties",f.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,"key"+r,t.opts.jsonPointers);var Z=c+"[key"+r+"]";f.dataPathArr[g]="key"+r;var K=t.validate(f);f.baseId=C,n+=t.util.varOccurences(K,v)<2?" "+t.util.varReplace(K,v,Z)+" ":" var "+v+" = "+Z+"; "+K+" ",l&&(n+=" if (!valid"+f.level+") break; ")}t.errorPath=W}w&&(n+=" } "),n+=" }  ",l&&(n+=" if (valid"+f.level+") { ",p+="}")}var J=t.opts.useDefaults&&!t.compositeRule;if(A.length){var $=A;if($)for(var O,tt=-1,et=$.length-1;et>tt;){O=$[tt+=1];var it=s[O];if(t.util.schemaHasRules(it,t.RULES.all)){var nt=t.util.getProperty(O),Z=c+nt,rt=J&&void 0!==it["default"];f.schema=it,f.schemaPath=a+nt,f.errSchemaPath=h+"/"+t.util.escapeFragment(O),f.errorPath=t.util.getPath(t.errorPath,O,t.opts.jsonPointers),f.dataPathArr[g]=t.util.toQuotedString(O);var K=t.validate(f);if(f.baseId=C,t.util.varOccurences(K,v)<2){K=t.util.varReplace(K,v,Z);var ot=Z}else{var ot=v;n+=" var "+v+" = "+Z+"; "}if(rt)n+=" "+K+" ";else{if(M&&M[O]){n+=" if ("+ot+" === undefined) { valid"+f.level+" = false; ";var W=t.errorPath,Y=h,st=t.util.escapeQuotes(O);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(W,O,t.opts.jsonPointers)),h=t.errSchemaPath+"/required";var q=q||[];q.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+st+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+st+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var X=n;n=q.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+X+"]); ":" validate.errors = ["+X+"]; return false; ":" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=Y,t.errorPath=W,n+=" } else { "}else n+=l?" if ("+ot+" === undefined) { valid"+f.level+" = true; } else { ":" if ("+ot+" !== undefined) { ";n+=" "+K+" } "}}l&&(n+=" if (valid"+f.level+") { ",p+="}")}}var at=b;if(at)for(var F,ht=-1,lt=at.length-1;lt>ht;){F=at[ht+=1];var it=y[F];if(t.util.schemaHasRules(it,t.RULES.all)){f.schema=it,f.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(F),f.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(F),n+=" for (var "+m+" in "+c+") {  ",R&&(n+=" if (!Object.prototype.hasOwnProperty.call("+c+", "+m+")) continue; "),n+=" if ("+t.usePattern(F)+".test("+m+")) { ",f.errorPath=t.util.getPathExpr(t.errorPath,"key"+r,t.opts.jsonPointers);var Z=c+"[key"+r+"]";f.dataPathArr[g]="key"+r;var K=t.validate(f);f.baseId=C,n+=t.util.varOccurences(K,v)<2?" "+t.util.varReplace(K,v,Z)+" ":" var "+v+" = "+Z+"; "+K+" ",l&&(n+=" if (!valid"+f.level+") break; "),n+=" } ",l&&(n+=" else valid"+f.level+" = true; "),n+=" }  ",l&&(n+=" if (valid"+f.level+") { ",p+="}")}}if(t.opts.v5){var ct=P;if(ct)for(var U,dt=-1,ut=ct.length-1;ut>dt;){U=ct[dt+=1];var ft=H[U],it=ft.schema;if(t.util.schemaHasRules(it,t.RULES.all)){f.schema=it,f.schemaPath=t.schemaPath+".patternGroups"+t.util.getProperty(U)+".schema",f.errSchemaPath=t.errSchemaPath+"/patternGroups/"+t.util.escapeFragment(U)+"/schema",n+=" var pgPropCount"+r+" = 0; for (var "+m+" in "+c+") {  ",R&&(n+=" if (!Object.prototype.hasOwnProperty.call("+c+", "+m+")) continue; "),n+=" if ("+t.usePattern(U)+".test("+m+")) { pgPropCount"+r+"++; ",f.errorPath=t.util.getPathExpr(t.errorPath,"key"+r,t.opts.jsonPointers);var Z=c+"[key"+r+"]";f.dataPathArr[g]="key"+r;var K=t.validate(f);f.baseId=C,n+=t.util.varOccurences(K,v)<2?" "+t.util.varReplace(K,v,Z)+" ":" var "+v+" = "+Z+"; "+K+" ",l&&(n+=" if (!valid"+f.level+") break; "),n+=" } ",l&&(n+=" else valid"+f.level+" = true; "),n+=" }  ",l&&(n+=" if (valid"+f.level+") { ",p+="}");var pt=ft.minimum,mt=ft.maximum;if(void 0!==pt||void 0!==mt){n+=" var "+d+" = true; ";var Y=h;if(void 0!==pt){var gt=pt,vt="minimum",At="less";n+=" "+d+" = pgPropCount"+r+" >= "+pt+"; ",h=t.errSchemaPath+"/patternGroups/minimum",n+="  if (!"+d+") {   ";var q=q||[];q.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"patternGroups")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { reason: '"+vt+"', limit: "+gt+", pattern: '"+t.util.escapeQuotes(U)+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have "+At+" than "+gt+' properties matching pattern "'+t.util.escapeQuotes(U)+"\"' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var X=n;n=q.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+X+"]); ":" validate.errors = ["+X+"]; return false; ":" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",void 0!==mt&&(n+=" else ")}if(void 0!==mt){var gt=mt,vt="maximum",At="more";n+=" "+d+" = pgPropCount"+r+" <= "+mt+"; ",h=t.errSchemaPath+"/patternGroups/maximum",n+="  if (!"+d+") {   ";var q=q||[];q.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"patternGroups")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { reason: '"+vt+"', limit: "+gt+", pattern: '"+t.util.escapeQuotes(U)+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have "+At+" than "+gt+' properties matching pattern "'+t.util.escapeQuotes(U)+"\"' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var X=n;n=q.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+X+"]); ":" validate.errors = ["+X+"]; return false; ":" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}h=Y,l&&(n+=" if ("+d+") { ",p+="}")}}}}return l&&(n+=" "+p+" if ("+u+" == errors) {"),n=t.util.cleanUpCode(n)}},{}],30:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n,r,o=" ",s=t.level,a=t.dataLevel,h=t.schema[e],l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,d="data"+(a||""),u="valid"+s;if("#"==h||"#/"==h)t.isRoot?(n=t.async,r="validate"):(n=t.root.schema.$async===!0,r="root.refVal[0]");else{var f=t.resolveRef(t.baseId,h,t.isRoot);if(void 0===f){var p="can't resolve reference "+h+" from id "+t.baseId;if("fail"==t.opts.missingRefs){console.log(p);var m=m||[];m.push(o),o="",t.createErrors!==!1?(o+=" { keyword: '"+(i||"$ref")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+l+"\" , params: { ref: '"+t.util.escapeQuotes(h)+"' } ",t.opts.messages!==!1&&(o+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(h)+"' "),t.opts.verbose&&(o+=" , schema: "+t.util.toQuotedString(h)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var g=o;o=m.pop(),o+=!t.compositeRule&&c?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(o+=" if (false) { ")}else{if("ignore"!=t.opts.missingRefs){var v=new Error(p);throw v.missingRef=t.resolve.url(t.baseId,h),v.missingSchema=t.resolve.normalizeId(t.resolve.fullPath(v.missingRef)),v}console.log(p),c&&(o+=" if (true) { ")}}else if(f.inline){var A=t.util.copy(t);A.level++,A.schema=f.schema,A.schemaPath="",A.errSchemaPath=h;var y=t.validate(A).replace(/validate\.schema/g,f.code);o+=" "+y+" ",c&&(o+=" if (valid"+A.level+") { ")}else n=f.$async===!0,r=f.code}if(r){var m=m||[];m.push(o),o="",o+=t.opts.passContext?" "+r+".call(this, ":" "+r+"( ",o+=" "+d+", (dataPath || '')",'""'!=t.errorPath&&(o+=" + "+t.errorPath),o+=a?" , data"+(a-1||"")+" , "+t.dataPathArr[a]+" ":" , parentData , parentDataProperty ",o+=")  ";var b=o;if(o=m.pop(),n){if(!t.async)throw new Error("async schema referenced by sync schema");o+=" try { ",c&&(o+="var "+u+" ="),o+=" "+t.yieldAwait+" "+b+"; } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; } ",c&&(o+=" if ("+u+") { ")}else o+=" if (!"+b+") { if (vErrors === null) vErrors = "+r+".errors; else vErrors = vErrors.concat("+r+".errors); errors = vErrors.length; } ",c&&(o+=" else { ")}return o}},{}],31:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="valid"+r,u=t.opts.v5&&s.$data,f=u?t.util.getData(s.$data,o,t.dataPathArr):s;if(u&&(n+=" var schema"+r+" = "+f+"; ",f="schema"+r),!u)if(t.opts.loopRequired>s.length&&t.schema.properties&&Object.keys(t.schema.properties).length){var p=[],m=s;if(m)for(var g,v=-1,A=m.length-1;A>v;){g=m[v+=1];var y=t.schema.properties[g];y&&t.util.schemaHasRules(y,t.RULES.all)||(p[p.length]=g)}}else var p=s;if(u||p.length){var b=t.errorPath,E=u||p.length>=t.opts.loopRequired;if(l)if(n+=" var missing"+r+"; ",E){u||(n+=" var schema"+r+" = validate.schema"+a+"; ");var w="i"+r,x="schema"+r+"["+w+"]",_="' + "+x+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(b,x,t.opts.jsonPointers)),n+=" var "+d+" = true; ",u&&(n+=" if (schema"+r+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+r+")) "+d+" = false; else {"),n+=" for (var "+w+" = 0; "+w+" < schema"+r+".length; "+w+"++) { "+d+" = "+c+"[schema"+r+"["+w+"]] !== undefined; if (!"+d+") break; } ",u&&(n+="  }  "),n+="  if (!"+d+") {   ";var T=T||[];T.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+_+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+_+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var S=n;n=T.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var R=p;if(R)for(var C,w=-1,k=R.length-1;k>w;){C=R[w+=1],w&&(n+=" || ");var M=t.util.getProperty(C);n+=" ( "+c+M+" === undefined && (missing"+r+" = "+t.util.toQuotedString(t.opts.jsonPointers?C:M)+") ) "}n+=") {  ";var x="missing"+r,_="' + "+x+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(b,x,!0):b+" + "+x);var T=T||[];T.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+_+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+_+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var S=n;n=T.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(E){u||(n+=" var schema"+r+" = validate.schema"+a+"; ");var w="i"+r,x="schema"+r+"["+w+"]",_="' + "+x+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(b,x,t.opts.jsonPointers)),u&&(n+=" if (schema"+r+" && !Array.isArray(schema"+r+")) {  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+_+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+_+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (schema"+r+" !== undefined) { "),n+=" for (var "+w+" = 0; "+w+" < schema"+r+".length; "+w+"++) { if ("+c+"[schema"+r+"["+w+"]] === undefined) {  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+_+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+_+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",u&&(n+="  }  ")}else{var H=p;if(H)for(var P,D=-1,O=H.length-1;O>D;){P=H[D+=1];var M=t.util.getProperty(P),_=t.util.escapeQuotes(P);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(b,P,t.opts.jsonPointers)),n+=" if ("+c+M+" === undefined) {  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+_+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+_+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=b}else l&&(n+=" if (true) {");return n}},{}],32:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="valid"+r,u="errs__"+r,f=t.util.copy(t),p="";f.level++;var m,g="ifPassed"+t.level,v=f.baseId;n+="var "+g+";";var A=s;if(A)for(var y,b=-1,E=A.length-1;E>b;){if(y=A[b+=1],b&&!m&&(n+=" if (!"+g+") { ",p+="}"),y["if"]&&t.util.schemaHasRules(y["if"],t.RULES.all)){n+=" var "+u+" = errors;   ";var w=t.compositeRule;if(t.compositeRule=f.compositeRule=!0,f.createErrors=!1,f.schema=y["if"],f.schemaPath=a+"["+b+"].if",f.errSchemaPath=h+"/"+b+"/if",n+="  "+t.validate(f)+" ",f.baseId=v,f.createErrors=!0,t.compositeRule=f.compositeRule=w,n+=" "+g+" = valid"+f.level+"; if ("+g+") {  ","boolean"==typeof y.then){if(y.then===!1){var x=x||[];x.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"switch")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { caseIndex: '+b+" } ",t.opts.messages!==!1&&(n+=" , message: 'should pass \"switch\" keyword validation' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var _=n;n=x.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+_+"]); ":" validate.errors = ["+_+"]; return false; ":" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" var valid"+f.level+" = "+y.then+"; "}else f.schema=y.then,f.schemaPath=a+"["+b+"].then",f.errSchemaPath=h+"/"+b+"/then",n+="  "+t.validate(f)+" ",f.baseId=v;n+="  } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } } "}else if(n+=" "+g+" = true;  ","boolean"==typeof y.then){if(y.then===!1){var x=x||[];x.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"switch")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { caseIndex: '+b+" } ",t.opts.messages!==!1&&(n+=" , message: 'should pass \"switch\" keyword validation' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var _=n;n=x.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+_+"]); ":" validate.errors = ["+_+"]; return false; ":" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" var valid"+f.level+" = "+y.then+"; "}else f.schema=y.then,f.schemaPath=a+"["+b+"].then",f.errSchemaPath=h+"/"+b+"/then",n+="  "+t.validate(f)+" ",f.baseId=v;m=y["continue"]}return n+=""+p+"var "+d+" = valid"+f.level+"; ",n=t.util.cleanUpCode(n)}},{}],33:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n=" ",r=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),d="valid"+r,u=t.opts.v5&&s.$data,f=u?t.util.getData(s.$data,o,t.dataPathArr):s;
if(u&&(n+=" var schema"+r+" = "+f+"; ",f="schema"+r),(s||u)&&t.opts.uniqueItems!==!1){u&&(n+=" var "+d+"; if ("+f+" === false || "+f+" === undefined) "+d+" = true; else if (typeof "+f+" != 'boolean') "+d+" = false; else { "),n+=" var "+d+" = true; if ("+c+".length > 1) { var i = "+c+".length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal("+c+"[i], "+c+"[j])) { "+d+" = false; break outer; } } } } ",u&&(n+="  }  "),n+=" if (!"+d+") {   ";var p=p||[];p.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"uniqueItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { i: i, j: j } ',t.opts.messages!==!1&&(n+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(n+=" , schema:  ",n+=u?"validate.schema"+a:""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var m=n;n=p.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { ")}else l&&(n+=" if (true) { ");return n}},{}],34:[function(t,e,i){"use strict";e.exports=function(t,e){function i(t){for(var e=0;t.rules.length>e;e++)if(n(t.rules[e]))return!0}function n(e){return void 0!==t.schema[e.keyword]||"properties"==e.keyword&&(t.schema.additionalProperties===!1||"object"==typeof t.schema.additionalProperties||t.schema.patternProperties&&Object.keys(t.schema.patternProperties).length||t.opts.v5&&t.schema.patternGroups&&Object.keys(t.schema.patternGroups).length)}var r="",o=t.schema.$async===!0;if(t.isTop){var s=t.isTop,a=t.level=0,h=t.dataLevel=0,l="data";if(t.rootId=t.resolve.fullPath(t.root.schema.id),t.baseId=t.baseId||t.rootId,o){t.async=!0;var c="es7"==t.opts.async;t.yieldAwait=c?"await":"yield"}delete t.isTop,t.dataPathArr=[void 0],r+=" validate = ",o?c?r+=" (async function ":("co*"==t.opts.async&&(r+="co.wrap"),r+="(function* "):r+=" (function ",r+=" (data, dataPath, parentData, parentDataProperty) { 'use strict'; var vErrors = null; ",r+=" var errors = 0;     "}else{var a=t.level,h=t.dataLevel,l="data"+(h||"");if(t.schema.id&&(t.baseId=t.resolve.url(t.baseId,t.schema.id)),o&&!t.async)throw new Error("async schema in sync schema");r+=" var errs_"+a+" = errors;"}var d,u="valid"+a,f=!t.opts.allErrors,p="",m="",g=t.schema.type,v=Array.isArray(g);if(g&&t.opts.coerceTypes){var A=t.util.coerceToTypes(g);if(A){var y=t.schemaPath+".type",b=t.errSchemaPath+"/type",E=v?"checkDataTypes":"checkDataType";r+=" if ("+t.util[E](g,l,!0)+") {  ";var w="dataType"+a,x="coerced"+a;r+=" var "+w+" = typeof "+l+"; var "+x+" = undefined; ";var _="",T=A;if(T)for(var S,R=-1,C=T.length-1;C>R;)S=T[R+=1],R&&(r+=" if ("+x+" === undefined) { ",_+="}"),"string"==S?r+=" if ("+w+" == 'number' || "+w+" == 'boolean') "+x+" = '' + "+l+"; else if ("+l+" === null) "+x+" = ''; ":"number"==S||"integer"==S?(r+=" if ("+w+" == 'boolean' || "+l+" === null || ("+w+" == 'string' && "+l+" && "+l+" == +"+l+" ","integer"==S&&(r+=" && !("+l+" % 1)"),r+=")) "+x+" = +"+l+"; "):"boolean"==S?r+=" if ("+l+" === 'false' || "+l+" === 0 || "+l+" === null) "+x+" = false; else if ("+l+" === 'true' || "+l+" === 1) "+x+" = true; ":"null"==S&&(r+=" if ("+l+" === '' || "+l+" === 0 || "+l+" === false) "+x+" = null; ");r+=" "+_+" if ("+x+" === undefined) {   ";var k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(d||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+b+"\" , params: { type: '",r+=v?""+g.join(","):""+g,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",r+=v?""+g.join(","):""+g,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+y+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var M=r;if(r=k.pop(),r+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",h){var H="data"+(h-1||""),P=t.dataPathArr[h];r+=" "+l+" = "+H+"["+P+"] = "+x+"; "}else r+=" data = "+x+"; if (parentData !== undefined) parentData[parentDataProperty] = "+x+"; ";r+=" } } "}}var D=t.RULES;if(D)for(var O,L=-1,I=D.length-1;I>L;)if(O=D[L+=1],i(O)){if(O.type&&(r+=" if ("+t.util.checkDataType(O.type,l)+") { "),t.opts.useDefaults&&!t.compositeRule)if("object"==O.type&&t.schema.properties){var B=t.schema.properties,F=Object.keys(B),N=F;if(N)for(var z,j=-1,U=N.length-1;U>j;){z=N[j+=1];var V=B[z];if(void 0!==V["default"]){var W=l+t.util.getProperty(z);r+="  if ("+W+" === undefined) "+W+" = ",r+="shared"==t.opts.useDefaults?" "+t.useDefault(V["default"])+" ":" "+JSON.stringify(V["default"])+" ",r+="; "}}}else if("array"==O.type&&Array.isArray(t.schema.items)){var G=t.schema.items;if(G)for(var V,R=-1,Y=G.length-1;Y>R;)if(V=G[R+=1],void 0!==V["default"]){var W=l+"["+R+"]";r+="  if ("+W+" === undefined) "+W+" = ",r+="shared"==t.opts.useDefaults?" "+t.useDefault(V["default"])+" ":" "+JSON.stringify(V["default"])+" ",r+="; "}}var q=O.rules;if(q)for(var X,Q=-1,Z=q.length-1;Z>Q;)if(X=q[Q+=1],n(X)){if(X.custom){var B=t.schema[X.keyword],K=t.useCustomRule(X,B,t.schema,t),J=K.code+".errors",y=t.schemaPath+"."+X.keyword,b=t.errSchemaPath+"/"+X.keyword,$="errs"+a,R="i"+a,tt="ruleErr"+a,et=X.definition,it=et.async,nt=et.inline,rt=et.macro;if(it&&!t.async)throw new Error("async keyword in sync schema");if(nt||rt||(r+=""+J+" = null;"),r+="var "+$+" = errors;var valid"+a+";",nt&&et.statements)r+=" "+K.validate;else if(rt){var ot=t.util.copy(t);ot.level++,ot.schema=K.validate,ot.schemaPath="";var st=t.compositeRule;t.compositeRule=ot.compositeRule=!0;var at=t.validate(ot).replace(/validate\.schema/g,K.code);t.compositeRule=ot.compositeRule=st,r+=" "+at}else if(et.compile||et.validate){var k=k||[];k.push(r),r="",r+="  "+K.code+".call( ",r+=t.opts.passContext?"this":"self",r+=et.compile||et.schema===!1?" , "+l+" ":" , validate.schema"+y+" , "+l+" , validate.schema"+t.schemaPath+" ",r+=" , (dataPath || '')",'""'!=t.errorPath&&(r+=" + "+t.errorPath),r+=h?" , data"+(h-1||"")+" , "+t.dataPathArr[h]+" ":" , parentData , parentDataProperty ",r+=" )  ";var ht=r;r=k.pop(),et.errors!==!1&&(it?(J="customErrors"+a,r+=" var "+J+" = null; try { valid"+a+" = "+t.yieldAwait+ht+"; } catch (e) { valid"+a+" = false; if (e instanceof ValidationError) "+J+" = e.errors; else throw e; } "):r+=" "+K.code+".errors = null; ")}r+="if (! ",r+=nt?et.statements?" valid"+a+" ":" ("+K.validate+") ":rt?" valid"+ot.level+" ":it?et.errors===!1?" ("+t.yieldAwait+ht+") ":" valid"+a+" ":" "+ht+" ",r+=") { ",d=X.keyword;var k=k||[];k.push(r),r="";var k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+b+"\" , params: { keyword: '"+X.keyword+"' } ",t.opts.messages!==!1&&(r+=" , message: 'should pass \""+X.keyword+"\" keyword validation' "),t.opts.verbose&&(r+=" , schema: validate.schema"+y+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var M=r;r=k.pop(),r+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var lt=r;r=k.pop(),nt?et.errors?"full"!=et.errors&&(r+="  for (var "+R+"="+$+"; "+R+"<errors; "+R+"++) { var "+tt+" = vErrors["+R+"]; if ("+tt+".dataPath === undefined) { "+tt+".dataPath = (dataPath || '') + "+t.errorPath+"; } if ("+tt+".schemaPath === undefined) { "+tt+'.schemaPath = "'+b+'"; } ',t.opts.verbose&&(r+=" "+tt+".schema = validate.schema"+y+"; "+tt+".data = "+l+"; "),r+=" } "):et.errors===!1?r+=" "+lt+" ":(r+=" if ("+$+" == errors) { "+lt+" } else {  for (var "+R+"="+$+"; "+R+"<errors; "+R+"++) { var "+tt+" = vErrors["+R+"]; if ("+tt+".dataPath === undefined) { "+tt+".dataPath = (dataPath || '') + "+t.errorPath+"; } if ("+tt+".schemaPath === undefined) { "+tt+'.schemaPath = "'+b+'"; } ',t.opts.verbose&&(r+=" "+tt+".schema = validate.schema"+y+"; "+tt+".data = "+l+"; "),r+=" } } "):rt?(r+="   var err =   ",t.createErrors!==!1?(r+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+b+"\" , params: { keyword: '"+X.keyword+"' } ",t.opts.messages!==!1&&(r+=" , message: 'should pass \""+X.keyword+"\" keyword validation' "),t.opts.verbose&&(r+=" , schema: validate.schema"+y+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&f&&(r+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false ")):et.errors===!1?r+=" "+lt+" ":(r+=" if (Array.isArray("+J+")) { if (vErrors === null) vErrors = "+J+"; else vErrors.concat("+J+"); errors = vErrors.length;  for (var "+R+"="+$+"; "+R+"<errors; "+R+"++) { var "+tt+" = vErrors["+R+"];  "+tt+".dataPath = (dataPath || '') + "+t.errorPath+";   "+tt+'.schemaPath = "'+b+'";  ',t.opts.verbose&&(r+=" "+tt+".schema = validate.schema"+y+"; "+tt+".data = "+l+"; "),r+=" } } else { "+lt+" } "),d=void 0,r+=" } ",f&&(r+=" else { ")}else r+=" "+X.code(t,X.keyword)+" ";f&&(p+="}")}if(f&&(r+=" "+p+" ",p=""),O.type&&(r+=" } ",g&&g===O.type)){var ct=!0;r+=" else { ";var y=t.schemaPath+".type",b=t.errSchemaPath+"/type",k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(d||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+b+"\" , params: { type: '",r+=v?""+g.join(","):""+g,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",r+=v?""+g.join(","):""+g,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+y+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var M=r;r=k.pop(),r+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}f&&(r+=" if (errors === ",r+=s?"0":"errs_"+a,r+=") { ",m+="}")}if(g&&!ct&&(!t.opts.coerceTypes||!A)){var y=t.schemaPath+".type",b=t.errSchemaPath+"/type",E=v?"checkDataTypes":"checkDataType";r+=" if ("+t.util[E](g,l,!0)+") {   ";var k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(d||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+b+"\" , params: { type: '",r+=v?""+g.join(","):""+g,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",r+=v?""+g.join(","):""+g,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+y+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var M=r;r=k.pop(),r+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }"}return f&&(r+=" "+m+" "),s?(o?(r+=" if (errors === 0) return true;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" });"):r+=" var "+u+" = errors === errs_"+a+";",r=t.util.cleanUpCode(r),s&&f&&(r=t.util.cleanUpVarErrors(r,o)),r}},{}],35:[function(t,e,i){"use strict";var n=/^[a-z_$][a-z0-9_$]*$/i;e.exports=function(t,e){function i(t,e,i){for(var n,r=0;o.RULES.length>r;r++){var s=o.RULES[r];if(s.type==e){n=s;break}}n||(n={type:e,rules:[]},o.RULES.push(n));var a={keyword:t,definition:i,custom:!0};n.rules.push(a)}function r(t){if(!o.RULES.types[t])throw new Error("Unknown type "+t)}var o=this;if(this.RULES.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!n.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){var s=e.type;if(Array.isArray(s)){var a,h=s.length;for(a=0;h>a;a++)r(s[a]);for(a=0;h>a;a++)i(t,s[a],e)}else s&&r(s),i(t,s,e)}this.RULES.keywords[t]=!0,this.RULES.all[t]=!0}},{}],36:[function(t,e,i){e.exports={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},"default":{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean","default":!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean","default":!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean","default":!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},"enum":{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},"default":{}}},{}],37:[function(t,e,i){e.exports={id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema (v5 proposals)",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},$data:{type:"object",required:["$data"],properties:{$data:{type:"string",format:"relative-json-pointer"}},additionalProperties:!1}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},"default":{},multipleOf:{anyOf:[{type:"number",minimum:0,exclusiveMinimum:!0},{$ref:"#/definitions/$data"}]},maximum:{anyOf:[{type:"number"},{$ref:"#/definitions/$data"}]},exclusiveMaximum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},minimum:{anyOf:[{type:"number"},{$ref:"#/definitions/$data"}]},exclusiveMinimum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},maxLength:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minLength:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},pattern:{anyOf:[{type:"string",format:"regex"},{$ref:"#/definitions/$data"}]},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"},{$ref:"#/definitions/$data"}],"default":{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minItems:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},uniqueItems:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},maxProperties:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minProperties:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},required:{anyOf:[{$ref:"#/definitions/stringArray"},{$ref:"#/definitions/$data"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"},{$ref:"#/definitions/$data"}],"default":{}},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},"enum":{anyOf:[{type:"array",minItems:1,uniqueItems:!0},{$ref:"#/definitions/$data"}]},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"},format:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},formatMaximum:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},formatMinimum:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},formatExclusiveMaximum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},formatExclusiveMinimum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},constant:{anyOf:[{},{$ref:"#/definitions/$data"}]},contains:{$ref:"#"},patternGroups:{type:"object",additionalProperties:{type:"object",required:["schema"],properties:{maximum:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minimum:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},schema:{$ref:"#"}},additionalProperties:!1},"default":{}},"switch":{type:"array",items:{required:["then"],properties:{"if":{$ref:"#"},then:{anyOf:[{type:"boolean"},{$ref:"#"}]},"continue":{type:"boolean"}},additionalProperties:!1,dependencies:{"continue":["if"]}}}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"],formatMaximum:["format"],formatMinimum:["format"],formatExclusiveMaximum:["formatMaximum"],formatExclusiveMinimum:["formatMinimum"]},"default":{}}},{}],38:[function(t,e,i){"use strict";function n(e){function i(t,i,r){var o={inline:r||n[t],statements:!0,errors:"full"};i&&(o.type=i),e.addKeyword(t,o)}var n={"switch":t("./dotjs/switch"),constant:t("./dotjs/constant"),_formatLimit:t("./dotjs/_formatLimit"),patternRequired:t("./dotjs/patternRequired")};if(e._opts.meta!==!1){var s=t("./refs/json-schema-v5.json");e.addMetaSchema(s,o)}i("constant"),e.addKeyword("contains",{type:"array",macro:r}),i("formatMaximum","string",n._formatLimit),i("formatMinimum","string",n._formatLimit),e.addKeyword("formatExclusiveMaximum"),e.addKeyword("formatExclusiveMinimum"),e.addKeyword("patternGroups"),i("patternRequired","object"),i("switch")}function r(t){return{not:{items:{not:t}}}}var o="https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json";e.exports={enable:n,META_SCHEMA_ID:o}},{"./dotjs/_formatLimit":12,"./dotjs/constant":19,"./dotjs/patternRequired":28,"./dotjs/switch":32,"./refs/json-schema-v5.json":37}],39:[function(t,e,i){(function(t){!function(n){function r(t){throw new RangeError(D[t])}function o(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function s(t,e){var i=t.split("@"),n="";i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(P,".");var r=t.split("."),s=o(r,e).join(".");return n+s}function a(t){for(var e,i,n=[],r=0,o=t.length;o>r;)e=t.charCodeAt(r++),e>=55296&&56319>=e&&o>r?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function h(t){return o(t,function(t){var e="";return t>65535&&(t-=65536,e+=I(t>>>10&1023|55296),t=56320|1023&t),e+=I(t)}).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:w}function c(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function d(t,e,i){var n=0;for(t=i?L(t/S):t>>1,t+=L(t/e);t>O*_>>1;n+=w)t=L(t/O);return L(n+(O+1)*t/(t+T))}function u(t){var e,i,n,o,s,a,c,u,f,p,m=[],g=t.length,v=0,A=C,y=R;for(i=t.lastIndexOf(k),0>i&&(i=0),n=0;i>n;++n)t.charCodeAt(n)>=128&&r("not-basic"),m.push(t.charCodeAt(n));for(o=i>0?i+1:0;g>o;){for(s=v,a=1,c=w;o>=g&&r("invalid-input"),u=l(t.charCodeAt(o++)),(u>=w||u>L((E-v)/a))&&r("overflow"),v+=u*a,f=y>=c?x:c>=y+_?_:c-y,!(f>u);c+=w)p=w-f,a>L(E/p)&&r("overflow"),a*=p;e=m.length+1,y=d(v-s,e,0==s),L(v/e)>E-A&&r("overflow"),A+=L(v/e),v%=e,m.splice(v++,0,A)}return h(m)}function f(t){var e,i,n,o,s,h,l,u,f,p,m,g,v,A,y,b=[];for(t=a(t),g=t.length,e=C,i=0,s=R,h=0;g>h;++h)m=t[h],128>m&&b.push(I(m));for(n=o=b.length,o&&b.push(k);g>n;){for(l=E,h=0;g>h;++h)m=t[h],m>=e&&l>m&&(l=m);for(v=n+1,l-e>L((E-i)/v)&&r("overflow"),i+=(l-e)*v,e=l,h=0;g>h;++h)if(m=t[h],e>m&&++i>E&&r("overflow"),m==e){for(u=i,f=w;p=s>=f?x:f>=s+_?_:f-s,!(p>u);f+=w)y=u-p,A=w-p,b.push(I(c(p+y%A,0))),u=L(y/A);b.push(I(c(u,0))),s=d(i,v,n==o),i=0,++n}++i,++e}return b.join("")}function p(t){return s(t,function(t){return M.test(t)?u(t.slice(4).toLowerCase()):t})}function m(t){return s(t,function(t){return H.test(t)?"xn--"+f(t):t})}var g="object"==typeof i&&i&&!i.nodeType&&i,v="object"==typeof e&&e&&!e.nodeType&&e,A="object"==typeof t&&t;A.global!==A&&A.window!==A&&A.self!==A||(n=A);var y,b,E=2147483647,w=36,x=1,_=26,T=38,S=700,R=72,C=128,k="-",M=/^xn--/,H=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=w-x,L=Math.floor,I=String.fromCharCode;if(y={version:"1.4.1",ucs2:{decode:a,encode:h},decode:u,encode:f,toASCII:m,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return y});else if(g&&v)if(e.exports==g)v.exports=y;else for(b in y)y.hasOwnProperty(b)&&(g[b]=y[b]);else n.punycode=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var h=1e3;o&&"number"==typeof o.maxKeys&&(h=o.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var c=0;l>c;++c){var d,u,f,p,m=t[c].replace(a,"%20"),g=m.indexOf(i);g>=0?(d=m.substr(0,g),u=m.substr(g+1)):(d=m,u=""),f=decodeURIComponent(d),p=decodeURIComponent(u),n(s,f)?r(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],41:[function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;t.length>n;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(s(t),function(s){var a=encodeURIComponent(r(s))+i;return o(t[s])?n(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],42:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":40,"./encode":41}],43:[function(t,e,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&l.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function o(t){return l.isString(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return r(t,!1,!0).resolve(e)}function a(t,e){return t?r(t,!1,!0).resolveObject(e):e}var h=t("punycode"),l=t("./util");i.parse=r,i.resolve=s,i.resolveObject=a,i.format=o,i.Url=n;var c=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","    "],p=["{","}","|","\\","^","`"].concat(f),m=["'"].concat(p),g=["%","/","?",";","#"].concat(m),v=["/","?","#"],A=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=t("querystring");n.prototype.parse=function(t,e,i){if(!l.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(r),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(r);var a=t;if(a=a.trim(),!i&&1===t.split("#").length){var d=u.exec(a);if(d)return this.path=a,this.href=a,this.pathname=d[1],d[2]?(this.search=d[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=c.exec(a);if(f){f=f[0];var p=f.toLowerCase();this.protocol=p,a=a.substr(f.length)}if(i||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===a.substr(0,2);!T||f&&w[f]||(a=a.substr(2),this.slashes=!0)}if(!w[f]&&(T||f&&!x[f])){for(var S=-1,R=0;v.length>R;R++){var C=a.indexOf(v[R]);-1!==C&&(-1===S||S>C)&&(S=C)}var k,M;M=-1===S?a.lastIndexOf("@"):a.lastIndexOf("@",S),-1!==M&&(k=a.slice(0,M),a=a.slice(M+1),this.auth=decodeURIComponent(k)),S=-1;for(var R=0;g.length>R;R++){var C=a.indexOf(g[R]);-1!==C&&(-1===S||S>C)&&(S=C)}-1===S&&(S=a.length),this.host=a.slice(0,S),a=a.slice(S),this.parseHost(),this.hostname=this.hostname||"";var H="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!H)for(var P=this.hostname.split(/\./),R=0,D=P.length;D>R;R++){var O=P[R];if(O&&!O.match(y)){for(var L="",I=0,B=O.length;B>I;I++)L+=O.charCodeAt(I)>127?"x":O[I];if(!L.match(y)){var F=P.slice(0,R),N=P.slice(R+1),z=O.match(b);z&&(F.push(z[1]),N.unshift(z[2])),N.length&&(a="/"+N.join(".")+a),this.hostname=F.join(".");break}}}this.hostname=this.hostname.length>A?"":this.hostname.toLowerCase(),H||(this.hostname=h.toASCII(this.hostname));var j=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+j,this.href+=this.host,H&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!E[p])for(var R=0,D=m.length;D>R;R++){var V=m[R];if(-1!==a.indexOf(V)){var W=encodeURIComponent(V);W===V&&(W=escape(V)),a=a.split(V).join(W)}}var G=a.indexOf("#");-1!==G&&(this.hash=a.substr(G),a=a.slice(0,G));var Y=a.indexOf("?");if(-1!==Y?(this.search=a.substr(Y),this.query=a.substr(Y+1),e&&(this.query=_.parse(this.query)),a=a.slice(0,Y)):e&&(this.search="",this.query={}),a&&(this.pathname=a),x[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",q=this.search||"";this.path=j+q}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=_.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||x[e])&&r!==!1?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+r+i+s+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(l.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),o=0;r.length>o;o++){var s=r[o];i[s]=this[s]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),h=0;a.length>h;h++){var c=a[h];"protocol"!==c&&(i[c]=t[c])}return x[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!x[t.protocol]){for(var d=Object.keys(t),u=0;d.length>u;u++){var f=d[u];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||w[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),2>p.length&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",g=i.search||"";i.path=m+g}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),A=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=A||v||i.host&&t.pathname,b=y,E=i.pathname&&i.pathname.split("/")||[],p=t.pathname&&t.pathname.split("/")||[],_=i.protocol&&!x[i.protocol];if(_&&(i.hostname="",i.port=null,i.host&&(""===E[0]?E[0]=i.host:E.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),y=y&&(""===p[0]||""===E[0])),A)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),i.search=t.search,i.query=t.query;else if(!l.isNullOrUndefined(t.search)){if(_){i.hostname=i.host=E.shift();var T=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;T&&(i.auth=T.shift(),i.host=i.hostname=T.shift())}return i.search=t.search,i.query=t.query,l.isNull(i.pathname)&&l.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!E.length)return i.pathname=null,i.path=i.search?"/"+i.search:null,i.href=i.format(),i;for(var S=E.slice(-1)[0],R=(i.host||t.host||E.length>1)&&("."===S||".."===S)||""===S,C=0,k=E.length;k>=0;k--)S=E[k],"."===S?E.splice(k,1):".."===S?(E.splice(k,1),C++):C&&(E.splice(k,1),C--);if(!y&&!b)for(;C--;C)E.unshift("..");!y||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),R&&"/"!==E.join("/").substr(-1)&&E.push("");var M=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(_){i.hostname=i.host=M?"":E.length?E.shift():"";var T=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;T&&(i.auth=T.shift(),i.host=i.hostname=T.shift())}return y=y||i.host&&E.length,y&&!M&&E.unshift(""),E.length?i.pathname=E.join("/"):(i.pathname=null,i.path=null),l.isNull(i.pathname)&&l.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":44,punycode:39,querystring:42}],44:[function(t,e,i){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],45:[function(t,e,i){function n(t){var e=this,i=u.call(arguments,1);return new Promise(function(n,o){function s(e){var i;try{i=t.next(e)}catch(n){return o(n)}l(i)}function a(e){var i;
try{i=t["throw"](e)}catch(n){return o(n)}l(i)}function l(t){if(t.done)return n(t.value);var i=r.call(e,t.value);return i&&h(i)?i.then(s,a):a(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(t.value)+'"'))}return"function"==typeof t&&(t=t.apply(e,i)),t&&"function"==typeof t.next?void s():n(t)})}function r(t){return t?h(t)?t:c(t)||l(t)?n.call(this,t):"function"==typeof t?o.call(this,t):Array.isArray(t)?s.call(this,t):d(t)?a.call(this,t):t:t}function o(t){var e=this;return new Promise(function(i,n){t.call(e,function(t,e){return t?n(t):(arguments.length>2&&(e=u.call(arguments,1)),void i(e))})})}function s(t){return Promise.all(t.map(r,this))}function a(t){function e(t,e){i[e]=void 0,o.push(t.then(function(t){i[e]=t}))}for(var i=new t.constructor,n=Object.keys(t),o=[],s=0;n.length>s;s++){var a=n[s],l=r.call(this,t[a]);l&&h(l)?e(l,a):i[a]=t[a]}return Promise.all(o).then(function(){return i})}function h(t){return"function"==typeof t.then}function l(t){return"function"==typeof t.next&&"function"==typeof t["throw"]}function c(t){var e=t.constructor;return e?"GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName?!0:l(e.prototype):!1}function d(t){return Object==t.constructor}var u=Array.prototype.slice;e.exports=n["default"]=n.co=n,n.wrap=function(t){function e(){return n.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e}},{}],46:[function(t,e,i){var n="undefined"!=typeof JSON?JSON:t("jsonify");e.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var i=e.space||"";"number"==typeof i&&(i=Array(i+1).join(" "));var s="boolean"==typeof e.cycles?e.cycles:!1,a=e.replacer||function(t,e){return e},h=e.cmp&&function(t){return function(e){return function(i,n){var r={key:i,value:e[i]},o={key:n,value:e[n]};return t(r,o)}}}(e.cmp),l=[];return function c(t,e,d,u){var f=i?"\n"+new Array(u+1).join(i):"",p=i?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),d=a.call(t,e,d),void 0!==d){if("object"!=typeof d||null===d)return n.stringify(d);if(r(d)){for(var m=[],g=0;d.length>g;g++){var v=c(d,g,d[g],u+1)||n.stringify(null);m.push(f+i+v)}return"["+m.join(",")+f+"]"}if(-1!==l.indexOf(d)){if(s)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(d);for(var A=o(d).sort(h&&h(d)),m=[],g=0;A.length>g;g++){var e=A[g],y=c(d,e,d[e],u+1);if(y){var b=n.stringify(e)+p+y;m.push(f+i+b)}}return l.splice(l.indexOf(d),1),"{"+m.join(",")+f+"}"}}({"":t},"",t,0)};var r=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},o=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(var n in t)e.call(t,n)&&i.push(n);return i}},{jsonify:47}],47:[function(t,e,i){i.parse=t("./lib/parse"),i.stringify=t("./lib/stringify")},{"./lib/parse":48,"./lib/stringify":49}],48:[function(t,e,i){var n,r,o,s,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"  "},h=function(t){throw{name:"SyntaxError",message:t,at:n,text:o}},l=function(t){return t&&t!==r&&h("Expected '"+t+"' instead of '"+r+"'"),r=o.charAt(n),n+=1,r},c=function(){var t,e="";for("-"===r&&(e="-",l("-"));r>="0"&&"9">=r;)e+=r,l();if("."===r)for(e+=".";l()&&r>="0"&&"9">=r;)e+=r;if("e"===r||"E"===r)for(e+=r,l(),"-"!==r&&"+"!==r||(e+=r,l());r>="0"&&"9">=r;)e+=r,l();return t=+e,isFinite(t)?t:void h("Bad number")},d=function(){var t,e,i,n="";if('"'===r)for(;l();){if('"'===r)return l(),n;if("\\"===r)if(l(),"u"===r){for(i=0,e=0;4>e&&(t=parseInt(l(),16),isFinite(t));e+=1)i=16*i+t;n+=String.fromCharCode(i)}else{if("string"!=typeof a[r])break;n+=a[r]}else n+=r}h("Bad string")},u=function(){for(;r&&" ">=r;)l()},f=function(){switch(r){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}h("Unexpected '"+r+"'")},p=function(){var t=[];if("["===r){if(l("["),u(),"]"===r)return l("]"),t;for(;r;){if(t.push(s()),u(),"]"===r)return l("]"),t;l(","),u()}}h("Bad array")},m=function(){var t,e={};if("{"===r){if(l("{"),u(),"}"===r)return l("}"),e;for(;r;){if(t=d(),u(),l(":"),Object.hasOwnProperty.call(e,t)&&h('Duplicate key "'+t+'"'),e[t]=s(),u(),"}"===r)return l("}"),e;l(","),u()}}h("Bad object")};s=function(){switch(u(),r){case"{":return m();case"[":return p();case'"':return d();case"-":return c();default:return r>="0"&&"9">=r?c():f()}},e.exports=function(t,e){var i;return o=t,n=0,r=" ",i=s(),u(),r&&h("Syntax error"),"function"==typeof e?function a(t,i){var n,r,o=t[i];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=a(o,n),void 0!==r?o[n]=r:delete o[n]);return e.call(t,i,o)}({"":i},""):i}},{}],49:[function(t,e,i){function n(t){return h.lastIndex=0,h.test(t)?'"'+t.replace(h,function(t){var e=l[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function r(t,e){var i,h,l,c,d,u=o,f=e[t];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(t)),"function"==typeof a&&(f=a.call(e,t,f)),typeof f){case"string":return n(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(o+=s,d=[],"[object Array]"===Object.prototype.toString.apply(f)){for(c=f.length,i=0;c>i;i+=1)d[i]=r(i,f)||"null";return l=0===d.length?"[]":o?"[\n"+o+d.join(",\n"+o)+"\n"+u+"]":"["+d.join(",")+"]",o=u,l}if(a&&"object"==typeof a)for(c=a.length,i=0;c>i;i+=1)h=a[i],"string"==typeof h&&(l=r(h,f),l&&d.push(n(h)+(o?": ":":")+l));else for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&(l=r(h,f),l&&d.push(n(h)+(o?": ":":")+l));return l=0===d.length?"{}":o?"{\n"+o+d.join(",\n"+o)+"\n"+u+"}":"{"+d.join(",")+"}",o=u,l}}var o,s,a,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\b":"\\b","    ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};e.exports=function(t,e,i){var n;if(o="",s="","number"==typeof i)for(n=0;i>n;n+=1)s+=" ";else"string"==typeof i&&(s=i);if(a=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return r("",{"":t})}},{}],ajv:[function(t,e,i){"use strict";function n(t){return v.test(t)}function r(e){function i(t,e){var i;if("string"==typeof t){if(i=_(t),!i)throw new Error('no schema with key or ref "'+t+'"')}else{var n=C(t);i=n.validate||k(n)}var r=i(e);return i.$async===!0?"*"==B._opts.async?m(r):r:(B.errors=i.errors,r)}function y(t){var e=C(t);return e.validate||k(e)}function b(t,e,i,n){if(Array.isArray(t))for(var r=0;t.length>r;r++)b(t[r],void 0,i,n);else{e=s.normalizeId(e||t.id),L(e);var o=B._schemas[e]=C(t,i,!0);o.meta=n}}function E(t,e,i){b(t,e,i,!0)}function w(t,e){var r=t.$schema||B._opts.defaultMeta||x(),o=B._formats.uri;B._formats.uri="function"==typeof o?n:v;var s=i(r,t);if(B._formats.uri=o,!s&&e){var a="schema is invalid:"+M();if("log"!=B._opts.validateSchema)throw new Error(a);console.error(a)}return s}function x(){var t=B._opts.meta;return B._opts.defaultMeta="object"==typeof t?t.id||t:B._opts.v5?u.META_SCHEMA_ID:g}function _(t){var e=T(t);switch(typeof e){case"object":return e.validate||k(e);case"string":return _(e)}}function T(t){return t=s.normalizeId(t),B._schemas[t]||B._refs[t]}function S(t){if(t instanceof RegExp)return R(B._schemas,t),void R(B._refs,t);switch(typeof t){case"undefined":return R(B._schemas),R(B._refs),void B._cache.clear();case"string":var e=T(t);return e&&B._cache.del(e.jsonStr),delete B._schemas[t],void delete B._refs[t];case"object":var i=l(t);B._cache.del(i);var n=t.id;n&&(n=s.normalizeId(n),delete B._schemas[n],delete B._refs[n])}}function R(t,e){for(var i in t){var n=t[i];n.meta||e&&!e.test(i)||(B._cache.del(n.jsonStr),delete t[i])}}function C(t,e,i){if("object"!=typeof t)throw new Error("schema should be object");var n=l(t),r=B._cache.get(n);if(r)return r;i=i||B._opts.addUsedSchema!==!1;var o=s.normalizeId(t.id);o&&i&&L(o),B._opts.validateSchema===!1||e||w(t,!0);var a=s.ids.call(B,t),c=new h({id:o,schema:t,localRefs:a,jsonStr:n});return"#"!=o[0]&&i&&(B._refs[o]=c),B._cache.put(n,c),c}function k(t,e){function i(){var e=t.validate,n=e.apply(null,arguments);return i.errors=e.errors,n}if(t.compiling)return t.validate=i,i.schema=t.schema,i.errors=null,i.root=e?e:i,t.schema.$async===!0&&(i.$async=!0),i;t.compiling=!0;var n;t.meta&&(n=B._opts,B._opts=B._metaOpts);var r;try{r=o.call(B,t.schema,e,t.localRefs)}finally{t.compiling=!1,t.meta&&(B._opts=n)}return t.validate=r,t.refs=r.refs,t.refVal=r.refVal,t.root=r.root,r}function M(t,e){if(t=t||B.errors,!t)return"No errors";e=e||{};for(var i=void 0===e.separator?", ":e.separator,n=void 0===e.dataVar?"data":e.dataVar,r="",o=0;t.length>o;o++){var s=t[o];s&&(r+=n+s.dataPath+" "+s.message+i)}return r.slice(0,-i.length)}function H(t,e){"string"==typeof e&&(e=new RegExp(e)),B._formats[t]=e}function P(){if(B._opts.meta!==!1){var e=t("./refs/json-schema-draft-04.json");E(e,g,!0),B._refs["http://json-schema.org/schema"]=g}}function D(){var t=B._opts.schemas;if(t)if(Array.isArray(t))b(t);else for(var e in t)b(t[e],e)}function O(){for(var t in B._opts.formats){var e=B._opts.formats[t];H(t,e)}}function L(t){if(B._schemas[t]||B._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function I(){for(var t=f.copy(B._opts),e=0;A.length>e;e++)delete t[A[e]];return t}if(!(this instanceof r))return new r(e);var B=this;e=this._opts=f.copy(e)||{},this._schemas={},this._refs={},this._formats=c(e.format),this._cache=e.cache||new a,this._loadingSchemas={},this.RULES=d(),this.validate=i,this.compile=y,this.addSchema=b,this.addMetaSchema=E,this.validateSchema=w,this.getSchema=_,this.removeSchema=S,this.addFormat=H,this.errorsText=M,this._addSchema=C,this._compile=k,e.loopRequired=e.loopRequired||1/0,(e.async||e.transpile)&&p.setup(e),e.beautify===!0&&(e.beautify={indent_size:2}),"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),this._metaOpts=I(),e.formats&&O(),P(),e.v5&&u.enable(this),"object"==typeof e.meta&&E(e.meta),D()}var o=t("./compile"),s=t("./compile/resolve"),a=t("./cache"),h=t("./compile/schema_obj"),l=t("json-stable-stringify"),c=t("./compile/formats"),d=t("./compile/rules"),u=t("./v5"),f=t("./compile/util"),p=t("./async"),m=t("co");e.exports=r,r.prototype.compileAsync=p.compile,r.prototype.addKeyword=t("./keyword"),r.ValidationError=t("./compile/validation_error");var g="http://json-schema.org/draft-04/schema",v=/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,A=["removeAdditional","useDefaults","coerceTypes"]},{"./async":1,"./cache":2,"./compile":6,"./compile/formats":5,"./compile/resolve":7,"./compile/rules":8,"./compile/schema_obj":9,"./compile/util":10,"./compile/validation_error":11,"./keyword":35,"./refs/json-schema-draft-04.json":36,"./v5":38,co:45,"json-stable-stringify":46}]},{},[])("ajv")}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var r=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){s.detach().trigger("closed.bs.alert").remove()}var r=t(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var s=t(o);e&&e.preventDefault(),s.length||(s=r.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var r=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.button"),o="object"==typeof e&&e;r||n.data("bs.button",r=new i(this,o)),"toggle"==e?r.toggle():e&&r.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,r=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[r]()),setTimeout(t.proxy(function(){n[r](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.carousel"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),s="string"==typeof e?e:o.slide;r||n.data("bs.carousel",r=new i(this,o)),"number"==typeof e?r.to(e):s?r[s]():o.interval&&r.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),n="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(n&&!this.options.wrap)return e;var r="prev"==t?-1:1,o=(i+r)%this.$items.length;return this.$items.eq(o)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var r=this.$element.find(".item.active"),o=n||this.getItemForDirection(e,r),s=this.interval,a="next"==e?"left":"right",h=this;if(o.hasClass("active"))return this.sliding=!1;var l=o[0],c=t.Event("slide.bs.carousel",{relatedTarget:l,direction:a});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(o)]);d&&d.addClass("active")}var u=t.Event("slid.bs.carousel",{relatedTarget:l,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,r.addClass(a),o.addClass(a),r.one("bsTransitionEnd",function(){o.removeClass([e,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger(u)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(u)),s&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var r=function(i){var n,r=t(this),o=t(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var s=t.extend({},o.data(),r.data()),a=r.attr("data-slide-to");a&&(s.interval=!1),e.call(o,s),a&&o.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),r=i.data("bs.collapse"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!r&&o.toggle&&/show|hide/.test(e)&&(o.toggle=!1),r||i.data("bs.collapse",r=new n(this,o)),"string"==typeof e&&r[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.5",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(e=r.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(i.call(r,"hide"),e||r.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var h=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[s](this.$element[0][h])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION):r.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var r=t(n);this.addAriaAndCollapsedClass(e(r),r)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var r=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=r,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var r=t(this);r.attr("data-target")||n.preventDefault();var o=e(r),s=o.data("bs.collapse"),a=s?"toggle":r.data();i.call(o,a)})}(jQuery),+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(r).remove(),t(o).each(function(){var n=t(this),r=e(n),o={relatedTarget:this};r.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(r[0],i.target)||(r.trigger(i=t.Event("hide.bs.dropdown",o)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),r.removeClass("open").trigger("hidden.bs.dropdown",o))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.5",s.prototype.toggle=function(n){var r=t(this);if(!r.is(".disabled, :disabled")){var o=e(r),s=o.hasClass("open");if(i(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var a={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},s.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var r=e(n),s=r.hasClass("open");if(!s&&27!=i.which||s&&27==i.which)return 27==i.which&&r.find(o).trigger("focus"),n.trigger("click");var a=" li:not(.disabled):visible a",h=r.find(".dropdown-menu"+a);if(h.length){var l=h.index(i.target);38==i.which&&l>0&&l--,40==i.which&&l<h.length-1&&l++,~l||(l=0),h.eq(l).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var r=t(this),o=r.data("bs.modal"),s=t.extend({},i.DEFAULTS,r.data(),"object"==typeof e&&e);o||r.data("bs.modal",o=new i(this,s)),"string"==typeof e?o[e](n):s.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,r=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),r&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});r?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&r;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),r=n.attr("href"),o=t(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,s,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.tooltip"),o="object"==typeof e&&e;(r||!/destroy|hide/.test(e))&&(r||n.data("bs.tooltip",r=new i(this,o)),"string"==typeof e&&r[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",h="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),
this.$element.on(h+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var r=this,o=this.tip(),s=this.getUID(this.type);this.setContent(),o.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,l=h.test(a);l&&(a=a.replace(h,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),d=o[0].offsetWidth,u=o[0].offsetHeight;if(l){var f=a,p=this.getPosition(this.$viewport);a="bottom"==a&&c.bottom+u>p.bottom?"top":"top"==a&&c.top-u<p.top?"bottom":"right"==a&&c.right+d>p.width?"left":"left"==a&&c.left-d<p.left?"right":a,o.removeClass(f).addClass(a)}var m=this.getCalculatedOffset(a,c,d,u);this.applyPlacement(m,a);var g=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(i.TRANSITION_DURATION):g()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),r=n[0].offsetWidth,o=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var h=n[0].offsetWidth,l=n[0].offsetHeight;"top"==i&&l!=o&&(e.top=e.top+o-l);var c=this.getViewportAdjustedDelta(i,e,h,l);c.left?e.left+=c.left:e.top+=c.top;var d=/top|bottom/.test(i),u=d?2*c.left-r+h:2*c.top-o+l,f=d?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(u,n[0][f],d)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=r.hoverState&&o.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),e&&e()}var r=this,o=t(this.$tip),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,r=i.getBoundingClientRect();null==r.width&&(r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=n?{top:0,left:0}:e.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,s,a,o)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,h=e.top+o-s.scroll+n;a<s.top?r.top=s.top-a:h>s.top+s.height&&(r.top=s.top+s.height-h)}else{var l=e.left-o,c=e.left+o+i;l<s.left?r.left=s.left-l:c>s.right&&(r.left=s.left+s.width-c)}return r},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.popover"),o="object"==typeof e&&e;(r||!/destroy|hide/.test(e))&&(r||n.data("bs.popover",r=new i(this,o)),"string"==typeof e&&r[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),r=n.data("bs.scrollspy"),o="object"==typeof i&&i;r||n.data("bs.scrollspy",r=new e(this,o)),"string"==typeof i&&r[i]()})}e.VERSION="3.3.5",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),r=e.data("target")||e.attr("href"),o=/^#./.test(r)&&t(r);return o&&o.length&&o.is(":visible")&&[[o[i]().top+n,r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return s!=(t=o[o.length-1])&&this.activate(t);if(s&&e<r[0])return this.activeTarget=null,this.clear();for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(void 0===r[t+1]||e<r[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.tab");r||n.data("bs.tab",r=new i(this)),"string"==typeof e&&r[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=i.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),e.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},i.prototype.activate=function(e,n,r){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var s=n.find("> .active"),a=r&&t.support.transition&&(s.length&&s.hasClass("fade")||!!n.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),s.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var r=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.affix"),o="object"==typeof e&&e;r||n.data("bs.affix",r=new i(this,o)),"string"==typeof e&&r[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var r=this.$target.scrollTop(),o=this.$element.offset(),s=this.$target.height();if(null!=i&&"top"==this.affixed)return i>r?"top":!1;if("bottom"==this.affixed)return null!=i?r+this.unpin<=o.top?!1:"bottom":t-n>=r+s?!1:"bottom";var a=null==this.affixed,h=a?r:o.top,l=a?s:e;return null!=i&&i>=r?"top":null!=n&&h+l>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,r=n.top,o=n.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(o=r=n),"function"==typeof r&&(r=n.top(this.$element)),"function"==typeof o&&(o=n.bottom(this.$element));var a=this.getState(s,e,r,o);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var h="affix"+(a?"-"+a:""),l=t.Event(h+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(h).trigger(h.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-e-o})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),function(){"use strict";var t=this,e=t.Chart,i=function(t){this.canvas=t.canvas,this.ctx=t;var e=function(t,e){return t["offset"+e]?t["offset"+e]:document.defaultView.getComputedStyle(t).getPropertyValue(e)},i=this.width=e(t.canvas,"Width")||t.canvas.width,r=this.height=e(t.canvas,"Height")||t.canvas.height;return i=this.width=t.canvas.width,r=this.height=t.canvas.height,this.aspectRatio=this.width/this.height,n.retinaScale(this),this};i.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipTitleTemplate:"<%= label%>",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= datasetLabel %>: <%= value %>",multiTooltipKeyBackground:"#fff",segmentColorDefault:["#A6CEE3","#1F78B4","#B2DF8A","#33A02C","#FB9A99","#E31A1C","#FDBF6F","#FF7F00","#CAB2D6","#6A3D9A","#B4B482","#B15928"],segmentHighlightColorDefaults:["#CEF6FF","#47A0DC","#DAFFB2","#5BC854","#FFC2C1","#FF4244","#FFE797","#FFA728","#F2DAFE","#9265C2","#DCDCAA","#D98150"],onAnimationProgress:function(){},onAnimationComplete:function(){}}},i.types={};var n=i.helpers={},r=n.each=function(t,e,i){var n=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var r;for(r=0;r<t.length;r++)e.apply(i,[t[r],r].concat(n))}else for(var o in t)e.apply(i,[t[o],o].concat(n))},o=n.clone=function(t){var e={};return r(t,function(i,n){t.hasOwnProperty(n)&&(e[n]=i)}),e},s=n.extend=function(t){return r(Array.prototype.slice.call(arguments,1),function(e){r(e,function(i,n){e.hasOwnProperty(n)&&(t[n]=i)})}),t},a=n.merge=function(t,e){var i=Array.prototype.slice.call(arguments,0);return i.unshift({}),s.apply(null,i)},h=n.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},l=(n.where=function(t,e){var i=[];return n.each(t,function(t){e(t)&&i.push(t)}),i},n.findNextWhere=function(t,e,i){i||(i=-1);for(var n=i+1;n<t.length;n++){var r=t[n];if(e(r))return r}},n.findPreviousWhere=function(t,e,i){i||(i=t.length);for(var n=i-1;n>=0;n--){var r=t[n];if(e(r))return r}},n.inherits=function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=e.prototype,i.prototype=new n,i.extend=l,t&&s(i.prototype,t),i.__super__=e.prototype,i}),c=n.noop=function(){},d=n.uid=function(){var t=0;return function(){return"chart-"+t++}}(),u=n.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},f=n.amd="function"==typeof define&&define.amd,p=n.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},m=n.max=function(t){return Math.max.apply(Math,t)},g=n.min=function(t){return Math.min.apply(Math,t)},v=(n.cap=function(t,e,i){if(p(e)){if(t>e)return e}else if(p(i)&&i>t)return i;return t},n.getDecimalPlaces=function(t){if(t%1!==0&&p(t)){var e=t.toString();if(e.indexOf("e-")<0)return e.split(".")[1].length;if(e.indexOf(".")<0)return parseInt(e.split("e-")[1]);var i=e.split(".")[1].split("e-");return i[0].length+parseInt(i[1])}return 0}),A=n.radians=function(t){return t*(Math.PI/180)},y=(n.getAngleFromPoint=function(t,e){var i=e.x-t.x,n=e.y-t.y,r=Math.sqrt(i*i+n*n),o=2*Math.PI+Math.atan2(n,i);return 0>i&&0>n&&(o+=2*Math.PI),{angle:o,distance:r}},n.aliasPixel=function(t){return t%2===0?0:.5}),b=(n.splineCurve=function(t,e,i,n){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),s=n*r/(r+o),a=n*o/(r+o);return{inner:{x:e.x-s*(i.x-t.x),y:e.y-s*(i.y-t.y)},outer:{x:e.x+a*(i.x-t.x),y:e.y+a*(i.y-t.y)}}},n.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),E=(n.calculateScaleRange=function(t,e,i,n,o){var s=2,a=Math.floor(e/(1.5*i)),h=s>=a,l=[];r(t,function(t){null==t||l.push(t)});var c=g(l),d=m(l);d===c&&(d+=.5,c>=.5&&!n?c-=.5:d+=.5);for(var u=Math.abs(d-c),f=b(u),p=Math.ceil(d/(1*Math.pow(10,f)))*Math.pow(10,f),v=n?0:Math.floor(c/(1*Math.pow(10,f)))*Math.pow(10,f),A=p-v,y=Math.pow(10,f),E=Math.round(A/y);(E>a||a>2*E)&&!h;)if(E>a)y*=2,E=Math.round(A/y),E%1!==0&&(h=!0);else if(o&&f>=0){if(y/2%1!==0)break;y/=2,E=Math.round(A/y)}else y/=2,E=Math.round(A/y);return h&&(E=s,y=A/E),{steps:E,stepValue:y,min:v,max:v+E*y}},n.template=function(t,e){function i(t,e){var i=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[t]=n[t];return e?i(e):i}if(t instanceof Function)return t(e);var n={};return i(t,e)}),w=(n.generateLabels=function(t,e,i,n){var o=new Array(e);return t&&r(o,function(e,r){o[r]=E(t,{value:i+n*(r+1)})}),o},n.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=1*(.3*1.5)),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),1>t?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)):n*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-w.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?1*(7.5625*t*t):2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*w.easeInBounce(2*t):.5*w.easeOutBounce(2*t-1)+.5}}),x=n.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),_=(n.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),n.animationLoop=function(t,e,i,n,r,o){var s=0,a=w[i]||w.linear,h=function(){s++;var i=s/e,l=a(i);t.call(o,l,i,s),n.call(o,l,i),e>s?o.animationFrame=x(h):r.apply(o)};x(h)},n.getRelativePosition=function(t){var e,i,n=t.originalEvent||t,r=t.currentTarget||t.srcElement,o=r.getBoundingClientRect();return n.touches?(e=n.touches[0].clientX-o.left,i=n.touches[0].clientY-o.top):(e=n.clientX-o.left,i=n.clientY-o.top),{x:e,y:i}},n.addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}),T=n.removeEvent=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=c},S=(n.bindEvents=function(t,e,i){t.events||(t.events={}),r(e,function(e){t.events[e]=function(){i.apply(t,arguments)},_(t.chart.canvas,e,t.events[e])})},n.unbindEvents=function(t,e){r(e,function(e,i){T(t.chart.canvas,i,e)})}),R=n.getMaximumWidth=function(t){var e=t.parentNode,i=parseInt(k(e,"padding-left"))+parseInt(k(e,"padding-right"));return e?e.clientWidth-i:0},C=n.getMaximumHeight=function(t){var e=t.parentNode,i=parseInt(k(e,"padding-bottom"))+parseInt(k(e,"padding-top"));return e?e.clientHeight-i:0},k=n.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},M=(n.getMaximumSize=n.getMaximumWidth,n.retinaScale=function(t){var e=t.ctx,i=t.canvas.width,n=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=i+"px",e.canvas.style.height=n+"px",e.canvas.height=n*window.devicePixelRatio,e.canvas.width=i*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),H=n.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},P=n.fontString=function(t,e,i){return e+" "+t+"px "+i},D=n.longestText=function(t,e,i){t.font=e;var n=0;return r(i,function(e){var i=t.measureText(e).width;n=i>n?i:n}),n},O=n.drawRoundedRectangle=function(t,e,i,n,r,o){t.beginPath(),t.moveTo(e+o,i),t.lineTo(e+n-o,i),t.quadraticCurveTo(e+n,i,e+n,i+o),t.lineTo(e+n,i+r-o),t.quadraticCurveTo(e+n,i+r,e+n-o,i+r),t.lineTo(e+o,i+r),t.quadraticCurveTo(e,i+r,e,i+r-o),t.lineTo(e,i+o),t.quadraticCurveTo(e,i,e+o,i),t.closePath()};i.instances={},i.Type=function(t,e,n){this.options=e,this.chart=n,this.id=d(),i.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},s(i.Type.prototype,{initialize:function(){return this},clear:function(){return H(this.chart),this},stop:function(){return i.animationService.cancelAnimation(this),this},resize:function(t){this.stop();var e=this.chart.canvas,i=R(this.chart.canvas),n=this.options.maintainAspectRatio?i/this.chart.aspectRatio:C(this.chart.canvas);return e.width=this.chart.width=i,e.height=this.chart.height=n,M(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:c,render:function(t){if(t&&this.reflow(),this.options.animation&&!t){var e=new i.Animation;e.numSteps=this.options.animationSteps,e.easing=this.options.animationEasing,e.render=function(t,e){var i=n.easingEffects[e.easing],r=e.currentStep/e.numSteps,o=i(r);t.draw(o,r,e.currentStep)},e.onAnimationProgress=this.options.onAnimationProgress,e.onAnimationComplete=this.options.onAnimationComplete,i.animationService.addAnimation(this,e)}else this.draw(),this.options.onAnimationComplete.call(this);return this},generateLegend:function(){return E(this.options.legendTemplate,this)},destroy:function(){this.clear(),S(this,this.events);var t=this.chart.canvas;t.width=this.chart.width,t.height=this.chart.height,t.style.removeProperty?(t.style.removeProperty("width"),t.style.removeProperty("height")):(t.style.removeAttribute("width"),t.style.removeAttribute("height")),delete i.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var o=function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(r(t,function(t,i){t!==this.activeElements[i]&&(e=!0)},this),e)}.call(this,t);if(o||e){if(this.activeElements=t,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),t.length>0)if(this.datasets&&this.datasets.length>1){for(var s,a,l=this.datasets.length-1;l>=0&&(s=this.datasets[l].points||this.datasets[l].bars||this.datasets[l].segments,a=h(s,t[0]),-1===a);l--);var c=[],d=[],u=function(t){var e,i,r,o,s,h=[],l=[],u=[];return n.each(this.datasets,function(t){e=t.points||t.bars||t.segments,e[a]&&e[a].hasValue()&&h.push(e[a])}),n.each(h,function(t){l.push(t.x),u.push(t.y),c.push(n.template(this.options.multiTooltipTemplate,t)),d.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),s=g(u),r=m(u),o=g(l),i=m(l),{x:o>this.chart.width/2?o:i,y:(s+r)/2}}.call(this,a);new i.MultiTooltip({x:u.x,y:u.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:c,legendColors:d,legendColorBackground:this.options.multiTooltipKeyBackground,title:E(this.options.tooltipTitleTemplate,t[0]),chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else r(t,function(t){var e=t.tooltipPosition();new i.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:E(this.options.tooltipTemplate,t),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),i.Type.extend=function(t){var e=this,n=function(){return e.apply(this,arguments)};if(n.prototype=o(e.prototype),s(n.prototype,t),n.extend=i.Type.extend,t.name||e.prototype.name){var r=t.name||e.prototype.name,h=i.defaults[e.prototype.name]?o(i.defaults[e.prototype.name]):{};i.defaults[r]=s(h,t.defaults),i.types[r]=n,i.prototype[r]=function(t,e){var o=a(i.defaults.global,i.defaults[r],e||{});return new n(t,o,this)}}else u("Name not provided for this chart, so it hasn't been registered");return e},i.Element=function(t){s(this,t),this.initialize.apply(this,arguments),this.save()},s(i.Element.prototype,{initialize:function(){},restore:function(t){return t?r(t,function(t){this[t]=this._saved[t]},this):s(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(t){return r(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return r(t,function(t,i){this[i]=(t-this._saved[i])*e+this._saved[i]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return p(this.value)}}),i.Element.extend=l,i.Point=i.Element.extend({display:!0,inRange:function(t,e){var i=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),
t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),i.Arc=i.Element.extend({inRange:function(t,e){var i=n.getAngleFromPoint(this,{x:t,y:e}),r=i.angle%(2*Math.PI),o=(2*Math.PI+this.startAngle)%(2*Math.PI),s=(2*Math.PI+this.endAngle)%(2*Math.PI)||360,a=o>s?s>=r||r>=o:r>=o&&s>=r,h=i.distance>=this.innerRadius&&i.distance<=this.outerRadius;return a&&h},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.outerRadius<0?0:this.outerRadius,this.startAngle,this.endAngle),e.arc(this.x,this.y,this.innerRadius<0?0:this.innerRadius,this.endAngle,this.startAngle,!0),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.lineJoin="bevel",this.showStroke&&e.stroke()}}),i.Rectangle=i.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,i=this.x-e,n=this.x+e,r=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(i+=o,n-=o,r+=o),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(i,this.base),t.lineTo(i,r),t.lineTo(n,r),t.lineTo(n,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),i.Animation=i.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),i.Tooltip=i.Element.extend({draw:function(){var t=this.chart.ctx;t.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=this.caretPadding=2,i=t.measureText(this.text).width+2*this.xPadding,n=this.fontSize+2*this.yPadding,r=n+this.caretHeight+e;this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right"),this.y-r<0&&(this.yAlign="below");var o=this.x-i/2,s=this.y-r;if(t.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":s=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":o=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}O(t,o,s,i,n,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,o+i/2,s+n/2)}}}),i.MultiTooltip=i.Element.extend({initialize:function(){this.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=P(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.titleHeight=this.title?1.5*this.titleFontSize:0,this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+this.titleHeight,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=D(this.ctx,this.font,this.labels)+this.fontSize+3,i=m([e,t]);this.width=i+2*this.xPadding;var n=this.height/2;this.y-n<0?this.y=n:this.y+n>this.chart.height&&(this.y=this.chart.height-n),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,i=t-1;return 0===t?e+this.titleHeight/3:e+(1.5*this.fontSize*i+this.fontSize/2)+this.titleHeight},draw:function(){if(this.custom)this.custom(this);else{O(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,n.each(this.labels,function(e,i){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(i+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[i].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),i.Scale=i.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(E(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?D(this.ctx,this.font,this.yLabels)+10:0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint,i=this.endPoint-this.startPoint;for(this.calculateYRange(i),this.buildYLabels(),this.calculateXLabelRotation();i>this.endPoint-this.startPoint;)i=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(i),this.buildYLabels(),t<this.yLabelWidth&&(this.endPoint=e,this.calculateXLabelRotation())},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e,i=this.ctx.measureText(this.xLabels[0]).width,n=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=n/2+3,this.xScalePaddingLeft=i/2>this.yLabelWidth?i/2:this.yLabelWidth,this.xLabelRotation=0,this.display){var r,o=D(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var s=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>s&&0===this.xLabelRotation||this.xLabelWidth>s&&this.xLabelRotation<=90&&this.xLabelRotation>0;)r=Math.cos(A(this.xLabelRotation)),t=r*i,e=r*n,t+this.fontSize/2>this.yLabelWidth&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=r*o;this.xLabelRotation>0&&(this.endPoint-=Math.sin(A(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:c,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),i=e/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),n=i*t+this.xScalePaddingLeft;return this.offsetGridLines&&(n+=i/2),Math.round(n)},update:function(t){n.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,i=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,r(this.yLabels,function(r,o){var s=this.endPoint-e*o,a=Math.round(s),h=this.showHorizontalLines;t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(r,i-10,s),0!==o||h||(h=!0),h&&t.beginPath(),o>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),a+=n.aliasPixel(t.lineWidth),h&&(t.moveTo(i,a),t.lineTo(this.width,a),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(i-5,a),t.lineTo(i,a),t.stroke(),t.closePath()},this),r(this.xLabels,function(e,i){var n=this.calculateX(i)+y(this.lineWidth),r=this.calculateX(i-(this.offsetGridLines?.5:0))+y(this.lineWidth),o=this.xLabelRotation>0,s=this.showVerticalLines;0!==i||s||(s=!0),s&&t.beginPath(),i>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),s&&(t.moveTo(r,this.endPoint),t.lineTo(r,this.startPoint-3),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(r,this.endPoint),t.lineTo(r,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(n,o?this.endPoint+12:this.endPoint+8),t.rotate(-1*A(this.xLabelRotation)),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),i.RadialScale=i.Element.extend({initialize:function(){this.size=g([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(E(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,i,n,r,o,s,a,h,l,c,d,u=g([this.height/2-this.pointLabelFontSize-5,this.width/2]),f=this.width,m=0;for(this.ctx.font=P(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,u),i=this.ctx.measureText(E(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(n=i/2,t.x+n>f&&(f=t.x+n,r=e),t.x-n<m&&(m=t.x-n,s=e)):e<this.valuesCount/2?t.x+i>f&&(f=t.x+i,r=e):e>this.valuesCount/2&&t.x-i<m&&(m=t.x-i,s=e);h=m,l=Math.ceil(f-this.width),o=this.getIndexAngle(r),a=this.getIndexAngle(s),c=l/Math.sin(o+Math.PI/2),d=h/Math.sin(a+Math.PI/2),c=p(c)?c:0,d=p(d)?d:0,this.drawingArea=u-(d+c)/2,this.setCenterPoint(d,c)},setCenterPoint:function(t,e){var i=this.width-e-this.drawingArea,n=t+this.drawingArea;this.xCenter=(n+i)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var i=this.getIndexAngle(t);return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(r(this.yLabels,function(e,i){if(i>0){var n,r=i*(this.drawingArea/this.steps),o=this.yCenter-r;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,r,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var s=0;s<this.valuesCount;s++)n=this.getPointPosition(s,this.calculateCenterOffset(this.min+i*this.stepValue)),0===s?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var a=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-a/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,a+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,o)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){var i=null,n=null;if(this.angleLineWidth>0&&(i=this.calculateCenterOffset(this.max),n=this.getPointPosition(e,i),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(n.x,n.y),t.stroke(),t.closePath()),this.backgroundColors&&this.backgroundColors.length==this.valuesCount){null==i&&(i=this.calculateCenterOffset(this.max)),null==n&&(n=this.getPointPosition(e,i));var o=this.getPointPosition(0===e?this.valuesCount-1:e-1,i),s=this.getPointPosition(e===this.valuesCount-1?0:e+1,i),a={x:(o.x+n.x)/2,y:(o.y+n.y)/2},h={x:(n.x+s.x)/2,y:(n.y+s.y)/2};t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(a.x,a.y),t.lineTo(n.x,n.y),t.lineTo(h.x,h.y),t.fillStyle=this.backgroundColors[e],t.fill(),t.closePath()}var l=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=P(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var c=this.labels.length,d=this.labels.length/2,u=d/2,f=u>e||e>c-u,p=e===u||e===c-u;0===e?t.textAlign="center":e===d?t.textAlign="center":d>e?t.textAlign="left":t.textAlign="right",p?t.textBaseline="middle":f?t.textBaseline="bottom":t.textBaseline="top",t.fillText(this.labels[e],l.x,l.y)}}}}}),i.animationService={frameDuration:17,animations:[],dropFrames:0,addAnimation:function(t,e){for(var i=0;i<this.animations.length;++i)if(this.animations[i].chartInstance===t)return void(this.animations[i].animationObject=e);this.animations.push({chartInstance:t,animationObject:e}),1==this.animations.length&&n.requestAnimFrame.call(window,this.digestWrapper)},cancelAnimation:function(t){var e=n.findNextWhere(this.animations,function(e){return e.chartInstance===t});e&&this.animations.splice(e,1)},digestWrapper:function(){i.animationService.startDigest.call(i.animationService)},startDigest:function(){var t=Date.now(),e=0;this.dropFrames>1&&(e=Math.floor(this.dropFrames),this.dropFrames-=e);for(var i=0;i<this.animations.length;i++)null===this.animations[i].animationObject.currentStep&&(this.animations[i].animationObject.currentStep=0),this.animations[i].animationObject.currentStep+=1+e,this.animations[i].animationObject.currentStep>this.animations[i].animationObject.numSteps&&(this.animations[i].animationObject.currentStep=this.animations[i].animationObject.numSteps),this.animations[i].animationObject.render(this.animations[i].chartInstance,this.animations[i].animationObject),this.animations[i].animationObject.currentStep==this.animations[i].animationObject.numSteps&&(this.animations[i].animationObject.onAnimationComplete.call(this.animations[i].chartInstance),this.animations.splice(i,1),i--);var r=Date.now(),o=r-t-this.frameDuration,s=o/this.frameDuration;s>1&&(this.dropFrames+=s),this.animations.length>0&&n.requestAnimFrame.call(window,this.digestWrapper)}},n.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){r(i.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),f?define("Chart",[],function(){return i}):"object"==typeof module&&module.exports&&(module.exports=i),t.Chart=i,i.noConflict=function(){return t.Chart=e,i}}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'};e.Type.extend({name:"Bar",defaults:n,initialize:function(t){var n=this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,i){var r=this.calculateBaseWidth(),o=this.calculateX(i)-r/2,s=this.calculateBarWidth(t);return o+s*e+e*n.barDatasetSpacing+s/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*n.barValueSpacing},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*n.barDatasetSpacing;return e/t}}),this.datasets=[],this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),i.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),this.BarClass=e.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),i.each(t.datasets,function(e,n){var r={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,bars:[]};this.datasets.push(r),i.each(e.data,function(i,n){r.bars.push(new this.BarClass({value:i,label:t.labels[n],datasetLabel:e.label,strokeColor:e.strokeColor,fillColor:e.fillColor,highlightFill:e.highlightFill||e.fillColor,highlightStroke:e.highlightStroke||e.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,n){i.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,n,e),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),i.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){i.each(this.datasets,function(e,n){i.each(e.bars,t,this,n)},this)},getBarsAtEvent:function(t){for(var e,n=[],r=i.getRelativePosition(t),o=function(t){n.push(t.bars[e])},s=0;s<this.datasets.length;s++)for(e=0;e<this.datasets[s].bars.length;e++)if(this.datasets[s].bars[e].inRange(r.x,r.y))return i.each(this.datasets,o),n;return n},buildScale:function(t){var e=this,n=function(){var t=[];return e.eachBars(function(e){t.push(e.value)}),t},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=i.calculateScaleRange(n(),t,this.fontSize,this.beginAtZero,this.integersOnly);i.extend(this,e)},xLabels:t,font:i.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&i.extend(r,{calculateYRange:i.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(r)},addData:function(t,e){i.each(t,function(t,i){this.datasets[i].bars.push(new this.BarClass({value:t,label:e,datasetLabel:this.datasets[i].label,x:this.scale.calculateBarX(this.datasets.length,i,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[i].strokeColor,fillColor:this.datasets[i].fillColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),i.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){i.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=i.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear(),this.chart.ctx,this.scale.draw(e),i.each(this.datasets,function(t,n){i.each(t.bars,function(t,i){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,n,i),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},e).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:n,initialize:function(t){this.segments=[],this.outerRadius=(i.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];i.each(this.segments,function(t){t.restore(["fillColor"])}),i.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.calculateTotal(t),i.each(t,function(e,i){e.color||(e.color="hsl("+360*i/t.length+", 100%, 50%)"),this.addData(e,i,!0)},this),this.render()},getSegmentsAtEvent:function(t){var e=[],n=i.getRelativePosition(t);return i.each(this.segments,function(t){t.inRange(n.x,n.y)&&e.push(t)},this),e},addData:function(t,i,n){var r=void 0!==i?i:this.segments.length;"undefined"==typeof t.color&&(t.color=e.defaults.global.segmentColorDefault[r%e.defaults.global.segmentColorDefault.length],t.highlight=e.defaults.global.segmentHighlightColorDefaults[r%e.defaults.global.segmentHighlightColorDefaults.length]),this.segments.splice(r,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),n||(this.reflow(),this.update())},calculateCircumference:function(t){return this.total>0?2*Math.PI*(t/this.total):0},calculateTotal:function(t){this.total=0,i.each(t,function(t){this.total+=Math.abs(t.value)},this)},update:function(){this.calculateTotal(this.segments),i.each(this.activeElements,function(t){t.restore(["fillColor"])}),i.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var e=i.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},reflow:function(){i.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(i.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,i.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var e=t?t:1;this.clear(),i.each(this.segments,function(t,i){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},e),t.endAngle=t.startAngle+t.circumference,t.draw(),0===i&&(t.startAngle=1.5*Math.PI),i<this.segments.length-1&&(this.segments[i+1].startAngle=t.endAngle)},this)}}),e.types.Doughnut.extend({name:"Pie",defaults:i.merge(n,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>',offsetGridLines:!1};e.Type.extend({name:"Line",defaults:n,initialize:function(t){this.PointClass=e.Point.extend({offsetGridLines:this.options.offsetGridLines,strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),i.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),i.each(t.datasets,function(e){var n={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(n),i.each(e.data,function(i,r){n.points.push(new this.PointClass({value:i,label:t.labels[r],datasetLabel:e.label,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,e){i.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),i.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){i.each(this.datasets,function(e){i.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=[],n=i.getRelativePosition(t);return i.each(this.datasets,function(t){i.each(t.points,function(t){t.inRange(n.x,n.y)&&e.push(t)})},this),e},buildScale:function(t){var n=this,r=function(){var t=[];return n.eachPoints(function(e){t.push(e.value)}),t},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,offsetGridLines:this.options.offsetGridLines,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=i.calculateScaleRange(r(),t,this.fontSize,this.beginAtZero,this.integersOnly);i.extend(this,e)},xLabels:t,font:i.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&i.extend(o,{calculateYRange:i.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new e.Scale(o)},addData:function(t,e){i.each(t,function(t,i){this.datasets[i].points.push(new this.PointClass({value:t,label:e,datasetLabel:this.datasets[i].label,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),i.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=i.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();var n=this.chart.ctx,r=function(t){return null!==t.value},o=function(t,e,n){return i.findNextWhere(e,r,n)||t},s=function(t,e,n){return i.findPreviousWhere(e,r,n)||t};this.scale&&(this.scale.draw(e),i.each(this.datasets,function(t){var a=i.where(t.points,r);i.each(t.points,function(t,i){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(i)},e)},this),this.options.bezierCurve&&i.each(a,function(t,e){var n=e>0&&e<a.length-1?this.options.bezierCurveTension:0;t.controlPoints=i.splineCurve(s(t,a,e),t,o(t,a,e),n),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=t.strokeColor,n.beginPath(),i.each(a,function(t,e){if(0===e)n.moveTo(t.x,t.y);else if(this.options.bezierCurve){var i=s(t,a,e);n.bezierCurveTo(i.controlPoints.outer.x,i.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else n.lineTo(t.x,t.y)},this),this.options.datasetStroke&&n.stroke(),this.options.datasetFill&&a.length>0&&(n.lineTo(a[a.length-1].x,this.scale.endPoint),n.lineTo(a[0].x,this.scale.endPoint),n.fillStyle=t.fillColor,n.closePath(),n.fill()),i.each(a,function(t){t.draw()})},this))}})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};e.Type.extend({name:"PolarArea",defaults:n,initialize:function(t){this.segments=[],this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),i.each(t,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];i.each(this.segments,function(t){t.restore(["fillColor"])}),i.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.render()},getSegmentsAtEvent:function(t){var e=[],n=i.getRelativePosition(t);return i.each(this.segments,function(t){t.inRange(n.x,n.y)&&e.push(t)},this),e},addData:function(t,e,i){var n=e||this.segments.length;this.segments.splice(n,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),
circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),i||(this.reflow(),this.update())},removeData:function(t){var e=i.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,i.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var e=[];i.each(t,function(t){e.push(t.value)});var n=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:i.calculateScaleRange(e,i.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);i.extend(this.scale,n,{size:i.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),i.each(this.segments,function(t){t.save()}),this.reflow(),this.render()},reflow:function(){i.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),i.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),i.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var e=t||1;this.clear(),i.each(this.segments,function(t,i){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},e),t.endAngle=t.startAngle+t.circumference,0===i&&(t.startAngle=1.5*Math.PI),i<this.segments.length-1&&(this.segments[i+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'},initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),i.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),i.each(t.datasets,function(e){var n={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(n),i.each(e.data,function(i,r){var o;this.scale.animation||(o=this.scale.getPointPosition(r,this.scale.calculateCenterOffset(i))),n.points.push(new this.PointClass({value:i,label:t.labels[r],datasetLabel:e.label,x:this.options.animation?this.scale.xCenter:o.x,y:this.options.animation?this.scale.yCenter:o.y,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){i.each(this.datasets,function(e){i.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=i.getRelativePosition(t),n=i.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},e),r=2*Math.PI/this.scale.valuesCount,o=Math.round((n.angle-1.5*Math.PI)/r),s=[];return(o>=this.scale.valuesCount||0>o)&&(o=0),n.distance<=this.scale.drawingArea&&i.each(this.datasets,function(t){s.push(t.points[o])}),s},buildScale:function(t){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backgroundColors:this.options.scaleBackgroundColors,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var e=function(){var e=[];return i.each(t,function(t){t.data?e=e.concat(t.data):i.each(t.points,function(t){e.push(t.value)})}),e}(),n=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:i.calculateScaleRange(e,i.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);i.extend(this.scale,n)},addData:function(t,e){this.scale.valuesCount++,i.each(t,function(t,i){var n=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[i].points.push(new this.PointClass({value:t,label:e,datasetLabel:this.datasets[i].label,x:n.x,y:n.y,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.labels.push(e),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),i.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){i.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:i.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var e=t||1,n=this.chart.ctx;this.clear(),this.scale.draw(),i.each(this.datasets,function(t){i.each(t.points,function(t,i){t.hasValue()&&t.transition(this.scale.getPointPosition(i,this.scale.calculateCenterOffset(t.value)),e)},this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=t.strokeColor,n.beginPath(),i.each(t.points,function(t,e){0===e?n.moveTo(t.x,t.y):n.lineTo(t.x,t.y)},this),n.closePath(),n.stroke(),n.fillStyle=t.fillColor,this.options.datasetFill&&n.fill(),i.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Docxgen=t()}}(function(){return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return r(i?i:t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){(function(e){function n(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(i){return!1}}function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t){return this instanceof o?(this.length=0,this.parent=void 0,"number"==typeof t?s(this,t):"string"==typeof t?a(this,t,arguments.length>1?arguments[1]:"utf8"):h(this,t)):arguments.length>1?new o(t,arguments[1]):new o(t)}function s(t,e){if(t=m(t,0>e?0:0|g(e)),!o.TYPED_ARRAY_SUPPORT)for(var i=0;e>i;i++)t[i]=0;return t}function a(t,e,i){"string"==typeof i&&""!==i||(i="utf8");var n=0|A(e,i);return t=m(t,n),t.write(e,i),t}function h(t,e){if(o.isBuffer(e))return l(t,e);if(Z(e))return c(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return d(t,e);if(e instanceof ArrayBuffer)return u(t,e)}return e.length?f(t,e):p(t,e)}function l(t,e){var i=0|g(e.length);return t=m(t,i),e.copy(t,0,0,i),t}function c(t,e){var i=0|g(e.length);t=m(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function d(t,e){var i=0|g(e.length);t=m(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function u(t,e){return o.TYPED_ARRAY_SUPPORT?(e.byteLength,t=o._augment(new Uint8Array(e))):t=d(t,new Uint8Array(e)),t}function f(t,e){var i=0|g(e.length);t=m(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function p(t,e){var i,n=0;"Buffer"===e.type&&Z(e.data)&&(i=e.data,n=0|g(i.length)),t=m(t,n);for(var r=0;n>r;r+=1)t[r]=255&i[r];return t}function m(t,e){o.TYPED_ARRAY_SUPPORT?(t=o._augment(new Uint8Array(e)),t.__proto__=o.prototype):(t.length=e,t._isBuffer=!0);var i=0!==e&&e<=o.poolSize>>>1;return i&&(t.parent=K),t}function g(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function v(t,e){if(!(this instanceof v))return new v(t,e);var i=new o(t,e);return delete i.parent,i}function A(t,e){"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return i;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(n)return V(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,i){var n=!1;if(e=0|e,i=void 0===i||i===1/0?this.length:0|i,t||(t="utf8"),0>e&&(e=0),i>this.length&&(i=this.length),e>=i)return"";for(;;)switch(t){case"hex":return H(this,e,i);case"utf8":case"utf-8":return R(this,e,i);case"ascii":return k(this,e,i);case"binary":return M(this,e,i);case"base64":return S(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[i+s]=a}return s}function E(t,e,i,n){return q(V(e,t.length-i),t,i,n)}function w(t,e,i,n){return q(W(e),t,i,n)}function x(t,e,i,n){return w(t,e,i,n)}function _(t,e,i,n){return q(Y(e),t,i,n)}function T(t,e,i,n){return q(G(e,t.length-i),t,i,n)}function S(t,e,i){return 0===e&&i===t.length?X.fromByteArray(t):X.fromByteArray(t.slice(e,i))}function R(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;i>r;){var o=t[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i>=r+a){var h,l,c,d;switch(a){case 1:128>o&&(s=o);break;case 2:h=t[r+1],128===(192&h)&&(d=(31&o)<<6|63&h,d>127&&(s=d));break;case 3:h=t[r+1],l=t[r+2],128===(192&h)&&128===(192&l)&&(d=(15&o)<<12|(63&h)<<6|63&l,d>2047&&(55296>d||d>57343)&&(s=d));break;case 4:h=t[r+1],l=t[r+2],c=t[r+3],128===(192&h)&&128===(192&l)&&128===(192&c)&&(d=(15&o)<<18|(63&h)<<12|(63&l)<<6|63&c,d>65535&&1114112>d&&(s=d))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),r+=a}return C(n)}function C(t){var e=t.length;if(J>=e)return String.fromCharCode.apply(String,t);for(var i="",n=0;e>n;)i+=String.fromCharCode.apply(String,t.slice(n,n+=J));return i}function k(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;i>r;r++)n+=String.fromCharCode(127&t[r]);return n}function M(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;i>r;r++)n+=String.fromCharCode(t[r]);return n}function H(t,e,i){var n=t.length;(!e||0>e)&&(e=0),(!i||0>i||i>n)&&(i=n);for(var r="",o=e;i>o;o++)r+=U(t[o]);return r}function P(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function D(t,e,i){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,n,r,s){if(!o.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>r||s>e)throw new RangeError("value is out of bounds");if(i+n>t.length)throw new RangeError("index out of range")}function L(t,e,i,n){0>e&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);o>r;r++)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function I(t,e,i,n){0>e&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);o>r;r++)t[i+r]=e>>>8*(n?r:3-r)&255}function B(t,e,i,n,r,o){if(e>r||o>e)throw new RangeError("value is out of bounds");if(i+n>t.length)throw new RangeError("index out of range");if(0>i)throw new RangeError("index out of range")}function F(t,e,i,n,r){return r||B(t,e,i,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,i,n,23,4),i+4}function N(t,e,i,n,r){return r||B(t,e,i,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,i,n,52,8),i+8}function z(t){if(t=j(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function j(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function U(t){return 16>t?"0"+t.toString(16):t.toString(16)}function V(t,e){e=e||1/0;for(var i,n=t.length,r=null,o=[],s=0;n>s;s++){if(i=t.charCodeAt(s),i>55295&&57344>i){if(!r){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(56320>i){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=r-55296<<10|i-56320|65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,128>i){if((e-=1)<0)break;o.push(i)}else if(2048>i){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(65536>i){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(1114112>i))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function W(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e}function G(t,e){for(var i,n,r,o=[],s=0;s<t.length&&!((e-=2)<0);s++)i=t.charCodeAt(s),n=i>>8,r=i%256,o.push(r),o.push(n);return o}function Y(t){return X.toByteArray(z(t))}function q(t,e,i,n){for(var r=0;n>r&&!(r+i>=e.length||r>=t.length);r++)e[r+i]=t[r];return r}var X=t("base64-js"),Q=t("ieee754"),Z=t("is-array");i.Buffer=o,i.SlowBuffer=v,i.INSPECT_MAX_BYTES=50,o.poolSize=8192;var K={};o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array),o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,s=Math.min(i,n);s>r&&t[r]===e[r];)++r;return r!==s&&(i=t[r],n=e[r]),n>i?-1:i>n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Z(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new o(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;i++)e+=t[i].length;var n=new o(e),r=0;for(i=0;i<t.length;i++){var s=t[i];s.copy(n,r),r+=s.length}return n},o.byteLength=A,o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?R(this,0,t):y.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:o.compare(this,t)},o.prototype.indexOf=function(t,e){function i(t,e,i){for(var n=-1,r=0;i+r<t.length;r++)if(t[i+r]===e[-1===n?0:r-n]){if(-1===n&&(n=r),r-n+1===e.length)return i+n}else n=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(o.isBuffer(t))return i(this,t,e);if("number"==typeof t)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):i(this,[t],e);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},o.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},o.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(i)?(i=0|i,void 0===n&&(n="utf8")):(n=i,i=void 0);else{var r=n;n=e,e=0|i,i=r}var o=this.length-e;if((void 0===i||i>o)&&(i=o),t.length>0&&(0>i||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return b(this,t,e,i);case"utf8":case"utf-8":return E(this,t,e,i);case"ascii":return w(this,t,e,i);case"binary":return x(this,t,e,i);case"base64":return _(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;o.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),t>e&&(e=t);var n;if(o.TYPED_ARRAY_SUPPORT)n=o._augment(this.subarray(t,e));else{var r=e-t;n=new o(r,void 0);for(var s=0;r>s;s++)n[s]=this[s+t]}return n.length&&(n.parent=this.parent||this),n},o.prototype.readUIntLE=function(t,e,i){t=0|t,e=0|e,i||D(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n},o.prototype.readUIntBE=function(t,e,i){t=0|t,e=0|e,i||D(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},o.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,i){t=0|t,e=0|e,i||D(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,i){t=0|t,e=0|e,i||D(t,e,this.length);for(var n=e,r=1,o=this[t+--n];n>0&&(r*=256);)o+=this[t+--n]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),Q.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),Q.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),Q.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),Q.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,i,n){t=+t,e=0|e,i=0|i,n||O(this,t,e,i,Math.pow(2,8*i),0);var r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},o.prototype.writeUIntBE=function(t,e,i,n){t=+t,e=0|e,i=0|i,n||O(this,t,e,i,Math.pow(2,8*i),0);var r=i-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+i},o.prototype.writeUInt8=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e=0|e,!n){var r=Math.pow(2,8*i-1);O(this,t,e,i,r-1,-r)}var o=0,s=1,a=0>t?1:0;for(this[e]=255&t;++o<i&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+i},o.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e=0|e,!n){var r=Math.pow(2,8*i-1);O(this,t,e,i,r-1,-r)}var o=i-1,s=1,a=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+i},o.prototype.writeInt8=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,i){return F(this,t,e,!0,i)},o.prototype.writeFloatBE=function(t,e,i){return F(this,t,e,!1,i)},o.prototype.writeDoubleLE=function(t,e,i){return N(this,t,e,!0,i)},o.prototype.writeDoubleBE=function(t,e,i){return N(this,t,e,!1,i)},o.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&i>n&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,s=n-i;if(this===t&&e>i&&n>e)for(r=s-1;r>=0;r--)t[r+e]=this[r+i];else if(1e3>s||!o.TYPED_ARRAY_SUPPORT)for(r=0;s>r;r++)t[r+e]=this[r+i];else t._set(this.subarray(i,i+s),e);return s},o.prototype.fill=function(t,e,i){if(t||(t=0),e||(e=0),i||(i=this.length),e>i)throw new RangeError("end < start");if(i!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>i||i>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;i>n;n++)this[n]=t;else{var r=V(t.toString()),o=r.length;for(n=e;i>n;n++)this[n]=r[n%o]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var t=new Uint8Array(this.length),e=0,i=t.length;i>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var $=o.prototype;o._augment=function(t){return t.constructor=o,t._isBuffer=!0,t._set=t.set,t.get=$.get,t.set=$.set,t.write=$.write,t.toString=$.toString,t.toLocaleString=$.toString,t.toJSON=$.toJSON,t.equals=$.equals,t.compare=$.compare,t.indexOf=$.indexOf,t.copy=$.copy,t.slice=$.slice,t.readUIntLE=$.readUIntLE,t.readUIntBE=$.readUIntBE,t.readUInt8=$.readUInt8,t.readUInt16LE=$.readUInt16LE,t.readUInt16BE=$.readUInt16BE,t.readUInt32LE=$.readUInt32LE,t.readUInt32BE=$.readUInt32BE,t.readIntLE=$.readIntLE,t.readIntBE=$.readIntBE,t.readInt8=$.readInt8,t.readInt16LE=$.readInt16LE,t.readInt16BE=$.readInt16BE,t.readInt32LE=$.readInt32LE,t.readInt32BE=$.readInt32BE,t.readFloatLE=$.readFloatLE,t.readFloatBE=$.readFloatBE,t.readDoubleLE=$.readDoubleLE,t.readDoubleBE=$.readDoubleBE,t.writeUInt8=$.writeUInt8,t.writeUIntLE=$.writeUIntLE,t.writeUIntBE=$.writeUIntBE,t.writeUInt16LE=$.writeUInt16LE,t.writeUInt16BE=$.writeUInt16BE,t.writeUInt32LE=$.writeUInt32LE,t.writeUInt32BE=$.writeUInt32BE,t.writeIntLE=$.writeIntLE,t.writeIntBE=$.writeIntBE,t.writeInt8=$.writeInt8,t.writeInt16LE=$.writeInt16LE,t.writeInt16BE=$.writeInt16BE,t.writeInt32LE=$.writeInt32LE,t.writeInt32BE=$.writeInt32BE,t.writeFloatLE=$.writeFloatLE,t.writeFloatBE=$.writeFloatBE,t.writeDoubleLE=$.writeDoubleLE,t.writeDoubleBE=$.writeDoubleBE,t.fill=$.fill,t.inspect=$.inspect,t.toArrayBuffer=$.toArrayBuffer,t};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":2,ieee754:3,"is-array":4}],2:[function(t,e,i){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===d?62:e===a||e===u?63:h>e?-1:h+10>e?e-h+26+26:c+26>e?e-c:l+26>e?e-l+26:void 0}function i(t){function i(t){l[d++]=t}var n,r,s,a,h,l;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;h="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,l=new o(3*t.length/4-h),s=h>0?t.length-4:t.length;var d=0;for(n=0,r=0;s>n;n+=4,r+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),i((16711680&a)>>16),i((65280&a)>>8),i(255&a);return 2===h?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,i(255&a)):1===h&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,i(a>>8&255),i(255&a)),l}function r(t){function e(t){return n.charAt(t)}function i(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var r,o,s,a=t.length%3,h="";for(r=0,s=t.length-a;s>r;r+=3)o=(t[r]<<16)+(t[r+1]<<8)+t[r+2],h+=i(o);switch(a){case 1:o=t[t.length-1],h+=e(o>>2),h+=e(o<<4&63),h+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],h+=e(o>>10),h+=e(o>>4&63),h+=e(o<<2&63),h+="="}return h}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),h="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0),d="-".charCodeAt(0),u="_".charCodeAt(0);t.toByteArray=i,t.fromByteArray=r}("undefined"==typeof i?this.base64js={}:i)},{}],3:[function(t,e,i){i.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,h=(1<<a)-1,l=h>>1,c=-7,d=i?r-1:0,u=i?-1:1,f=t[e+d];for(d+=u,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+t[e+d],d+=u,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+d],d+=u,c-=8);if(0===o)o=1-l;else{if(o===h)return s?NaN:(f?-1:1)*(1/0);s+=Math.pow(2,n),o-=l}return(f?-1:1)*s*Math.pow(2,o-n)},i.write=function(t,e,i,n,r,o){var s,a,h,l=8*o-r-1,c=(1<<l)-1,d=c>>1,u=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),e+=s+d>=1?u/h:u*Math.pow(2,1-d),e*h>=2&&(s++,h/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(e*h-1)*Math.pow(2,r),s+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;t[i+f]=255&a,f+=p,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[i+f]=255&s,f+=p,s/=256,l-=8);t[i+f-p]|=128*m}},{}],4:[function(t,e,i){var n=Array.isArray,r=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==r.call(t)}},{}],5:[function(t,e,i){var n,r;r=t("./errors"),n=n=function(){function t(){this.compiled=[]}return t.prototype.prependText=function(t){return this.compiled.unshift(t),this},t.prototype.appendTag=function(t){var e;if(!t)throw e=new r.XTInternalError("Compiled tag empty"),e.properties.id="tag_appended_empty",e;return this.compiled=this.compiled.concat(t.compiled),this},t.prototype.appendRaw=function(t){return this.compiled.push({type:"raw",tag:t}),this},t.prototype.appendText=function(t){return""!==t&&this.compiled.push(t),this},t.prototype.appendSubTemplate=function(t,e,i){var n;if(!t)throw n=new r.XTInternalError("Subtemplate empty"),n.properties.id="subtemplate_appended_empty",n;return this.compiled.push({type:"loop",tag:e,inverted:i,template:t})},t}(),e.exports=n},{"./errors":9}],6:[function(t,e,i){var n;n=n=function(){function t(t){null==t&&(t=[]),this.set(t)}return t.prototype.set=function(t){var e,i,n;if(null==t&&(t=[]),this["null"])return this;for(this.compiled=[],e=0,i=t.length;i>e;e++)n=t[e],""!==n&&this.compiled.push(n);return this},t.prototype.prependText=function(t){return this["null"]?this:(""!==t&&this.compiled.unshift(t),this)},t.prototype.appendText=function(t){return this["null"]?this:(""!==t&&this.compiled.push(t),this)},t}(),n["null"]=function(){var t;return t=new n,t["null"]=!0,t},e.exports=n},{}],7:[function(t,e,i){var n,r,o=[].slice;r=t("./errors"),n={},n.escapeRegExp=function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},n.defaults={nullGetter:function(t,e){return"simple"===e.tag?"undefined":("raw"===e.tag,"")},parser:function(t){return{get:function(e){return"."===t?e:e[t]}}},intelligentTagging:!0,delimiters:{start:"{",end:"}"}},n.charMap={"&":"&amp;","'":"&apos;","<":"&lt;",">":"&gt;"},n.wordToUtf8=function(t){var e,i,r;"string"!=typeof t&&(t=t.toString()),i=n.charMap;for(e in i)r=i[e],t=t.replace(new RegExp(n.escapeRegExp(r),"g"),e);return t},n.utf8ToWord=function(t){var e,i,r;"string"!=typeof t&&(t=t.toString()),i=n.charMap;for(r in i)e=i[r],t=t.replace(new RegExp(n.escapeRegExp(r),"g"),e);return t},n.clone=function(t){var e,i,r;if(null==t||"object"!=typeof t)return t;if("Date"==typeof t)return new Date(t.getTime());if("RegExp"==typeof t)return e="",null!=t.global&&(e+="g"),null!=t.ignoreCase&&(e+="i"),null!=t.multiline&&(e+="m"),null!=t.sticky&&(e+="y"),new RegExp(t.source,e);r=new t.constructor;for(i in t)r[i]=n.clone(t[i]);return r},n.convertSpaces=function(t){return t.replace(new RegExp(String.fromCharCode(160),"g")," ");
},n.pregMatchAll=function(t,e){var i,n;return"object"!=typeof t&&(t=new RegExp(t,"g")),i=[],n=function(){var t,e,n,r,s;return e=arguments[0],r=4<=arguments.length?o.call(arguments,1,t=arguments.length-2):(t=1,[]),n=arguments[t++],s=arguments[t++],r.unshift(e),r.offset=n,i.push(r)},e.replace(t,n),i},n.sizeOfObject=function(t){var e,i;i=0;for(e in t)i++;return i},n.encode_utf8=function(t){return unescape(encodeURIComponent(t))},n.decode_utf8=function(t){var e,i,o;try{if(void 0===t)return;return decodeURIComponent(escape(n.convert_spaces(t)))}catch(o){throw e=o,i=new r.XTError("Could not decode utf8"),i.properties={toDecode:t,baseErr:e},i}},n.base64encode=function(t){return btoa(unescape(encodeURIComponent(t)))},n.tags=n.defaults.delimiters,n.defaultParser=n.defaults.parser,n.convert_spaces=n.convertSpaces,n.preg_match_all=n.pregMatchAll,e.exports=n},{"./errors":9}],8:[function(t,e,i){var n,r,o,s,a=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;o=t("./xmlTemplater"),r=t("./subContent"),s=t("./xmlUtil"),n=n=function(t){function e(t,i){null==t&&(t=""),null==i&&(i={}),e.__super__.constructor.call(this,"",i),this.currentClass=e,this.tagsXmlArray=["w:t","m:t"],this.tagXml="w:t",this.tagRawXml="w:p",this.load(t)}return a(e,t),e.prototype.calcIntellegentlyDashElement=function(){var t,i,n,o,a,h,l,c;for(a=new r(this.content).getOuterLoop(this.templaterState),t=a.content,l=a.start,i=a.end,h=s.getListXmlElements(this.content,l,i-l),n=0,o=h.length;o>n;n++)if(c=h[n],"<w:tc>"===c.tag)return"w:tr";return e.__super__.calcIntellegentlyDashElement.call(this)},e}(o),e.exports=n},{"./subContent":12,"./xmlTemplater":15,"./xmlUtil":16}],9:[function(t,e,i){var n,r,o,s;n=function(t){return this.name="GenericError",this.message=t,this.stack=(new Error).stack},n.prototype=new Error,s=function(t){return this.name="TemplateError",this.message=t,this.stack=(new Error).stack},s.prototype=new n,o=function(t){return this.name="ScopeParserError",this.message=t,this.stack=(new Error).stack},o.prototype=new n,r=function(t){return this.name="InternalError",this.properties={explanation:"InternalError"},this.message=t,this.stack=(new Error).stack},r.prototype=new n,e.exports={XTError:n,XTTemplateError:s,XTInternalError:r,XTScopeParserError:o}},{}],10:[function(t,e,i){var n;e.exports=n=function(){function t(){this.modules=[]}return t.prototype.attachModule=function(t){return this.modules.push(t),t.manager=this,this},t.prototype.sendEvent=function(t,e){var i,n,r,o,s;for(o=this.modules,s=[],i=0,n=o.length;n>i;i++)r=o[i],s.push(r.handleEvent(t,e));return s},t.prototype.get=function(t){var e,i,n,r,o,s;for(s=null,o=this.modules,i=0,n=o.length;n>i;i++)r=o[i],e=r.get(t),s=null!==e?e:s;return s},t.prototype.handle=function(t,e){var i,n,r,o,s,a;for(a=null,s=this.modules,n=0,r=s.length;r>n;n++){if(o=s[n],null!==a)return;i=o.handle(t,e),a=null!==i?i:a}return a},t.prototype.getInstance=function(t){return this[t]},t}()},{}],11:[function(t,e,i){var n,r,o;n=t("./docUtils"),r=t("./errors"),e.exports=o=function(){function t(t){this.tags=t.tags,this.scopePath=t.scopePath,this.usedTags=t.usedTags,this.scopeList=t.scopeList,this.parser=t.parser,this.moduleManager=t.moduleManager,this.nullGetter=t.nullGetter,this.delimiters=t.delimiters,this.moduleManager.scopeManager=this}return t.prototype.loopOver=function(t,e,i){var n;return null==i&&(i=!1),n=this.getValue(t),this.loopOverValue(n,e,i)},t.prototype.loopOverValue=function(t,e,i){var n,r,o,s,a;if(null==i&&(i=!1),a=Object.prototype.toString.call(t),i)return null==t?e(this.scopeList[this.num]):t?void("[object Array]"===a&&0===t.length&&e(this.scopeList[this.num])):e(this.scopeList[this.num]);if(null!=t){if("[object Array]"===a)for(n=r=0,o=t.length;o>r;n=++r)s=t[n],e(s);return"[object Object]"===a&&e(t),t===!0?e(this.scopeList[this.num]):void 0}},t.prototype.getValue=function(t,e){var i,n,o,s,a,h,l;this.num=null!=e?e:this.scopeList.length-1,l=this.scopeList[this.num];try{a=this.parser(t)}catch(o){throw n=o,i=new r.XTScopeParserError("Scope parser compilation failed"),i.properties={id:"scopeparser_compilation_failed",tag:t,explanation:"The scope parser for the tag "+t+" failed to compile"},i}try{h=a.get(l)}catch(s){throw n=s,i=new r.XTScopeParserError("Scope parser execution failed"),i.properties={id:"scopeparser_execution_failed",explanation:"The scope parser for the tag "+t+" failed to execute",scope:l,tag:t},i}return null==h&&this.num>0?this.getValue(t,this.num-1):h},t.prototype.getValueFromScope=function(t){var e,i;return e=this.getValue(t),null==e?(this.useTag(t,!1),null):("string"==typeof e?(this.useTag(t,!0),i=e):i="number"==typeof e?String(e):e,i)},t.prototype.useTag=function(t,e){var i,n,r,o,s,a;for(a=e?this.usedTags.def:this.usedTags.undef,o=this.scopePath,i=n=0,r=o.length;r>n;i=++n)s=o[i],null==a[s]&&(a[s]={}),a=a[s];return""!==t?a[t]=!0:void 0},t}()},{"./docUtils":7,"./errors":9}],12:[function(t,e,i){var n,r;n=t("./errors"),e.exports=r=function(){function t(t){this.fullText=null!=t?t:"",this.text="",this.start=0,this.end=0}return t.prototype.getInnerLoop=function(t){return this.start=t.calcEndTag(t.loopOpen),this.end=t.calcStartTag(t.loopClose),this.refreshText()},t.prototype.getOuterLoop=function(t){return this.start=t.calcStartTag(t.loopOpen),this.end=t.calcEndTag(t.loopClose),this.refreshText()},t.prototype.getInnerTag=function(t){return this.start=t.calcPosition(t.tagStart),this.end=t.calcPosition(t.tagEnd)+1,this.refreshText()},t.prototype.refreshText=function(){return this.text=this.fullText.substr(this.start,this.end-this.start),this},t.prototype.getErrorProps=function(t){return{xmlTag:t,text:this.fullText,start:this.start,previousEnd:this.end}},t.prototype.getOuterXml=function(t){var e,i,r;if(e=this.fullText.indexOf("</"+t+">",this.end),r=Math.max(this.fullText.lastIndexOf("<"+t+">",this.start),this.fullText.lastIndexOf("<"+t+" ",this.start)),-1===e)throw i=new n.XTTemplateError("Can't find endTag"),i.properties=this.getErrorProps(t),i;if(-1===r)throw i=new n.XTTemplateError("Can't find startTag"),i.properties=this.getErrorProps(t),i;return this.end=e+("</"+t+">").length,this.start=r,this.refreshText()},t.prototype.replace=function(t){return this.fullText=this.fullText.substr(0,this.start)+t+this.fullText.substr(this.end),this.end=this.start+t.length,this.refreshText()},t}()},{"./errors":9}],13:[function(t,e,i){var n,r,o;n=t("./docUtils"),r=t("./errors"),e.exports=o=function(){function t(t,e){this.moduleManager=t,this.delimiters=e,this.moduleManager.templaterState=this}return t.prototype.moveCharacters=function(t,e,i){var n,r,o,s,a;for(a=[],r=n=o=t,s=this.matches.length;s>=o?s>n:n>s;r=s>=o?++n:--n)a.push(this.charactersAdded[r]+=e-i);return a},t.prototype.calcStartTag=function(t){return this.calcPosition(t.start)},t.prototype.calcXmlTagPosition=function(t){return this.matches[t].offset+this.charactersAdded[t]},t.prototype.calcEndTag=function(t){return this.calcPosition(t.end)+1},t.prototype.calcPosition=function(t){return this.matches[t.numXmlTag].offset+this.matches[t.numXmlTag][1].length+this.charactersAdded[t.numXmlTag]+t.numCharacter},t.prototype.innerContent=function(t){return this.matches[this[t].numXmlTag][2]},t.prototype.initialize=function(){return this.context="",this.inForLoop=!1,this.loopIsInverted=!1,this.inTag=!1,this.inDashLoop=!1,this.rawXmlTag=!1,this.textInsideTag="",this.trail="",this.trailSteps=[],this.offset=[]},t.prototype.startTag=function(){var t,e;if(this.inTag===!0)throw t=new r.XTTemplateError("Unclosed tag"),e=this.textInsideTag,t.properties={xtag:e,id:"unclosed_tag",context:this.context,explanation:"The tag beginning with '"+e.substr(10)+"' is unclosed"},t;return this.currentStep=this.trailSteps[0],this.inTag=!0,this.rawXmlTag=!1,this.textInsideTag="",this.tagStart=this.currentStep,this.trail=""},t.prototype.loopType=function(){var t;return this.inDashLoop?"dash":this.inForLoop?"for":this.rawXmlTag?"xml":(t=this.moduleManager.get("loopType"),null!==t?t:"simple")},t.prototype.isLoopClosingTag=function(){return"/"===this.textInsideTag[0]&&"/"+this.loopOpen.tag===this.textInsideTag},t.prototype.finishLoop=function(){return this.context="",this.rawXmlTag=!1,this.inForLoop=!1,this.loopIsInverted=!1,this.loopOpen=null,this.loopClose=null,this.inDashLoop=!1,this.inTag=!1,this.textInsideTag=""},t.prototype.getLeftValue=function(){return this.innerContent("tagStart").substr(0,this.tagStart.numCharacter+this.offset[this.tagStart.numXmlTag])},t.prototype.getRightValue=function(){return this.innerContent("tagEnd").substr(this.tagEnd.numCharacter+1+this.offset[this.tagEnd.numXmlTag])},t.prototype.endTag=function(){var t,e;if(this.inTag===!1)throw e=new r.XTTemplateError("Unopened tag"),e.properties={id:"unopened_tag",explanation:"Unopened tag near : '"+this.context.substr(this.context.length-10,10)+"'",context:this.context},e;return this.inTag=!1,this.tagEnd=this.currentStep,this.textInsideTag=this.textInsideTag.substr(0,this.textInsideTag.length+1-this.delimiters.end.length),this.textInsideTag=n.wordToUtf8(this.textInsideTag),this.fullTextTag=this.delimiters.start+this.textInsideTag+this.delimiters.end,"simple"===this.loopType()&&("@"===this.textInsideTag[0]&&(this.rawXmlTag=!0,this.tag=this.textInsideTag.substr(1)),"#"!==this.textInsideTag[0]&&"^"!==this.textInsideTag[0]||(this.inForLoop=!0,this.loopOpen={start:this.tagStart,end:this.tagEnd,tag:this.textInsideTag.substr(1),raw:this.textInsideTag}),"^"===this.textInsideTag[0]&&(this.loopIsInverted=!0),"-"===this.textInsideTag[0]&&"simple"===this.loopType()&&(this.inDashLoop=!0,t=/^-([^\s]+)\s(.+)$/,this.loopOpen={start:this.tagStart,end:this.tagEnd,tag:this.textInsideTag.replace(t,"$2"),element:this.textInsideTag.replace(t,"$1"),raw:this.textInsideTag})),"/"===this.textInsideTag[0]?this.loopClose={start:this.tagStart,end:this.tagEnd,raw:this.textInsideTag}:void 0},t}()},{"./docUtils":7,"./errors":9}],14:[function(t,e,i){var n,r,o=[].slice;n=t("./docUtils"),e.exports=r=function(){function t(t){this.content=t}return t.prototype.parse=function(t){var e;return this.tagsXmlArray=t,this.tagsXmlArrayJoined=this.tagsXmlArray.join("|"),this.matches=n.pregMatchAll("(<(?:"+this.tagsXmlArrayJoined+")[^>]*>)([^<>]*)</(?:"+this.tagsXmlArrayJoined+")>",this.content),this.charactersAdded=function(){var t,i,n;for(n=[],e=t=0,i=this.matches.length;i>=0?i>t:t>i;e=i>=0?++t:--t)n.push(0);return n}.call(this),this.handleRecursiveCase(),this},t.prototype.handleRecursiveCase=function(){var t,e,i;return i=function(t){return function(){var e,i,n,r,s;return i=arguments[0],r=4<=arguments.length?o.call(arguments,1,e=arguments.length-2):(e=1,[]),n=arguments[e++],s=arguments[e++],i=r[0]+r[1],r.unshift(i),r.offset=n,r.first=!0,t.matches.unshift(r),t.charactersAdded.unshift(0)}}(this),-1===this.content.indexOf("<")&&-1===this.content.indexOf(">")&&this.content.replace(/^()([^<>]*)$/,i),t="^()([^<]+)</(?:"+this.tagsXmlArrayJoined+")>",this.content.replace(new RegExp(t),i),e=function(t){return function(){var e,i,n,r,s;return i=arguments[0],r=4<=arguments.length?o.call(arguments,1,e=arguments.length-2):(e=1,[]),n=arguments[e++],s=arguments[e++],r.unshift(i),r.offset=n,r.last=!0,t.matches.push(r),t.charactersAdded.push(0)}}(this),t="(<(?:"+this.tagsXmlArrayJoined+")[^>]*>)([^>]+)$",this.content.replace(new RegExp(t),e),this},t}()},{"./docUtils":7}],15:[function(t,e,i){var n,r,o,s,a,h,l,c,d,u,f;o=t("./docUtils"),h=t("./scopeManager"),l=t("./subContent"),c=t("./templaterState"),d=t("./xmlMatcher"),a=t("./moduleManager"),n=t("./compiledTemplate"),r=t("./compiledXmlTag"),s=t("./errors"),f=function(t,e){var i,n,r;return n=new d(t).parse(e),r=function(){var t,e,r,o;for(r=n.matches,o=[],t=0,e=r.length;e>t;t++)i=r[t],o.push(i[2]);return o}(),o.wordToUtf8(o.convertSpaces(r.join("")))},e.exports=u=function(){function t(e,i){null==e&&(e=""),null==i&&(i={}),this.tagsXmlArray=[],this.tagXml="",this.tagRawXml="",this.currentClass=t,this.fromJson(i),this.templaterState=new c(this.moduleManager,this.delimiters)}return t.prototype.load=function(t){var e,i;if(this.content=t,"string"!=typeof this.content)throw e=new s.XTInternalError("Content must be a string"),e.properties.id="xmltemplater_content_must_be_string",e;return i=new d(this.content).parse(this.tagsXmlArray),this.templaterState.matches=i.matches,this.templaterState.charactersAdded=i.charactersAdded},t.prototype.fromJson=function(t){var e,i,n;null==t&&(t={}),this.tags=null!=t.tags?t.tags:{},this.scopePath=null!=t.scopePath?t.scopePath:[],this.scopeList=null!=t.scopeList?t.scopeList:[this.tags],this.usedTags=null!=t.usedTags?t.usedTags:{def:{},undef:{}},n=o.defaults;for(i in n)e=n[i],this[i]=null!=t[i]?t[i]:e;return this.moduleManager=null!=t.moduleManager?t.moduleManager:new a,this.scopeManager=new h({tags:this.tags,scopePath:this.scopePath,usedTags:this.usedTags,scopeList:this.scopeList,parser:this.parser,moduleManager:this.moduleManager,delimiters:this.delimiters})},t.prototype.toJson=function(){var t,e,i,n;i={tags:o.clone(this.scopeManager.tags),scopePath:o.clone(this.scopeManager.scopePath),scopeList:o.clone(this.scopeManager.scopeList),usedTags:this.scopeManager.usedTags,moduleManager:this.moduleManager},n=o.defaults;for(e in n)t=n[e],i[e]=this[e];return i},t.prototype.calcIntellegentlyDashElement=function(){return!1},t.prototype.getFullText=function(){return f(this.content,this.tagsXmlArray)},t.prototype.updateModuleManager=function(){return this.moduleManager.xmlTemplater=this,this.moduleManager.templaterState=this.templaterState,this.moduleManager.scopeManager=this.scopeManager},t.prototype.handleModuleManager=function(t,e){return this.updateModuleManager(),this.moduleManager.handle(t,e)},t.prototype.render=function(){return this.compile()},t.prototype.compile=function(){var t,e,i,r,o,s,a,h,l,c,d,u,f;for(this.sameTags=this.delimiters.start===this.delimiters.end,this.compiled=new n,this.lastStart=0,this.templaterState.initialize(),this.handleModuleManager("xmlRendering"),f=this.templaterState.matches,d=e=0,o=f.length;o>e;d=++e)if(l=f[d],i=l[2],this.templaterState.offset[d]=0,0!==this.templaterState.trail.length||this.templaterState.inTag||-1!==i.indexOf(this.delimiters.start[0])||-1!==i.indexOf(this.delimiters.end[0]))for(c=r=0,s=i.length;s>r;c=++r)t=i[c],this.templaterState.trail+=t,a=this.templaterState.inTag?this.delimiters.end.length:this.delimiters.start.length,this.templaterState.trail=this.templaterState.trail.substr(-a,a),this.templaterState.currentStep={numXmlTag:d,numCharacter:c},this.templaterState.trailSteps.push({numXmlTag:d,numCharacter:c}),this.templaterState.trailSteps=this.templaterState.trailSteps.splice(-this.delimiters.start.length,this.delimiters.start.length),this.templaterState.context+=t,this.sameTags===!0&&this.templaterState.inTag===!1&&this.templaterState.trail===this.delimiters.start||this.sameTags===!1&&this.templaterState.trail===this.delimiters.start?this.templaterState.startTag():this.sameTags===!0&&this.templaterState.inTag===!0&&this.templaterState.trail===this.delimiters.end||this.sameTags===!1&&this.templaterState.trail===this.delimiters.end?(this.updateModuleManager(),this.templaterState.endTag(),h=this.templaterState.loopType(),"simple"===h&&this.replaceSimpleTag(),"xml"===h&&this.replaceSimpleTagRawXml(),"dash"!==h&&"for"!==h||this.templaterState.isLoopClosingTag()&&(this.replaceLoopTag(),this.templaterState.finishLoop()),-1===["simple","dash","for","xml"].indexOf(h)&&this.handleModuleManager("replaceTag",h)):this.templaterState.inTag===!0&&(this.templaterState.textInsideTag+=t);return this.handleModuleManager("xmlRendered"),u=this.content.substr(this.lastStart),this.compiled.appendText(u),this},t.prototype.replaceSimpleTag=function(){var t;return t=this.scopeManager.getValueFromScope(this.templaterState.textInsideTag),null==t&&(t=this.nullGetter(this.templaterState.textInsideTag,{tag:"simple"})),this.content=this.replaceTagByValue(o.utf8ToWord(t),this.content)},t.prototype.replaceSimpleTagRawXml=function(){var t,e,i,n,r,o,a,h,c;r=this.scopeManager.getValueFromScope(this.templaterState.tag),null==r&&(r=this.nullGetter(this.templaterState.tag,{tag:"raw"})),c=new l(this.content),c.getInnerTag(this.templaterState);try{o=c.getOuterXml(this.tagRawXml)}catch(i){throw e=i,e instanceof s.XTTemplateError&&(e.properties.id="raw_tag_outerxml_invalid",e.properties.xtag=this.templaterState.textInsideTag,e.properties.explanation="The raw tag "+e.properties.xtag+" is not valid in this context."),e}if(n=f(o.text,this.tagsXmlArray),this.templaterState.fullTextTag!==n)throw t=new s.XTTemplateError("Raw xml tag should be the only text in paragraph"),t.properties={id:"raw_xml_tag_should_be_only_text_in_paragraph",paragraphContent:n,fullTag:this.templaterState.fullTextTag,xtag:this.templaterState.textInsideTag,explanation:"The tag : '"+this.templaterState.fullTextTag+"' should be the the only text in the paragraph (it contains '"+n+"')"},t;return h=o.start,a=this.content.substr(this.lastStart,h-this.lastStart),this.compiled.appendText(a),this.lastStart=h,this.compiled.appendRaw(this.templaterState.tag),this.replaceXml(o,r)},t.prototype.replaceXml=function(t,e){return this.templaterState.moveCharacters(this.templaterState.tagStart.numXmlTag,e.length,t.text.length),this.content=t.replace(e).fullText},t.prototype.deleteTag=function(t,e){var i;return this.templaterState.tagStart=e.start,this.templaterState.tagEnd=e.end,this.templaterState.textInsideTag=e.raw,i=this.replaceTagByValue("",t)},t.prototype.deleteOuterTags=function(t){return this.deleteTag(this.deleteTag(t,this.templaterState.loopOpen),this.templaterState.loopClose)},t.prototype.dashLoop=function(t,e){var i,n,r,o,a,h;null==e&&(e=!1),h=new l(this.content),h.getInnerLoop(this.templaterState);try{o=h.getOuterXml(t)}catch(n){throw i=n,i instanceof s.XTTemplateError&&(i.properties.id="dashloop_tag_outerxml_invalid",i.properties.xtag=this.templaterState.textInsideTag,i.properties.explanation="The dashLoop tag "+i.properties.xtag+" is not valid in this context."),i}return this.templaterState.moveCharacters(0,0,o.start),a=o.text,r=this.deleteOuterTags(a,e),this.templaterState.moveCharacters(0,o.start,0),this.templaterState.moveCharacters(this.templaterState.tagStart.numXmlTag,a.length,r.length),this.forLoop(o,r)},t.prototype.xmlToBeReplaced=function(t){var e,i;return i="",e="",t.noStartTag?t.insideValue:(i=t.spacePreserve&&"w:t"===t.tag?"<"+t.fullTag+' xml:space="preserve">':this.templaterState.matches[t.xmlTagNumber][1],t.noEndTag||(e="</"+t.tag+">"),this.currentCompiledTag.prependText(i),this.currentCompiledTag.appendText(e),i+t.insideValue+e)},t.prototype.replaceFirstFrom=function(t,e,i,n){var r,o;return o=t.substr(n),r=o.replace(e,i),t.substr(0,n)+r},t.prototype.replaceXmlTag=function(t,e){var i,n,r,o;if(this.templaterState.offset[e.xmlTagNumber]+=e.insideValue.length-this.templaterState.matches[e.xmlTagNumber][2].length,e.fullTag=this.templaterState.matches[e.xmlTagNumber][1].replace(/^<([^>]+)>$/,"$1"),e.tag=e.fullTag.replace(/([^ ]*).*/,"$1"),e.spacePreserve=null!=e.spacePreserve?e.spacePreserve:!0,e.spacePreserve=e.spacePreserve&&-1===this.templaterState.matches[e.xmlTagNumber][1].indexOf('xml:space="preserve"'),e.noStartTag=null!=e.noStartTag?e.noStartTag:!1,e.noEndTag=null!=e.noEndTag?e.noEndTag:!1,r=this.xmlToBeReplaced(e),this.templaterState.matches[e.xmlTagNumber][2]=e.insideValue,o=this.templaterState.calcXmlTagPosition(e.xmlTagNumber),this.templaterState.moveCharacters(e.xmlTagNumber+1,r.length,this.templaterState.matches[e.xmlTagNumber][0].length),-1===t.indexOf(this.templaterState.matches[e.xmlTagNumber][0]))throw i=new s.XTInternalError("Match not found in content"),i.properties.id="xmltemplater_replaced_cant_be_same_as_substring",i.properties.expectedMatch=this.templaterState.matches[e.xmlTagNumber][0],i.properties.content=t,i;return t=this.replaceFirstFrom(t,this.templaterState.matches[e.xmlTagNumber][0],r,o),this.templaterState.matches[e.xmlTagNumber][0]=r,n=t.substr(this.lastStart,o-this.lastStart),"simple"===this.templaterState.loopType()&&(this.compiled.appendText(n),this.lastStart=o+this.templaterState.matches[e.xmlTagNumber][0].length,this.compiled.appendTag(this.currentCompiledTag)),t},t.prototype.replaceTagByValue=function(t,e){var i,n,o,s,a;if(o={xmlTagNumber:this.templaterState.tagStart.numXmlTag,noStartTag:null!=this.templaterState.matches[this.templaterState.tagStart.numXmlTag].first,noEndTag:null!=this.templaterState.matches[this.templaterState.tagStart.numXmlTag].last},this.templaterState.tagEnd.numXmlTag===this.templaterState.tagStart.numXmlTag)return this.currentCompiledTag=new r([this.templaterState.getLeftValue(),{type:"tag",tag:this.templaterState.textInsideTag},this.templaterState.getRightValue()]),o.insideValue=this.templaterState.getLeftValue()+t+this.templaterState.getRightValue(),this.replaceXmlTag(e,o);if(this.templaterState.tagEnd.numXmlTag>this.templaterState.tagStart.numXmlTag){for(o.insideValue=t,this.currentCompiledTag=new r([{type:"tag",tag:this.templaterState.textInsideTag}]),null==this.templaterState.matches[this.templaterState.tagStart.numXmlTag].first&&null==this.templaterState.matches[this.templaterState.tagStart.numXmlTag].last&&(this.currentCompiledTag=new r([this.templaterState.getLeftValue(),{type:"tag",tag:this.templaterState.textInsideTag}]),o.insideValue=this.templaterState.getLeftValue()+t),e=this.replaceXmlTag(e,o),o={insideValue:"",spacePreserve:!1},n=i=s=this.templaterState.tagStart.numXmlTag+1,a=this.templaterState.tagEnd.numXmlTag;a>=s?a>i:i>a;n=a>=s?++i:--i)o.xmlTagNumber=n,this.currentCompiledTag=new r([]),e=this.replaceXmlTag(e,o);return o={insideValue:this.templaterState.getRightValue(),spacePreserve:!0,xmlTagNumber:this.templaterState.tagEnd.numXmlTag,noEndTag:null!=this.templaterState.matches[this.templaterState.tagEnd.numXmlTag].last},this.currentCompiledTag=r["null"](),this.replaceXmlTag(e,o)}},t.prototype.replaceLoopTag=function(){var t,e,i;return"dash"===this.templaterState.loopType()?this.dashLoop(this.templaterState.loopOpen.element):this.intelligentTagging===!0&&(t=this.calcIntellegentlyDashElement(),t!==!1)?this.dashLoop(t,!0):(i=new l(this.content).getOuterLoop(this.templaterState),e=new l(this.content).getInnerLoop(this.templaterState).text,this.forLoop(i,e))},t.prototype.calcSubXmlTemplater=function(t,e){var i;return i=this.toJson(),null!=e&&null!=e.tags&&(i.tags=e.tags,i.scopeList=i.scopeList.concat(e.tags),i.scopePath=i.scopePath.concat(this.templaterState.loopOpen.tag)),new this.currentClass(t,i).render()},t.prototype.forLoop=function(t,e){var i,n,r,o,s,a;return o=t.start,r=this.content.substr(this.lastStart,o-this.lastStart),this.compiled.appendText(r),this.lastStart=t.end,a=this.templaterState.loopOpen.tag,n="",i=function(t){return function(i){var r;return r=t.calcSubXmlTemplater(e,{tags:i}),n+=r.content}}(this),this.scopeManager.loopOver(a,i,this.templaterState.loopIsInverted),s=this.calcSubXmlTemplater(e,{tags:{}}),this.compiled.appendSubTemplate(s.compiled.compiled,a,this.templaterState.loopIsInverted),this.lastStart+=n.length-t.text.length,this.replaceXml(t,n)},t}()},{"./compiledTemplate":5,"./compiledXmlTag":6,"./docUtils":7,"./errors":9,"./moduleManager":10,"./scopeManager":11,"./subContent":12,"./templaterState":13,"./xmlMatcher":14}],16:[function(t,e,i){var n,r;n=t("./docUtils"),r={},r.getListXmlElements=function(t,e,i){var r,o,s,a,h,l,c,d,u,f;for(null==e&&(e=0),null==i&&(i=t.length-1),f=n.pregMatchAll("<(/?[^/> ]+)([^>]*)>",t.substr(e,i)),d=[],r=a=0,c=f.length;c>a;r=++a)u=f[r],"/"===u[1][0]?(h=!1,d.length>0&&(l=d[d.length-1],s=l.tag.substr(1,l.tag.length-2),o=u[1].substr(1),s===o&&(h=!0)),h?d.pop():d.push({tag:"<"+u[1]+">",offset:u.offset})):"/"!==u[2][u[2].length-1]&&d.push({tag:"<"+u[1]+">",offset:u.offset});return d},e.exports=r},{"./docUtils":7}],17:[function(t,e,i){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(t,e){for(var i,r,o,s,a,h,l,c="",d=0;d<t.length;)i=t.charCodeAt(d++),r=t.charCodeAt(d++),o=t.charCodeAt(d++),s=i>>2,a=(3&i)<<4|r>>4,h=(15&r)<<2|o>>6,l=63&o,isNaN(r)?h=l=64:isNaN(o)&&(l=64),c=c+n.charAt(s)+n.charAt(a)+n.charAt(h)+n.charAt(l);return c},i.decode=function(t,e){var i,r,o,s,a,h,l,c="",d=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<t.length;)s=n.indexOf(t.charAt(d++)),a=n.indexOf(t.charAt(d++)),h=n.indexOf(t.charAt(d++)),l=n.indexOf(t.charAt(d++)),i=s<<2|a>>4,r=(15&a)<<4|h>>2,o=(3&h)<<6|l,c+=String.fromCharCode(i),64!=h&&(c+=String.fromCharCode(r)),64!=l&&(c+=String.fromCharCode(o));return c}},{}],18:[function(t,e,i){"use strict";function n(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}n.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=n},{}],19:[function(t,e,i){"use strict";i.STORE={magic:"\x00\x00",compress:function(t,e){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},i.DEFLATE=t("./flate")},{"./flate":24}],20:[function(t,e,i){"use strict";var n=t("./utils"),r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(t,e){if("undefined"==typeof t||!t.length)return 0;var i="string"!==n.getTypeOf(t);"undefined"==typeof e&&(e=0);var o=0,s=0,a=0;e=-1^e;for(var h=0,l=t.length;l>h;h++)a=i?t[h]:t.charCodeAt(h),s=255&(e^a),o=r[s],e=e>>>8^o;return-1^e}},{"./utils":37}],21:[function(t,e,i){"use strict";function n(t){this.data=null,this.length=0,this.index=0}var r=t("./utils");n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||0>t)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,i=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=n},{"./utils":37}],22:[function(t,e,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!1,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],23:[function(t,e,i){"use strict";var n=t("./utils");i.string2binary=function(t){return n.string2binary(t)},i.string2Uint8Array=function(t){return n.transformTo("uint8array",t)},i.uint8Array2String=function(t){return n.transformTo("string",t)},i.string2Blob=function(t){var e=n.transformTo("arraybuffer",t);return n.arrayBuffer2Blob(e)},i.arrayBuffer2Blob=function(t){return n.arrayBuffer2Blob(t)},i.transformTo=function(t,e){return n.transformTo(t,e)},i.getTypeOf=function(t){return n.getTypeOf(t)},i.checkSupport=function(t){return n.checkSupport(t)},i.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,i.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,i.pretty=function(t){return n.pretty(t)},i.findCompression=function(t){return n.findCompression(t)},i.isRegExp=function(t){return n.isRegExp(t)}},{"./utils":37}],24:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako");i.uncompressInputType=n?"uint8array":"array",i.compressInputType=n?"uint8array":"array",i.magic="\b\x00",i.compress=function(t,e){return r.deflateRaw(t,{level:e.level||-1})},i.uncompress=function(t){return r.inflateRaw(t)}},{pako:40}],25:[function(t,e,i){"use strict";function n(t,e){return this instanceof n?(this.files={},this.comment=null,this.root="",t&&this.load(t,e),void(this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t})):new n(t,e)}var r=t("./base64");n.prototype=t("./object"),n.prototype.load=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.utils=t("./deprecatedPublicUtils"),n.base64={encode:function(t){return r.encode(t)},decode:function(t){return r.decode(t)}},n.compressions=t("./compressions"),e.exports=n},{"./base64":17,"./compressions":19,"./defaults":22,"./deprecatedPublicUtils":23,"./load":26,"./object":29,"./support":33}],26:[function(t,e,i){"use strict";var n=t("./base64"),r=t("./zipEntries");e.exports=function(t,e){var i,o,s,a;for(e=e||{},e.base64&&(t=n.decode(t)),o=new r(t,e),i=o.files,s=0;s<i.length;s++)a=i[s],this.file(a.fileName,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileComment.length?a.fileComment:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders});return o.zipComment.length&&(this.comment=o.zipComment),this}},{"./base64":17,"./zipEntries":38}],27:[function(t,e,i){(function(t){"use strict";e.exports=function(e,i){return new t(e,i)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,t("buffer").Buffer)},{buffer:1}],28:[function(t,e,i){"use strict";function n(t){this.data=t,this.length=this.data.length,this.index=0}var r=t("./uint8ArrayReader");n.prototype=new r,n.prototype.readData=function(t){
this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./uint8ArrayReader":34}],29:[function(t,e,i){"use strict";var n=t("./support"),r=t("./utils"),o=t("./crc32"),s=t("./signature"),a=t("./defaults"),h=t("./base64"),l=t("./compressions"),c=t("./compressedObject"),d=t("./nodeBuffer"),u=t("./utf8"),f=t("./stringWriter"),p=t("./uint8ArrayWriter"),m=function(t){if(t._data instanceof c&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===r.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},g=function(t){var e=m(t),i=r.getTypeOf(e);return"string"===i?!t.options.binary&&n.nodebuffer?d(e,"utf-8"):t.asBinary():e},v=function(t){var e=m(this);return null===e||"undefined"==typeof e?"":(this.options.base64&&(e=h.decode(e)),e=t&&this.options.binary?M.utf8decode(e):r.transformTo("string",e),t||this.options.binary||(e=r.transformTo("string",M.utf8encode(e))),e)},A=function(t,e,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this.options=i,this._initialMetadata={dir:i.dir,date:i.date}};A.prototype={asText:function(){return v.call(this,!0)},asBinary:function(){return v.call(this,!1)},asNodeBuffer:function(){var t=g(this);return r.transformTo("nodebuffer",t)},asUint8Array:function(){var t=g(this);return r.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var y=function(t,e){var i,n="";for(i=0;e>i;i++)n+=String.fromCharCode(255&t),t>>>=8;return n},b=function(){var t,e,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&"undefined"==typeof i[e]&&(i[e]=arguments[t][e]);return i},E=function(t){return t=t||{},t.base64!==!0||null!==t.binary&&void 0!==t.binary||(t.binary=!0),t=b(t,a),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},w=function(t,e,i){var n,o=r.getTypeOf(e);if(i=E(i),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(t=_(t)),i.createFolders&&(n=x(t))&&T.call(this,n,!0),i.dir||null===e||"undefined"==typeof e)i.base64=!1,i.binary=!1,e=null,o=null;else if("string"===o)i.binary&&!i.base64&&i.optimizedBinaryString!==!0&&(e=r.string2binary(e));else{if(i.base64=!1,i.binary=!0,!(o||e instanceof c))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===o&&(e=r.transformTo("uint8array",e))}var s=new A(t,e,i);return this.files[t]=s,s},x=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},_=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},T=function(t,e){return e="undefined"!=typeof e?e:!1,t=_(t),this.files[t]||w.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},S=function(t,e,i){var n,s=new c;return t._data instanceof c?(s.uncompressedSize=t._data.uncompressedSize,s.crc32=t._data.crc32,0===s.uncompressedSize||t.dir?(e=l.STORE,s.compressedContent="",s.crc32=0):t._data.compressionMethod===e.magic?s.compressedContent=t._data.getCompressedContent():(n=t._data.getContent(),s.compressedContent=e.compress(r.transformTo(e.compressInputType,n),i))):(n=g(t),n&&0!==n.length&&!t.dir||(e=l.STORE,n=""),s.uncompressedSize=n.length,s.crc32=o(n),s.compressedContent=e.compress(r.transformTo(e.compressInputType,n),i)),s.compressedSize=s.compressedContent.length,s.compressionMethod=e.magic,s},R=function(t,e){var i=t;return t||(i=e?16893:33204),(65535&i)<<16},C=function(t,e){return 63&(t||0)},k=function(t,e,i,n,a){var h,l,c,d,f=(i.compressedContent,r.transformTo("string",u.utf8encode(e.name))),p=e.comment||"",m=r.transformTo("string",u.utf8encode(p)),g=f.length!==e.name.length,v=m.length!==p.length,A=e.options,b="",E="",w="";c=e._initialMetadata.dir!==e.dir?e.dir:A.dir,d=e._initialMetadata.date!==e.date?e.date:A.date;var x=0,_=0;c&&(x|=16),"UNIX"===a?(_=798,x|=R(e.unixPermissions,c)):(_=20,x|=C(e.dosPermissions,c)),h=d.getHours(),h<<=6,h|=d.getMinutes(),h<<=5,h|=d.getSeconds()/2,l=d.getFullYear()-1980,l<<=4,l|=d.getMonth()+1,l<<=5,l|=d.getDate(),g&&(E=y(1,1)+y(o(f),4)+f,b+="up"+y(E.length,2)+E),v&&(w=y(1,1)+y(this.crc32(m),4)+m,b+="uc"+y(w.length,2)+w);var T="";T+="\n\x00",T+=g||v?"\x00\b":"\x00\x00",T+=i.compressionMethod,T+=y(h,2),T+=y(l,2),T+=y(i.crc32,4),T+=y(i.compressedSize,4),T+=y(i.uncompressedSize,4),T+=y(f.length,2),T+=y(b.length,2);var S=s.LOCAL_FILE_HEADER+T+f+b,k=s.CENTRAL_FILE_HEADER+y(_,2)+T+y(m.length,2)+"\x00\x00\x00\x00"+y(x,4)+y(n,4)+f+b+m;return{fileRecord:S,dirRecord:k,compressedObject:i}},M={load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,i,n,r,o=[];for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],r=new A(n.name,n._data,b(n.options)),i=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(i,r)&&o.push(r));return o},file:function(t,e,i){if(1===arguments.length){if(r.isRegExp(t)){var n=t;return this.filter(function(t,e){return!e.dir&&n.test(t)})}return this.filter(function(e,i){return!i.dir&&e===t})[0]||null}return t=this.root+t,w.call(this,t,e,i),this},folder:function(t){if(!t)return this;if(r.isRegExp(t))return this.filter(function(e,i){return i.dir&&t.test(e)});var e=this.root+t,i=T.call(this,e),n=this.clone();return n.root=i.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var i=this.filter(function(e,i){return i.name.slice(0,t.length)===t}),n=0;n<i.length;n++)delete this.files[i[n].name];return this},generate:function(t){t=b(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),r.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e,i,n=[],o=0,a=0,c=r.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var d in this.files)if(this.files.hasOwnProperty(d)){var u=this.files[d],m=u.options.compression||t.compression.toUpperCase(),g=l[m];if(!g)throw new Error(m+" is not a valid compression method !");var v=u.options.compressionOptions||t.compressionOptions||{},A=S.call(this,u,g,v),E=k.call(this,d,u,A,o,t.platform);o+=E.fileRecord.length+A.compressedSize,a+=E.dirRecord.length,n.push(E)}var w="";w=s.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+y(n.length,2)+y(n.length,2)+y(a,4)+y(o,4)+y(c.length,2)+c;var x=t.type.toLowerCase();for(e="uint8array"===x||"arraybuffer"===x||"blob"===x||"nodebuffer"===x?new p(o+a+w.length):new f(o+a+w.length),i=0;i<n.length;i++)e.append(n[i].fileRecord),e.append(n[i].compressedObject.compressedContent);for(i=0;i<n.length;i++)e.append(n[i].dirRecord);e.append(w);var _=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return r.transformTo(t.type.toLowerCase(),_);case"blob":return r.arrayBuffer2Blob(r.transformTo("arraybuffer",_),t.mimeType);case"base64":return t.base64?h.encode(_):_;default:return _}},crc32:function(t,e){return o(t,e)},utf8encode:function(t){return r.transformTo("string",u.utf8encode(t))},utf8decode:function(t){return u.utf8decode(t)}};e.exports=M},{"./base64":17,"./compressedObject":18,"./compressions":19,"./crc32":20,"./defaults":22,"./nodeBuffer":27,"./signature":30,"./stringWriter":32,"./support":33,"./uint8ArrayWriter":35,"./utf8":36,"./utils":37}],30:[function(t,e,i){"use strict";i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],31:[function(t,e,i){"use strict";function n(t,e){this.data=t,e||(this.data=o.string2binary(this.data)),this.length=this.data.length,this.index=0}var r=t("./dataReader"),o=t("./utils");n.prototype=new r,n.prototype.byteAt=function(t){return this.data.charCodeAt(t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./dataReader":21,"./utils":37}],32:[function(t,e,i){"use strict";var n=t("./utils"),r=function(){this.data=[]};r.prototype={append:function(t){t=n.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=r},{"./utils":37}],33:[function(t,e,i){(function(t){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof t,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var e=new ArrayBuffer(0);try{i.blob=0===new Blob([e],{type:"application/zip"}).size}catch(n){try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new r;o.append(e),i.blob=0===o.getBlob("application/zip").size}catch(n){i.blob=!1}}}}).call(this,t("buffer").Buffer)},{buffer:1}],34:[function(t,e,i){"use strict";function n(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}var r=t("./dataReader");n.prototype=new r,n.prototype.byteAt=function(t){return this.data[t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===i&&this.data[o+2]===n&&this.data[o+3]===r)return o;return-1},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./dataReader":21}],35:[function(t,e,i){"use strict";var n=t("./utils"),r=function(t){this.data=new Uint8Array(t),this.index=0};r.prototype={append:function(t){0!==t.length&&(t=n.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=r},{"./utils":37}],36:[function(t,e,i){"use strict";for(var n=t("./utils"),r=t("./support"),o=t("./nodeBuffer"),s=new Array(256),a=0;256>a;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;s[254]=s[254]=1;var h=function(t){var e,i,n,o,s,a=t.length,h=0;for(o=0;a>o;o++)i=t.charCodeAt(o),55296===(64512&i)&&a>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),h+=128>i?1:2048>i?2:65536>i?3:4;for(e=r.uint8array?new Uint8Array(h):new Array(h),s=0,o=0;h>s;o++)i=t.charCodeAt(o),55296===(64512&i)&&a>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),128>i?e[s++]=i:2048>i?(e[s++]=192|i>>>6,e[s++]=128|63&i):65536>i?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e},l=function(t,e){var i;for(e=e||t.length,e>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return 0>i?e:0===i?e:i+s[t[i]]>e?i:e},c=function(t){var e,i,r,o,a=t.length,h=new Array(2*a);for(i=0,e=0;a>e;)if(r=t[e++],128>r)h[i++]=r;else if(o=s[r],o>4)h[i++]=65533,e+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&a>e;)r=r<<6|63&t[e++],o--;o>1?h[i++]=65533:65536>r?h[i++]=r:(r-=65536,h[i++]=55296|r>>10&1023,h[i++]=56320|1023&r)}return h.length!==i&&(h.subarray?h=h.subarray(0,i):h.length=i),n.applyFromCharCode(h)};i.utf8encode=function(t){return r.nodebuffer?o(t,"utf-8"):h(t)},i.utf8decode=function(t){if(r.nodebuffer)return n.transformTo("nodebuffer",t).toString("utf-8");t=n.transformTo(r.uint8array?"uint8array":"array",t);for(var e=[],i=0,o=t.length,s=65536;o>i;){var a=l(t,Math.min(i+s,o));r.uint8array?e.push(c(t.subarray(i,a))):e.push(c(t.slice(i,a))),i=a}return e.join("")}},{"./nodeBuffer":27,"./support":33,"./utils":37}],37:[function(t,e,i){"use strict";function n(t){return t}function r(t,e){for(var i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e}function o(t){var e=65536,n=[],r=t.length,o=i.getTypeOf(t),s=0,a=!0;try{switch(o){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,l(0))}}catch(h){a=!1}if(!a){for(var c="",d=0;d<t.length;d++)c+=String.fromCharCode(t[d]);return c}for(;r>s&&e>1;)try{"array"===o||"nodebuffer"===o?n.push(String.fromCharCode.apply(null,t.slice(s,Math.min(s+e,r)))):n.push(String.fromCharCode.apply(null,t.subarray(s,Math.min(s+e,r)))),s+=e}catch(h){e=Math.floor(e/2)}return n.join("")}function s(t,e){for(var i=0;i<t.length;i++)e[i]=t[i];return e}var a=t("./support"),h=t("./compressions"),l=t("./nodeBuffer");i.string2binary=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i));return e},i.arrayBuffer2Blob=function(t,e){i.checkSupport("blob"),e=e||"application/zip";try{return new Blob([t],{type:e})}catch(n){try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new r;return o.append(t),o.getBlob(e)}catch(n){throw new Error("Bug : can't construct the Blob.")}}},i.applyFromCharCode=o;var c={};c.string={string:n,array:function(t){return r(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return r(t,new Uint8Array(t.length))},nodebuffer:function(t){return r(t,l(t.length))}},c.array={string:o,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(t)}},c.arraybuffer={string:function(t){return o(new Uint8Array(t))},array:function(t){return s(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(new Uint8Array(t))}},c.uint8array={string:o,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return l(t)}},c.nodebuffer={string:o,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return s(t,new Uint8Array(t.length))},nodebuffer:n},i.transformTo=function(t,e){if(e||(e=""),!t)return e;i.checkSupport(t);var n=i.getTypeOf(e),r=c[n][t](e);return r},i.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":a.nodebuffer&&l.test(t)?"nodebuffer":a.uint8array&&t instanceof Uint8Array?"uint8array":a.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(t){var e=a[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this browser")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(t){var e,i,n="";for(i=0;i<(t||"").length;i++)e=t.charCodeAt(i),n+="\\x"+(16>e?"0":"")+e.toString(16).toUpperCase();return n},i.findCompression=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null},i.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{"./compressions":19,"./nodeBuffer":27,"./support":33}],38:[function(t,e,i){"use strict";function n(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var r=t("./stringReader"),o=t("./nodeBufferReader"),s=t("./uint8ArrayReader"),a=t("./utils"),h=t("./signature"),l=t("./zipEntry"),c=t("./support"),d=t("./object");n.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+a.pretty(e)+", expected "+a.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=d.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,n=this.zip64EndOfCentralSize-44,r=0;n>r;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===h.CENTRAL_FILE_HEADER;)t=new l({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(-1===t){var e=!0;try{this.reader.setIndex(0),this.checkSignature(h.LOCAL_FILE_HEADER),e=!1}catch(i){}throw e?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(t),this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===t)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=a.getTypeOf(t);"string"!==e||c.uint8array?"nodebuffer"===e?this.reader=new o(t):this.reader=new s(a.transformTo("uint8array",t)):this.reader=new r(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=n},{"./nodeBufferReader":28,"./object":29,"./signature":30,"./stringReader":31,"./support":33,"./uint8ArrayReader":34,"./utils":37,"./zipEntry":39}],39:[function(t,e,i){"use strict";function n(t,e){this.options=t,this.loadOptions=e}var r=t("./stringReader"),o=t("./utils"),s=t("./compressedObject"),a=t("./object"),h=0,l=3;n.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(t,e,i){return function(){var n=t.index;t.setIndex(e);var r=t.readData(i);return t.setIndex(n),r}},prepareContent:function(t,e,i,n,r){return function(){var t=o.transformTo(n.uncompressInputType,this.getCompressedContent()),e=n.uncompress(t);if(e.length!==r)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,i;if(t.skip(22),this.fileNameLength=t.readInt(2),i=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(i),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(e=o.findCompression(this.compressionMethod),null===e)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new s,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=o.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),t===h&&(this.dosPermissions=63&this.externalFileAttributes),t===l&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=new r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,i,n,r=t.index;for(this.extraFields=this.extraFields||{};t.index<r+this.extraFieldsLength;)e=t.readInt(2),i=t.readInt(2),n=t.readString(i),this.extraFields[e]={id:e,length:i,value:n}},handleUTF8:function(){if(this.useUTF8())this.fileName=a.utf8decode(this.fileName),this.fileComment=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new r(t.value);return 1!==e.readInt(1)?null:a.crc32(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new r(t.value);return 1!==e.readInt(1)?null:a.crc32(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null}},e.exports=n},{"./compressedObject":18,"./object":29,"./stringReader":31,"./utils":37}],40:[function(t,e,i){"use strict";var n=t("./lib/utils/common").assign,r=t("./lib/deflate"),o=t("./lib/inflate"),s=t("./lib/zlib/constants"),a={};n(a,r,o,s),e.exports=a},{"./lib/deflate":41,"./lib/inflate":42,"./lib/utils/common":43,"./lib/zlib/constants":46}],41:[function(t,e,i){"use strict";function n(t,e){var i=new b(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}function r(t,e){return e=e||{},e.raw=!0,n(t,e)}function o(t,e){return e=e||{},e.gzip=!0,n(t,e)}var s=t("./zlib/deflate.js"),a=t("./utils/common"),h=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),d=Object.prototype.toString,u=0,f=4,p=0,m=1,g=2,v=-1,A=0,y=8,b=function(t){this.options=a.assign({level:v,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:A,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==p)throw new Error(l[i]);e.header&&s.deflateSetHeader(this.strm,e.header)};b.prototype.push=function(t,e){var i,n,r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?f:u,"string"==typeof t?r.input=h.string2buf(t):"[object ArrayBuffer]"===d.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new a.Buf8(o),r.next_out=0,r.avail_out=o),i=s.deflate(r,n),i!==m&&i!==p)return this.onEnd(i),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||n!==f&&n!==g)||("string"===this.options.to?this.onData(h.buf2binstring(a.shrinkBuf(r.output,r.next_out))):this.onData(a.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&i!==m);return n===f?(i=s.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===p):n===g?(this.onEnd(p),r.avail_out=0,!0):!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=b,i.deflate=n,i.deflateRaw=r,i.gzip=o},{"./utils/common":43,"./utils/strings":44,"./zlib/deflate.js":48,"./zlib/messages":53,"./zlib/zstream":55}],42:[function(t,e,i){"use strict";function n(t,e){var i=new f(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}function r(t,e){return e=e||{},e.raw=!0,n(t,e)}var o=t("./zlib/inflate.js"),s=t("./utils/common"),a=t("./utils/strings"),h=t("./zlib/constants"),l=t("./zlib/messages"),c=t("./zlib/zstream"),d=t("./zlib/gzheader"),u=Object.prototype.toString,f=function(t){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=o.inflateInit2(this.strm,e.windowBits);if(i!==h.Z_OK)throw new Error(l[i]);this.header=new d,o.inflateGetHeader(this.strm,this.header)};f.prototype.push=function(t,e){var i,n,r,l,c,d=this.strm,f=this.options.chunkSize,p=!1;if(this.ended)return!1;n=e===~~e?e:e===!0?h.Z_FINISH:h.Z_NO_FLUSH,"string"==typeof t?d.input=a.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new s.Buf8(f),d.next_out=0,d.avail_out=f),i=o.inflate(d,h.Z_NO_FLUSH),i===h.Z_BUF_ERROR&&p===!0&&(i=h.Z_OK,p=!1),i!==h.Z_STREAM_END&&i!==h.Z_OK)return this.onEnd(i),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&i!==h.Z_STREAM_END&&(0!==d.avail_in||n!==h.Z_FINISH&&n!==h.Z_SYNC_FLUSH)||("string"===this.options.to?(r=a.utf8border(d.output,d.next_out),l=d.next_out-r,c=a.buf2string(d.output,r),d.next_out=l,d.avail_out=f-l,l&&s.arraySet(d.output,d.output,r,l,0),this.onData(c)):this.onData(s.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(p=!0)}while((d.avail_in>0||0===d.avail_out)&&i!==h.Z_STREAM_END);return i===h.Z_STREAM_END&&(n=h.Z_FINISH),n===h.Z_FINISH?(i=o.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===h.Z_OK):n===h.Z_SYNC_FLUSH?(this.onEnd(h.Z_OK),d.avail_out=0,!0):!0},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===h.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=f,i.inflate=n,i.inflateRaw=r,i.ungzip=n},{"./utils/common":43,"./utils/strings":44,"./zlib/constants":46,"./zlib/gzheader":49,"./zlib/inflate.js":51,"./zlib/messages":53,"./zlib/zstream":55}],43:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)return void t.set(e.subarray(i,i+n),r);for(var o=0;n>o;o++)t[r+o]=e[i+o]},flattenChunks:function(t){var e,i,n,r,o,s;for(n=0,e=0,i=t.length;i>e;e++)n+=t[e].length;for(s=new Uint8Array(n),r=0,e=0,i=t.length;i>e;e++)o=t[e],s.set(o,r),r+=o.length;return s}},o={arraySet:function(t,e,i,n,r){for(var o=0;n>o;o++)t[r+o]=e[i+o]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(n)},{}],44:[function(t,e,i){"use strict";function n(t,e){if(65537>e&&(t.subarray&&s||!t.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var i="",n=0;e>n;n++)i+=String.fromCharCode(t[n]);return i}var r=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(a){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){s=!1}for(var h=new r.Buf8(256),l=0;256>l;l++)h[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;h[254]=h[254]=1,i.string2buf=function(t){var e,i,n,o,s,a=t.length,h=0;for(o=0;a>o;o++)i=t.charCodeAt(o),55296===(64512&i)&&a>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),h+=128>i?1:2048>i?2:65536>i?3:4;for(e=new r.Buf8(h),s=0,o=0;h>s;o++)i=t.charCodeAt(o),55296===(64512&i)&&a>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),128>i?e[s++]=i:2048>i?(e[s++]=192|i>>>6,e[s++]=128|63&i):65536>i?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e},i.buf2binstring=function(t){return n(t,t.length)},i.binstring2buf=function(t){for(var e=new r.Buf8(t.length),i=0,n=e.length;n>i;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,r,o,s,a=e||t.length,l=new Array(2*a);for(r=0,i=0;a>i;)if(o=t[i++],128>o)l[r++]=o;else if(s=h[o],s>4)l[r++]=65533,i+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&a>i;)o=o<<6|63&t[i++],s--;s>1?l[r++]=65533:65536>o?l[r++]=o:(o-=65536,l[r++]=55296|o>>10&1023,l[r++]=56320|1023&o)}return n(l,r)},i.utf8border=function(t,e){var i;for(e=e||t.length,e>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return 0>i?e:0===i?e:i+h[t[i]]>e?i:e}},{"./common":43}],45:[function(t,e,i){"use strict";function n(t,e,i,n){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==i;){s=i>2e3?2e3:i,i-=s;do r=r+e[n++]|0,o=o+r|0;while(--s);r%=65521,o%=65521}return r|o<<16|0}e.exports=n},{}],46:[function(t,e,i){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],47:[function(t,e,i){"use strict";function n(){for(var t,e=[],i=0;256>i;i++){
t=i;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}function r(t,e,i,n){var r=o,s=n+i;t=-1^t;for(var a=n;s>a;a++)t=t>>>8^r[255&(t^e[a])];return-1^t}var o=n();e.exports=r},{}],48:[function(t,e,i){"use strict";function n(t,e){return t.msg=P[e],e}function r(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(C.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function a(t,e){k._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function h(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function c(t,e,i,n){var r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,C.arraySet(e,t.input,t.next_in,r,i),1===t.state.wrap?t.adler=M(t.adler,e,r,i):2===t.state.wrap&&(t.adler=H(t.adler,e,r,i)),t.next_in+=r,t.total_in+=r,r)}function d(t,e){var i,n,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-lt?t.strstart-(t.w_size-lt):0,l=t.window,c=t.w_mask,d=t.prev,u=t.strstart+ht,f=l[o+s-1],p=l[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(i=e,l[i+s]===p&&l[i+s-1]===f&&l[i]===l[o]&&l[++i]===l[o+1]){o+=2,i++;do;while(l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&u>o);if(n=ht-(u-o),o=u-ht,n>s){if(t.match_start=e,s=n,n>=a)break;f=l[o+s-1],p=l[o+s]}}while((e=d[e&c])>h&&0!==--r);return s<=t.lookahead?s:t.lookahead}function u(t){var e,i,n,r,o,s=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-lt)){C.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,i=t.hash_size,e=i;do n=t.head[--e],t.head[e]=n>=s?n-s:0;while(--i);i=s,e=i;do n=t.prev[--e],t.prev[e]=n>=s?n-s:0;while(--i);r+=s}if(0===t.strm.avail_in)break;if(i=c(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=i,t.lookahead+t.insert>=at)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+at-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<at)););}while(t.lookahead<lt&&0!==t.strm.avail_in)}function f(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(u(t),0===t.lookahead&&e===D)return At;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,a(t,!1),0===t.strm.avail_out))return At;if(t.strstart-t.block_start>=t.w_size-lt&&(a(t,!1),0===t.strm.avail_out))return At}return t.insert=0,e===I?(a(t,!0),0===t.strm.avail_out?bt:Et):t.strstart>t.block_start&&(a(t,!1),0===t.strm.avail_out)?At:At}function p(t,e){for(var i,n;;){if(t.lookahead<lt){if(u(t),t.lookahead<lt&&e===D)return At;if(0===t.lookahead)break}if(i=0,t.lookahead>=at&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-lt&&(t.match_length=d(t,i)),t.match_length>=at)if(n=k._tr_tally(t,t.strstart-t.match_start,t.match_length-at),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=at){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=k._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(a(t,!1),0===t.strm.avail_out))return At}return t.insert=t.strstart<at-1?t.strstart:at-1,e===I?(a(t,!0),0===t.strm.avail_out?bt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?At:yt}function m(t,e){for(var i,n,r;;){if(t.lookahead<lt){if(u(t),t.lookahead<lt&&e===D)return At;if(0===t.lookahead)break}if(i=0,t.lookahead>=at&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=at-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-lt&&(t.match_length=d(t,i),t.match_length<=5&&(t.strategy===W||t.match_length===at&&t.strstart-t.match_start>4096)&&(t.match_length=at-1)),t.prev_length>=at&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-at,n=k._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-at),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=at-1,t.strstart++,n&&(a(t,!1),0===t.strm.avail_out))return At}else if(t.match_available){if(n=k._tr_tally(t,0,t.window[t.strstart-1]),n&&a(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return At}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=k._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<at-1?t.strstart:at-1,e===I?(a(t,!0),0===t.strm.avail_out?bt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?At:yt}function g(t,e){for(var i,n,r,o,s=t.window;;){if(t.lookahead<=ht){if(u(t),t.lookahead<=ht&&e===D)return At;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=at&&t.strstart>0&&(r=t.strstart-1,n=s[r],n===s[++r]&&n===s[++r]&&n===s[++r])){o=t.strstart+ht;do;while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&o>r);t.match_length=ht-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=at?(i=k._tr_tally(t,1,t.match_length-at),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=k._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(a(t,!1),0===t.strm.avail_out))return At}return t.insert=0,e===I?(a(t,!0),0===t.strm.avail_out?bt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?At:yt}function v(t,e){for(var i;;){if(0===t.lookahead&&(u(t),0===t.lookahead)){if(e===D)return At;break}if(t.match_length=0,i=k._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(a(t,!1),0===t.strm.avail_out))return At}return t.insert=0,e===I?(a(t,!0),0===t.strm.avail_out?bt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?At:yt}function A(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=R[t.level].max_lazy,t.good_match=R[t.level].good_length,t.nice_match=R[t.level].nice_length,t.max_chain_length=R[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=at-1,t.match_available=0,t.ins_h=0}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*ot),this.dyn_dtree=new C.Buf16(2*(2*nt+1)),this.bl_tree=new C.Buf16(2*(2*rt+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16(st+1),this.heap=new C.Buf16(2*it+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*it+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Q,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?dt:gt,t.adler=2===e.wrap?0:1,e.last_flush=D,k._tr_init(e),F):n(t,z)}function E(t){var e=b(t);return e===F&&A(t.state),e}function w(t,e){return t&&t.state?2!==t.state.wrap?z:(t.state.gzhead=e,F):z}function x(t,e,i,r,o,s){if(!t)return z;var a=1;if(e===V&&(e=6),0>r?(a=0,r=-r):r>15&&(a=2,r-=16),1>o||o>K||i!==Z||8>r||r>15||0>e||e>9||0>s||s>q)return n(t,z);8===r&&(r=9);var h=new y;return t.state=h,h.strm=t,h.wrap=a,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=o+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+at-1)/at),h.window=new C.Buf8(2*h.w_size),h.head=new C.Buf16(h.hash_size),h.prev=new C.Buf16(h.w_size),h.lit_bufsize=1<<o+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new C.Buf8(h.pending_buf_size),h.d_buf=h.lit_bufsize>>1,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=s,h.method=i,E(t)}function _(t,e){return x(t,e,Z,J,$,X)}function T(t,e){var i,a,c,d;if(!t||!t.state||e>B||0>e)return t?n(t,z):z;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===vt&&e!==I)return n(t,0===t.avail_out?U:z);if(a.strm=t,i=a.last_flush,a.last_flush=e,a.status===dt)if(2===a.wrap)t.adler=0,h(a,31),h(a,139),h(a,8),a.gzhead?(h(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),h(a,255&a.gzhead.time),h(a,a.gzhead.time>>8&255),h(a,a.gzhead.time>>16&255),h(a,a.gzhead.time>>24&255),h(a,9===a.level?2:a.strategy>=G||a.level<2?4:0),h(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(h(a,255&a.gzhead.extra.length),h(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=H(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=ut):(h(a,0),h(a,0),h(a,0),h(a,0),h(a,0),h(a,9===a.level?2:a.strategy>=G||a.level<2?4:0),h(a,wt),a.status=gt);else{var u=Z+(a.w_bits-8<<4)<<8,f=-1;f=a.strategy>=G||a.level<2?0:a.level<6?1:6===a.level?2:3,u|=f<<6,0!==a.strstart&&(u|=ct),u+=31-u%31,a.status=gt,l(a,u),0!==a.strstart&&(l(a,t.adler>>>16),l(a,65535&t.adler)),t.adler=1}if(a.status===ut)if(a.gzhead.extra){for(c=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),s(t),c=a.pending,a.pending!==a.pending_buf_size));)h(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=ft)}else a.status=ft;if(a.status===ft)if(a.gzhead.name){c=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),s(t),c=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,h(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),0===d&&(a.gzindex=0,a.status=pt)}else a.status=pt;if(a.status===pt)if(a.gzhead.comment){c=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),s(t),c=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,h(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),0===d&&(a.status=mt)}else a.status=mt;if(a.status===mt&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(t),a.pending+2<=a.pending_buf_size&&(h(a,255&t.adler),h(a,t.adler>>8&255),t.adler=0,a.status=gt)):a.status=gt),0!==a.pending){if(s(t),0===t.avail_out)return a.last_flush=-1,F}else if(0===t.avail_in&&r(e)<=r(i)&&e!==I)return n(t,U);if(a.status===vt&&0!==t.avail_in)return n(t,U);if(0!==t.avail_in||0!==a.lookahead||e!==D&&a.status!==vt){var p=a.strategy===G?v(a,e):a.strategy===Y?g(a,e):R[a.level].func(a,e);if(p!==bt&&p!==Et||(a.status=vt),p===At||p===bt)return 0===t.avail_out&&(a.last_flush=-1),F;if(p===yt&&(e===O?k._tr_align(a):e!==B&&(k._tr_stored_block(a,0,0,!1),e===L&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(t),0===t.avail_out))return a.last_flush=-1,F}return e!==I?F:a.wrap<=0?N:(2===a.wrap?(h(a,255&t.adler),h(a,t.adler>>8&255),h(a,t.adler>>16&255),h(a,t.adler>>24&255),h(a,255&t.total_in),h(a,t.total_in>>8&255),h(a,t.total_in>>16&255),h(a,t.total_in>>24&255)):(l(a,t.adler>>>16),l(a,65535&t.adler)),s(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?F:N)}function S(t){var e;return t&&t.state?(e=t.state.status,e!==dt&&e!==ut&&e!==ft&&e!==pt&&e!==mt&&e!==gt&&e!==vt?n(t,z):(t.state=null,e===gt?n(t,j):F)):z}var R,C=t("../utils/common"),k=t("./trees"),M=t("./adler32"),H=t("./crc32"),P=t("./messages"),D=0,O=1,L=3,I=4,B=5,F=0,N=1,z=-2,j=-3,U=-5,V=-1,W=1,G=2,Y=3,q=4,X=0,Q=2,Z=8,K=9,J=15,$=8,tt=29,et=256,it=et+1+tt,nt=30,rt=19,ot=2*it+1,st=15,at=3,ht=258,lt=ht+at+1,ct=32,dt=42,ut=69,ft=73,pt=91,mt=103,gt=113,vt=666,At=1,yt=2,bt=3,Et=4,wt=3,xt=function(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r};R=[new xt(0,0,0,0,f),new xt(4,4,8,4,p),new xt(4,5,16,8,p),new xt(4,6,32,32,p),new xt(4,4,16,16,m),new xt(8,16,32,32,m),new xt(8,16,128,128,m),new xt(8,32,128,256,m),new xt(32,128,258,1024,m),new xt(32,258,258,4096,m)],i.deflateInit=_,i.deflateInit2=x,i.deflateReset=E,i.deflateResetKeep=b,i.deflateSetHeader=w,i.deflate=T,i.deflateEnd=S,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":43,"./adler32":45,"./crc32":47,"./messages":53,"./trees":54}],49:[function(t,e,i){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=n},{}],50:[function(t,e,i){"use strict";var n=30,r=12;e.exports=function(t,e){var i,o,s,a,h,l,c,d,u,f,p,m,g,v,A,y,b,E,w,x,_,T,S,R,C;i=t.state,o=t.next_in,R=t.input,s=o+(t.avail_in-5),a=t.next_out,C=t.output,h=a-(e-t.avail_out),l=a+(t.avail_out-257),c=i.dmax,d=i.wsize,u=i.whave,f=i.wnext,p=i.window,m=i.hold,g=i.bits,v=i.lencode,A=i.distcode,y=(1<<i.lenbits)-1,b=(1<<i.distbits)-1;t:do{15>g&&(m+=R[o++]<<g,g+=8,m+=R[o++]<<g,g+=8),E=v[m&y];e:for(;;){if(w=E>>>24,m>>>=w,g-=w,w=E>>>16&255,0===w)C[a++]=65535&E;else{if(!(16&w)){if(0===(64&w)){E=v[(65535&E)+(m&(1<<w)-1)];continue e}if(32&w){i.mode=r;break t}t.msg="invalid literal/length code",i.mode=n;break t}x=65535&E,w&=15,w&&(w>g&&(m+=R[o++]<<g,g+=8),x+=m&(1<<w)-1,m>>>=w,g-=w),15>g&&(m+=R[o++]<<g,g+=8,m+=R[o++]<<g,g+=8),E=A[m&b];i:for(;;){if(w=E>>>24,m>>>=w,g-=w,w=E>>>16&255,!(16&w)){if(0===(64&w)){E=A[(65535&E)+(m&(1<<w)-1)];continue i}t.msg="invalid distance code",i.mode=n;break t}if(_=65535&E,w&=15,w>g&&(m+=R[o++]<<g,g+=8,w>g&&(m+=R[o++]<<g,g+=8)),_+=m&(1<<w)-1,_>c){t.msg="invalid distance too far back",i.mode=n;break t}if(m>>>=w,g-=w,w=a-h,_>w){if(w=_-w,w>u&&i.sane){t.msg="invalid distance too far back",i.mode=n;break t}if(T=0,S=p,0===f){if(T+=d-w,x>w){x-=w;do C[a++]=p[T++];while(--w);T=a-_,S=C}}else if(w>f){if(T+=d+f-w,w-=f,x>w){x-=w;do C[a++]=p[T++];while(--w);if(T=0,x>f){w=f,x-=w;do C[a++]=p[T++];while(--w);T=a-_,S=C}}}else if(T+=f-w,x>w){x-=w;do C[a++]=p[T++];while(--w);T=a-_,S=C}for(;x>2;)C[a++]=S[T++],C[a++]=S[T++],C[a++]=S[T++],x-=3;x&&(C[a++]=S[T++],x>1&&(C[a++]=S[T++]))}else{T=a-_;do C[a++]=C[T++],C[a++]=C[T++],C[a++]=C[T++],x-=3;while(x>2);x&&(C[a++]=C[T++],x>1&&(C[a++]=C[T++]))}break}}break}}while(s>o&&l>a);x=g>>3,o-=x,g-=x<<3,m&=(1<<g)-1,t.next_in=o,t.next_out=a,t.avail_in=s>o?5+(s-o):5-(o-s),t.avail_out=l>a?257+(l-a):257-(a-l),i.hold=m,i.bits=g}},{}],51:[function(t,e,i){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=I,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new v.Buf32(pt),e.distcode=e.distdyn=new v.Buf32(mt),e.sane=1,e.back=-1,C):H}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):H}function a(t,e){var i,n;return t&&t.state?(n=t.state,0>e?(i=0,e=-e):(i=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?H:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,s(t))):H}function h(t,e){var i,n;return t?(n=new r,t.state=n,n.window=null,i=a(t,e),i!==C&&(t.state=null),i):H}function l(t){return h(t,vt)}function c(t){if(At){var e;for(m=new v.Buf32(512),g=new v.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(E(x,t.lens,0,288,m,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;E(_,t.lens,0,32,g,0,t.work,{bits:5}),At=!1}t.lencode=m,t.lenbits=9,t.distcode=g,t.distbits=5}function d(t,e,i,n){var r,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new v.Buf8(o.wsize)),n>=o.wsize?(v.arraySet(o.window,e,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>n&&(r=n),v.arraySet(o.window,e,i-n,r,o.wnext),n-=r,n?(v.arraySet(o.window,e,i-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}function u(t,e){var i,r,o,s,a,h,l,u,f,p,m,g,pt,mt,gt,vt,At,yt,bt,Et,wt,xt,_t,Tt,St=0,Rt=new v.Buf8(4),Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return H;i=t.state,i.mode===q&&(i.mode=X),a=t.next_out,o=t.output,l=t.avail_out,s=t.next_in,r=t.input,h=t.avail_in,u=i.hold,f=i.bits,p=h,m=l,xt=C;t:for(;;)switch(i.mode){case I:if(0===i.wrap){i.mode=X;break}for(;16>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(2&i.wrap&&35615===u){i.check=0,Rt[0]=255&u,Rt[1]=u>>>8&255,i.check=y(i.check,Rt,2,0),u=0,f=0,i.mode=B;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",i.mode=dt;break}if((15&u)!==L){t.msg="unknown compression method",i.mode=dt;break}if(u>>>=4,f-=4,wt=(15&u)+8,0===i.wbits)i.wbits=wt;else if(wt>i.wbits){t.msg="invalid window size",i.mode=dt;break}i.dmax=1<<wt,t.adler=i.check=1,i.mode=512&u?G:q,u=0,f=0;break;case B:for(;16>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(i.flags=u,(255&i.flags)!==L){t.msg="unknown compression method",i.mode=dt;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=dt;break}i.head&&(i.head.text=u>>8&1),512&i.flags&&(Rt[0]=255&u,Rt[1]=u>>>8&255,i.check=y(i.check,Rt,2,0)),u=0,f=0,i.mode=F;case F:for(;32>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.head&&(i.head.time=u),512&i.flags&&(Rt[0]=255&u,Rt[1]=u>>>8&255,Rt[2]=u>>>16&255,Rt[3]=u>>>24&255,i.check=y(i.check,Rt,4,0)),u=0,f=0,i.mode=N;case N:for(;16>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.head&&(i.head.xflags=255&u,i.head.os=u>>8),512&i.flags&&(Rt[0]=255&u,Rt[1]=u>>>8&255,i.check=y(i.check,Rt,2,0)),u=0,f=0,i.mode=z;case z:if(1024&i.flags){for(;16>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.length=u,i.head&&(i.head.extra_len=u),512&i.flags&&(Rt[0]=255&u,Rt[1]=u>>>8&255,i.check=y(i.check,Rt,2,0)),u=0,f=0}else i.head&&(i.head.extra=null);i.mode=j;case j:if(1024&i.flags&&(g=i.length,g>h&&(g=h),g&&(i.head&&(wt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),v.arraySet(i.head.extra,r,s,g,wt)),512&i.flags&&(i.check=y(i.check,r,g,s)),h-=g,s+=g,i.length-=g),i.length))break t;i.length=0,i.mode=U;case U:if(2048&i.flags){if(0===h)break t;g=0;do wt=r[s+g++],i.head&&wt&&i.length<65536&&(i.head.name+=String.fromCharCode(wt));while(wt&&h>g);if(512&i.flags&&(i.check=y(i.check,r,g,s)),h-=g,s+=g,wt)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=V;case V:if(4096&i.flags){if(0===h)break t;g=0;do wt=r[s+g++],i.head&&wt&&i.length<65536&&(i.head.comment+=String.fromCharCode(wt));while(wt&&h>g);if(512&i.flags&&(i.check=y(i.check,r,g,s)),h-=g,s+=g,wt)break t}else i.head&&(i.head.comment=null);i.mode=W;case W:if(512&i.flags){for(;16>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(u!==(65535&i.check)){t.msg="header crc mismatch",i.mode=dt;break}u=0,f=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=q;break;case G:for(;32>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}t.adler=i.check=n(u),u=0,f=0,i.mode=Y;case Y:if(0===i.havedict)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=h,i.hold=u,i.bits=f,M;t.adler=i.check=1,i.mode=q;case q:if(e===S||e===R)break t;case X:if(i.last){u>>>=7&f,f-=7&f,i.mode=ht;break}for(;3>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}switch(i.last=1&u,u>>>=1,f-=1,3&u){case 0:i.mode=Q;break;case 1:if(c(i),i.mode=et,e===R){u>>>=2,f-=2;break t}break;case 2:i.mode=J;break;case 3:t.msg="invalid block type",i.mode=dt}u>>>=2,f-=2;break;case Q:for(u>>>=7&f,f-=7&f;32>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if((65535&u)!==(u>>>16^65535)){t.msg="invalid stored block lengths",i.mode=dt;break}if(i.length=65535&u,u=0,f=0,i.mode=Z,e===R)break t;case Z:i.mode=K;case K:if(g=i.length){if(g>h&&(g=h),g>l&&(g=l),0===g)break t;v.arraySet(o,r,s,g,a),h-=g,s+=g,l-=g,a+=g,i.length-=g;break}i.mode=q;break;case J:for(;14>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(i.nlen=(31&u)+257,u>>>=5,f-=5,i.ndist=(31&u)+1,u>>>=5,f-=5,i.ncode=(15&u)+4,u>>>=4,f-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=dt;break}i.have=0,i.mode=$;case $:for(;i.have<i.ncode;){for(;3>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.lens[Ct[i.have++]]=7&u,u>>>=3,f-=3}for(;i.have<19;)i.lens[Ct[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,_t={bits:i.lenbits},xt=E(w,i.lens,0,19,i.lencode,0,i.work,_t),i.lenbits=_t.bits,xt){t.msg="invalid code lengths set",i.mode=dt;break}i.have=0,i.mode=tt;case tt:for(;i.have<i.nlen+i.ndist;){for(;St=i.lencode[u&(1<<i.lenbits)-1],gt=St>>>24,vt=St>>>16&255,At=65535&St,!(f>=gt);){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(16>At)u>>>=gt,f-=gt,i.lens[i.have++]=At;else{if(16===At){for(Tt=gt+2;Tt>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(u>>>=gt,f-=gt,0===i.have){t.msg="invalid bit length repeat",i.mode=dt;break}wt=i.lens[i.have-1],g=3+(3&u),u>>>=2,f-=2}else if(17===At){for(Tt=gt+3;Tt>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}u>>>=gt,f-=gt,wt=0,g=3+(7&u),u>>>=3,f-=3}else{for(Tt=gt+7;Tt>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}u>>>=gt,f-=gt,wt=0,g=11+(127&u),u>>>=7,f-=7}if(i.have+g>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=dt;break}for(;g--;)i.lens[i.have++]=wt}}if(i.mode===dt)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=dt;break}if(i.lenbits=9,_t={bits:i.lenbits},xt=E(x,i.lens,0,i.nlen,i.lencode,0,i.work,_t),i.lenbits=_t.bits,xt){t.msg="invalid literal/lengths set",i.mode=dt;break}if(i.distbits=6,i.distcode=i.distdyn,_t={bits:i.distbits},xt=E(_,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,_t),i.distbits=_t.bits,xt){t.msg="invalid distances set",i.mode=dt;break}if(i.mode=et,e===R)break t;case et:i.mode=it;case it:if(h>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=h,i.hold=u,i.bits=f,b(t,m),a=t.next_out,o=t.output,l=t.avail_out,s=t.next_in,r=t.input,h=t.avail_in,u=i.hold,f=i.bits,i.mode===q&&(i.back=-1);break}for(i.back=0;St=i.lencode[u&(1<<i.lenbits)-1],gt=St>>>24,vt=St>>>16&255,At=65535&St,!(f>=gt);){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(vt&&0===(240&vt)){for(yt=gt,bt=vt,Et=At;St=i.lencode[Et+((u&(1<<yt+bt)-1)>>yt)],gt=St>>>24,vt=St>>>16&255,At=65535&St,!(f>=yt+gt);){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}u>>>=yt,f-=yt,i.back+=yt}if(u>>>=gt,f-=gt,i.back+=gt,i.length=At,0===vt){i.mode=at;break}if(32&vt){i.back=-1,i.mode=q;break}if(64&vt){t.msg="invalid literal/length code",i.mode=dt;break}i.extra=15&vt,i.mode=nt;case nt:if(i.extra){for(Tt=i.extra;Tt>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.length+=u&(1<<i.extra)-1,u>>>=i.extra,f-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=rt;case rt:for(;St=i.distcode[u&(1<<i.distbits)-1],gt=St>>>24,vt=St>>>16&255,At=65535&St,!(f>=gt);){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(0===(240&vt)){for(yt=gt,bt=vt,Et=At;St=i.distcode[Et+((u&(1<<yt+bt)-1)>>yt)],gt=St>>>24,vt=St>>>16&255,At=65535&St,!(f>=yt+gt);){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}u>>>=yt,f-=yt,i.back+=yt}if(u>>>=gt,f-=gt,i.back+=gt,64&vt){t.msg="invalid distance code",i.mode=dt;break}i.offset=At,i.extra=15&vt,i.mode=ot;case ot:if(i.extra){for(Tt=i.extra;Tt>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.offset+=u&(1<<i.extra)-1,u>>>=i.extra,f-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=dt;break}i.mode=st;case st:if(0===l)break t;if(g=m-l,i.offset>g){if(g=i.offset-g,g>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=dt;break}g>i.wnext?(g-=i.wnext,pt=i.wsize-g):pt=i.wnext-g,g>i.length&&(g=i.length),mt=i.window}else mt=o,pt=a-i.offset,g=i.length;g>l&&(g=l),l-=g,i.length-=g;do o[a++]=mt[pt++];while(--g);0===i.length&&(i.mode=it);break;case at:if(0===l)break t;o[a++]=i.length,l--,i.mode=it;break;case ht:if(i.wrap){for(;32>f;){if(0===h)break t;h--,u|=r[s++]<<f,f+=8}if(m-=l,t.total_out+=m,i.total+=m,m&&(t.adler=i.check=i.flags?y(i.check,o,m,a-m):A(i.check,o,m,a-m)),m=l,(i.flags?u:n(u))!==i.check){t.msg="incorrect data check",i.mode=dt;break}u=0,f=0}i.mode=lt;case lt:if(i.wrap&&i.flags){for(;32>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(u!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=dt;break}u=0,f=0}i.mode=ct;case ct:xt=k;break t;case dt:xt=P;break t;case ut:return D;case ft:default:return H}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=h,i.hold=u,i.bits=f,(i.wsize||m!==t.avail_out&&i.mode<dt&&(i.mode<ht||e!==T))&&d(t,t.output,t.next_out,m-t.avail_out)?(i.mode=ut,D):(p-=t.avail_in,m-=t.avail_out,t.total_in+=p,t.total_out+=m,i.total+=m,i.wrap&&m&&(t.adler=i.check=i.flags?y(i.check,o,m,t.next_out-m):A(i.check,o,m,t.next_out-m)),t.data_type=i.bits+(i.last?64:0)+(i.mode===q?128:0)+(i.mode===et||i.mode===Z?256:0),(0===p&&0===m||e===T)&&xt===C&&(xt=O),xt)}function f(t){if(!t||!t.state)return H;var e=t.state;return e.window&&(e.window=null),t.state=null,C}function p(t,e){var i;return t&&t.state?(i=t.state,0===(2&i.wrap)?H:(i.head=e,e.done=!1,C)):H}var m,g,v=t("../utils/common"),A=t("./adler32"),y=t("./crc32"),b=t("./inffast"),E=t("./inftrees"),w=0,x=1,_=2,T=4,S=5,R=6,C=0,k=1,M=2,H=-2,P=-3,D=-4,O=-5,L=8,I=1,B=2,F=3,N=4,z=5,j=6,U=7,V=8,W=9,G=10,Y=11,q=12,X=13,Q=14,Z=15,K=16,J=17,$=18,tt=19,et=20,it=21,nt=22,rt=23,ot=24,st=25,at=26,ht=27,lt=28,ct=29,dt=30,ut=31,ft=32,pt=852,mt=592,gt=15,vt=gt,At=!0;i.inflateReset=s,i.inflateReset2=a,i.inflateResetKeep=o,i.inflateInit=l,i.inflateInit2=h,i.inflate=u,i.inflateEnd=f,i.inflateGetHeader=p,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":43,"./adler32":45,"./crc32":47,"./inffast":50,"./inftrees":52}],52:[function(t,e,i){"use strict";var n=t("../utils/common"),r=15,o=852,s=592,a=0,h=1,l=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,p,m,g,v,A){var y,b,E,w,x,_,T,S,R,C=A.bits,k=0,M=0,H=0,P=0,D=0,O=0,L=0,I=0,B=0,F=0,N=null,z=0,j=new n.Buf16(r+1),U=new n.Buf16(r+1),V=null,W=0;for(k=0;r>=k;k++)j[k]=0;for(M=0;p>M;M++)j[e[i+M]]++;for(D=C,P=r;P>=1&&0===j[P];P--);if(D>P&&(D=P),0===P)return m[g++]=20971520,m[g++]=20971520,A.bits=1,0;for(H=1;P>H&&0===j[H];H++);for(H>D&&(D=H),I=1,k=1;r>=k;k++)if(I<<=1,I-=j[k],0>I)return-1;if(I>0&&(t===a||1!==P))return-1;for(U[1]=0,k=1;r>k;k++)U[k+1]=U[k]+j[k];for(M=0;p>M;M++)0!==e[i+M]&&(v[U[e[i+M]]++]=M);if(t===a?(N=V=v,_=19):t===h?(N=c,z-=257,V=d,W-=257,_=256):(N=u,V=f,_=-1),F=0,M=0,k=H,x=g,O=D,L=0,E=-1,B=1<<D,w=B-1,t===h&&B>o||t===l&&B>s)return 1;for(var G=0;;){G++,T=k-L,v[M]<_?(S=0,R=v[M]):v[M]>_?(S=V[W+v[M]],R=N[z+v[M]]):(S=96,R=0),y=1<<k-L,b=1<<O,H=b;do b-=y,m[x+(F>>L)+b]=T<<24|S<<16|R|0;while(0!==b);for(y=1<<k-1;F&y;)y>>=1;if(0!==y?(F&=y-1,F+=y):F=0,M++,0===--j[k]){if(k===P)break;k=e[i+v[M]]}if(k>D&&(F&w)!==E){for(0===L&&(L=D),x+=H,O=k-L,I=1<<O;P>O+L&&(I-=j[O+L],!(0>=I));)O++,I<<=1;if(B+=1<<O,t===h&&B>o||t===l&&B>s)return 1;E=F&w,m[E]=D<<24|O<<16|x-g|0}}return 0!==F&&(m[x+F]=k-L<<24|64<<16|0),A.bits=D,0}},{"../utils/common":43}],53:[function(t,e,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],54:[function(t,e,i){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function r(t){return 256>t?st[t]:st[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,i){t.bi_valid>q-i?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>q-t.bi_valid,t.bi_valid+=i-q):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function a(t,e,i){s(t,i[2*e],i[2*e+1])}function h(t,e){var i=0;do i|=1&t,t>>>=1,i<<=1;while(--e>0);return i>>>1}function l(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function c(t,e){var i,n,r,o,s,a,h=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(o=0;Y>=o;o++)t.bl_count[o]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;G>i;i++)n=t.heap[i],o=h[2*h[2*n+1]+1]+1,o>p&&(o=p,m++),h[2*n+1]=o,n>l||(t.bl_count[o]++,s=0,n>=f&&(s=u[n-f]),a=h[2*n],t.opt_len+=a*(o+s),d&&(t.static_len+=a*(c[2*n+1]+s)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(n=t.bl_count[o];0!==n;)r=t.heap[--i],r>l||(h[2*r+1]!==o&&(t.opt_len+=(o-h[2*r+1])*h[2*r],h[2*r+1]=o),n--)}}function d(t,e,i){var n,r,o=new Array(Y+1),s=0;for(n=1;Y>=n;n++)o[n]=s=s+i[n-1]<<1;for(r=0;e>=r;r++){var a=t[2*r+1];0!==a&&(t[2*r]=h(o[a]++,a))}}function u(){var t,e,i,n,r,o=new Array(Y+1);for(i=0,n=0;z-1>n;n++)for(ht[n]=i,t=0;t<1<<$[n];t++)at[i++]=n;for(at[i-1]=n,r=0,n=0;16>n;n++)for(lt[n]=r,t=0;t<1<<tt[n];t++)st[r++]=n;for(r>>=7;V>n;n++)for(lt[n]=r<<7,t=0;t<1<<tt[n]-7;t++)st[256+r++]=n;for(e=0;Y>=e;e++)o[e]=0;for(t=0;143>=t;)rt[2*t+1]=8,t++,o[8]++;for(;255>=t;)rt[2*t+1]=9,t++,o[9]++;for(;279>=t;)rt[2*t+1]=7,t++,o[7]++;for(;287>=t;)rt[2*t+1]=8,t++,o[8]++;for(d(rt,U+1,o),t=0;V>t;t++)ot[2*t+1]=5,ot[2*t]=h(t,5);ct=new ft(rt,$,j+1,U,Y),dt=new ft(ot,tt,0,V,Y),ut=new ft(new Array(0),et,0,W,X)}function f(t){var e;for(e=0;U>e;e++)t.dyn_ltree[2*e]=0;for(e=0;V>e;e++)t.dyn_dtree[2*e]=0;for(e=0;W>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function m(t,e,i,n){p(t),n&&(o(t,i),o(t,~i)),M.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}function g(t,e,i,n){var r=2*e,o=2*i;return t[r]<t[o]||t[r]===t[o]&&n[e]<=n[i]}function v(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&g(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!g(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],
i=r,r<<=1;t.heap[i]=n}function A(t,e,i){var n,o,h,l,c=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],o=t.pending_buf[t.l_buf+c],c++,0===n?a(t,o,e):(h=at[o],a(t,h+j+1,e),l=$[h],0!==l&&(o-=ht[h],s(t,o,l)),n--,h=r(n),a(t,h,i),l=tt[h],0!==l&&(n-=lt[h],s(t,n,l)));while(c<t.last_lit);a(t,Q,e)}function y(t,e){var i,n,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=G,i=0;h>i;i++)0!==o[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):o[2*i+1]=0;for(;t.heap_len<2;)r=t.heap[++t.heap_len]=2>l?++l:0,o[2*r]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=l,i=t.heap_len>>1;i>=1;i--)v(t,o,i);r=h;do i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],v(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,o[2*r]=o[2*i]+o[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,o[2*i+1]=o[2*n+1]=r,t.heap[1]=r++,v(t,o,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],c(t,e),d(o,l,t.bl_count)}function b(t,e,i){var n,r,o=-1,s=e[1],a=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(i+1)+1]=65535,n=0;i>=n;n++)r=s,s=e[2*(n+1)+1],++a<h&&r===s||(l>a?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*Z]++):10>=a?t.bl_tree[2*K]++:t.bl_tree[2*J]++,a=0,o=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))}function E(t,e,i){var n,r,o=-1,h=e[1],l=0,c=7,d=4;for(0===h&&(c=138,d=3),n=0;i>=n;n++)if(r=h,h=e[2*(n+1)+1],!(++l<c&&r===h)){if(d>l){do a(t,r,t.bl_tree);while(0!==--l)}else 0!==r?(r!==o&&(a(t,r,t.bl_tree),l--),a(t,Z,t.bl_tree),s(t,l-3,2)):10>=l?(a(t,K,t.bl_tree),s(t,l-3,3)):(a(t,J,t.bl_tree),s(t,l-11,7));l=0,o=r,0===h?(c=138,d=3):r===h?(c=6,d=3):(c=7,d=4)}}function w(t){var e;for(b(t,t.dyn_ltree,t.l_desc.max_code),b(t,t.dyn_dtree,t.d_desc.max_code),y(t,t.bl_desc),e=W-1;e>=3&&0===t.bl_tree[2*it[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function x(t,e,i,n){var r;for(s(t,e-257,5),s(t,i-1,5),s(t,n-4,4),r=0;n>r;r++)s(t,t.bl_tree[2*it[r]+1],3);E(t,t.dyn_ltree,e-1),E(t,t.dyn_dtree,i-1)}function _(t){var e,i=4093624447;for(e=0;31>=e;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return P;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return D;for(e=32;j>e;e++)if(0!==t.dyn_ltree[2*e])return D;return P}function T(t){mt||(u(),mt=!0),t.l_desc=new pt(t.dyn_ltree,ct),t.d_desc=new pt(t.dyn_dtree,dt),t.bl_desc=new pt(t.bl_tree,ut),t.bi_buf=0,t.bi_valid=0,f(t)}function S(t,e,i,n){s(t,(L<<1)+(n?1:0),3),m(t,e,i,!0)}function R(t){s(t,I<<1,3),a(t,Q,rt),l(t)}function C(t,e,i,n){var r,o,a=0;t.level>0?(t.strm.data_type===O&&(t.strm.data_type=_(t)),y(t,t.l_desc),y(t,t.d_desc),a=w(t),r=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,r>=o&&(r=o)):r=o=i+5,r>=i+4&&-1!==e?S(t,e,i,n):t.strategy===H||o===r?(s(t,(I<<1)+(n?1:0),3),A(t,rt,ot)):(s(t,(B<<1)+(n?1:0),3),x(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),A(t,t.dyn_ltree,t.dyn_dtree)),f(t),n&&p(t)}function k(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(at[i]+j+1)]++,t.dyn_dtree[2*r(e)]++),t.last_lit===t.lit_bufsize-1}var M=t("../utils/common"),H=4,P=0,D=1,O=2,L=0,I=1,B=2,F=3,N=258,z=29,j=256,U=j+1+z,V=30,W=19,G=2*U+1,Y=15,q=16,X=7,Q=256,Z=16,K=17,J=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nt=512,rt=new Array(2*(U+2));n(rt);var ot=new Array(2*V);n(ot);var st=new Array(nt);n(st);var at=new Array(N-F+1);n(at);var ht=new Array(z);n(ht);var lt=new Array(V);n(lt);var ct,dt,ut,ft=function(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length},pt=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},mt=!1;i._tr_init=T,i._tr_stored_block=S,i._tr_flush_block=C,i._tr_tally=k,i._tr_align=R},{"../utils/common":43}],55:[function(t,e,i){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},{}],"/src/js/docxgen.js":[function(t,e,i){var n,r;n=t("./docUtils"),r=r=function(){function t(e,i){this.moduleManager=new t.ModuleManager,this.moduleManager.gen=this,this.templateClass=this.getTemplateClass(),this.setOptions({}),null!=e&&this.load(e,i)}return t.prototype.attachModule=function(t){return this.moduleManager.attachModule(t),this},t.prototype.setOptions=function(t){var e,i,r;this.options=null!=t?t:{},r=n.defaults;for(i in r)e=r[i],this[i]=null!=this.options[i]?this.options[i]:e;return this},t.prototype.getTemplateClass=function(){return t.DocXTemplater},t.prototype.getTemplatedFiles=function(){var t;return t=this.zip.file(/word\/(header|footer)\d+\.xml/).map(function(t){return t.name}),t.concat(["word/document.xml"])},t.prototype.load=function(e,i){return this.moduleManager.sendEvent("loading"),null!=e.file?this.zip=e:this.zip=new t.JSZip(e,i),this.moduleManager.sendEvent("loaded"),this.templatedFiles=this.getTemplatedFiles(),this},t.prototype.renderFile=function(t){var e;return this.moduleManager.sendEvent("rendering-file",t),e=this.createTemplateClass(t),this.zip.file(t,e.render().content),this.moduleManager.sendEvent("rendered-file",t)},t.prototype.render=function(){var t,e,i,n;for(this.moduleManager.sendEvent("rendering"),n=this.templatedFiles,e=0,i=n.length;i>e;e++)t=n[e],null!=this.zip.files[t]&&this.renderFile(t);return this.moduleManager.sendEvent("rendered"),this},t.prototype.getTags=function(){var t,e,i,r,o,s,a;for(s=[],o=this.templatedFiles,i=0,r=o.length;r>i;i++)e=o[i],null!=this.zip.files[e]&&(t=this.createTemplateClass(e),a=t.render().usedTags,n.sizeOfObject(a)&&s.push({fileName:e,vars:a}));return s},t.prototype.setData=function(t){return this.tags=t,this},t.prototype.getZip=function(){return this.zip},t.prototype.createTemplateClass=function(t){var e,i,r,o,s;s=this.zip.files[t].asText(),r={tags:this.tags,moduleManager:this.moduleManager},o=n.defaults;for(i in o)e=o[i],r[i]=this[i];return new this.templateClass(s,r)},t.prototype.getFullText=function(t){return null==t&&(t="word/document.xml"),this.createTemplateClass(t).getFullText()},t}(),r.DocUtils=t("./docUtils"),r.DocXTemplater=t("./docxTemplater"),r.JSZip=t("jszip"),r.Errors=t("./errors"),r.ModuleManager=t("./moduleManager"),r.XmlTemplater=t("./xmlTemplater"),r.XmlMatcher=t("./xmlMatcher"),r.XmlUtil=t("./xmlUtil"),r.SubContent=t("./subContent"),e.exports=r},{"./docUtils":7,"./docxTemplater":8,"./errors":9,"./moduleManager":10,"./subContent":12,"./xmlMatcher":14,"./xmlTemplater":15,"./xmlUtil":16,jszip:25}]},{},[])("/src/js/docxgen.js")});var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in i,r=function(i){var n=e.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(n)},o=t.webkitRequestFileSystem,s=t.requestFileSystem||o||t.mozRequestFileSystem,a=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},h=0,l=function(e){var i=function(){"string"==typeof e?(t.URL||t.webkitURL||t).revokeObjectURL(e):e.remove()};t.chrome?i():setTimeout(i,10)},c=function(t,e,i){e=[].concat(e);for(var n=e.length;n--;){var r=t["on"+e[n]];if("function"==typeof r)try{r.call(t,i||t)}catch(o){a(o)}}},d=function(e,a){var d,u,f,p=this,m=e.type,g=!1,v=function(){c(p,["writestart","progress","write","writeend"])},A=function(){!g&&d||(d=(t.URL||t.webkitURL||t).createObjectURL(e)),u?u.location.href=d:void 0==t.open(d,"_blank")&&"undefined"!=typeof safari&&(t.location.href=d),p.readyState=p.DONE,v(),l(d)},y=function(t){return function(){return p.readyState!==p.DONE?t.apply(this,arguments):void 0}},b={create:!0,exclusive:!1};p.readyState=p.INIT,a||(a="download"),n?(d=(t.URL||t.webkitURL||t).createObjectURL(e),i.href=d,i.download=a,r(i),p.readyState=p.DONE,v(),l(d)):(t.chrome&&m&&"application/octet-stream"!==m&&(f=e.slice||e.webkitSlice,e=f.call(e,0,e.size,"application/octet-stream"),g=!0),o&&"download"!==a&&(a+=".download"),("application/octet-stream"===m||o)&&(u=t),s?(h+=e.size,s(t.TEMPORARY,h,y(function(t){t.root.getDirectory("saved",b,y(function(t){var i=function(){t.getFile(a,b,y(function(t){t.createWriter(y(function(i){i.onwriteend=function(e){u.location.href=t.toURL(),p.readyState=p.DONE,c(p,"writeend",e),l(t)},i.onerror=function(){var t=i.error;t.code!==t.ABORT_ERR&&A()},["writestart","progress","write","abort"].forEach(function(t){i["on"+t]=p["on"+t]}),i.write(e),p.abort=function(){i.abort(),p.readyState=p.DONE},p.readyState=p.WRITING}),A)}),A)};t.getFile(a,{create:!1},y(function(t){t.remove(),i()}),y(function(t){t.code===t.NOT_FOUND_ERR?i():A()}))}),A)}),A)):A())},u=d.prototype;return u.abort=function(){this.readyState=this.DONE,c(this,"abort")},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(t,e){return new d(t,e)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),function(t){"use strict";var e={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeek:["ن","ث","ع","خ","ج","س","ح"]},ro:{months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],dayOfWeek:["l","ma","mi","j","v","s","d"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeek:["Min","Sen","Sel","Rab","Kam","Jum","Sab"]},is:{months:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],dayOfWeek:["Sun","Mán","Þrið","Mið","Fim","Fös","Lau"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeek:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeek:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeek:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeek:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["日","月","火","水","木","金","土"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeek:["Va","Hé","Ke","Sze","Cs","Pé","Szo"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeek:["B","Be","Ça","Ç","Ca","C","Ş"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeek:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeek:["P","E","T","K","N","R","L"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeek:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeek:["Su","Ma","Ti","Ke","To","Pe","La"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeek:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeek:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeek:["Sv","Pr","Ot","Tr","Ct","Pk","St"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeek:["нед","пон","вто","сре","чет","пет","саб"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeek:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeek:["Ne","Po","Ut","St","Št","Pi","So"]},sq:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sre","čet","Pet","Sub"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeek:["нед","пон","уто","сре","чет","пет","суб"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeek:["א'","ב'","ג'","ד'","ה'","ו'","שבת"]},hy:{months:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],dayOfWeek:["Կի","Երկ","Երք","Չոր","Հնգ","Ուրբ","Շբթ"]},kg:{months:["Үчтүн айы","Бирдин айы","Жалган Куран","Чын Куран","Бугу","Кулжа","Теке","Баш Оона","Аяк Оона","Тогуздун айы","Жетинин айы","Бештин айы"],dayOfWeek:["Жек","Дүй","Шей","Шар","Бей","Жум","Ише"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnTimeSelect:!0,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,disabledMinTime:!1,disabledMaxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,prevButton:!0,nextButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0,showApplyButton:!1};window.getComputedStyle||(window.getComputedStyle=function(t,e){return this.el=t,this.getPropertyValue=function(e){var i=/(\-([a-z]){1})/g;return"float"===e&&(e="styleFloat"),i.test(e)&&(e=e.replace(i,function(t,e,i){return i.toUpperCase()})),t.currentStyle[e]||null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i,n;for(i=e||0,n=this.length;n>i;i+=1)if(this[i]===t)return i;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},t.fn.xdsoftScroller=function(e){return this.each(function(){var i,n,r,o,s,a=t(this),h=function(t){var e,i={x:0,y:0};return"touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||"touchcancel"===t.type?(e=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],i.x=e.clientX,i.y=e.clientY):"mousedown"!==t.type&&"mouseup"!==t.type&&"mousemove"!==t.type&&"mouseover"!==t.type&&"mouseout"!==t.type&&"mouseenter"!==t.type&&"mouseleave"!==t.type||(i.x=t.clientX,i.y=t.clientY),i},l=100,c=!1,d=0,u=0,f=0,p=!1,m=0,g=function(){};return"hide"===e?void a.find(".xdsoft_scrollbar").hide():(t(this).hasClass("xdsoft_scroller_box")||(i=a.children().eq(0),n=a[0].clientHeight,r=i[0].offsetHeight,o=t('<div class="xdsoft_scrollbar"></div>'),s=t('<div class="xdsoft_scroller"></div>'),o.append(s),a.addClass("xdsoft_scroller_box").append(o),g=function(t){var e=h(t).y-d+m;0>e&&(e=0),e+s[0].offsetHeight>f&&(e=f-s[0].offsetHeight),a.trigger("scroll_element.xdsoft_scroller",[l?e/l:0])},s.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(i){n||a.trigger("resize_scroll.xdsoft_scroller",[e]),d=h(i).y,m=parseInt(s.css("margin-top"),10),f=o[0].offsetHeight,"mousedown"===i.type?(document&&t(document.body).addClass("xdsoft_noselect"),t([document.body,window]).on("mouseup.xdsoft_scroller",function r(){t([document.body,window]).off("mouseup.xdsoft_scroller",r).off("mousemove.xdsoft_scroller",g).removeClass("xdsoft_noselect")}),t(document.body).on("mousemove.xdsoft_scroller",g)):(p=!0,i.stopPropagation(),i.preventDefault())}).on("touchmove",function(t){p&&(t.preventDefault(),g(t))}).on("touchend touchcancel",function(t){p=!1,m=0}),a.on("scroll_element.xdsoft_scroller",function(t,e){n||a.trigger("resize_scroll.xdsoft_scroller",[e,!0]),e=e>1?1:0>e||isNaN(e)?0:e,s.css("margin-top",l*e),setTimeout(function(){i.css("marginTop",-parseInt((i[0].offsetHeight-n)*e,10))},10)}).on("resize_scroll.xdsoft_scroller",function(t,e,h){var c,d;n=a[0].clientHeight,r=i[0].offsetHeight,c=n/r,d=c*o[0].offsetHeight,c>1?s.hide():(s.show(),s.css("height",parseInt(d>10?d:10,10)),l=o[0].offsetHeight-s[0].offsetHeight,h!==!0&&a.trigger("scroll_element.xdsoft_scroller",[e||Math.abs(parseInt(i.css("marginTop"),10))/(r-n)]))}),a.on("mousewheel",function(t){var e=Math.abs(parseInt(i.css("marginTop"),10));return e-=20*t.deltaY,0>e&&(e=0),a.trigger("scroll_element.xdsoft_scroller",[e/(r-n)]),t.stopPropagation(),!1}),a.on("touchstart",function(t){c=h(t),u=Math.abs(parseInt(i.css("marginTop"),10))}),a.on("touchmove",function(t){if(c){t.preventDefault();var e=h(t);a.trigger("scroll_element.xdsoft_scroller",[(u-(e.y-c.y))/(r-n)])}}),a.on("touchend touchcancel",function(t){c=!1,u=0})),void a.trigger("resize_scroll.xdsoft_scroller",[e]))})},t.fn.datetimepicker=function(i){var n,r,o=48,s=57,a=96,h=105,l=17,c=46,d=13,u=27,f=8,p=37,m=38,g=39,v=40,A=9,y=116,b=65,E=67,w=86,x=90,_=89,T=!1,S=t.isPlainObject(i)||!i?t.extend(!0,{},e,i):t.extend(!0,{},e),R=0,C=function(t){t.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function e(i){t.is(":disabled")||t.data("xdsoft_datetimepicker")||(clearTimeout(R),R=setTimeout(function(){t.data("xdsoft_datetimepicker")||n(t),t.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",e).trigger("open.xdsoft")},100))})};return n=function(e){function n(){var t,i=!1;return S.startDate?i=H.strToDate(S.startDate):(i=S.value||(e&&e.val&&e.val()?e.val():""),i?i=H.strToDateTime(i):S.defaultDate&&(i=H.strToDateTime(S.defaultDate),S.defaultTime&&(t=H.strtotime(S.defaultTime),i.setHours(t.getHours()),i.setMinutes(t.getMinutes())))),i&&H.isValidDate(i)?P.data("changed",!0):i="",i||0}var r,R,C,k,M,H,P=t('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),D=t('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),O=t('<div class="xdsoft_datepicker active"></div>'),L=t('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),I=t('<div class="xdsoft_calendar"></div>'),B=t('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),F=B.find(".xdsoft_time_box").eq(0),N=t('<div class="xdsoft_time_variant"></div>'),z=t('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),j=t('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),U=t('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),V=!1,W=0,G=0;S.id&&P.attr("id",S.id),S.style&&P.attr("style",S.style),S.weeks&&P.addClass("xdsoft_showweeks"),P.addClass("xdsoft_"+S.theme),P.addClass(S.className),L.find(".xdsoft_month span").after(j),L.find(".xdsoft_year span").after(U),L.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(e){var i,n,r=t(this).find(".xdsoft_select").eq(0),o=0,s=0,a=r.is(":visible");for(L.find(".xdsoft_select").hide(),H.currentTime&&(o=H.currentTime[t(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),r[a?"hide":"show"](),i=r.find("div.xdsoft_option"),n=0;n<i.length&&i.eq(n).data("value")!==o;n+=1)s+=i[0].offsetHeight;return r.xdsoftScroller(s/(r.children()[0].offsetHeight-r[0].clientHeight)),e.stopPropagation(),!1}),L.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(t){t.stopPropagation(),t.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(e){void 0!==H.currentTime&&null!==H.currentTime||(H.currentTime=H.now());var i=H.currentTime.getFullYear();H&&H.currentTime&&H.currentTime[t(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](t(this).data("value")),t(this).parent().parent().hide(),P.trigger("xchange.xdsoft"),S.onChangeMonth&&t.isFunction(S.onChangeMonth)&&S.onChangeMonth.call(P,H.currentTime,P.data("input")),i!==H.currentTime.getFullYear()&&t.isFunction(S.onChangeYear)&&S.onChangeYear.call(P,H.currentTime,P.data("input"))}),P.setOptions=function(i){var n={},r=function(t){try{if(document.selection&&document.selection.createRange){var e=document.selection.createRange();return e.getBookmark().charCodeAt(2)-2}if(t.setSelectionRange)return t.selectionStart}catch(i){return 0}},R=function(t,e){if(t="string"==typeof t||t instanceof String?document.getElementById(t):t,!t)return!1;if(t.createTextRange){var i=t.createTextRange();return i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select(),!0}return t.setSelectionRange?(t.setSelectionRange(e,e),!0):!1},C=function(t,e){var i=t.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(i).test(e)};S=t.extend(!0,{},S,i),i.allowTimes&&t.isArray(i.allowTimes)&&i.allowTimes.length&&(S.allowTimes=t.extend(!0,[],i.allowTimes)),i.weekends&&t.isArray(i.weekends)&&i.weekends.length&&(S.weekends=t.extend(!0,[],i.weekends)),i.highlightedDates&&t.isArray(i.highlightedDates)&&i.highlightedDates.length&&(t.each(i.highlightedDates,function(e,i){var r,o=t.map(i.split(","),t.trim),s=new HighlightedDate(Date.parseDate(o[0],S.formatDate),o[1],o[2]),a=s.date.dateFormat(S.formatDate);void 0!==n[a]?(r=n[a].desc,r&&r.length&&s.desc&&s.desc.length&&(n[a].desc=r+"\n"+s.desc)):n[a]=s}),S.highlightedDates=t.extend(!0,[],n)),i.highlightedPeriods&&t.isArray(i.highlightedPeriods)&&i.highlightedPeriods.length&&(n=t.extend(!0,[],S.highlightedDates),t.each(i.highlightedPeriods,function(e,i){for(var r,o,s,a=t.map(i.split(","),t.trim),h=Date.parseDate(a[0],S.formatDate),l=Date.parseDate(a[1],S.formatDate),c=a[2],d=a[3];l>=h;)r=new HighlightedDate(h,c,d),o=h.dateFormat(S.formatDate),h.setDate(h.getDate()+1),void 0!==n[o]?(s=n[o].desc,s&&s.length&&r.desc&&r.desc.length&&(n[o].desc=s+"\n"+r.desc)):n[o]=r}),S.highlightedDates=t.extend(!0,[],n)),i.disabledDates&&t.isArray(i.disabledDates)&&i.disabledDates.length&&(S.disabledDates=t.extend(!0,[],i.disabledDates)),i.disabledWeekDays&&t.isArray(i.disabledWeekDays)&&i.disabledWeekDays.length&&(S.disabledWeekDays=t.extend(!0,[],i.disabledWeekDays)),!S.open&&!S.opened||S.inline||e.trigger("open.xdsoft"),S.inline&&(V=!0,P.addClass("xdsoft_inline"),e.after(P).hide()),S.inverseButton&&(S.next="xdsoft_prev",S.prev="xdsoft_next"),S.datepicker?O.addClass("active"):O.removeClass("active"),S.timepicker?B.addClass("active"):B.removeClass("active"),S.value&&(H.setCurrentTime(S.value),e&&e.val&&e.val(H.str)),isNaN(S.dayOfWeekStart)?S.dayOfWeekStart=0:S.dayOfWeekStart=parseInt(S.dayOfWeekStart,10)%7,S.timepickerScrollbar||F.xdsoftScroller("hide"),S.minDate&&/^-(.*)$/.test(S.minDate)&&(S.minDate=H.strToDateTime(S.minDate).dateFormat(S.formatDate)),S.maxDate&&/^\+(.*)$/.test(S.maxDate)&&(S.maxDate=H.strToDateTime(S.maxDate).dateFormat(S.formatDate)),z.toggle(S.showApplyButton),L.find(".xdsoft_today_button").css("visibility",S.todayButton?"visible":"hidden"),L.find("."+S.prev).css("visibility",S.prevButton?"visible":"hidden"),L.find("."+S.next).css("visibility",S.nextButton?"visible":"hidden"),S.mask&&(e.off("keydown.xdsoft"),S.mask===!0&&(S.mask=S.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===t.type(S.mask)&&(C(S.mask,e.val())||e.val(S.mask.replace(/[0-9]/g,"_")),e.on("keydown.xdsoft",function(i){var n,k,M=this.value,H=i.which;if(H>=o&&s>=H||H>=a&&h>=H||H===f||H===c){for(n=r(this),k=H!==f&&H!==c?String.fromCharCode(H>=a&&h>=H?H-o:H):"_",H!==f&&H!==c||!n||(n-=1,k="_");/[^0-9_]/.test(S.mask.substr(n,1))&&n<S.mask.length&&n>0;)n+=H===f||H===c?-1:1;if(M=M.substr(0,n)+k+M.substr(n+1),""===t.trim(M))M=S.mask.replace(/[0-9]/g,"_");else if(n===S.mask.length)return i.preventDefault(),!1;for(n+=H===f||H===c?0:1;/[^0-9_]/.test(S.mask.substr(n,1))&&n<S.mask.length&&n>0;)n+=H===f||H===c?-1:1;C(S.mask,M)?(this.value=M,R(this,n)):""===t.trim(M)?this.value=S.mask.replace(/[0-9]/g,"_"):e.trigger("error_input.xdsoft")}else if(-1!==[b,E,w,x,_].indexOf(H)&&T||-1!==[u,m,v,p,g,y,l,A,d].indexOf(H))return!0;return i.preventDefault(),!1}))),S.validateOnBlur&&e.off("blur.xdsoft").on("blur.xdsoft",function(){if(S.allowBlank&&!t.trim(t(this).val()).length)t(this).val(null),P.data("xdsoft_datetime").empty();else if(Date.parseDate(t(this).val(),S.format))P.data("xdsoft_datetime").setCurrentTime(t(this).val());else{var e=+[t(this).val()[0],t(this).val()[1]].join(""),i=+[t(this).val()[2],t(this).val()[3]].join("");!S.datepicker&&S.timepicker&&e>=0&&24>e&&i>=0&&60>i?t(this).val([e,i].map(function(t){return t>9?t:"0"+t}).join(":")):t(this).val(H.now().dateFormat(S.format)),P.data("xdsoft_datetime").setCurrentTime(t(this).val())}P.trigger("changedatetime.xdsoft")}),S.dayOfWeekStartPrev=0===S.dayOfWeekStart?6:S.dayOfWeekStart-1,P.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},P.data("options",S).on("mousedown.xdsoft",function(t){return t.stopPropagation(),t.preventDefault(),U.hide(),j.hide(),!1}),F.append(N),F.xdsoftScroller(),P.on("afterOpen.xdsoft",function(){F.xdsoftScroller()}),P.append(O).append(B),S.withoutCopyright!==!0&&P.append(D),O.append(L).append(I).append(z),
t(S.parentID).append(P),r=function(){var e=this;e.now=function(t){var i,n,r=new Date;return!t&&S.defaultDate&&(i=e.strToDateTime(S.defaultDate),r.setFullYear(i.getFullYear()),r.setMonth(i.getMonth()),r.setDate(i.getDate())),S.yearOffset&&r.setFullYear(r.getFullYear()+S.yearOffset),!t&&S.defaultTime&&(n=e.strtotime(S.defaultTime),r.setHours(n.getHours()),r.setMinutes(n.getMinutes())),r},e.isValidDate=function(t){return"[object Date]"!==Object.prototype.toString.call(t)?!1:!isNaN(t.getTime())},e.setCurrentTime=function(t){e.currentTime="string"==typeof t?e.strToDateTime(t):e.isValidDate(t)?t:e.now(),P.trigger("xchange.xdsoft")},e.empty=function(){e.currentTime=null},e.getCurrentTime=function(t){return e.currentTime},e.nextMonth=function(){void 0!==e.currentTime&&null!==e.currentTime||(e.currentTime=e.now());var i,n=e.currentTime.getMonth()+1;return 12===n&&(e.currentTime.setFullYear(e.currentTime.getFullYear()+1),n=0),i=e.currentTime.getFullYear(),e.currentTime.setDate(Math.min(new Date(e.currentTime.getFullYear(),n+1,0).getDate(),e.currentTime.getDate())),e.currentTime.setMonth(n),S.onChangeMonth&&t.isFunction(S.onChangeMonth)&&S.onChangeMonth.call(P,H.currentTime,P.data("input")),i!==e.currentTime.getFullYear()&&t.isFunction(S.onChangeYear)&&S.onChangeYear.call(P,H.currentTime,P.data("input")),P.trigger("xchange.xdsoft"),n},e.prevMonth=function(){void 0!==e.currentTime&&null!==e.currentTime||(e.currentTime=e.now());var i=e.currentTime.getMonth()-1;return-1===i&&(e.currentTime.setFullYear(e.currentTime.getFullYear()-1),i=11),e.currentTime.setDate(Math.min(new Date(e.currentTime.getFullYear(),i+1,0).getDate(),e.currentTime.getDate())),e.currentTime.setMonth(i),S.onChangeMonth&&t.isFunction(S.onChangeMonth)&&S.onChangeMonth.call(P,H.currentTime,P.data("input")),P.trigger("xchange.xdsoft"),i},e.getWeekOfYear=function(t){var e=new Date(t.getFullYear(),0,1);return Math.ceil(((t-e)/864e5+e.getDay()+1)/7)},e.strToDateTime=function(t){var i,n,r=[];return t&&t instanceof Date&&e.isValidDate(t)?t:(r=/^(\+|\-)(.*)$/.exec(t),r&&(r[2]=Date.parseDate(r[2],S.formatDate)),r&&r[2]?(i=r[2].getTime()-6e4*r[2].getTimezoneOffset(),n=new Date(e.now(!0).getTime()+parseInt(r[1]+"1",10)*i)):n=t?Date.parseDate(t,S.format):e.now(),e.isValidDate(n)||(n=e.now()),n)},e.strToDate=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var i=t?Date.parseDate(t,S.formatDate):e.now(!0);return e.isValidDate(i)||(i=e.now(!0)),i},e.strtotime=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var i=t?Date.parseDate(t,S.formatTime):e.now(!0);return e.isValidDate(i)||(i=e.now(!0)),i},e.str=function(){return e.currentTime.dateFormat(S.format)},e.currentTime=this.now()},H=new r,z.on("click",function(t){t.preventDefault(),P.data("changed",!0),H.setCurrentTime(n()),e.val(H.str()),P.trigger("close.xdsoft")}),L.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){P.data("changed",!0),H.setCurrentTime(0),P.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var t,i,n=H.getCurrentTime();n=new Date(n.getFullYear(),n.getMonth(),n.getDate()),t=H.strToDate(S.minDate),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),t>n||(i=H.strToDate(S.maxDate),i=new Date(i.getFullYear(),i.getMonth(),i.getDate()),n>i||(e.val(H.str()),P.trigger("close.xdsoft")))}),L.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var e=t(this),i=0,n=!1;!function r(t){e.hasClass(S.next)?H.nextMonth():e.hasClass(S.prev)&&H.prevMonth(),S.monthChangeSpinner&&(n||(i=setTimeout(r,t||100)))}(500),t([document.body,window]).on("mouseup.xdsoft",function o(){clearTimeout(i),n=!0,t([document.body,window]).off("mouseup.xdsoft",o)})}),B.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var e=t(this),i=0,n=!1,r=110;!function o(t){var s=F[0].clientHeight,a=N[0].offsetHeight,h=Math.abs(parseInt(N.css("marginTop"),10));e.hasClass(S.next)&&a-s-S.timeHeightInTimePicker>=h?N.css("marginTop","-"+(h+S.timeHeightInTimePicker)+"px"):e.hasClass(S.prev)&&h-S.timeHeightInTimePicker>=0&&N.css("marginTop","-"+(h-S.timeHeightInTimePicker)+"px"),F.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(N.css("marginTop"),10)/(a-s))]),r=r>10?10:r-10,n||(i=setTimeout(o,t||r))}(500),t([document.body,window]).on("mouseup.xdsoft",function s(){clearTimeout(i),n=!0,t([document.body,window]).off("mouseup.xdsoft",s)})}),R=0,P.on("xchange.xdsoft",function(e){clearTimeout(R),R=setTimeout(function(){void 0!==H.currentTime&&null!==H.currentTime||(H.currentTime=H.now());for(var e,n,r,o,s,a,h,l,c,d,u="",f=new Date(H.currentTime.getFullYear(),H.currentTime.getMonth(),1,12,0,0),p=0,m=H.now(),g=!1,v=!1,A=[],y=!0,b="",E="";f.getDay()!==S.dayOfWeekStart;)f.setDate(f.getDate()-1);for(u+="<table><thead><tr>",S.weeks&&(u+="<th></th>"),e=0;7>e;e+=1)u+="<th>"+S.i18n[S.lang].dayOfWeek[(e+S.dayOfWeekStart)%7]+"</th>";for(u+="</tr></thead>",u+="<tbody>",S.maxDate!==!1&&(g=H.strToDate(S.maxDate),g=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59,999)),S.minDate!==!1&&(v=H.strToDate(S.minDate),v=new Date(v.getFullYear(),v.getMonth(),v.getDate()));p<H.currentTime.countDaysInMonth()||f.getDay()!==S.dayOfWeekStart||H.currentTime.getMonth()===f.getMonth();)A=[],p+=1,r=f.getDay(),o=f.getDate(),s=f.getFullYear(),a=f.getMonth(),h=H.getWeekOfYear(f),d="",A.push("xdsoft_date"),l=S.beforeShowDay&&t.isFunction(S.beforeShowDay.call)?S.beforeShowDay.call(P,f):null,g!==!1&&f>g||v!==!1&&v>f||l&&l[0]===!1?A.push("xdsoft_disabled"):-1!==S.disabledDates.indexOf(f.dateFormat(S.formatDate))?A.push("xdsoft_disabled"):-1!==S.disabledWeekDays.indexOf(r)&&A.push("xdsoft_disabled"),l&&""!==l[1]&&A.push(l[1]),H.currentTime.getMonth()!==a&&A.push("xdsoft_other_month"),(S.defaultSelect||P.data("changed"))&&H.currentTime.dateFormat(S.formatDate)===f.dateFormat(S.formatDate)&&A.push("xdsoft_current"),m.dateFormat(S.formatDate)===f.dateFormat(S.formatDate)&&A.push("xdsoft_today"),0!==f.getDay()&&6!==f.getDay()&&-1===S.weekends.indexOf(f.dateFormat(S.formatDate))||A.push("xdsoft_weekend"),void 0!==S.highlightedDates[f.dateFormat(S.formatDate)]&&(n=S.highlightedDates[f.dateFormat(S.formatDate)],A.push(void 0===n.style?"xdsoft_highlighted_default":n.style),d=void 0===n.desc?"":n.desc),S.beforeShowDay&&t.isFunction(S.beforeShowDay)&&A.push(S.beforeShowDay(f)),y&&(u+="<tr>",y=!1,S.weeks&&(u+="<th>"+h+"</th>")),u+='<td data-date="'+o+'" data-month="'+a+'" data-year="'+s+'" class="xdsoft_date xdsoft_day_of_week'+f.getDay()+" "+A.join(" ")+'" title="'+d+'"><div>'+o+"</div></td>",f.getDay()===S.dayOfWeekStartPrev&&(u+="</tr>",y=!0),f.setDate(o+1);if(u+="</tbody></table>",I.html(u),L.find(".xdsoft_label span").eq(0).text(S.i18n[S.lang].months[H.currentTime.getMonth()]),L.find(".xdsoft_label span").eq(1).text(H.currentTime.getFullYear()),b="",E="",a="",c=function(t,e){var i,n,r=H.now();r.setHours(t),t=parseInt(r.getHours(),10),r.setMinutes(e),e=parseInt(r.getMinutes(),10),i=new Date(H.currentTime),i.setHours(t),i.setMinutes(e),A=[],(S.minDateTime!==!1&&S.minDateTime>i||S.maxTime!==!1&&H.strtotime(S.maxTime).getTime()<r.getTime()||S.minTime!==!1&&H.strtotime(S.minTime).getTime()>r.getTime())&&A.push("xdsoft_disabled"),(S.minDateTime!==!1&&S.minDateTime>i||S.disabledMinTime!==!1&&r.getTime()>H.strtotime(S.disabledMinTime).getTime()&&S.disabledMaxTime!==!1&&r.getTime()<H.strtotime(S.disabledMaxTime).getTime())&&A.push("xdsoft_disabled"),n=new Date(H.currentTime),n.setHours(parseInt(H.currentTime.getHours(),10)),n.setMinutes(Math[S.roundTime](H.currentTime.getMinutes()/S.step)*S.step),(S.initTime||S.defaultSelect||P.data("changed"))&&n.getHours()===parseInt(t,10)&&(S.step>59||n.getMinutes()===parseInt(e,10))&&(S.defaultSelect||P.data("changed")?A.push("xdsoft_current"):S.initTime&&A.push("xdsoft_init_time")),parseInt(m.getHours(),10)===parseInt(t,10)&&parseInt(m.getMinutes(),10)===parseInt(e,10)&&A.push("xdsoft_today"),b+='<div class="xdsoft_time '+A.join(" ")+'" data-hour="'+t+'" data-minute="'+e+'">'+r.dateFormat(S.formatTime)+"</div>"},S.allowTimes&&t.isArray(S.allowTimes)&&S.allowTimes.length)for(p=0;p<S.allowTimes.length;p+=1)E=H.strtotime(S.allowTimes[p]).getHours(),a=H.strtotime(S.allowTimes[p]).getMinutes(),c(E,a);else for(p=0,e=0;p<(S.hours12?12:24);p+=1)for(e=0;60>e;e+=S.step)E=(10>p?"0":"")+p,a=(10>e?"0":"")+e,c(E,a);for(N.html(b),i="",p=0,p=parseInt(S.yearStart,10)+S.yearOffset;p<=parseInt(S.yearEnd,10)+S.yearOffset;p+=1)i+='<div class="xdsoft_option '+(H.currentTime.getFullYear()===p?"xdsoft_current":"")+'" data-value="'+p+'">'+p+"</div>";for(U.children().eq(0).html(i),p=parseInt(S.monthStart,10),i="";p<=parseInt(S.monthEnd,10);p+=1)i+='<div class="xdsoft_option '+(H.currentTime.getMonth()===p?"xdsoft_current":"")+'" data-value="'+p+'">'+S.i18n[S.lang].months[p]+"</div>";j.children().eq(0).html(i),t(P).trigger("generate.xdsoft")},10),e.stopPropagation()}).on("afterOpen.xdsoft",function(){if(S.timepicker){var t,e,i,n;N.find(".xdsoft_current").length?t=".xdsoft_current":N.find(".xdsoft_init_time").length&&(t=".xdsoft_init_time"),t?(e=F[0].clientHeight,i=N[0].offsetHeight,n=N.find(t).index()*S.timeHeightInTimePicker+1,n>i-e&&(n=i-e),F.trigger("scroll_element.xdsoft_scroller",[parseInt(n,10)/(i-e)])):F.trigger("scroll_element.xdsoft_scroller",[0])}}),C=0,I.on("click.xdsoft","td",function(i){i.stopPropagation(),C+=1;var n=t(this),r=H.currentTime;return void 0!==r&&null!==r||(H.currentTime=H.now(),r=H.currentTime),n.hasClass("xdsoft_disabled")?!1:(r.setDate(1),r.setFullYear(n.data("year")),r.setMonth(n.data("month")),r.setDate(n.data("date")),P.trigger("select.xdsoft",[r]),e.val(H.str()),(C>1||S.closeOnDateSelect===!0||S.closeOnDateSelect===!1&&!S.timepicker)&&!S.inline&&P.trigger("close.xdsoft"),S.onSelectDate&&t.isFunction(S.onSelectDate)&&S.onSelectDate.call(P,H.currentTime,P.data("input"),i),P.data("changed",!0),P.trigger("xchange.xdsoft"),P.trigger("changedatetime.xdsoft"),void setTimeout(function(){C=0},200))}),N.on("click.xdsoft","div",function(e){e.stopPropagation();var i=t(this),n=H.currentTime;return void 0!==n&&null!==n||(H.currentTime=H.now(),n=H.currentTime),i.hasClass("xdsoft_disabled")?!1:(n.setHours(i.data("hour")),n.setMinutes(i.data("minute")),P.trigger("select.xdsoft",[n]),P.data("input").val(H.str()),S.inline!==!0&&S.closeOnTimeSelect===!0&&P.trigger("close.xdsoft"),S.onSelectTime&&t.isFunction(S.onSelectTime)&&S.onSelectTime.call(P,H.currentTime,P.data("input"),e),P.data("changed",!0),P.trigger("xchange.xdsoft"),void P.trigger("changedatetime.xdsoft"))}),O.on("mousewheel.xdsoft",function(t){return S.scrollMonth?(t.deltaY<0?H.nextMonth():H.prevMonth(),!1):!0}),e.on("mousewheel.xdsoft",function(t){return S.scrollInput?!S.datepicker&&S.timepicker?(k=N.find(".xdsoft_current").length?N.find(".xdsoft_current").eq(0).index():0,k+t.deltaY>=0&&k+t.deltaY<N.children().length&&(k+=t.deltaY),N.children().eq(k).length&&N.children().eq(k).trigger("mousedown"),!1):S.datepicker&&!S.timepicker?(O.trigger(t,[t.deltaY,t.deltaX,t.deltaY]),e.val&&e.val(H.str()),P.trigger("changedatetime.xdsoft"),!1):void 0:!0}),P.on("changedatetime.xdsoft",function(e){if(S.onChangeDateTime&&t.isFunction(S.onChangeDateTime)){var i=P.data("input");S.onChangeDateTime.call(P,H.currentTime,i,e),delete S.value,i.trigger("change")}}).on("generate.xdsoft",function(){S.onGenerate&&t.isFunction(S.onGenerate)&&S.onGenerate.call(P,H.currentTime,P.data("input")),V&&(P.trigger("afterOpen.xdsoft"),V=!1)}).on("click.xdsoft",function(t){t.stopPropagation()}),k=0,M=function(){var e,i=P.data("input").offset(),n=i.top+P.data("input")[0].offsetHeight-1,r=i.left,o="absolute";S.fixed?(n-=t(window).scrollTop(),r-=t(window).scrollLeft(),o="fixed"):(n+P[0].offsetHeight>t(window).height()+t(window).scrollTop()&&(n=i.top-P[0].offsetHeight+1),0>n&&(n=0),r+P[0].offsetWidth>t(window).width()&&(r=t(window).width()-P[0].offsetWidth)),e=P[0];do if(e=e.parentNode,"relative"===window.getComputedStyle(e).getPropertyValue("position")&&t(window).width()>=e.offsetWidth){r-=(t(window).width()-e.offsetWidth)/2;break}while("HTML"!==e.nodeName);P.css({left:r,top:n,position:o})},P.on("open.xdsoft",function(e){var i=!0;S.onShow&&t.isFunction(S.onShow)&&(i=S.onShow.call(P,H.currentTime,P.data("input"),e)),i!==!1&&(P.show(),M(),t(window).off("resize.xdsoft",M).on("resize.xdsoft",M),S.closeOnWithoutClick&&t([document.body,window]).on("mousedown.xdsoft",function n(){P.trigger("close.xdsoft"),t([document.body,window]).off("mousedown.xdsoft",n)}))}).on("close.xdsoft",function(e){var i=!0;L.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),S.onClose&&t.isFunction(S.onClose)&&(i=S.onClose.call(P,H.currentTime,P.data("input"),e)),i===!1||S.opened||S.inline||P.hide(),e.stopPropagation()}).on("toggle.xdsoft",function(t){P.is(":visible")?P.trigger("close.xdsoft"):P.trigger("open.xdsoft")}).data("input",e),W=0,G=0,P.data("xdsoft_datetime",H),P.setOptions(S),H.setCurrentTime(n()),e.data("xdsoft_datetimepicker",P).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(t){e.is(":disabled")||e.data("xdsoft_datetimepicker").is(":visible")&&S.closeOnInputClick||(clearTimeout(W),W=setTimeout(function(){e.is(":disabled")||(V=!0,H.setCurrentTime(n()),P.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(e){var i,n=(this.value,e.which);return-1!==[d].indexOf(n)&&S.enterLikeTab?(i=t("input:visible,textarea:visible"),P.trigger("close.xdsoft"),i.eq(i.index(this)+1).focus(),!1):-1!==[A].indexOf(n)?(P.trigger("close.xdsoft"),!0):void 0})},r=function(e){var i=e.data("xdsoft_datetimepicker");i&&(i.data("xdsoft_datetime",null),i.remove(),e.data("xdsoft_datetimepicker",null).off(".xdsoft"),t(window).off("resize.xdsoft"),t([window,document.body]).off("mousedown.xdsoft"),e.unmousewheel&&e.unmousewheel())},t(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(t){t.keyCode===l&&(T=!0)}).on("keyup.xdsoftctrl",function(t){t.keyCode===l&&(T=!1)}),this.each(function(){var e,o=t(this).data("xdsoft_datetimepicker");if(o){if("string"===t.type(i))switch(i){case"show":t(this).select().focus(),o.trigger("open.xdsoft");break;case"hide":o.trigger("close.xdsoft");break;case"toggle":o.trigger("toggle.xdsoft");break;case"destroy":r(t(this));break;case"reset":this.value=this.defaultValue,this.value&&o.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,S.format))||o.data("changed",!1),o.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":e=o.data("input"),e.trigger("blur.xdsoft")}else o.setOptions(i);return 0}"string"!==t.type(i)&&(!S.lazyInit||S.open||S.inline?n(t(this)):C(t(this)))})},t.fn.datetimepicker.defaults=e}(jQuery),function(){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var s=e||window.event,a=h.call(arguments,1),l=0,d=0,u=0,f=0,p=0,m=0;if(e=t.event.fix(s),e.type="mousewheel","detail"in s&&(u=-1*s.detail),"wheelDelta"in s&&(u=s.wheelDelta),"wheelDeltaY"in s&&(u=s.wheelDeltaY),"wheelDeltaX"in s&&(d=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(d=-1*u,u=0),l=0===u?d:u,"deltaY"in s&&(u=-1*s.deltaY,l=u),"deltaX"in s&&(d=s.deltaX,0===u&&(l=-1*d)),0!==u||0!==d){if(1===s.deltaMode){var g=t.data(this,"mousewheel-line-height");l*=g,u*=g,d*=g}else if(2===s.deltaMode){var v=t.data(this,"mousewheel-page-height");l*=v,u*=v,d*=v}if(f=Math.max(Math.abs(u),Math.abs(d)),(!o||o>f)&&(o=f,n(s,f)&&(o/=40)),n(s,f)&&(l/=40,d/=40,u/=40),l=Math[l>=1?"floor":"ceil"](l/o),d=Math[d>=1?"floor":"ceil"](d/o),u=Math[u>=1?"floor":"ceil"](u/o),c.settings.normalizeOffset&&this.getBoundingClientRect){var A=this.getBoundingClientRect();p=e.clientX-A.left,m=e.clientY-A.top}return e.deltaX=d,e.deltaY=u,e.deltaFactor=o,e.offsetX=p,e.offsetY=m,e.deltaMode=0,a.unshift(e,l,d,u),r&&clearTimeout(r),r=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function i(){o=null}function n(t,e){return c.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var r,o,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice;if(t.event.fixHooks)for(var l=s.length;l;)t.event.fixHooks[s[--l]]=t.event.mouseHooks;var c=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",c.getLineHeight(this)),t.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=a.length;i;)this.removeEventListener(a[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(t){if("unixtime"==t)return parseInt(this.getTime()/1e3);null==Date.formatFunctions[t]&&Date.createNewFormat(t);var e=Date.formatFunctions[t];return this[e]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var codePrefix="Date.prototype."+funcName+" = function() {return ",code="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;code=0==code.length?'""':code.substring(0,code.length-3),eval(codePrefix+code+";}")},Date.getFormatCode=function(t){switch(t){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(t)+"' + "}},Date.parseDate=function(t,e){if("unixtime"==e)return new Date(isNaN(parseInt(t))?0:1e3*parseInt(t));null==Date.parseFunctions[e]&&Date.createParser(e);var i=Date.parseFunctions[e];return Date[i](t)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$","i"),eval(code)},Date.formatCodeToRegex=function(t,e){switch(t){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+e+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+e+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+e+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+e+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+e+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+e+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+e+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+e+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+e+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+e+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+e+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+e+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(t)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var t=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var e=0;e<this.getMonth();++e)t+=Date.daysInMonth[e];return t+this.getDate()},Date.prototype.getWeekOfYear=function(){var t=this.getDayOfYear()+(4-this.getDay()),e=new Date(this.getFullYear(),0,1),i=7-e.getDay()+4;return String.leftPad(Math.ceil((t-i)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var t=this.getFullYear();return 0==(3&t)&&(t%100||t%400==0&&t)},Date.prototype.getFirstDayOfMonth=function(){var t=(this.getDay()-(this.getDate()-1))%7;return 0>t?t+7:t},Date.prototype.getLastDayOfMonth=function(){var t=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return 0>t?t+7:t},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(t){return t.replace(/('|\\)/g,"\\$1")},String.leftPad=function(t,e,i){var n=new String(t);for(null==i&&(i=" ");n.length<e;)n=i+n;return n},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}(),!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof window?window.JSZipUtils=t():"undefined"!=typeof global?global.JSZipUtils=t():"undefined"!=typeof self&&(self.JSZipUtils=t())}(function(){return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){var i=e[s][1][t];return r(i?i:t)},l,l.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";function n(){try{return new window.XMLHttpRequest}catch(t){}}function r(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}var o={};o._getBinaryFromXHR=function(t){return t.response||t.responseText};var s=window.ActiveXObject?function(){return n()||r()}:n;o.getBinaryContent=function(t,e){try{var i=s();i.open("GET",t,!0),"responseType"in i&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.onreadystatechange=function(n){var r,s;if(4===i.readyState)if(200===i.status||0===i.status){r=null,s=null;try{r=o._getBinaryFromXHR(i)}catch(a){s=new Error(a)}e(s,r)}else e(new Error("Ajax error for "+t+" : "+this.status+" "+this.statusText),null)},i.send()}catch(n){e(new Error(n),null)}},e.exports=o},{}]},{},[1])(1)}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.JSZip=t()}}(function(){return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){var i=e[s][1][t];return r(i?i:t)},l,l.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(t,e){for(var i,r,o,s,a,h,l,c="",d=0;d<t.length;)i=t.charCodeAt(d++),r=t.charCodeAt(d++),o=t.charCodeAt(d++),s=i>>2,a=(3&i)<<4|r>>4,h=(15&r)<<2|o>>6,l=63&o,isNaN(r)?h=l=64:isNaN(o)&&(l=64),c=c+n.charAt(s)+n.charAt(a)+n.charAt(h)+n.charAt(l);return c},i.decode=function(t,e){var i,r,o,s,a,h,l,c="",d=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<t.length;)s=n.indexOf(t.charAt(d++)),a=n.indexOf(t.charAt(d++)),h=n.indexOf(t.charAt(d++)),l=n.indexOf(t.charAt(d++)),i=s<<2|a>>4,r=(15&a)<<4|h>>2,o=(3&h)<<6|l,c+=String.fromCharCode(i),64!=h&&(c+=String.fromCharCode(r)),64!=l&&(c+=String.fromCharCode(o));return c}},{}],2:[function(t,e,i){"use strict";function n(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}n.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=n},{}],3:[function(t,e,i){"use strict";i.STORE={magic:"\x00\x00",compress:function(t,e){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},i.DEFLATE=t("./flate")},{"./flate":8}],4:[function(t,e,i){"use strict";var n=t("./utils"),r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(t,e){if("undefined"==typeof t||!t.length)return 0;var i="string"!==n.getTypeOf(t);"undefined"==typeof e&&(e=0);var o=0,s=0,a=0;e=-1^e;for(var h=0,l=t.length;l>h;h++)a=i?t[h]:t.charCodeAt(h),s=255&(e^a),o=r[s],e=e>>>8^o;return-1^e}},{"./utils":21}],5:[function(t,e,i){"use strict";function n(t){this.data=null,this.length=0,this.index=0}var r=t("./utils");n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||0>t)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,i=0;for(this.checkOffset(t),
e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=n},{"./utils":21}],6:[function(t,e,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!1,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],7:[function(t,e,i){"use strict";var n=t("./utils");i.string2binary=function(t){return n.string2binary(t)},i.string2Uint8Array=function(t){return n.transformTo("uint8array",t)},i.uint8Array2String=function(t){return n.transformTo("string",t)},i.string2Blob=function(t){var e=n.transformTo("arraybuffer",t);return n.arrayBuffer2Blob(e)},i.arrayBuffer2Blob=function(t){return n.arrayBuffer2Blob(t)},i.transformTo=function(t,e){return n.transformTo(t,e)},i.getTypeOf=function(t){return n.getTypeOf(t)},i.checkSupport=function(t){return n.checkSupport(t)},i.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,i.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,i.pretty=function(t){return n.pretty(t)},i.findCompression=function(t){return n.findCompression(t)},i.isRegExp=function(t){return n.isRegExp(t)}},{"./utils":21}],8:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako");i.uncompressInputType=n?"uint8array":"array",i.compressInputType=n?"uint8array":"array",i.magic="\b\x00",i.compress=function(t,e){return r.deflateRaw(t,{level:e.level||-1})},i.uncompress=function(t){return r.inflateRaw(t)}},{pako:24}],9:[function(t,e,i){"use strict";function n(t,e){return this instanceof n?(this.files={},this.comment=null,this.root="",t&&this.load(t,e),void(this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t})):new n(t,e)}var r=t("./base64");n.prototype=t("./object"),n.prototype.load=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.utils=t("./deprecatedPublicUtils"),n.base64={encode:function(t){return r.encode(t)},decode:function(t){return r.decode(t)}},n.compressions=t("./compressions"),e.exports=n},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(t,e,i){"use strict";var n=t("./base64"),r=t("./zipEntries");e.exports=function(t,e){var i,o,s,a;for(e=e||{},e.base64&&(t=n.decode(t)),o=new r(t,e),i=o.files,s=0;s<i.length;s++)a=i[s],this.file(a.fileName,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileComment.length?a.fileComment:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders});return o.zipComment.length&&(this.comment=o.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(t,e,i){(function(t){"use strict";e.exports=function(e,i){return new t(e,i)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(t,e,i){"use strict";function n(t){this.data=t,this.length=this.data.length,this.index=0}var r=t("./uint8ArrayReader");n.prototype=new r,n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./uint8ArrayReader":18}],13:[function(t,e,i){"use strict";var n=t("./support"),r=t("./utils"),o=t("./crc32"),s=t("./signature"),a=t("./defaults"),h=t("./base64"),l=t("./compressions"),c=t("./compressedObject"),d=t("./nodeBuffer"),u=t("./utf8"),f=t("./stringWriter"),p=t("./uint8ArrayWriter"),m=function(t){if(t._data instanceof c&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===r.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},g=function(t){var e=m(t),i=r.getTypeOf(e);return"string"===i?!t.options.binary&&n.nodebuffer?d(e,"utf-8"):t.asBinary():e},v=function(t){var e=m(this);return null===e||"undefined"==typeof e?"":(this.options.base64&&(e=h.decode(e)),e=t&&this.options.binary?M.utf8decode(e):r.transformTo("string",e),t||this.options.binary||(e=r.transformTo("string",M.utf8encode(e))),e)},A=function(t,e,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this.options=i,this._initialMetadata={dir:i.dir,date:i.date}};A.prototype={asText:function(){return v.call(this,!0)},asBinary:function(){return v.call(this,!1)},asNodeBuffer:function(){var t=g(this);return r.transformTo("nodebuffer",t)},asUint8Array:function(){var t=g(this);return r.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var y=function(t,e){var i,n="";for(i=0;e>i;i++)n+=String.fromCharCode(255&t),t>>>=8;return n},b=function(){var t,e,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&"undefined"==typeof i[e]&&(i[e]=arguments[t][e]);return i},E=function(t){return t=t||{},t.base64!==!0||null!==t.binary&&void 0!==t.binary||(t.binary=!0),t=b(t,a),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},w=function(t,e,i){var n,o=r.getTypeOf(e);if(i=E(i),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(t=_(t)),i.createFolders&&(n=x(t))&&T.call(this,n,!0),i.dir||null===e||"undefined"==typeof e)i.base64=!1,i.binary=!1,e=null,o=null;else if("string"===o)i.binary&&!i.base64&&i.optimizedBinaryString!==!0&&(e=r.string2binary(e));else{if(i.base64=!1,i.binary=!0,!(o||e instanceof c))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===o&&(e=r.transformTo("uint8array",e))}var s=new A(t,e,i);return this.files[t]=s,s},x=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},_=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},T=function(t,e){return e="undefined"!=typeof e?e:!1,t=_(t),this.files[t]||w.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},S=function(t,e,i){var n,s=new c;return t._data instanceof c?(s.uncompressedSize=t._data.uncompressedSize,s.crc32=t._data.crc32,0===s.uncompressedSize||t.dir?(e=l.STORE,s.compressedContent="",s.crc32=0):t._data.compressionMethod===e.magic?s.compressedContent=t._data.getCompressedContent():(n=t._data.getContent(),s.compressedContent=e.compress(r.transformTo(e.compressInputType,n),i))):(n=g(t),n&&0!==n.length&&!t.dir||(e=l.STORE,n=""),s.uncompressedSize=n.length,s.crc32=o(n),s.compressedContent=e.compress(r.transformTo(e.compressInputType,n),i)),s.compressedSize=s.compressedContent.length,s.compressionMethod=e.magic,s},R=function(t,e){var i=t;return t||(i=e?16893:33204),(65535&i)<<16},C=function(t,e){return 63&(t||0)},k=function(t,e,i,n,a){var h,l,c,d,f=(i.compressedContent,r.transformTo("string",u.utf8encode(e.name))),p=e.comment||"",m=r.transformTo("string",u.utf8encode(p)),g=f.length!==e.name.length,v=m.length!==p.length,A=e.options,b="",E="",w="";c=e._initialMetadata.dir!==e.dir?e.dir:A.dir,d=e._initialMetadata.date!==e.date?e.date:A.date;var x=0,_=0;c&&(x|=16),"UNIX"===a?(_=798,x|=R(e.unixPermissions,c)):(_=20,x|=C(e.dosPermissions,c)),h=d.getHours(),h<<=6,h|=d.getMinutes(),h<<=5,h|=d.getSeconds()/2,l=d.getFullYear()-1980,l<<=4,l|=d.getMonth()+1,l<<=5,l|=d.getDate(),g&&(E=y(1,1)+y(o(f),4)+f,b+="up"+y(E.length,2)+E),v&&(w=y(1,1)+y(this.crc32(m),4)+m,b+="uc"+y(w.length,2)+w);var T="";T+="\n\x00",T+=g||v?"\x00\b":"\x00\x00",T+=i.compressionMethod,T+=y(h,2),T+=y(l,2),T+=y(i.crc32,4),T+=y(i.compressedSize,4),T+=y(i.uncompressedSize,4),T+=y(f.length,2),T+=y(b.length,2);var S=s.LOCAL_FILE_HEADER+T+f+b,k=s.CENTRAL_FILE_HEADER+y(_,2)+T+y(m.length,2)+"\x00\x00\x00\x00"+y(x,4)+y(n,4)+f+b+m;return{fileRecord:S,dirRecord:k,compressedObject:i}},M={load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,i,n,r,o=[];for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],r=new A(n.name,n._data,b(n.options)),i=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(i,r)&&o.push(r));return o},file:function(t,e,i){if(1===arguments.length){if(r.isRegExp(t)){var n=t;return this.filter(function(t,e){return!e.dir&&n.test(t)})}return this.filter(function(e,i){return!i.dir&&e===t})[0]||null}return t=this.root+t,w.call(this,t,e,i),this},folder:function(t){if(!t)return this;if(r.isRegExp(t))return this.filter(function(e,i){return i.dir&&t.test(e)});var e=this.root+t,i=T.call(this,e),n=this.clone();return n.root=i.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var i=this.filter(function(e,i){return i.name.slice(0,t.length)===t}),n=0;n<i.length;n++)delete this.files[i[n].name];return this},generate:function(t){t=b(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),r.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e,i,n=[],o=0,a=0,c=r.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var d in this.files)if(this.files.hasOwnProperty(d)){var u=this.files[d],m=u.options.compression||t.compression.toUpperCase(),g=l[m];if(!g)throw new Error(m+" is not a valid compression method !");var v=u.options.compressionOptions||t.compressionOptions||{},A=S.call(this,u,g,v),E=k.call(this,d,u,A,o,t.platform);o+=E.fileRecord.length+A.compressedSize,a+=E.dirRecord.length,n.push(E)}var w="";w=s.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+y(n.length,2)+y(n.length,2)+y(a,4)+y(o,4)+y(c.length,2)+c;var x=t.type.toLowerCase();for(e="uint8array"===x||"arraybuffer"===x||"blob"===x||"nodebuffer"===x?new p(o+a+w.length):new f(o+a+w.length),i=0;i<n.length;i++)e.append(n[i].fileRecord),e.append(n[i].compressedObject.compressedContent);for(i=0;i<n.length;i++)e.append(n[i].dirRecord);e.append(w);var _=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return r.transformTo(t.type.toLowerCase(),_);case"blob":return r.arrayBuffer2Blob(r.transformTo("arraybuffer",_),t.mimeType);case"base64":return t.base64?h.encode(_):_;default:return _}},crc32:function(t,e){return o(t,e)},utf8encode:function(t){return r.transformTo("string",u.utf8encode(t))},utf8decode:function(t){return u.utf8decode(t)}};e.exports=M},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(t,e,i){"use strict";i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],15:[function(t,e,i){"use strict";function n(t,e){this.data=t,e||(this.data=o.string2binary(this.data)),this.length=this.data.length,this.index=0}var r=t("./dataReader"),o=t("./utils");n.prototype=new r,n.prototype.byteAt=function(t){return this.data.charCodeAt(t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./dataReader":5,"./utils":21}],16:[function(t,e,i){"use strict";var n=t("./utils"),r=function(){this.data=[]};r.prototype={append:function(t){t=n.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=r},{"./utils":21}],17:[function(t,e,i){(function(t){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof t,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var e=new ArrayBuffer(0);try{i.blob=0===new Blob([e],{type:"application/zip"}).size}catch(n){try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new r;o.append(e),i.blob=0===o.getBlob("application/zip").size}catch(n){i.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(t,e,i){"use strict";function n(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}var r=t("./dataReader");n.prototype=new r,n.prototype.byteAt=function(t){return this.data[t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===i&&this.data[o+2]===n&&this.data[o+3]===r)return o;return-1},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./dataReader":5}],19:[function(t,e,i){"use strict";var n=t("./utils"),r=function(t){this.data=new Uint8Array(t),this.index=0};r.prototype={append:function(t){0!==t.length&&(t=n.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=r},{"./utils":21}],20:[function(t,e,i){"use strict";for(var n=t("./utils"),r=t("./support"),o=t("./nodeBuffer"),s=new Array(256),a=0;256>a;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;s[254]=s[254]=1;var h=function(t){var e,i,n,o,s,a=t.length,h=0;for(o=0;a>o;o++)i=t.charCodeAt(o),55296===(64512&i)&&a>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),h+=128>i?1:2048>i?2:65536>i?3:4;for(e=r.uint8array?new Uint8Array(h):new Array(h),s=0,o=0;h>s;o++)i=t.charCodeAt(o),55296===(64512&i)&&a>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),128>i?e[s++]=i:2048>i?(e[s++]=192|i>>>6,e[s++]=128|63&i):65536>i?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e},l=function(t,e){var i;for(e=e||t.length,e>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return 0>i?e:0===i?e:i+s[t[i]]>e?i:e},c=function(t){var e,i,r,o,a=t.length,h=new Array(2*a);for(i=0,e=0;a>e;)if(r=t[e++],128>r)h[i++]=r;else if(o=s[r],o>4)h[i++]=65533,e+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&a>e;)r=r<<6|63&t[e++],o--;o>1?h[i++]=65533:65536>r?h[i++]=r:(r-=65536,h[i++]=55296|r>>10&1023,h[i++]=56320|1023&r)}return h.length!==i&&(h.subarray?h=h.subarray(0,i):h.length=i),n.applyFromCharCode(h)};i.utf8encode=function(t){return r.nodebuffer?o(t,"utf-8"):h(t)},i.utf8decode=function(t){if(r.nodebuffer)return n.transformTo("nodebuffer",t).toString("utf-8");t=n.transformTo(r.uint8array?"uint8array":"array",t);for(var e=[],i=0,o=t.length,s=65536;o>i;){var a=l(t,Math.min(i+s,o));r.uint8array?e.push(c(t.subarray(i,a))):e.push(c(t.slice(i,a))),i=a}return e.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(t,e,i){"use strict";function n(t){return t}function r(t,e){for(var i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e}function o(t){var e=65536,n=[],r=t.length,o=i.getTypeOf(t),s=0,a=!0;try{switch(o){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,l(0))}}catch(h){a=!1}if(!a){for(var c="",d=0;d<t.length;d++)c+=String.fromCharCode(t[d]);return c}for(;r>s&&e>1;)try{"array"===o||"nodebuffer"===o?n.push(String.fromCharCode.apply(null,t.slice(s,Math.min(s+e,r)))):n.push(String.fromCharCode.apply(null,t.subarray(s,Math.min(s+e,r)))),s+=e}catch(h){e=Math.floor(e/2)}return n.join("")}function s(t,e){for(var i=0;i<t.length;i++)e[i]=t[i];return e}var a=t("./support"),h=t("./compressions"),l=t("./nodeBuffer");i.string2binary=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i));return e},i.arrayBuffer2Blob=function(t,e){i.checkSupport("blob"),e=e||"application/zip";try{return new Blob([t],{type:e})}catch(n){try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new r;return o.append(t),o.getBlob(e)}catch(n){throw new Error("Bug : can't construct the Blob.")}}},i.applyFromCharCode=o;var c={};c.string={string:n,array:function(t){return r(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return r(t,new Uint8Array(t.length))},nodebuffer:function(t){return r(t,l(t.length))}},c.array={string:o,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(t)}},c.arraybuffer={string:function(t){return o(new Uint8Array(t))},array:function(t){return s(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(new Uint8Array(t))}},c.uint8array={string:o,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return l(t)}},c.nodebuffer={string:o,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return s(t,new Uint8Array(t.length))},nodebuffer:n},i.transformTo=function(t,e){if(e||(e=""),!t)return e;i.checkSupport(t);var n=i.getTypeOf(e),r=c[n][t](e);return r},i.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":a.nodebuffer&&l.test(t)?"nodebuffer":a.uint8array&&t instanceof Uint8Array?"uint8array":a.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(t){var e=a[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this browser")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(t){var e,i,n="";for(i=0;i<(t||"").length;i++)e=t.charCodeAt(i),n+="\\x"+(16>e?"0":"")+e.toString(16).toUpperCase();return n},i.findCompression=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null},i.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(t,e,i){"use strict";function n(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var r=t("./stringReader"),o=t("./nodeBufferReader"),s=t("./uint8ArrayReader"),a=t("./utils"),h=t("./signature"),l=t("./zipEntry"),c=t("./support"),d=t("./object");n.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+a.pretty(e)+", expected "+a.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=d.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,n=this.zip64EndOfCentralSize-44,r=0;n>r;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===h.CENTRAL_FILE_HEADER;)t=new l({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(-1===t){var e=!0;try{this.reader.setIndex(0),this.checkSignature(h.LOCAL_FILE_HEADER),e=!1}catch(i){}throw e?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(t),this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===t)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=a.getTypeOf(t);"string"!==e||c.uint8array?"nodebuffer"===e?this.reader=new o(t):this.reader=new s(a.transformTo("uint8array",t)):this.reader=new r(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=n},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(t,e,i){"use strict";function n(t,e){this.options=t,this.loadOptions=e}var r=t("./stringReader"),o=t("./utils"),s=t("./compressedObject"),a=t("./object"),h=0,l=3;n.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(t,e,i){return function(){var n=t.index;t.setIndex(e);var r=t.readData(i);return t.setIndex(n),r}},prepareContent:function(t,e,i,n,r){return function(){var t=o.transformTo(n.uncompressInputType,this.getCompressedContent()),e=n.uncompress(t);if(e.length!==r)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,i;if(t.skip(22),this.fileNameLength=t.readInt(2),i=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(i),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(e=o.findCompression(this.compressionMethod),null===e)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new s,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=o.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),t===h&&(this.dosPermissions=63&this.externalFileAttributes),t===l&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=new r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,i,n,r=t.index;for(this.extraFields=this.extraFields||{};t.index<r+this.extraFieldsLength;)e=t.readInt(2),i=t.readInt(2),n=t.readString(i),this.extraFields[e]={id:e,length:i,value:n}},handleUTF8:function(){if(this.useUTF8())this.fileName=a.utf8decode(this.fileName),this.fileComment=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new r(t.value);return 1!==e.readInt(1)?null:a.crc32(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new r(t.value);return 1!==e.readInt(1)?null:a.crc32(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null}},e.exports=n},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(t,e,i){"use strict";var n=t("./lib/utils/common").assign,r=t("./lib/deflate"),o=t("./lib/inflate"),s=t("./lib/zlib/constants"),a={};n(a,r,o,s),e.exports=a},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(t,e,i){"use strict";function n(t,e){var i=new A(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}function r(t,e){return e=e||{},e.raw=!0,n(t,e)}function o(t,e){return e=e||{},e.gzip=!0,n(t,e)}var s=t("./zlib/deflate.js"),a=t("./utils/common"),h=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),d=0,u=4,f=0,p=1,m=-1,g=0,v=8,A=function(t){this.options=a.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==f)throw new Error(l[i]);e.header&&s.deflateSetHeader(this.strm,e.header)};A.prototype.push=function(t,e){var i,n,r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?u:d,"string"==typeof t?r.input=h.string2buf(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new a.Buf8(o),r.next_out=0,r.avail_out=o),i=s.deflate(r,n),i!==p&&i!==f)return this.onEnd(i),this.ended=!0,!1;(0===r.avail_out||0===r.avail_in&&n===u)&&("string"===this.options.to?this.onData(h.buf2binstring(a.shrinkBuf(r.output,r.next_out))):this.onData(a.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&i!==p);return n===u?(i=s.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===f):!0},A.prototype.onData=function(t){this.chunks.push(t)},A.prototype.onEnd=function(t){t===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=A,i.deflate=n,i.deflateRaw=r,i.gzip=o},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(t,e,i){"use strict";function n(t,e){var i=new u(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}function r(t,e){return e=e||{},e.raw=!0,n(t,e)}var o=t("./zlib/inflate.js"),s=t("./utils/common"),a=t("./utils/strings"),h=t("./zlib/constants"),l=t("./zlib/messages"),c=t("./zlib/zstream"),d=t("./zlib/gzheader"),u=function(t){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=o.inflateInit2(this.strm,e.windowBits);if(i!==h.Z_OK)throw new Error(l[i]);this.header=new d,o.inflateGetHeader(this.strm,this.header)};u.prototype.push=function(t,e){var i,n,r,l,c,d=this.strm,u=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?h.Z_FINISH:h.Z_NO_FLUSH,"string"==typeof t?d.input=a.binstring2buf(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new s.Buf8(u),d.next_out=0,d.avail_out=u),i=o.inflate(d,h.Z_NO_FLUSH),i!==h.Z_STREAM_END&&i!==h.Z_OK)return this.onEnd(i),this.ended=!0,!1;d.next_out&&(0===d.avail_out||i===h.Z_STREAM_END||0===d.avail_in&&n===h.Z_FINISH)&&("string"===this.options.to?(r=a.utf8border(d.output,d.next_out),l=d.next_out-r,c=a.buf2string(d.output,r),d.next_out=l,d.avail_out=u-l,l&&s.arraySet(d.output,d.output,r,l,0),this.onData(c)):this.onData(s.shrinkBuf(d.output,d.next_out)))}while(d.avail_in>0&&i!==h.Z_STREAM_END);return i===h.Z_STREAM_END&&(n=h.Z_FINISH),n===h.Z_FINISH?(i=o.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===h.Z_OK):!0},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===h.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=u,i.inflate=n,i.inflateRaw=r,i.ungzip=n},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)return void t.set(e.subarray(i,i+n),r);
for(var o=0;n>o;o++)t[r+o]=e[i+o]},flattenChunks:function(t){var e,i,n,r,o,s;for(n=0,e=0,i=t.length;i>e;e++)n+=t[e].length;for(s=new Uint8Array(n),r=0,e=0,i=t.length;i>e;e++)o=t[e],s.set(o,r),r+=o.length;return s}},o={arraySet:function(t,e,i,n,r){for(var o=0;n>o;o++)t[r+o]=e[i+o]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(n)},{}],28:[function(t,e,i){"use strict";function n(t,e){if(65537>e&&(t.subarray&&s||!t.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var i="",n=0;e>n;n++)i+=String.fromCharCode(t[n]);return i}var r=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(a){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){s=!1}for(var h=new r.Buf8(256),l=0;256>l;l++)h[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;h[254]=h[254]=1,i.string2buf=function(t){var e,i,n,o,s,a=t.length,h=0;for(o=0;a>o;o++)i=t.charCodeAt(o),55296===(64512&i)&&a>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),h+=128>i?1:2048>i?2:65536>i?3:4;for(e=new r.Buf8(h),s=0,o=0;h>s;o++)i=t.charCodeAt(o),55296===(64512&i)&&a>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),128>i?e[s++]=i:2048>i?(e[s++]=192|i>>>6,e[s++]=128|63&i):65536>i?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e},i.buf2binstring=function(t){return n(t,t.length)},i.binstring2buf=function(t){for(var e=new r.Buf8(t.length),i=0,n=e.length;n>i;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,r,o,s,a=e||t.length,l=new Array(2*a);for(r=0,i=0;a>i;)if(o=t[i++],128>o)l[r++]=o;else if(s=h[o],s>4)l[r++]=65533,i+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&a>i;)o=o<<6|63&t[i++],s--;s>1?l[r++]=65533:65536>o?l[r++]=o:(o-=65536,l[r++]=55296|o>>10&1023,l[r++]=56320|1023&o)}return n(l,r)},i.utf8border=function(t,e){var i;for(e=e||t.length,e>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return 0>i?e:0===i?e:i+h[t[i]]>e?i:e}},{"./common":27}],29:[function(t,e,i){"use strict";function n(t,e,i,n){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==i;){s=i>2e3?2e3:i,i-=s;do r=r+e[n++]|0,o=o+r|0;while(--s);r%=65521,o%=65521}return r|o<<16|0}e.exports=n},{}],30:[function(t,e,i){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(t,e,i){"use strict";function n(){for(var t,e=[],i=0;256>i;i++){t=i;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}function r(t,e,i,n){var r=o,s=n+i;t=-1^t;for(var a=n;s>a;a++)t=t>>>8^r[255&(t^e[a])];return-1^t}var o=n();e.exports=r},{}],32:[function(t,e,i){"use strict";function n(t,e){return t.msg=P[e],e}function r(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(C.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function a(t,e){k._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function h(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function c(t,e,i,n){var r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,C.arraySet(e,t.input,t.next_in,r,i),1===t.state.wrap?t.adler=M(t.adler,e,r,i):2===t.state.wrap&&(t.adler=H(t.adler,e,r,i)),t.next_in+=r,t.total_in+=r,r)}function d(t,e){var i,n,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-lt?t.strstart-(t.w_size-lt):0,l=t.window,c=t.w_mask,d=t.prev,u=t.strstart+ht,f=l[o+s-1],p=l[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(i=e,l[i+s]===p&&l[i+s-1]===f&&l[i]===l[o]&&l[++i]===l[o+1]){o+=2,i++;do;while(l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&u>o);if(n=ht-(u-o),o=u-ht,n>s){if(t.match_start=e,s=n,n>=a)break;f=l[o+s-1],p=l[o+s]}}while((e=d[e&c])>h&&0!==--r);return s<=t.lookahead?s:t.lookahead}function u(t){var e,i,n,r,o,s=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-lt)){C.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,i=t.hash_size,e=i;do n=t.head[--e],t.head[e]=n>=s?n-s:0;while(--i);i=s,e=i;do n=t.prev[--e],t.prev[e]=n>=s?n-s:0;while(--i);r+=s}if(0===t.strm.avail_in)break;if(i=c(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=i,t.lookahead+t.insert>=at)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+at-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<at)););}while(t.lookahead<lt&&0!==t.strm.avail_in)}function f(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(u(t),0===t.lookahead&&e===D)return At;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,a(t,!1),0===t.strm.avail_out))return At;if(t.strstart-t.block_start>=t.w_size-lt&&(a(t,!1),0===t.strm.avail_out))return At}return t.insert=0,e===I?(a(t,!0),0===t.strm.avail_out?bt:Et):t.strstart>t.block_start&&(a(t,!1),0===t.strm.avail_out)?At:At}function p(t,e){for(var i,n;;){if(t.lookahead<lt){if(u(t),t.lookahead<lt&&e===D)return At;if(0===t.lookahead)break}if(i=0,t.lookahead>=at&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-lt&&(t.match_length=d(t,i)),t.match_length>=at)if(n=k._tr_tally(t,t.strstart-t.match_start,t.match_length-at),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=at){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=k._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(a(t,!1),0===t.strm.avail_out))return At}return t.insert=t.strstart<at-1?t.strstart:at-1,e===I?(a(t,!0),0===t.strm.avail_out?bt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?At:yt}function m(t,e){for(var i,n,r;;){if(t.lookahead<lt){if(u(t),t.lookahead<lt&&e===D)return At;if(0===t.lookahead)break}if(i=0,t.lookahead>=at&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=at-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-lt&&(t.match_length=d(t,i),t.match_length<=5&&(t.strategy===W||t.match_length===at&&t.strstart-t.match_start>4096)&&(t.match_length=at-1)),t.prev_length>=at&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-at,n=k._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-at),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=at-1,t.strstart++,n&&(a(t,!1),0===t.strm.avail_out))return At}else if(t.match_available){if(n=k._tr_tally(t,0,t.window[t.strstart-1]),n&&a(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return At}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=k._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<at-1?t.strstart:at-1,e===I?(a(t,!0),0===t.strm.avail_out?bt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?At:yt}function g(t,e){for(var i,n,r,o,s=t.window;;){if(t.lookahead<=ht){if(u(t),t.lookahead<=ht&&e===D)return At;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=at&&t.strstart>0&&(r=t.strstart-1,n=s[r],n===s[++r]&&n===s[++r]&&n===s[++r])){o=t.strstart+ht;do;while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&o>r);t.match_length=ht-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=at?(i=k._tr_tally(t,1,t.match_length-at),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=k._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(a(t,!1),0===t.strm.avail_out))return At}return t.insert=0,e===I?(a(t,!0),0===t.strm.avail_out?bt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?At:yt}function v(t,e){for(var i;;){if(0===t.lookahead&&(u(t),0===t.lookahead)){if(e===D)return At;break}if(t.match_length=0,i=k._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(a(t,!1),0===t.strm.avail_out))return At}return t.insert=0,e===I?(a(t,!0),0===t.strm.avail_out?bt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?At:yt}function A(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=R[t.level].max_lazy,t.good_match=R[t.level].good_length,t.nice_match=R[t.level].nice_length,t.max_chain_length=R[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=at-1,t.match_available=0,t.ins_h=0}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*ot),this.dyn_dtree=new C.Buf16(2*(2*nt+1)),this.bl_tree=new C.Buf16(2*(2*rt+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16(st+1),this.heap=new C.Buf16(2*it+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*it+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Q,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?dt:gt,t.adler=2===e.wrap?0:1,e.last_flush=D,k._tr_init(e),F):n(t,z)}function E(t){var e=b(t);return e===F&&A(t.state),e}function w(t,e){return t&&t.state?2!==t.state.wrap?z:(t.state.gzhead=e,F):z}function x(t,e,i,r,o,s){if(!t)return z;var a=1;if(e===V&&(e=6),0>r?(a=0,r=-r):r>15&&(a=2,r-=16),1>o||o>K||i!==Z||8>r||r>15||0>e||e>9||0>s||s>q)return n(t,z);8===r&&(r=9);var h=new y;return t.state=h,h.strm=t,h.wrap=a,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=o+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+at-1)/at),h.window=new C.Buf8(2*h.w_size),h.head=new C.Buf16(h.hash_size),h.prev=new C.Buf16(h.w_size),h.lit_bufsize=1<<o+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new C.Buf8(h.pending_buf_size),h.d_buf=h.lit_bufsize>>1,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=s,h.method=i,E(t)}function _(t,e){return x(t,e,Z,J,$,X)}function T(t,e){var i,a,c,d;if(!t||!t.state||e>B||0>e)return t?n(t,z):z;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===vt&&e!==I)return n(t,0===t.avail_out?U:z);if(a.strm=t,i=a.last_flush,a.last_flush=e,a.status===dt)if(2===a.wrap)t.adler=0,h(a,31),h(a,139),h(a,8),a.gzhead?(h(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),h(a,255&a.gzhead.time),h(a,a.gzhead.time>>8&255),h(a,a.gzhead.time>>16&255),h(a,a.gzhead.time>>24&255),h(a,9===a.level?2:a.strategy>=G||a.level<2?4:0),h(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(h(a,255&a.gzhead.extra.length),h(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=H(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=ut):(h(a,0),h(a,0),h(a,0),h(a,0),h(a,0),h(a,9===a.level?2:a.strategy>=G||a.level<2?4:0),h(a,wt),a.status=gt);else{var u=Z+(a.w_bits-8<<4)<<8,f=-1;f=a.strategy>=G||a.level<2?0:a.level<6?1:6===a.level?2:3,u|=f<<6,0!==a.strstart&&(u|=ct),u+=31-u%31,a.status=gt,l(a,u),0!==a.strstart&&(l(a,t.adler>>>16),l(a,65535&t.adler)),t.adler=1}if(a.status===ut)if(a.gzhead.extra){for(c=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),s(t),c=a.pending,a.pending!==a.pending_buf_size));)h(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=ft)}else a.status=ft;if(a.status===ft)if(a.gzhead.name){c=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),s(t),c=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,h(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),0===d&&(a.gzindex=0,a.status=pt)}else a.status=pt;if(a.status===pt)if(a.gzhead.comment){c=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),s(t),c=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,h(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>c&&(t.adler=H(t.adler,a.pending_buf,a.pending-c,c)),0===d&&(a.status=mt)}else a.status=mt;if(a.status===mt&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(t),a.pending+2<=a.pending_buf_size&&(h(a,255&t.adler),h(a,t.adler>>8&255),t.adler=0,a.status=gt)):a.status=gt),0!==a.pending){if(s(t),0===t.avail_out)return a.last_flush=-1,F}else if(0===t.avail_in&&r(e)<=r(i)&&e!==I)return n(t,U);if(a.status===vt&&0!==t.avail_in)return n(t,U);if(0!==t.avail_in||0!==a.lookahead||e!==D&&a.status!==vt){var p=a.strategy===G?v(a,e):a.strategy===Y?g(a,e):R[a.level].func(a,e);if(p!==bt&&p!==Et||(a.status=vt),p===At||p===bt)return 0===t.avail_out&&(a.last_flush=-1),F;if(p===yt&&(e===O?k._tr_align(a):e!==B&&(k._tr_stored_block(a,0,0,!1),e===L&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(t),0===t.avail_out))return a.last_flush=-1,F}return e!==I?F:a.wrap<=0?N:(2===a.wrap?(h(a,255&t.adler),h(a,t.adler>>8&255),h(a,t.adler>>16&255),h(a,t.adler>>24&255),h(a,255&t.total_in),h(a,t.total_in>>8&255),h(a,t.total_in>>16&255),h(a,t.total_in>>24&255)):(l(a,t.adler>>>16),l(a,65535&t.adler)),s(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?F:N)}function S(t){var e;return t&&t.state?(e=t.state.status,e!==dt&&e!==ut&&e!==ft&&e!==pt&&e!==mt&&e!==gt&&e!==vt?n(t,z):(t.state=null,e===gt?n(t,j):F)):z}var R,C=t("../utils/common"),k=t("./trees"),M=t("./adler32"),H=t("./crc32"),P=t("./messages"),D=0,O=1,L=3,I=4,B=5,F=0,N=1,z=-2,j=-3,U=-5,V=-1,W=1,G=2,Y=3,q=4,X=0,Q=2,Z=8,K=9,J=15,$=8,tt=29,et=256,it=et+1+tt,nt=30,rt=19,ot=2*it+1,st=15,at=3,ht=258,lt=ht+at+1,ct=32,dt=42,ut=69,ft=73,pt=91,mt=103,gt=113,vt=666,At=1,yt=2,bt=3,Et=4,wt=3,xt=function(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r};R=[new xt(0,0,0,0,f),new xt(4,4,8,4,p),new xt(4,5,16,8,p),new xt(4,6,32,32,p),new xt(4,4,16,16,m),new xt(8,16,32,32,m),new xt(8,16,128,128,m),new xt(8,32,128,256,m),new xt(32,128,258,1024,m),new xt(32,258,258,4096,m)],i.deflateInit=_,i.deflateInit2=x,i.deflateReset=E,i.deflateResetKeep=b,i.deflateSetHeader=w,i.deflate=T,i.deflateEnd=S,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(t,e,i){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=n},{}],34:[function(t,e,i){"use strict";var n=30,r=12;e.exports=function(t,e){var i,o,s,a,h,l,c,d,u,f,p,m,g,v,A,y,b,E,w,x,_,T,S,R,C;i=t.state,o=t.next_in,R=t.input,s=o+(t.avail_in-5),a=t.next_out,C=t.output,h=a-(e-t.avail_out),l=a+(t.avail_out-257),c=i.dmax,d=i.wsize,u=i.whave,f=i.wnext,p=i.window,m=i.hold,g=i.bits,v=i.lencode,A=i.distcode,y=(1<<i.lenbits)-1,b=(1<<i.distbits)-1;t:do{15>g&&(m+=R[o++]<<g,g+=8,m+=R[o++]<<g,g+=8),E=v[m&y];e:for(;;){if(w=E>>>24,m>>>=w,g-=w,w=E>>>16&255,0===w)C[a++]=65535&E;else{if(!(16&w)){if(0===(64&w)){E=v[(65535&E)+(m&(1<<w)-1)];continue e}if(32&w){i.mode=r;break t}t.msg="invalid literal/length code",i.mode=n;break t}x=65535&E,w&=15,w&&(w>g&&(m+=R[o++]<<g,g+=8),x+=m&(1<<w)-1,m>>>=w,g-=w),15>g&&(m+=R[o++]<<g,g+=8,m+=R[o++]<<g,g+=8),E=A[m&b];i:for(;;){if(w=E>>>24,m>>>=w,g-=w,w=E>>>16&255,!(16&w)){if(0===(64&w)){E=A[(65535&E)+(m&(1<<w)-1)];continue i}t.msg="invalid distance code",i.mode=n;break t}if(_=65535&E,w&=15,w>g&&(m+=R[o++]<<g,g+=8,w>g&&(m+=R[o++]<<g,g+=8)),_+=m&(1<<w)-1,_>c){t.msg="invalid distance too far back",i.mode=n;break t}if(m>>>=w,g-=w,w=a-h,_>w){if(w=_-w,w>u&&i.sane){t.msg="invalid distance too far back",i.mode=n;break t}if(T=0,S=p,0===f){if(T+=d-w,x>w){x-=w;do C[a++]=p[T++];while(--w);T=a-_,S=C}}else if(w>f){if(T+=d+f-w,w-=f,x>w){x-=w;do C[a++]=p[T++];while(--w);if(T=0,x>f){w=f,x-=w;do C[a++]=p[T++];while(--w);T=a-_,S=C}}}else if(T+=f-w,x>w){x-=w;do C[a++]=p[T++];while(--w);T=a-_,S=C}for(;x>2;)C[a++]=S[T++],C[a++]=S[T++],C[a++]=S[T++],x-=3;x&&(C[a++]=S[T++],x>1&&(C[a++]=S[T++]))}else{T=a-_;do C[a++]=C[T++],C[a++]=C[T++],C[a++]=C[T++],x-=3;while(x>2);x&&(C[a++]=C[T++],x>1&&(C[a++]=C[T++]))}break}}break}}while(s>o&&l>a);x=g>>3,o-=x,g-=x<<3,m&=(1<<g)-1,t.next_in=o,t.next_out=a,t.avail_in=s>o?5+(s-o):5-(o-s),t.avail_out=l>a?257+(l-a):257-(a-l),i.hold=m,i.bits=g}},{}],35:[function(t,e,i){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=I,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new v.Buf32(pt),e.distcode=e.distdyn=new v.Buf32(mt),e.sane=1,e.back=-1,C):H}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):H}function a(t,e){var i,n;return t&&t.state?(n=t.state,0>e?(i=0,e=-e):(i=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?H:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,s(t))):H}function h(t,e){var i,n;return t?(n=new r,t.state=n,n.window=null,i=a(t,e),i!==C&&(t.state=null),i):H}function l(t){return h(t,vt)}function c(t){if(At){var e;for(m=new v.Buf32(512),g=new v.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(E(x,t.lens,0,288,m,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;E(_,t.lens,0,32,g,0,t.work,{bits:5}),At=!1}t.lencode=m,t.lenbits=9,t.distcode=g,t.distbits=5}function d(t,e,i,n){var r,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new v.Buf8(o.wsize)),n>=o.wsize?(v.arraySet(o.window,e,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>n&&(r=n),v.arraySet(o.window,e,i-n,r,o.wnext),n-=r,n?(v.arraySet(o.window,e,i-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}function u(t,e){var i,r,o,s,a,h,l,u,f,p,m,g,pt,mt,gt,vt,At,yt,bt,Et,wt,xt,_t,Tt,St=0,Rt=new v.Buf8(4),Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return H;i=t.state,i.mode===q&&(i.mode=X),a=t.next_out,o=t.output,l=t.avail_out,s=t.next_in,r=t.input,h=t.avail_in,u=i.hold,f=i.bits,p=h,m=l,xt=C;t:for(;;)switch(i.mode){case I:if(0===i.wrap){i.mode=X;break}for(;16>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(2&i.wrap&&35615===u){i.check=0,Rt[0]=255&u,Rt[1]=u>>>8&255,i.check=y(i.check,Rt,2,0),u=0,f=0,i.mode=B;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",i.mode=dt;break}if((15&u)!==L){t.msg="unknown compression method",i.mode=dt;break}if(u>>>=4,f-=4,wt=(15&u)+8,0===i.wbits)i.wbits=wt;else if(wt>i.wbits){t.msg="invalid window size",i.mode=dt;break}i.dmax=1<<wt,t.adler=i.check=1,i.mode=512&u?G:q,u=0,f=0;break;case B:for(;16>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(i.flags=u,(255&i.flags)!==L){t.msg="unknown compression method",i.mode=dt;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=dt;break}i.head&&(i.head.text=u>>8&1),512&i.flags&&(Rt[0]=255&u,Rt[1]=u>>>8&255,i.check=y(i.check,Rt,2,0)),u=0,f=0,i.mode=F;case F:for(;32>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.head&&(i.head.time=u),512&i.flags&&(Rt[0]=255&u,Rt[1]=u>>>8&255,Rt[2]=u>>>16&255,Rt[3]=u>>>24&255,i.check=y(i.check,Rt,4,0)),u=0,f=0,i.mode=N;case N:for(;16>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.head&&(i.head.xflags=255&u,i.head.os=u>>8),512&i.flags&&(Rt[0]=255&u,Rt[1]=u>>>8&255,i.check=y(i.check,Rt,2,0)),u=0,f=0,i.mode=z;case z:if(1024&i.flags){for(;16>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.length=u,i.head&&(i.head.extra_len=u),512&i.flags&&(Rt[0]=255&u,Rt[1]=u>>>8&255,i.check=y(i.check,Rt,2,0)),u=0,f=0}else i.head&&(i.head.extra=null);i.mode=j;case j:if(1024&i.flags&&(g=i.length,g>h&&(g=h),g&&(i.head&&(wt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),v.arraySet(i.head.extra,r,s,g,wt)),512&i.flags&&(i.check=y(i.check,r,g,s)),h-=g,s+=g,i.length-=g),i.length))break t;i.length=0,i.mode=U;case U:if(2048&i.flags){if(0===h)break t;g=0;do wt=r[s+g++],i.head&&wt&&i.length<65536&&(i.head.name+=String.fromCharCode(wt));while(wt&&h>g);if(512&i.flags&&(i.check=y(i.check,r,g,s)),h-=g,s+=g,wt)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=V;case V:if(4096&i.flags){if(0===h)break t;g=0;do wt=r[s+g++],i.head&&wt&&i.length<65536&&(i.head.comment+=String.fromCharCode(wt));while(wt&&h>g);if(512&i.flags&&(i.check=y(i.check,r,g,s)),h-=g,s+=g,wt)break t}else i.head&&(i.head.comment=null);i.mode=W;case W:if(512&i.flags){for(;16>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(u!==(65535&i.check)){t.msg="header crc mismatch",i.mode=dt;break}u=0,f=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=q;break;case G:for(;32>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}t.adler=i.check=n(u),u=0,f=0,i.mode=Y;case Y:if(0===i.havedict)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=h,i.hold=u,i.bits=f,M;t.adler=i.check=1,i.mode=q;case q:if(e===S||e===R)break t;case X:if(i.last){u>>>=7&f,f-=7&f,i.mode=ht;break}for(;3>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}switch(i.last=1&u,u>>>=1,f-=1,3&u){case 0:i.mode=Q;break;case 1:if(c(i),i.mode=et,e===R){u>>>=2,f-=2;break t}break;case 2:i.mode=J;break;case 3:t.msg="invalid block type",i.mode=dt}u>>>=2,f-=2;break;case Q:for(u>>>=7&f,f-=7&f;32>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if((65535&u)!==(u>>>16^65535)){t.msg="invalid stored block lengths",i.mode=dt;break}if(i.length=65535&u,u=0,f=0,i.mode=Z,e===R)break t;case Z:i.mode=K;case K:if(g=i.length){if(g>h&&(g=h),g>l&&(g=l),0===g)break t;v.arraySet(o,r,s,g,a),h-=g,s+=g,l-=g,a+=g,i.length-=g;break}i.mode=q;break;case J:for(;14>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(i.nlen=(31&u)+257,u>>>=5,f-=5,i.ndist=(31&u)+1,u>>>=5,f-=5,i.ncode=(15&u)+4,u>>>=4,f-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=dt;break}i.have=0,i.mode=$;case $:for(;i.have<i.ncode;){for(;3>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.lens[Ct[i.have++]]=7&u,u>>>=3,f-=3}for(;i.have<19;)i.lens[Ct[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,_t={bits:i.lenbits},xt=E(w,i.lens,0,19,i.lencode,0,i.work,_t),i.lenbits=_t.bits,xt){t.msg="invalid code lengths set",i.mode=dt;break}i.have=0,i.mode=tt;case tt:for(;i.have<i.nlen+i.ndist;){for(;St=i.lencode[u&(1<<i.lenbits)-1],gt=St>>>24,vt=St>>>16&255,At=65535&St,!(f>=gt);){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(16>At)u>>>=gt,f-=gt,i.lens[i.have++]=At;else{if(16===At){for(Tt=gt+2;Tt>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(u>>>=gt,f-=gt,0===i.have){t.msg="invalid bit length repeat",i.mode=dt;break}wt=i.lens[i.have-1],g=3+(3&u),u>>>=2,f-=2}else if(17===At){for(Tt=gt+3;Tt>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}u>>>=gt,f-=gt,wt=0,g=3+(7&u),u>>>=3,f-=3}else{for(Tt=gt+7;Tt>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}u>>>=gt,f-=gt,wt=0,g=11+(127&u),u>>>=7,f-=7}if(i.have+g>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=dt;break}for(;g--;)i.lens[i.have++]=wt}}if(i.mode===dt)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=dt;break}if(i.lenbits=9,_t={bits:i.lenbits},xt=E(x,i.lens,0,i.nlen,i.lencode,0,i.work,_t),i.lenbits=_t.bits,xt){t.msg="invalid literal/lengths set",i.mode=dt;break}if(i.distbits=6,i.distcode=i.distdyn,_t={bits:i.distbits},xt=E(_,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,_t),i.distbits=_t.bits,xt){t.msg="invalid distances set",i.mode=dt;break}if(i.mode=et,e===R)break t;case et:i.mode=it;case it:if(h>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=h,i.hold=u,i.bits=f,b(t,m),a=t.next_out,o=t.output,l=t.avail_out,s=t.next_in,r=t.input,h=t.avail_in,u=i.hold,f=i.bits,i.mode===q&&(i.back=-1);break}for(i.back=0;St=i.lencode[u&(1<<i.lenbits)-1],gt=St>>>24,vt=St>>>16&255,At=65535&St,!(f>=gt);){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(vt&&0===(240&vt)){for(yt=gt,bt=vt,Et=At;St=i.lencode[Et+((u&(1<<yt+bt)-1)>>yt)],gt=St>>>24,vt=St>>>16&255,At=65535&St,!(f>=yt+gt);){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}u>>>=yt,f-=yt,i.back+=yt}if(u>>>=gt,f-=gt,i.back+=gt,i.length=At,0===vt){i.mode=at;break}if(32&vt){i.back=-1,i.mode=q;break}if(64&vt){t.msg="invalid literal/length code",i.mode=dt;break}i.extra=15&vt,i.mode=nt;case nt:if(i.extra){for(Tt=i.extra;Tt>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.length+=u&(1<<i.extra)-1,u>>>=i.extra,f-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=rt;case rt:for(;St=i.distcode[u&(1<<i.distbits)-1],gt=St>>>24,vt=St>>>16&255,At=65535&St,!(f>=gt);){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(0===(240&vt)){for(yt=gt,bt=vt,Et=At;St=i.distcode[Et+((u&(1<<yt+bt)-1)>>yt)],gt=St>>>24,vt=St>>>16&255,At=65535&St,!(f>=yt+gt);){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}u>>>=yt,f-=yt,i.back+=yt}if(u>>>=gt,f-=gt,i.back+=gt,64&vt){t.msg="invalid distance code",i.mode=dt;break}i.offset=At,i.extra=15&vt,i.mode=ot;case ot:if(i.extra){for(Tt=i.extra;Tt>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}i.offset+=u&(1<<i.extra)-1,u>>>=i.extra,f-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=dt;break}i.mode=st;case st:if(0===l)break t;if(g=m-l,i.offset>g){if(g=i.offset-g,g>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=dt;break}g>i.wnext?(g-=i.wnext,pt=i.wsize-g):pt=i.wnext-g,g>i.length&&(g=i.length),mt=i.window}else mt=o,pt=a-i.offset,g=i.length;g>l&&(g=l),l-=g,i.length-=g;do o[a++]=mt[pt++];while(--g);0===i.length&&(i.mode=it);break;case at:if(0===l)break t;o[a++]=i.length,l--,i.mode=it;break;case ht:if(i.wrap){for(;32>f;){if(0===h)break t;h--,u|=r[s++]<<f,f+=8}if(m-=l,t.total_out+=m,i.total+=m,m&&(t.adler=i.check=i.flags?y(i.check,o,m,a-m):A(i.check,o,m,a-m)),m=l,(i.flags?u:n(u))!==i.check){t.msg="incorrect data check",i.mode=dt;break}u=0,f=0}i.mode=lt;case lt:if(i.wrap&&i.flags){for(;32>f;){if(0===h)break t;h--,u+=r[s++]<<f,f+=8}if(u!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=dt;break}u=0,f=0}i.mode=ct;case ct:xt=k;break t;case dt:xt=P;break t;case ut:return D;case ft:default:return H}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=h,i.hold=u,i.bits=f,(i.wsize||m!==t.avail_out&&i.mode<dt&&(i.mode<ht||e!==T))&&d(t,t.output,t.next_out,m-t.avail_out)?(i.mode=ut,D):(p-=t.avail_in,m-=t.avail_out,t.total_in+=p,t.total_out+=m,i.total+=m,i.wrap&&m&&(t.adler=i.check=i.flags?y(i.check,o,m,t.next_out-m):A(i.check,o,m,t.next_out-m)),t.data_type=i.bits+(i.last?64:0)+(i.mode===q?128:0)+(i.mode===et||i.mode===Z?256:0),(0===p&&0===m||e===T)&&xt===C&&(xt=O),xt)}function f(t){if(!t||!t.state)return H;var e=t.state;return e.window&&(e.window=null),t.state=null,C}function p(t,e){var i;return t&&t.state?(i=t.state,0===(2&i.wrap)?H:(i.head=e,e.done=!1,C)):H}var m,g,v=t("../utils/common"),A=t("./adler32"),y=t("./crc32"),b=t("./inffast"),E=t("./inftrees"),w=0,x=1,_=2,T=4,S=5,R=6,C=0,k=1,M=2,H=-2,P=-3,D=-4,O=-5,L=8,I=1,B=2,F=3,N=4,z=5,j=6,U=7,V=8,W=9,G=10,Y=11,q=12,X=13,Q=14,Z=15,K=16,J=17,$=18,tt=19,et=20,it=21,nt=22,rt=23,ot=24,st=25,at=26,ht=27,lt=28,ct=29,dt=30,ut=31,ft=32,pt=852,mt=592,gt=15,vt=gt,At=!0;i.inflateReset=s,i.inflateReset2=a,i.inflateResetKeep=o,i.inflateInit=l,i.inflateInit2=h,i.inflate=u,i.inflateEnd=f,i.inflateGetHeader=p,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(t,e,i){"use strict";var n=t("../utils/common"),r=15,o=852,s=592,a=0,h=1,l=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,p,m,g,v,A){var y,b,E,w,x,_,T,S,R,C=A.bits,k=0,M=0,H=0,P=0,D=0,O=0,L=0,I=0,B=0,F=0,N=null,z=0,j=new n.Buf16(r+1),U=new n.Buf16(r+1),V=null,W=0;for(k=0;r>=k;k++)j[k]=0;for(M=0;p>M;M++)j[e[i+M]]++;for(D=C,P=r;P>=1&&0===j[P];P--);if(D>P&&(D=P),0===P)return m[g++]=20971520,m[g++]=20971520,A.bits=1,0;for(H=1;P>H&&0===j[H];H++);for(H>D&&(D=H),I=1,k=1;r>=k;k++)if(I<<=1,I-=j[k],0>I)return-1;if(I>0&&(t===a||1!==P))return-1;for(U[1]=0,k=1;r>k;k++)U[k+1]=U[k]+j[k];for(M=0;p>M;M++)0!==e[i+M]&&(v[U[e[i+M]]++]=M);if(t===a?(N=V=v,_=19):t===h?(N=c,z-=257,V=d,W-=257,_=256):(N=u,V=f,_=-1),F=0,M=0,k=H,x=g,O=D,L=0,E=-1,B=1<<D,w=B-1,t===h&&B>o||t===l&&B>s)return 1;for(var G=0;;){G++,T=k-L,v[M]<_?(S=0,R=v[M]):v[M]>_?(S=V[W+v[M]],R=N[z+v[M]]):(S=96,R=0),y=1<<k-L,b=1<<O,H=b;do b-=y,m[x+(F>>L)+b]=T<<24|S<<16|R|0;while(0!==b);for(y=1<<k-1;F&y;)y>>=1;if(0!==y?(F&=y-1,F+=y):F=0,M++,0===--j[k]){if(k===P)break;k=e[i+v[M]]}if(k>D&&(F&w)!==E){for(0===L&&(L=D),x+=H,O=k-L,I=1<<O;P>O+L&&(I-=j[O+L],!(0>=I));)O++,I<<=1;if(B+=1<<O,t===h&&B>o||t===l&&B>s)return 1;E=F&w,m[E]=D<<24|O<<16|x-g|0}}return 0!==F&&(m[x+F]=k-L<<24|64<<16|0),
A.bits=D,0}},{"../utils/common":27}],37:[function(t,e,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(t,e,i){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function r(t){return 256>t?st[t]:st[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,i){t.bi_valid>q-i?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>q-t.bi_valid,t.bi_valid+=i-q):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function a(t,e,i){s(t,i[2*e],i[2*e+1])}function h(t,e){var i=0;do i|=1&t,t>>>=1,i<<=1;while(--e>0);return i>>>1}function l(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function c(t,e){var i,n,r,o,s,a,h=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(o=0;Y>=o;o++)t.bl_count[o]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;G>i;i++)n=t.heap[i],o=h[2*h[2*n+1]+1]+1,o>p&&(o=p,m++),h[2*n+1]=o,n>l||(t.bl_count[o]++,s=0,n>=f&&(s=u[n-f]),a=h[2*n],t.opt_len+=a*(o+s),d&&(t.static_len+=a*(c[2*n+1]+s)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(n=t.bl_count[o];0!==n;)r=t.heap[--i],r>l||(h[2*r+1]!==o&&(t.opt_len+=(o-h[2*r+1])*h[2*r],h[2*r+1]=o),n--)}}function d(t,e,i){var n,r,o=new Array(Y+1),s=0;for(n=1;Y>=n;n++)o[n]=s=s+i[n-1]<<1;for(r=0;e>=r;r++){var a=t[2*r+1];0!==a&&(t[2*r]=h(o[a]++,a))}}function u(){var t,e,i,n,r,o=new Array(Y+1);for(i=0,n=0;z-1>n;n++)for(ht[n]=i,t=0;t<1<<$[n];t++)at[i++]=n;for(at[i-1]=n,r=0,n=0;16>n;n++)for(lt[n]=r,t=0;t<1<<tt[n];t++)st[r++]=n;for(r>>=7;V>n;n++)for(lt[n]=r<<7,t=0;t<1<<tt[n]-7;t++)st[256+r++]=n;for(e=0;Y>=e;e++)o[e]=0;for(t=0;143>=t;)rt[2*t+1]=8,t++,o[8]++;for(;255>=t;)rt[2*t+1]=9,t++,o[9]++;for(;279>=t;)rt[2*t+1]=7,t++,o[7]++;for(;287>=t;)rt[2*t+1]=8,t++,o[8]++;for(d(rt,U+1,o),t=0;V>t;t++)ot[2*t+1]=5,ot[2*t]=h(t,5);ct=new ft(rt,$,j+1,U,Y),dt=new ft(ot,tt,0,V,Y),ut=new ft(new Array(0),et,0,W,X)}function f(t){var e;for(e=0;U>e;e++)t.dyn_ltree[2*e]=0;for(e=0;V>e;e++)t.dyn_dtree[2*e]=0;for(e=0;W>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function m(t,e,i,n){p(t),n&&(o(t,i),o(t,~i)),M.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}function g(t,e,i,n){var r=2*e,o=2*i;return t[r]<t[o]||t[r]===t[o]&&n[e]<=n[i]}function v(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&g(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!g(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function A(t,e,i){var n,o,h,l,c=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],o=t.pending_buf[t.l_buf+c],c++,0===n?a(t,o,e):(h=at[o],a(t,h+j+1,e),l=$[h],0!==l&&(o-=ht[h],s(t,o,l)),n--,h=r(n),a(t,h,i),l=tt[h],0!==l&&(n-=lt[h],s(t,n,l)));while(c<t.last_lit);a(t,Q,e)}function y(t,e){var i,n,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=G,i=0;h>i;i++)0!==o[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):o[2*i+1]=0;for(;t.heap_len<2;)r=t.heap[++t.heap_len]=2>l?++l:0,o[2*r]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=l,i=t.heap_len>>1;i>=1;i--)v(t,o,i);r=h;do i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],v(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,o[2*r]=o[2*i]+o[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,o[2*i+1]=o[2*n+1]=r,t.heap[1]=r++,v(t,o,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],c(t,e),d(o,l,t.bl_count)}function b(t,e,i){var n,r,o=-1,s=e[1],a=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(i+1)+1]=65535,n=0;i>=n;n++)r=s,s=e[2*(n+1)+1],++a<h&&r===s||(l>a?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*Z]++):10>=a?t.bl_tree[2*K]++:t.bl_tree[2*J]++,a=0,o=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))}function E(t,e,i){var n,r,o=-1,h=e[1],l=0,c=7,d=4;for(0===h&&(c=138,d=3),n=0;i>=n;n++)if(r=h,h=e[2*(n+1)+1],!(++l<c&&r===h)){if(d>l){do a(t,r,t.bl_tree);while(0!==--l)}else 0!==r?(r!==o&&(a(t,r,t.bl_tree),l--),a(t,Z,t.bl_tree),s(t,l-3,2)):10>=l?(a(t,K,t.bl_tree),s(t,l-3,3)):(a(t,J,t.bl_tree),s(t,l-11,7));l=0,o=r,0===h?(c=138,d=3):r===h?(c=6,d=3):(c=7,d=4)}}function w(t){var e;for(b(t,t.dyn_ltree,t.l_desc.max_code),b(t,t.dyn_dtree,t.d_desc.max_code),y(t,t.bl_desc),e=W-1;e>=3&&0===t.bl_tree[2*it[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function x(t,e,i,n){var r;for(s(t,e-257,5),s(t,i-1,5),s(t,n-4,4),r=0;n>r;r++)s(t,t.bl_tree[2*it[r]+1],3);E(t,t.dyn_ltree,e-1),E(t,t.dyn_dtree,i-1)}function _(t){var e,i=4093624447;for(e=0;31>=e;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return P;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return D;for(e=32;j>e;e++)if(0!==t.dyn_ltree[2*e])return D;return P}function T(t){mt||(u(),mt=!0),t.l_desc=new pt(t.dyn_ltree,ct),t.d_desc=new pt(t.dyn_dtree,dt),t.bl_desc=new pt(t.bl_tree,ut),t.bi_buf=0,t.bi_valid=0,f(t)}function S(t,e,i,n){s(t,(L<<1)+(n?1:0),3),m(t,e,i,!0)}function R(t){s(t,I<<1,3),a(t,Q,rt),l(t)}function C(t,e,i,n){var r,o,a=0;t.level>0?(t.strm.data_type===O&&(t.strm.data_type=_(t)),y(t,t.l_desc),y(t,t.d_desc),a=w(t),r=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,r>=o&&(r=o)):r=o=i+5,r>=i+4&&-1!==e?S(t,e,i,n):t.strategy===H||o===r?(s(t,(I<<1)+(n?1:0),3),A(t,rt,ot)):(s(t,(B<<1)+(n?1:0),3),x(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),A(t,t.dyn_ltree,t.dyn_dtree)),f(t),n&&p(t)}function k(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(at[i]+j+1)]++,t.dyn_dtree[2*r(e)]++),t.last_lit===t.lit_bufsize-1}var M=t("../utils/common"),H=4,P=0,D=1,O=2,L=0,I=1,B=2,F=3,N=258,z=29,j=256,U=j+1+z,V=30,W=19,G=2*U+1,Y=15,q=16,X=7,Q=256,Z=16,K=17,J=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nt=512,rt=new Array(2*(U+2));n(rt);var ot=new Array(2*V);n(ot);var st=new Array(nt);n(st);var at=new Array(N-F+1);n(at);var ht=new Array(z);n(ht);var lt=new Array(V);n(lt);var ct,dt,ut,ft=function(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length},pt=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},mt=!1;i._tr_init=T,i._tr_stored_block=S,i._tr_flush_block=C,i._tr_tally=k,i._tr_align=R},{"../utils/common":27}],39:[function(t,e,i){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},{}]},{},[9])(9)}),function(t,e){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t.Mustache={},e(Mustache))}(this,function(t){function e(t){return"function"==typeof t}function i(t){return m(t)?"array":typeof t}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(t,e){return null!=t&&"object"==typeof t&&e in t}function o(t,e){return g.call(t,e)}function s(t){return!o(v,t)}function a(t){return String(t).replace(/[&<>"'\/]/g,function(t){return A[t]})}function h(e,i){function r(){if(v&&!A)for(;g.length;)delete p[g.pop()];else g=[];v=!1,A=!1}function o(t){if("string"==typeof t&&(t=t.split(b,2)),!m(t)||2!==t.length)throw new Error("Invalid tags: "+t);a=new RegExp(n(t[0])+"\\s*"),h=new RegExp("\\s*"+n(t[1])),u=new RegExp("\\s*"+n("}"+t[1]))}if(!e)return[];var a,h,u,f=[],p=[],g=[],v=!1,A=!1;o(i||t.tags);for(var _,T,S,R,C,k,M=new d(e);!M.eos();){if(_=M.pos,S=M.scanUntil(a))for(var H=0,P=S.length;P>H;++H)R=S.charAt(H),s(R)?g.push(p.length):A=!0,p.push(["text",R,_,_+1]),_+=1,"\n"===R&&r();if(!M.scan(a))break;if(v=!0,T=M.scan(x)||"name",M.scan(y),"="===T?(S=M.scanUntil(E),M.scan(E),M.scanUntil(h)):"{"===T?(S=M.scanUntil(u),M.scan(w),M.scanUntil(h),T="&"):S=M.scanUntil(h),!M.scan(h))throw new Error("Unclosed tag at "+M.pos);if(C=[T,S,_,M.pos],p.push(C),"#"===T||"^"===T)f.push(C);else if("/"===T){if(k=f.pop(),!k)throw new Error('Unopened section "'+S+'" at '+_);if(k[1]!==S)throw new Error('Unclosed section "'+k[1]+'" at '+_)}else"name"===T||"{"===T||"&"===T?A=!0:"="===T&&o(S)}if(k=f.pop())throw new Error('Unclosed section "'+k[1]+'" at '+M.pos);return c(l(p))}function l(t){for(var e,i,n=[],r=0,o=t.length;o>r;++r)e=t[r],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(n.push(e),i=e));return n}function c(t){for(var e,i,n=[],r=n,o=[],s=0,a=t.length;a>s;++s)switch(e=t[s],e[0]){case"#":case"^":r.push(e),o.push(e),r=e[4]=[];break;case"/":i=o.pop(),i[5]=e[2],r=o.length>0?o[o.length-1][4]:n;break;default:r.push(e)}return n}function d(t){this.string=t,this.tail=t,this.pos=0}function u(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function f(){this.cache={}}var p=Object.prototype.toString,m=Array.isArray||function(t){return"[object Array]"===p.call(t)},g=RegExp.prototype.test,v=/\S/,A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},y=/\s*/,b=/\s+/,E=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},d.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},u.prototype.push=function(t){return new u(t,this)},u.prototype.lookup=function(t){var i,n=this.cache;if(n.hasOwnProperty(t))i=n[t];else{for(var o,s,a=this,h=!1;a;){if(t.indexOf(".")>0)for(i=a.view,o=t.split("."),s=0;null!=i&&s<o.length;)s===o.length-1&&(h=r(i,o[s])),i=i[o[s++]];else i=a.view[t],h=r(a.view,t);if(h)break;a=a.parent}n[t]=i}return e(i)&&(i=i.call(this.view)),i},f.prototype.clearCache=function(){this.cache={}},f.prototype.parse=function(t,e){var i=this.cache,n=i[t];return null==n&&(n=i[t]=h(t,e)),n},f.prototype.render=function(t,e,i){var n=this.parse(t),r=e instanceof u?e:new u(e);return this.renderTokens(n,r,i,t)},f.prototype.renderTokens=function(t,e,i,n){for(var r,o,s,a="",h=0,l=t.length;l>h;++h)s=void 0,r=t[h],o=r[0],"#"===o?s=this.renderSection(r,e,i,n):"^"===o?s=this.renderInverted(r,e,i,n):">"===o?s=this.renderPartial(r,e,i,n):"&"===o?s=this.unescapedValue(r,e):"name"===o?s=this.escapedValue(r,e):"text"===o&&(s=this.rawValue(r)),void 0!==s&&(a+=s);return a},f.prototype.renderSection=function(t,i,n,r){function o(t){return s.render(t,i,n)}var s=this,a="",h=i.lookup(t[1]);if(h){if(m(h))for(var l=0,c=h.length;c>l;++l)a+=this.renderTokens(t[4],i.push(h[l]),n,r);else if("object"==typeof h||"string"==typeof h||"number"==typeof h)a+=this.renderTokens(t[4],i.push(h),n,r);else if(e(h)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");h=h.call(i.view,r.slice(t[3],t[5]),o),null!=h&&(a+=h)}else a+=this.renderTokens(t[4],i,n,r);return a}},f.prototype.renderInverted=function(t,e,i,n){var r=e.lookup(t[1]);return!r||m(r)&&0===r.length?this.renderTokens(t[4],e,i,n):void 0},f.prototype.renderPartial=function(t,i,n){if(n){var r=e(n)?n(t[1]):n[t[1]];return null!=r?this.renderTokens(this.parse(r),i,n,r):void 0}},f.prototype.unescapedValue=function(t,e){var i=e.lookup(t[1]);return null!=i?i:void 0},f.prototype.escapedValue=function(e,i){var n=i.lookup(e[1]);return null!=n?t.escape(n):void 0},f.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.2.0",t.tags=["{{","}}"];var _=new f;t.clearCache=function(){return _.clearCache()},t.parse=function(t,e){return _.parse(t,e)},t.render=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+i(t)+'" was given as the first argument for mustache#render(template, view, partials)');return _.render(t,e,n)},t.to_html=function(i,n,r,o){var s=t.render(i,n,r);return e(o)?void o(s):s},t.escape=a,t.Scanner=d,t.Context=u,t.Writer=f}),function(){"use strict";var t={"@@functional/placeholder":!0},e=function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,i){return e.apply(this,arguments)};case 3:return function(t,i,n){return e.apply(this,arguments)};case 4:return function(t,i,n,r){return e.apply(this,arguments)};case 5:return function(t,i,n,r,o){return e.apply(this,arguments)};case 6:return function(t,i,n,r,o,s){return e.apply(this,arguments)};case 7:return function(t,i,n,r,o,s,a){return e.apply(this,arguments)};case 8:return function(t,i,n,r,o,s,a,h){return e.apply(this,arguments)};case 9:return function(t,i,n,r,o,s,a,h,l){return e.apply(this,arguments)};case 10:return function(t,i,n,r,o,s,a,h,l,c){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},i=function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i},n=function(){return Array.prototype.slice.call(arguments)},r=function(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))},o=function(t){return function(){return!t.apply(this,arguments)}},s=function(t,e){t=t||[],e=e||[];var i,n=t.length,r=e.length,o=[];for(i=0;n>i;)o[o.length]=t[i],i+=1;for(i=0;r>i;)o[o.length]=e[i],i+=1;return o},a=function(t,e,i){for(var n=0,r=i.length;r>n;){if(t(e,i[n]))return!0;n+=1}return!1},h=function(t,e){for(var i=0,n=e.length,r=[];n>i;)t(e[i])&&(r[r.length]=e[i]),i+=1;return r},l=function(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}},c=function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]},d=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)},u=function(t){return t},f=function(){var t=Object.prototype.toString;return"[object Arguments]"===t.call(arguments)?function(e){return"[object Arguments]"===t.call(e)}:function(t){return d("callee",t)}}(),p=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)},m=function(t){return"[object Function]"===Object.prototype.toString.call(t)},g=Number.isInteger||function(t){return t<<0===t},v=function(t){return"[object Number]"===Object.prototype.toString.call(t)},A=function(t){return"[object Object]"===Object.prototype.toString.call(t)},y=function(t){return null!=t&&"object"==typeof t&&t["@@functional/placeholder"]===!0},b=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},E=function(t){return"[object String]"===Object.prototype.toString.call(t)},w=function(t){return"function"==typeof t["@@transducer/step"]},x=function(t,e){for(var i=0,n=e.length,r=Array(n);n>i;)r[i]=t(e[i]),i+=1;return r},_=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1,n=arguments.length;n>i;){var r=arguments[i];if(null!=r)for(var o in r)d(o,r)&&(e[o]=r[o]);i+=1}return e},T=function(t){return[t]},S=function(t,e){return function(){return e.call(this,t.apply(this,arguments))}},R=function(t,e){return function(){var i=this;return t.apply(i,arguments).then(function(t){return e.call(i,t)})}},C=function(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'},k=function(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}},M=function Fr(t,e,i){switch(arguments.length){case 1:return Fr(t,0,t.length);case 2:return Fr(t,e,t.length);default:for(var n=[],r=0,o=Math.max(0,Math.min(t.length,i)-e);o>r;)n[r]=t[e+r],r+=1;return n}},H=function(){var t=function(t){return(10>t?"0":"")+t};return"function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(e){return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),P={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},D=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},function(e){return new t(e)}}(),O=function(t,e){for(var i=0,n=e.length-(t-1),r=new Array(n>=0?n:0);n>i;)r[i]=M(e,i,i+t),i+=1;return r},L="function"==typeof Object.assign?Object.assign:_,I=function(t,e){return function(){var i=arguments.length;if(0===i)return e();var n=arguments[i-1];return p(n)||"function"!=typeof n[t]?e.apply(this,arguments):n[t].apply(n,M(arguments,0,i-1))}},B=function(t){return function e(i){return 0===arguments.length||y(i)?e:t.apply(this,arguments)}},F=function(t){return function e(i,n){switch(arguments.length){case 0:return e;case 1:return y(i)?e:B(function(e){return t(i,e)});default:return y(i)&&y(n)?e:y(i)?B(function(e){return t(e,n)}):y(n)?B(function(e){return t(i,e)}):t(i,n)}}},N=function(t){return function e(i,n,r){switch(arguments.length){case 0:return e;case 1:return y(i)?e:F(function(e,n){return t(i,e,n)});case 2:return y(i)&&y(n)?e:y(i)?F(function(e,i){return t(e,n,i)}):y(n)?F(function(e,n){return t(i,e,n)}):B(function(e){return t(i,n,e)});default:return y(i)&&y(n)&&y(r)?e:y(i)&&y(n)?F(function(e,i){return t(e,i,r)}):y(i)&&y(r)?F(function(e,i){return t(e,n,i)}):y(n)&&y(r)?F(function(e,n){return t(i,e,n)}):y(i)?B(function(e){return t(e,n,r)}):y(n)?B(function(e){return t(i,e,r)}):y(r)?B(function(e){return t(i,n,e)}):t(i,n,r)}}},z=function Nr(t,i,n){return function(){for(var r=[],o=0,s=t,a=0;a<i.length||o<arguments.length;){var h;a<i.length&&(!y(i[a])||o>=arguments.length)?h=i[a]:(h=arguments[o],o+=1),r[a]=h,y(h)||(s-=1),a+=1}return 0>=s?n.apply(this,r):e(s,Nr(t,r,n))}},j=function(t,e,i){return function(){var n=arguments.length;if(0===n)return i();var r=arguments[n-1];if(!p(r)){var o=M(arguments,0,n-1);if("function"==typeof r[t])return r[t].apply(r,o);if(w(r)){var s=e.apply(null,o);return s(r)}}return i.apply(this,arguments)}},U=function(t,e){for(var i=e.length-1;i>=0&&t(e[i]);)i-=1;return M(e,0,i+1)},V=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)||(this.all=!1,t=k(this.xf["@@transducer/step"](t,!1))),t},F(function(e,i){return new t(e,i)})}(),W=function(){function t(t,e){this.xf=e,this.f=t,this.any=!1}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.any=!0,t=k(this.xf["@@transducer/step"](t,!0))),t},F(function(e,i){return new t(e,i)})}(),G=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.store(e),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t.prototype.getCopy=function(){return s(M(this.acc,this.pos),M(this.acc,0,this.pos))},F(function(e,i){return new t(e,i)})}(),Y=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=P.result,t.prototype["@@transducer/step"]=function(t,e){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,e)},F(function(e,i){return new t(e,i)})}(),q=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(e),t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},F(function(e,i){return new t(e,i)})}(),X=function(){function t(t,e){this.xf=e,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=function(){return this.xf["@@transducer/init"]()},t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var i=!1;return this.seenFirstValue?this.pred(this.lastValue,e)&&(i=!0):this.seenFirstValue=!0,this.lastValue=e,i?t:this.xf["@@transducer/step"](t,e)},F(function(e,i){return new t(e,i)})}(),Q=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=P.result,t.prototype["@@transducer/step"]=function(t,e){if(this.f){if(this.f(e))return t;this.f=null}return this.xf["@@transducer/step"](t,e)},F(function(e,i){return new t(e,i)})}(),Z=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=P.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},F(function(e,i){return new t(e,i)})}(),K=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.found=!0,t=k(this.xf["@@transducer/step"](t,e))),t},F(function(e,i){return new t(e,i)})}(),J=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=k(this.xf["@@transducer/step"](t,this.idx))),t},F(function(e,i){return new t(e,i)})}(),$=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.last=e),t},F(function(e,i){return new t(e,i)})}(),tt=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.lastIdx=this.idx),t},F(function(e,i){return new t(e,i)})}(),et=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=P.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},F(function(e,i){return new t(e,i)})}(),it=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=P.result,t.prototype["@@transducer/step"]=function(t,e){return 0===this.n?k(t):(this.n-=1,this.xf["@@transducer/step"](t,e))},F(function(e,i){return new t(e,i)})}(),nt=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=P.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):k(t)},F(function(e,i){return new t(e,i)})}(),rt=F(function(t,e){return Number(t)+Number(e)}),ot=N(function(t,e,i){if(e>=i.length||e<-i.length)return i;var n=0>e?i.length:0,r=n+e,o=s(i);return o[r]=t(i[r]),o}),st=F(j("all",V,function(t,e){for(var i=0;i<e.length;){if(!t(e[i]))return!1;i+=1}return!0})),at=B(function(t){return function(){return t}}),ht=F(function(t,e){return t&&e}),lt=F(j("any",W,function(t,e){for(var i=0;i<e.length;){if(t(e[i]))return!0;i+=1}return!1})),ct=F(j("aperture",G,O)),dt=F(function(t,e){return s(e,[t])}),ut=F(function(t,e){return t.apply(this,e)}),ft=N(function(t,e,i){var n={};for(var r in i)n[r]=i[r];return n[t]=e,n}),pt=N(function zr(t,e,i){switch(t.length){case 0:return e;case 1:return ft(t[0],e,i);default:return ft(t[0],zr(M(t,1),e,Object(i[t[0]])),i)}}),mt=F(function(t,i){return e(t.length,function(){return t.apply(i,arguments)})}),gt=N(function(t,e,i){if(t>e)throw new Error("min must not be greater than max in clamp(min, max, value)");return t>i?t:i>e?e:i}),vt=B(function(t){return function(e,i){return t(e,i)?-1:t(i,e)?1:0}}),At=F(function(t,e){for(var i={},n=e.length,r=0;n>r;){var o=t(e[r]);i[o]=(d(o,i)?i[o]:0)+1,r+=1}return i}),yt=F(function(t,i){return 1===t?B(i):e(t,z(t,[],i))}),bt=rt(-1),Et=F(function(t,e){return null==e||e!==e?t:e}),wt=N(function(t,e,i){for(var n=[],r=0,o=e.length;o>r;)a(t,e[r],i)||a(t,e[r],n)||n.push(e[r]),r+=1;return n}),xt=F(function(t,e){var i={};for(var n in e)n!==t&&(i[n]=e[n]);return i}),_t=F(function jr(t,e){switch(t.length){case 0:return e;case 1:return xt(t[0],e);default:var i=t[0],n=M(t,1);return null==e[i]?e:ft(i,jr(n,e[i]),e)}}),Tt=F(function(t,e){return t/e}),St=F(j("dropWhile",Q,function(t,e){for(var i=0,n=e.length;n>i&&t(e[i]);)i+=1;return M(e,i)})),Rt=B(function(t){return null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():p(t)?[]:E(t)?"":A(t)?{}:f(t)?function(){return arguments}():void 0}),Ct=F(function Ur(t,e){var i,n,r,o={};for(n in e)i=t[n],r=typeof i,o[n]="function"===r?i(e[n]):"object"===r?Ur(t[n],e[n]):e[n];return o}),kt=F(j("find",K,function(t,e){for(var i=0,n=e.length;n>i;){if(t(e[i]))return e[i];i+=1}})),Mt=F(j("findIndex",J,function(t,e){for(var i=0,n=e.length;n>i;){if(t(e[i]))return i;i+=1}return-1})),Ht=F(j("findLast",$,function(t,e){for(var i=e.length-1;i>=0;){if(t(e[i]))return e[i];i-=1}})),Pt=F(j("findLastIndex",tt,function(t,e){for(var i=e.length-1;i>=0;){if(t(e[i]))return i;i-=1}return-1})),Dt=F(I("forEach",function(t,e){for(var i=e.length,n=0;i>n;)t(e[n]),n+=1;return e})),Ot=B(function(t){for(var e=0,i=t.length,n={};i>e;)p(t[e])&&t[e].length&&(n[t[e][0]]=t[e][1]),e+=1;return n}),Lt=F(function(t,e){return t>e}),It=F(function(t,e){return t>=e}),Bt=F(d),Ft=F(function(t,e){return t in e}),Nt=F(function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}),zt=B(u),jt=N(function(t,e,i){return yt(Math.max(t.length,e.length,i.length),function(){return t.apply(this,arguments)?e.apply(this,arguments):i.apply(this,arguments)})}),Ut=rt(1),Vt=N(function(t,e,i){t=t<i.length&&t>=0?t:i.length;var n=M(i);return n.splice(t,0,e),n}),Wt=N(function(t,e,i){return t=t<i.length&&t>=0?t:i.length,s(s(M(i,0,t),e),M(i,t))}),Gt=F(I("intersperse",function(t,e){for(var i=[],n=0,r=e.length;r>n;)n===r-1?i.push(e[n]):i.push(e[n],t),n+=1;return i})),Yt=F(function(t,e){return null!=e&&e.constructor===t||e instanceof t}),qt=B(function(t){return p(t)?!0:t?"object"!=typeof t?!1:t instanceof String?!1:1===t.nodeType?!!t.length:0===t.length?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1:!1}),Xt=B(function(t){return null==t}),Qt=function(){var t=!{toString:null}.propertyIsEnumerable("toString"),e=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],i=function(){return arguments.propertyIsEnumerable("length")}(),n=function(t,e){for(var i=0;i<t.length;){if(t[i]===e)return!0;i+=1}return!1};return B("function"!=typeof Object.keys||i?function(r){if(Object(r)!==r)return[];var o,s,a=[],h=i&&f(r);for(o in r)!d(o,r)||h&&"length"===o||(a[a.length]=o);if(t)for(s=e.length-1;s>=0;)o=e[s],d(o,r)&&!n(a,o)&&(a[a.length]=o),s-=1;return a}:function(t){return Object(t)!==t?[]:Object.keys(t)})}(),Zt=B(function(t){var e,i=[];for(e in t)i[i.length]=e;return i}),Kt=B(function(t){return null!=t&&Yt(Number,t.length)?t.length:NaN}),Jt=F(function(t,e){return e>t}),$t=F(function(t,e){return e>=t}),te=N(function(t,e,i){for(var n=0,r=i.length,o=[],s=[e];r>n;)s=t(s[0],i[n]),o[n]=s[1],n+=1;return[s[0],o]}),ee=N(function(t,e,i){for(var n=i.length-1,r=[],o=[e];n>=0;)o=t(o[0],i[n]),r[n]=o[1],n-=1;return[o[0],r]}),ie=F(function(t,e){return e.match(t)||[]}),ne=F(function(t,e){return g(t)?!g(e)||1>e?NaN:(t%e+e)%e:NaN}),re=F(function(t,e){return e>t?e:t}),oe=N(function(t,e,i){return t(i)>t(e)?i:e}),se=F(function(t,e){return L({},t,e)}),ae=B(function(t){return L.apply(null,[{}].concat(t))}),he=N(function(t,e,i){var n,r={};for(n in e)d(n,e)&&(r[n]=d(n,i)?t(n,e[n],i[n]):e[n]);for(n in i)d(n,i)&&!d(n,r)&&(r[n]=i[n]);return r}),le=F(function(t,e){return t>e?e:t}),ce=N(function(t,e,i){return t(i)<t(e)?i:e}),de=F(function(t,e){return t%e}),ue=F(function(t,e){return t*e}),fe=F(function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,i){return e.call(this,t,i)};case 3:return function(t,i,n){return e.call(this,t,i,n)};case 4:return function(t,i,n,r){return e.call(this,t,i,n,r)};case 5:return function(t,i,n,r,o){return e.call(this,t,i,n,r,o)};case 6:return function(t,i,n,r,o,s){return e.call(this,t,i,n,r,o,s)};case 7:return function(t,i,n,r,o,s,a){return e.call(this,t,i,n,r,o,s,a)};case 8:return function(t,i,n,r,o,s,a,h){return e.call(this,t,i,n,r,o,s,a,h)};case 9:return function(t,i,n,r,o,s,a,h,l){return e.call(this,t,i,n,r,o,s,a,h,l)};case 10:return function(t,i,n,r,o,s,a,h,l,c){return e.call(this,t,i,n,r,o,s,a,h,l,c)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),pe=B(function(t){return-t}),me=F(o(j("any",W,lt))),ge=B(function(t){return!t}),ve=F(function(t,e){var i=0>t?e.length+t:t;return E(e)?e.charAt(i):e[i]}),Ae=B(function(t){return function(){return ve(t,arguments)}}),ye=F(function(t,e){var i={};return i[t]=e,i}),be=B(T),Ee=B(function(t){var i,n=!1;return e(t.length,function(){return n?i:(n=!0,i=t.apply(this,arguments))})}),we=F(function(t,e){return t||e}),xe=function(){var t=function(e){return{value:e,map:function(i){return t(i(e))}}};return N(function(e,i,n){return e(function(e){return t(i(e))})(n).value})}(),_e=F(function(t,e){return[t,e]}),Te=F(function(t,e){for(var i=e,n=0;n<t.length;){if(null==i)return;i=i[t[n]],n+=1}return i}),Se=N(function(t,e,i){return Et(t,Te(e,i))}),Re=N(function(t,e,i){return e.length>0&&t(Te(e,i))}),Ce=F(function(t,e){for(var i={},n=0;n<t.length;)t[n]in e&&(i[t[n]]=e[t[n]]),n+=1;return i}),ke=F(function(t,e){for(var i={},n=0,r=t.length;r>n;){var o=t[n];i[o]=e[o],n+=1}return i}),Me=F(function(t,e){var i={};for(var n in e)t(e[n],n,e)&&(i[n]=e[n]);return i}),He=F(function(t,e){return s([t],e)}),Pe=F(function(t,e){return e[t]}),De=N(function(t,e,i){return null!=i&&d(e,i)?i[e]:t;
}),Oe=N(function(t,e,i){return t(i[e])}),Le=F(function(t,e){for(var i=t.length,n=[],r=0;i>r;)n[r]=e[t[r]],r+=1;return n}),Ie=F(function(t,e){if(!v(t)||!v(e))throw new TypeError("Both arguments to range must be numbers");for(var i=[],n=t;e>n;)i.push(n),n+=1;return i}),Be=N(function(t,e,i){for(var n=i.length-1;n>=0;)e=t(e,i[n]),n-=1;return e}),Fe=B(k),Ne=N(function(t,e,i){return s(M(i,0,Math.min(t,i.length)),M(i,Math.min(i.length,t+e)))}),ze=N(function(t,e,i){return i.replace(t,e)}),je=B(function(t){return E(t)?t.split("").reverse().join(""):M(t).reverse()}),Ue=N(function(t,e,i){for(var n=0,r=i.length,o=[e];r>n;)e=t(e,i[n]),o[n+1]=e,n+=1;return o}),Ve=N(function(t,e,i){return xe(t,at(e),i)}),We=N(I("slice",function(t,e,i){return Array.prototype.slice.call(i,t,e)})),Ge=F(function(t,e){return M(e).sort(t)}),Ye=F(function(t,e){return M(e).sort(function(e,i){var n=t(e),r=t(i);return r>n?-1:n>r?1:0})}),qe=F(function(t,e){return[We(0,t,e),We(t,Kt(e),e)]}),Xe=F(function(t,e){if(0>=t)throw new Error("First argument to splitEvery must be a positive integer");for(var i=[],n=0;n<e.length;)i.push(We(n,n+=t,e));return i}),Qe=F(function(t,e){for(var i=0,n=e.length,r=[];n>i&&!t(e[i]);)r.push(e[i]),i+=1;return[r,M(e,i)]}),Ze=F(function(t,e){return Number(t)-Number(e)}),Ke=I("tail",We(1,1/0)),Je=F(j("take",it,function(t,e){return We(0,0>t?1/0:t,e)})),$e=F(function(t,e){for(var i=e.length-1;i>=0&&t(e[i]);)i-=1;return M(e,i+1,1/0)}),ti=F(j("takeWhile",nt,function(t,e){for(var i=0,n=e.length;n>i&&t(e[i]);)i+=1;return M(e,0,i)})),ei=F(function(t,e){return t(e),e}),ii=F(function(t,e){var i,n=Number(e),r=0;if(0>n||isNaN(n))throw new RangeError("n must be a non-negative number");for(i=new Array(n);n>r;)i[r]=t(r),r+=1;return i}),ni=B(function(t){var e=[];for(var i in t)d(i,t)&&(e[e.length]=[i,t[i]]);return e}),ri=B(function(t){var e=[];for(var i in t)e[e.length]=[i,t[i]];return e}),oi=B(function(t){for(var e=0,i=[];e<t.length;){for(var n=t[e],r=0;r<n.length;)"undefined"==typeof i[r]&&(i[r]=[]),i[r].push(n[r]),r+=1;e+=1}return i}),si=function(){var t="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",e="​",i="function"==typeof String.prototype.trim;return B(i&&!t.trim()&&e.trim()?function(t){return t.trim()}:function(e){var i=new RegExp("^["+t+"]["+t+"]*"),n=new RegExp("["+t+"]["+t+"]*$");return e.replace(i,"").replace(n,"")})}(),ai=F(function(t,i){return e(t.length,function(){try{return t.apply(this,arguments)}catch(e){return i.apply(this,s([e],arguments))}})}),hi=B(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}),li=B(function(t){return function(){return t(M(arguments))}}),ci=B(function(t){return fe(1,t)}),di=F(function(t,e){return yt(t,function(){for(var i,n=1,r=e,o=0;t>=n&&"function"==typeof r;)i=n===t?arguments.length:o+r.length,r=r.apply(this,M(arguments,o,i)),n+=1,o=i;return r})}),ui=F(function(t,e){for(var i=t(e),n=[];i&&i.length;)n[n.length]=i[0],i=t(i[1]);return n}),fi=F(function(t,e){for(var i,n=0,r=e.length,o=[];r>n;)i=e[n],a(t,i,o)||(o[o.length]=i),n+=1;return o}),pi=N(function(t,e,i){return t(i)?i:e(i)}),mi=N(function(t,e,i){for(var n=i;!t(n);)n=e(n);return n}),gi=N(function(t,e,i){return ot(at(e),t,i)}),vi=F(function(t,e){return yt(e.length,function(){for(var i=[],n=0;n<e.length;)i.push(e[n].call(this,arguments[n])),n+=1;return t.apply(this,i.concat(M(arguments,e.length)))})}),Ai=B(function(t){for(var e=Qt(t),i=e.length,n=[],r=0;i>r;)n[r]=t[e[r]],r+=1;return n}),yi=B(function(t){var e,i=[];for(e in t)i[i.length]=t[e];return i}),bi=function(){var t=function(t){return{value:t,map:function(){return this}}};return F(function(e,i){return e(t)(i).value})}(),Ei=N(function(t,e,i){return t(i)?e(i):i}),wi=F(function(t,e){for(var i in t)if(d(i,t)&&!t[i](e[i]))return!1;return!0}),xi=F(function(t,e){return yt(t.length,function(){return e.apply(this,s([t],arguments))})}),_i=F(function(t,e){for(var i,n=0,r=t.length,o=e.length,s=[];r>n;){for(i=0;o>i;)s[s.length]=[t[n],e[i]],i+=1;n+=1}return s}),Ti=F(function(t,e){for(var i=[],n=0,r=Math.min(t.length,e.length);r>n;)i[n]=[t[n],e[n]],n+=1;return i}),Si=F(function(t,e){for(var i=0,n=Math.min(t.length,e.length),r={};n>i;)r[t[i]]=e[i],i+=1;return r}),Ri=N(function(t,e,i){for(var n=[],r=0,o=Math.min(e.length,i.length);o>r;)n[r]=t(e[r],i[r]),r+=1;return n}),Ci=at(!1),ki=at(!0),Mi=function Vr(t,e,i,n){var o=function(r){for(var o=e.length,s=0;o>s;){if(t===e[s])return i[s];s+=1}e[s+1]=t,i[s+1]=r;for(var a in t)r[a]=n?Vr(t[a],e,i,!0):t[a];return r};switch(hi(t)){case"Object":return o({});case"Array":return o([]);case"Date":return new Date(t.valueOf());case"RegExp":return r(t);default:return t}},Hi=function(t){return F(function(i,n){return e(Math.max(0,i.length-n.length),function(){return i.apply(this,t(n,arguments))})})},Pi=function(t,e){return Je(t<e.length?e.length-t:0,e)},Di=function Wr(t,e,n,r){if(Nt(t,e))return!0;if(hi(t)!==hi(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(hi(t)){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===c(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!Nt(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!Nt(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1;break;case"Map":case"Set":if(!Wr(i(t.entries()),i(e.entries()),n,r))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":break;case"ArrayBuffer":break;default:return!1}var o=Qt(t);if(o.length!==Qt(e).length)return!1;for(var s=n.length-1;s>=0;){if(n[s]===t)return r[s]===e;s-=1}for(n.push(t),r.push(e),s=o.length-1;s>=0;){var a=o[s];if(!d(a,e)||!Wr(e[a],t[a],n,r))return!1;s-=1}return n.pop(),r.pop(),!0},Oi=function(t){return function e(i){for(var n,r,o,s=[],a=0,h=i.length;h>a;){if(qt(i[a]))for(n=t?e(i[a]):i[a],o=0,r=n.length;r>o;)s[s.length]=n[o],o+=1;else s[s.length]=i[a];a+=1}return s}},Li=function(){function t(t,e,i){for(var n=0,r=i.length;r>n;){if(e=t["@@transducer/step"](e,i[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return t["@@transducer/result"](e)}function e(t,e,i){for(var n=i.next();!n.done;){if(e=t["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=i.next()}return t["@@transducer/result"](e)}function i(t,e,i){return t["@@transducer/result"](i.reduce(mt(t["@@transducer/step"],t),e))}var n="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(r,o,s){if("function"==typeof r&&(r=D(r)),qt(s))return t(r,o,s);if("function"==typeof s.reduce)return i(r,o,s);if(null!=s[n])return e(r,o,s[n]());if("function"==typeof s.next)return e(r,o,s);throw new TypeError("reduce: list must be array or iterable")}}(),Ii=function(){var t={"@@transducer/init":Array,"@@transducer/step":function(t,e){return t.push(e),t},"@@transducer/result":u},e={"@@transducer/init":String,"@@transducer/step":function(t,e){return t+e},"@@transducer/result":u},i={"@@transducer/init":Object,"@@transducer/step":function(t,e){return L(t,qt(e)?ye(e[0],e[1]):e)},"@@transducer/result":u};return function(n){if(w(n))return n;if(qt(n))return t;if("string"==typeof n)return e;if("object"==typeof n)return i;throw new Error("Cannot create transformer for "+n)}}(),Bi=function(){function t(t,e){this.f=t,this.retained=[],this.xf=e}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.retain(t,e):this.flush(t,e)},t.prototype.flush=function(t,e){return t=Li(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,e)},t.prototype.retain=function(t,e){return this.retained.push(e),t},F(function(e,i){return new t(e,i)})}(),Fi=function(){function t(t,e){this.xf=e,this.f=t,this.inputs={}}return t.prototype["@@transducer/init"]=P.init,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(d(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]),t["@@transducer/reduced"])){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var i=this.f(e);return this.inputs[i]=this.inputs[i]||[i,[]],this.inputs[i][1]=dt(e,this.inputs[i][1]),t},F(function(e,i){return new t(e,i)})}(),Ni=B(function(t){return yt(t.length,function(){var e=0,i=arguments[0],n=arguments[arguments.length-1],r=M(arguments);return r[0]=function(){var t=i.apply(this,s(arguments,[e,n]));return e+=1,t},t.apply(this,r)})}),zi=B(function(t){return fe(2,t)}),ji=B(function(t){return null!=t&&"function"==typeof t.clone?t.clone():Mi(t,[],[],!0)}),Ui=B(function(t){return yt(t.length,t)}),Vi=F(j("drop",Y,function(t,e){return We(Math.max(0,t),1/0,e)})),Wi=F(j("dropLast",q,Pi)),Gi=F(j("dropLastWhile",Bi,U)),Yi=F(function(t,e){return Di(t,e,[],[])}),qi=F(j("filter",Z,function(t,e){return A(e)?Li(function(i,n){return t(e[n])&&(i[n]=e[n]),i},{},Qt(e)):h(t,e)})),Xi=B(Oi(!0)),Qi=B(function(t){return Ui(function(e,i){var n=M(arguments);return n[0]=i,n[1]=e,t.apply(this,n)})}),Zi=F(j("groupBy",Fi,function(t,e){return Li(function(e,i){var n=t(i);return e[n]=dt(i,e[n]||(e[n]=[])),e},{},e)})),Ki=ve(0),Ji=F(function(t,e){return Li(function(e,i){var n=t(i);return e[n]=i,e},{},e)}),$i=We(0,-1),tn=N(function(t,e,i){var n,r;e.length>i.length?(n=e,r=i):(n=i,r=e);for(var o=[],s=0;s<r.length;)a(t,r[s],n)&&(o[o.length]=r[s]),s+=1;return fi(t,o)}),en=N(function(t,e,i){return w(t)?Li(e(t),t["@@transducer/init"](),i):Li(e(Ii(t)),Mi(t,[],[],!1),i)}),nn=B(function(t){for(var e=Qt(t),i=e.length,n=0,r={};i>n;){var o=e[n],s=t[o],a=d(s,r)?r[s]:r[s]=[];a[a.length]=o,n+=1}return r}),rn=B(function(t){for(var e=Qt(t),i=e.length,n=0,r={};i>n;){var o=e[n];r[t[o]]=o,n+=1}return r}),on=B(function(t){return null!=t&&Yi(t,Rt(t))}),sn=ve(-1),an=F(function(t,e){if("function"!=typeof e.lastIndexOf||p(e)){for(var i=e.length-1;i>=0;){if(Yi(e[i],t))return i;i-=1}return-1}return e.lastIndexOf(t)}),hn=F(j("map",et,function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return yt(e.length,function(){return t.call(this,e.apply(this,arguments))});case"[object Object]":return Li(function(i,n){return i[n]=t(e[n]),i},{},Qt(e));default:return x(t,e)}})),ln=F(function(t,e){return Li(function(i,n){return i[n]=t(e[n],n,e),i},{},Qt(e))}),cn=N(function(t,e,i){return he(function(e,i,n){return t(i,n)},e,i)}),dn=Hi(s),un=Hi(Qi(s)),fn=N(function(t,e,i){return Yi(Te(t,i),e)}),pn=F(function(t,e){return hn(Pe(t),e)}),mn=vi(x,[ke,zt]),gn=N(function(t,e,i){return Oe(Yi(e),t,i)}),vn=N(function(t,e,i){return Oe(Yt(t),e,i)}),An=N(Li),yn=z(4,[],function(t,e,i,n){return Li(function(n,r){var o=t(r);return n[o]=e(d(o,n)?n[o]:i,r),n},{},n)}),bn=F(function(t,e){return qi(o(t),e)}),En=F(function(t,e){return ii(at(t),e)}),wn=An(rt,0),xn=F(function(t,e){return Vi(t>=0?e.length-t:0,e)}),_n=yt(4,function(t,e,i,n){return Li(t("function"==typeof e?D(e):e),i,n)}),Tn=N(function(t,e,i){return fi(t,s(e,i))}),Sn=F(function(t,e){return wi(hn(Yi,t),e)}),Rn=function(){var t=function(t){return{"@@transducer/init":P.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,i){var n=t["@@transducer/step"](e,i);return n["@@transducer/reduced"]?l(n):n}}};return function(e){var i=t(e);return{"@@transducer/init":P.init,"@@transducer/result":function(t){return i["@@transducer/result"](t)},"@@transducer/step":function(t,e){return qt(e)?Li(i,t,e):Li(i,t,[e])}}}}(),Cn=function(t,e,i){var n,r;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(n=1/e;i<t.length;){if(r=t[i],0===r&&1/r===n)return i;i+=1}return-1}if(e!==e){for(;i<t.length;){if(r=t[i],"number"==typeof r&&r!==r)return i;i+=1}return-1}return t.indexOf(e,i);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,i);case"object":if(null===e)return t.indexOf(e,i)}for(;i<t.length;){if(Yi(t[i],e))return i;i+=1}return-1},kn=F(function(t,e){return hn(t,Rn(e))}),Mn=B(function(t){return yt(An(re,0,pn("length",t)),function(){for(var e=0,i=t.length;i>e;){if(!t[e].apply(this,arguments))return!1;e+=1}return!0})}),Hn=B(function(t){for(var e=t.length,i=0;e>i;){if(Cn(t,t[i],i+1)>=0)return!1;i+=1}return!0}),Pn=B(function(t){return yt(An(re,0,pn("length",t)),function(){for(var e=0,i=t.length;i>e;){if(t[e].apply(this,arguments))return!0;e+=1}return!1})}),Dn=F(function(t,e){return"function"==typeof t.ap?t.ap(e):"function"==typeof t?yt(Math.max(t.length,e.length),function(){return t.apply(this,arguments)(e.apply(this,arguments))}):Li(function(t,i){return s(t,hn(i,e))},[],t)}),On=B(function Gr(t){return t=hn(function(t){return"function"==typeof t?t:Gr(t)},t),yt(An(re,0,pn("length",Ai(t))),function(){var e=arguments;return hn(function(t){return ut(t,e)},t)})}),Ln=Ui(function(t){return t.apply(this,M(arguments,1))}),In=F(j("chain",kn,function(t,e){return"function"==typeof e?function(){return e.call(this,t.apply(this,arguments)).apply(this,arguments)}:Oi(!1)(hn(t,e))})),Bn=B(function(t){var i=An(re,0,hn(function(t){return t[0].length},t));return e(i,function(){for(var e=0;e<t.length;){if(t[e][0].apply(this,arguments))return t[e][1].apply(this,arguments);e+=1}})}),Fn=F(function(t,e){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new e}:Ui(fe(t,function(t,i,n,r,o,s,a,h,l,c){switch(arguments.length){case 1:return new e(t);case 2:return new e(t,i);case 3:return new e(t,i,n);case 4:return new e(t,i,n,r);case 5:return new e(t,i,n,r,o);case 6:return new e(t,i,n,r,o,s);case 7:return new e(t,i,n,r,o,s,a);case 8:return new e(t,i,n,r,o,s,a,h);case 9:return new e(t,i,n,r,o,s,a,h,l);case 10:return new e(t,i,n,r,o,s,a,h,l,c)}}))}),Nn=F(function(t,e){return yt(An(re,0,pn("length",e)),function(){var i=arguments,n=this;return t.apply(n,x(function(t){return t.apply(n,i)},e))})}),zn=F(j("dropRepeatsWith",X,function(t,e){var i=[],n=1,r=e.length;if(0!==r)for(i[0]=e[0];r>n;)t(sn(i),e[n])||(i[i.length]=e[n]),n+=1;return i})),jn=N(function(t,e,i){return Yi(t(e),t(i))}),Un=N(function(t,e,i){return Yi(e[t],i[t])}),Vn=F(function(t,e){return"function"!=typeof e.indexOf||p(e)?Cn(e,t,0):e.indexOf(t)}),Wn=B(function(t){return Nn(n,t)}),Gn=F(function(t,e){return function(i){return function(n){return hn(function(t){return e(t,n)},i(t(n)))}}}),Yn=B(function(t){return Gn(ve(t),gi(t))}),qn=B(function(t){return Gn(Te(t),pt(t))}),Xn=B(function(t){return Gn(Pe(t),ft(t))}),Qn=F(function(t,e){var i=yt(t,e);return yt(t,function(){return Li(Dn,hn(i,arguments[0]),M(arguments,1))})}),Zn=B(function(t){return wn(t)/t.length}),Kn=B(function(t){var e=t.length;if(0===e)return NaN;var i=2-e%2,n=(e-i)/2;return Zn(M(t).sort(function(t,e){return e>t?-1:t>e?1:0}).slice(n,n+i))}),Jn=Wn([qi,bn]),$n=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return e(arguments[0].length,An(S,arguments[0],Ke(arguments)))},tr=function(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return e(arguments[0].length,An(R,arguments[0],Ke(arguments)))},er=An(ue,1),ir=F(function(t,e){return"function"==typeof e.sequence?e.sequence(t):Be(function(t,e){return Dn(hn(He,e),t)},t([]),e)}),nr=N(function(t,e,i){return ir(t,hn(e,i))}),rr=In(u),or=function(t,e){return Cn(e,t,0)>=0},sr=function Yr(t,e){var i=function(i){var n=e.concat([t]);return or(i,n)?"<Circular>":Yr(i,n)},n=function(t,e){return x(function(e){return C(e)+": "+i(t[e])},e.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+x(i,t).join(", ")+"))";case"[object Array]":return"["+x(i,t).concat(n(t,bn(function(t){return/^\d+$/.test(t)},Qt(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+i(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?i(NaN):C(H(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+i(t.valueOf())+")":1/t===-(1/0)?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+i(t.valueOf())+")":C(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var r=t.toString();if("[object Object]"!==r)return r}return"{"+n(t,Qt(t)).join(", ")+"}"}},ar=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return $n.apply(this,je(arguments))},hr=function(){return ar.apply(this,He(zt,hn(In,arguments)))},lr=function(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return tr.apply(this,je(arguments))},cr=B(function(t){return Fn(t.length,t)}),dr=F(or),ur=F(function(t,e){for(var i=[],n=0,r=t.length;r>n;)or(t[n],e)||or(t[n],i)||(i[i.length]=t[n]),n+=1;return i}),fr=B(j("dropRepeats",X(Yi),zn(Yi))),pr=B(function(t){return Qn(t.length,t)}),mr=F(function(t,e){var i={};for(var n in e)or(n,t)||(i[n]=e[n]);return i}),gr=function(){return hr.apply(this,je(arguments))},vr=B(function(t){return sr(t,[])}),Ar=F(function(t,e){return bn(Qi(or)(t),e)}),yr=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}function e(t,e,i){var n,r,o=typeof t;switch(o){case"string":case"number":return 0!==t||i._items["-0"]||1/t!==-(1/0)?null!==i._nativeSet?e?(n=i._nativeSet.size,i._nativeSet.add(t),r=i._nativeSet.size,r>n):i._nativeSet.has(t):o in i._items?t in i._items[o]?!e:(e&&(i._items[o][t]=!0),e):(e&&(i._items[o]={},i._items[o][t]=!0),e):(e&&(i._items["-0"]=!0),e);case"boolean":if(o in i._items){var s=t?1:0;return i._items[o][s]?!e:(e&&(i._items[o][s]=!0),e)}return e&&(i._items[o]=t?[!1,!0]:[!0,!1]),e;case"function":return null!==i._nativeSet?e?(n=i._nativeSet.size,i._nativeSet.add(t),r=i._nativeSet.size,r>n):i._nativeSet.has(t):o in i._items?or(t,i._items[o])?!e:(e&&i._items[o].push(t),e):(e&&(i._items[o]=[t]),e);case"undefined":return i._items[o]?!e:(e&&(i._items[o]=!0),e);case"object":if(null===t)return i._items["null"]?!e:(e&&(i._items["null"]=!0),e);default:return o=Object.prototype.toString.call(t),o in i._items?or(t,i._items[o])?!e:(e&&i._items[o].push(t),e):(e&&(i._items[o]=[t]),e)}}return t.prototype.add=function(t){return e(t,!0,this)},t.prototype.has=function(t){return e(t,!1,this)},t}(),br=F(function(t,e){return m(t)?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:pr(ht)(t,e)}),Er=pr(ge),wr=F(function(t,e){return m(t)?function(){return t.apply(this,arguments)||e.apply(this,arguments)}:pr(we)(t,e)}),xr=F(function(t,e){return yt(t+1,function(){var i=arguments[t];if(null!=i&&Yt(Function,i[e]))return i[e].apply(i,M(arguments,0,t));throw new TypeError(vr(i)+' does not have a method named "'+e+'"')})}),_r=xr(1,"join"),Tr=B(function(t){var i={};return e(t.length,function(){var e=vr(arguments);return d(e,i)||(i[e]=t.apply(this,arguments)),i[e]})}),Sr=xr(1,"split"),Rr=F(function(t,e){if(!b(t))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+vr(t));return r(t).test(e)}),Cr=xr(0,"toLowerCase"),kr=xr(0,"toUpperCase"),Mr=F(function(t,e){for(var i,n,r=new yr,o=[],s=0;s<e.length;)n=e[s],i=t(n),r.add(i)&&o.push(n),s+=1;return o}),Hr=Qi(xr(1,"concat")),Pr=F(function(t,e){return Hr(ur(t,e),ur(e,t))}),Dr=N(function(t,e,i){return Hr(wt(t,e,i),wt(t,i,e))}),Or=Mr(zt),Lr=F(function(t,e){var i,n;return t.length>e.length?(i=t,n=e):(i=e,n=t),Or(h(Qi(or)(i),n))}),Ir=F(ar(Or,s)),Br={F:Ci,T:ki,__:t,add:rt,addIndex:Ni,adjust:ot,all:st,allPass:Mn,allUniq:Hn,always:at,and:ht,any:lt,anyPass:Pn,ap:Dn,aperture:ct,append:dt,apply:ut,applySpec:On,assoc:ft,assocPath:pt,binary:zi,bind:mt,both:br,call:Ln,chain:In,clamp:gt,clone:ji,comparator:vt,complement:Er,compose:ar,composeK:hr,composeP:lr,concat:Hr,cond:Bn,construct:cr,constructN:Fn,contains:dr,converge:Nn,countBy:At,curry:Ui,curryN:yt,dec:bt,defaultTo:Et,difference:ur,differenceWith:wt,dissoc:xt,dissocPath:_t,divide:Tt,drop:Vi,dropLast:Wi,dropLastWhile:Gi,dropRepeats:fr,dropRepeatsWith:zn,dropWhile:St,either:wr,empty:Rt,eqBy:jn,eqProps:Un,equals:Yi,evolve:Ct,filter:qi,find:kt,findIndex:Mt,findLast:Ht,findLastIndex:Pt,flatten:Xi,flip:Qi,forEach:Dt,fromPairs:Ot,groupBy:Zi,gt:Lt,gte:It,has:Bt,hasIn:Ft,head:Ki,identical:Nt,identity:zt,ifElse:jt,inc:Ut,indexBy:Ji,indexOf:Vn,init:$i,insert:Vt,insertAll:Wt,intersection:Lr,intersectionWith:tn,intersperse:Gt,into:en,invert:nn,invertObj:rn,invoker:xr,is:Yt,isArrayLike:qt,isEmpty:on,isNil:Xt,join:_r,juxt:Wn,keys:Qt,keysIn:Zt,last:sn,lastIndexOf:an,length:Kt,lens:Gn,lensIndex:Yn,lensPath:qn,lensProp:Xn,lift:pr,liftN:Qn,lt:Jt,lte:$t,map:hn,mapAccum:te,mapAccumRight:ee,mapObjIndexed:ln,match:ie,mathMod:ne,max:re,maxBy:oe,mean:Zn,median:Kn,memoize:Tr,merge:se,mergeAll:ae,mergeWith:cn,mergeWithKey:he,min:le,minBy:ce,modulo:de,multiply:ue,nAry:fe,negate:pe,none:me,not:ge,nth:ve,nthArg:Ae,objOf:ye,of:be,omit:mr,once:Ee,or:we,over:xe,pair:_e,partial:dn,partialRight:un,partition:Jn,path:Te,pathEq:fn,pathOr:Se,pathSatisfies:Re,pick:Ce,pickAll:ke,pickBy:Me,pipe:$n,pipeK:gr,pipeP:tr,pluck:pn,prepend:He,product:er,project:mn,prop:Pe,propEq:gn,propIs:vn,propOr:De,propSatisfies:Oe,props:Le,range:Ie,reduce:An,reduceBy:yn,reduceRight:Be,reduced:Fe,reject:bn,remove:Ne,repeat:En,replace:ze,reverse:je,scan:Ue,sequence:ir,set:Ve,slice:We,sort:Ge,sortBy:Ye,split:Sr,splitAt:qe,splitEvery:Xe,splitWhen:Qe,subtract:Ze,sum:wn,symmetricDifference:Pr,symmetricDifferenceWith:Dr,tail:Ke,take:Je,takeLast:xn,takeLastWhile:$e,takeWhile:ti,tap:ei,test:Rr,times:ii,toLower:Cr,toPairs:ni,toPairsIn:ri,toString:vr,toUpper:kr,transduce:_n,transpose:oi,traverse:nr,trim:si,tryCatch:ai,type:hi,unapply:li,unary:ci,uncurryN:di,unfold:ui,union:Ir,unionWith:Tn,uniq:Or,uniqBy:Mr,uniqWith:fi,unless:pi,unnest:rr,until:mi,update:gi,useWith:vi,values:Ai,valuesIn:yi,view:bi,when:Ei,where:wi,whereEq:Sn,without:Ar,wrap:xi,xprod:_i,zip:Ti,zipObj:Si,zipWith:Ri};"object"==typeof exports?module.exports=Br:"function"==typeof define&&define.amd?define(function(){return Br}):this.R=Br}.call(this),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var e;return function(){if(!e||!e.requirejs){e?i=e:e={};var t,i,n;!function(e){function r(t,e){return b.call(t,e)}function o(t,e){var i,n,r,o,s,a,h,l,c,d,u,f=e&&e.split("/"),p=A.map,m=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),s=t.length-1,A.nodeIdCompat&&w.test(t[s])&&(t[s]=t[s].replace(w,"")),t=f.slice(0,f.length-1).concat(t),c=0;c<t.length;c+=1)if(u=t[c],"."===u)t.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&p){for(i=t.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),f)for(d=f.length;d>0;d-=1)if(r=p[f.slice(0,d).join("/")],r&&(r=r[n])){o=r,a=c;break}if(o)break;!h&&m&&m[n]&&(h=m[n],l=c)}!o&&h&&(o=h,a=l),o&&(i.splice(0,a,o),t=i.join("/"))}return t}function s(t,i){return function(){var n=E.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),f.apply(e,n.concat([t,i]))}}function a(t){return function(e){return o(e,t)}}function h(t){return function(e){g[t]=e}}function l(t){if(r(v,t)){var i=v[t];delete v[t],y[t]=!0,u.apply(e,i)}if(!r(g,t)&&!r(y,t))throw new Error("No "+t);return g[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function d(t){return function(){return A&&A.config&&A.config[t]||{}}}var u,f,p,m,g={},v={},A={},y={},b=Object.prototype.hasOwnProperty,E=[].slice,w=/\.js$/;p=function(t,e){var i,n=c(t),r=n[0];return t=n[1],r&&(r=o(r,e),i=l(r)),r?t=i&&i.normalize?i.normalize(t,a(e)):o(t,e):(t=o(t,e),n=c(t),r=n[0],t=n[1],r&&(i=l(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:i}},m={require:function(t){return s(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:d(t)}}},u=function(t,i,n,o){var a,c,d,u,f,A,b=[],E=typeof n;if(o=o||t,"undefined"===E||"function"===E){for(i=!i.length&&n.length?["require","exports","module"]:i,f=0;f<i.length;f+=1)if(u=p(i[f],o),c=u.f,"require"===c)b[f]=m.require(t);else if("exports"===c)b[f]=m.exports(t),A=!0;else if("module"===c)a=b[f]=m.module(t);else if(r(g,c)||r(v,c)||r(y,c))b[f]=l(c);else{if(!u.p)throw new Error(t+" missing "+c);u.p.load(u.n,s(o,!0),h(c),{}),b[f]=g[c]}d=n?n.apply(g[t],b):void 0,t&&(a&&a.exports!==e&&a.exports!==g[t]?g[t]=a.exports:d===e&&A||(g[t]=d))}else t&&(g[t]=n)},t=i=f=function(t,i,n,r,o){if("string"==typeof t)return m[t]?m[t](i):l(p(t,i).f);if(!t.splice){if(A=t,A.deps&&f(A.deps,A.callback),!i)return;i.splice?(t=i,i=n,n=null):t=e}return i=i||function(){},"function"==typeof n&&(n=r,r=o),r?u(e,t,i,n):setTimeout(function(){u(e,t,i,n)},4),f},f.config=function(t){return f(t)},t._defined=g,n=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),r(g,t)||r(v,t)||(v[t]=[t,e,i])},n.amd={jQuery:!0}}(),e.requirejs=t,e.require=i,e.define=n}}(),e.define("almond",function(){}),e.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(t){function e(t){var e=t.prototype,i=[];for(var n in e){var r=e[n];"function"==typeof r&&"constructor"!==n&&i.push(n)}return i}var i={};i.Extend=function(t,e){function i(){this.constructor=t}var n={}.hasOwnProperty;for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},i.Decorate=function(t,i){function n(){var e=Array.prototype.unshift,n=i.prototype.constructor.length,r=t.prototype.constructor;n>0&&(e.call(arguments,t.prototype.constructor),r=i.prototype.constructor),r.apply(this,arguments)}function r(){this.constructor=n}var o=e(i),s=e(t);i.displayName=t.displayName,n.prototype=new r;for(var a=0;a<s.length;a++){var h=s[a];n.prototype[h]=t.prototype[h]}for(var l=(function(t){var e=function(){};t in n.prototype&&(e=n.prototype[t]);var r=i.prototype[t];return function(){var t=Array.prototype.unshift;return t.call(arguments,e),r.apply(this,arguments)}}),c=0;c<o.length;c++){var d=o[c];n.prototype[d]=l(d)}return n};var n=function(){this.listeners={}};return n.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},n.prototype.trigger=function(t){var e=Array.prototype.slice;this.listeners=this.listeners||{},t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(t,e){for(var i=0,n=t.length;n>i;i++)t[i].apply(this,e)},i.Observable=n,i.generateChars=function(t){for(var e="",i=0;t>i;i++){var n=Math.floor(36*Math.random());e+=n.toString(36)}return e},i.bind=function(t,e){return function(){t.apply(e,arguments)}},i._convertData=function(t){for(var e in t){var i=e.split("-"),n=t;if(1!==i.length){for(var r=0;r<i.length;r++){var o=i[r];o=o.substring(0,1).toLowerCase()+o.substring(1),o in n||(n[o]={}),r==i.length-1&&(n[o]=t[e]),n=n[o]}delete t[e]}}return t},i.hasScroll=function(e,i){var n=t(i),r=i.style.overflowX,o=i.style.overflowY;return r!==o||"hidden"!==o&&"visible"!==o?"scroll"===r||"scroll"===o?!0:n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth:!1},i.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},i.appendMany=function(e,i){if("1.7"===t.fn.jquery.substr(0,3)){var n=t();t.map(i,function(t){n=n.add(t)}),i=n}e.append(i)},i}),e.define("select2/results",["jquery","./utils"],function(t,e){function i(t,e,n){this.$element=t,this.data=n,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=t('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(e.message);n.append(i(r(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(t){this.hideLoading();var e=[];if(null==t.results||0===t.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i],r=this.option(n);e.push(r)}this.$results.append(e)},i.prototype.position=function(t,e){var i=e.find(".select2-results");i.append(t)},i.prototype.sort=function(t){var e=this.options.get("sorter");return e(t)},i.prototype.setClasses=function(){var e=this;this.data.current(function(i){var n=t.map(i,function(t){return t.id.toString()}),r=e.$results.find(".select2-results__option[aria-selected]");r.each(function(){var e=t(this),i=t.data(this,"data"),r=""+i.id;null!=i.element&&i.element.selected||null==i.element&&t.inArray(r,n)>-1?e.attr("aria-selected","true"):e.attr("aria-selected","false")});var o=r.filter("[aria-selected=true]");o.length>0?o.first().trigger("mouseenter"):r.first().trigger("mouseenter")})},i.prototype.showLoading=function(t){this.hideLoading();var e=this.options.get("translations").get("searching"),i={disabled:!0,loading:!0,text:e(t)},n=this.option(i);n.className+=" loading-results",this.$results.prepend(n)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(e){var i=document.createElement("li");i.className="select2-results__option";var n={role:"treeitem","aria-selected":"false"};e.disabled&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==e.id&&delete n["aria-selected"],null!=e._resultId&&(i.id=e._resultId),e.title&&(i.title=e.title),e.children&&(n.role="group",n["aria-label"]=e.text,delete n["aria-selected"]);for(var r in n){var o=n[r];i.setAttribute(r,o)}if(e.children){var s=t(i),a=document.createElement("strong");a.className="select2-results__group",t(a),this.template(e,a);for(var h=[],l=0;l<e.children.length;l++){var c=e.children[l],d=this.option(c);h.push(d)}var u=t("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});u.append(h),s.append(a),s.append(u)}else this.template(e,i);return t.data(i,"data",e),i},i.prototype.bind=function(e,i){var n=this,r=e.id+"-results";this.$results.attr("id",r),e.on("results:all",function(t){n.clear(),n.append(t.data),e.isOpen()&&n.setClasses()}),e.on("results:append",function(t){n.append(t.data),e.isOpen()&&n.setClasses()}),e.on("query",function(t){n.hideMessages(),n.showLoading(t)}),e.on("select",function(){e.isOpen()&&n.setClasses()}),e.on("unselect",function(){e.isOpen()&&n.setClasses()}),e.on("open",function(){n.$results.attr("aria-expanded","true"),n.$results.attr("aria-hidden","false"),n.setClasses(),n.ensureHighlightVisible();
}),e.on("close",function(){n.$results.attr("aria-expanded","false"),n.$results.attr("aria-hidden","true"),n.$results.removeAttr("aria-activedescendant")}),e.on("results:toggle",function(){var t=n.getHighlightedResults();0!==t.length&&t.trigger("mouseup")}),e.on("results:select",function(){var t=n.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?n.trigger("close",{}):n.trigger("select",{data:e})}}),e.on("results:previous",function(){var t=n.getHighlightedResults(),e=n.$results.find("[aria-selected]"),i=e.index(t);if(0!==i){var r=i-1;0===t.length&&(r=0);var o=e.eq(r);o.trigger("mouseenter");var s=n.$results.offset().top,a=o.offset().top,h=n.$results.scrollTop()+(a-s);0===r?n.$results.scrollTop(0):0>a-s&&n.$results.scrollTop(h)}}),e.on("results:next",function(){var t=n.getHighlightedResults(),e=n.$results.find("[aria-selected]"),i=e.index(t),r=i+1;if(!(r>=e.length)){var o=e.eq(r);o.trigger("mouseenter");var s=n.$results.offset().top+n.$results.outerHeight(!1),a=o.offset().top+o.outerHeight(!1),h=n.$results.scrollTop()+a-s;0===r?n.$results.scrollTop(0):a>s&&n.$results.scrollTop(h)}}),e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")}),e.on("results:message",function(t){n.displayMessage(t)}),t.fn.mousewheel&&this.$results.on("mousewheel",function(t){var e=n.$results.scrollTop(),i=n.$results.get(0).scrollHeight-e+t.deltaY,r=t.deltaY>0&&e-t.deltaY<=0,o=t.deltaY<0&&i<=n.$results.height();r?(n.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):o&&(n.$results.scrollTop(n.$results.get(0).scrollHeight-n.$results.height()),t.preventDefault(),t.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var i=t(this),r=i.data("data");return"true"===i.attr("aria-selected")?void(n.options.get("multiple")?n.trigger("unselect",{originalEvent:e,data:r}):n.trigger("close",{})):void n.trigger("select",{originalEvent:e,data:r})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var i=t(this).data("data");n.getHighlightedResults().removeClass("select2-results__option--highlighted"),n.trigger("results:focus",{data:i,element:t(this)})})},i.prototype.getHighlightedResults=function(){var t=this.$results.find(".select2-results__option--highlighted");return t},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]"),i=e.index(t),n=this.$results.offset().top,r=t.offset().top,o=this.$results.scrollTop()+(r-n),s=r-n;o-=2*t.outerHeight(!1),2>=i?this.$results.scrollTop(0):(s>this.$results.outerHeight()||0>s)&&this.$results.scrollTop(o)}},i.prototype.template=function(e,i){var n=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),o=n(e,i);null==o?i.style.display="none":"string"==typeof o?i.innerHTML=r(o):t(i).append(o)},i}),e.define("select2/keys",[],function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return t}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},n.prototype.bind=function(t,e){var n=this,r=(t.id+"-container",t.id+"-results");this.container=t,this.$selection.on("focus",function(t){n.trigger("focus",t)}),this.$selection.on("blur",function(t){n._handleBlur(t)}),this.$selection.on("keydown",function(t){n.trigger("keypress",t),t.which===i.SPACE&&t.preventDefault()}),t.on("results:focus",function(t){n.$selection.attr("aria-activedescendant",t.data._resultId)}),t.on("selection:update",function(t){n.update(t.data)}),t.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",r),n._attachCloseHandler(t)}),t.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.focus(),n._detachCloseHandler(t)}),t.on("enable",function(){n.$selection.attr("tabindex",n._tabindex)}),t.on("disable",function(){n.$selection.attr("tabindex","-1")})},n.prototype._handleBlur=function(e){var i=this;window.setTimeout(function(){document.activeElement==i.$selection[0]||t.contains(i.$selection[0],document.activeElement)||i.trigger("blur",e)},1)},n.prototype._attachCloseHandler=function(e){t(document.body).on("mousedown.select2."+e.id,function(e){var i=t(e.target),n=i.closest(".select2"),r=t(".select2.select2-container--open");r.each(function(){var e=t(this);if(this!=n[0]){var i=e.data("element");i.select2("close")}})})},n.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},n.prototype.position=function(t,e){var i=e.find(".selection");i.append(t)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},n}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,i,n){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,e),r.prototype.render=function(){var t=r.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},r.prototype.bind=function(t,e){var i=this;r.__super__.bind.apply(this,arguments);var n=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",function(t){1===t.which&&i.trigger("toggle",{originalEvent:t})}),this.$selection.on("focus",function(t){}),this.$selection.on("blur",function(t){}),t.on("selection:update",function(t){i.update(t.data)})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(t,e){var i=this.options.get("templateSelection"),n=this.options.get("escapeMarkup");return n(i(t,e))},r.prototype.selectionContainer=function(){return t("<span></span>")},r.prototype.update=function(t){if(0===t.length)return void this.clear();var e=t[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(e,i);i.empty().append(n),i.prop("title",e.title||e.text)},r}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(t,e,i){function n(t,e){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},n.prototype.bind=function(e,i){var r=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",function(t){r.trigger("toggle",{originalEvent:t})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){if(!r.options.get("disabled")){var i=t(this),n=i.parent(),o=n.data("data");r.trigger("unselect",{originalEvent:e,data:o})}})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(t,e){var i=this.options.get("templateSelection"),n=this.options.get("escapeMarkup");return n(i(t,e))},n.prototype.selectionContainer=function(){var e=t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return e},n.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],n=0;n<t.length;n++){var r=t[n],o=this.selectionContainer(),s=this.display(r,o);o.append(s),o.prop("title",r.title||r.text),o.data("data",r),e.push(o)}var a=this.$selection.find(".select2-selection__rendered");i.appendMany(a,e)}},n}),e.define("select2/selection/placeholder",["../utils"],function(t){function e(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i)}return e.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},e.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();return i.html(this.display(e)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},e.prototype.update=function(t,e){var i=1==e.length&&e[0].id!=this.placeholder.id,n=e.length>1;if(n||i)return t.call(this,e);this.clear();var r=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(r)},e}),e.define("select2/selection/allowClear",["jquery","../keys"],function(t,e){function i(){}return i.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(t){n._handleClear(t)}),e.on("keypress",function(t){n._handleKeyboardClear(t,e)})},i.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){e.stopPropagation();for(var n=i.data("data"),r=0;r<n.length;r++){var o={data:n[r]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},i.prototype._handleKeyboardClear=function(t,i,n){n.isOpen()||(i.which==e.DELETE||i.which==e.BACKSPACE)&&this._handleClear(i)},i.prototype.update=function(e,i){if(e.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var n=t('<span class="select2-selection__clear">&times;</span>');n.data("data",i),this.$selection.find(".select2-selection__rendered").prepend(n)}},i}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(t,e,i){function n(t,e,i){t.call(this,e,i)}return n.prototype.render=function(e){var i=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=i,this.$search=i.find("input");var n=e.call(this);return this._transferTabIndex(),n},n.prototype.bind=function(t,e,n){var r=this;t.call(this,e,n),e.on("open",function(){r.$search.trigger("focus")}),e.on("close",function(){r.$search.val(""),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),e.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),e.on("disable",function(){r.$search.prop("disabled",!0)}),e.on("focus",function(t){r.$search.trigger("focus")}),e.on("results:focus",function(t){r.$search.attr("aria-activedescendant",t.id)}),this.$selection.on("focusin",".select2-search--inline",function(t){r.trigger("focus",t)}),this.$selection.on("focusout",".select2-search--inline",function(t){r._handleBlur(t)}),this.$selection.on("keydown",".select2-search--inline",function(t){t.stopPropagation(),r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented();var e=t.which;if(e===i.BACKSPACE&&""===r.$search.val()){var n=r.$searchContainer.prev(".select2-selection__choice");if(n.length>0){var o=n.data("data");r.searchRemoveChoice(o),t.preventDefault()}}});var o=document.documentMode,s=o&&11>=o;this.$selection.on("input.searchcheck",".select2-search--inline",function(t){return s?void r.$selection.off("input.search input.searchcheck"):void r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(t){if(s&&"input"===t.type)return void r.$selection.off("input.search input.searchcheck");var e=t.which;e!=i.SHIFT&&e!=i.CTRL&&e!=i.ALT&&e!=i.TAB&&r.handleSearch(t)})},n.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},n.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},n.prototype.update=function(t,e){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.focus()},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";if(""!==this.$search.attr("placeholder"))t=this.$selection.find(".select2-selection__rendered").innerWidth();else{var e=this.$search.val().length+1;t=.75*e+"em"}this.$search.css("width",t)},n}),e.define("select2/selection/eventRelay",["jquery"],function(t){function e(){}return e.prototype.bind=function(e,i,n){var r=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],s=["opening","closing","selecting","unselecting"];e.call(this,i,n),i.on("*",function(e,i){if(-1!==t.inArray(e,o)){i=i||{};var n=t.Event("select2:"+e,{params:i});r.$element.trigger(n),-1!==t.inArray(e,s)&&(i.prevented=n.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,e){function i(t){this.dict=t||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(t){return this.dict[t]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(t){if(!(t in i._cache)){var n=e(t);i._cache[t]=n}return new i(i._cache[t])},i}),e.define("select2/diacritics",[],function(){var t={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};return t}),e.define("select2/data/base",["../utils"],function(t){function e(t,i){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,i){var n=e.id+"-result-";return n+=t.generateChars(4),n+=null!=i.id?"-"+i.id.toString():"-"+t.generateChars(4)},e}),e.define("select2/data/select",["./base","../utils","jquery"],function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,t),n.prototype.current=function(t){var e=[],n=this;this.$element.find(":selected").each(function(){var t=i(this),r=n.item(t);e.push(r)}),t(e)},n.prototype.select=function(t){var e=this;if(t.selected=!0,i(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(n){var r=[];t=[t],t.push.apply(t,n);for(var o=0;o<t.length;o++){var s=t[o].id;-1===i.inArray(s,r)&&r.push(s)}e.$element.val(r),e.$element.trigger("change")});else{var n=t.id;this.$element.val(n),this.$element.trigger("change")}},n.prototype.unselect=function(t){var e=this;return this.$element.prop("multiple")?(t.selected=!1,i(t.element).is("option")?(t.element.selected=!1,void this.$element.trigger("change")):void this.current(function(n){for(var r=[],o=0;o<n.length;o++){var s=n[o].id;s!==t.id&&-1===i.inArray(s,r)&&r.push(s)}e.$element.val(r),e.$element.trigger("change")})):void 0},n.prototype.bind=function(t,e){var i=this;this.container=t,t.on("select",function(t){i.select(t.data)}),t.on("unselect",function(t){i.unselect(t.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})},n.prototype.query=function(t,e){var n=[],r=this,o=this.$element.children();o.each(function(){var e=i(this);if(e.is("option")||e.is("optgroup")){var o=r.item(e),s=r.matches(t,o);null!==s&&n.push(s)}}),e({results:n})},n.prototype.addOptions=function(t){e.appendMany(this.$element,t)},n.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup"),e.label=t.text):(e=document.createElement("option"),void 0!==e.textContent?e.textContent=t.text:e.innerText=t.text),t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var n=i(e),r=this._normalizeItem(t);return r.element=e,i.data(e,"data",r),n},n.prototype.item=function(t){var e={};if(e=i.data(t[0],"data"),null!=e)return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var n=t.children("option"),r=[],o=0;o<n.length;o++){var s=i(n[o]),a=this.item(s);r.push(a)}e.children=r}return e=this._normalizeItem(e),e.element=t[0],i.data(t[0],"data",e),e},n.prototype._normalizeItem=function(t){i.isPlainObject(t)||(t={id:t,text:t}),t=i.extend({},{text:""},t);var e={selected:!1,disabled:!1};return null!=t.id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),i.extend({},e,t)},n.prototype.matches=function(t,e){var i=this.options.get("matcher");return i(t,e)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(t,e,i){function n(t,e){var i=e.get("data")||[];n.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(i))}return e.Extend(n,t),n.prototype.select=function(t){var e=this.$element.find("option").filter(function(e,i){return i.value==t.id.toString()});0===e.length&&(e=this.option(t),this.addOptions(e)),n.__super__.select.call(this,t)},n.prototype.convertToOptions=function(t){function n(t){return function(){return i(this).val()==t.id}}for(var r=this,o=this.$element.find("option"),s=o.map(function(){return r.item(i(this)).id}).get(),a=[],h=0;h<t.length;h++){var l=this._normalizeItem(t[h]);if(i.inArray(l.id,s)>=0){var c=o.filter(n(l)),d=this.item(c),u=i.extend(!0,{},l,d),f=this.option(u);c.replaceWith(f)}else{var p=this.option(l);if(l.children){var m=this.convertToOptions(l.children);e.appendMany(p,m)}a.push(p)}}return a},n}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(t,e,i){function n(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,t,e)}return e.Extend(n,t),n.prototype._applyDefaults=function(t){var e={data:function(t){return i.extend({},t,{q:t.term})},transport:function(t,e,n){var r=i.ajax(t);return r.then(e),r.fail(n),r}};return i.extend({},e,t,!0)},n.prototype.processResults=function(t){return t},n.prototype.query=function(t,e){function n(){var n=o.transport(o,function(n){var o=r.processResults(n,t);r.options.get("debug")&&window.console&&console.error&&(o&&o.results&&i.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(o)},function(){r.trigger("results:message",{message:"errorLoading"})});r._request=n}var r=this;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof o.url&&(o.url=o.url.call(this.$element,t)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,t)),this.ajaxOptions.delay&&""!==t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(n,this.ajaxOptions.delay)):n()},n}),e.define("select2/data/tags",["jquery"],function(t){function e(e,i,n){var r=n.get("tags"),o=n.get("createTag");void 0!==o&&(this.createTag=o);var s=n.get("insertTag");if(void 0!==s&&(this.insertTag=s),e.call(this,i,n),t.isArray(r))for(var a=0;a<r.length;a++){var h=r[a],l=this._normalizeItem(h),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(t,e,i){function n(t,o){for(var s=t.results,a=0;a<s.length;a++){var h=s[a],l=null!=h.children&&!n({results:h.children},!0),c=h.text===e.term;if(c||l)return o?!1:(t.data=s,void i(t))}if(o)return!0;var d=r.createTag(e);if(null!=d){var u=r.option(d);u.attr("data-select2-tag",!0),r.addOptions([u]),r.insertTag(s,d)}t.results=s,i(t)}var r=this;return this._removeOldTags(),null==e.term||null!=e.page?void t.call(this,e,i):void t.call(this,e,n)},e.prototype.createTag=function(e,i){var n=t.trim(i.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,i){e.unshift(i)},e.prototype._removeOldTags=function(e){var i=(this._lastTag,this.$element.find("option[data-select2-tag]"));i.each(function(){this.selected||t(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(t){function e(t,e,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),t.call(this,e,i)}return e.prototype.bind=function(t,e,i){t.call(this,e,i),this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(t,e,i){function n(t){r.trigger("select",{data:t})}var r=this;e.term=e.term||"";var o=this.tokenizer(e,this.options,n);o.term!==e.term&&(this.$search.length&&(this.$search.val(o.term),this.$search.focus()),e.term=o.term),t.call(this,e,i)},e.prototype.tokenizer=function(e,i,n,r){for(var o=n.get("tokenSeparators")||[],s=i.term,a=0,h=this.createTag||function(t){return{id:t.term,text:t.term}};a<s.length;){var l=s[a];if(-1!==t.inArray(l,o)){var c=s.substr(0,a),d=t.extend({},i,{term:c}),u=h(d);null!=u?(r(u),s=s.substr(a+1)||"",a=0):a++}else a++}return{term:s}},e}),e.define("select2/data/minimumInputLength",[],function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){return e.term=e.term||"",e.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):void t.call(this,e,i)},t}),e.define("select2/data/maximumInputLength",[],function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){return e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):void t.call(this,e,i)},t}),e.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){var n=this;this.current(function(r){var o=null!=r?r.length:0;return n.maximumSelectionLength>0&&o>=n.maximumSelectionLength?void n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):void t.call(n,e,i)})},t}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},i.prototype.bind=function(){},i.prototype.position=function(t,e){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),e.define("select2/dropdown/search",["jquery","../utils"],function(t,e){function i(){}return i.prototype.render=function(e){var i=e.call(this),n=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),i.prepend(n),i},i.prototype.bind=function(e,i,n){var r=this;e.call(this,i,n),this.$search.on("keydown",function(t){r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented()}),this.$search.on("input",function(e){t(this).off("keyup")}),this.$search.on("keyup input",function(t){r.handleSearch(t)}),i.on("open",function(){r.$search.attr("tabindex",0),r.$search.focus(),window.setTimeout(function(){r.$search.focus()},0)}),i.on("close",function(){r.$search.attr("tabindex",-1),r.$search.val("")}),i.on("results:all",function(t){if(null==t.query.term||""===t.query.term){var e=r.showSearch(t);e?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide")}})},i.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.showSearch=function(t,e){return!0},
i}),e.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i,n)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var i=e.slice(0),n=e.length-1;n>=0;n--){var r=e[n];this.placeholder.id===r.id&&i.splice(n,1)}return i},t}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(t){function e(t,e,i,n){this.lastParams={},t.call(this,e,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,i,n){var r=this;e.call(this,i,n),i.on("query",function(t){r.lastParams=t,r.loading=!0}),i.on("query:append",function(t){r.lastParams=t,r.loading=!0}),this.$results.on("scroll",function(){var e=t.contains(document.documentElement,r.$loadingMore[0]);if(!r.loading&&e){var i=r.$results.offset().top+r.$results.outerHeight(!1),n=r.$loadingMore.offset().top+r.$loadingMore.outerHeight(!1);i+50>=n&&r.loadMore()}})},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),i=this.options.get("translations").get("loadingMore");return e.html(i(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(t,e){function i(e,i,n){this.$dropdownParent=n.get("dropdownParent")||t(document.body),e.call(this,i,n)}return i.prototype.bind=function(t,e,i){var n=this,r=!1;t.call(this,e,i),e.on("open",function(){n._showDropdown(),n._attachPositioningHandler(e),r||(r=!0,e.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),e.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}))}),e.on("close",function(){n._hideDropdown(),n._detachPositioningHandler(e)}),this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})},i.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},i.prototype.position=function(t,e,i){e.attr("class",i.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(e){var i=t("<span></span>"),n=e.call(this);return i.append(n),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},i.prototype._attachPositioningHandler=function(i,n){var r=this,o="scroll.select2."+n.id,s="resize.select2."+n.id,a="orientationchange.select2."+n.id,h=this.$container.parents().filter(e.hasScroll);h.each(function(){t(this).data("select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})}),h.on(o,function(e){var i=t(this).data("select2-scroll-position");t(this).scrollTop(i.y)}),t(window).on(o+" "+s+" "+a,function(t){r._positionDropdown(),r._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i,n){var r="scroll.select2."+n.id,o="resize.select2."+n.id,s="orientationchange.select2."+n.id,a=this.$container.parents().filter(e.hasScroll);a.off(r),t(window).off(r+" "+o+" "+s)},i.prototype._positionDropdown=function(){var e=t(window),i=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),r=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var s={height:this.$container.outerHeight(!1)};s.top=o.top,s.bottom=o.top+s.height;var a={height:this.$dropdown.outerHeight(!1)},h={top:e.scrollTop(),bottom:e.scrollTop()+e.height()},l=h.top<o.top-a.height,c=h.bottom>o.bottom+a.height,d={left:o.left,top:s.bottom},u=this.$dropdownParent;"static"===u.css("position")&&(u=u.offsetParent());var f=u.offset();d.top-=f.top,d.left-=f.left,i||n||(r="below"),c||!l||i?!l&&c&&i&&(r="below"):r="above",("above"==r||i&&"below"!==r)&&(d.top=s.top-a.height),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(d)},i.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.width="auto"),this.$dropdown.css(t)},i.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function t(e){for(var i=0,n=0;n<e.length;n++){var r=e[n];r.children?i+=t(r.children):i++}return i}function e(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,i,n)}return e.prototype.showSearch=function(e,i){return t(i.data.results)<this.minimumResultsForSearch?!1:e.call(this,i)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("close",function(){n._handleSelectOnClose()})},t.prototype._handleSelectOnClose=function(){var t=this.getHighlightedResults();if(!(t.length<1)){var e=t.data("data");null!=e.element&&e.element.selected||null==e.element&&e.selected||this.trigger("select",{data:e})}},t}),e.define("select2/dropdown/closeOnSelect",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",function(t){n._selectTriggered(t)}),e.on("unselect",function(t){n._selectTriggered(t)})},t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;i&&i.ctrlKey||this.trigger("close",{})},t}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Please delete "+e+" character";return 1!=e&&(i+="s"),i},inputTooShort:function(t){var e=t.minimum-t.input.length,i="Please enter "+e+" or more characters";return i},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(t,e,i,n,r,o,s,a,h,l,c,d,u,f,p,m,g,v,A,y,b,E,w,x,_,T,S,R,C){function k(){this.reset()}k.prototype.apply=function(d){if(d=t.extend(!0,{},this.defaults,d),null==d.dataAdapter){if(null!=d.ajax?d.dataAdapter=p:null!=d.data?d.dataAdapter=f:d.dataAdapter=u,d.minimumInputLength>0&&(d.dataAdapter=l.Decorate(d.dataAdapter,v)),d.maximumInputLength>0&&(d.dataAdapter=l.Decorate(d.dataAdapter,A)),d.maximumSelectionLength>0&&(d.dataAdapter=l.Decorate(d.dataAdapter,y)),d.tags&&(d.dataAdapter=l.Decorate(d.dataAdapter,m)),(null!=d.tokenSeparators||null!=d.tokenizer)&&(d.dataAdapter=l.Decorate(d.dataAdapter,g)),null!=d.query){var C=e(d.amdBase+"compat/query");d.dataAdapter=l.Decorate(d.dataAdapter,C)}if(null!=d.initSelection){var k=e(d.amdBase+"compat/initSelection");d.dataAdapter=l.Decorate(d.dataAdapter,k)}}if(null==d.resultsAdapter&&(d.resultsAdapter=i,null!=d.ajax&&(d.resultsAdapter=l.Decorate(d.resultsAdapter,x)),null!=d.placeholder&&(d.resultsAdapter=l.Decorate(d.resultsAdapter,w)),d.selectOnClose&&(d.resultsAdapter=l.Decorate(d.resultsAdapter,S))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=b;else{var M=l.Decorate(b,E);d.dropdownAdapter=M}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=l.Decorate(d.dropdownAdapter,T)),d.closeOnSelect&&(d.dropdownAdapter=l.Decorate(d.dropdownAdapter,R)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var H=e(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=l.Decorate(d.dropdownAdapter,H)}d.dropdownAdapter=l.Decorate(d.dropdownAdapter,_)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=r:d.selectionAdapter=n,null!=d.placeholder&&(d.selectionAdapter=l.Decorate(d.selectionAdapter,o)),d.allowClear&&(d.selectionAdapter=l.Decorate(d.selectionAdapter,s)),d.multiple&&(d.selectionAdapter=l.Decorate(d.selectionAdapter,a)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var P=e(d.amdBase+"compat/containerCss");d.selectionAdapter=l.Decorate(d.selectionAdapter,P)}d.selectionAdapter=l.Decorate(d.selectionAdapter,h)}if("string"==typeof d.language)if(d.language.indexOf("-")>0){var D=d.language.split("-"),O=D[0];d.language=[d.language,O]}else d.language=[d.language];if(t.isArray(d.language)){var L=new c;d.language.push("en");for(var I=d.language,B=0;B<I.length;B++){var F=I[B],N={};try{N=c.loadPath(F)}catch(z){try{F=this.defaults.amdLanguageBase+F,N=c.loadPath(F)}catch(j){d.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+F+'" could not be automatically loaded. A fallback will be used instead.');continue}}L.extend(N)}d.translations=L}else{var U=c.loadPath(this.defaults.amdLanguageBase+"en"),V=new c(d.language);V.extend(U),d.translations=V}return d},k.prototype.reset=function(){function e(t){function e(t){return d[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function i(n,r){if(""===t.trim(n.term))return r;if(r.children&&r.children.length>0){for(var o=t.extend(!0,{},r),s=r.children.length-1;s>=0;s--){var a=r.children[s],h=i(n,a);null==h&&o.children.splice(s,1)}return o.children.length>0?o:i(n,o)}var l=e(r.text).toUpperCase(),c=e(n.term).toUpperCase();return l.indexOf(c)>-1?r:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:l.escapeMarkup,language:C,matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},k.prototype.set=function(e,i){var n=t.camelCase(e),r={};r[n]=i;var o=l._convertData(r);t.extend(this.defaults,o)};var M=new k;return M}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(t,e,i,n){function r(e,r){if(this.options=e,null!=r&&this.fromElement(r),this.options=i.apply(this.options),r&&r.is("input")){var o=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,o)}}return r.prototype.fromElement=function(t){var i=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var r={};r=e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset?e.extend(!0,{},t[0].dataset,t.data()):t.data();var o=e.extend(!0,{},r);o=n._convertData(o);for(var s in o)e.inArray(s,i)>-1||(e.isPlainObject(this.options[s])?e.extend(this.options[s],o[s]):this.options[s]=o[s]);return this},r.prototype.get=function(t){return this.options[t]},r.prototype.set=function(t,e){this.options[t]=e},r}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(t,e,i,n){var r=function(t,i){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),i=i||{},this.options=new e(i,t),r.__super__.constructor.call(this);var n=t.attr("tabindex")||0;t.data("old-tabindex",n),t.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(t,this.options);var s=this.render();this._placeContainer(s);var a=this.options.get("selectionAdapter");this.selection=new a(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var h=this.options.get("dropdownAdapter");this.dropdown=new h(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var l=this.options.get("resultsAdapter");this.results=new l(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var c=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(t){c.trigger("selection:update",{data:t})}),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return i.Extend(r,i.Observable),r.prototype._generateId=function(t){var e="";return e=null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+i.generateChars(2):i.generateChars(4),e=e.replace(/(:|\.|\[|\]|,)/g,""),e="select2-"+e},r.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},r.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var n=this._resolveWidth(t,"style");return null!=n?n:this._resolveWidth(t,"element")}if("element"==e){var r=t.outerWidth(!1);return 0>=r?"auto":r+"px"}if("style"==e){var o=t.attr("style");if("string"!=typeof o)return null;for(var s=o.split(";"),a=0,h=s.length;h>a;a+=1){var l=s[a].replace(/\s/g,""),c=l.match(i);if(null!==c&&c.length>=1)return c[1]}return null}return e},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})}),this._sync=i.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=n?(this._observer=new n(function(i){t.each(i,e._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",e._sync,!1)},r.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",function(e,i){t.trigger(e,i)})},r.prototype._registerSelectionEvents=function(){var e=this,i=["toggle","focus"];this.selection.on("toggle",function(){e.toggleDropdown()}),this.selection.on("focus",function(t){e.focus(t)}),this.selection.on("*",function(n,r){-1===t.inArray(n,i)&&e.trigger(n,r)})},r.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",function(e,i){t.trigger(e,i)})},r.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",function(e,i){t.trigger(e,i)})},r.prototype._registerEvents=function(){var t=this;this.on("open",function(){t.$container.addClass("select2-container--open")}),this.on("close",function(){t.$container.removeClass("select2-container--open")}),this.on("enable",function(){t.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){t.$container.addClass("select2-container--disabled")}),this.on("blur",function(){t.$container.removeClass("select2-container--focus")}),this.on("query",function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,function(i){t.trigger("results:all",{data:i,query:e})})}),this.on("query:append",function(e){this.dataAdapter.query(e,function(i){t.trigger("results:append",{data:i,query:e})})}),this.on("keypress",function(e){var i=e.which;t.isOpen()?i===n.ESC||i===n.TAB||i===n.UP&&e.altKey?(t.close(),e.preventDefault()):i===n.ENTER?(t.trigger("results:select",{}),e.preventDefault()):i===n.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):i===n.UP?(t.trigger("results:previous",{}),e.preventDefault()):i===n.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(i===n.ENTER||i===n.SPACE||i===n.DOWN&&e.altKey)&&(t.open(),e.preventDefault())})},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},r.prototype.trigger=function(t,e){var i=r.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===e&&(e={}),t in n){var o=n[t],s={prevented:!1,name:t,args:e};if(i.call(this,o,s),s.prevented)return void(e.prevented=!0)}i.call(this,t,e)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||this.trigger("query",{})},r.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},r.prototype.focus=function(t){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},r.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==t||0===t.length)&&(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},r.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},r.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var i=e[0];t.isArray(i)&&(i=t.map(i,function(t){return t.toString()})),this.$element.val(i).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},r}),e.define("jquery-mousewheel",["jquery"],function(t){return t}),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(t,e,i,n){if(null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if(e=e||{},"object"==typeof e)return this.each(function(){var n=t.extend(!0,{},e);new i(t(this),n)}),this;if("string"==typeof e){var n;return this.each(function(){var i=t(this).data("select2");null==i&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2.");var r=Array.prototype.slice.call(arguments,1);n=i[e].apply(i,r)}),t.inArray(e,r)>-1?this:n}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=n),i}),{define:e.define,require:e.require}}(),i=e.require("jquery.select2");return t.fn.select2.amd=e,i}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.vis=e():t.vis=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n=i(1);n.extend(e,i(7)),n.extend(e,i(24)),n.extend(e,i(60))},function(t,e,i){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},r=i(2),o=i(6);e.isNumber=function(t){return t instanceof Number||"number"==typeof t},e.recursiveDOMDelete=function(t){if(t)for(;t.hasChildNodes()===!0;)e.recursiveDOMDelete(t.firstChild),t.removeChild(t.firstChild)},e.giveRange=function(t,e,i,n){if(e==t)return.5;var r=1/(e-t);return Math.max(0,(n-t)*r)},e.isString=function(t){return t instanceof String||"string"==typeof t},e.isDate=function(t){if(t instanceof Date)return!0;if(e.isString(t)){var i=s.exec(t);if(i)return!0;if(!isNaN(Date.parse(t)))return!0}return!1},e.randomUUID=function(){return o.v4()},e.assignAllKeys=function(t,e){for(var i in t)t.hasOwnProperty(i)&&"object"!==n(t[i])&&(t[i]=e)},e.fillIfDefined=function(t,i){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];for(var o in t)void 0!==i[o]&&("object"!==n(i[o])?void 0!==i[o]&&null!==i[o]||void 0===t[o]||r!==!0?t[o]=i[o]:delete t[o]:"object"===n(t[o])&&e.fillIfDefined(t[o],i[o],r))},e.protoExtend=function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)t[r]=n[r]}return t},e.extend=function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t},e.selectiveExtend=function(t,e,i){if(!Array.isArray(t))throw new Error("Array with property names expected as first argument");for(var n=2;n<arguments.length;n++)for(var r=arguments[n],o=0;o<t.length;o++){var s=t[o];r.hasOwnProperty(s)&&(e[s]=r[s])}return e},e.selectiveDeepExtend=function(t,i,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var o=2;o<arguments.length;o++)for(var s=arguments[o],a=0;a<t.length;a++){var h=t[a];if(s.hasOwnProperty(h))if(n[h]&&n[h].constructor===Object)void 0===i[h]&&(i[h]={}),i[h].constructor===Object?e.deepExtend(i[h],n[h],!1,r):null===n[h]&&void 0!==i[h]&&r===!0?delete i[h]:i[h]=n[h];else{if(Array.isArray(n[h]))throw new TypeError("Arrays are not supported by deepExtend");null===n[h]&&void 0!==i[h]&&r===!0?delete i[h]:i[h]=n[h]}}return i},e.selectiveNotDeepExtend=function(t,i,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var o in n)if(n.hasOwnProperty(o)&&-1==t.indexOf(o))if(n[o]&&n[o].constructor===Object)void 0===i[o]&&(i[o]={}),i[o].constructor===Object?e.deepExtend(i[o],n[o]):null===n[o]&&void 0!==i[o]&&r===!0?delete i[o]:i[o]=n[o];else if(Array.isArray(n[o])){i[o]=[];for(var s=0;s<n[o].length;s++)i[o].push(n[o][s])}else null===n[o]&&void 0!==i[o]&&r===!0?delete i[o]:i[o]=n[o];return i},e.deepExtend=function(t,i,n,r){for(var o in i)if(i.hasOwnProperty(o)||n===!0)if(i[o]&&i[o].constructor===Object)void 0===t[o]&&(t[o]={}),t[o].constructor===Object?e.deepExtend(t[o],i[o],n):null===i[o]&&void 0!==t[o]&&r===!0?delete t[o]:t[o]=i[o];else if(Array.isArray(i[o])){t[o]=[];for(var s=0;s<i[o].length;s++)t[o].push(i[o][s])}else null===i[o]&&void 0!==t[o]&&r===!0?delete t[o]:t[o]=i[o];return t},e.equalArray=function(t,e){if(t.length!=e.length)return!1;for(var i=0,n=t.length;n>i;i++)if(t[i]!=e[i])return!1;return!0},e.convert=function(t,i){var n;if(void 0!==t){if(null===t)return null;if(!i)return t;if("string"!=typeof i&&!(i instanceof String))throw new Error("Type must be a string");switch(i){case"boolean":case"Boolean":return Boolean(t);case"number":case"Number":return Number(t.valueOf());case"string":case"String":return String(t);case"Date":if(e.isNumber(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(r.isMoment(t))return new Date(t.valueOf());if(e.isString(t))return n=s.exec(t),n?new Date(Number(n[1])):r(t).toDate();throw new Error("Cannot convert object of type "+e.getType(t)+" to type Date");case"Moment":if(e.isNumber(t))return r(t);if(t instanceof Date)return r(t.valueOf());if(r.isMoment(t))return r(t);if(e.isString(t))return n=s.exec(t),r(n?Number(n[1]):t);throw new Error("Cannot convert object of type "+e.getType(t)+" to type Date");case"ISODate":if(e.isNumber(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(r.isMoment(t))return t.toDate().toISOString();if(e.isString(t))return n=s.exec(t),n?new Date(Number(n[1])).toISOString():new Date(t).toISOString();throw new Error("Cannot convert object of type "+e.getType(t)+" to type ISODate");case"ASPDate":if(e.isNumber(t))return"/Date("+t+")/";if(t instanceof Date)return"/Date("+t.valueOf()+")/";if(e.isString(t)){n=s.exec(t);var o;return o=n?new Date(Number(n[1])).valueOf():new Date(t).valueOf(),"/Date("+o+")/"}throw new Error("Cannot convert object of type "+e.getType(t)+" to type ASPDate");default:throw new Error('Unknown type "'+i+'"')}}};var s=/^\/?Date\((\-?\d+)/i;e.getType=function(t){var e="undefined"==typeof t?"undefined":n(t);return"object"==e?null===t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Array.isArray(t)?"Array":t instanceof Date?"Date":"Object":"number"==e?"Number":"boolean"==e?"Boolean":"string"==e?"String":void 0===e?"undefined":e},e.copyAndExtendArray=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(t[n]);return i.push(e),i},e.copyArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e},e.getAbsoluteLeft=function(t){return t.getBoundingClientRect().left},e.getAbsoluteRight=function(t){return t.getBoundingClientRect().right},e.getAbsoluteTop=function(t){return t.getBoundingClientRect().top},e.addClassName=function(t,e){var i=t.className.split(" ");-1==i.indexOf(e)&&(i.push(e),t.className=i.join(" "))},e.removeClassName=function(t,e){var i=t.className.split(" "),n=i.indexOf(e);-1!=n&&(i.splice(n,1),t.className=i.join(" "))},e.forEach=function(t,e){var i,n;if(Array.isArray(t))for(i=0,n=t.length;n>i;i++)e(t[i],i,t);else for(i in t)t.hasOwnProperty(i)&&e(t[i],i,t)},e.toArray=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e},e.updateProperty=function(t,e,i){return t[e]!==i?(t[e]=i,!0):!1},e.throttle=function(t,e){var i=null,n=!1;return function r(){i?n=!0:(n=!1,t(),i=setTimeout(function(){i=null,n&&r()},e))}},e.addEventListener=function(t,e,i,n){t.addEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.addEventListener(e,i,n)):t.attachEvent("on"+e,i)},e.removeEventListener=function(t,e,i,n){t.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.removeEventListener(e,i,n)):t.detachEvent("on"+e,i)},e.preventDefault=function(t){t||(t=window.event),t.preventDefault?t.preventDefault():t.returnValue=!1},e.getTarget=function(t){t||(t=window.event);var e;return t.target?e=t.target:t.srcElement&&(e=t.srcElement),void 0!=e.nodeType&&3==e.nodeType&&(e=e.parentNode),e},e.hasParent=function(t,e){for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1},e.option={},e.option.asBoolean=function(t,e){return"function"==typeof t&&(t=t()),null!=t?0!=t:e||null},e.option.asNumber=function(t,e){return"function"==typeof t&&(t=t()),null!=t?Number(t)||e||null:e||null},e.option.asString=function(t,e){return"function"==typeof t&&(t=t()),null!=t?String(t):e||null},e.option.asSize=function(t,i){return"function"==typeof t&&(t=t()),e.isString(t)?t:e.isNumber(t)?t+"px":i||null},e.option.asElement=function(t,e){return"function"==typeof t&&(t=t()),t||e||null},e.hexToRGB=function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},e.overrideOpacity=function(t,i){if(-1!=t.indexOf("rgba"))return t;if(-1!=t.indexOf("rgb")){var n=t.substr(t.indexOf("(")+1).replace(")","").split(",");return"rgba("+n[0]+","+n[1]+","+n[2]+","+i+")"}var n=e.hexToRGB(t);return null==n?t:"rgba("+n.r+","+n.g+","+n.b+","+i+")"},e.RGBToHex=function(t,e,i){return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},e.parseColor=function(t){var i;if(e.isString(t)===!0){if(e.isValidRGB(t)===!0){var n=t.substr(4).substr(0,t.length-5).split(",").map(function(t){return parseInt(t)});t=e.RGBToHex(n[0],n[1],n[2])}if(e.isValidHex(t)===!0){var r=e.hexToHSV(t),o={h:r.h,s:.8*r.s,v:Math.min(1,1.02*r.v)},s={h:r.h,s:Math.min(1,1.25*r.s),v:.8*r.v},a=e.HSVToHex(s.h,s.s,s.v),h=e.HSVToHex(o.h,o.s,o.v);i={background:t,border:a,highlight:{background:h,border:a},hover:{background:h,border:a}}}else i={background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else i={},i.background=t.background||void 0,i.border=t.border||void 0,e.isString(t.highlight)?i.highlight={border:t.highlight,background:t.highlight}:(i.highlight={},i.highlight.background=t.highlight&&t.highlight.background||void 0,i.highlight.border=t.highlight&&t.highlight.border||void 0),e.isString(t.hover)?i.hover={border:t.hover,background:t.hover}:(i.hover={},i.hover.background=t.hover&&t.hover.background||void 0,i.hover.border=t.hover&&t.hover.border||void 0);return i},e.RGBToHSV=function(t,e,i){t/=255,e/=255,i/=255;var n=Math.min(t,Math.min(e,i)),r=Math.max(t,Math.max(e,i));if(n==r)return{h:0,s:0,v:n};var o=t==n?e-i:i==n?t-e:i-t,s=t==n?3:i==n?1:5,a=60*(s-o/(r-n))/360,h=(r-n)/r,l=r;
return{h:a,s:h,v:l}};var a={split:function(t){var e={};return t.split(";").forEach(function(t){if(""!=t.trim()){var i=t.split(":"),n=i[0].trim(),r=i[1].trim();e[n]=r}}),e},join:function(t){return Object.keys(t).map(function(e){return e+": "+t[e]}).join("; ")}};e.addCssText=function(t,i){var n=a.split(t.style.cssText),r=a.split(i),o=e.extend(n,r);t.style.cssText=a.join(o)},e.removeCssText=function(t,e){var i=a.split(t.style.cssText),n=a.split(e);for(var r in n)n.hasOwnProperty(r)&&delete i[r];t.style.cssText=a.join(i)},e.HSVToRGB=function(t,e,i){var n,r,o,s=Math.floor(6*t),a=6*t-s,h=i*(1-e),l=i*(1-a*e),c=i*(1-(1-a)*e);switch(s%6){case 0:n=i,r=c,o=h;break;case 1:n=l,r=i,o=h;break;case 2:n=h,r=i,o=c;break;case 3:n=h,r=l,o=i;break;case 4:n=c,r=h,o=i;break;case 5:n=i,r=h,o=l}return{r:Math.floor(255*n),g:Math.floor(255*r),b:Math.floor(255*o)}},e.HSVToHex=function(t,i,n){var r=e.HSVToRGB(t,i,n);return e.RGBToHex(r.r,r.g,r.b)},e.hexToHSV=function(t){var i=e.hexToRGB(t);return e.RGBToHSV(i.r,i.g,i.b)},e.isValidHex=function(t){var e=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t);return e},e.isValidRGB=function(t){t=t.replace(" ","");var e=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(t);return e},e.isValidRGBA=function(t){t=t.replace(" ","");var e=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(t);return e},e.selectiveBridgeObject=function(t,i){if("object"==("undefined"==typeof i?"undefined":n(i))){for(var r=Object.create(i),o=0;o<t.length;o++)i.hasOwnProperty(t[o])&&"object"==n(i[t[o]])&&(r[t[o]]=e.bridgeObject(i[t[o]]));return r}return null},e.bridgeObject=function(t){if("object"==("undefined"==typeof t?"undefined":n(t))){var i=Object.create(t);for(var r in t)t.hasOwnProperty(r)&&"object"==n(t[r])&&(i[r]=e.bridgeObject(t[r]));return i}return null},e.insertSort=function(t,e){for(var i=0;i<t.length;i++){for(var n=t[i],r=i;r>0&&e(n,t[r-1])<0;r--)t[r]=t[r-1];t[r]=n}return t},e.mergeOptions=function(t,e,i){var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],arguments.length<=4||void 0===arguments[4]?{}:arguments[4]);if(null===e[i])t[i]=Object.create(n[i]);else if(void 0!==e[i])if("boolean"==typeof e[i])t[i].enabled=e[i];else{void 0===e[i].enabled&&(t[i].enabled=!0);for(var r in e[i])e[i].hasOwnProperty(r)&&(t[i][r]=e[i][r])}},e.binarySearchCustom=function(t,e,i,n){for(var r=1e4,o=0,s=0,a=t.length-1;a>=s&&r>o;){var h=Math.floor((s+a)/2),l=t[h],c=void 0===n?l[i]:l[i][n],d=e(c);if(0==d)return h;-1==d?s=h+1:a=h-1,o++}return-1},e.binarySearchValue=function(t,e,i,n,r){for(var o,s,a,h,l=1e4,c=0,d=0,u=t.length-1,r=void 0!=r?r:function(t,e){return t==e?0:e>t?-1:1};u>=d&&l>c;){if(h=Math.floor(.5*(u+d)),o=t[Math.max(0,h-1)][i],s=t[h][i],a=t[Math.min(t.length-1,h+1)][i],0==r(s,e))return h;if(r(o,e)<0&&r(s,e)>0)return"before"==n?Math.max(0,h-1):h;if(r(s,e)<0&&r(a,e)>0)return"before"==n?h:Math.min(t.length-1,h+1);r(s,e)<0?d=h+1:u=h-1,c++}return-1},e.easingFunctions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return.5>t?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return.5>t?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},function(t,e,i){t.exports="undefined"!=typeof window&&window.moment||i(3)},function(t,e,i){(function(t){!function(e,i){t.exports=i()}(this,function(){function e(){return an.apply(null,arguments)}function i(t){an=t}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function r(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function o(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){for(var i in e)s(e,i)&&(t[i]=e[i]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e,i,n){return It(t,e,i,n,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function c(t){return null==t._pf&&(t._pf=l()),t._pf}function d(t){if(null==t._isValid){var e=c(t),i=hn.call(e.parsedDateParts,function(t){return null!=t});t._isValid=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function u(t){var e=h(NaN);return null!=t?a(c(e),t):c(e).userInvalidated=!0,e}function f(t){return void 0===t}function p(t,e){var i,n,r;if(f(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),f(e._i)||(t._i=e._i),f(e._f)||(t._f=e._f),f(e._l)||(t._l=e._l),f(e._strict)||(t._strict=e._strict),f(e._tzm)||(t._tzm=e._tzm),f(e._isUTC)||(t._isUTC=e._isUTC),f(e._offset)||(t._offset=e._offset),f(e._pf)||(t._pf=c(e)),f(e._locale)||(t._locale=e._locale),ln.length>0)for(i in ln)n=ln[i],r=e[n],f(r)||(t[n]=r);return t}function m(t){p(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),cn===!1&&(cn=!0,e.updateOffset(this),cn=!1)}function g(t){return t instanceof m||null!=t&&null!=t._isAMomentObject}function v(t){return 0>t?Math.ceil(t):Math.floor(t)}function A(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=v(e)),i}function y(t,e,i){var n,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(n=0;r>n;n++)(i&&t[n]!==e[n]||!i&&A(t[n])!==A(e[n]))&&s++;return s+o}function b(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function E(t,i){var n=!0;return a(function(){return null!=e.deprecationHandler&&e.deprecationHandler(null,t),n&&(b(t+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),i.apply(this,arguments)},i)}function w(t,i){null!=e.deprecationHandler&&e.deprecationHandler(t,i),dn[t]||(b(i),dn[t]=!0)}function x(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function _(t){return"[object Object]"===Object.prototype.toString.call(t)}function T(t){var e,i;for(i in t)e=t[i],x(e)?this[i]=e:this["_"+i]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function S(t,e){var i,n=a({},t);for(i in e)s(e,i)&&(_(t[i])&&_(e[i])?(n[i]={},a(n[i],t[i]),a(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);return n}function R(t){null!=t&&this.set(t)}function C(t){return t?t.toLowerCase().replace("_","-"):t}function k(t){for(var e,i,n,r,o=0;o<t.length;){for(r=C(t[o]).split("-"),e=r.length,i=C(t[o+1]),i=i?i.split("-"):null;e>0;){if(n=M(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&y(r,i,!0)>=e-1)break;e--}o++}return null}function M(e){var i=null;if(!mn[e]&&"undefined"!=typeof t&&t&&t.exports)try{i=fn._abbr,!function(){var t=new Error('Cannot find module "./locale"');throw t.code="MODULE_NOT_FOUND",t}(),H(i)}catch(n){}return mn[e]}function H(t,e){var i;return t&&(i=f(e)?O(t):P(t,e),i&&(fn=i)),fn._abbr}function P(t,e){return null!==e?(e.abbr=t,null!=mn[t]?(w("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),e=S(mn[t]._config,e)):null!=e.parentLocale&&(null!=mn[e.parentLocale]?e=S(mn[e.parentLocale]._config,e):w("parentLocaleUndefined","specified parentLocale is not defined yet")),mn[t]=new R(e),H(t),mn[t]):(delete mn[t],null)}function D(t,e){if(null!=e){var i;null!=mn[t]&&(e=S(mn[t]._config,e)),i=new R(e),i.parentLocale=mn[t],mn[t]=i,H(t)}else null!=mn[t]&&(null!=mn[t].parentLocale?mn[t]=mn[t].parentLocale:null!=mn[t]&&delete mn[t]);return mn[t]}function O(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return fn;if(!n(t)){if(e=M(t))return e;t=[t]}return k(t)}function L(){return un(mn)}function I(t,e){var i=t.toLowerCase();gn[i]=gn[i+"s"]=gn[e]=t}function B(t){return"string"==typeof t?gn[t]||gn[t.toLowerCase()]:void 0}function F(t){var e,i,n={};for(i in t)s(t,i)&&(e=B(i),e&&(n[e]=t[i]));return n}function N(t,i){return function(n){return null!=n?(j(this,t,n),e.updateOffset(this,i),this):z(this,t)}}function z(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function j(t,e,i){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](i)}function U(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else if(t=B(t),x(this[t]))return this[t](e);return this}function V(t,e,i){var n=""+Math.abs(t),r=e-n.length,o=t>=0;return(o?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}function W(t,e,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),t&&(bn[t]=r),e&&(bn[e[0]]=function(){return V(r.apply(this,arguments),e[1],e[2])}),i&&(bn[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function G(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Y(t){var e,i,n=t.match(vn);for(e=0,i=n.length;i>e;e++)bn[n[e]]?n[e]=bn[n[e]]:n[e]=G(n[e]);return function(e){var r,o="";for(r=0;i>r;r++)o+=n[r]instanceof Function?n[r].call(e,t):n[r];return o}}function q(t,e){return t.isValid()?(e=X(e,t.localeData()),yn[e]=yn[e]||Y(e),yn[e](t)):t.localeData().invalidDate()}function X(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(An.lastIndex=0;n>=0&&An.test(t);)t=t.replace(An,i),An.lastIndex=0,n-=1;return t}function Q(t,e,i){Fn[t]=x(e)?e:function(t,n){return t&&i?i:e}}function Z(t,e){return s(Fn,t)?Fn[t](e._strict,e._locale):new RegExp(K(t))}function K(t){return J(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r}))}function J(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(n=function(t,i){i[e]=A(t)}),i=0;i<t.length;i++)Nn[t[i]]=n}function tt(t,e){$(t,function(t,i,n,r){n._w=n._w||{},e(t,n._w,n,r)})}function et(t,e,i){null!=e&&s(Nn,t)&&Nn[t](e,i._a,i,t)}function it(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function nt(t,e){return n(this._months)?this._months[t.month()]:this._months[Qn.test(e)?"format":"standalone"][t.month()]}function rt(t,e){return n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Qn.test(e)?"format":"standalone"][t.month()]}function ot(t,e,i){var n,r,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;12>n;++n)o=h([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===e?(r=pn.call(this._shortMonthsParse,s),-1!==r?r:null):(r=pn.call(this._longMonthsParse,s),-1!==r?r:null):"MMM"===e?(r=pn.call(this._shortMonthsParse,s),-1!==r?r:(r=pn.call(this._longMonthsParse,s),-1!==r?r:null)):(r=pn.call(this._longMonthsParse,s),-1!==r?r:(r=pn.call(this._shortMonthsParse,s),-1!==r?r:null))}function st(t,e,i){var n,r,o;if(this._monthsParseExact)return ot.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(r=h([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function at(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=A(e);else if(e=t.localeData().monthsParse(e),"number"!=typeof e)return t;return i=Math.min(t.date(),it(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function ht(t){return null!=t?(at(this,t),e.updateOffset(this,!0),this):z(this,"Month")}function lt(){return it(this.year(),this.month())}function ct(t){return this._monthsParseExact?(s(this,"_monthsRegex")||ut.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex}function dt(t){return this._monthsParseExact?(s(this,"_monthsRegex")||ut.call(this),t?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex}function ut(){function t(t,e){return e.length-t.length}var e,i,n=[],r=[],o=[];for(e=0;12>e;e++)i=h([2e3,e]),n.push(this.monthsShort(i,"")),r.push(this.months(i,"")),o.push(this.months(i,"")),o.push(this.monthsShort(i,""));for(n.sort(t),r.sort(t),o.sort(t),e=0;12>e;e++)n[e]=J(n[e]),r[e]=J(r[e]),o[e]=J(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function ft(t){var e,i=t._a;return i&&-2===c(t).overflow&&(e=i[jn]<0||i[jn]>11?jn:i[Un]<1||i[Un]>it(i[zn],i[jn])?Un:i[Vn]<0||i[Vn]>24||24===i[Vn]&&(0!==i[Wn]||0!==i[Gn]||0!==i[Yn])?Vn:i[Wn]<0||i[Wn]>59?Wn:i[Gn]<0||i[Gn]>59?Gn:i[Yn]<0||i[Yn]>999?Yn:-1,c(t)._overflowDayOfYear&&(zn>e||e>Un)&&(e=Un),c(t)._overflowWeeks&&-1===e&&(e=qn),c(t)._overflowWeekday&&-1===e&&(e=Xn),c(t).overflow=e),t}function pt(t){var e,i,n,r,o,s,a=t._i,h=tr.exec(a)||er.exec(a);if(h){for(c(t).iso=!0,e=0,i=nr.length;i>e;e++)if(nr[e][1].exec(h[1])){r=nr[e][0],n=nr[e][2]!==!1;break}if(null==r)return void(t._isValid=!1);if(h[3]){for(e=0,i=rr.length;i>e;e++)if(rr[e][1].exec(h[3])){o=(h[2]||" ")+rr[e][0];break}if(null==o)return void(t._isValid=!1)}if(!n&&null!=o)return void(t._isValid=!1);if(h[4]){if(!ir.exec(h[4]))return void(t._isValid=!1);s="Z"}t._f=r+(o||"")+(s||""),kt(t)}else t._isValid=!1}function mt(t){var i=or.exec(t._i);return null!==i?void(t._d=new Date(+i[1])):(pt(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function gt(t,e,i,n,r,o,s){var a=new Date(t,e,i,n,r,o,s);return 100>t&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function vt(t){var e=new Date(Date.UTC.apply(null,arguments));return 100>t&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function At(t){return yt(t)?366:365}function yt(t){return t%4===0&&t%100!==0||t%400===0}function bt(){return yt(this.year())}function Et(t,e,i){var n=7+e-i,r=(7+vt(t,0,n).getUTCDay()-e)%7;return-r+n-1}function wt(t,e,i,n,r){var o,s,a=(7+i-n)%7,h=Et(t,n,r),l=1+7*(e-1)+a+h;return 0>=l?(o=t-1,s=At(o)+l):l>At(t)?(o=t+1,s=l-At(t)):(o=t,s=l),{year:o,dayOfYear:s}}function xt(t,e,i){var n,r,o=Et(t.year(),e,i),s=Math.floor((t.dayOfYear()-o-1)/7)+1;return 1>s?(r=t.year()-1,n=s+_t(r,e,i)):s>_t(t.year(),e,i)?(n=s-_t(t.year(),e,i),r=t.year()+1):(r=t.year(),n=s),{week:n,year:r}}function _t(t,e,i){var n=Et(t,e,i),r=Et(t+1,e,i);return(At(t)-n+r)/7}function Tt(t,e,i){return null!=t?t:null!=e?e:i}function St(t){var i=new Date(e.now());return t._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function Rt(t){var e,i,n,r,o=[];if(!t._d){for(n=St(t),t._w&&null==t._a[Un]&&null==t._a[jn]&&Ct(t),t._dayOfYear&&(r=Tt(t._a[zn],n[zn]),t._dayOfYear>At(r)&&(c(t)._overflowDayOfYear=!0),i=vt(r,0,t._dayOfYear),t._a[jn]=i.getUTCMonth(),t._a[Un]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=o[e]=n[e];for(;7>e;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Vn]&&0===t._a[Wn]&&0===t._a[Gn]&&0===t._a[Yn]&&(t._nextDay=!0,t._a[Vn]=0),t._d=(t._useUTC?vt:gt).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Vn]=24)}}function Ct(t){var e,i,n,r,o,s,a,h;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(o=1,s=4,i=Tt(e.GG,t._a[zn],xt(Bt(),1,4).year),n=Tt(e.W,1),r=Tt(e.E,1),(1>r||r>7)&&(h=!0)):(o=t._locale._week.dow,s=t._locale._week.doy,i=Tt(e.gg,t._a[zn],xt(Bt(),o,s).year),n=Tt(e.w,1),null!=e.d?(r=e.d,(0>r||r>6)&&(h=!0)):null!=e.e?(r=e.e+o,(e.e<0||e.e>6)&&(h=!0)):r=o),1>n||n>_t(i,o,s)?c(t)._overflowWeeks=!0:null!=h?c(t)._overflowWeekday=!0:(a=wt(i,n,r,o,s),t._a[zn]=a.year,t._dayOfYear=a.dayOfYear)}function kt(t){if(t._f===e.ISO_8601)return void pt(t);t._a=[],c(t).empty=!0;var i,n,r,o,s,a=""+t._i,h=a.length,l=0;for(r=X(t._f,t._locale).match(vn)||[],i=0;i<r.length;i++)o=r[i],n=(a.match(Z(o,t))||[])[0],n&&(s=a.substr(0,a.indexOf(n)),s.length>0&&c(t).unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),l+=n.length),bn[o]?(n?c(t).empty=!1:c(t).unusedTokens.push(o),et(o,n,t)):t._strict&&!n&&c(t).unusedTokens.push(o);c(t).charsLeftOver=h-l,a.length>0&&c(t).unusedInput.push(a),c(t).bigHour===!0&&t._a[Vn]<=12&&t._a[Vn]>0&&(c(t).bigHour=void 0),c(t).parsedDateParts=t._a.slice(0),c(t).meridiem=t._meridiem,t._a[Vn]=Mt(t._locale,t._a[Vn],t._meridiem),Rt(t),ft(t)}function Mt(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function Ht(t){var e,i,n,r,o;if(0===t._f.length)return c(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],kt(e),d(e)&&(o+=c(e).charsLeftOver,o+=10*c(e).unusedTokens.length,c(e).score=o,(null==n||n>o)&&(n=o,i=e));a(t,i||e)}function Pt(t){if(!t._d){var e=F(t._i);t._a=o([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),Rt(t)}}function Dt(t){var e=new m(ft(Ot(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Ot(t){var e=t._i,i=t._f;return t._locale=t._locale||O(t._l),null===e||void 0===i&&""===e?u({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),g(e)?new m(ft(e)):(n(i)?Ht(t):i?kt(t):r(e)?t._d=e:Lt(t),d(t)||(t._d=null),t))}function Lt(t){var i=t._i;void 0===i?t._d=new Date(e.now()):r(i)?t._d=new Date(i.valueOf()):"string"==typeof i?mt(t):n(i)?(t._a=o(i.slice(0),function(t){return parseInt(t,10)}),Rt(t)):"object"==typeof i?Pt(t):"number"==typeof i?t._d=new Date(i):e.createFromInputFallback(t)}function It(t,e,i,n,r){var o={};return"boolean"==typeof i&&(n=i,i=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=i,o._i=t,o._f=e,o._strict=n,Dt(o)}function Bt(t,e,i,n){return It(t,e,i,n,!1)}function Ft(t,e){var i,r;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return Bt();for(i=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](i)||(i=e[r]);return i}function Nt(){var t=[].slice.call(arguments,0);return Ft("isBefore",t)}function zt(){var t=[].slice.call(arguments,0);return Ft("isAfter",t)}function jt(t){var e=F(t),i=e.year||0,n=e.quarter||0,r=e.month||0,o=e.week||0,s=e.day||0,a=e.hour||0,h=e.minute||0,l=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*l+6e4*h+1e3*a*60*60,this._days=+s+7*o,this._months=+r+3*n+12*i,this._data={},this._locale=O(),this._bubble()}function Ut(t){return t instanceof jt}function Vt(t,e){W(t,0,0,function(){var t=this.utcOffset(),i="+";return 0>t&&(t=-t,i="-"),i+V(~~(t/60),2)+e+V(~~t%60,2)})}function Wt(t,e){var i=(e||"").match(t)||[],n=i[i.length-1]||[],r=(n+"").match(cr)||["-",0,0],o=+(60*r[1])+A(r[2]);return"+"===r[0]?o:-o}function Gt(t,i){var n,o;return i._isUTC?(n=i.clone(),o=(g(t)||r(t)?t.valueOf():Bt(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+o),e.updateOffset(n,!1),n):Bt(t).local()}function Yt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function qt(t,i){var n,r=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=Wt(Ln,t):Math.abs(t)<16&&(t=60*t),!this._isUTC&&i&&(n=Yt(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==t&&(!i||this._changeInProgress?ce(this,re(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Yt(this):null!=t?this:NaN}function Xt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Qt(t){return this.utcOffset(0,t)}function Zt(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Yt(this),"m")),this}function Kt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Wt(On,this._i)),this}function Jt(t){return this.isValid()?(t=t?Bt(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function $t(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function te(){if(!f(this._isDSTShifted))return this._isDSTShifted;var t={};if(p(t,this),t=Ot(t),t._a){var e=t._isUTC?h(t._a):Bt(t._a);this._isDSTShifted=this.isValid()&&y(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function ee(){return this.isValid()?!this._isUTC:!1}function ie(){return this.isValid()?this._isUTC:!1}function ne(){return this.isValid()?this._isUTC&&0===this._offset:!1}function re(t,e){var i,n,r,o=t,a=null;return Ut(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(a=dr.exec(t))?(i="-"===a[1]?-1:1,o={y:0,d:A(a[Un])*i,h:A(a[Vn])*i,m:A(a[Wn])*i,s:A(a[Gn])*i,ms:A(a[Yn])*i}):(a=ur.exec(t))?(i="-"===a[1]?-1:1,o={y:oe(a[2],i),M:oe(a[3],i),w:oe(a[4],i),d:oe(a[5],i),h:oe(a[6],i),m:oe(a[7],i),s:oe(a[8],i)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=ae(Bt(o.from),Bt(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),n=new jt(o),Ut(t)&&s(t,"_locale")&&(n._locale=t._locale),n}function oe(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function se(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function ae(t,e){var i;return t.isValid()&&e.isValid()?(e=Gt(e,t),t.isBefore(e)?i=se(t,e):(i=se(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function he(t){return 0>t?-1*Math.round(-1*t):Math.round(t)}function le(t,e){return function(i,n){var r,o;return null===n||isNaN(+n)||(w(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),o=i,i=n,n=o),i="string"==typeof i?+i:i,r=re(i,n),ce(this,r,t),this}}function ce(t,i,n,r){var o=i._milliseconds,s=he(i._days),a=he(i._months);t.isValid()&&(r=null==r?!0:r,o&&t._d.setTime(t._d.valueOf()+o*n),s&&j(t,"Date",z(t,"Date")+s*n),a&&at(t,z(t,"Month")+a*n),r&&e.updateOffset(t,s||a))}function de(t,e){var i=t||Bt(),n=Gt(i,this).startOf("day"),r=this.diff(n,"days",!0),o=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse",s=e&&(x(e[o])?e[o]():e[o]);return this.format(s||this.localeData().calendar(o,this,Bt(i)))}function ue(){return new m(this)}function fe(t,e){var i=g(t)?t:Bt(t);return this.isValid()&&i.isValid()?(e=B(f(e)?"millisecond":e),"millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf()):!1}function pe(t,e){var i=g(t)?t:Bt(t);return this.isValid()&&i.isValid()?(e=B(f(e)?"millisecond":e),"millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf()):!1}function me(t,e,i,n){return n=n||"()",("("===n[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function ge(t,e){var i,n=g(t)?t:Bt(t);return this.isValid()&&n.isValid()?(e=B(e||"millisecond"),"millisecond"===e?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function ve(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Ae(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function ye(t,e,i){var n,r,o,s;return this.isValid()?(n=Gt(t,this),n.isValid()?(r=6e4*(n.utcOffset()-this.utcOffset()),e=B(e),"year"===e||"month"===e||"quarter"===e?(s=be(this,n),"quarter"===e?s/=3:"year"===e&&(s/=12)):(o=this-n,s="second"===e?o/1e3:"minute"===e?o/6e4:"hour"===e?o/36e5:"day"===e?(o-r)/864e5:"week"===e?(o-r)/6048e5:o),i?s:v(s)):NaN):NaN}function be(t,e){var i,n,r=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(r,"months");return 0>e-o?(i=t.clone().add(r-1,"months"),n=(e-o)/(o-i)):(i=t.clone().add(r+1,"months"),n=(e-o)/(i-o)),-(r+n)||0}function Ee(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function we(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?x(Date.prototype.toISOString)?this.toDate().toISOString():q(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):q(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function xe(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var i=q(this,t);return this.localeData().postformat(i)}function _e(t,e){return this.isValid()&&(g(t)&&t.isValid()||Bt(t).isValid())?re({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Te(t){return this.from(Bt(),t)}function Se(t,e){return this.isValid()&&(g(t)&&t.isValid()||Bt(t).isValid())?re({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Re(t){return this.to(Bt(),t)}function Ce(t){var e;return void 0===t?this._locale._abbr:(e=O(t),null!=e&&(this._locale=e),this)}function ke(){return this._locale}function Me(t){switch(t=B(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function He(t){return t=B(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function Pe(){return this._d.valueOf()-6e4*(this._offset||0)}function De(){return Math.floor(this.valueOf()/1e3)}function Oe(){return this._offset?new Date(this.valueOf()):this._d}function Le(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Ie(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Be(){return this.isValid()?this.toISOString():null}function Fe(){return d(this)}function Ne(){return a({},c(this))}function ze(){return c(this).overflow}function je(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ue(t,e){W(0,[t,t.length],0,e)}function Ve(t){return qe.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function We(t){return qe.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Ge(){return _t(this.year(),1,4)}function Ye(){var t=this.localeData()._week;return _t(this.year(),t.dow,t.doy)}function qe(t,e,i,n,r){var o;return null==t?xt(this,n,r).year:(o=_t(t,n,r),e>o&&(e=o),Xe.call(this,t,e,i,n,r))}function Xe(t,e,i,n,r){var o=wt(t,e,i,n,r),s=vt(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Qe(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Ze(t){return xt(t,this._week.dow,this._week.doy).week}function Ke(){return this._week.dow}function Je(){return this._week.doy}function $e(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function ti(t){var e=xt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function ei(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function ii(t,e){return n(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]}function ni(t){return this._weekdaysShort[t.day()]}function ri(t){return this._weekdaysMin[t.day()]}function oi(t,e,i){var n,r,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;7>n;++n)o=h([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===e?(r=pn.call(this._weekdaysParse,s),-1!==r?r:null):"ddd"===e?(r=pn.call(this._shortWeekdaysParse,s),-1!==r?r:null):(r=pn.call(this._minWeekdaysParse,s),-1!==r?r:null):"dddd"===e?(r=pn.call(this._weekdaysParse,s),-1!==r?r:(r=pn.call(this._shortWeekdaysParse,s),-1!==r?r:(r=pn.call(this._minWeekdaysParse,s),-1!==r?r:null))):"ddd"===e?(r=pn.call(this._shortWeekdaysParse,s),-1!==r?r:(r=pn.call(this._weekdaysParse,s),-1!==r?r:(r=pn.call(this._minWeekdaysParse,s),-1!==r?r:null))):(r=pn.call(this._minWeekdaysParse,s),-1!==r?r:(r=pn.call(this._weekdaysParse,s),-1!==r?r:(r=pn.call(this._shortWeekdaysParse,s),-1!==r?r:null)))}function si(t,e,i){var n,r,o;if(this._weekdaysParseExact)return oi.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(r=h([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function ai(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=ei(t,this.localeData()),this.add(t-e,"d")):e}function hi(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function li(t){return this.isValid()?null==t?this.day()||7:this.day(this.day()%7?t:t-7):null!=t?this:NaN}function ci(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||fi.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex}function di(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||fi.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}function ui(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||fi.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}function fi(){function t(t,e){return e.length-t.length}var e,i,n,r,o,s=[],a=[],l=[],c=[];for(e=0;7>e;e++)i=h([2e3,1]).day(e),n=this.weekdaysMin(i,""),r=this.weekdaysShort(i,""),o=this.weekdays(i,""),s.push(n),a.push(r),l.push(o),c.push(n),c.push(r),c.push(o);for(s.sort(t),a.sort(t),l.sort(t),c.sort(t),e=0;7>e;e++)a[e]=J(a[e]),l[e]=J(l[e]),c[e]=J(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function pi(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;
return null==t?e:this.add(t-e,"d")}function mi(){return this.hours()%12||12}function gi(){return this.hours()||24}function vi(t,e){W(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ai(t,e){return e._meridiemParse}function yi(t){return"p"===(t+"").toLowerCase().charAt(0)}function bi(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Ei(t,e){e[Yn]=A(1e3*("0."+t))}function wi(){return this._isUTC?"UTC":""}function xi(){return this._isUTC?"Coordinated Universal Time":""}function _i(t){return Bt(1e3*t)}function Ti(){return Bt.apply(null,arguments).parseZone()}function Si(t,e,i){var n=this._calendar[t];return x(n)?n.call(e,i):n}function Ri(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function Ci(){return this._invalidDate}function ki(t){return this._ordinal.replace("%d",t)}function Mi(t){return t}function Hi(t,e,i,n){var r=this._relativeTime[i];return x(r)?r(t,e,i,n):r.replace(/%d/i,t)}function Pi(t,e){var i=this._relativeTime[t>0?"future":"past"];return x(i)?i(e):i.replace(/%s/i,e)}function Di(t,e,i,n){var r=O(),o=h().set(n,e);return r[i](o,t)}function Oi(t,e,i){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return Di(t,e,i,"month");var n,r=[];for(n=0;12>n;n++)r[n]=Di(t,n,i,"month");return r}function Li(t,e,i,n){"boolean"==typeof t?("number"==typeof e&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,"number"==typeof e&&(i=e,e=void 0),e=e||"");var r=O(),o=t?r._week.dow:0;if(null!=i)return Di(e,(i+o)%7,n,"day");var s,a=[];for(s=0;7>s;s++)a[s]=Di(e,(s+o)%7,n,"day");return a}function Ii(t,e){return Oi(t,e,"months")}function Bi(t,e){return Oi(t,e,"monthsShort")}function Fi(t,e,i){return Li(t,e,i,"weekdays")}function Ni(t,e,i){return Li(t,e,i,"weekdaysShort")}function zi(t,e,i){return Li(t,e,i,"weekdaysMin")}function ji(){var t=this._data;return this._milliseconds=Nr(this._milliseconds),this._days=Nr(this._days),this._months=Nr(this._months),t.milliseconds=Nr(t.milliseconds),t.seconds=Nr(t.seconds),t.minutes=Nr(t.minutes),t.hours=Nr(t.hours),t.months=Nr(t.months),t.years=Nr(t.years),this}function Ui(t,e,i,n){var r=re(e,i);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function Vi(t,e){return Ui(this,t,e,1)}function Wi(t,e){return Ui(this,t,e,-1)}function Gi(t){return 0>t?Math.floor(t):Math.ceil(t)}function Yi(){var t,e,i,n,r,o=this._milliseconds,s=this._days,a=this._months,h=this._data;return o>=0&&s>=0&&a>=0||0>=o&&0>=s&&0>=a||(o+=864e5*Gi(Xi(a)+s),s=0,a=0),h.milliseconds=o%1e3,t=v(o/1e3),h.seconds=t%60,e=v(t/60),h.minutes=e%60,i=v(e/60),h.hours=i%24,s+=v(i/24),r=v(qi(s)),a+=r,s-=Gi(Xi(r)),n=v(a/12),a%=12,h.days=s,h.months=a,h.years=n,this}function qi(t){return 4800*t/146097}function Xi(t){return 146097*t/4800}function Qi(t){var e,i,n=this._milliseconds;if(t=B(t),"month"===t||"year"===t)return e=this._days+n/864e5,i=this._months+qi(e),"month"===t?i:i/12;switch(e=this._days+Math.round(Xi(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function Zi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*A(this._months/12)}function Ki(t){return function(){return this.as(t)}}function Ji(t){return t=B(t),this[t+"s"]()}function $i(t){return function(){return this._data[t]}}function tn(){return v(this.days()/7)}function en(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function nn(t,e,i){var n=re(t).abs(),r=eo(n.as("s")),o=eo(n.as("m")),s=eo(n.as("h")),a=eo(n.as("d")),h=eo(n.as("M")),l=eo(n.as("y")),c=r<io.s&&["s",r]||1>=o&&["m"]||o<io.m&&["mm",o]||1>=s&&["h"]||s<io.h&&["hh",s]||1>=a&&["d"]||a<io.d&&["dd",a]||1>=h&&["M"]||h<io.M&&["MM",h]||1>=l&&["y"]||["yy",l];return c[2]=e,c[3]=+t>0,c[4]=i,en.apply(null,c)}function rn(t,e){return void 0===io[t]?!1:void 0===e?io[t]:(io[t]=e,!0)}function on(t){var e=this.localeData(),i=nn(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function sn(){var t,e,i,n=no(this._milliseconds)/1e3,r=no(this._days),o=no(this._months);t=v(n/60),e=v(t/60),n%=60,t%=60,i=v(o/12),o%=12;var s=i,a=o,h=r,l=e,c=t,d=n,u=this.asSeconds();return u?(0>u?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(h?h+"D":"")+(l||c||d?"T":"")+(l?l+"H":"")+(c?c+"M":"")+(d?d+"S":""):"P0D"}var an,hn;hn=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;i>n;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var ln=e.momentProperties=[],cn=!1,dn={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var un;un=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)s(t,e)&&i.push(e);return i};var fn,pn,mn={},gn={},vn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,An=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,yn={},bn={},En=/\d/,wn=/\d\d/,xn=/\d{3}/,_n=/\d{4}/,Tn=/[+-]?\d{6}/,Sn=/\d\d?/,Rn=/\d\d\d\d?/,Cn=/\d\d\d\d\d\d?/,kn=/\d{1,3}/,Mn=/\d{1,4}/,Hn=/[+-]?\d{1,6}/,Pn=/\d+/,Dn=/[+-]?\d+/,On=/Z|[+-]\d\d:?\d\d/gi,Ln=/Z|[+-]\d\d(?::?\d\d)?/gi,In=/[+-]?\d+(\.\d{1,3})?/,Bn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Fn={},Nn={},zn=0,jn=1,Un=2,Vn=3,Wn=4,Gn=5,Yn=6,qn=7,Xn=8;pn=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},W("M",["MM",2],"Mo",function(){return this.month()+1}),W("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),W("MMMM",0,0,function(t){return this.localeData().months(this,t)}),I("month","M"),Q("M",Sn),Q("MM",Sn,wn),Q("MMM",function(t,e){return e.monthsShortRegex(t)}),Q("MMMM",function(t,e){return e.monthsRegex(t)}),$(["M","MM"],function(t,e){e[jn]=A(t)-1}),$(["MMM","MMMM"],function(t,e,i,n){var r=i._locale.monthsParse(t,n,i._strict);null!=r?e[jn]=r:c(i).invalidMonth=t});var Qn=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Zn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Kn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Jn=Bn,$n=Bn,tr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,er=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ir=/Z|[+-]\d\d(?::?\d\d)?/,nr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],rr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],or=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=E("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),W("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),W(0,["YY",2],0,function(){return this.year()%100}),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),I("year","y"),Q("Y",Dn),Q("YY",Sn,wn),Q("YYYY",Mn,_n),Q("YYYYY",Hn,Tn),Q("YYYYYY",Hn,Tn),$(["YYYYY","YYYYYY"],zn),$("YYYY",function(t,i){i[zn]=2===t.length?e.parseTwoDigitYear(t):A(t)}),$("YY",function(t,i){i[zn]=e.parseTwoDigitYear(t)}),$("Y",function(t,e){e[zn]=parseInt(t,10)}),e.parseTwoDigitYear=function(t){return A(t)+(A(t)>68?1900:2e3)};var sr=N("FullYear",!0);e.ISO_8601=function(){};var ar=E("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Bt.apply(null,arguments);return this.isValid()&&t.isValid()?this>t?this:t:u()}),hr=E("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Bt.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:u()}),lr=function(){return Date.now?Date.now():+new Date};Vt("Z",":"),Vt("ZZ",""),Q("Z",Ln),Q("ZZ",Ln),$(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Wt(Ln,t)});var cr=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var dr=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,ur=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;re.fn=jt.prototype;var fr=le(1,"add"),pr=le(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var mr=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});W(0,["gg",2],0,function(){return this.weekYear()%100}),W(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ue("gggg","weekYear"),Ue("ggggg","weekYear"),Ue("GGGG","isoWeekYear"),Ue("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),Q("G",Dn),Q("g",Dn),Q("GG",Sn,wn),Q("gg",Sn,wn),Q("GGGG",Mn,_n),Q("gggg",Mn,_n),Q("GGGGG",Hn,Tn),Q("ggggg",Hn,Tn),tt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=A(t)}),tt(["gg","GG"],function(t,i,n,r){i[r]=e.parseTwoDigitYear(t)}),W("Q",0,"Qo","quarter"),I("quarter","Q"),Q("Q",En),$("Q",function(t,e){e[jn]=3*(A(t)-1)}),W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),Q("w",Sn),Q("ww",Sn,wn),Q("W",Sn),Q("WW",Sn,wn),tt(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=A(t)});var gr={dow:0,doy:6};W("D",["DD",2],"Do","date"),I("date","D"),Q("D",Sn),Q("DD",Sn,wn),Q("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),$(["D","DD"],Un),$("Do",function(t,e){e[Un]=A(t.match(Sn)[0],10)});var vr=N("Date",!0);W("d",0,"do","day"),W("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),W("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),W("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),Q("d",Sn),Q("e",Sn),Q("E",Sn),Q("dd",function(t,e){return e.weekdaysMinRegex(t)}),Q("ddd",function(t,e){return e.weekdaysShortRegex(t)}),Q("dddd",function(t,e){return e.weekdaysRegex(t)}),tt(["dd","ddd","dddd"],function(t,e,i,n){var r=i._locale.weekdaysParse(t,n,i._strict);null!=r?e.d=r:c(i).invalidWeekday=t}),tt(["d","e","E"],function(t,e,i,n){e[n]=A(t)});var Ar="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),yr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),br="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Er=Bn,wr=Bn,xr=Bn;W("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),Q("DDD",kn),Q("DDDD",xn),$(["DDD","DDDD"],function(t,e,i){i._dayOfYear=A(t)}),W("H",["HH",2],0,"hour"),W("h",["hh",2],0,mi),W("k",["kk",2],0,gi),W("hmm",0,0,function(){return""+mi.apply(this)+V(this.minutes(),2)}),W("hmmss",0,0,function(){return""+mi.apply(this)+V(this.minutes(),2)+V(this.seconds(),2)}),W("Hmm",0,0,function(){return""+this.hours()+V(this.minutes(),2)}),W("Hmmss",0,0,function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)}),vi("a",!0),vi("A",!1),I("hour","h"),Q("a",Ai),Q("A",Ai),Q("H",Sn),Q("h",Sn),Q("HH",Sn,wn),Q("hh",Sn,wn),Q("hmm",Rn),Q("hmmss",Cn),Q("Hmm",Rn),Q("Hmmss",Cn),$(["H","HH"],Vn),$(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),$(["h","hh"],function(t,e,i){e[Vn]=A(t),c(i).bigHour=!0}),$("hmm",function(t,e,i){var n=t.length-2;e[Vn]=A(t.substr(0,n)),e[Wn]=A(t.substr(n)),c(i).bigHour=!0}),$("hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[Vn]=A(t.substr(0,n)),e[Wn]=A(t.substr(n,2)),e[Gn]=A(t.substr(r)),c(i).bigHour=!0}),$("Hmm",function(t,e,i){var n=t.length-2;e[Vn]=A(t.substr(0,n)),e[Wn]=A(t.substr(n))}),$("Hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[Vn]=A(t.substr(0,n)),e[Wn]=A(t.substr(n,2)),e[Gn]=A(t.substr(r))});var _r=/[ap]\.?m?\.?/i,Tr=N("Hours",!0);W("m",["mm",2],0,"minute"),I("minute","m"),Q("m",Sn),Q("mm",Sn,wn),$(["m","mm"],Wn);var Sr=N("Minutes",!1);W("s",["ss",2],0,"second"),I("second","s"),Q("s",Sn),Q("ss",Sn,wn),$(["s","ss"],Gn);var Rr=N("Seconds",!1);W("S",0,0,function(){return~~(this.millisecond()/100)}),W(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,function(){return 10*this.millisecond()}),W(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),W(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),W(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),W(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),W(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),Q("S",kn,En),Q("SS",kn,wn),Q("SSS",kn,xn);var Cr;for(Cr="SSSS";Cr.length<=9;Cr+="S")Q(Cr,Pn);for(Cr="S";Cr.length<=9;Cr+="S")$(Cr,Ei);var kr=N("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var Mr=m.prototype;Mr.add=fr,Mr.calendar=de,Mr.clone=ue,Mr.diff=ye,Mr.endOf=He,Mr.format=xe,Mr.from=_e,Mr.fromNow=Te,Mr.to=Se,Mr.toNow=Re,Mr.get=U,Mr.invalidAt=ze,Mr.isAfter=fe,Mr.isBefore=pe,Mr.isBetween=me,Mr.isSame=ge,Mr.isSameOrAfter=ve,Mr.isSameOrBefore=Ae,Mr.isValid=Fe,Mr.lang=mr,Mr.locale=Ce,Mr.localeData=ke,Mr.max=hr,Mr.min=ar,Mr.parsingFlags=Ne,Mr.set=U,Mr.startOf=Me,Mr.subtract=pr,Mr.toArray=Le,Mr.toObject=Ie,Mr.toDate=Oe,Mr.toISOString=we,Mr.toJSON=Be,Mr.toString=Ee,Mr.unix=De,Mr.valueOf=Pe,Mr.creationData=je,Mr.year=sr,Mr.isLeapYear=bt,Mr.weekYear=Ve,Mr.isoWeekYear=We,Mr.quarter=Mr.quarters=Qe,Mr.month=ht,Mr.daysInMonth=lt,Mr.week=Mr.weeks=$e,Mr.isoWeek=Mr.isoWeeks=ti,Mr.weeksInYear=Ye,Mr.isoWeeksInYear=Ge,Mr.date=vr,Mr.day=Mr.days=ai,Mr.weekday=hi,Mr.isoWeekday=li,Mr.dayOfYear=pi,Mr.hour=Mr.hours=Tr,Mr.minute=Mr.minutes=Sr,Mr.second=Mr.seconds=Rr,Mr.millisecond=Mr.milliseconds=kr,Mr.utcOffset=qt,Mr.utc=Qt,Mr.local=Zt,Mr.parseZone=Kt,Mr.hasAlignedHourOffset=Jt,Mr.isDST=$t,Mr.isDSTShifted=te,Mr.isLocal=ee,Mr.isUtcOffset=ie,Mr.isUtc=ne,Mr.isUTC=ne,Mr.zoneAbbr=wi,Mr.zoneName=xi,Mr.dates=E("dates accessor is deprecated. Use date instead.",vr),Mr.months=E("months accessor is deprecated. Use month instead",ht),Mr.years=E("years accessor is deprecated. Use year instead",sr),Mr.zone=E("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Xt);var Hr=Mr,Pr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Dr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Or="Invalid date",Lr="%d",Ir=/\d{1,2}/,Br={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Fr=R.prototype;Fr._calendar=Pr,Fr.calendar=Si,Fr._longDateFormat=Dr,Fr.longDateFormat=Ri,Fr._invalidDate=Or,Fr.invalidDate=Ci,Fr._ordinal=Lr,Fr.ordinal=ki,Fr._ordinalParse=Ir,Fr.preparse=Mi,Fr.postformat=Mi,Fr._relativeTime=Br,Fr.relativeTime=Hi,Fr.pastFuture=Pi,Fr.set=T,Fr.months=nt,Fr._months=Zn,Fr.monthsShort=rt,Fr._monthsShort=Kn,Fr.monthsParse=st,Fr._monthsRegex=$n,Fr.monthsRegex=dt,Fr._monthsShortRegex=Jn,Fr.monthsShortRegex=ct,Fr.week=Ze,Fr._week=gr,Fr.firstDayOfYear=Je,Fr.firstDayOfWeek=Ke,Fr.weekdays=ii,Fr._weekdays=Ar,Fr.weekdaysMin=ri,Fr._weekdaysMin=br,Fr.weekdaysShort=ni,Fr._weekdaysShort=yr,Fr.weekdaysParse=si,Fr._weekdaysRegex=Er,Fr.weekdaysRegex=ci,Fr._weekdaysShortRegex=wr,Fr.weekdaysShortRegex=di,Fr._weekdaysMinRegex=xr,Fr.weekdaysMinRegex=ui,Fr.isPM=yi,Fr._meridiemParse=_r,Fr.meridiem=bi,H("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===A(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),e.lang=E("moment.lang is deprecated. Use moment.locale instead.",H),e.langData=E("moment.langData is deprecated. Use moment.localeData instead.",O);var Nr=Math.abs,zr=Ki("ms"),jr=Ki("s"),Ur=Ki("m"),Vr=Ki("h"),Wr=Ki("d"),Gr=Ki("w"),Yr=Ki("M"),qr=Ki("y"),Xr=$i("milliseconds"),Qr=$i("seconds"),Zr=$i("minutes"),Kr=$i("hours"),Jr=$i("days"),$r=$i("months"),to=$i("years"),eo=Math.round,io={s:45,m:45,h:22,d:26,M:11},no=Math.abs,ro=jt.prototype;ro.abs=ji,ro.add=Vi,ro.subtract=Wi,ro.as=Qi,ro.asMilliseconds=zr,ro.asSeconds=jr,ro.asMinutes=Ur,ro.asHours=Vr,ro.asDays=Wr,ro.asWeeks=Gr,ro.asMonths=Yr,ro.asYears=qr,ro.valueOf=Zi,ro._bubble=Yi,ro.get=Ji,ro.milliseconds=Xr,ro.seconds=Qr,ro.minutes=Zr,ro.hours=Kr,ro.days=Jr,ro.weeks=tn,ro.months=$r,ro.years=to,ro.humanize=on,ro.toISOString=sn,ro.toString=sn,ro.toJSON=sn,ro.locale=Ce,ro.localeData=ke,ro.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",sn),ro.lang=mr,W("X",0,0,"unix"),W("x",0,0,"valueOf"),Q("x",Dn),Q("X",In),$("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),$("x",function(t,e,i){i._d=new Date(A(t))}),e.version="2.13.0",i(Bt),e.fn=Hr,e.min=Nt,e.max=zt,e.now=lr,e.utc=h,e.unix=_i,e.months=Ii,e.isDate=r,e.locale=H,e.invalid=u,e.duration=re,e.isMoment=g,e.weekdays=Fi,e.parseZone=Ti,e.localeData=O,e.isDuration=Ut,e.monthsShort=Bi,e.weekdaysMin=zi,e.defineLocale=P,e.updateLocale=D,e.locales=L,e.weekdaysShort=Ni,e.normalizeUnits=B,e.relativeTimeThreshold=rn,e.prototype=Hr;var oo=e;return oo})}).call(e,i(4)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){function i(t){throw new Error("Cannot find module '"+t+"'.")}i.keys=function(){return[]},i.resolve=i,t.exports=i,i.id=5},function(t,e){(function(e){function i(t,e,i){var n=e&&i||0,r=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>r&&(e[n+r++]=d[t])});16>r;)e[n+r++]=0;return e}function n(t,e){var i=e||0,n=c;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}function r(t,e,i){var r=e&&i||0,o=e||[];t=t||{};var s=void 0!==t.clockseq?t.clockseq:m,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:v+1,l=a-g+(h-v)/1e4;if(0>l&&void 0===t.clockseq&&(s=s+1&16383),(0>l||a>g)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=a,v=h,m=s,a+=122192928e5;var c=(1e4*(268435455&a)+h)%4294967296;o[r++]=c>>>24&255,o[r++]=c>>>16&255,o[r++]=c>>>8&255,o[r++]=255&c;var d=a/4294967296*1e4&268435455;o[r++]=d>>>8&255,o[r++]=255&d,o[r++]=d>>>24&15|16,o[r++]=d>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var u=t.node||p,f=0;6>f;f++)o[r+f]=u[f];return e?e:n(o)}function o(t,e,i){var r=e&&i||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var o=t.random||(t.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;16>a;a++)e[r+a]=o[a];return e||n(o)}var s,a="undefined"!=typeof window?window:"undefined"!=typeof e?e:null;if(a&&a.crypto&&crypto.getRandomValues){var h=new Uint8Array(16);s=function(){return crypto.getRandomValues(h),h}}if(!s){var l=new Array(16);s=function(){for(var t,e=0;16>e;e++)0===(3&e)&&(t=4294967296*Math.random()),l[e]=t>>>((3&e)<<3)&255;return l}}for(var c=[],d={},u=0;256>u;u++)c[u]=(u+256).toString(16).substr(1),d[c[u]]=u;var f=s(),p=[1|f[0],f[1],f[2],f[3],f[4],f[5]],m=16383&(f[6]<<8|f[7]),g=0,v=0,A=o;A.v1=r,A.v4=o,A.parse=i,A.unparse=n,t.exports=A}).call(e,function(){return this}())},function(t,e,i){e.util=i(1),e.DOMutil=i(8),e.DataSet=i(9),e.DataView=i(11),e.Queue=i(10),e.Graph3d=i(12),e.graph3d={Camera:i(16),Filter:i(17),Point2d:i(15),Point3d:i(14),Slider:i(18),StepNumber:i(19)},e.moment=i(2),e.Hammer=i(20),e.keycharm=i(23)},function(t,e){e.prepareElements=function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e].redundant=t[e].used,t[e].used=[])},e.cleanupElements=function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e].redundant){for(var i=0;i<t[e].redundant.length;i++)t[e].redundant[i].parentNode.removeChild(t[e].redundant[i]);t[e].redundant=[]}},e.resetElements=function(t){e.prepareElements(t),e.cleanupElements(t),e.prepareElements(t)},e.getSVGElement=function(t,e,i){var n;return e.hasOwnProperty(t)?e[t].redundant.length>0?(n=e[t].redundant[0],e[t].redundant.shift()):(n=document.createElementNS("http://www.w3.org/2000/svg",t),i.appendChild(n)):(n=document.createElementNS("http://www.w3.org/2000/svg",t),e[t]={used:[],redundant:[]},i.appendChild(n)),e[t].used.push(n),n},e.getDOMElement=function(t,e,i,n){var r;return e.hasOwnProperty(t)?e[t].redundant.length>0?(r=e[t].redundant[0],e[t].redundant.shift()):(r=document.createElement(t),void 0!==n?i.insertBefore(r,n):i.appendChild(r)):(r=document.createElement(t),e[t]={used:[],redundant:[]},void 0!==n?i.insertBefore(r,n):i.appendChild(r)),e[t].used.push(r),r},e.drawPoint=function(t,i,n,r,o,s){var a;if("circle"==n.style?(a=e.getSVGElement("circle",r,o),a.setAttributeNS(null,"cx",t),a.setAttributeNS(null,"cy",i),a.setAttributeNS(null,"r",.5*n.size)):(a=e.getSVGElement("rect",r,o),a.setAttributeNS(null,"x",t-.5*n.size),a.setAttributeNS(null,"y",i-.5*n.size),a.setAttributeNS(null,"width",n.size),a.setAttributeNS(null,"height",n.size)),void 0!==n.styles&&a.setAttributeNS(null,"style",n.styles),a.setAttributeNS(null,"class",n.className+" vis-point"),s){var h=e.getSVGElement("text",r,o);s.xOffset&&(t+=s.xOffset),s.yOffset&&(i+=s.yOffset),s.content&&(h.textContent=s.content),s.className&&h.setAttributeNS(null,"class",s.className+" vis-label"),h.setAttributeNS(null,"x",t),h.setAttributeNS(null,"y",i)}return a},e.drawBar=function(t,i,n,r,o,s,a,h){if(0!=r){0>r&&(r*=-1,i-=r);var l=e.getSVGElement("rect",s,a);l.setAttributeNS(null,"x",t-.5*n),l.setAttributeNS(null,"y",i),l.setAttributeNS(null,"width",n),l.setAttributeNS(null,"height",r),l.setAttributeNS(null,"class",o),h&&l.setAttributeNS(null,"style",h)}}},function(t,e,i){function n(t,e){if(t&&!Array.isArray(t)&&(e=t,t=null),this._options=e||{},this._data={},this.length=0,this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(var i=Object.keys(this._options.type),n=0,r=i.length;r>n;n++){var o=i[n],s=this._options.type[o];"Date"==s||"ISODate"==s||"ASPDate"==s?this._type[o]="Date":this._type[o]=s}if(this._options.convert)throw new Error('Option "convert" is deprecated. Use "type" instead.');this._subscribers={},t&&this.add(t),this.setOptions(e)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=i(1),s=i(10);n.prototype.setOptions=function(t){t&&void 0!==t.queue&&(t.queue===!1?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=s.extend(this,{replace:["add","update","remove"]})),"object"===r(t.queue)&&this._queue.setOptions(t.queue)))},n.prototype.on=function(t,e){var i=this._subscribers[t];i||(i=[],this._subscribers[t]=i),i.push({callback:e})},n.prototype.subscribe=function(){throw new Error("DataSet.subscribe is deprecated. Use DataSet.on instead.")},n.prototype.off=function(t,e){var i=this._subscribers[t];i&&(this._subscribers[t]=i.filter(function(t){return t.callback!=e}))},n.prototype.unsubscribe=function(){throw new Error("DataSet.unsubscribe is deprecated. Use DataSet.off instead.")},n.prototype._trigger=function(t,e,i){if("*"==t)throw new Error("Cannot trigger event *");var n=[];t in this._subscribers&&(n=n.concat(this._subscribers[t])),"*"in this._subscribers&&(n=n.concat(this._subscribers["*"]));for(var r=0,o=n.length;o>r;r++){var s=n[r];s.callback&&s.callback(t,e,i||null)}},n.prototype.add=function(t,e){var i,n=[],r=this;if(Array.isArray(t))for(var o=0,s=t.length;s>o;o++)i=r._addItem(t[o]),n.push(i);else{if(!(t instanceof Object))throw new Error("Unknown dataType");i=r._addItem(t),n.push(i)}return n.length&&this._trigger("add",{items:n},e),n},n.prototype.update=function(t,e){var i=[],n=[],r=[],s=[],a=this,h=a._fieldId,l=function(t){var e=t[h];if(a._data[e]){var l=o.extend({},a._data[e]);e=a._updateItem(t),n.push(e),s.push(t),r.push(l)}else e=a._addItem(t),i.push(e)};if(Array.isArray(t))for(var c=0,d=t.length;d>c;c++)t[c]instanceof Object?l(t[c]):console.warn("Ignoring input item, which is not an object at index "+c);else{if(!(t instanceof Object))throw new Error("Unknown dataType");l(t)}if(i.length&&this._trigger("add",{items:i},e),n.length){var u={items:n,oldData:r,data:s};this._trigger("update",u,e)}return i.concat(n)},n.prototype.get=function(t){var e,i,n,r=this,s=o.getType(arguments[0]);"String"==s||"Number"==s?(e=arguments[0],n=arguments[1]):"Array"==s?(i=arguments[0],n=arguments[1]):n=arguments[0];var a;if(n&&n.returnType){var h=["Array","Object"];a=-1==h.indexOf(n.returnType)?"Array":n.returnType}else a="Array";var l,c,d,u,f,p=n&&n.type||this._options.type,m=n&&n.filter,g=[];if(void 0!=e)l=r._getItem(e,p),l&&m&&!m(l)&&(l=null);else if(void 0!=i)for(u=0,f=i.length;f>u;u++)l=r._getItem(i[u],p),m&&!m(l)||g.push(l);else for(c=Object.keys(this._data),u=0,f=c.length;f>u;u++)d=c[u],l=r._getItem(d,p),m&&!m(l)||g.push(l);if(n&&n.order&&void 0==e&&this._sort(g,n.order),n&&n.fields){var v=n.fields;if(void 0!=e)l=this._filterFields(l,v);else for(u=0,f=g.length;f>u;u++)g[u]=this._filterFields(g[u],v)}if("Object"==a){var A,y={};for(u=0,f=g.length;f>u;u++)A=g[u],y[A.id]=A;return y}return void 0!=e?l:g},n.prototype.getIds=function(t){var e,i,n,r,o,s=this._data,a=t&&t.filter,h=t&&t.order,l=t&&t.type||this._options.type,c=Object.keys(s),d=[];if(a)if(h){for(o=[],e=0,i=c.length;i>e;e++)n=c[e],r=this._getItem(n,l),a(r)&&o.push(r);for(this._sort(o,h),e=0,i=o.length;i>e;e++)d.push(o[e][this._fieldId])}else for(e=0,i=c.length;i>e;e++)n=c[e],r=this._getItem(n,l),a(r)&&d.push(r[this._fieldId]);else if(h){for(o=[],e=0,i=c.length;i>e;e++)n=c[e],o.push(s[n]);for(this._sort(o,h),e=0,i=o.length;i>e;e++)d.push(o[e][this._fieldId])}else for(e=0,i=c.length;i>e;e++)n=c[e],r=s[n],d.push(r[this._fieldId]);return d},n.prototype.getDataSet=function(){return this},n.prototype.forEach=function(t,e){var i,n,r,o,s=e&&e.filter,a=e&&e.type||this._options.type,h=this._data,l=Object.keys(h);if(e&&e.order){var c=this.get(e);for(i=0,n=c.length;n>i;i++)r=c[i],o=r[this._fieldId],t(r,o)}else for(i=0,n=l.length;n>i;i++)o=l[i],r=this._getItem(o,a),s&&!s(r)||t(r,o)},n.prototype.map=function(t,e){var i,n,r,o,s=e&&e.filter,a=e&&e.type||this._options.type,h=[],l=this._data,c=Object.keys(l);for(i=0,n=c.length;n>i;i++)r=c[i],o=this._getItem(r,a),s&&!s(o)||h.push(t(o,r));return e&&e.order&&this._sort(h,e.order),h},n.prototype._filterFields=function(t,e){if(!t)return t;var i,n,r={},o=Object.keys(t),s=o.length;if(Array.isArray(e))for(i=0;s>i;i++)n=o[i],-1!=e.indexOf(n)&&(r[n]=t[n]);else for(i=0;s>i;i++)n=o[i],e.hasOwnProperty(n)&&(r[e[n]]=t[n]);return r},n.prototype._sort=function(t,e){if(o.isString(e)){var i=e;t.sort(function(t,e){var n=t[i],r=e[i];return n>r?1:r>n?-1:0})}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");t.sort(e)}},n.prototype.remove=function(t,e){var i,n,r,o=[];if(Array.isArray(t))for(i=0,n=t.length;n>i;i++)r=this._remove(t[i]),null!=r&&o.push(r);else r=this._remove(t),null!=r&&o.push(r);return o.length&&this._trigger("remove",{items:o},e),o},n.prototype._remove=function(t){if(o.isNumber(t)||o.isString(t)){if(this._data[t])return delete this._data[t],this.length--,t}else if(t instanceof Object){var e=t[this._fieldId];if(void 0!==e&&this._data[e])return delete this._data[e],this.length--,e}return null},n.prototype.clear=function(t){var e=Object.keys(this._data);return this._data={},this.length=0,this._trigger("remove",{items:e},t),e},n.prototype.max=function(t){var e,i,n=this._data,r=Object.keys(n),o=null,s=null;for(e=0,i=r.length;i>e;e++){var a=r[e],h=n[a],l=h[t];null!=l&&(!o||l>s)&&(o=h,s=l)}return o},n.prototype.min=function(t){var e,i,n=this._data,r=Object.keys(n),o=null,s=null;for(e=0,i=r.length;i>e;e++){var a=r[e],h=n[a],l=h[t];null!=l&&(!o||s>l)&&(o=h,s=l)}return o},n.prototype.distinct=function(t){var e,i,n,r=this._data,s=Object.keys(r),a=[],h=this._options.type&&this._options.type[t]||null,l=0;for(e=0,n=s.length;n>e;e++){var c=s[e],d=r[c],u=d[t],f=!1;for(i=0;l>i;i++)if(a[i]==u){f=!0;break}f||void 0===u||(a[l]=u,l++)}if(h)for(e=0,n=a.length;n>e;e++)a[e]=o.convert(a[e],h);return a},n.prototype._addItem=function(t){var e=t[this._fieldId];if(void 0!=e){if(this._data[e])throw new Error("Cannot add item: item with id "+e+" already exists")}else e=o.randomUUID(),t[this._fieldId]=e;var i,n,r={},s=Object.keys(t);for(i=0,n=s.length;n>i;i++){var a=s[i],h=this._type[a];r[a]=o.convert(t[a],h)}return this._data[e]=r,this.length++,e},n.prototype._getItem=function(t,e){var i,n,r,s,a=this._data[t];if(!a)return null;var h={},l=Object.keys(a);if(e)for(r=0,s=l.length;s>r;r++)i=l[r],n=a[i],h[i]=o.convert(n,e[i]);else for(r=0,s=l.length;s>r;r++)i=l[r],n=a[i],h[i]=n;return h},n.prototype._updateItem=function(t){var e=t[this._fieldId];if(void 0==e)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(t)+")");var i=this._data[e];if(!i)throw new Error("Cannot update item: no item with id "+e+" found");for(var n=Object.keys(t),r=0,s=n.length;s>r;r++){var a=n[r],h=this._type[a];i[a]=o.convert(t[a],h)}return e},t.exports=n},function(t,e){function i(t){this.delay=null,this.max=1/0,this._queue=[],this._timeout=null,this._extended=null,this.setOptions(t)}i.prototype.setOptions=function(t){t&&"undefined"!=typeof t.delay&&(this.delay=t.delay),t&&"undefined"!=typeof t.max&&(this.max=t.max),this._flushIfNeeded()},i.extend=function(t,e){var n=new i(e);if(void 0!==t.flush)throw new Error("Target object already has a property flush");t.flush=function(){n.flush()};var r=[{name:"flush",original:void 0}];if(e&&e.replace)for(var o=0;o<e.replace.length;o++){var s=e.replace[o];r.push({name:s,original:t[s]}),n.replace(t,s)}return n._extended={object:t,methods:r},n},i.prototype.destroy=function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,i=0;i<e.length;i++){var n=e[i];n.original?t[n.name]=n.original:delete t[n.name]}this._extended=null}},i.prototype.replace=function(t,e){var i=this,n=t[e];if(!n)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.queue({args:t,fn:n,context:this})}},i.prototype.queue=function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()},i.prototype._flushIfNeeded=function(){if(this._queue.length>this.max&&this.flush(),clearTimeout(this._timeout),this.queue.length>0&&"number"==typeof this.delay){var t=this;this._timeout=setTimeout(function(){t.flush()},this.delay)}},i.prototype.flush=function(){for(;this._queue.length>0;){var t=this._queue.shift();t.fn.apply(t.context||t.fn,t.args||[])}},t.exports=i},function(t,e,i){function n(t,e){this._data=null,this._ids={},this.length=0,this._options=e||{},this._fieldId="id",this._subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)},this.setData(t)}var r=i(1),o=i(9);n.prototype.setData=function(t){var e,i,n,r;if(this._data&&(this._data.off&&this._data.off("*",this.listener),e=Object.keys(this._ids),this._ids={},this.length=0,this._trigger("remove",{items:e})),this._data=t,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",
e=this._data.getIds({filter:this._options&&this._options.filter}),n=0,r=e.length;r>n;n++)i=e[n],this._ids[i]=!0;this.length=e.length,this._trigger("add",{items:e}),this._data.on&&this._data.on("*",this.listener)}},n.prototype.refresh=function(){var t,e,i,n=this._data.getIds({filter:this._options&&this._options.filter}),r=Object.keys(this._ids),o={},s=[],a=[];for(e=0,i=n.length;i>e;e++)t=n[e],o[t]=!0,this._ids[t]||(s.push(t),this._ids[t]=!0);for(e=0,i=r.length;i>e;e++)t=r[e],o[t]||(a.push(t),delete this._ids[t]);this.length+=s.length-a.length,s.length&&this._trigger("add",{items:s}),a.length&&this._trigger("remove",{items:a})},n.prototype.get=function(t){var e,i,n,o=this,s=r.getType(arguments[0]);"String"==s||"Number"==s||"Array"==s?(e=arguments[0],i=arguments[1],n=arguments[2]):(i=arguments[0],n=arguments[1]);var a=r.extend({},this._options,i);this._options.filter&&i&&i.filter&&(a.filter=function(t){return o._options.filter(t)&&i.filter(t)});var h=[];return void 0!=e&&h.push(e),h.push(a),h.push(n),this._data&&this._data.get.apply(this._data,h)},n.prototype.getIds=function(t){var e;if(this._data){var i,n=this._options.filter;i=t&&t.filter?n?function(e){return n(e)&&t.filter(e)}:t.filter:n,e=this._data.getIds({filter:i,order:t&&t.order})}else e=[];return e},n.prototype.map=function(t,e){var i=[];if(this._data){var n,r=this._options.filter;n=e&&e.filter?r?function(t){return r(t)&&e.filter(t)}:e.filter:r,i=this._data.map(t,{filter:n,order:e&&e.order})}else i=[];return i},n.prototype.getDataSet=function(){for(var t=this;t instanceof n;)t=t._data;return t||null},n.prototype._onEvent=function(t,e,i){var n,r,o,s,a=e&&e.items,h=this._data,l=[],c=[],d=[],u=[];if(a&&h){switch(t){case"add":for(n=0,r=a.length;r>n;n++)o=a[n],s=this.get(o),s&&(this._ids[o]=!0,c.push(o));break;case"update":for(n=0,r=a.length;r>n;n++)o=a[n],s=this.get(o),s?this._ids[o]?(d.push(o),l.push(e.data[n])):(this._ids[o]=!0,c.push(o)):this._ids[o]&&(delete this._ids[o],u.push(o));break;case"remove":for(n=0,r=a.length;r>n;n++)o=a[n],this._ids[o]&&(delete this._ids[o],u.push(o))}this.length+=c.length-u.length,c.length&&this._trigger("add",{items:c},i),d.length&&this._trigger("update",{items:d,data:l},i),u.length&&this._trigger("remove",{items:u},i)}},n.prototype.on=o.prototype.on,n.prototype.off=o.prototype.off,n.prototype._trigger=o.prototype._trigger,n.prototype.subscribe=n.prototype.on,n.prototype.unsubscribe=n.prototype.off,t.exports=n},function(t,e,i){function n(t,e,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=t,this.width="400px",this.height="400px",this.margin=10,this.defaultXCenter="55%",this.defaultYCenter="50%",this.xLabel="x",this.yLabel="y",this.zLabel="z";var r=function(t){return t};this.xValueLabel=r,this.yValueLabel=r,this.zValueLabel=r,this.filterLabel="time",this.legendLabel="value",this.style=n.STYLE.DOT,this.showPerspective=!0,this.showGrid=!0,this.keepAspectRatio=!0,this.showShadow=!1,this.showGrayBottom=!1,this.showTooltip=!1,this.verticalRatio=.5,this.animationInterval=1e3,this.animationPreload=!1,this.camera=new f,this.camera.setArmRotation(1,.5),this.camera.setArmLength(1.7),this.eye=new d(0,0,-1),this.dataTable=null,this.dataPoints=null,this.colX=void 0,this.colY=void 0,this.colZ=void 0,this.colValue=void 0,this.colFilter=void 0,this.xMin=0,this.xStep=void 0,this.xMax=1,this.yMin=0,this.yStep=void 0,this.yMax=1,this.zMin=0,this.zStep=void 0,this.zMax=1,this.valueMin=0,this.valueMax=1,this.xBarWidth=1,this.yBarWidth=1,this.axisColor="#4D4D4D",this.gridColor="#D3D3D3",this.dataColor={fill:"#7DC1FF",stroke:"#3267D2",strokeWidth:1},this.dotSizeRatio=.02,this.create(),this.setOptions(i),e&&this.setData(e)}function r(t){return"clientX"in t?t.clientX:t.targetTouches[0]&&t.targetTouches[0].clientX||0}function o(t){return"clientY"in t?t.clientY:t.targetTouches[0]&&t.targetTouches[0].clientY||0}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=i(13),h=i(9),l=i(11),c=i(1),d=i(14),u=i(15),f=i(16),p=i(17),m=i(18),g=i(19);a(n.prototype),n.prototype._setScale=function(){this.scale=new d(1/(this.xMax-this.xMin),1/(this.yMax-this.yMin),1/(this.zMax-this.zMin)),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,this.scale.value=1/(this.valueMax-this.valueMin);var t=(this.xMax+this.xMin)/2*this.scale.x,e=(this.yMax+this.yMin)/2*this.scale.y,i=(this.zMax+this.zMin)/2*this.scale.z;this.camera.setArmLocation(t,e,i)},n.prototype._convert3Dto2D=function(t){var e=this._convertPointToTranslation(t);return this._convertTranslationToScreen(e)},n.prototype._convertPointToTranslation=function(t){var e=t.x*this.scale.x,i=t.y*this.scale.y,n=t.z*this.scale.z,r=this.camera.getCameraLocation().x,o=this.camera.getCameraLocation().y,s=this.camera.getCameraLocation().z,a=Math.sin(this.camera.getCameraRotation().x),h=Math.cos(this.camera.getCameraRotation().x),l=Math.sin(this.camera.getCameraRotation().y),c=Math.cos(this.camera.getCameraRotation().y),u=Math.sin(this.camera.getCameraRotation().z),f=Math.cos(this.camera.getCameraRotation().z),p=c*(u*(i-o)+f*(e-r))-l*(n-s),m=a*(c*(n-s)+l*(u*(i-o)+f*(e-r)))+h*(f*(i-o)-u*(e-r)),g=h*(c*(n-s)+l*(u*(i-o)+f*(e-r)))-a*(f*(i-o)-u*(e-r));return new d(p,m,g)},n.prototype._convertTranslationToScreen=function(t){var e,i,n=this.eye.x,r=this.eye.y,o=this.eye.z,s=t.x,a=t.y,h=t.z;return this.showPerspective?(e=(s-n)*(o/h),i=(a-r)*(o/h)):(e=s*-(o/this.camera.getArmLength()),i=a*-(o/this.camera.getArmLength())),new u(this.xcenter+e*this.frame.canvas.clientWidth,this.ycenter-i*this.frame.canvas.clientWidth)},n.prototype._setBackgroundColor=function(t){var e="white",i="gray",n=1;if("string"==typeof t)e=t,i="none",n=0;else if("object"===("undefined"==typeof t?"undefined":s(t)))void 0!==t.fill&&(e=t.fill),void 0!==t.stroke&&(i=t.stroke),void 0!==t.strokeWidth&&(n=t.strokeWidth);else if(void 0!==t)throw"Unsupported type of backgroundColor";this.frame.style.backgroundColor=e,this.frame.style.borderColor=i,this.frame.style.borderWidth=n+"px",this.frame.style.borderStyle="solid"},n.STYLE={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},n.prototype._getStyleNumber=function(t){switch(t){case"dot":return n.STYLE.DOT;case"dot-line":return n.STYLE.DOTLINE;case"dot-color":return n.STYLE.DOTCOLOR;case"dot-size":return n.STYLE.DOTSIZE;case"line":return n.STYLE.LINE;case"grid":return n.STYLE.GRID;case"surface":return n.STYLE.SURFACE;case"bar":return n.STYLE.BAR;case"bar-color":return n.STYLE.BARCOLOR;case"bar-size":return n.STYLE.BARSIZE}return-1},n.prototype._determineColumnIndexes=function(t,e){if(this.style===n.STYLE.DOT||this.style===n.STYLE.DOTLINE||this.style===n.STYLE.LINE||this.style===n.STYLE.GRID||this.style===n.STYLE.SURFACE||this.style===n.STYLE.BAR)this.colX=0,this.colY=1,this.colZ=2,this.colValue=void 0,t.getNumberOfColumns()>3&&(this.colFilter=3);else{if(this.style!==n.STYLE.DOTCOLOR&&this.style!==n.STYLE.DOTSIZE&&this.style!==n.STYLE.BARCOLOR&&this.style!==n.STYLE.BARSIZE)throw'Unknown style "'+this.style+'"';this.colX=0,this.colY=1,this.colZ=2,this.colValue=3,t.getNumberOfColumns()>4&&(this.colFilter=4)}},n.prototype.getNumberOfRows=function(t){return t.length},n.prototype.getNumberOfColumns=function(t){var e=0;for(var i in t[0])t[0].hasOwnProperty(i)&&e++;return e},n.prototype.getDistinctValues=function(t,e){for(var i=[],n=0;n<t.length;n++)-1==i.indexOf(t[n][e])&&i.push(t[n][e]);return i},n.prototype.getColumnRange=function(t,e){for(var i={min:t[0][e],max:t[0][e]},n=0;n<t.length;n++)i.min>t[n][e]&&(i.min=t[n][e]),i.max<t[n][e]&&(i.max=t[n][e]);return i},n.prototype._dataInitialize=function(t,e){var i=this;if(this.dataSet&&this.dataSet.off("*",this._onChange),void 0!==t){Array.isArray(t)&&(t=new h(t));var r;if(!(t instanceof h||t instanceof l))throw new Error("Array, DataSet, or DataView expected");if(r=t.get(),0!=r.length){this.dataSet=t,this.dataTable=r,this._onChange=function(){i.setData(i.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z",this.colValue="style",this.colFilter="filter",r[0].hasOwnProperty("filter")&&void 0===this.dataFilter&&(this.dataFilter=new p(t,this.colFilter,this),this.dataFilter.setOnLoadCallback(function(){i.redraw()}));var o=this.style==n.STYLE.BAR||this.style==n.STYLE.BARCOLOR||this.style==n.STYLE.BARSIZE;if(o){if(void 0!==this.defaultXBarWidth)this.xBarWidth=this.defaultXBarWidth;else{var s=this.getDistinctValues(r,this.colX);this.xBarWidth=s[1]-s[0]||1}if(void 0!==this.defaultYBarWidth)this.yBarWidth=this.defaultYBarWidth;else{var a=this.getDistinctValues(r,this.colY);this.yBarWidth=a[1]-a[0]||1}}var c=this.getColumnRange(r,this.colX);o&&(c.min-=this.xBarWidth/2,c.max+=this.xBarWidth/2),this.xMin=void 0!==this.defaultXMin?this.defaultXMin:c.min,this.xMax=void 0!==this.defaultXMax?this.defaultXMax:c.max,this.xMax<=this.xMin&&(this.xMax=this.xMin+1),this.xStep=void 0!==this.defaultXStep?this.defaultXStep:(this.xMax-this.xMin)/5;var d=this.getColumnRange(r,this.colY);o&&(d.min-=this.yBarWidth/2,d.max+=this.yBarWidth/2),this.yMin=void 0!==this.defaultYMin?this.defaultYMin:d.min,this.yMax=void 0!==this.defaultYMax?this.defaultYMax:d.max,this.yMax<=this.yMin&&(this.yMax=this.yMin+1),this.yStep=void 0!==this.defaultYStep?this.defaultYStep:(this.yMax-this.yMin)/5;var u=this.getColumnRange(r,this.colZ);if(this.zMin=void 0!==this.defaultZMin?this.defaultZMin:u.min,this.zMax=void 0!==this.defaultZMax?this.defaultZMax:u.max,this.zMax<=this.zMin&&(this.zMax=this.zMin+1),this.zStep=void 0!==this.defaultZStep?this.defaultZStep:(this.zMax-this.zMin)/5,void 0!==this.colValue){var f=this.getColumnRange(r,this.colValue);this.valueMin=void 0!==this.defaultValueMin?this.defaultValueMin:f.min,this.valueMax=void 0!==this.defaultValueMax?this.defaultValueMax:f.max,this.valueMax<=this.valueMin&&(this.valueMax=this.valueMin+1)}this._setScale()}}},n.prototype._getDataPoints=function(t){var e,i,r,o,s,a,h=[];if(this.style===n.STYLE.GRID||this.style===n.STYLE.SURFACE){var l=[],c=[];for(r=0;r<this.getNumberOfRows(t);r++)e=t[r][this.colX]||0,i=t[r][this.colY]||0,-1===l.indexOf(e)&&l.push(e),-1===c.indexOf(i)&&c.push(i);var u=function(t,e){return t-e};l.sort(u),c.sort(u);var f=[];for(r=0;r<t.length;r++){e=t[r][this.colX]||0,i=t[r][this.colY]||0,o=t[r][this.colZ]||0;var p=l.indexOf(e),m=c.indexOf(i);void 0===f[p]&&(f[p]=[]);var g=new d;g.x=e,g.y=i,g.z=o,s={},s.point=g,s.trans=void 0,s.screen=void 0,s.bottom=new d(e,i,this.zMin),f[p][m]=s,h.push(s)}for(e=0;e<f.length;e++)for(i=0;i<f[e].length;i++)f[e][i]&&(f[e][i].pointRight=e<f.length-1?f[e+1][i]:void 0,f[e][i].pointTop=i<f[e].length-1?f[e][i+1]:void 0,f[e][i].pointCross=e<f.length-1&&i<f[e].length-1?f[e+1][i+1]:void 0)}else for(r=0;r<t.length;r++)a=new d,a.x=t[r][this.colX]||0,a.y=t[r][this.colY]||0,a.z=t[r][this.colZ]||0,void 0!==this.colValue&&(a.value=t[r][this.colValue]||0),s={},s.point=a,s.bottom=new d(a.x,a.y,this.zMin),s.trans=void 0,s.screen=void 0,h.push(s);return h},n.prototype.create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t),this.frame.filter=document.createElement("div"),this.frame.filter.style.position="absolute",this.frame.filter.style.bottom="0px",this.frame.filter.style.left="0px",this.frame.filter.style.width="100%",this.frame.appendChild(this.frame.filter);var e=this,i=function(t){e._onMouseDown(t)},n=function(t){e._onTouchStart(t)},r=function(t){e._onWheel(t)},o=function(t){e._onTooltip(t)};c.addEventListener(this.frame.canvas,"keydown",onkeydown),c.addEventListener(this.frame.canvas,"mousedown",i),c.addEventListener(this.frame.canvas,"touchstart",n),c.addEventListener(this.frame.canvas,"mousewheel",r),c.addEventListener(this.frame.canvas,"mousemove",o),this.containerElement.appendChild(this.frame)},n.prototype.setSize=function(t,e){this.frame.style.width=t,this.frame.style.height=e,this._resizeCanvas()},n.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"},n.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw"No animation available";this.frame.filter.slider.play()},n.prototype.animationStop=function(){this.frame.filter&&this.frame.filter.slider&&this.frame.filter.slider.stop()},n.prototype._resizeCenter=function(){"%"===this.defaultXCenter.charAt(this.defaultXCenter.length-1)?this.xcenter=parseFloat(this.defaultXCenter)/100*this.frame.canvas.clientWidth:this.xcenter=parseFloat(this.defaultXCenter),"%"===this.defaultYCenter.charAt(this.defaultYCenter.length-1)?this.ycenter=parseFloat(this.defaultYCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):this.ycenter=parseFloat(this.defaultYCenter)},n.prototype.setCameraPosition=function(t){void 0!==t&&(void 0!==t.horizontal&&void 0!==t.vertical&&this.camera.setArmRotation(t.horizontal,t.vertical),void 0!==t.distance&&this.camera.setArmLength(t.distance),this.redraw())},n.prototype.getCameraPosition=function(){var t=this.camera.getArmRotation();return t.distance=this.camera.getArmLength(),t},n.prototype._readData=function(t){this._dataInitialize(t,this.style),this.dataFilter?this.dataPoints=this.dataFilter._getDataPoints():this.dataPoints=this._getDataPoints(this.dataTable),this._redrawFilter()},n.prototype.setData=function(t){this._readData(t),this.redraw(),this.animationAutoStart&&this.dataFilter&&this.animationStart()},n.prototype.setOptions=function(t){var e=void 0;if(this.animationStop(),void 0!==t){if(void 0!==t.width&&(this.width=t.width),void 0!==t.height&&(this.height=t.height),void 0!==t.xCenter&&(this.defaultXCenter=t.xCenter),void 0!==t.yCenter&&(this.defaultYCenter=t.yCenter),void 0!==t.filterLabel&&(this.filterLabel=t.filterLabel),void 0!==t.legendLabel&&(this.legendLabel=t.legendLabel),void 0!==t.xLabel&&(this.xLabel=t.xLabel),void 0!==t.yLabel&&(this.yLabel=t.yLabel),void 0!==t.zLabel&&(this.zLabel=t.zLabel),void 0!==t.xValueLabel&&(this.xValueLabel=t.xValueLabel),void 0!==t.yValueLabel&&(this.yValueLabel=t.yValueLabel),void 0!==t.zValueLabel&&(this.zValueLabel=t.zValueLabel),void 0!==t.dotSizeRatio&&(this.dotSizeRatio=t.dotSizeRatio),void 0!==t.style){var i=this._getStyleNumber(t.style);-1!==i&&(this.style=i)}void 0!==t.showGrid&&(this.showGrid=t.showGrid),void 0!==t.showPerspective&&(this.showPerspective=t.showPerspective),void 0!==t.showShadow&&(this.showShadow=t.showShadow),void 0!==t.tooltip&&(this.showTooltip=t.tooltip),void 0!==t.showAnimationControls&&(this.showAnimationControls=t.showAnimationControls),void 0!==t.keepAspectRatio&&(this.keepAspectRatio=t.keepAspectRatio),void 0!==t.verticalRatio&&(this.verticalRatio=t.verticalRatio),void 0!==t.animationInterval&&(this.animationInterval=t.animationInterval),void 0!==t.animationPreload&&(this.animationPreload=t.animationPreload),void 0!==t.animationAutoStart&&(this.animationAutoStart=t.animationAutoStart),void 0!==t.xBarWidth&&(this.defaultXBarWidth=t.xBarWidth),void 0!==t.yBarWidth&&(this.defaultYBarWidth=t.yBarWidth),void 0!==t.xMin&&(this.defaultXMin=t.xMin),void 0!==t.xStep&&(this.defaultXStep=t.xStep),void 0!==t.xMax&&(this.defaultXMax=t.xMax),void 0!==t.yMin&&(this.defaultYMin=t.yMin),void 0!==t.yStep&&(this.defaultYStep=t.yStep),void 0!==t.yMax&&(this.defaultYMax=t.yMax),void 0!==t.zMin&&(this.defaultZMin=t.zMin),void 0!==t.zStep&&(this.defaultZStep=t.zStep),void 0!==t.zMax&&(this.defaultZMax=t.zMax),void 0!==t.valueMin&&(this.defaultValueMin=t.valueMin),void 0!==t.valueMax&&(this.defaultValueMax=t.valueMax),void 0!==t.backgroundColor&&this._setBackgroundColor(t.backgroundColor),void 0!==t.cameraPosition&&(e=t.cameraPosition),void 0!==e&&(this.camera.setArmRotation(e.horizontal,e.vertical),this.camera.setArmLength(e.distance)),void 0!==t.axisColor&&(this.axisColor=t.axisColor),void 0!==t.gridColor&&(this.gridColor=t.gridColor),t.dataColor&&("string"==typeof t.dataColor?(this.dataColor.fill=t.dataColor,this.dataColor.stroke=t.dataColor):(t.dataColor.fill&&(this.dataColor.fill=t.dataColor.fill),t.dataColor.stroke&&(this.dataColor.stroke=t.dataColor.stroke),void 0!==t.dataColor.strokeWidth&&(this.dataColor.strokeWidth=t.dataColor.strokeWidth)))}this.setSize(this.width,this.height),this.dataTable&&this.setData(this.dataTable),this.animationAutoStart&&this.dataFilter&&this.animationStart()},n.prototype.redraw=function(){if(void 0===this.dataPoints)throw"Error: graph data not initialized";this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this.style===n.STYLE.GRID||this.style===n.STYLE.SURFACE?this._redrawDataGrid():this.style===n.STYLE.LINE?this._redrawDataLine():this.style===n.STYLE.BAR||this.style===n.STYLE.BARCOLOR||this.style===n.STYLE.BARSIZE?this._redrawDataBar():this._redrawDataDot(),this._redrawInfo(),this._redrawLegend()},n.prototype._redrawClear=function(){var t=this.frame.canvas,e=t.getContext("2d");e.clearRect(0,0,t.width,t.height)},n.prototype._redrawLegend=function(){var t;if(this.style===n.STYLE.DOTCOLOR||this.style===n.STYLE.DOTSIZE){var e,i,r=this.frame.clientWidth*this.dotSizeRatio;this.style===n.STYLE.DOTSIZE?(e=r/2,i=r/2+2*r):(e=20,i=20);var o=Math.max(.25*this.frame.clientHeight,100),s=this.margin,a=this.frame.clientWidth-this.margin,h=a-i,l=s+o}var c=this.frame.canvas,d=c.getContext("2d");if(d.lineWidth=1,d.font="14px arial",this.style===n.STYLE.DOTCOLOR){var u=0,f=o;for(t=u;f>t;t++){var p=(t-u)/(f-u),m=240*p,v=this._hsv2rgb(m,1,1);d.strokeStyle=v,d.beginPath(),d.moveTo(h,s+t),d.lineTo(a,s+t),d.stroke()}d.strokeStyle=this.axisColor,d.strokeRect(h,s,i,o)}if(this.style===n.STYLE.DOTSIZE&&(d.strokeStyle=this.axisColor,d.fillStyle=this.dataColor.fill,d.beginPath(),d.moveTo(h,s),d.lineTo(a,s),d.lineTo(a-i+e,l),d.lineTo(h,l),d.closePath(),d.fill(),d.stroke()),this.style===n.STYLE.DOTCOLOR||this.style===n.STYLE.DOTSIZE){var A=5,y=new g(this.valueMin,this.valueMax,(this.valueMax-this.valueMin)/5,!0);for(y.start(),y.getCurrent()<this.valueMin&&y.next();!y.end();)t=l-(y.getCurrent()-this.valueMin)/(this.valueMax-this.valueMin)*o,d.beginPath(),d.moveTo(h-A,t),d.lineTo(h,t),d.stroke(),d.textAlign="right",d.textBaseline="middle",d.fillStyle=this.axisColor,d.fillText(y.getCurrent(),h-2*A,t),y.next();d.textAlign="right",d.textBaseline="top";var b=this.legendLabel;d.fillText(b,a,l+this.margin)}},n.prototype._redrawFilter=function(){if(this.frame.filter.innerHTML="",this.dataFilter){var t={visible:this.showAnimationControls},e=new m(this.frame.filter,t);this.frame.filter.slider=e,this.frame.filter.style.padding="10px",e.setValues(this.dataFilter.values),e.setPlayInterval(this.animationInterval);var i=this,n=function(){var t=e.getIndex();i.dataFilter.selectValue(t),i.dataPoints=i.dataFilter._getDataPoints(),i.redraw()};e.setOnChangeCallback(n)}else this.frame.filter.slider=void 0},n.prototype._redrawSlider=function(){void 0!==this.frame.filter.slider&&this.frame.filter.slider.redraw()},n.prototype._redrawInfo=function(){if(this.dataFilter){var t=this.frame.canvas,e=t.getContext("2d");e.font="14px arial",e.lineStyle="gray",e.fillStyle="gray",e.textAlign="left",e.textBaseline="top";var i=this.margin,n=this.margin;e.fillText(this.dataFilter.getLabel()+": "+this.dataFilter.getSelectedValue(),i,n)}},n.prototype._redrawAxis=function(){var t,e,i,n,r,o,s,a,h,l,c,u,f,p=this.frame.canvas,m=p.getContext("2d");m.font=24/this.camera.getArmLength()+"px arial";var v=.025/this.scale.x,A=.025/this.scale.y,y=5/this.camera.getArmLength(),b=this.camera.getArmRotation().horizontal;for(m.lineWidth=1,n=void 0===this.defaultXStep,i=new g(this.xMin,this.xMax,this.xStep,n),i.start(),i.getCurrent()<this.xMin&&i.next();!i.end();){var E=i.getCurrent();this.showGrid?(t=this._convert3Dto2D(new d(E,this.yMin,this.zMin)),e=this._convert3Dto2D(new d(E,this.yMax,this.zMin)),m.strokeStyle=this.gridColor,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke()):(t=this._convert3Dto2D(new d(E,this.yMin,this.zMin)),e=this._convert3Dto2D(new d(E,this.yMin+v,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke(),t=this._convert3Dto2D(new d(E,this.yMax,this.zMin)),e=this._convert3Dto2D(new d(E,this.yMax-v,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke()),s=Math.cos(b)>0?this.yMin:this.yMax,r=this._convert3Dto2D(new d(E,s,this.zMin)),Math.cos(2*b)>0?(m.textAlign="center",m.textBaseline="top",r.y+=y):Math.sin(2*b)<0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.axisColor,m.fillText("  "+this.xValueLabel(i.getCurrent())+"  ",r.x,r.y),i.next()}for(m.lineWidth=1,n=void 0===this.defaultYStep,i=new g(this.yMin,this.yMax,this.yStep,n),i.start(),i.getCurrent()<this.yMin&&i.next();!i.end();)this.showGrid?(t=this._convert3Dto2D(new d(this.xMin,i.getCurrent(),this.zMin)),e=this._convert3Dto2D(new d(this.xMax,i.getCurrent(),this.zMin)),m.strokeStyle=this.gridColor,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke()):(t=this._convert3Dto2D(new d(this.xMin,i.getCurrent(),this.zMin)),e=this._convert3Dto2D(new d(this.xMin+A,i.getCurrent(),this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke(),t=this._convert3Dto2D(new d(this.xMax,i.getCurrent(),this.zMin)),e=this._convert3Dto2D(new d(this.xMax-A,i.getCurrent(),this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke()),o=Math.sin(b)>0?this.xMin:this.xMax,r=this._convert3Dto2D(new d(o,i.getCurrent(),this.zMin)),Math.cos(2*b)<0?(m.textAlign="center",m.textBaseline="top",r.y+=y):Math.sin(2*b)>0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.axisColor,m.fillText("  "+this.yValueLabel(i.getCurrent())+"  ",r.x,r.y),i.next();for(m.lineWidth=1,n=void 0===this.defaultZStep,i=new g(this.zMin,this.zMax,this.zStep,n),i.start(),i.getCurrent()<this.zMin&&i.next(),o=Math.cos(b)>0?this.xMin:this.xMax,s=Math.sin(b)<0?this.yMin:this.yMax;!i.end();)t=this._convert3Dto2D(new d(o,s,i.getCurrent())),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(t.x-y,t.y),m.stroke(),m.textAlign="right",m.textBaseline="middle",m.fillStyle=this.axisColor,m.fillText(this.zValueLabel(i.getCurrent())+" ",t.x-5,t.y),i.next();m.lineWidth=1,t=this._convert3Dto2D(new d(o,s,this.zMin)),e=this._convert3Dto2D(new d(o,s,this.zMax)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke(),m.lineWidth=1,u=this._convert3Dto2D(new d(this.xMin,this.yMin,this.zMin)),f=this._convert3Dto2D(new d(this.xMax,this.yMin,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(u.x,u.y),m.lineTo(f.x,f.y),m.stroke(),u=this._convert3Dto2D(new d(this.xMin,this.yMax,this.zMin)),f=this._convert3Dto2D(new d(this.xMax,this.yMax,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(u.x,u.y),m.lineTo(f.x,f.y),m.stroke(),m.lineWidth=1,t=this._convert3Dto2D(new d(this.xMin,this.yMin,this.zMin)),e=this._convert3Dto2D(new d(this.xMin,this.yMax,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke(),t=this._convert3Dto2D(new d(this.xMax,this.yMin,this.zMin)),e=this._convert3Dto2D(new d(this.xMax,this.yMax,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke();var w=this.xLabel;w.length>0&&(c=.1/this.scale.y,o=(this.xMin+this.xMax)/2,s=Math.cos(b)>0?this.yMin-c:this.yMax+c,r=this._convert3Dto2D(new d(o,s,this.zMin)),Math.cos(2*b)>0?(m.textAlign="center",m.textBaseline="top"):Math.sin(2*b)<0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.axisColor,m.fillText(w,r.x,r.y));var x=this.yLabel;x.length>0&&(l=.1/this.scale.x,o=Math.sin(b)>0?this.xMin-l:this.xMax+l,s=(this.yMin+this.yMax)/2,r=this._convert3Dto2D(new d(o,s,this.zMin)),Math.cos(2*b)<0?(m.textAlign="center",m.textBaseline="top"):Math.sin(2*b)>0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.axisColor,m.fillText(x,r.x,r.y));var _=this.zLabel;_.length>0&&(h=30,o=Math.cos(b)>0?this.xMin:this.xMax,s=Math.sin(b)<0?this.yMin:this.yMax,a=(this.zMin+this.zMax)/2,r=this._convert3Dto2D(new d(o,s,a)),m.textAlign="right",m.textBaseline="middle",m.fillStyle=this.axisColor,m.fillText(_,r.x-h,r.y))},n.prototype._hsv2rgb=function(t,e,i){var n,r,o,s,a,h;switch(s=i*e,a=Math.floor(t/60),h=s*(1-Math.abs(t/60%2-1)),a){case 0:n=s,r=h,o=0;break;case 1:n=h,r=s,o=0;break;case 2:n=0,r=s,o=h;break;case 3:n=0,r=h,o=s;break;case 4:n=h,r=0,o=s;break;case 5:n=s,r=0,o=h;break;default:n=0,r=0,o=0}return"RGB("+parseInt(255*n)+","+parseInt(255*r)+","+parseInt(255*o)+")"},n.prototype._redrawDataGrid=function(){var t,e,i,r,o,s,a,h,l,c,u,f,p=this.frame.canvas,m=p.getContext("2d");if(m.lineJoin="round",m.lineCap="round",!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(o=0;o<this.dataPoints.length;o++){var g=this._convertPointToTranslation(this.dataPoints[o].point),v=this._convertTranslationToScreen(g);this.dataPoints[o].trans=g,this.dataPoints[o].screen=v;var A=this._convertPointToTranslation(this.dataPoints[o].bottom);this.dataPoints[o].dist=this.showPerspective?A.length():-A.z}var y=function(t,e){return e.dist-t.dist};if(this.dataPoints.sort(y),this.style===n.STYLE.SURFACE){for(o=0;o<this.dataPoints.length;o++)if(t=this.dataPoints[o],e=this.dataPoints[o].pointRight,i=this.dataPoints[o].pointTop,r=this.dataPoints[o].pointCross,void 0!==t&&void 0!==e&&void 0!==i&&void 0!==r){if(this.showGrayBottom||this.showShadow){var b=d.subtract(r.trans,t.trans),E=d.subtract(i.trans,e.trans),w=d.crossProduct(b,E),x=w.length();s=w.z>0}else s=!0;s?(f=(t.point.z+e.point.z+i.point.z+r.point.z)/4,l=240*(1-(f-this.zMin)*this.scale.z/this.verticalRatio),c=1,this.showShadow?(u=Math.min(1+w.x/x/2,1),a=this._hsv2rgb(l,c,u),h=a):(u=1,a=this._hsv2rgb(l,c,u),h=this.axisColor)):(a="gray",h=this.axisColor),m.lineWidth=this._getStrokeWidth(t),m.fillStyle=a,m.strokeStyle=h,m.beginPath(),m.moveTo(t.screen.x,t.screen.y),m.lineTo(e.screen.x,e.screen.y),m.lineTo(r.screen.x,r.screen.y),m.lineTo(i.screen.x,i.screen.y),m.closePath(),m.fill(),m.stroke()}}else for(o=0;o<this.dataPoints.length;o++)t=this.dataPoints[o],e=this.dataPoints[o].pointRight,i=this.dataPoints[o].pointTop,void 0!==t&&void 0!==e&&(f=(t.point.z+e.point.z)/2,l=240*(1-(f-this.zMin)*this.scale.z/this.verticalRatio),m.lineWidth=2*this._getStrokeWidth(t),m.strokeStyle=this._hsv2rgb(l,1,1),m.beginPath(),m.moveTo(t.screen.x,t.screen.y),m.lineTo(e.screen.x,e.screen.y),m.stroke()),void 0!==t&&void 0!==i&&(f=(t.point.z+i.point.z)/2,l=240*(1-(f-this.zMin)*this.scale.z/this.verticalRatio),m.lineWidth=2*this._getStrokeWidth(t),m.strokeStyle=this._hsv2rgb(l,1,1),m.beginPath(),m.moveTo(t.screen.x,t.screen.y),m.lineTo(i.screen.x,i.screen.y),m.stroke())}},n.prototype._getStrokeWidth=function(t){return void 0!==t?this.showPerspective?1/-t.trans.z*this.dataColor.strokeWidth:-(this.eye.z/this.camera.getArmLength())*this.dataColor.strokeWidth:this.dataColor.strokeWidth},n.prototype._redrawDataDot=function(){var t,e=this.frame.canvas,i=e.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(t=0;t<this.dataPoints.length;t++){var r=this._convertPointToTranslation(this.dataPoints[t].point),o=this._convertTranslationToScreen(r);this.dataPoints[t].trans=r,this.dataPoints[t].screen=o;var s=this._convertPointToTranslation(this.dataPoints[t].bottom);this.dataPoints[t].dist=this.showPerspective?s.length():-s.z}var a=function(t,e){return e.dist-t.dist};this.dataPoints.sort(a);var h=this.frame.clientWidth*this.dotSizeRatio;for(t=0;t<this.dataPoints.length;t++){var l=this.dataPoints[t];if(this.style===n.STYLE.DOTLINE){var c=this._convert3Dto2D(l.bottom);i.lineWidth=1,i.strokeStyle=this.gridColor,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.screen.x,l.screen.y),i.stroke()}var d;d=this.style===n.STYLE.DOTSIZE?h/2+2*h*(l.point.value-this.valueMin)/(this.valueMax-this.valueMin):h;var u;u=this.showPerspective?d/-l.trans.z:d*-(this.eye.z/this.camera.getArmLength()),0>u&&(u=0);var f,p,m;this.style===n.STYLE.DOTCOLOR?(f=240*(1-(l.point.value-this.valueMin)*this.scale.value),p=this._hsv2rgb(f,1,1),m=this._hsv2rgb(f,1,.8)):this.style===n.STYLE.DOTSIZE?(p=this.dataColor.fill,m=this.dataColor.stroke):(f=240*(1-(l.point.z-this.zMin)*this.scale.z/this.verticalRatio),p=this._hsv2rgb(f,1,1),m=this._hsv2rgb(f,1,.8)),i.lineWidth=this._getStrokeWidth(l),i.strokeStyle=m,i.fillStyle=p,i.beginPath(),i.arc(l.screen.x,l.screen.y,u,0,2*Math.PI,!0),i.fill(),i.stroke()}}},n.prototype._redrawDataBar=function(){var t,e,i,r,o=this.frame.canvas,s=o.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(t=0;t<this.dataPoints.length;t++){var a=this._convertPointToTranslation(this.dataPoints[t].point),h=this._convertTranslationToScreen(a);this.dataPoints[t].trans=a,this.dataPoints[t].screen=h;var l=this._convertPointToTranslation(this.dataPoints[t].bottom);this.dataPoints[t].dist=this.showPerspective?l.length():-l.z}var c=function(t,e){return e.dist-t.dist};this.dataPoints.sort(c),s.lineJoin="round",s.lineCap="round";var u=this.xBarWidth/2,f=this.yBarWidth/2;for(t=0;t<this.dataPoints.length;t++){var p,m,g,v=this.dataPoints[t];this.style===n.STYLE.BARCOLOR?(p=240*(1-(v.point.value-this.valueMin)*this.scale.value),m=this._hsv2rgb(p,1,1),g=this._hsv2rgb(p,1,.8)):this.style===n.STYLE.BARSIZE?(m=this.dataColor.fill,g=this.dataColor.stroke):(p=240*(1-(v.point.z-this.zMin)*this.scale.z/this.verticalRatio),m=this._hsv2rgb(p,1,1),g=this._hsv2rgb(p,1,.8)),this.style===n.STYLE.BARSIZE&&(u=this.xBarWidth/2*((v.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2),f=this.yBarWidth/2*((v.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2));var A=this,y=v.point,b=[{point:new d(y.x-u,y.y-f,y.z)},{point:new d(y.x+u,y.y-f,y.z)},{point:new d(y.x+u,y.y+f,y.z)},{point:new d(y.x-u,y.y+f,y.z)}],E=[{point:new d(y.x-u,y.y-f,this.zMin)},{point:new d(y.x+u,y.y-f,this.zMin)},{point:new d(y.x+u,y.y+f,this.zMin)},{point:new d(y.x-u,y.y+f,this.zMin)}];b.forEach(function(t){t.screen=A._convert3Dto2D(t.point)}),E.forEach(function(t){t.screen=A._convert3Dto2D(t.point)});var w=[{corners:b,center:d.avg(E[0].point,E[2].point)},{corners:[b[0],b[1],E[1],E[0]],center:d.avg(E[1].point,E[0].point)},{corners:[b[1],b[2],E[2],E[1]],center:d.avg(E[2].point,E[1].point)},{corners:[b[2],b[3],E[3],E[2]],center:d.avg(E[3].point,E[2].point)},{corners:[b[3],b[0],E[0],E[3]],center:d.avg(E[0].point,E[3].point)}];for(v.surfaces=w,e=0;e<w.length;e++){i=w[e];var x=this._convertPointToTranslation(i.center);i.dist=this.showPerspective?x.length():-x.z}for(w.sort(function(t,e){var i=e.dist-t.dist;return i?i:t.corners===b?1:e.corners===b?-1:0}),s.lineWidth=this._getStrokeWidth(v),s.strokeStyle=g,s.fillStyle=m,e=2;e<w.length;e++)i=w[e],r=i.corners,s.beginPath(),s.moveTo(r[3].screen.x,r[3].screen.y),s.lineTo(r[0].screen.x,r[0].screen.y),s.lineTo(r[1].screen.x,r[1].screen.y),s.lineTo(r[2].screen.x,r[2].screen.y),s.lineTo(r[3].screen.x,r[3].screen.y),s.fill(),s.stroke()}}},
n.prototype._redrawDataLine=function(){var t,e,i=this.frame.canvas,n=i.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(e=0;e<this.dataPoints.length;e++){var r=this._convertPointToTranslation(this.dataPoints[e].point),o=this._convertTranslationToScreen(r);this.dataPoints[e].trans=r,this.dataPoints[e].screen=o}if(this.dataPoints.length>0){for(t=this.dataPoints[0],n.lineWidth=this._getStrokeWidth(t),n.lineJoin="round",n.lineCap="round",n.strokeStyle=this.dataColor.stroke,n.beginPath(),n.moveTo(t.screen.x,t.screen.y),e=1;e<this.dataPoints.length;e++)t=this.dataPoints[e],n.lineTo(t.screen.x,t.screen.y);n.stroke()}}},n.prototype._onMouseDown=function(t){if(t=t||window.event,this.leftButtonDown&&this._onMouseUp(t),this.leftButtonDown=t.which?1===t.which:1===t.button,this.leftButtonDown||this.touchDown){this.startMouseX=r(t),this.startMouseY=o(t),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";var e=this;this.onmousemove=function(t){e._onMouseMove(t)},this.onmouseup=function(t){e._onMouseUp(t)},c.addEventListener(document,"mousemove",e.onmousemove),c.addEventListener(document,"mouseup",e.onmouseup),c.preventDefault(t)}},n.prototype._onMouseMove=function(t){t=t||window.event;var e=parseFloat(r(t))-this.startMouseX,i=parseFloat(o(t))-this.startMouseY,n=this.startArmRotation.horizontal+e/200,s=this.startArmRotation.vertical+i/200,a=4,h=Math.sin(a/360*2*Math.PI);Math.abs(Math.sin(n))<h&&(n=Math.round(n/Math.PI)*Math.PI-.001),Math.abs(Math.cos(n))<h&&(n=(Math.round(n/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(s))<h&&(s=Math.round(s/Math.PI)*Math.PI),Math.abs(Math.cos(s))<h&&(s=(Math.round(s/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(n,s),this.redraw();var l=this.getCameraPosition();this.emit("cameraPositionChange",l),c.preventDefault(t)},n.prototype._onMouseUp=function(t){this.frame.style.cursor="auto",this.leftButtonDown=!1,c.removeEventListener(document,"mousemove",this.onmousemove),c.removeEventListener(document,"mouseup",this.onmouseup),c.preventDefault(t)},n.prototype._onTooltip=function(t){var e=300,i=this.frame.getBoundingClientRect(),n=r(t)-i.left,s=o(t)-i.top;if(this.showTooltip){if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown)return void this._hideTooltip();if(this.tooltip&&this.tooltip.dataPoint){var a=this._dataPointFromXY(n,s);a!==this.tooltip.dataPoint&&(a?this._showTooltip(a):this._hideTooltip())}else{var h=this;this.tooltipTimeout=setTimeout(function(){h.tooltipTimeout=null;var t=h._dataPointFromXY(n,s);t&&h._showTooltip(t)},e)}}},n.prototype._onTouchStart=function(t){this.touchDown=!0;var e=this;this.ontouchmove=function(t){e._onTouchMove(t)},this.ontouchend=function(t){e._onTouchEnd(t)},c.addEventListener(document,"touchmove",e.ontouchmove),c.addEventListener(document,"touchend",e.ontouchend),this._onMouseDown(t)},n.prototype._onTouchMove=function(t){this._onMouseMove(t)},n.prototype._onTouchEnd=function(t){this.touchDown=!1,c.removeEventListener(document,"touchmove",this.ontouchmove),c.removeEventListener(document,"touchend",this.ontouchend),this._onMouseUp(t)},n.prototype._onWheel=function(t){t||(t=window.event);var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e){var i=this.camera.getArmLength(),n=i*(1-e/10);this.camera.setArmLength(n),this.redraw(),this._hideTooltip()}var r=this.getCameraPosition();this.emit("cameraPositionChange",r),c.preventDefault(t)},n.prototype._insideTriangle=function(t,e){function i(t){return t>0?1:0>t?-1:0}var n=e[0],r=e[1],o=e[2],s=i((r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x)),a=i((o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x)),h=i((n.x-o.x)*(t.y-o.y)-(n.y-o.y)*(t.x-o.x));return!(0!=s&&0!=a&&s!=a||0!=a&&0!=h&&a!=h||0!=s&&0!=h&&s!=h)},n.prototype._dataPointFromXY=function(t,e){var i,r=100,o=null,s=null,a=null,h=new u(t,e);if(this.style===n.STYLE.BAR||this.style===n.STYLE.BARCOLOR||this.style===n.STYLE.BARSIZE)for(i=this.dataPoints.length-1;i>=0;i--){o=this.dataPoints[i];var l=o.surfaces;if(l)for(var c=l.length-1;c>=0;c--){var d=l[c],f=d.corners,p=[f[0].screen,f[1].screen,f[2].screen],m=[f[2].screen,f[3].screen,f[0].screen];if(this._insideTriangle(h,p)||this._insideTriangle(h,m))return o}}else for(i=0;i<this.dataPoints.length;i++){o=this.dataPoints[i];var g=o.screen;if(g){var v=Math.abs(t-g.x),A=Math.abs(e-g.y),y=Math.sqrt(v*v+A*A);(null===a||a>y)&&r>y&&(a=y,s=o)}}return s},n.prototype._showTooltip=function(t){var e,i,n;this.tooltip?(e=this.tooltip.dom.content,i=this.tooltip.dom.line,n=this.tooltip.dom.dot):(e=document.createElement("div"),e.style.position="absolute",e.style.padding="10px",e.style.border="1px solid #4d4d4d",e.style.color="#1a1a1a",e.style.background="rgba(255,255,255,0.7)",e.style.borderRadius="2px",e.style.boxShadow="5px 5px 10px rgba(128,128,128,0.5)",i=document.createElement("div"),i.style.position="absolute",i.style.height="40px",i.style.width="0",i.style.borderLeft="1px solid #4d4d4d",n=document.createElement("div"),n.style.position="absolute",n.style.height="0",n.style.width="0",n.style.border="5px solid #4d4d4d",n.style.borderRadius="5px",this.tooltip={dataPoint:null,dom:{content:e,line:i,dot:n}}),this._hideTooltip(),this.tooltip.dataPoint=t,"function"==typeof this.showTooltip?e.innerHTML=this.showTooltip(t.point):e.innerHTML="<table><tr><td>"+this.xLabel+":</td><td>"+t.point.x+"</td></tr><tr><td>"+this.yLabel+":</td><td>"+t.point.y+"</td></tr><tr><td>"+this.zLabel+":</td><td>"+t.point.z+"</td></tr></table>",e.style.left="0",e.style.top="0",this.frame.appendChild(e),this.frame.appendChild(i),this.frame.appendChild(n);var r=e.offsetWidth,o=e.offsetHeight,s=i.offsetHeight,a=n.offsetWidth,h=n.offsetHeight,l=t.screen.x-r/2;l=Math.min(Math.max(l,10),this.frame.clientWidth-10-r),i.style.left=t.screen.x+"px",i.style.top=t.screen.y-s+"px",e.style.left=l+"px",e.style.top=t.screen.y-s-o+"px",n.style.left=t.screen.x-a/2+"px",n.style.top=t.screen.y-h/2+"px"},n.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(var t in this.tooltip.dom)if(this.tooltip.dom.hasOwnProperty(t)){var e=this.tooltip.dom[t];e&&e.parentNode&&e.parentNode.removeChild(e)}}},t.exports=n},function(t,e){function i(t){return t?n(t):void 0}function n(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,r=0;r<i.length;r++)if(n=i[r],n===e||n.fn===e){i.splice(r,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var n=0,r=i.length;r>n;++n)i[n].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){function i(t,e,i){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==i?i:0}i.subtract=function(t,e){var n=new i;return n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n},i.add=function(t,e){var n=new i;return n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n},i.avg=function(t,e){return new i((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2)},i.crossProduct=function(t,e){var n=new i;return n.x=t.y*e.z-t.z*e.y,n.y=t.z*e.x-t.x*e.z,n.z=t.x*e.y-t.y*e.x,n},i.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.exports=i},function(t,e){function i(t,e){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0}t.exports=i},function(t,e,i){function n(){this.armLocation=new r,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraLocation=new r,this.cameraRotation=new r(.5*Math.PI,0,0),this.calculateCameraOrientation()}var r=i(14);n.prototype.setArmLocation=function(t,e,i){this.armLocation.x=t,this.armLocation.y=e,this.armLocation.z=i,this.calculateCameraOrientation()},n.prototype.setArmRotation=function(t,e){void 0!==t&&(this.armRotation.horizontal=t),void 0!==e&&(this.armRotation.vertical=e,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),void 0===t&&void 0===e||this.calculateCameraOrientation()},n.prototype.getArmRotation=function(){var t={};return t.horizontal=this.armRotation.horizontal,t.vertical=this.armRotation.vertical,t},n.prototype.setArmLength=function(t){void 0!==t&&(this.armLength=t,this.armLength<.71&&(this.armLength=.71),this.armLength>5&&(this.armLength=5),this.calculateCameraOrientation())},n.prototype.getArmLength=function(){return this.armLength},n.prototype.getCameraLocation=function(){return this.cameraLocation},n.prototype.getCameraRotation=function(){return this.cameraRotation},n.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal},t.exports=n},function(t,e,i){function n(t,e,i){this.data=t,this.column=e,this.graph=i,this.index=void 0,this.value=void 0,this.values=i.getDistinctValues(t.get(),this.column),this.values.sort(function(t,e){return t>e?1:e>t?-1:0}),this.values.length>0&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=void 0,i.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}var r=i(11);n.prototype.isLoaded=function(){return this.loaded},n.prototype.getLoadedProgress=function(){for(var t=this.values.length,e=0;this.dataPoints[e];)e++;return Math.round(e/t*100)},n.prototype.getLabel=function(){return this.graph.filterLabel},n.prototype.getColumn=function(){return this.column},n.prototype.getSelectedValue=function(){return void 0!==this.index?this.values[this.index]:void 0},n.prototype.getValues=function(){return this.values},n.prototype.getValue=function(t){if(t>=this.values.length)throw"Error: index out of range";return this.values[t]},n.prototype._getDataPoints=function(t){if(void 0===t&&(t=this.index),void 0===t)return[];var e;if(this.dataPoints[t])e=this.dataPoints[t];else{var i={};i.column=this.column,i.value=this.values[t];var n=new r(this.data,{filter:function(t){return t[i.column]==i.value}}).get();e=this.graph._getDataPoints(n),this.dataPoints[t]=e}return e},n.prototype.setOnLoadCallback=function(t){this.onLoadCallback=t},n.prototype.selectValue=function(t){if(t>=this.values.length)throw"Error: index out of range";this.index=t,this.value=this.values[t]},n.prototype.loadInBackground=function(t){void 0===t&&(t=0);var e=this.graph.frame;if(t<this.values.length){this._getDataPoints(t),void 0===e.progress&&(e.progress=document.createElement("DIV"),e.progress.style.position="absolute",e.progress.style.color="gray",e.appendChild(e.progress));var i=this.getLoadedProgress();e.progress.innerHTML="Loading animation... "+i+"%",e.progress.style.bottom="60px",e.progress.style.left="10px";var n=this;setTimeout(function(){n.loadInBackground(t+1)},10),this.loaded=!1}else this.loaded=!0,void 0!==e.progress&&(e.removeChild(e.progress),e.progress=void 0),this.onLoadCallback&&this.onLoadCallback()},t.exports=n},function(t,e,i){function n(t,e){if(void 0===t)throw"Error: No container element defined";if(this.container=t,this.visible=e&&void 0!=e.visible?e.visible:!0,this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var i=this;this.frame.slide.onmousedown=function(t){i._onMouseDown(t)},this.frame.prev.onclick=function(t){i.prev(t)},this.frame.play.onclick=function(t){i.togglePlay(t)},this.frame.next.onclick=function(t){i.next(t)}}this.onChangeCallback=void 0,this.values=[],this.index=void 0,this.playTimeout=void 0,this.playInterval=1e3,this.playLoop=!0}var r=i(1);n.prototype.prev=function(){var t=this.getIndex();t>0&&(t--,this.setIndex(t))},n.prototype.next=function(){var t=this.getIndex();t<this.values.length-1&&(t++,this.setIndex(t))},n.prototype.playNext=function(){var t=new Date,e=this.getIndex();e<this.values.length-1?(e++,this.setIndex(e)):this.playLoop&&(e=0,this.setIndex(e));var i=new Date,n=i-t,r=Math.max(this.playInterval-n,0),o=this;this.playTimeout=setTimeout(function(){o.playNext()},r)},n.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},n.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))},n.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=void 0,this.frame&&(this.frame.play.value="Play")},n.prototype.setOnChangeCallback=function(t){this.onChangeCallback=t},n.prototype.setPlayInterval=function(t){this.playInterval=t},n.prototype.getPlayInterval=function(t){return this.playInterval},n.prototype.setPlayLoop=function(t){this.playLoop=t},n.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},n.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var t=this.indexToLeft(this.index);this.frame.slide.style.left=t+"px"}},n.prototype.setValues=function(t){this.values=t,this.values.length>0?this.setIndex(0):this.index=void 0},n.prototype.setIndex=function(t){if(!(t<this.values.length))throw"Error: index out of range";this.index=t,this.redraw(),this.onChange()},n.prototype.getIndex=function(){return this.index},n.prototype.get=function(){return this.values[this.index]},n.prototype._onMouseDown=function(t){var e=t.which?1===t.which:1===t.button;if(e){this.startClientX=t.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var i=this;this.onmousemove=function(t){i._onMouseMove(t)},this.onmouseup=function(t){i._onMouseUp(t)},r.addEventListener(document,"mousemove",this.onmousemove),r.addEventListener(document,"mouseup",this.onmouseup),r.preventDefault(t)}},n.prototype.leftToIndex=function(t){var e=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=t-3,n=Math.round(i/e*(this.values.length-1));return 0>n&&(n=0),n>this.values.length-1&&(n=this.values.length-1),n},n.prototype.indexToLeft=function(t){var e=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=t/(this.values.length-1)*e,n=i+3;return n},n.prototype._onMouseMove=function(t){var e=t.clientX-this.startClientX,i=this.startSlideX+e,n=this.leftToIndex(i);this.setIndex(n),r.preventDefault()},n.prototype._onMouseUp=function(t){this.frame.style.cursor="auto",r.removeEventListener(document,"mousemove",this.onmousemove),r.removeEventListener(document,"mouseup",this.onmouseup),r.preventDefault()},t.exports=n},function(t,e){function i(t,e,i,n){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(t,e,i,n)}i.prototype.setRange=function(t,e,i,n){this._start=t?t:0,this._end=e?e:0,this.setStep(i,n)},i.prototype.setStep=function(t,e){void 0===t||0>=t||(void 0!==e&&(this.prettyStep=e),this.prettyStep===!0?this._step=i.calculatePrettyStep(t):this._step=t)},i.calculatePrettyStep=function(t){var e=function(t){return Math.log(t)/Math.LN10},i=Math.pow(10,Math.round(e(t))),n=2*Math.pow(10,Math.round(e(t/2))),r=5*Math.pow(10,Math.round(e(t/5))),o=i;return Math.abs(n-t)<=Math.abs(o-t)&&(o=n),Math.abs(r-t)<=Math.abs(o-t)&&(o=r),0>=o&&(o=1),o},i.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))},i.prototype.getStep=function(){return this._step},i.prototype.start=function(){this._current=this._start-this._start%this._step},i.prototype.next=function(){this._current+=this._step},i.prototype.end=function(){return this._current>this._end},t.exports=i},function(t,e,i){if("undefined"!=typeof window){var n=i(21),r=window.Hammer||i(22);t.exports=n(r,{preventDefault:"mouse"})}else t.exports=function(){throw Error("hammer.js is only available in a browser, not in node.js.")}},function(t,e,i){var n,r,o;!function(i){r=[],n=i,o="function"==typeof n?n.apply(e,r):n,!(void 0!==o&&(t.exports=o))}(function(){var t=null;return function e(i,n){function r(t){return t.match(/[^ ]+/g)}function o(e){if("hammer.input"!==e.type){if(e.srcEvent._handled||(e.srcEvent._handled={}),e.srcEvent._handled[e.type])return;e.srcEvent._handled[e.type]=!0}var i=!1;e.stopPropagation=function(){i=!0};var n=e.srcEvent.stopPropagation.bind(e.srcEvent);"function"==typeof n&&(e.srcEvent.stopPropagation=function(){n(),e.stopPropagation()}),e.firstTarget=t;for(var r=t;r&&!i;){var o=r.hammer;if(o)for(var s,a=0;a<o.length;a++)if(s=o[a]._handlers[e.type])for(var h=0;h<s.length&&!i;h++)s[h](e);r=r.parentNode}}var s=n||{preventDefault:!1};if(i.Manager){var a=i,h=function(t,i){var n=Object.create(s);return i&&a.assign(n,i),e(new a(t,n),n)};return a.assign(h,a),h.Manager=function(t,i){var n=Object.create(s);return i&&a.assign(n,i),e(new a.Manager(t,n),n)},h}var l=Object.create(i),c=i.element;return c.hammer||(c.hammer=[]),c.hammer.push(l),i.on("hammer.input",function(e){s.preventDefault!==!0&&s.preventDefault!==e.pointerType||e.preventDefault(),e.isFirst&&(t=e.target)}),l._handlers={},l.on=function(t,e){return r(t).forEach(function(t){var n=l._handlers[t];n||(l._handlers[t]=n=[],i.on(t,o)),n.push(e)}),l},l.off=function(t,e){return r(t).forEach(function(t){var n=l._handlers[t];n&&(n=e?n.filter(function(t){return t!==e}):[],n.length>0?l._handlers[t]=n:(i.off(t,o),delete l._handlers[t]))}),l},l.emit=function(e,n){t=n.target,i.emit(e,n)},l.destroy=function(){var t=i.element.hammer,e=t.indexOf(l);-1!==e&&t.splice(e,1),t.length||delete i.element.hammer,l._handlers={},i.destroy()},l}})},function(t,e,i){var n;!function(r,o,s,a){function h(t,e,i){return setTimeout(f(t,i),e)}function l(t,e,i){return Array.isArray(t)?(c(t,i[e],i),!0):!1}function c(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function d(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,n,i),t.apply(this,arguments)}}function u(t,e,i){var n,r=e.prototype;n=t.prototype=Object.create(r),n.constructor=t,n._super=r,i&&dt(n,i)}function f(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return typeof t==pt?t.apply(e?e[0]||a:a,e):t}function m(t,e){return t===a?e:t}function g(t,e,i){c(b(e),function(e){t.addEventListener(e,i,!1)})}function v(t,e,i){c(b(e),function(e){t.removeEventListener(e,i,!1)})}function A(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function y(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function E(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function w(t){return Array.prototype.slice.call(t,0)}function x(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];E(r,s)<0&&n.push(t[o]),r[o]=s,o++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function _(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<ut.length;){if(i=ut[o],n=i?i+r:e,n in t)return n;o++}return a}function T(){return bt++}function S(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}function R(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&i.handler(e)},this.init()}function C(t){var e,i=t.options.inputClass;return new(e=i?i:xt?U:_t?G:wt?q:j)(t,k)}function k(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=e&Mt&&n-r===0,s=e&(Pt|Dt)&&n-r===0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,M(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function M(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=D(e)),r>1&&!i.firstMultiple?i.firstMultiple=D(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,a=s?s.center:o.center,h=e.center=O(n);e.timeStamp=vt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=F(a,h),e.distance=B(a,h),H(i,e),e.offsetDirection=I(e.deltaX,e.deltaY);var l=L(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=gt(l.x)>gt(l.y)?l.x:l.y,e.scale=s?z(s.pointers,n):1,e.rotation=s?N(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,P(i,e);var c=t.element;A(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function H(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Mt&&o.eventType!==Pt||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function P(t,e){var i,n,r,o,s=t.lastInterval||e,h=e.timeStamp-s.timeStamp;if(e.eventType!=Dt&&(h>kt||s.velocity===a)){var l=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,d=L(h,l,c);n=d.x,r=d.y,i=gt(d.x)>gt(d.y)?d.x:d.y,o=I(l,c),t.lastInterval=e}else i=s.velocity,n=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=o}function D(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:mt(t.pointers[i].clientX),clientY:mt(t.pointers[i].clientY)},i++;return{timeStamp:vt(),pointers:e,center:O(e),deltaX:t.deltaX,deltaY:t.deltaY}}function O(t){var e=t.length;if(1===e)return{x:mt(t[0].clientX),y:mt(t[0].clientY)};for(var i=0,n=0,r=0;e>r;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:mt(i/e),y:mt(n/e)}}function L(t,e,i){return{x:e/t||0,y:i/t||0}}function I(t,e){return t===e?Ot:gt(t)>=gt(e)?0>t?Lt:It:0>e?Bt:Ft}function B(t,e,i){i||(i=Ut);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function F(t,e,i){i||(i=Ut);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function N(t,e){return F(e[1],e[0],Vt)+F(t[1],t[0],Vt)}function z(t,e){return B(e[0],e[1],Vt)/B(t[0],t[1],Vt)}function j(){this.evEl=Gt,this.evWin=Yt,this.allow=!0,this.pressed=!1,R.apply(this,arguments)}function U(){this.evEl=Qt,this.evWin=Zt,R.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=Jt,this.evWin=$t,this.started=!1,R.apply(this,arguments)}function W(t,e){var i=w(t.touches),n=w(t.changedTouches);return e&(Pt|Dt)&&(i=x(i.concat(n),"identifier",!0)),[i,n]}function G(){this.evTarget=ee,this.targetIds={},R.apply(this,arguments)}function Y(t,e){var i=w(t.touches),n=this.targetIds;if(e&(Mt|Ht)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,o,s=w(t.changedTouches),a=[],h=this.target;if(o=i.filter(function(t){return A(t.target,h)}),e===Mt)for(r=0;r<o.length;)n[o[r].identifier]=!0,r++;for(r=0;r<s.length;)n[s[r].identifier]&&a.push(s[r]),e&(Pt|Dt)&&delete n[s[r].identifier],r++;return a.length?[x(o.concat(a),"identifier",!0),a]:void 0}function q(){R.apply(this,arguments);var t=f(this.handler,this);this.touch=new G(this.manager,t),this.mouse=new j(this.manager,t)}function X(t,e){this.manager=t,this.set(e)}function Q(t){if(y(t,ae))return ae;var e=y(t,he),i=y(t,le);return e&&i?ae:e||i?e?he:le:y(t,se)?se:oe}function Z(t){this.options=dt({},this.defaults,t||{}),this.id=T(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=ce,this.simultaneous={},this.requireFail=[]}function K(t){return t&me?"cancel":t&fe?"end":t&ue?"move":t&de?"start":""}function J(t){return t==Ft?"down":t==Bt?"up":t==Lt?"left":t==It?"right":""}function $(t,e){var i=e.manager;return i?i.get(t):t}function tt(){Z.apply(this,arguments)}function et(){tt.apply(this,arguments),this.pX=null,this.pY=null}function it(){tt.apply(this,arguments)}function nt(){Z.apply(this,arguments),this._timer=null,this._input=null}function rt(){tt.apply(this,arguments)}function ot(){tt.apply(this,arguments)}function st(){Z.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function at(t,e){return e=e||{},e.recognizers=m(e.recognizers,at.defaults.preset),new ht(t,e)}function ht(t,e){this.options=dt({},at.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=C(this),this.touchAction=new X(this,this.options.touchAction),lt(this,!0),c(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function lt(t,e){var i=t.element;i.style&&c(t.options.cssProps,function(t,n){i.style[_(i.style,n)]=e?t:""})}function ct(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var dt,ut=["","webkit","Moz","MS","ms","o"],ft=o.createElement("div"),pt="function",mt=Math.round,gt=Math.abs,vt=Date.now;dt="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var At=d(function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===a)&&(t[n[r]]=e[n[r]]),r++;return t},"extend","Use `assign`."),yt=d(function(t,e){return At(t,e,!0)},"merge","Use `assign`."),bt=1,Et=/mobile|tablet|ip(ad|hone|od)|android/i,wt="ontouchstart"in r,xt=_(r,"PointerEvent")!==a,_t=wt&&Et.test(navigator.userAgent),Tt="touch",St="pen",Rt="mouse",Ct="kinect",kt=25,Mt=1,Ht=2,Pt=4,Dt=8,Ot=1,Lt=2,It=4,Bt=8,Ft=16,Nt=Lt|It,zt=Bt|Ft,jt=Nt|zt,Ut=["x","y"],Vt=["clientX","clientY"];R.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(S(this.element),this.evWin,this.domHandler)}};var Wt={mousedown:Mt,mousemove:Ht,mouseup:Pt},Gt="mousedown",Yt="mousemove mouseup";u(j,R,{handler:function(t){var e=Wt[t.type];e&Mt&&0===t.button&&(this.pressed=!0),e&Ht&&1!==t.which&&(e=Pt),this.pressed&&this.allow&&(e&Pt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Rt,srcEvent:t}))}});var qt={pointerdown:Mt,pointermove:Ht,pointerup:Pt,pointercancel:Dt,pointerout:Dt},Xt={2:Tt,3:St,4:Rt,5:Ct},Qt="pointerdown",Zt="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(Qt="MSPointerDown",Zt="MSPointerMove MSPointerUp MSPointerCancel"),u(U,R,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=qt[n],o=Xt[t.pointerType]||t.pointerType,s=o==Tt,a=E(e,t.pointerId,"pointerId");r&Mt&&(0===t.button||s)?0>a&&(e.push(t),a=e.length-1):r&(Pt|Dt)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var Kt={touchstart:Mt,touchmove:Ht,touchend:Pt,touchcancel:Dt},Jt="touchstart",$t="touchstart touchmove touchend touchcancel";u(V,R,{handler:function(t){var e=Kt[t.type];if(e===Mt&&(this.started=!0),this.started){var i=W.call(this,t,e);e&(Pt|Dt)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Tt,srcEvent:t})}}});var te={touchstart:Mt,touchmove:Ht,touchend:Pt,touchcancel:Dt},ee="touchstart touchmove touchend touchcancel";u(G,R,{handler:function(t){var e=te[t.type],i=Y.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Tt,srcEvent:t})}}),u(q,R,{handler:function(t,e,i){var n=i.pointerType==Tt,r=i.pointerType==Rt;if(n)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(Pt|Dt)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ie=_(ft.style,"touchAction"),ne=ie!==a,re="compute",oe="auto",se="manipulation",ae="none",he="pan-x",le="pan-y";X.prototype={set:function(t){t==re&&(t=this.compute()),ne&&this.manager.element.style&&(this.manager.element.style[ie]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return c(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Q(t.join(" "))},preventDefaults:function(t){if(!ne){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,r=y(n,ae),o=y(n,le),s=y(n,he);if(r){var a=1===t.pointers.length,h=t.distance<2,l=t.deltaTime<250;if(a&&h&&l)return}if(!s||!o)return r||o&&i&Nt||s&&i&zt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ce=1,de=2,ue=4,fe=8,pe=fe,me=16,ge=32;Z.prototype={defaults:{},set:function(t){return dt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=$(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)?this:(t=$(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return t=$(t,this),-1===E(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=$(t,this);var e=E(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){
function e(e){i.manager.emit(e,t)}var i=this,n=this.state;fe>n&&e(i.options.event+K(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=fe&&e(i.options.event+K(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=ge)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(ge|ce)))return!1;t++}return!0},recognize:function(t){var e=dt({},t);return p(this.options.enable,[this,e])?(this.state&(pe|me|ge)&&(this.state=ce),this.state=this.process(e),void(this.state&(de|ue|fe|me)&&this.tryEmit(e))):(this.reset(),void(this.state=ge))},process:function(t){},getTouchAction:function(){},reset:function(){}},u(tt,Z,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(de|ue),r=this.attrTest(t);return n&&(i&Dt||!r)?e|me:n||r?i&Pt?e|fe:e&de?e|ue:de:ge}}),u(et,tt,{defaults:{event:"pan",threshold:10,pointers:1,direction:jt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Nt&&e.push(le),t&zt&&e.push(he),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&Nt?(r=0===o?Ot:0>o?Lt:It,i=o!=this.pX,n=Math.abs(t.deltaX)):(r=0===s?Ot:0>s?Bt:Ft,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return tt.prototype.attrTest.call(this,t)&&(this.state&de||!(this.state&de)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=J(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),u(it,tt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&de)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),u(nt,Z,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[oe]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(Pt|Dt)&&!r)this.reset();else if(t.eventType&Mt)this.reset(),this._timer=h(function(){this.state=pe,this.tryEmit()},e.time,this);else if(t.eventType&Pt)return pe;return ge},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===pe&&(t&&t.eventType&Pt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=vt(),this.manager.emit(this.options.event,this._input)))}}),u(rt,tt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&de)}}),u(ot,tt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Nt|zt,pointers:1},getTouchAction:function(){return et.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Nt|zt)?e=t.overallVelocity:i&Nt?e=t.overallVelocityX:i&zt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&gt(e)>this.options.velocity&&t.eventType&Pt},emit:function(t){var e=J(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),u(st,Z,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[se]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Mt&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=Pt)return this.failTimeout();var o=this.pTime?t.timeStamp-this.pTime<e.interval:!0,s=!this.pCenter||B(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t;var a=this.count%e.taps;if(0===a)return this.hasRequireFailures()?(this._timer=h(function(){this.state=pe,this.tryEmit()},e.interval,this),de):pe}return ge},failTimeout:function(){return this._timer=h(function(){this.state=ge},this.options.interval,this),ge},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==pe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),at.VERSION="2.0.6",at.defaults={domEvents:!1,touchAction:re,enable:!0,inputTarget:null,inputClass:null,preset:[[rt,{enable:!1}],[it,{enable:!1},["rotate"]],[ot,{direction:Nt}],[et,{direction:Nt},["swipe"]],[st],[st,{event:"doubletap",taps:2},["tap"]],[nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ve=1,Ae=2;ht.prototype={set:function(t){return dt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?Ae:ve},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&pe)&&(r=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],e.stopped===Ae||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(de|ue|fe)&&(r=e.curRecognizer=i),o++}},get:function(t){if(t instanceof Z)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=E(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){var i=this.handlers;return c(b(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return c(b(t),function(t){e?i[t]&&i[t].splice(E(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&ct(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&lt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},dt(at,{INPUT_START:Mt,INPUT_MOVE:Ht,INPUT_END:Pt,INPUT_CANCEL:Dt,STATE_POSSIBLE:ce,STATE_BEGAN:de,STATE_CHANGED:ue,STATE_ENDED:fe,STATE_RECOGNIZED:pe,STATE_CANCELLED:me,STATE_FAILED:ge,DIRECTION_NONE:Ot,DIRECTION_LEFT:Lt,DIRECTION_RIGHT:It,DIRECTION_UP:Bt,DIRECTION_DOWN:Ft,DIRECTION_HORIZONTAL:Nt,DIRECTION_VERTICAL:zt,DIRECTION_ALL:jt,Manager:ht,Input:R,TouchAction:X,TouchInput:G,MouseInput:j,PointerEventInput:U,TouchMouseInput:q,SingleTouchInput:V,Recognizer:Z,AttrRecognizer:tt,Tap:st,Pan:et,Swipe:ot,Pinch:it,Rotate:rt,Press:nt,on:g,off:v,each:c,merge:yt,extend:At,assign:dt,inherit:u,bindFn:f,prefixed:_});var ye="undefined"!=typeof r?r:"undefined"!=typeof self?self:{};ye.Hammer=at,n=function(){return at}.call(e,i,e,t),!(n!==a&&(t.exports=n))}(window,document,"Hammer")},function(t,e,i){var n,r,o;!function(i,s){r=[],n=s,o="function"==typeof n?n.apply(e,r):n,!(void 0!==o&&(t.exports=o))}(this,function(){function t(t){var e,i=t&&t.preventDefault||!1,n=t&&t.container||window,r={},o={keydown:{},keyup:{}},s={};for(e=97;122>=e;e++)s[String.fromCharCode(e)]={code:65+(e-97),shift:!1};for(e=65;90>=e;e++)s[String.fromCharCode(e)]={code:e,shift:!0};for(e=0;9>=e;e++)s[""+e]={code:48+e,shift:!1};for(e=1;12>=e;e++)s["F"+e]={code:111+e,shift:!1};for(e=0;9>=e;e++)s["num"+e]={code:96+e,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s["delete"]={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(t){l(t,"keydown")},h=function(t){l(t,"keyup")},l=function(t,e){if(void 0!==o[e][t.keyCode]){for(var n=o[e][t.keyCode],r=0;r<n.length;r++)void 0===n[r].shift?n[r].fn(t):1==n[r].shift&&1==t.shiftKey?n[r].fn(t):0==n[r].shift&&0==t.shiftKey&&n[r].fn(t);1==i&&t.preventDefault()}};return r.bind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);void 0===o[i][s[t].code]&&(o[i][s[t].code]=[]),o[i][s[t].code].push({fn:e,shift:s[t].shift})},r.bindAll=function(t,e){void 0===e&&(e="keydown");for(var i in s)s.hasOwnProperty(i)&&r.bind(i,t,e)},r.getKey=function(t){for(var e in s)if(s.hasOwnProperty(e)){if(1==t.shiftKey&&1==s[e].shift&&t.keyCode==s[e].code)return e;if(0==t.shiftKey&&0==s[e].shift&&t.keyCode==s[e].code)return e;if(t.keyCode==s[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},r.unbind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);if(void 0!==e){var n=[],r=o[i][s[t].code];if(void 0!==r)for(var a=0;a<r.length;a++)r[a].fn==e&&r[a].shift==s[t].shift||n.push(o[i][s[t].code][a]);o[i][s[t].code]=n}else o[i][s[t].code]=[]},r.reset=function(){o={keydown:{},keyup:{}}},r.destroy=function(){o={keydown:{},keyup:{}},n.removeEventListener("keydown",a,!0),n.removeEventListener("keyup",h,!0)},n.addEventListener("keydown",a,!0),n.addEventListener("keyup",h,!0),r}return t})},function(t,e,i){e.util=i(1),e.DOMutil=i(8),e.DataSet=i(9),e.DataView=i(11),e.Queue=i(10),e.Timeline=i(25),e.Graph2d=i(50),e.timeline={Core:i(33),DateUtil:i(32),Range:i(30),stack:i(37),TimeStep:i(35),components:{items:{Item:i(39),BackgroundItem:i(43),BoxItem:i(41),PointItem:i(42),RangeItem:i(38)},BackgroundGroup:i(40),Component:i(31),CurrentTime:i(48),CustomTime:i(46),DataAxis:i(52),DataScale:i(53),GraphGroup:i(54),Group:i(36),ItemSet:i(34),Legend:i(58),LineGraph:i(51),TimeAxis:i(44)}},e.moment=i(2),e.Hammer=i(20),e.keycharm=i(23)},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,i,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(i)||i instanceof d||i instanceof u)&&i instanceof Object){var o=n;n=i,i=o}var s=this;this.defaultOptions={start:null,end:null,autoResize:!0,throttleRedraw:0,orientation:{axis:"bottom",item:"bottom"},rtl:!1,moment:l,width:null,height:null,maxHeight:null,minHeight:null},this.options=c.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function(){return s.timeAxis.step.scale},getStep:function(){return s.timeAxis.step.step},toScreen:s._toScreen.bind(s),toGlobalScreen:s._toGlobalScreen.bind(s),toTime:s._toTime.bind(s),toGlobalTime:s._toGlobalTime.bind(s)}},this.range=new f(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new m(this.body),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new g(this.body),this.components.push(this.currentTime),this.itemSet=new A(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,this.on("tap",function(t){s.emit("click",s.getEventProperties(t))}),this.on("doubletap",function(t){s.emit("doubleClick",s.getEventProperties(t))}),this.dom.root.oncontextmenu=function(t){s.emit("contextmenu",s.getEventProperties(t))},this.fitDone=!1,this.on("changed",function(){if(null!=this.itemsData&&!s.fitDone)if(s.fitDone=!0,void 0!=s.options.start||void 0!=s.options.end){if(void 0==s.options.start||void 0==s.options.end)var t=s.getItemRange();var e=void 0!=s.options.start?s.options.start:t.min,i=void 0!=s.options.end?s.options.end:t.max;s.setWindow(e,i,{animation:!1})}else s.fit({animation:!1})}),n&&this.setOptions(n),i&&this.setGroups(i),e&&this.setItems(e),this._redraw()}var o=i(26),s=n(o),a=i(29),h=n(a),l=(i(13),i(20),i(2)),c=i(1),d=i(9),u=i(11),f=i(30),p=i(33),m=i(44),g=i(48),v=i(46),A=i(34),y=i(29).printStyle,b=i(49).allOptions,E=i(49).configureOptions;r.prototype=new p,r.prototype._createConfigurator=function(){return new s["default"](this,this.dom.container,E)},r.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()},r.prototype.setOptions=function(t){var e=h["default"].validate(t,b);if(e===!0&&console.log("%cErrors have been found in the supplied options object.",y),p.prototype.setOptions.call(this,t),"type"in t&&t.type!==this.options.type){this.options.type=t.type;var i=this.itemsData;if(i){var n=this.getSelection();this.setItems(null),this.setItems(i),this.setSelection(n)}}},r.prototype.setItems=function(t){var e;e=t?t instanceof d||t instanceof u?t:new d(t,{type:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.itemSet&&this.itemSet.setItems(e)},r.prototype.setGroups=function(t){var e;e=t?t instanceof d||t instanceof u?t:new d(t):null,this.groupsData=e,this.itemSet.setGroups(e)},r.prototype.setData=function(t){t&&t.groups&&this.setGroups(t.groups),t&&t.items&&this.setItems(t.items)},r.prototype.setSelection=function(t,e){this.itemSet&&this.itemSet.setSelection(t),e&&e.focus&&this.focus(t,e)},r.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},r.prototype.focus=function(t,e){if(this.itemsData&&void 0!=t){var i=Array.isArray(t)?t:[t],n=this.itemsData.getDataSet().get(i,{type:{start:"Date",end:"Date"}}),r=null,o=null;if(n.forEach(function(t){var e=t.start.valueOf(),i="end"in t?t.end.valueOf():t.start.valueOf();(null===r||r>e)&&(r=e),(null===o||i>o)&&(o=i)}),null!==r&&null!==o){var s=(r+o)/2,a=Math.max(this.range.end-this.range.start,1.1*(o-r)),h=e&&void 0!==e.animation?e.animation:!0;this.range.setRange(s-a/2,s+a/2,h)}}},r.prototype.fit=function(t){var e,i=t&&void 0!==t.animation?t.animation:!0,n=this.itemsData&&this.itemsData.getDataSet();1===n.length&&void 0===n.get()[0].end?(e=this.getDataRange(),this.moveTo(e.min.valueOf(),{animation:i})):(e=this.getItemRange(),this.range.setRange(e.min,e.max,i))},r.prototype.getItemRange=function(){var t=this,e=this.getDataRange(),i=null!==e.min?e.min.valueOf():null,n=null!==e.max?e.max.valueOf():null,r=null,o=null;if(null!=i&&null!=n){var s,a,h,l,d;!function(){var e=function(t){return c.convert(t.data.start,"Date").valueOf()},u=function(t){var e=void 0!=t.data.end?t.data.end:t.data.start;return c.convert(e,"Date").valueOf()};s=n-i,0>=s&&(s=10),a=s/t.props.center.width,c.forEach(t.itemSet.items,function(t){t.show(),t.repositionX();var s=e(t),h=u(t);if(this.options.rtl)var l=s-(t.getWidthRight()+10)*a,c=h+(t.getWidthLeft()+10)*a;else var l=s-(t.getWidthLeft()+10)*a,c=h+(t.getWidthRight()+10)*a;i>l&&(i=l,r=t),c>n&&(n=c,o=t)}.bind(t)),r&&o&&(h=r.getWidthLeft()+10,l=o.getWidthRight()+10,d=t.props.center.width-h-l,d>0&&(t.options.rtl?(i=e(r)-l*s/d,n=u(o)+h*s/d):(i=e(r)-h*s/d,n=u(o)+l*s/d)))}()}return{min:null!=i?new Date(i):null,max:null!=n?new Date(n):null}},r.prototype.getDataRange=function(){var t=null,e=null,i=this.itemsData&&this.itemsData.getDataSet();return i&&i.forEach(function(i){var n=c.convert(i.start,"Date").valueOf(),r=c.convert(void 0!=i.end?i.end:i.start,"Date").valueOf();(null===t||t>n)&&(t=n),(null===e||r>e)&&(e=r)}),{min:null!=t?new Date(t):null,max:null!=e?new Date(e):null}},r.prototype.getEventProperties=function(t){var e=t.center?t.center.x:t.clientX,i=t.center?t.center.y:t.clientY;if(this.options.rtl)var n=c.getAbsoluteRight(this.dom.centerContainer)-e;else var n=e-c.getAbsoluteLeft(this.dom.centerContainer);var r=i-c.getAbsoluteTop(this.dom.centerContainer),o=this.itemSet.itemFromTarget(t),s=this.itemSet.groupFromTarget(t),a=v.customTimeFromTarget(t),h=this.itemSet.options.snap||null,l=this.body.util.getScale(),d=this.body.util.getStep(),u=this._toTime(n),f=h?h(u,l,d):u,p=c.getTarget(t),m=null;return null!=o?m="item":null!=a?m="custom-time":c.hasParent(p,this.timeAxis.dom.foreground)?m="axis":this.timeAxis2&&c.hasParent(p,this.timeAxis2.dom.foreground)?m="axis":c.hasParent(p,this.itemSet.dom.labelSet)?m="group-label":c.hasParent(p,this.currentTime.bar)?m="current-time":c.hasParent(p,this.dom.center)&&(m="background"),{event:t,item:o?o.id:null,group:s?s.groupId:null,what:m,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:n,y:r,time:u,snappedTime:f}},t.exports=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(27),h=n(a),l=i(1),c=function(){function t(e,i,n){var o=arguments.length<=3||void 0===arguments[3]?1:arguments[3];r(this,t),this.parent=e,this.changedOptions=[],this.container=i,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},l.extend(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new h["default"](o),this.wrapper=void 0}return s(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;"string"==typeof t?this.options.filter=t:t instanceof Array?this.options.filter=t.join():"object"===("undefined"==typeof t?"undefined":o(t))?(void 0!==t.container&&(this.options.container=t.container),void 0!==t.filter&&(this.options.filter=t.filter),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)):"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0),this.options.filter===!1&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){var t=this;this._clean(),this.changedOptions=[];var e=this.options.filter,i=0,n=!1;for(var r in this.configureOptions)this.configureOptions.hasOwnProperty(r)&&(this.allowCreation=!1,n=!1,"function"==typeof e?(n=e(r,[]),n=n||this._handleObject(this.configureOptions[r],[r],!0)):e!==!0&&-1===e.indexOf(r)||(n=!0),n!==!1&&(this.allowCreation=!0,i>0&&this._makeItem([]),this._makeHeader(r),this._handleObject(this.configureOptions[r],[r])),i++);this.options.showButton===!0&&!function(){var e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=function(){t._printOptions()},e.onmouseover=function(){e.className="vis-configuration vis-config-button hover"},e.onmouseout=function(){e.className="vis-configuration vis-config-button"},t.optionsContainer=document.createElement("div"),t.optionsContainer.className="vis-configuration vis-config-option-container",t.domElements.push(t.optionsContainer),t.domElements.push(e)}(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,i=0;i<t.length;i++){if(void 0===e[t[i]]){e=void 0;break}e=e[t[i]]}return e}},{key:"_makeItem",value:function(t){var e=arguments,i=this;if(this.allowCreation===!0){var n,r,s,a=function(){var o=document.createElement("div");for(o.className="vis-configuration vis-config-item vis-config-s"+t.length,n=e.length,r=Array(n>1?n-1:0),s=1;n>s;s++)r[s-1]=e[s];return r.forEach(function(t){o.appendChild(t)}),i.domElements.push(o),{v:i.domElements.length}}();if("object"===("undefined"==typeof a?"undefined":o(a)))return a.v}return 0}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerHTML=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=document.createElement("div");return n.className="vis-configuration vis-config-label vis-config-s"+e.length,i===!0?n.innerHTML="<i><b>"+t+":</b></i>":n.innerHTML=t+":",n}},{key:"_makeDropdown",value:function(t,e,i){var n=document.createElement("select");n.className="vis-configuration vis-config-select";var r=0;void 0!==e&&-1!==t.indexOf(e)&&(r=t.indexOf(e));for(var o=0;o<t.length;o++){var s=document.createElement("option");s.value=t[o],o===r&&(s.selected="selected"),s.innerHTML=t[o],n.appendChild(s)}var a=this;n.onchange=function(){a._update(this.value,i)};var h=this._makeLabel(i[i.length-1],i);this._makeItem(i,h,n)}},{key:"_makeRange",value:function(t,e,i){var n=t[0],r=t[1],o=t[2],s=t[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=r,a.max=o}catch(h){}a.step=s;var l="",c=0;if(void 0!==e){var d=1.2;0>e&&r>e*d?(a.min=Math.ceil(e*d),c=a.min,l="range increased"):r>e/d&&(a.min=Math.ceil(e/d),c=a.min,l="range increased"),e*d>o&&1!==o&&(a.max=Math.ceil(e*d),c=a.max,l="range increased"),a.value=e}else a.value=n;var u=document.createElement("input");u.className="vis-configuration vis-config-rangeinput",u.value=a.value;var f=this;a.onchange=function(){u.value=this.value,f._update(Number(this.value),i)},a.oninput=function(){u.value=this.value};var p=this._makeLabel(i[i.length-1],i),m=this._makeItem(i,p,a,u);""!==l&&this.popupHistory[m]!==c&&(this.popupHistory[m]=c,this._setupPopup(l,m))}},{key:"_setupPopup",value:function(t,e){var i=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=t,n.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index],i=e.getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,e,i){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=t,void 0!==e&&(n.checked=e,e!==t&&("object"===("undefined"==typeof t?"undefined":o(t))?e!==t.enabled&&this.changedOptions.push({path:i,value:e}):this.changedOptions.push({path:i,value:e})));var r=this;n.onchange=function(){r._update(this.checked,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,n)}},{key:"_makeTextInput",value:function(t,e,i){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=e,e!==t&&this.changedOptions.push({path:i,value:e});var r=this;n.onchange=function(){r._update(this.value,i)};var o=this._makeLabel(i[i.length-1],i);this._makeItem(i,o,n)}},{key:"_makeColorField",value:function(t,e,i){var n=this,r=t[1],o=document.createElement("div");e=void 0===e?r:e,"none"!==e?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=e):o.className="vis-configuration vis-config-colorBlock none",e=void 0===e?r:e,o.onclick=function(){n._showColorPicker(e,o,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,o)}},{key:"_showColorPicker",value:function(t,e,i){var n=this;e.onclick=function(){},this.colorPicker.insertTo(e),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(t){var r="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=r,n._update(r,i)}),this.colorPicker.setCloseCallback(function(){e.onclick=function(){n._showColorPicker(t,e,i)}})}},{key:"_handleObject",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=!1,r=this.options.filter,o=!1;for(var s in t)if(t.hasOwnProperty(s)){n=!0;var a=t[s],h=l.copyAndExtendArray(e,s);if("function"==typeof r&&(n=r(s,e),n===!1&&!(a instanceof Array)&&"string"!=typeof a&&"boolean"!=typeof a&&a instanceof Object&&(this.allowCreation=!1,n=this._handleObject(a,h,!0),this.allowCreation=i===!1)),n!==!1){o=!0;var c=this._getValue(h);if(a instanceof Array)this._handleArray(a,c,h);else if("string"==typeof a)this._makeTextInput(a,c,h);else if("boolean"==typeof a)this._makeCheckbox(a,c,h);else if(a instanceof Object){var d=!0;if(-1!==e.indexOf("physics")&&this.moduleOptions.physics.solver!==s&&(d=!1),d===!0)if(void 0!==a.enabled){var u=l.copyAndExtendArray(h,"enabled"),f=this._getValue(u);if(f===!0){var p=this._makeLabel(s,h,!0);this._makeItem(h,p),o=this._handleObject(a,h)||o}else this._makeCheckbox(a,f,h)}else{var m=this._makeLabel(s,h,!0);this._makeItem(h,m),o=this._handleObject(a,h)||o}}else console.error("dont know how to handle",a,s,h)}}return o}},{key:"_handleArray",value:function(t,e,i){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,i),t[1]!==e&&this.changedOptions.push({path:i,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:Number(e)}))}},{key:"_update",value:function(t,e){var i=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=i;t="true"===t?!0:t,t="false"===t?!1:t;for(var r=0;r<e.length;r++)"global"!==e[r]&&(void 0===n[e[r]]&&(n[e[r]]={}),r!==e.length-1?n=n[e[r]]:n[e[r]]=t);return i}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),t}();e["default"]=c},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(20),s=i(28),a=i(1),h=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];n(this,t),this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return r(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){var e={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",
snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};return"string"==typeof t?e[t]:void 0}},{key:"setColor",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if("none"!==t){var i=void 0,n=this._isColorString(t);if(void 0!==n&&(t=n),a.isString(t)===!0){if(a.isValidRGB(t)===!0){var r=t.substr(4).substr(0,t.length-5).split(",");i={r:r[0],g:r[1],b:r[2],a:1}}else if(a.isValidRGBA(t)===!0){var o=t.substr(5).substr(0,t.length-6).split(",");i={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(a.isValidHex(t)===!0){var s=a.hexToRGB(t);i={r:s.r,g:s.g,b:s.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var h=void 0!==t.a?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a:h}}if(void 0===i)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(t));this._setColor(i,e)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];e===!0&&(this.previousColor=a.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];e===!0&&(this.initialColor=a.extend({},t)),this.color=t;var i=a.RGBToHSV(t.r,t.g,t.b),n=2*Math.PI,r=this.r*i.s,o=this.centerCoordinates.x+r*Math.sin(n*i.h),s=this.centerCoordinates.y+r*Math.cos(n*i.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=s-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=a.RGBToHSV(this.color.r,this.color.g,this.color.b);e.v=t/100;var i=a.HSVToRGB(e.h,e.s,e.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.color:arguments[0],e=a.RGBToHSV(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,n,r),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-e.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),i.fill(),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(e)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(i){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(i){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var n=this;this.opacityRange.onchange=function(){n._setOpacity(this.value)},this.opacityRange.oninput=function(){n._setOpacity(this.value)},this.brightnessRange.onchange=function(){n._setBrightness(this.value)},this.brightnessRange.oninput=function(){n._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new o(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),s.onTouch(this.hammer,function(e){t._moveSelector(e)}),this.hammer.on("tap",function(e){t._moveSelector(e)}),this.hammer.on("panstart",function(e){t._moveSelector(e)}),this.hammer.on("panmove",function(e){t._moveSelector(e)}),this.hammer.on("panend",function(e){t._moveSelector(e)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,e,i);var n=void 0,r=void 0,o=void 0,s=void 0;this.centerCoordinates={x:.5*e,y:.5*i},this.r=.49*e;var h=2*Math.PI/360,l=1/360,c=1/this.r,d=void 0;for(o=0;360>o;o++)for(s=0;s<this.r;s++)n=this.centerCoordinates.x+s*Math.sin(h*o),r=this.centerCoordinates.y+s*Math.cos(h*o),d=a.HSVToRGB(o*l,s*c,1),t.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",t.fillRect(n-.5,r-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,e,i)}this.generated=!0}},{key:"_moveSelector",value:function(t){var e=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-e.left,n=t.center.y-e.top,r=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,s=i-o,h=n-r,l=Math.atan2(s,h),c=.98*Math.min(Math.sqrt(s*s+h*h),o),d=Math.cos(l)*c+r,u=Math.sin(l)*c+o;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=u-.5*this.colorPickerSelector.clientWidth+"px";var f=l/(2*Math.PI);f=0>f?f+1:f;var p=c/this.r,m=a.RGBToHSV(this.color.r,this.color.g,this.color.b);m.h=f,m.s=p;var g=a.HSVToRGB(m.h,m.s,m.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}();e["default"]=h},function(t,e,i){i(20),e.onTouch=function(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)},e.onRelease=function(t,e){return e.inputHandler=function(t){t.isFinal&&e(t)},t.on("hammer.input",e.inputHandler)},e.offTouch=function(t,e){t.off("hammer.input",e.inputHandler)},e.offRelease=e.offTouch,e.disablePreventDefaultVertically=function(t){var e="pan-y";return t.getTouchAction=function(){return[e]},t}},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1),a=!1,h=void 0,l="background: #FFeeee; color: #dd0000",c=function(){function t(){n(this,t)}return o(t,null,[{key:"validate",value:function(e,i,n){a=!1,h=i;var r=i;return void 0!==n&&(r=i[n]),t.parse(e,r,[]),a}},{key:"parse",value:function(e,i,n){for(var r in e)e.hasOwnProperty(r)&&t.check(r,e,i,n)}},{key:"check",value:function(e,i,n,r){void 0===n[e]&&void 0===n.__any__?t.getSuggestion(e,n,r):void 0===n[e]&&void 0!==n.__any__?"object"===t.getType(i[e])&&void 0!==n.__any__.__type__?t.checkFields(e,i,n,"__any__",n.__any__.__type__,r):t.checkFields(e,i,n,"__any__",n.__any__,r):void 0!==n[e].__type__?t.checkFields(e,i,n,e,n[e].__type__,r):t.checkFields(e,i,n,e,n[e],r)}},{key:"checkFields",value:function(e,i,n,r,o,h){var c=t.getType(i[e]),d=o[c];void 0!==d?"array"===t.getType(d)&&-1===d.indexOf(i[e])?(console.log('%cInvalid option detected in "'+e+'". Allowed values are:'+t.print(d)+' not "'+i[e]+'". '+t.printLocation(h,e),l),a=!0):"object"===c&&"__any__"!==r&&(h=s.copyAndExtendArray(h,e),t.parse(i[e],n[r],h)):void 0===o.any&&(console.log('%cInvalid type received for "'+e+'". Expected: '+t.print(Object.keys(o))+". Received ["+c+'] "'+i[e]+'"'+t.printLocation(h,e),l),a=!0)}},{key:"getType",value:function(t){var e="undefined"==typeof t?"undefined":r(t);return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Array.isArray(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":t._isAMomentObject===!0?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(e,i,n){var r=t.findInOptions(e,i,n,!1),o=t.findInOptions(e,h,[],!0),s=8,c=4;void 0!==r.indexMatch?console.log('%cUnknown option detected: "'+e+'" in '+t.printLocation(r.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+'"?\n\n',l):o.distance<=c&&r.distance>o.distance?console.log('%cUnknown option detected: "'+e+'" in '+t.printLocation(r.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(o.path,o.closestMatch,""),l):r.distance<=s?console.log('%cUnknown option detected: "'+e+'". Did you mean "'+r.closestMatch+'"?'+t.printLocation(r.path,e),l):console.log('%cUnknown option detected: "'+e+'". Did you mean one of these: '+t.print(Object.keys(i))+t.printLocation(n,e),l),a=!0}},{key:"findInOptions",value:function(e,i,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],o=1e9,a="",h=[],l=e.toLowerCase(),c=void 0;for(var d in i){var u=void 0;if(void 0!==i[d].__type__&&r===!0){var f=t.findInOptions(e,i[d],s.copyAndExtendArray(n,d));o>f.distance&&(a=f.closestMatch,h=f.path,o=f.distance,c=f.indexMatch)}else-1!==d.toLowerCase().indexOf(l)&&(c=d),u=t.levenshteinDistance(e,d),o>u&&(a=d,h=s.copyArray(n),o=u)}return{closestMatch:a,path:h,distance:o,indexMatch:c}}},{key:"printLocation",value:function(t,e){for(var i=arguments.length<=2||void 0===arguments[2]?"Problem value found at: \n":arguments[2],n="\n\n"+i+"options = {\n",r=0;r<t.length;r++){for(var o=0;r+1>o;o++)n+="  ";n+=t[r]+": {\n"}for(var s=0;s<t.length+1;s++)n+="  ";n+=e+"\n";for(var a=0;a<t.length+1;a++){for(var h=0;h<t.length-a;h++)n+="  ";n+="}\n"}return n+"\n\n"}},{key:"print",value:function(t){return JSON.stringify(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var i,n=[];for(i=0;i<=e.length;i++)n[i]=[i];var r;for(r=0;r<=t.length;r++)n[0][r]=r;for(i=1;i<=e.length;i++)for(r=1;r<=t.length;r++)e.charAt(i-1)==t.charAt(r-1)?n[i][r]=n[i-1][r-1]:n[i][r]=Math.min(n[i-1][r-1]+1,Math.min(n[i][r-1]+1,n[i-1][r]+1));return n[e.length][t.length]}}]),t}();e["default"]=c,e.printStyle=l},function(t,e,i){function n(t,e){var i=a().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=i.clone().add(-3,"days").valueOf(),this.end=i.clone().add(4,"days").valueOf(),this.body=t,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:a,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10},this.options=s.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.setOptions(e)}function r(t){if("horizontal"!=t&&"vertical"!=t)throw new TypeError('Unknown direction "'+t+'". Choose "horizontal" or "vertical".')}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=i(1),a=(i(28),i(2)),h=i(31),l=i(32);n.prototype=new h,n.prototype.setOptions=function(t){if(t){var e=["direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","rtl"];s.selectiveExtend(e,this.options,t),("start"in t||"end"in t)&&this.setRange(t.start,t.end)}},n.prototype.setRange=function(t,e,i,n){n!==!0&&(n=!1);var r=void 0!=t?s.convert(t,"Date").valueOf():null,a=void 0!=e?s.convert(e,"Date").valueOf():null;if(this._cancelAnimation(),i){var h=this,c=this.start,d=this.end,u="object"===("undefined"==typeof i?"undefined":o(i))&&"duration"in i?i.duration:500,f="object"===("undefined"==typeof i?"undefined":o(i))&&"easingFunction"in i?i.easingFunction:"easeInOutQuad",p=s.easingFunctions[f];if(!p)throw new Error("Unknown easing function "+JSON.stringify(f)+". Choose from: "+Object.keys(s.easingFunctions).join(", "));var m=(new Date).valueOf(),g=!1,v=function b(){if(!h.props.touch.dragging){var t=(new Date).valueOf(),e=t-m,i=p(e/u),o=e>u,s=o||null===r?r:c+(r-c)*i,f=o||null===a?a:d+(a-d)*i;A=h._applyRange(s,f),l.updateHiddenDates(h.options.moment,h.body,h.options.hiddenDates),g=g||A,A&&h.body.emitter.emit("rangechange",{start:new Date(h.start),end:new Date(h.end),byUser:n}),o?g&&h.body.emitter.emit("rangechanged",{start:new Date(h.start),end:new Date(h.end),byUser:n}):h.animationTimer=setTimeout(b,20)}};return v()}var A=this._applyRange(r,a);if(l.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),A){var y={start:new Date(this.start),end:new Date(this.end),byUser:n};this.body.emitter.emit("rangechange",y),this.body.emitter.emit("rangechanged",y)}},n.prototype._cancelAnimation=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)},n.prototype._applyRange=function(t,e){var i,n=null!=t?s.convert(t,"Date").valueOf():this.start,r=null!=e?s.convert(e,"Date").valueOf():this.end,o=null!=this.options.max?s.convert(this.options.max,"Date").valueOf():null,a=null!=this.options.min?s.convert(this.options.min,"Date").valueOf():null;if(isNaN(n)||null===n)throw new Error('Invalid start "'+t+'"');if(isNaN(r)||null===r)throw new Error('Invalid end "'+e+'"');if(n>r&&(r=n),null!==a&&a>n&&(i=a-n,n+=i,r+=i,null!=o&&r>o&&(r=o)),null!==o&&r>o&&(i=r-o,n-=i,r-=i,null!=a&&a>n&&(n=a)),null!==this.options.zoomMin){var h=parseFloat(this.options.zoomMin);0>h&&(h=0),h>r-n&&(this.end-this.start===h&&n>this.start&&r<this.end?(n=this.start,r=this.end):(i=h-(r-n),n-=i/2,r+=i/2))}if(null!==this.options.zoomMax){var l=parseFloat(this.options.zoomMax);0>l&&(l=0),r-n>l&&(this.end-this.start===l&&n<this.start&&r>this.end?(n=this.start,r=this.end):(i=r-n-l,n+=i/2,r-=i/2))}var c=this.start!=n||this.end!=r;return n>=this.start&&n<=this.end||r>=this.start&&r<=this.end||this.start>=n&&this.start<=r||this.end>=n&&this.end<=r||this.body.emitter.emit("checkRangedItems"),this.start=n,this.end=r,c},n.prototype.getRange=function(){return{start:this.start,end:this.end}},n.prototype.conversion=function(t,e){return n.conversion(this.start,this.end,t,e)},n.conversion=function(t,e,i,n){return void 0===n&&(n=0),0!=i&&e-t!=0?{offset:t,scale:i/(e-t-n)}:{offset:0,scale:1}},n.prototype._onDragStart=function(t){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(t)&&this.props.touch.allowDragging&&(this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))},n.prototype._onDrag=function(t){if(this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var e=this.options.direction;r(e);var i="horizontal"==e?t.deltaX:t.deltaY;i-=this.deltaDifference;var n=this.props.touch.end-this.props.touch.start,o=l.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);n-=o;var s="horizontal"==e?this.body.domProps.center.width:this.body.domProps.center.height;if(this.options.rtl)var a=i/s*n;else var a=-i/s*n;var h=this.props.touch.start+a,c=this.props.touch.end+a,d=l.snapAwayFromHidden(this.body.hiddenDates,h,this.previousDelta-i,!0),u=l.snapAwayFromHidden(this.body.hiddenDates,c,this.previousDelta-i,!0);if(d!=h||u!=c)return this.deltaDifference+=i,this.props.touch.start=d,this.props.touch.end=u,void this._onDrag(t);this.previousDelta=i,this._applyRange(h,c);var f=new Date(this.start),p=new Date(this.end);this.body.emitter.emit("rangechange",{start:f,end:p,byUser:!0})}},n.prototype._onDragEnd=function(t){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0}))},n.prototype._onMouseWheel=function(t){if(this.options.zoomable&&this.options.moveable&&this._isInsideRange(t)&&(!this.options.zoomKey||t[this.options.zoomKey])){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e){var i;i=0>e?1-e/5:1/(1+e/5);var n=this.getPointer({x:t.clientX,y:t.clientY},this.body.dom.center),r=this._pointerToDate(n);this.zoom(i,r,e)}t.preventDefault()}},n.prototype._onTouch=function(t){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.scaleOffset=0,this.deltaDifference=0},n.prototype._onPinch=function(t){if(this.options.zoomable&&this.options.moveable){this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(t.center,this.body.dom.center));var e=1/(t.scale+this.scaleOffset),i=this._pointerToDate(this.props.touch.center),n=l.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),r=l.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,i),o=n-r,s=i-r+(this.props.touch.start-(i-r))*e,a=i+o+(this.props.touch.end-(i+o))*e;this.startToFront=0>=1-e,this.endToFront=0>=e-1;var h=l.snapAwayFromHidden(this.body.hiddenDates,s,1-e,!0),c=l.snapAwayFromHidden(this.body.hiddenDates,a,e-1,!0);h==s&&c==a||(this.props.touch.start=h,this.props.touch.end=c,this.scaleOffset=1-t.scale,s=h,a=c),this.setRange(s,a,!1,!0),this.startToFront=!1,this.endToFront=!0}},n.prototype._isInsideRange=function(t){var e=t.center?t.center.x:t.clientX;if(this.options.rtl)var i=e-s.getAbsoluteLeft(this.body.dom.centerContainer);else var i=s.getAbsoluteRight(this.body.dom.centerContainer)-e;var n=this.body.util.toTime(i);return n>=this.start&&n<=this.end},n.prototype._pointerToDate=function(t){var e,i=this.options.direction;if(r(i),"horizontal"==i)return this.body.util.toTime(t.x).valueOf();var n=this.body.domProps.center.height;return e=this.conversion(n),t.y/e.scale+e.offset},n.prototype.getPointer=function(t,e){return this.options.rtl?{x:s.getAbsoluteRight(e)-t.x,y:t.y-s.getAbsoluteTop(e)}:{x:t.x-s.getAbsoluteLeft(e),y:t.y-s.getAbsoluteTop(e)}},n.prototype.zoom=function(t,e,i){null==e&&(e=(this.start+this.end)/2);var n=l.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),r=l.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,e),o=n-r,s=e-r+(this.start-(e-r))*t,a=e+o+(this.end-(e+o))*t;this.startToFront=!(i>0),this.endToFront=!(-i>0);var h=l.snapAwayFromHidden(this.body.hiddenDates,s,i,!0),c=l.snapAwayFromHidden(this.body.hiddenDates,a,-i,!0);h==s&&c==a||(s=h,a=c),this.setRange(s,a,!1,!0),this.startToFront=!1,this.endToFront=!0},n.prototype.move=function(t){var e=this.end-this.start,i=this.start+e*t,n=this.end+e*t;this.start=i,this.end=n},n.prototype.moveTo=function(t){var e=(this.start+this.end)/2,i=e-t,n=this.start-i,r=this.end-i;this.setRange(n,r)},t.exports=n},function(t,e){function i(t,e){this.options=null,this.props=null}i.prototype.setOptions=function(t){t&&util.extend(this.options,t)},i.prototype.redraw=function(){return!1},i.prototype.destroy=function(){},i.prototype._isResized=function(){var t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t},t.exports=i},function(t,e){e.convertHiddenOptions=function(t,i,n){if(n&&!Array.isArray(n))return e.convertHiddenOptions(t,i,[n]);if(i.hiddenDates=[],n&&1==Array.isArray(n)){for(var r=0;r<n.length;r++)if(void 0===n[r].repeat){var o={};o.start=t(n[r].start).toDate().valueOf(),o.end=t(n[r].end).toDate().valueOf(),i.hiddenDates.push(o)}i.hiddenDates.sort(function(t,e){return t.start-e.start})}},e.updateHiddenDates=function(t,i,n){if(n&&!Array.isArray(n))return e.updateHiddenDates(t,i,[n]);if(n&&void 0!==i.domProps.centerContainer.width){e.convertHiddenOptions(t,i,n);for(var r=t(i.range.start),o=t(i.range.end),s=i.range.end-i.range.start,a=s/i.domProps.centerContainer.width,h=0;h<n.length;h++)if(void 0!==n[h].repeat){var l=t(n[h].start),c=t(n[h].end);if("Invalid Date"==l._d)throw new Error("Supplied start date is not valid: "+n[h].start);if("Invalid Date"==c._d)throw new Error("Supplied end date is not valid: "+n[h].end);var d=c-l;if(d>=4*a){var u=0,f=o.clone();switch(n[h].repeat){case"daily":l.day()!=c.day()&&(u=1),l.dayOfYear(r.dayOfYear()),l.year(r.year()),l.subtract(7,"days"),c.dayOfYear(r.dayOfYear()),c.year(r.year()),c.subtract(7-u,"days"),f.add(1,"weeks");break;case"weekly":var p=c.diff(l,"days"),m=l.day();l.date(r.date()),l.month(r.month()),l.year(r.year()),c=l.clone(),l.day(m),c.day(m),c.add(p,"days"),l.subtract(1,"weeks"),c.subtract(1,"weeks"),f.add(1,"weeks");break;case"monthly":l.month()!=c.month()&&(u=1),l.month(r.month()),l.year(r.year()),l.subtract(1,"months"),c.month(r.month()),c.year(r.year()),c.subtract(1,"months"),c.add(u,"months"),f.add(1,"months");break;case"yearly":l.year()!=c.year()&&(u=1),l.year(r.year()),l.subtract(1,"years"),c.year(r.year()),c.subtract(1,"years"),c.add(u,"years"),f.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[h].repeat)}for(;f>l;)switch(i.hiddenDates.push({start:l.valueOf(),end:c.valueOf()}),n[h].repeat){case"daily":l.add(1,"days"),c.add(1,"days");break;case"weekly":l.add(1,"weeks"),c.add(1,"weeks");break;case"monthly":l.add(1,"months"),c.add(1,"months");break;case"yearly":l.add(1,"y"),c.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[h].repeat)}i.hiddenDates.push({start:l.valueOf(),end:c.valueOf()})}}e.removeDuplicates(i);var g=e.isHidden(i.range.start,i.hiddenDates),v=e.isHidden(i.range.end,i.hiddenDates),A=i.range.start,y=i.range.end;1==g.hidden&&(A=1==i.range.startToFront?g.startDate-1:g.endDate+1),1==v.hidden&&(y=1==i.range.endToFront?v.startDate-1:v.endDate+1),1!=g.hidden&&1!=v.hidden||i.range._applyRange(A,y)}},e.removeDuplicates=function(t){for(var e=t.hiddenDates,i=[],n=0;n<e.length;n++)for(var r=0;r<e.length;r++)n!=r&&1!=e[r].remove&&1!=e[n].remove&&(e[r].start>=e[n].start&&e[r].end<=e[n].end?e[r].remove=!0:e[r].start>=e[n].start&&e[r].start<=e[n].end?(e[n].end=e[r].end,e[r].remove=!0):e[r].end>=e[n].start&&e[r].end<=e[n].end&&(e[n].start=e[r].start,e[r].remove=!0));for(var n=0;n<e.length;n++)e[n].remove!==!0&&i.push(e[n]);t.hiddenDates=i,t.hiddenDates.sort(function(t,e){return t.start-e.start})},e.printDates=function(t){for(var e=0;e<t.length;e++)console.log(e,new Date(t[e].start),new Date(t[e].end),t[e].start,t[e].end,t[e].remove)},e.stepOverHiddenDates=function(t,e,i){for(var n=!1,r=e.current.valueOf(),o=0;o<e.hiddenDates.length;o++){var s=e.hiddenDates[o].start,a=e.hiddenDates[o].end;if(r>=s&&a>r){n=!0;break}}if(1==n&&r<e._end.valueOf()&&r!=i){var h=t(i),l=t(a);h.year()!=l.year()?e.switchedYear=!0:h.month()!=l.month()?e.switchedMonth=!0:h.dayOfYear()!=l.dayOfYear()&&(e.switchedDay=!0),e.current=l}},e.toScreen=function(t,i,n){if(0==t.body.hiddenDates.length){var r=t.range.conversion(n);return(i.valueOf()-r.offset)*r.scale}var o=e.isHidden(i,t.body.hiddenDates);1==o.hidden&&(i=o.startDate);var s=e.getHiddenDurationBetween(t.body.hiddenDates,t.range.start,t.range.end);i=e.correctTimeForHidden(t.options.moment,t.body.hiddenDates,t.range,i);var r=t.range.conversion(n,s);return(i.valueOf()-r.offset)*r.scale},e.toTime=function(t,i,n){if(0==t.body.hiddenDates.length){var r=t.range.conversion(n);return new Date(i/r.scale+r.offset)}var o=e.getHiddenDurationBetween(t.body.hiddenDates,t.range.start,t.range.end),s=t.range.end-t.range.start-o,a=s*i/n,h=e.getAccumulatedHiddenDuration(t.body.hiddenDates,t.range,a),l=new Date(h+a+t.range.start);return l},e.getHiddenDurationBetween=function(t,e,i){for(var n=0,r=0;r<t.length;r++){var o=t[r].start,s=t[r].end;o>=e&&i>s&&(n+=s-o)}return n},e.correctTimeForHidden=function(t,i,n,r){return r=t(r).toDate().valueOf(),r-=e.getHiddenDurationBefore(t,i,n,r)},e.getHiddenDurationBefore=function(t,e,i,n){var r=0;n=t(n).toDate().valueOf();for(var o=0;o<e.length;o++){var s=e[o].start,a=e[o].end;s>=i.start&&a<i.end&&n>=a&&(r+=a-s)}return r},e.getAccumulatedHiddenDuration=function(t,e,i){for(var n=0,r=0,o=e.start,s=0;s<t.length;s++){var a=t[s].start,h=t[s].end;if(a>=e.start&&h<e.end){if(r+=a-o,o=h,r>=i)break;n+=h-a}}return n},e.snapAwayFromHidden=function(t,i,n,r){var o=e.isHidden(i,t);return 1==o.hidden?0>n?1==r?o.startDate-(o.endDate-i)-1:o.startDate-1:1==r?o.endDate+(i-o.startDate)+1:o.endDate+1:i},e.isHidden=function(t,e){for(var i=0;i<e.length;i++){var n=e[i].start,r=e[i].end;if(t>=n&&r>t)return{hidden:!0,startDate:n,endDate:r}}return{hidden:!1,startDate:n,endDate:r}}},function(t,e,i){function n(){}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=i(13),s=i(20),a=i(28),h=i(1),l=(i(9),i(11),i(30),i(34),i(44)),c=i(45),d=i(32),u=i(46);o(n.prototype),n.prototype._create=function(t){function e(t){i.isActive()&&i.emit("mousewheel",t)}this.dom={},this.dom.container=t,this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",
this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.on("rangechange",function(){this.initialDrawDone===!0&&this._redraw()}.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("pan",this._onDrag.bind(this));var i=this;this.on("_change",function(t){t&&1==t.queue?i._redrawTimer||(i._redrawTimer=setTimeout(function(){i._redrawTimer=null,i._redraw()},0)):i._redraw()}),this.hammer=new s(this.dom.root);var n=this.hammer.get("pinch").set({enable:!0});a.disablePreventDefaultVertically(n),this.hammer.get("pan").set({threshold:5,direction:s.DIRECTION_HORIZONTAL}),this.listeners={};var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];if(r.forEach(function(t){var e=function(e){i.isActive()&&i.emit(t,e)};i.hammer.on(t,e),i.listeners[t]=e}),a.onTouch(this.hammer,function(t){i.emit("touch",t)}.bind(this)),a.onRelease(this.hammer,function(t){i.emit("release",t)}.bind(this)),this.dom.root.addEventListener("mousewheel",e),this.dom.root.addEventListener("DOMMouseScroll",e),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,!t)throw new Error("No container provided");t.appendChild(this.dom.root)},n.prototype.setOptions=function(t){if(t){var e=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","rtl","throttleRedraw"];if(h.selectiveExtend(e,this.options,t),this.options.rtl){var i=this.dom.leftContainer;this.dom.leftContainer=this.dom.rightContainer,this.dom.rightContainer=i,this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"}if(this.options.orientation={item:void 0,axis:void 0},"orientation"in t&&("string"==typeof t.orientation?this.options.orientation={item:t.orientation,axis:t.orientation}:"object"===r(t.orientation)&&("item"in t.orientation&&(this.options.orientation.item=t.orientation.item),"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis))),"both"===this.options.orientation.axis){if(!this.timeAxis2){var n=this.timeAxis2=new l(this.body);n.setOptions=function(t){var e=t?h.extend({},t):{};e.orientation="top",l.prototype.setOptions.call(n,e)},this.components.push(n)}}else if(this.timeAxis2){var o=this.components.indexOf(this.timeAxis2);-1!==o&&this.components.splice(o,1),this.timeAxis2.destroy(),this.timeAxis2=null}if("function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),"hiddenDates"in this.options&&d.convertHiddenOptions(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in t&&(t.clickToUse?this.activator||(this.activator=new c(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),"showCustomTime"in t)throw new Error("Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])");this._initAutoResize()}if(this.components.forEach(function(e){return e.setOptions(t)}),"configure"in t){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(t.configure);var s=h.deepExtend({},this.options);this.components.forEach(function(t){h.deepExtend(s,t.options)}),this.configurator.setModuleOptions({global:s})}this._origRedraw?this._redraw():(this._origRedraw=this._redraw.bind(this),this._redraw=h.throttle(this._origRedraw,this.options.throttleRedraw))},n.prototype.isActive=function(){return!this.activator||this.activator.active},n.prototype.destroy=function(){this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var t in this.listeners)this.listeners.hasOwnProperty(t)&&delete this.listeners[t];this.listeners=null,this.hammer=null,this.components.forEach(function(t){return t.destroy()}),this.body=null},n.prototype.setCustomTime=function(t,e){var i=this.customTimes.filter(function(t){return e===t.options.id});if(0===i.length)throw new Error("No custom time bar found with id "+JSON.stringify(e));i.length>0&&i[0].setCustomTime(t)},n.prototype.getCustomTime=function(t){var e=this.customTimes.filter(function(e){return e.options.id===t});if(0===e.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));return e[0].getCustomTime()},n.prototype.setCustomTimeTitle=function(t,e){var i=this.customTimes.filter(function(t){return t.options.id===e});if(0===i.length)throw new Error("No custom time bar found with id "+JSON.stringify(e));return i.length>0?i[0].setCustomTitle(t):void 0},n.prototype.getEventProperties=function(t){return{event:t}},n.prototype.addCustomTime=function(t,e){var i=void 0!==t?h.convert(t,"Date").valueOf():new Date,n=this.customTimes.some(function(t){return t.options.id===e});if(n)throw new Error("A custom time with id "+JSON.stringify(e)+" already exists");var r=new u(this.body,h.extend({},this.options,{time:i,id:e}));return this.customTimes.push(r),this.components.push(r),this._redraw(),e},n.prototype.removeCustomTime=function(t){var e=this.customTimes.filter(function(e){return e.options.id===t});if(0===e.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));e.forEach(function(t){this.customTimes.splice(this.customTimes.indexOf(t),1),this.components.splice(this.components.indexOf(t),1),t.destroy()}.bind(this))},n.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},n.prototype.fit=function(t){var e=this.getDataRange();if(null!==e.min||null!==e.max){var i=e.max-e.min,n=new Date(e.min.valueOf()-.01*i),r=new Date(e.max.valueOf()+.01*i),o=t&&void 0!==t.animation?t.animation:!0;this.range.setRange(n,r,o)}},n.prototype.getDataRange=function(){throw new Error("Cannot invoke abstract method getDataRange")},n.prototype.setWindow=function(t,e,i){var n;if(1==arguments.length){var r=arguments[0];n=void 0!==r.animation?r.animation:!0,this.range.setRange(r.start,r.end,n)}else n=i&&void 0!==i.animation?i.animation:!0,this.range.setRange(t,e,n)},n.prototype.moveTo=function(t,e){var i=this.range.end-this.range.start,n=h.convert(t,"Date").valueOf(),r=n-i/2,o=n+i/2,s=e&&void 0!==e.animation?e.animation:!0;this.range.setRange(r,o,s)},n.prototype.getWindow=function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}},n.prototype.redraw=function(){this._redraw()},n.prototype._redraw=function(){this.redrawCount++;var t=!1,e=this.options,i=this.props,n=this.dom;if(n&&n.container&&0!=n.root.offsetWidth){d.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),"top"==e.orientation?(h.addClassName(n.root,"vis-top"),h.removeClassName(n.root,"vis-bottom")):(h.removeClassName(n.root,"vis-top"),h.addClassName(n.root,"vis-bottom")),n.root.style.maxHeight=h.option.asSize(e.maxHeight,""),n.root.style.minHeight=h.option.asSize(e.minHeight,""),n.root.style.width=h.option.asSize(e.width,""),i.border.left=(n.centerContainer.offsetWidth-n.centerContainer.clientWidth)/2,i.border.right=i.border.left,i.border.top=(n.centerContainer.offsetHeight-n.centerContainer.clientHeight)/2,i.border.bottom=i.border.top;var r=n.root.offsetHeight-n.root.clientHeight,o=n.root.offsetWidth-n.root.clientWidth;0===n.centerContainer.clientHeight&&(i.border.left=i.border.top,i.border.right=i.border.left),0===n.root.clientHeight&&(o=r),i.center.height=n.center.offsetHeight,i.left.height=n.left.offsetHeight,i.right.height=n.right.offsetHeight,i.top.height=n.top.clientHeight||-i.border.top,i.bottom.height=n.bottom.clientHeight||-i.border.bottom;var a=Math.max(i.left.height,i.center.height,i.right.height),l=i.top.height+a+i.bottom.height+r+i.border.top+i.border.bottom;n.root.style.height=h.option.asSize(e.height,l+"px"),i.root.height=n.root.offsetHeight,i.background.height=i.root.height-r;var c=i.root.height-i.top.height-i.bottom.height-r;i.centerContainer.height=c,i.leftContainer.height=c,i.rightContainer.height=i.leftContainer.height,i.root.width=n.root.offsetWidth,i.background.width=i.root.width-o,i.left.width=n.leftContainer.clientWidth||-i.border.left,i.leftContainer.width=i.left.width,i.right.width=n.rightContainer.clientWidth||-i.border.right,i.rightContainer.width=i.right.width;var u=i.root.width-i.left.width-i.right.width-o;i.center.width=u,i.centerContainer.width=u,i.top.width=u,i.bottom.width=u,n.background.style.height=i.background.height+"px",n.backgroundVertical.style.height=i.background.height+"px",n.backgroundHorizontal.style.height=i.centerContainer.height+"px",n.centerContainer.style.height=i.centerContainer.height+"px",n.leftContainer.style.height=i.leftContainer.height+"px",n.rightContainer.style.height=i.rightContainer.height+"px",n.background.style.width=i.background.width+"px",n.backgroundVertical.style.width=i.centerContainer.width+"px",n.backgroundHorizontal.style.width=i.background.width+"px",n.centerContainer.style.width=i.center.width+"px",n.top.style.width=i.top.width+"px",n.bottom.style.width=i.bottom.width+"px",n.background.style.left="0",n.background.style.top="0",n.backgroundVertical.style.left=i.left.width+i.border.left+"px",n.backgroundVertical.style.top="0",n.backgroundHorizontal.style.left="0",n.backgroundHorizontal.style.top=i.top.height+"px",n.centerContainer.style.left=i.left.width+"px",n.centerContainer.style.top=i.top.height+"px",n.leftContainer.style.left="0",n.leftContainer.style.top=i.top.height+"px",n.rightContainer.style.left=i.left.width+i.center.width+"px",n.rightContainer.style.top=i.top.height+"px",n.top.style.left=i.left.width+"px",n.top.style.top="0",n.bottom.style.left=i.left.width+"px",n.bottom.style.top=i.top.height+i.centerContainer.height+"px",this._updateScrollTop();var f=this.props.scrollTop;"top"!=e.orientation.item&&(f+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)),n.center.style.left="0",n.center.style.top=f+"px",n.left.style.left="0",n.left.style.top=f+"px",n.right.style.left="0",n.right.style.top=f+"px";var p=0==this.props.scrollTop?"hidden":"",m=this.props.scrollTop==this.props.scrollTopMin?"hidden":"";n.shadowTop.style.visibility=p,n.shadowBottom.style.visibility=m,n.shadowTopLeft.style.visibility=p,n.shadowBottomLeft.style.visibility=m,n.shadowTopRight.style.visibility=p,n.shadowBottomRight.style.visibility=m;var g=this.props.center.height>this.props.centerContainer.height;this.hammer.get("pan").set({direction:g?s.DIRECTION_ALL:s.DIRECTION_HORIZONTAL}),this.components.forEach(function(e){t=e.redraw()||t});var v=5;if(t){if(this.redrawCount<v)return void this.body.emitter.emit("_change");console.log("WARNING: infinite loop in redraw?")}else this.redrawCount=0;this.initialDrawDone=!0,this.body.emitter.emit("changed")}},n.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},n.prototype.setCurrentTime=function(t){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(t)},n.prototype.getCurrentTime=function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()},n.prototype._toTime=function(t){return d.toTime(this,t,this.props.center.width)},n.prototype._toGlobalTime=function(t){return d.toTime(this,t,this.props.root.width)},n.prototype._toScreen=function(t){return d.toScreen(this,t,this.props.center.width)},n.prototype._toGlobalScreen=function(t){return d.toScreen(this,t,this.props.root.width)},n.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},n.prototype._startAutoResize=function(){var t=this;this._stopAutoResize(),this._onResize=function(){return 1!=t.options.autoResize?void t._stopAutoResize():void(t.dom.root&&(t.dom.root.offsetWidth==t.props.lastWidth&&t.dom.root.offsetHeight==t.props.lastHeight||(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight,t.body.emitter.emit("_change"))))},h.addEventListener(window,"resize",this._onResize),t.dom.root&&(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)},n.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(h.removeEventListener(window,"resize",this._onResize),this._onResize=null)},n.prototype._onTouch=function(t){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop},n.prototype._onPinch=function(t){this.touch.allowDragging=!1},n.prototype._onDrag=function(t){if(this.touch.allowDragging){var e=t.deltaY,i=this._getScrollTop(),n=this._setScrollTop(this.touch.initialScrollTop+e);n!=i&&this.emit("verticalDrag")}},n.prototype._setScrollTop=function(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop},n.prototype._updateScrollTop=function(){var t=Math.min(this.props.centerContainer.height-this.props.center.height,0);return t!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.props.scrollTop},n.prototype._getScrollTop=function(){return this.props.scrollTop},n.prototype._createConfigurator=function(){throw new Error("Cannot invoke abstract method _createConfigurator")},t.exports=n},function(t,e,i){function n(t,e){this.body=t,this.defaultOptions={rtl:!1,type:null,orientation:{item:"bottom"},align:"auto",stack:!0,groupOrderSwap:function(t,e,i){var n=e.order;e.order=t.order,t.order=n},groupOrder:"order",selectable:!0,multiselect:!1,itemsAlwaysDraggable:!1,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:l.snap,onAdd:function(t,e){e(t)},onUpdate:function(t,e){e(t)},onMove:function(t,e){e(t)},onRemove:function(t,e){e(t)},onMoving:function(t,e){e(t)},onAddGroup:function(t,e){e(t)},onMoveGroup:function(t,e){e(t)},onRemoveGroup:function(t,e){e(t)},margin:{item:{horizontal:10,vertical:10},axis:20}},this.options=s.extend({},this.defaultOptions),this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:t.util.toScreen,toTime:t.util.toTime},this.dom={},this.props={},this.hammer=null;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e,n){i._onAdd(e.items)},update:function(t,e,n){i._onUpdate(e.items)},remove:function(t,e,n){i._onRemove(e.items)}},this.groupListeners={add:function(t,e,n){i._onAddGroups(e.items)},update:function(t,e,n){i._onUpdateGroups(e.items)},remove:function(t,e,n){i._onRemoveGroups(e.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.stackDirty=!0,this.touchParams={},this.groupTouchParams={},this._create(),this.setOptions(e)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=i(20),s=i(1),a=i(9),h=i(11),l=i(35),c=i(31),d=i(36),u=i(40),f=i(41),p=i(42),m=i(38),g=i(43),v="__ungrouped__",A="__background__";n.prototype=new c,n.types={background:g,box:f,range:m,point:p},n.prototype._create=function(){var t=document.createElement("div");t.className="vis-itemset",t["timeline-itemset"]=this,this.dom.frame=t;var e=document.createElement("div");e.className="vis-background",t.appendChild(e),this.dom.background=e;var i=document.createElement("div");i.className="vis-foreground",t.appendChild(i),this.dom.foreground=i;var n=document.createElement("div");n.className="vis-axis",this.dom.axis=n;var r=document.createElement("div");r.className="vis-labelset",this.dom.labelSet=r,this._updateUngrouped();var s=new u(A,null,this);s.show(),this.groups[A]=s,this.hammer=new o(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(t){t.isFirst&&this._onTouch(t)}.bind(this)),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:o.DIRECTION_HORIZONTAL}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.groupHammer=new o(this.body.dom.leftContainer),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:o.DIRECTION_HORIZONTAL}),this.show()},n.prototype.setOptions=function(t){if(t){var e=["type","rtl","align","order","stack","selectable","multiselect","itemsAlwaysDraggable","multiselectPerGroup","groupOrder","dataAttributes","template","groupTemplate","hide","snap","groupOrderSwap"];s.selectiveExtend(e,this.options,t),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation.item="top"===t.orientation?"top":"bottom":"object"===r(t.orientation)&&"item"in t.orientation&&(this.options.orientation.item=t.orientation.item)),"margin"in t&&("number"==typeof t.margin?(this.options.margin.axis=t.margin,this.options.margin.item.horizontal=t.margin,this.options.margin.item.vertical=t.margin):"object"===r(t.margin)&&(s.selectiveExtend(["axis"],this.options.margin,t.margin),"item"in t.margin&&("number"==typeof t.margin.item?(this.options.margin.item.horizontal=t.margin.item,this.options.margin.item.vertical=t.margin.item):"object"===r(t.margin.item)&&s.selectiveExtend(["horizontal","vertical"],this.options.margin.item,t.margin.item)))),"editable"in t&&("boolean"==typeof t.editable?(this.options.editable.updateTime=t.editable,this.options.editable.updateGroup=t.editable,this.options.editable.add=t.editable,this.options.editable.remove=t.editable):"object"===r(t.editable)&&s.selectiveExtend(["updateTime","updateGroup","add","remove"],this.options.editable,t.editable)),"groupEditable"in t&&("boolean"==typeof t.groupEditable?(this.options.groupEditable.order=t.groupEditable,this.options.groupEditable.add=t.groupEditable,this.options.groupEditable.remove=t.groupEditable):"object"===r(t.groupEditable)&&s.selectiveExtend(["order","add","remove"],this.options.groupEditable,t.groupEditable));var i=function(e){var i=t[e];if(i){if(!(i instanceof Function))throw new Error("option "+e+" must be a function "+e+"(item, callback)");this.options[e]=i}}.bind(this);["onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(i),this.markDirty()}},n.prototype.markDirty=function(t){this.groupIds=[],this.stackDirty=!0,t&&t.refreshItems&&s.forEach(this.items,function(t){t.dirty=!0,t.displayed&&t.redraw()})},n.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},n.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},n.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||this.body.dom.left.appendChild(this.dom.labelSet)},n.prototype.setSelection=function(t){var e,i,n,r;for(void 0==t&&(t=[]),Array.isArray(t)||(t=[t]),e=0,i=this.selection.length;i>e;e++)n=this.selection[e],r=this.items[n],r&&r.unselect();for(this.selection=[],e=0,i=t.length;i>e;e++)n=t[e],r=this.items[n],r&&(this.selection.push(n),r.select())},n.prototype.getSelection=function(){return this.selection.concat([])},n.prototype.getVisibleItems=function(){var t=this.body.range.getRange();if(this.options.rtl)var e=this.body.util.toScreen(t.start),i=this.body.util.toScreen(t.end);else var i=this.body.util.toScreen(t.start),e=this.body.util.toScreen(t.end);var n=[];for(var r in this.groups)if(this.groups.hasOwnProperty(r))for(var o=this.groups[r],s=o.visibleItems,a=0;a<s.length;a++){var h=s[a];this.options.rtl?h.right<i&&h.right+h.width>e&&n.push(h.id):h.left<e&&h.left+h.width>i&&n.push(h.id)}return n},n.prototype._deselect=function(t){for(var e=this.selection,i=0,n=e.length;n>i;i++)if(e[i]==t){e.splice(i,1);break}},n.prototype.redraw=function(){var t=this.options.margin,e=this.body.range,i=s.option.asSize,n=this.options,r=n.orientation.item,o=!1,a=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,a.className="vis-itemset",o=this._orderGroups()||o;var h=e.end-e.start,l=h!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth;l&&(this.stackDirty=!0),this.lastVisibleInterval=h,this.props.lastWidth=this.props.width;var c=this.stackDirty,d=this._firstGroup(),u={item:t.item,axis:t.axis},f={item:t.item,axis:t.item.vertical/2},p=0,m=t.axis+t.item.vertical;return this.groups[A].redraw(e,f,c),s.forEach(this.groups,function(t){var i=t==d?u:f,n=t.redraw(e,i,c);o=n||o,p+=t.height}),p=Math.max(p,m),this.stackDirty=!1,a.style.height=i(p),this.props.width=a.offsetWidth,this.props.height=p,this.dom.axis.style.top=i("top"==r?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",o=this._isResized()||o},n.prototype._firstGroup=function(){var t="top"==this.options.orientation.item?0:this.groupIds.length-1,e=this.groupIds[t],i=this.groups[e]||this.groups[v];return i||null},n.prototype._updateUngrouped=function(){var t,e,i=this.groups[v];if(this.groups[A],this.groupsData){if(i){i.hide(),delete this.groups[v];for(e in this.items)if(this.items.hasOwnProperty(e)){t=this.items[e],t.parent&&t.parent.remove(t);var n=this._getGroupId(t.data),r=this.groups[n];r&&r.add(t)||t.hide()}}}else if(!i){var o=null,s=null;i=new d(o,s,this),this.groups[v]=i;for(e in this.items)this.items.hasOwnProperty(e)&&(t=this.items[e],i.add(t));i.show()}},n.prototype.getLabelSet=function(){return this.dom.labelSet},n.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof a||t instanceof h))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(s.forEach(this.itemListeners,function(t,e){n.off(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var r=this.id;s.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,r)}),e=this.itemsData.getIds(),this._onAdd(e),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})},n.prototype.getItems=function(){return this.itemsData},n.prototype.setGroups=function(t){var e,i=this;if(this.groupsData&&(s.forEach(this.groupListeners,function(t,e){i.groupsData.off(e,t)}),e=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(e)),t){if(!(t instanceof a||t instanceof h))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var n=this.id;s.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,n)}),e=this.groupsData.getIds(),this._onAddGroups(e)}this._updateUngrouped(),this._order(),this.body.emitter.emit("_change",{queue:!0})},n.prototype.getGroups=function(){return this.groupsData},n.prototype.removeItem=function(t){var e=this.itemsData.get(t),i=this.itemsData.getDataSet();e&&this.options.onRemove(e,function(e){e&&i.remove(t)})},n.prototype._getType=function(t){return t.type||this.options.type||(t.end?"range":"box")},n.prototype._getGroupId=function(t){var e=this._getType(t);return"background"==e&&void 0==t.group?A:this.groupsData?t.group:v},n.prototype._onUpdate=function(t){var e=this;t.forEach(function(t){var i,r=e.itemsData.get(t,e.itemOptions),o=e.items[t],s=e._getType(r),a=n.types[s];if(o&&(a&&o instanceof a?e._updateItem(o,r):(i=o.selected,e._removeItem(o),o=null)),!o){if(!a)throw"rangeoverflow"==s?new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: .vis-item.vis-range .vis-item-content {overflow: visible;}'):new TypeError('Unknown item type "'+s+'"');o=new a(r,e.conversion,e.options),o.id=t,e._addItem(o),i&&(this.selection.push(t),o.select())}}.bind(this)),this._order(),this.stackDirty=!0,this.body.emitter.emit("_change",{queue:!0})},n.prototype._onAdd=n.prototype._onUpdate,n.prototype._onRemove=function(t){var e=0,i=this;t.forEach(function(t){var n=i.items[t];n&&(e++,i._removeItem(n))}),e&&(this._order(),this.stackDirty=!0,this.body.emitter.emit("_change",{queue:!0}))},n.prototype._order=function(){s.forEach(this.groups,function(t){t.order()})},n.prototype._onUpdateGroups=function(t){this._onAddGroups(t)},n.prototype._onAddGroups=function(t){var e=this;t.forEach(function(t){var i=e.groupsData.get(t),n=e.groups[t];if(n)n.setData(i);else{if(t==v||t==A)throw new Error("Illegal group id. "+t+" is a reserved id.");var r=Object.create(e.options);s.extend(r,{height:null}),n=new d(t,i,e),e.groups[t]=n;for(var o in e.items)if(e.items.hasOwnProperty(o)){var a=e.items[o];a.data.group==t&&n.add(a)}n.order(),n.show()}}),this.body.emitter.emit("_change",{queue:!0})},n.prototype._onRemoveGroups=function(t){var e=this.groups;t.forEach(function(t){var i=e[t];i&&(i.hide(),delete e[t])}),this.markDirty(),this.body.emitter.emit("_change",{queue:!0})},n.prototype._orderGroups=function(){if(this.groupsData){var t=this.groupsData.getIds({order:this.options.groupOrder}),e=!s.equalArray(t,this.groupIds);if(e){var i=this.groups;t.forEach(function(t){i[t].hide()}),t.forEach(function(t){i[t].show()}),this.groupIds=t}return e}return!1},n.prototype._addItem=function(t){this.items[t.id]=t;var e=this._getGroupId(t.data),i=this.groups[e];i&&i.add(t)},n.prototype._updateItem=function(t,e){var i=t.data.group,n=t.data.subgroup;if(t.setData(e),i!=t.data.group||n!=t.data.subgroup){var r=this.groups[i];r&&r.remove(t);var o=this._getGroupId(t.data),s=this.groups[o];s&&s.add(t)}},n.prototype._removeItem=function(t){t.hide(),delete this.items[t.id];var e=this.selection.indexOf(t.id);-1!=e&&this.selection.splice(e,1),t.parent&&t.parent.remove(t)},n.prototype._constructByEndArray=function(t){for(var e=[],i=0;i<t.length;i++)t[i]instanceof m&&e.push(t[i]);return e},n.prototype._onTouch=function(t){this.touchParams.item=this.itemFromTarget(t),this.touchParams.dragLeftItem=t.target.dragLeftItem||!1,this.touchParams.dragRightItem=t.target.dragRightItem||!1,this.touchParams.itemProps=null},n.prototype._getGroupIndex=function(t){for(var e=0;e<this.groupIds.length;e++)if(t==this.groupIds[e])return e},n.prototype._onDragStart=function(t){var e,i=this.touchParams.item||null,n=this;if(i&&(i.selected||this.options.itemsAlwaysDraggable)){if(!this.options.editable.updateTime&&!this.options.editable.updateGroup&&!i.editable)return;if(i.editable===!1)return;var r=this.touchParams.dragLeftItem,o=this.touchParams.dragRightItem;if(r)e={item:r,initialX:t.center.x,dragLeft:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[e];else if(o)e={item:o,initialX:t.center.x,dragRight:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[e];else{this.touchParams.selectedItem=i;var s=this._getGroupIndex(i.data.group),a=this.options.itemsAlwaysDraggable&&!i.selected?[i.id]:this.getSelection();this.touchParams.itemProps=a.map(function(e){var i=n.items[e],r=n._getGroupIndex(i.data.group);return{item:i,initialX:t.center.x,groupOffset:s-r,data:this._cloneItemData(i.data)}}.bind(this))}t.stopPropagation()}else this.options.editable.add&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey)&&this._onDragStartAddItem(t)},n.prototype._onDragStartAddItem=function(t){var e=this.options.snap||null;if(this.options.rtl)var i=s.getAbsoluteRight(this.dom.frame),n=i-t.center.x+10;else var i=s.getAbsoluteLeft(this.dom.frame),n=t.center.x-i-10;var r=this.body.util.toTime(n),o=this.body.util.getScale(),a=this.body.util.getStep(),h=e?e(r,o,a):r,l=h,c={type:"range",start:h,end:l,content:"new item"},d=s.randomUUID();c[this.itemsData._fieldId]=d;var u=this.groupFromTarget(t);u&&(c.group=u.groupId);var f=new m(c,this.conversion,this.options);f.id=d,f.data=this._cloneItemData(c),this._addItem(f);var p={item:f,initialX:t.center.x,data:f.data};this.options.rtl?p.dragLeft=!0:p.dragRight=!0,this.touchParams.itemProps=[p],t.stopPropagation()},n.prototype._onDrag=function(t){if(this.touchParams.itemProps){t.stopPropagation();var e=this,i=this.options.snap||null;if(this.options.rtl)var n=this.body.dom.root.offsetLeft+this.body.domProps.right.width;else var n=this.body.dom.root.offsetLeft+this.body.domProps.left.width;var r=this.body.util.getScale(),o=this.body.util.getStep(),a=this.touchParams.selectedItem,h=e.options.editable.updateGroup,l=null;if(h&&a&&void 0!=a.data.group){var c=e.groupFromTarget(t);c&&(l=this._getGroupIndex(c.groupId))}this.touchParams.itemProps.forEach(function(a){var h=e.body.util.toTime(t.center.x-n),c=e.body.util.toTime(a.initialX-n);if(this.options.rtl)var d=-(h-c);else var d=h-c;var u=this._cloneItemData(a.item.data);if(a.item.editable!==!1){var f=e.options.editable.updateTime||a.item.editable===!0;if(f)if(a.dragLeft){if(this.options.rtl){if(void 0!=u.end){var p=s.convert(a.data.end,"Date"),m=new Date(p.valueOf()+d);u.end=i?i(m,r,o):m}}else if(void 0!=u.start){var g=s.convert(a.data.start,"Date"),v=new Date(g.valueOf()+d);u.start=i?i(v,r,o):v}}else if(a.dragRight){if(this.options.rtl){if(void 0!=u.start){var g=s.convert(a.data.start,"Date"),v=new Date(g.valueOf()+d);u.start=i?i(v,r,o):v}}else if(void 0!=u.end){var p=s.convert(a.data.end,"Date"),m=new Date(p.valueOf()+d);u.end=i?i(m,r,o):m}}else if(void 0!=u.start){var g=s.convert(a.data.start,"Date").valueOf(),v=new Date(g+d);if(void 0!=u.end){var p=s.convert(a.data.end,"Date"),A=p.valueOf()-g.valueOf();u.start=i?i(v,r,o):v,u.end=new Date(u.start.valueOf()+A)}else u.start=i?i(v,r,o):v}var y=e.options.editable.updateGroup||a.item.editable===!0;if(y&&!a.dragLeft&&!a.dragRight&&null!=l&&void 0!=u.group){var b=l-a.groupOffset;b=Math.max(0,b),b=Math.min(e.groupIds.length-1,b),u.group=e.groupIds[b]}u=this._cloneItemData(u),e.options.onMoving(u,function(t){t&&a.item.setData(this._cloneItemData(t,"Date"))}.bind(this))}}.bind(this)),this.stackDirty=!0,this.body.emitter.emit("_change")}},n.prototype._moveToGroup=function(t,e){var i=this.groups[e];if(i&&i.groupId!=t.data.group){var n=t.parent;n.remove(t),n.order(),i.add(t),i.order(),t.data.group=i.groupId}},n.prototype._onDragEnd=function(t){if(this.touchParams.itemProps){t.stopPropagation();var e=this,i=this.itemsData.getDataSet(),n=this.touchParams.itemProps;this.touchParams.itemProps=null,
n.forEach(function(t){var n=t.item.id,r=null!=e.itemsData.get(n,e.itemOptions);if(r){var o=this._cloneItemData(t.item.data);e.options.onMove(o,function(r){r?(r[i._fieldId]=n,i.update(r)):(t.item.setData(t.data),e.stackDirty=!0,e.body.emitter.emit("_change"))})}else e.options.onAdd(t.item.data,function(i){e._removeItem(t.item),i&&e.itemsData.getDataSet().add(i),e.stackDirty=!0,e.body.emitter.emit("_change")})}.bind(this))}},n.prototype._onGroupDragStart=function(t){this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(t),this.groupTouchParams.group&&(t.stopPropagation(),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))},n.prototype._onGroupDrag=function(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var e=this.groupFromTarget(t);if(e&&e.height!=this.groupTouchParams.group.height){var i=e.top<this.groupTouchParams.group.top,n=t.center?t.center.y:t.clientY,r=s.getAbsoluteTop(e.dom.foreground),o=this.groupTouchParams.group.height;if(i){if(n>r+o)return}else{var a=e.height;if(r+a-o>n)return}}if(e&&e!=this.groupTouchParams.group){var h=this.groupsData,l=h.get(e.groupId),c=h.get(this.groupTouchParams.group.groupId);c&&l&&(this.options.groupOrderSwap(c,l,this.groupsData),this.groupsData.update(c),this.groupsData.update(l));var d=this.groupsData.getIds({order:this.options.groupOrder});if(!s.equalArray(d,this.groupTouchParams.originalOrder))for(var h=this.groupsData,u=this.groupTouchParams.originalOrder,f=this.groupTouchParams.group.groupId,p=Math.min(u.length,d.length),m=0,g=0,v=0;p>m;){for(;p>m+g&&p>m+v&&d[m+g]==u[m+v];)m++;if(m+g>=p)break;if(d[m+g]!=f)if(u[m+v]!=f){var A=d.indexOf(u[m+v]),y=h.get(d[m+g]),b=h.get(u[m+v]);this.options.groupOrderSwap(y,b,h),h.update(y),h.update(b);var E=d[m+g];d[m+g]=u[m+v],d[A]=E,m++}else v=1;else g=1}}}},n.prototype._onGroupDragEnd=function(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var e=this,i=e.groupTouchParams.group.groupId,n=e.groupsData.getDataSet(),r=s.extend({},n.get(i));e.options.onMoveGroup(r,function(t){if(t)t[n._fieldId]=i,n.update(t);else{var r=n.getIds({order:e.options.groupOrder});if(!s.equalArray(r,e.groupTouchParams.originalOrder))for(var o=e.groupTouchParams.originalOrder,a=Math.min(o.length,r.length),h=0;a>h;){for(;a>h&&r[h]==o[h];)h++;if(h>=a)break;var l=r.indexOf(o[h]),c=n.get(r[h]),d=n.get(o[h]);e.options.groupOrderSwap(c,d,n),groupsData.update(c),groupsData.update(d);var u=r[h];r[h]=o[h],r[l]=u,h++}}}),e.body.emitter.emit("groupDragged",{groupId:i})}},n.prototype._onSelectItem=function(t){if(this.options.selectable){var e=t.srcEvent&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey),i=t.srcEvent&&t.srcEvent.shiftKey;if(e||i)return void this._onMultiSelectItem(t);var n=this.getSelection(),r=this.itemFromTarget(t),o=r?[r.id]:[];this.setSelection(o);var s=this.getSelection();(s.length>0||n.length>0)&&this.body.emitter.emit("select",{items:s,event:t})}},n.prototype._onAddItem=function(t){if(this.options.selectable&&this.options.editable.add){var e=this,i=this.options.snap||null,n=this.itemFromTarget(t);if(n){var r=e.itemsData.get(n.id);this.options.onUpdate(r,function(t){t&&e.itemsData.getDataSet().update(t)})}else{if(this.options.rtl)var o=s.getAbsoluteRight(this.dom.frame),a=o-t.center.x;else var o=s.getAbsoluteLeft(this.dom.frame),a=t.center.x-o;var h=this.body.util.toTime(a),l=this.body.util.getScale(),c=this.body.util.getStep(),d={start:i?i(h,l,c):h,content:"new item"};if("range"===this.options.type){var u=this.body.util.toTime(a+this.props.width/5);d.end=i?i(u,l,c):u}d[this.itemsData._fieldId]=s.randomUUID();var f=this.groupFromTarget(t);f&&(d.group=f.groupId),d=this._cloneItemData(d),this.options.onAdd(d,function(t){t&&e.itemsData.getDataSet().add(t)})}}},n.prototype._onMultiSelectItem=function(t){if(this.options.selectable){var e=this.itemFromTarget(t);if(e){var i=this.options.multiselect?this.getSelection():[],r=t.srcEvent&&t.srcEvent.shiftKey||!1;if(r&&this.options.multiselect){var o=this.itemsData.get(e.id).group,s=void 0;this.options.multiselectPerGroup&&i.length>0&&(s=this.itemsData.get(i[0]).group),this.options.multiselectPerGroup&&void 0!=s&&s!=o||i.push(e.id);var a=n._getItemRange(this.itemsData.get(i,this.itemOptions));if(!this.options.multiselectPerGroup||s==o){i=[];for(var h in this.items)if(this.items.hasOwnProperty(h)){var l=this.items[h],c=l.data.start,d=void 0!==l.data.end?l.data.end:c;!(c>=a.min&&d<=a.max)||this.options.multiselectPerGroup&&s!=this.itemsData.get(l.id).group||l instanceof g||i.push(l.id)}}}else{var u=i.indexOf(e.id);-1==u?i.push(e.id):i.splice(u,1)}this.setSelection(i),this.body.emitter.emit("select",{items:this.getSelection(),event:t})}}},n._getItemRange=function(t){var e=null,i=null;return t.forEach(function(t){(null==i||t.start<i)&&(i=t.start),void 0!=t.end?(null==e||t.end>e)&&(e=t.end):(null==e||t.start>e)&&(e=t.start)}),{min:i,max:e}},n.prototype.itemFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-item"))return e["timeline-item"];e=e.parentNode}return null},n.prototype.groupFromTarget=function(t){for(var e=t.center?t.center.y:t.clientY,i=0;i<this.groupIds.length;i++){var n=this.groupIds[i],r=this.groups[n],o=r.dom.foreground,a=s.getAbsoluteTop(o);if(e>a&&e<a+o.offsetHeight)return r;if("top"===this.options.orientation.item){if(i===this.groupIds.length-1&&e>a)return r}else if(0===i&&e<a+o.offset)return r}return null},n.itemSetFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-itemset"))return e["timeline-itemset"];e=e.parentNode}return null},n.prototype._cloneItemData=function(t,e){var i=s.extend({},t);return e||(e=this.itemsData.getDataSet()._options.type),void 0!=i.start&&(i.start=s.convert(i.start,e&&e.start||"Date")),void 0!=i.end&&(i.end=s.convert(i.end,e&&e.end||"Date")),i},t.exports=n},function(t,e,i){function n(t,e,i,o){this.moment=r,this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(t,e,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(o)?this.hiddenDates=o:void 0!=o?this.hiddenDates=[o]:this.hiddenDates=[],this.format=n.FORMAT}var r=i(2),o=i(32),s=i(1);n.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},n.prototype.setMoment=function(t){this.moment=t,this.current=this.moment(this.current),this._start=this.moment(this._start),this._end=this.moment(this._end)},n.prototype.setFormat=function(t){var e=s.deepExtend({},n.FORMAT);this.format=s.deepExtend(e,t)},n.prototype.setRange=function(t,e,i){if(!(t instanceof Date&&e instanceof Date))throw"No legal start or end date in method setRange";this._start=void 0!=t?this.moment(t.valueOf()):new Date,this._end=void 0!=e?this.moment(e.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i)},n.prototype.start=function(){this.current=this._start.clone(),this.roundToMinor()},n.prototype.roundToMinor=function(){switch(this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(1!=this.step)switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year")}},n.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},n.prototype.next=function(){var t=this.current.valueOf();if(this.current.month()<6)switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.subtract(this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}else switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}if(1!=this.step)switch(this.scale){case"millisecond":this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"month":this.current.month()<this.step&&this.current.month(0);break;case"year":}this.current.valueOf()==t&&(this.current=this._end.clone()),o.stepOverHiddenDates(this.moment,this,t)},n.prototype.getCurrent=function(){return this.current},n.prototype.setScale=function(t){t&&"string"==typeof t.scale&&(this.scale=t.scale,this.step=t.step>0?t.step:1,this.autoScale=!1)},n.prototype.setAutoScale=function(t){this.autoScale=t},n.prototype.setMinimumStep=function(t){if(void 0!=t){var e=31104e6,i=2592e6,n=864e5,r=36e5,o=6e4,s=1e3,a=1;1e3*e>t&&(this.scale="year",this.step=1e3),500*e>t&&(this.scale="year",this.step=500),100*e>t&&(this.scale="year",this.step=100),50*e>t&&(this.scale="year",this.step=50),10*e>t&&(this.scale="year",this.step=10),5*e>t&&(this.scale="year",this.step=5),e>t&&(this.scale="year",this.step=1),3*i>t&&(this.scale="month",this.step=3),i>t&&(this.scale="month",this.step=1),5*n>t&&(this.scale="day",this.step=5),2*n>t&&(this.scale="day",this.step=2),n>t&&(this.scale="day",this.step=1),n/2>t&&(this.scale="weekday",this.step=1),4*r>t&&(this.scale="hour",this.step=4),r>t&&(this.scale="hour",this.step=1),15*o>t&&(this.scale="minute",this.step=15),10*o>t&&(this.scale="minute",this.step=10),5*o>t&&(this.scale="minute",this.step=5),o>t&&(this.scale="minute",this.step=1),15*s>t&&(this.scale="second",this.step=15),10*s>t&&(this.scale="second",this.step=10),5*s>t&&(this.scale="second",this.step=5),s>t&&(this.scale="second",this.step=1),200*a>t&&(this.scale="millisecond",this.step=200),100*a>t&&(this.scale="millisecond",this.step=100),50*a>t&&(this.scale="millisecond",this.step=50),10*a>t&&(this.scale="millisecond",this.step=10),5*a>t&&(this.scale="millisecond",this.step=5),a>t&&(this.scale="millisecond",this.step=1)}},n.snap=function(t,e,i){var n=r(t);if("year"==e){var o=n.year()+Math.round(n.month()/12);n.year(Math.round(o/i)*i),n.month(0),n.date(0),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("month"==e)n.date()>15?(n.date(1),n.add(1,"month")):n.date(1),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0);else if("day"==e){switch(i){case 5:case 2:n.hours(24*Math.round(n.hours()/24));break;default:n.hours(12*Math.round(n.hours()/12))}n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("weekday"==e){switch(i){case 5:case 2:n.hours(12*Math.round(n.hours()/12));break;default:n.hours(6*Math.round(n.hours()/6))}n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("hour"==e){switch(i){case 4:n.minutes(60*Math.round(n.minutes()/60));break;default:n.minutes(30*Math.round(n.minutes()/30))}n.seconds(0),n.milliseconds(0)}else if("minute"==e){switch(i){case 15:case 10:n.minutes(5*Math.round(n.minutes()/5)),n.seconds(0);break;case 5:n.seconds(60*Math.round(n.seconds()/60));break;default:n.seconds(30*Math.round(n.seconds()/30))}n.milliseconds(0)}else if("second"==e)switch(i){case 15:case 10:n.seconds(5*Math.round(n.seconds()/5)),n.milliseconds(0);break;case 5:n.milliseconds(1e3*Math.round(n.milliseconds()/1e3));break;default:n.milliseconds(500*Math.round(n.milliseconds()/500))}else if("millisecond"==e){var s=i>5?i/2:1;n.milliseconds(Math.round(n.milliseconds()/s)*s)}return n},n.prototype.isMajor=function(){if(1==this.switchedYear)switch(this.switchedYear=!1,this.scale){case"year":case"month":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.switchedMonth=!1,this.scale){case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.switchedDay=!1,this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var t=this.moment(this.current);switch(this.scale){case"millisecond":return 0==t.milliseconds();case"second":return 0==t.seconds();case"minute":return 0==t.hours()&&0==t.minutes();case"hour":return 0==t.hours();case"weekday":case"day":return 1==t.date();case"month":return 0==t.month();case"year":return!1;default:return!1}},n.prototype.getLabelMinor=function(t){void 0==t&&(t=this.current);var e=this.format.minorLabels[this.scale];return e&&e.length>0?this.moment(t).format(e):""},n.prototype.getLabelMajor=function(t){void 0==t&&(t=this.current);var e=this.format.majorLabels[this.scale];return e&&e.length>0?this.moment(t).format(e):""},n.prototype.getClassName=function(){function t(t){return t/h%2==0?" vis-even":" vis-odd"}function e(t){return t.isSame(new Date,"day")?" vis-today":t.isSame(o().add(1,"day"),"day")?" vis-tomorrow":t.isSame(o().add(-1,"day"),"day")?" vis-yesterday":""}function i(t){return t.isSame(new Date,"week")?" vis-current-week":""}function n(t){return t.isSame(new Date,"month")?" vis-current-month":""}function r(t){return t.isSame(new Date,"year")?" vis-current-year":""}var o=this.moment,s=this.moment(this.current),a=s.locale?s.locale("en"):s.lang("en"),h=this.step;switch(this.scale){case"millisecond":return t(a.milliseconds()).trim();case"second":return t(a.seconds()).trim();case"minute":return t(a.minutes()).trim();case"hour":var l=a.hours();return 4==this.step&&(l=l+"-h"+(l+4)),"vis-h"+l+e(a)+t(a.hours());case"weekday":return"vis-"+a.format("dddd").toLowerCase()+e(a)+i(a)+t(a.date());case"day":var c=a.date(),d=a.format("MMMM").toLowerCase();return"vis-day"+c+" vis-"+d+n(a)+t(c-1);case"month":return"vis-"+a.format("MMMM").toLowerCase()+n(a)+t(a.month());case"year":var u=a.year();return"vis-year"+u+r(a)+t(u);default:return""}},t.exports=n},function(t,e,i){function n(t,e,i){this.groupId=t,this.subgroups={},this.subgroupIndex=0,this.subgroupOrderer=e&&e.subgroupOrder,this.itemSet=i,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var n=this;this.itemSet.body.emitter.on("checkRangedItems",function(){n.checkRangedItems=!0}),this._create(),this.setData(e)}var r=i(1),o=i(37);i(38),n.prototype._create=function(){var t=document.createElement("div");this.itemSet.options.groupEditable.order?t.className="vis-label draggable":t.className="vis-label",this.dom.label=t;var e=document.createElement("div");e.className="vis-inner",t.appendChild(e),this.dom.inner=e;var i=document.createElement("div");i.className="vis-group",i["timeline-group"]=this,this.dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.innerHTML="?",this.dom.background.appendChild(this.dom.marker)},n.prototype.setData=function(t){var e;if(e=this.itemSet.options&&this.itemSet.options.groupTemplate?this.itemSet.options.groupTemplate(t):t&&t.content,e instanceof Element){for(this.dom.inner.appendChild(e);this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(e)}else void 0!==e&&null!==e?this.dom.inner.innerHTML=e:this.dom.inner.innerHTML=this.groupId||"";this.dom.label.title=t&&t.title||"",this.dom.inner.firstChild?r.removeClassName(this.dom.inner,"vis-hidden"):r.addClassName(this.dom.inner,"vis-hidden");var i=t&&t.className||null;i!=this.className&&(this.className&&(r.removeClassName(this.dom.label,this.className),r.removeClassName(this.dom.foreground,this.className),r.removeClassName(this.dom.background,this.className),r.removeClassName(this.dom.axis,this.className)),r.addClassName(this.dom.label,i),r.addClassName(this.dom.foreground,i),r.addClassName(this.dom.background,i),r.addClassName(this.dom.axis,i),this.className=i),this.style&&(r.removeCssText(this.dom.label,this.style),this.style=null),t&&t.style&&(r.addCssText(this.dom.label,t.style),this.style=t.style)},n.prototype.getLabelWidth=function(){return this.props.label.width},n.prototype.redraw=function(t,e,i){var n=!1,s=this.dom.marker.clientHeight;if(s!=this.lastMarkerHeight&&(this.lastMarkerHeight=s,r.forEach(this.items,function(t){t.dirty=!0,t.displayed&&t.redraw()}),i=!0),this._calculateSubGroupHeights(),"function"==typeof this.itemSet.options.order){if(i){var a=this,h=!1;r.forEach(this.items,function(t){t.displayed||(t.redraw(),a.visibleItems.push(t)),t.repositionX(h)});var l=this.orderedItems.byStart.slice().sort(function(t,e){return a.itemSet.options.order(t.data,e.data)});o.stack(l,e,!0)}this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,t)}else this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,t),this.itemSet.options.stack?o.stack(this.visibleItems,e,i):o.nostack(this.visibleItems,e,this.subgroups);var c=this._calculateHeight(e),d=this.dom.foreground;this.top=d.offsetTop,this.right=d.offsetLeft,this.width=d.offsetWidth,n=r.updateProperty(this,"height",c)||n,n=r.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||n,n=r.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||n,this.dom.background.style.height=c+"px",this.dom.foreground.style.height=c+"px",this.dom.label.style.height=c+"px";for(var u=0,f=this.visibleItems.length;f>u;u++){var p=this.visibleItems[u];p.repositionY(e)}return n},n.prototype._calculateSubGroupHeights=function(){if(Object.keys(this.subgroups).length>0){var t=this;this.resetSubgroups(),r.forEach(this.visibleItems,function(e){void 0!==e.data.subgroup&&(t.subgroups[e.data.subgroup].height=Math.max(t.subgroups[e.data.subgroup].height,e.height),t.subgroups[e.data.subgroup].visible=!0)})}},n.prototype._calculateHeight=function(t){var e,i=this.visibleItems;if(i.length>0){var n=i[0].top,o=i[0].top+i[0].height;if(r.forEach(i,function(t){n=Math.min(n,t.top),o=Math.max(o,t.top+t.height)}),n>t.axis){var s=n-t.axis;o-=s,r.forEach(i,function(t){t.top-=s})}e=o+t.item.vertical/2}else e=0;return e=Math.max(e,this.props.label.height)},n.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},n.prototype.hide=function(){var t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);var e=this.dom.foreground;e.parentNode&&e.parentNode.removeChild(e);var i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);var n=this.dom.axis;n.parentNode&&n.parentNode.removeChild(n)},n.prototype.add=function(t){if(this.items[t.id]=t,t.setParent(this),void 0!==t.data.subgroup&&(void 0===this.subgroups[t.data.subgroup]&&(this.subgroups[t.data.subgroup]={height:0,visible:!1,index:this.subgroupIndex,items:[]},this.subgroupIndex++),this.subgroups[t.data.subgroup].items.push(t)),this.orderSubgroups(),-1==this.visibleItems.indexOf(t)){var e=this.itemSet.body.range;this._checkIfVisible(t,this.visibleItems,e)}},n.prototype.orderSubgroups=function(){if(void 0!==this.subgroupOrderer){var t=[];if("string"==typeof this.subgroupOrderer){for(var e in this.subgroups)t.push({subgroup:e,sortField:this.subgroups[e].items[0].data[this.subgroupOrderer]});t.sort(function(t,e){return t.sortField-e.sortField})}else if("function"==typeof this.subgroupOrderer){for(var e in this.subgroups)t.push(this.subgroups[e].items[0].data);t.sort(this.subgroupOrderer)}if(t.length>0)for(var i=0;i<t.length;i++)this.subgroups[t[i].subgroup].index=i}},n.prototype.resetSubgroups=function(){for(var t in this.subgroups)this.subgroups.hasOwnProperty(t)&&(this.subgroups[t].visible=!1)},n.prototype.remove=function(t){delete this.items[t.id],t.setParent(null);var e=this.visibleItems.indexOf(t);if(-1!=e&&this.visibleItems.splice(e,1),void 0!==t.data.subgroup){var i=this.subgroups[t.data.subgroup];if(i){var n=i.items.indexOf(t);i.items.splice(n,1),i.items.length||(delete this.subgroups[t.data.subgroup],this.subgroupIndex--),this.orderSubgroups()}}},n.prototype.removeFromDataSet=function(t){this.itemSet.removeItem(t.id)},n.prototype.order=function(){for(var t=r.toArray(this.items),e=[],i=[],n=0;n<t.length;n++)void 0!==t[n].data.end&&i.push(t[n]),e.push(t[n]);this.orderedItems={byStart:e,byEnd:i},o.orderByStart(this.orderedItems.byStart),o.orderByEnd(this.orderedItems.byEnd)},n.prototype._updateVisibleItems=function(t,e,i){var n,o,s=[],a={},h=(i.end-i.start)/4,l=i.start-h,c=i.end+h,d=function(t){return l>t?-1:c>=t?0:1};if(e.length>0)for(o=0;o<e.length;o++)this._checkIfVisibleWithReference(e[o],s,a,i);var u=r.binarySearchCustom(t.byStart,d,"data","start");if(this._traceVisible(u,t.byStart,s,a,function(t){return t.data.start<l||t.data.start>c}),1==this.checkRangedItems)for(this.checkRangedItems=!1,o=0;o<t.byEnd.length;o++)this._checkIfVisibleWithReference(t.byEnd[o],s,a,i);else{var f=r.binarySearchCustom(t.byEnd,d,"data","end");this._traceVisible(f,t.byEnd,s,a,function(t){return t.data.end<l||t.data.end>c})}for(o=0;o<s.length;o++)n=s[o],n.displayed||n.show(),n.repositionX();return s},n.prototype._traceVisible=function(t,e,i,n,r){var o,s;if(-1!=t){for(s=t;s>=0&&(o=e[s],!r(o));s--)void 0===n[o.id]&&(n[o.id]=!0,i.push(o));for(s=t+1;s<e.length&&(o=e[s],!r(o));s++)void 0===n[o.id]&&(n[o.id]=!0,i.push(o))}},n.prototype._checkIfVisible=function(t,e,i){t.isVisible(i)?(t.displayed||t.show(),t.repositionX(),e.push(t)):t.displayed&&t.hide()},n.prototype._checkIfVisibleWithReference=function(t,e,i,n){t.isVisible(n)?void 0===i[t.id]&&(i[t.id]=!0,e.push(t)):t.displayed&&t.hide()},t.exports=n},function(t,e){var i=.001;e.orderByStart=function(t){t.sort(function(t,e){return t.data.start-e.data.start})},e.orderByEnd=function(t){t.sort(function(t,e){var i="end"in t.data?t.data.end:t.data.start,n="end"in e.data?e.data.end:e.data.start;return i-n})},e.stack=function(t,i,n){var r,o;if(n)for(r=0,o=t.length;o>r;r++)t[r].top=null;for(r=0,o=t.length;o>r;r++){var s=t[r];if(s.stack&&null===s.top){s.top=i.axis;do{for(var a=null,h=0,l=t.length;l>h;h++){var c=t[h];if(null!==c.top&&c!==s&&c.stack&&e.collision(s,c,i.item,c.options.rtl)){a=c;break}}null!=a&&(s.top=a.top+a.height+i.item.vertical)}while(a)}}},e.nostack=function(t,e,i){var n,r,o;for(n=0,r=t.length;r>n;n++)if(void 0!==t[n].data.subgroup){o=e.axis;for(var s in i)i.hasOwnProperty(s)&&1==i[s].visible&&i[s].index<i[t[n].data.subgroup].index&&(o+=i[s].height+e.item.vertical);t[n].top=o}else t[n].top=e.axis},e.collision=function(t,e,n,r){return r?t.right-n.horizontal+i<e.right+e.width&&t.right+t.width+n.horizontal-i>e.right&&t.top-n.vertical+i<e.top+e.height&&t.top+t.height+n.vertical-i>e.top:t.left-n.horizontal+i<e.left+e.width&&t.left+t.width+n.horizontal-i>e.left&&t.top-n.vertical+i<e.top+e.height&&t.top+t.height+n.vertical-i>e.top}},function(t,e,i){function n(t,e,i){if(this.props={content:{width:0}},this.overflow=!1,this.options=i,t){if(void 0==t.start)throw new Error('Property "start" missing in item '+t.id);if(void 0==t.end)throw new Error('Property "end" missing in item '+t.id)}r.call(this,t,e,i)}var r=(i(20),i(39));n.prototype=new r(null,null,null),n.prototype.baseClassName="vis-item vis-range",n.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},n.prototype.redraw=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.box=document.createElement("div"),t.frame=document.createElement("div"),t.frame.className="vis-item-overflow",t.box.appendChild(t.frame),t.content=document.createElement("div"),t.content.className="vis-item-content",t.frame.appendChild(t.content),t.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!t.box.parentNode){var e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(t.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var i=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,n=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");t.box.className=this.baseClassName+n,this.overflow="hidden"!==window.getComputedStyle(t.frame).overflow,this.dom.content.style.maxWidth="none",this.props.content.width=this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dom.content.style.maxWidth="",this.dirty=!1}this._repaintDeleteButton(t.box),this._repaintDragLeft(),this._repaintDragRight()},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){if(this.displayed){var t=this.dom.box;t.parentNode&&t.parentNode.removeChild(t),this.displayed=!1}},n.prototype.repositionX=function(t){var e,i,n=this.parent.width,r=this.conversion.toScreen(this.data.start),o=this.conversion.toScreen(this.data.end);void 0!==t&&t!==!0||(-n>r&&(r=-n),o>2*n&&(o=2*n));var s=Math.max(o-r,1);switch(this.overflow?(this.options.rtl?this.right=r:this.left=r,this.width=s+this.props.content.width,i=this.props.content.width):(this.options.rtl?this.right=r:this.left=r,this.width=s,i=Math.min(o-r,this.props.content.width)),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=s+"px",this.options.align){case"left":this.options.rtl?this.dom.content.style.right="0":this.dom.content.style.left="0";break;case"right":this.options.rtl?this.dom.content.style.right=Math.max(s-i,0)+"px":this.dom.content.style.left=Math.max(s-i,0)+"px";break;case"center":this.options.rtl?this.dom.content.style.right=Math.max((s-i)/2,0)+"px":this.dom.content.style.left=Math.max((s-i)/2,0)+"px";break;default:e=this.overflow?o>0?Math.max(-r,0):-i:0>r?-r:0,this.options.rtl?this.dom.content.style.right=e+"px":this.dom.content.style.left=e+"px"}},n.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.box;"top"==t?e.style.top=this.top+"px":e.style.top=this.parent.height-this.top-this.height+"px"},n.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var t=document.createElement("div");t.className="vis-drag-left",t.dragLeftItem=this,this.dom.box.appendChild(t),this.dom.dragLeft=t}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},n.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var t=document.createElement("div");t.className="vis-drag-right",t.dragRightItem=this,this.dom.box.appendChild(t),this.dom.dragRight=t}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},t.exports=n},function(t,e,i){function n(t,e,i){this.id=null,this.parent=null,this.data=t,this.dom=null,this.conversion=e||{},this.options=i||{},this.selected=!1,this.displayed=!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.editable=null,this.data&&this.data.hasOwnProperty("editable")&&"boolean"==typeof this.data.editable&&(this.editable=t.editable)}var r=i(20),o=i(1);n.prototype.stack=!0,n.prototype.select=function(){this.selected=!0,this.dirty=!0,this.displayed&&this.redraw()},n.prototype.unselect=function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()},n.prototype.setData=function(t){var e=void 0!=t.group&&this.data.group!=t.group;e&&this.parent.itemSet._moveToGroup(this,t.group),t.hasOwnProperty("editable")&&"boolean"==typeof t.editable&&(this.editable=t.editable),this.data=t,this.dirty=!0,this.displayed&&this.redraw()},n.prototype.setParent=function(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t},n.prototype.isVisible=function(t){return!1},n.prototype.show=function(){return!1},n.prototype.hide=function(){return!1},n.prototype.redraw=function(){},n.prototype.repositionX=function(){},n.prototype.repositionY=function(){},n.prototype._repaintDeleteButton=function(t){var e=(this.options.editable.remove||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&e&&!this.dom.deleteButton){var i=this,n=document.createElement("div");this.options.rtl?n.className="vis-delete-rtl":n.className="vis-delete",n.title="Delete this item",new r(n).on("tap",function(t){t.stopPropagation(),i.parent.removeFromDataSet(i)}),t.appendChild(n),this.dom.deleteButton=n}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},n.prototype._updateContents=function(t){var e;if(this.options.template){var i=this.parent.itemSet.itemsData.get(this.id);e=this.options.template(i)}else e=this.data.content;var n=this._contentToString(this.content)!==this._contentToString(e);if(n){if(e instanceof Element)t.innerHTML="",t.appendChild(e);else if(void 0!=e)t.innerHTML=e;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.content=e}},n.prototype._updateTitle=function(t){null!=this.data.title?t.title=this.data.title||"":t.removeAttribute("vis-title")},n.prototype._updateDataAttributes=function(t){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var e=[];if(Array.isArray(this.options.dataAttributes))e=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;e=Object.keys(this.data)}for(var i=0;i<e.length;i++){var n=e[i],r=this.data[n];null!=r?t.setAttribute("data-"+n,r):t.removeAttribute("data-"+n)}}},n.prototype._updateStyle=function(t){this.style&&(o.removeCssText(t,this.style),this.style=null),this.data.style&&(o.addCssText(t,this.data.style),this.style=this.data.style)},n.prototype._contentToString=function(t){return"string"==typeof t?t:t&&"outerHTML"in t?t.outerHTML:t},n.prototype.getWidthLeft=function(){return 0},n.prototype.getWidthRight=function(){return 0},t.exports=n},function(t,e,i){function n(t,e,i){r.call(this,t,e,i),this.width=0,this.height=0,this.top=0,this.left=0}var r=(i(1),i(36));n.prototype=Object.create(r.prototype),n.prototype.redraw=function(t,e,i){var n=!1;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,t),
this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var r=0,o=this.visibleItems.length;o>r;r++){var s=this.visibleItems[r];s.repositionY(e)}return n},n.prototype.show=function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},this.options=i,t&&void 0==t.start)throw new Error('Property "start" missing in item '+t);r.call(this,t,e,i)}var r=i(39);i(1),n.prototype=new r(null,null,null),n.prototype.isVisible=function(t){var e=(t.end-t.start)/4;return this.data.start>t.start-e&&this.data.start<t.end+e},n.prototype.redraw=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.box=document.createElement("DIV"),t.content=document.createElement("DIV"),t.content.className="vis-item-content",t.box.appendChild(t.content),t.line=document.createElement("DIV"),t.line.className="vis-line",t.dot=document.createElement("DIV"),t.dot.className="vis-dot",t.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!t.box.parentNode){var e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(t.box)}if(!t.line.parentNode){var i=this.parent.dom.background;if(!i)throw new Error("Cannot redraw item: parent has no background container element");i.appendChild(t.line)}if(!t.dot.parentNode){var n=this.parent.dom.axis;if(!i)throw new Error("Cannot redraw item: parent has no axis container element");n.appendChild(t.dot)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var r=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,o=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(r?" vis-editable":" vis-readonly");t.box.className="vis-item vis-box"+o,t.line.className="vis-item vis-line"+o,t.dot.className="vis-item vis-dot"+o,this.props.dot.height=t.dot.offsetHeight,this.props.dot.width=t.dot.offsetWidth,this.props.line.width=t.line.offsetWidth,this.width=t.box.offsetWidth,this.height=t.box.offsetHeight,this.dirty=!1}this._repaintDeleteButton(t.box)},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){if(this.displayed){var t=this.dom;t.box.parentNode&&t.box.parentNode.removeChild(t.box),t.line.parentNode&&t.line.parentNode.removeChild(t.line),t.dot.parentNode&&t.dot.parentNode.removeChild(t.dot),this.displayed=!1}},n.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start),e=this.options.align;"right"==e?this.options.rtl?(this.right=t-this.width,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t-this.props.line.width+"px",this.dom.dot.style.right=t-this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=t-this.width,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t-this.props.line.width+"px",this.dom.dot.style.left=t-this.props.line.width/2-this.props.dot.width/2+"px"):"left"==e?this.options.rtl?(this.right=t,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t+"px",this.dom.dot.style.right=t+this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=t,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t+"px",this.dom.dot.style.left=t+this.props.line.width/2-this.props.dot.width/2+"px"):this.options.rtl?(this.right=t-this.width/2,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t-this.props.line.width+"px",this.dom.dot.style.right=t-this.props.dot.width/2+"px"):(this.left=t-this.width/2,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t-this.props.line.width/2+"px",this.dom.dot.style.left=t-this.props.dot.width/2+"px")},n.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.box,i=this.dom.line,n=this.dom.dot;if("top"==t)e.style.top=(this.top||0)+"px",i.style.top="0",i.style.height=this.parent.top+this.top+1+"px",i.style.bottom="";else{var r=this.parent.itemSet.props.height,o=r-this.parent.top-this.parent.height+this.top;e.style.top=(this.parent.height-this.top-this.height||0)+"px",i.style.top=r-o+"px",i.style.bottom="0"}n.style.top=-this.props.dot.height/2+"px"},n.prototype.getWidthLeft=function(){return this.width/2},n.prototype.getWidthRight=function(){return this.width/2},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},this.options=i,t&&void 0==t.start)throw new Error('Property "start" missing in item '+t);r.call(this,t,e,i)}var r=i(39);n.prototype=new r(null,null,null),n.prototype.isVisible=function(t){var e=(t.end-t.start)/4;return this.data.start>t.start-e&&this.data.start<t.end+e},n.prototype.redraw=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.point=document.createElement("div"),t.content=document.createElement("div"),t.content.className="vis-item-content",t.point.appendChild(t.content),t.dot=document.createElement("div"),t.point.appendChild(t.dot),t.point["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!t.point.parentNode){var e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(t.point)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.point),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var i=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,n=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");t.point.className="vis-item vis-point"+n,t.dot.className="vis-item vis-dot"+n,this.props.dot.width=t.dot.offsetWidth,this.props.dot.height=t.dot.offsetHeight,this.props.content.height=t.content.offsetHeight,this.options.rtl?t.content.style.marginRight=2*this.props.dot.width+"px":t.content.style.marginLeft=2*this.props.dot.width+"px",this.width=t.point.offsetWidth,this.height=t.point.offsetHeight,t.dot.style.top=(this.height-this.props.dot.height)/2+"px",this.options.rtl?t.dot.style.right=this.props.dot.width/2+"px":t.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1}this._repaintDeleteButton(t.point)},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)},n.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start);this.options.rtl?(this.right=t-this.props.dot.width,this.dom.point.style.right=this.right+"px"):(this.left=t-this.props.dot.width,this.dom.point.style.left=this.left+"px")},n.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.point;"top"==t?e.style.top=this.top+"px":e.style.top=this.parent.height-this.top-this.height+"px"},n.prototype.getWidthLeft=function(){return this.props.dot.width},n.prototype.getWidthRight=function(){return this.props.dot.width},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={content:{width:0}},this.overflow=!1,t){if(void 0==t.start)throw new Error('Property "start" missing in item '+t.id);if(void 0==t.end)throw new Error('Property "end" missing in item '+t.id)}r.call(this,t,e,i)}var r=(i(20),i(39)),o=i(40),s=i(38);n.prototype=new r(null,null,null),n.prototype.baseClassName="vis-item vis-background",n.prototype.stack=!1,n.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},n.prototype.redraw=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.box=document.createElement("div"),t.frame=document.createElement("div"),t.frame.className="vis-item-overflow",t.box.appendChild(t.frame),t.content=document.createElement("div"),t.content.className="vis-item-content",t.frame.appendChild(t.content),this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!t.box.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(t.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var i=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");t.box.className=this.baseClassName+i,this.overflow="hidden"!==window.getComputedStyle(t.content).overflow,this.props.content.width=this.dom.content.offsetWidth,this.height=0,this.dirty=!1}},n.prototype.show=s.prototype.show,n.prototype.hide=s.prototype.hide,n.prototype.repositionX=s.prototype.repositionX,n.prototype.repositionY=function(t){var e="top"===this.options.orientation.item;this.dom.content.style.top=e?"":"0",this.dom.content.style.bottom=e?"0":"";var i;if(void 0!==this.data.subgroup){var n=this.data.subgroup,r=this.parent.subgroups,s=r[n].index;if(1==e){i=this.parent.subgroups[n].height+t.item.vertical,i+=0==s?t.axis-.5*t.item.vertical:0;var a=this.parent.top;for(var h in r)r.hasOwnProperty(h)&&1==r[h].visible&&r[h].index<s&&(a+=r[h].height+t.item.vertical);a+=0!=s?t.axis-.5*t.item.vertical:0,this.dom.box.style.top=a+"px",this.dom.box.style.bottom=""}else{var a=this.parent.top,l=0;for(var h in r)if(r.hasOwnProperty(h)&&1==r[h].visible){var c=r[h].height+t.item.vertical;l+=c,r[h].index>s&&(a+=c)}i=this.parent.subgroups[n].height+t.item.vertical,this.dom.box.style.top=this.parent.height-l+a+"px",this.dom.box.style.bottom=""}}else this.parent instanceof o?(i=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.top=e?"0":"",this.dom.box.style.bottom=e?"":"0"):(i=this.parent.height,this.dom.box.style.top=this.parent.top+"px",this.dom.box.style.bottom="");this.dom.box.style.height=i+"px"},t.exports=n},function(t,e,i){function n(t,e){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,maxMinorChars:7,format:a.FORMAT,moment:l,timeAxis:null},this.options=o.extend({},this.defaultOptions),this.body=t,this._create(),this.setOptions(e)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=i(1),s=i(31),a=i(35),h=i(32),l=i(2);n.prototype=new s,n.prototype.setOptions=function(t){t&&(o.selectiveExtend(["showMinorLabels","showMajorLabels","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,t),o.selectiveDeepExtend(["format"],this.options,t),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation.axis=t.orientation:"object"===r(t.orientation)&&"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis)),"locale"in t&&("function"==typeof l.locale?l.locale(t.locale):l.lang(t.locale)))},n.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"},n.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},n.prototype.redraw=function(){var t=this.props,e=this.dom.foreground,i=this.dom.background,n="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,r=e.parentNode!==n;this._calculateCharSize();var o=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,s=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;t.minorLabelHeight=o?t.minorCharHeight:0,t.majorLabelHeight=s?t.majorCharHeight:0,t.height=t.minorLabelHeight+t.majorLabelHeight,t.width=e.offsetWidth,t.minorLineHeight=this.body.domProps.root.height-t.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height),t.minorLineWidth=1,t.majorLineHeight=t.minorLineHeight+t.majorLabelHeight,t.majorLineWidth=1;var a=e.nextSibling,h=i.nextSibling;return e.parentNode&&e.parentNode.removeChild(e),i.parentNode&&i.parentNode.removeChild(i),e.style.height=this.props.height+"px",this._repaintLabels(),a?n.insertBefore(e,a):n.appendChild(e),h?this.body.dom.backgroundVertical.insertBefore(i,h):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||r},n.prototype._repaintLabels=function(){var t=this.options.orientation.axis,e=o.convert(this.body.range.start,"Number"),i=o.convert(this.body.range.end,"Number"),n=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),r=n-h.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this.body.range,n);r-=this.body.util.toTime(0).valueOf();var s=new a(new Date(e),new Date(i),r,this.body.hiddenDates);s.setMoment(this.options.moment),this.options.format&&s.setFormat(this.options.format),this.options.timeAxis&&s.setScale(this.options.timeAxis),this.step=s;var l=this.dom;l.redundant.lines=l.lines,l.redundant.majorTexts=l.majorTexts,l.redundant.minorTexts=l.minorTexts,l.lines=[],l.majorTexts=[],l.minorTexts=[];var d,u,f,p,m,g,v,A,y,b,E=0,w=void 0,x=0,_=1e3;for(s.start(),u=s.getCurrent(),p=this.body.util.toScreen(u);s.hasNext()&&_>x;){x++,m=s.isMajor(),b=s.getClassName(),y=s.getLabelMinor(),d=u,f=p,s.next(),u=s.getCurrent(),g=s.isMajor(),p=this.body.util.toScreen(u),v=E,E=p-f;var T=E>=.4*v;if(this.options.showMinorLabels&&T){var S=this._repaintMinorText(f,y,t,b);S.style.width=E+"px"}m&&this.options.showMajorLabels?(f>0&&(void 0==w&&(w=f),S=this._repaintMajorText(f,s.getLabelMajor(),t,b)),A=this._repaintMajorLine(f,E,t,b)):T?A=this._repaintMinorLine(f,E,t,b):A&&(A.style.width=parseInt(A.style.width)+E+"px")}if(x!==_||c||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to "+_+" lines."),c=!0),this.options.showMajorLabels){var R=this.body.util.toTime(0),C=s.getLabelMajor(R),k=C.length*(this.props.majorCharWidth||10)+10;(void 0==w||w>k)&&this._repaintMajorText(0,C,t,b)}o.forEach(this.dom.redundant,function(t){for(;t.length;){var e=t.pop();e&&e.parentNode&&e.parentNode.removeChild(e)}})},n.prototype._repaintMinorText=function(t,e,i,n){var r=this.dom.redundant.minorTexts.shift();if(!r){var o=document.createTextNode("");r=document.createElement("div"),r.appendChild(o),this.dom.foreground.appendChild(r)}return this.dom.minorTexts.push(r),r.childNodes[0].nodeValue=e,r.style.top="top"==i?this.props.majorLabelHeight+"px":"0",this.options.rtl?(r.style.left="",r.style.right=t+"px"):r.style.left=t+"px",r.className="vis-text vis-minor "+n,r},n.prototype._repaintMajorText=function(t,e,i,n){var r=this.dom.redundant.majorTexts.shift();if(!r){var o=document.createTextNode(e);r=document.createElement("div"),r.appendChild(o),this.dom.foreground.appendChild(r)}return this.dom.majorTexts.push(r),r.childNodes[0].nodeValue=e,r.className="vis-text vis-major "+n,r.style.top="top"==i?"0":this.props.minorLabelHeight+"px",this.options.rtl?(r.style.left="",r.style.right=t+"px"):r.style.left=t+"px",r},n.prototype._repaintMinorLine=function(t,e,i,n){var r=this.dom.redundant.lines.shift();r||(r=document.createElement("div"),this.dom.background.appendChild(r)),this.dom.lines.push(r);var o=this.props;return"top"==i?r.style.top=o.majorLabelHeight+"px":r.style.top=this.body.domProps.top.height+"px",r.style.height=o.minorLineHeight+"px",this.options.rtl?(r.style.left="",r.style.right=t-o.minorLineWidth/2+"px",r.className="vis-grid vis-vertical-rtl vis-minor "+n):(r.style.left=t-o.minorLineWidth/2+"px",r.className="vis-grid vis-vertical vis-minor "+n),r.style.width=e+"px",r},n.prototype._repaintMajorLine=function(t,e,i,n){var r=this.dom.redundant.lines.shift();r||(r=document.createElement("div"),this.dom.background.appendChild(r)),this.dom.lines.push(r);var o=this.props;return"top"==i?r.style.top="0":r.style.top=this.body.domProps.top.height+"px",this.options.rtl?(r.style.left="",r.style.right=t-o.majorLineWidth/2+"px",r.className="vis-grid vis-vertical-rtl vis-major "+n):(r.style.left=t-o.majorLineWidth/2+"px",r.className="vis-grid vis-vertical vis-major "+n),r.style.height=o.majorLineHeight+"px",r.style.width=e+"px",r},n.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth};var c=!1;t.exports=n},function(t,e,i){function n(t){this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=a(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var e=this,i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];i.forEach(function(t){e.hammer.on(t,function(t){t.stopPropagation()})}),document&&document.body&&(this.onClick=function(i){r(i.target,t)||e.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=o(),this.escListener=this.deactivate.bind(this)}function r(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var o=i(23),s=i(13),a=i(20),h=i(1);s(n.prototype),n.current=null,n.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.hammer.destroy(),this.hammer=null},n.prototype.activate=function(){n.current&&n.current.deactivate(),n.current=this,this.active=!0,this.dom.overlay.style.display="none",h.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},n.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",h.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},n.prototype._onTapOverlay=function(t){this.activate(),t.stopPropagation()},t.exports=n},function(t,e,i){function n(t,e){this.body=t,this.defaultOptions={moment:a,locales:h,locale:"en",id:void 0,title:void 0},this.options=o.extend({},this.defaultOptions),e&&e.time?this.customTime=e.time:this.customTime=new Date,this.eventParams={},this.setOptions(e),this._create()}var r=i(20),o=i(1),s=i(31),a=i(2),h=i(47);n.prototype=new s,n.prototype.setOptions=function(t){t&&o.selectiveExtend(["moment","locale","locales","id"],this.options,t)},n.prototype._create=function(){var t=document.createElement("div");t["custom-time"]=this,t.className="vis-custom-time "+(this.options.id||""),t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t;var e=document.createElement("div");e.style.position="relative",e.style.top="0px",e.style.left="-10px",e.style.height="100%",e.style.width="20px",t.appendChild(e),this.hammer=new r(e),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:r.DIRECTION_HORIZONTAL})},n.prototype.destroy=function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null},n.prototype.redraw=function(){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar));var e=this.body.util.toScreen(this.customTime),i=this.options.locales[this.options.locale];i||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline.html#Localization"),this.warned=!0),i=this.options.locales.en);var n=this.options.title;return void 0===n&&(n=i.time+": "+this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss"),n=n.charAt(0).toUpperCase()+n.substring(1)),this.bar.style.left=e+"px",this.bar.title=n,!1},n.prototype.hide=function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)},n.prototype.setCustomTime=function(t){this.customTime=o.convert(t,"Date"),this.redraw()},n.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},n.prototype.setCustomTitle=function(t){this.options.title=t},n.prototype._onDragStart=function(t){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,t.stopPropagation()},n.prototype._onDrag=function(t){if(this.eventParams.dragging){var e=this.body.util.toScreen(this.eventParams.customTime)+t.deltaX,i=this.body.util.toTime(e);this.setCustomTime(i),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf())}),t.stopPropagation()}},n.prototype._onDragEnd=function(t){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf())}),t.stopPropagation())},n.customTimeFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("custom-time"))return e["custom-time"];e=e.parentNode}return null},t.exports=n},function(t,e){e.en={current:"current",time:"time"},e.en_EN=e.en,e.en_US=e.en,e.nl={current:"huidige",time:"tijd"},e.nl_NL=e.nl,e.nl_BE=e.nl},function(t,e,i){function n(t,e){this.body=t,this.defaultOptions={rtl:!1,showCurrentTime:!0,moment:s,locales:a,locale:"en"},this.options=r.extend({},this.defaultOptions),this.offset=0,this._create(),this.setOptions(e)}var r=i(1),o=i(31),s=i(2),a=i(47);n.prototype=new o,n.prototype._create=function(){var t=document.createElement("div");t.className="vis-current-time",t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t},n.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},n.prototype.setOptions=function(t){t&&r.selectiveExtend(["rtl","showCurrentTime","moment","locale","locales"],this.options,t)},n.prototype.redraw=function(){if(this.options.showCurrentTime){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar),this.start());var e=this.options.moment((new Date).valueOf()+this.offset),i=this.body.util.toScreen(e),n=this.options.locales[this.options.locale];n||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization"),this.warned=!0),n=this.options.locales.en);var r=n.current+" "+n.time+": "+e.format("dddd, MMMM Do YYYY, H:mm:ss");r=r.charAt(0).toUpperCase()+r.substring(1),this.options.rtl?this.bar.style.right=i+"px":this.bar.style.left=i+"px",this.bar.title=r}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},n.prototype.start=function(){function t(){e.stop();var i=e.body.range.conversion(e.body.domProps.center.width).scale,n=1/i/10;30>n&&(n=30),n>1e3&&(n=1e3),e.redraw(),e.body.emitter.emit("currentTimeTick"),e.currentTimeTimer=setTimeout(t,n)}var e=this;t()},n.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},n.prototype.setCurrentTime=function(t){var e=r.convert(t,"Date").valueOf(),i=(new Date).valueOf();this.offset=e-i,this.redraw()},n.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)},t.exports=n},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i="string",n="boolean",r="number",o="array",s="date",a="object",h="dom",l="moment",c="any",d={configure:{enabled:{"boolean":n},filter:{"boolean":n,"function":"function"},container:{dom:h},__type__:{object:a,"boolean":n,"function":"function"}},align:{string:i},rtl:{"boolean":n,undefined:"undefined"},autoResize:{"boolean":n},throttleRedraw:{number:r},clickToUse:{"boolean":n},dataAttributes:{string:i,array:o},editable:{add:{"boolean":n,undefined:"undefined"},remove:{"boolean":n,undefined:"undefined"},updateGroup:{"boolean":n,undefined:"undefined"},updateTime:{"boolean":n,undefined:"undefined"},__type__:{"boolean":n,object:a}},end:{number:r,date:s,string:i,moment:l},format:{minorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:a}},majorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:a}},__type__:{object:a}},moment:{"function":"function"},groupOrder:{string:i,"function":"function"},groupEditable:{add:{"boolean":n,undefined:"undefined"},remove:{"boolean":n,undefined:"undefined"},order:{"boolean":n,undefined:"undefined"},__type__:{"boolean":n,object:a}},groupOrderSwap:{"function":"function"},height:{string:i,number:r},hiddenDates:{start:{date:s,number:r,string:i,moment:l},end:{date:s,number:r,string:i,moment:l},repeat:{string:i},__type__:{object:a,array:o}},itemsAlwaysDraggable:{"boolean":n},locale:{string:i},locales:{__any__:{any:c},__type__:{object:a}},margin:{axis:{number:r},item:{horizontal:{number:r,undefined:"undefined"},vertical:{number:r,undefined:"undefined"},__type__:{object:a,number:r}},__type__:{object:a,number:r}},max:{date:s,number:r,string:i,moment:l},maxHeight:{number:r,string:i},maxMinorChars:{number:r},min:{date:s,number:r,string:i,moment:l},minHeight:{number:r,string:i},moveable:{"boolean":n},multiselect:{"boolean":n},multiselectPerGroup:{"boolean":n},onAdd:{"function":"function"},onUpdate:{"function":"function"},onMove:{"function":"function"},onMoving:{"function":"function"},onRemove:{"function":"function"},onAddGroup:{"function":"function"},onMoveGroup:{"function":"function"},onRemoveGroup:{"function":"function"},order:{"function":"function"},orientation:{axis:{string:i,undefined:"undefined"},item:{string:i,undefined:"undefined"},__type__:{string:i,object:a}},selectable:{"boolean":n},showCurrentTime:{"boolean":n},showMajorLabels:{"boolean":n},showMinorLabels:{"boolean":n},stack:{"boolean":n},snap:{"function":"function","null":"null"},start:{date:s,number:r,string:i,moment:l},template:{"function":"function"},groupTemplate:{"function":"function"},timeAxis:{scale:{string:i,undefined:"undefined"},step:{number:r,undefined:"undefined"},__type__:{object:a}},type:{string:i},width:{string:i,number:r},zoomable:{"boolean":n},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:r},zoomMin:{number:r},__type__:{object:a}},u={global:{align:["center","left","right"],direction:!1,autoResize:!0,throttleRedraw:[10,0,1e3,10],clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},groupsDraggable:!1,height:"",locale:"",margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,start:"",type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1]}};e.allOptions=d,e.configureOptions=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,i,n){if(!(Array.isArray(i)||i instanceof d||i instanceof u)&&i instanceof Object){var r=n;n=i,i=r}var o=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:l,width:null,height:null,maxHeight:null,minHeight:null},this.options=c.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:o._toScreen.bind(o),toGlobalScreen:o._toGlobalScreen.bind(o),toTime:o._toTime.bind(o),toGlobalTime:o._toGlobalTime.bind(o)}},this.range=new f(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new m(this.body),this.components.push(this.timeAxis),this.currentTime=new g(this.body),this.components.push(this.currentTime),this.linegraph=new A(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(t){o.emit("click",o.getEventProperties(t))}),this.on("doubletap",function(t){o.emit("doubleClick",o.getEventProperties(t))}),this.dom.root.oncontextmenu=function(t){o.emit("contextmenu",o.getEventProperties(t))},n&&this.setOptions(n),i&&this.setGroups(i),e&&this.setItems(e),this._redraw()}var o=i(26),s=n(o),a=i(29),h=n(a),l=(i(13),i(20),i(2)),c=i(1),d=i(9),u=i(11),f=i(30),p=i(33),m=i(44),g=i(48),v=i(46),A=i(51),y=i(29).printStyle,b=i(59).allOptions,E=i(59).configureOptions;r.prototype=new p,r.prototype.setOptions=function(t){var e=h["default"].validate(t,b);e===!0&&console.log("%cErrors have been found in the supplied options object.",y),p.prototype.setOptions.call(this,t)},r.prototype.setItems=function(t){var e,i=null==this.itemsData;if(e=t?t instanceof d||t instanceof u?t:new d(t,{type:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.linegraph&&this.linegraph.setItems(e),i)if(void 0!=this.options.start||void 0!=this.options.end){var n=void 0!=this.options.start?this.options.start:null,r=void 0!=this.options.end?this.options.end:null;this.setWindow(n,r,{animation:!1})}else this.fit({animation:!1})},r.prototype.setGroups=function(t){var e;e=t?t instanceof d||t instanceof u?t:new d(t):null,this.groupsData=e,this.linegraph.setGroups(e)},r.prototype.getLegend=function(t,e,i){return void 0===e&&(e=15),void 0===i&&(i=15),void 0!==this.linegraph.groups[t]?this.linegraph.groups[t].getLegend(e,i):"cannot find group:'"+t+"'"},r.prototype.isGroupVisible=function(t){return void 0!==this.linegraph.groups[t]?this.linegraph.groups[t].visible&&(void 0===this.linegraph.options.groups.visibility[t]||1==this.linegraph.options.groups.visibility[t]):!1},r.prototype.getDataRange=function(){var t=null,e=null;for(var i in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(i)&&1==this.linegraph.groups[i].visible)for(var n=0;n<this.linegraph.groups[i].itemsData.length;n++){
var r=this.linegraph.groups[i].itemsData[n],o=c.convert(r.x,"Date").valueOf();t=null==t?o:t>o?o:t,e=null==e?o:o>e?o:e}return{min:null!=t?new Date(t):null,max:null!=e?new Date(e):null}},r.prototype.getEventProperties=function(t){var e=t.center?t.center.x:t.clientX,i=t.center?t.center.y:t.clientY,n=e-c.getAbsoluteLeft(this.dom.centerContainer),r=i-c.getAbsoluteTop(this.dom.centerContainer),o=this._toTime(n),s=v.customTimeFromTarget(t),a=c.getTarget(t),h=null;c.hasParent(a,this.timeAxis.dom.foreground)?h="axis":this.timeAxis2&&c.hasParent(a,this.timeAxis2.dom.foreground)?h="axis":c.hasParent(a,this.linegraph.yAxisLeft.dom.frame)?h="data-axis":c.hasParent(a,this.linegraph.yAxisRight.dom.frame)?h="data-axis":c.hasParent(a,this.linegraph.legendLeft.dom.frame)?h="legend":c.hasParent(a,this.linegraph.legendRight.dom.frame)?h="legend":null!=s?h="custom-time":c.hasParent(a,this.currentTime.bar)?h="current-time":c.hasParent(a,this.dom.center)&&(h="background");var l=[],d=this.linegraph.yAxisLeft,u=this.linegraph.yAxisRight;return d.hidden||l.push(d.screenToValue(r)),u.hidden||l.push(u.screenToValue(r)),{event:t,what:h,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:n,y:r,time:o,value:l}},r.prototype._createConfigurator=function(){return new s["default"](this,this.dom.container,E)},t.exports=r},function(t,e,i){function n(t,e){this.id=o.randomUUID(),this.body=t,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=o.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e,n){i._onAdd(e.items)},update:function(t,e,n){i._onUpdate(e.items)},remove:function(t,e,n){i._onRemove(e.items)}},this.groupListeners={add:function(t,e,n){i._onAddGroups(e.items)},update:function(t,e,n){i._onUpdateGroups(e.items)},remove:function(t,e,n){i._onRemoveGroups(e.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){i.lastStart=i.body.range.start,i.svg.style.left=o.option.asSize(-i.props.width),i.forceGraphUpdate=!0,i.redraw.call(i)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=i(1),s=i(8),a=i(9),h=i(11),l=i(31),c=i(52),d=i(54),u=i(58),f=i(55),p=i(57),m=i(56),g="__ungrouped__";n.prototype=new l,n.prototype._create=function(){var t=document.createElement("div");t.className="vis-line-graph",this.dom.frame=t,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",t.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new c(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new c(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new u(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new u(this.body,this.options.legend,"right",this.options.groups),this.show()},n.prototype.setOptions=function(t){if(t){var e=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];void 0===t.graphHeight&&void 0!==t.height?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):void 0!==this.body.domProps.centerContainer.height&&void 0!==t.graphHeight&&parseInt((t.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),o.selectiveDeepExtend(e,this.options,t),o.mergeOptions(this.options,t,"interpolation"),o.mergeOptions(this.options,t,"drawPoints"),o.mergeOptions(this.options,t,"shaded"),o.mergeOptions(this.options,t,"legend"),t.interpolation&&"object"==r(t.interpolation)&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&void 0!==t.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==t.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(g)&&this.groups[g].setOptions(t)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))},n.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},n.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},n.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof a||t instanceof h))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(o.forEach(this.itemListeners,function(t,e){n.off(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var r=this.id;o.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,r)}),e=this.itemsData.getIds(),this._onAdd(e)}},n.prototype.setGroups=function(t){var e,i=this;if(this.groupsData){o.forEach(this.groupListeners,function(t,e){i.groupsData.off(e,t)}),e=this.groupsData.getIds(),this.groupsData=null;for(var n=0;n<e.length;n++)this._removeGroup(e[n])}if(t){if(!(t instanceof a||t instanceof h))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var r=this.id;o.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,r)}),e=this.groupsData.getIds(),this._onAddGroups(e)}},n.prototype._onUpdate=function(t){this._updateAllGroupData()},n.prototype._onAdd=function(t){this._onUpdate(t)},n.prototype._onRemove=function(t){this._onUpdate(t)},n.prototype._onUpdateGroups=function(t){this._updateAllGroupData()},n.prototype._onAddGroups=function(t){this._onUpdateGroups(t)},n.prototype._onRemoveGroups=function(t){for(var e=0;e<t.length;e++)this._removeGroup(t[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})},n.prototype._removeGroup=function(t){this.groups.hasOwnProperty(t)&&("right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.removeGroup(t),this.legendRight.removeGroup(t),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(t),this.legendLeft.removeGroup(t),this.legendLeft.redraw()),delete this.groups[t])},n.prototype._updateGroup=function(t,e){this.groups.hasOwnProperty(e)?(this.groups[e].update(t),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new d(t,e,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()},n.prototype._updateAllGroupData=function(){if(null!=this.itemsData){for(var t={},e=this.itemsData.get(),i={},n=0;n<e.length;n++){var r=e[n],s=r.group;null!==s&&void 0!==s||(s=g),i.hasOwnProperty(s)?i[s]++:i[s]=1}for(var n=0;n<e.length;n++){var r=e[n],s=r.group;null!==s&&void 0!==s||(s=g),t.hasOwnProperty(s)||(t[s]=new Array(i[s]));var a=o.bridgeObject(r);a.x=o.convert(r.x,"Date"),a.orginalY=r.y,a.y=Number(r.y);var h=t[s].length-i[s]--;t[s][h]=a}for(var s in this.groups)this.groups.hasOwnProperty(s)&&(t.hasOwnProperty(s)||(t[s]=new Array(0)));for(var s in t)if(t.hasOwnProperty(s))if(0==t[s].length)this.groups.hasOwnProperty(s)&&this._removeGroup(s);else{var l=void 0;void 0!=this.groupsData&&(l=this.groupsData.get(s)),void 0==l&&(l={id:s,content:this.options.defaultGroup+s}),this._updateGroup(l,s),this.groups[s].setItems(t[s])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}},n.prototype.redraw=function(){var t=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,t=this._isResized()||t;var e=this.body.range.end-this.body.range.start,i=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,1==t&&(this.svg.style.width=o.option.asSize(3*this.props.width),this.svg.style.left=o.option.asSize(-this.props.width),-1==(this.options.height+"").indexOf("%")&&1!=this.updateSVGheightOnResize||(this.updateSVGheight=!0)),1==this.updateSVGheight?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",1==t||1==i||1==this.abortedGraphUpdate||1==this.forceGraphUpdate)t=this._updateGraph()||t,this.forceGraphUpdate=!1;else if(0!=this.lastStart){var n=this.body.range.start-this.lastStart,r=this.body.range.end-this.body.range.start;if(0!=this.props.width){var s=this.props.width/r,a=n*s;this.svg.style.left=-this.props.width-a+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),t},n.prototype._getSortedGroupIds=function(){var t=[];for(var e in this.groups)if(this.groups.hasOwnProperty(e)){var i=this.groups[e];1!=i.visible||void 0!==this.options.groups.visibility[e]&&1!=this.options.groups.visibility[e]||t.push({id:e,zIndex:i.options.zIndex})}o.insertSort(t,function(t,e){var i=t.zIndex,n=e.zIndex;return void 0===i&&(i=0),void 0===n&&(n=0),i==n?0:n>i?-1:1});for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r].id;return n},n.prototype._updateGraph=function(){if(s.prepareElements(this.svgElements),0!=this.props.width&&null!=this.itemsData){var t,e,i={},n=!1,r=this.body.util.toGlobalTime(-this.body.domProps.root.width),o=this.body.util.toGlobalTime(2*this.body.domProps.root.width),a=this._getSortedGroupIds();if(a.length>0){var h={};for(this._getRelevantData(a,h,r,o),this._applySampling(a,h),e=0;e<a.length;e++)this._convertXcoordinates(h[a[e]]);if(this._getYRanges(a,h,i),n=this._updateYAxis(a,i),1==n)return s.cleanupElements(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var l=void 0;for(e=0;e<a.length;e++)t=this.groups[a[e]],this.options.stack===!0&&"line"===this.options.style&&(void 0!=t.options.excludeFromStacking&&t.options.excludeFromStacking||(void 0!=l&&(this._stack(h[t.id],h[l.id]),1==t.options.shaded.enabled&&"group"!==t.options.shaded.orientation&&("top"==t.options.shaded.orientation&&"group"!==l.options.shaded.orientation?(l.options.shaded.orientation="group",l.options.shaded.groupId=t.id):(t.options.shaded.orientation="group",t.options.shaded.groupId=l.id))),l=t)),this._convertYcoordinates(h[a[e]],t);var c={};for(e=0;e<a.length;e++)if(t=this.groups[a[e]],"line"===t.options.style&&1==t.options.shaded.enabled){var d=h[a[e]];if(null==d||0==d.length)continue;if(c.hasOwnProperty(a[e])||(c[a[e]]=p.calcPath(d,t)),"group"===t.options.shaded.orientation){var u=t.options.shaded.groupId;if(-1===a.indexOf(u)){console.log(t.id+": Unknown shading group target given:"+u);continue}c.hasOwnProperty(u)||(c[u]=p.calcPath(h[u],this.groups[u])),p.drawShading(c[a[e]],t,c[u],this.framework)}else p.drawShading(c[a[e]],t,void 0,this.framework)}for(f.draw(a,h,this.framework),e=0;e<a.length;e++)if(t=this.groups[a[e]],h[a[e]].length>0)switch(t.options.style){case"line":c.hasOwnProperty(a[e])||(c[a[e]]=p.calcPath(h[a[e]],t)),p.draw(c[a[e]],t,this.framework);case"point":case"points":"point"!=t.options.style&&"points"!=t.options.style&&1!=t.options.drawPoints.enabled||m.draw(h[a[e]],t,this.framework);break;case"bar":}}}return s.cleanupElements(this.svgElements),!1},n.prototype._stack=function(t,e){var i,n,r,o,s;i=0;for(var a=0;a<t.length;a++){o=void 0,s=void 0;for(var h=i;h<e.length;h++){if(e[h].x===t[a].x){o=e[h],s=e[h],i=h;break}if(e[h].x>t[a].x){s=e[h],o=0==h?s:e[h-1],i=h;break}}void 0===s&&(o=e[e.length-1],s=e[e.length-1]),n=s.x-o.x,r=s.y-o.y,0==n?t[a].y=t[a].orginalY+s.y:t[a].y=t[a].orginalY+r/n*(t[a].x-o.x)+o.y}},n.prototype._getRelevantData=function(t,e,i,n){var r,s,a,h;if(t.length>0)for(s=0;s<t.length;s++){r=this.groups[t[s]];var l=r.getItems();if(1==r.options.sort){var c=function(t,e){return t.getTime()==e.getTime()?0:e>t?-1:1},d=Math.max(0,o.binarySearchValue(l,i,"x","before",c)),u=Math.min(l.length,o.binarySearchValue(l,n,"x","after",c)+1);0>=u&&(u=l.length);var f=new Array(u-d);for(a=d;u>a;a++)h=r.itemsData[a],f[a-d]=h;e[t[s]]=f}else e[t[s]]=r.itemsData}},n.prototype._applySampling=function(t,e){var i;if(t.length>0)for(var n=0;n<t.length;n++)if(i=this.groups[t[n]],1==i.options.sampling){var r=e[t[n]];if(r.length>0){var o=1,s=r.length,a=this.body.util.toGlobalScreen(r[r.length-1].x)-this.body.util.toGlobalScreen(r[0].x),h=s/a;o=Math.min(Math.ceil(.2*s),Math.max(1,Math.round(h)));for(var l=new Array(s),c=0;s>c;c+=o){var d=Math.round(c/o);l[d]=r[c]}e[t[n]]=l.splice(0,Math.round(s/o))}}},n.prototype._getYRanges=function(t,e,i){var n,r,o,s,a=[],h=[];if(t.length>0){for(o=0;o<t.length;o++)n=e[t[o]],s=this.groups[t[o]].options,n.length>0&&(r=this.groups[t[o]],s.stack===!0&&"bar"===s.style?"left"===s.yAxisOrientation?a=a.concat(r.getItems()):h=h.concat(r.getItems()):i[t[o]]=r.getYRange(n,t[o]));f.getStackedYRange(a,i,t,"__barStackLeft","left"),f.getStackedYRange(h,i,t,"__barStackRight","right")}},n.prototype._updateYAxis=function(t,e){var i,n,r=!1,o=!1,s=!1,a=1e9,h=1e9,l=-1e9,c=-1e9;if(t.length>0){for(var d=0;d<t.length;d++){var u=this.groups[t[d]];u&&"right"!=u.options.yAxisOrientation?(o=!0,a=1e9,l=-1e9):u&&u.options.yAxisOrientation&&(s=!0,h=1e9,c=-1e9)}for(var d=0;d<t.length;d++)e.hasOwnProperty(t[d])&&e[t[d]].ignore!==!0&&(i=e[t[d]].min,n=e[t[d]].max,"right"!=e[t[d]].yAxisOrientation?(o=!0,a=a>i?i:a,l=n>l?n:l):(s=!0,h=h>i?i:h,c=n>c?n:c));1==o&&this.yAxisLeft.setRange(a,l),1==s&&this.yAxisRight.setRange(h,c)}r=this._toggleAxisVisiblity(o,this.yAxisLeft)||r,r=this._toggleAxisVisiblity(s,this.yAxisRight)||r,1==s&&1==o?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!o,this.yAxisRight.masterAxis=this.yAxisLeft,0==this.yAxisRight.master?(1==s?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,r=this.yAxisLeft.redraw()||r,r=this.yAxisRight.redraw()||r):r=this.yAxisRight.redraw()||r;for(var f=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"],d=0;d<f.length;d++)-1!=t.indexOf(f[d])&&t.splice(t.indexOf(f[d]),1);return r},n.prototype._toggleAxisVisiblity=function(t,e){var i=!1;return 0==t?e.dom.frame.parentNode&&0==e.hidden&&(e.hide(),i=!0):e.dom.frame.parentNode||1!=e.hidden||(e.show(),i=!0),i},n.prototype._convertXcoordinates=function(t){for(var e=this.body.util.toScreen,i=0;i<t.length;i++)t[i].screen_x=e(t[i].x)+this.props.width,t[i].screen_y=t[i].y},n.prototype._convertYcoordinates=function(t,e){var i=this.yAxisLeft,n=Number(this.svg.style.height.replace("px",""));"right"==e.options.yAxisOrientation&&(i=this.yAxisRight);for(var r=0;r<t.length;r++)t[r].screen_y=Math.round(i.convertValue(t[r].y));e.setZeroPosition(Math.min(n,i.convertValue(0)))},t.exports=n},function(t,e,i){function n(t,e,i,n){this.id=r.randomUUID(),this.body=t,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(t){return""+parseFloat(t.toPrecision(3))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(t){return""+parseFloat(t.toPrecision(3))},title:{text:void 0,style:void 0}}},this.linegraphOptions=n,this.linegraphSVG=i,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=r.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(e),this.width=Number((""+this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};var o=this;this.body.emitter.on("verticalDrag",function(){o.dom.lineContainer.style.top=o.body.domProps.scrollTop+"px"})}var r=i(1),o=i(8),s=i(31),a=i(53);n.prototype=new s,n.prototype.addGroup=function(t,e){this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1},n.prototype.updateGroup=function(t,e){this.groups.hasOwnProperty(t)||(this.amountOfGroups+=1),this.groups[t]=e},n.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},n.prototype.setOptions=function(t){if(t){var e=!1;this.options.orientation!=t.orientation&&void 0!==t.orientation&&(e=!0);var i=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];r.selectiveDeepExtend(i,this.options,t),this.minWidth=Number((""+this.options.width).replace("px","")),e===!0&&this.dom.frame&&(this.hide(),this.show())}},n.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)},n.prototype._redrawGroupIcons=function(){o.prepareElements(this.svgElements);var t,e=this.options.iconWidth,i=15,n=4,r=n+.5*i;t="left"===this.options.orientation?n:this.width-e-n;var s=Object.keys(this.groups);s.sort(function(t,e){return e>t?-1:1});for(var a=0;a<s.length;a++){var h=s[a];this.groups[h].visible!==!0||void 0!==this.linegraphOptions.visibility[h]&&this.linegraphOptions.visibility[h]!==!0||(this.groups[h].getLegend(e,i,this.framework,t,r),r+=i+n)}o.cleanupElements(this.svgElements),this.iconsRemoved=!1},n.prototype._cleanupIcons=function(){this.iconsRemoved===!1&&(o.prepareElements(this.svgElements),o.cleanupElements(this.svgElements),this.iconsRemoved=!0)},n.prototype.show=function(){this.hidden=!1,this.dom.frame.parentNode||(this.options.rtl?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.left.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)},n.prototype.hide=function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)},n.prototype.setRange=function(t,e){this.range.start=t,this.range.end=e},n.prototype.redraw=function(){var t=!1,e=0;this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px";for(var i in this.groups)this.groups.hasOwnProperty(i)&&(this.groups[i].visible!==!0||void 0!==this.linegraphOptions.visibility[i]&&this.linegraphOptions.visibility[i]!==!0||e++);if(0===this.amountOfGroups||0===e)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=this.height+"px",this.width=this.options.visible===!0?Number((""+this.options.width).replace("px","")):0;var n=this.props,r=this.dom.frame;r.className="vis-data-axis",this._calculateCharSize();var o=this.options.orientation,s=this.options.showMinorLabels,a=this.options.showMajorLabels;n.minorLabelHeight=s?n.minorCharHeight:0,n.majorLabelHeight=a?n.majorCharHeight:0,n.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset,n.minorLineHeight=1,n.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset,n.majorLineHeight=1,"left"===o?(r.style.top="0",r.style.left="0",r.style.bottom="",r.style.width=this.width+"px",r.style.height=this.height+"px",this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(r.style.top="",r.style.bottom="0",r.style.left="0",r.style.width=this.width+"px",r.style.height=this.height+"px",this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),t=this._redrawLabels(),t=this._isResized()||t,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(o)}return t},n.prototype._redrawLabels=function(){var t=this,e=!1;o.prepareElements(this.DOMelements.lines),o.prepareElements(this.DOMelements.labels);var i=this.options.orientation,n=void 0!=this.options[i].range?this.options[i].range:{},r=!0;void 0!=n.max&&(this.range.end=n.max,r=!1);var s=!0;void 0!=n.min&&(this.range.start=n.min,s=!1),this.scale=new a(this.range.start,this.range.end,s,r,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[i].format),this.master===!1&&void 0!=this.masterAxis&&this.scale.followScale(this.masterAxis.scale),this.maxLabelSize=0;var h=this.scale.getLines();h.forEach(function(e){var n=e.y,r=e.major;t.options.showMinorLabels&&r===!1&&t._redrawLabel(n-2,e.val,i,"vis-y-axis vis-minor",t.props.minorCharHeight),r&&n>=0&&t._redrawLabel(n-2,e.val,i,"vis-y-axis vis-major",t.props.majorCharHeight),t.master===!0&&(r?t._redrawLine(n,i,"vis-grid vis-horizontal vis-major",t.options.majorLinesOffset,t.props.majorLineWidth):t._redrawLine(n,i,"vis-grid vis-horizontal vis-minor",t.options.minorLinesOffset,t.props.minorLineWidth))});var l=0;void 0!==this.options[i].title&&void 0!==this.options[i].title.text&&(l=this.props.titleCharHeight);var c=this.options.icons===!0?Math.max(this.options.iconWidth,l)+this.options.labelOffsetX+15:l+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-c&&this.options.visible===!0?(this.width=this.maxLabelSize+c,this.options.width=this.width+"px",o.cleanupElements(this.DOMelements.lines),o.cleanupElements(this.DOMelements.labels),this.redraw(),e=!0):this.maxLabelSize<this.width-c&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+c),this.options.width=this.width+"px",o.cleanupElements(this.DOMelements.lines),o.cleanupElements(this.DOMelements.labels),this.redraw(),e=!0):(o.cleanupElements(this.DOMelements.lines),o.cleanupElements(this.DOMelements.labels),e=!1),e},n.prototype.convertValue=function(t){return this.scale.convertValue(t)},n.prototype.screenToValue=function(t){return this.scale.screenToValue(t)},n.prototype._redrawLabel=function(t,e,i,n,r){var s=o.getDOMElement("div",this.DOMelements.labels,this.dom.frame);s.className=n,s.innerHTML=e,"left"===i?(s.style.left="-"+this.options.labelOffsetX+"px",s.style.textAlign="right"):(s.style.right="-"+this.options.labelOffsetX+"px",s.style.textAlign="left"),s.style.top=t-.5*r+this.options.labelOffsetY+"px",e+="";var a=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<e.length*a&&(this.maxLabelSize=e.length*a)},n.prototype._redrawLine=function(t,e,i,n,r){if(this.master===!0){var s=o.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);s.className=i,s.innerHTML="","left"===e?s.style.left=this.width-n+"px":s.style.right=this.width-n+"px",s.style.width=r+"px",s.style.top=t+"px"}},n.prototype._redrawTitle=function(t){if(o.prepareElements(this.DOMelements.title),void 0!==this.options[t].title&&void 0!==this.options[t].title.text){var e=o.getDOMElement("div",this.DOMelements.title,this.dom.frame);e.className="vis-y-axis vis-title vis-"+t,e.innerHTML=this.options[t].title.text,void 0!==this.options[t].title.style&&r.addCssText(e,this.options[t].title.style),"left"===t?e.style.left=this.props.titleCharHeight+"px":e.style.right=this.props.titleCharHeight+"px",e.style.width=this.height+"px"}o.cleanupElements(this.DOMelements.title)},n.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var t=document.createTextNode("0"),e=document.createElement("div");e.className="vis-y-axis vis-minor vis-measure",e.appendChild(t),this.dom.frame.appendChild(e),this.props.minorCharHeight=e.clientHeight,this.props.minorCharWidth=e.clientWidth,this.dom.frame.removeChild(e)}if(!("majorCharHeight"in this.props)){var i=document.createTextNode("0"),n=document.createElement("div");n.className="vis-y-axis vis-major vis-measure",n.appendChild(i),this.dom.frame.appendChild(n),this.props.majorCharHeight=n.clientHeight,this.props.majorCharWidth=n.clientWidth,this.dom.frame.removeChild(n)}if(!("titleCharHeight"in this.props)){var r=document.createTextNode("0"),o=document.createElement("div");o.className="vis-y-axis vis-title vis-measure",o.appendChild(r),this.dom.frame.appendChild(o),this.props.titleCharHeight=o.clientHeight,this.props.titleCharWidth=o.clientWidth,this.dom.frame.removeChild(o)}},t.exports=n},function(t,e){function i(t,e,i,n,r,o){var s=arguments.length<=6||void 0===arguments[6]?!1:arguments[6],a=arguments.length<=7||void 0===arguments[7]?!1:arguments[7];if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=r,this.majorCharHeight=o,this._start=t,this._end=e,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=s,this.autoScaleStart=i,this.autoScaleEnd=n,this.formattingFunction=a,i||n){var h=this,l=function(t){var e=t-t%(h.magnitudefactor*h.minorSteps[h.minorStepIdx]);return t%(h.magnitudefactor*h.minorSteps[h.minorStepIdx])>.5*(h.magnitudefactor*h.minorSteps[h.minorStepIdx])?e+h.magnitudefactor*h.minorSteps[h.minorStepIdx]:e};i&&(this._start-=2*this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._start=l(this._start)),n&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=l(this._end)),this.determineScale()}}i.prototype.setCharHeight=function(t){this.majorCharHeight=t},i.prototype.setHeight=function(t){this.containerHeight=t},i.prototype.determineScale=function(){var t=this._end-this._start;this.scale=this.containerHeight/t;var e=this.majorCharHeight/this.scale,i=t>0?Math.round(Math.log(t)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,i);var n=0;0>i&&(n=i);for(var r=!1,o=n;Math.abs(o)<=Math.abs(i);o++){this.magnitudefactor=Math.pow(10,o);for(var s=0;s<this.minorSteps.length;s++){var a=this.magnitudefactor*this.minorSteps[s];if(a>=e){r=!0,this.minorStepIdx=s;break}}if(r===!0)break}},i.prototype.is_major=function(t){return t%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0},i.prototype.getStep=function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]},i.prototype.getFirstMajor=function(){var t=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(t-this._start%t)%t)},i.prototype.formatValue=function(t){var e=t.toPrecision(5);return"function"==typeof this.formattingFunction&&(e=this.formattingFunction(t)),"number"==typeof e?""+e:"string"==typeof e?e:t.toPrecision(5)},i.prototype.getLines=function(){for(var t=[],e=this.getStep(),i=(e-this._start%e)%e,n=this._start+i;this._end-n>1e-5;n+=e)n!=this._start&&t.push({major:this.is_major(n),y:this.convertValue(n),val:this.formatValue(n)});return t},i.prototype.followScale=function(t){var e=this.minorStepIdx,i=this._start,n=this._end,r=this,o=function(){r.magnitudefactor*=2},s=function(){r.magnitudefactor/=2};t.minorStepIdx<=1&&this.minorStepIdx<=1||t.minorStepIdx>1&&this.minorStepIdx>1||(t.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,2==e?o():(o(),o())):(this.minorStepIdx=2,1==e?s():(s(),s())));for(var a=(t.getLines(),t.convertValue(0)),h=t.getStep()*t.scale,l=!1,c=0;!l&&c++<5;){this.scale=h/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var d=this.containerHeight/this.scale;this._start=i,this._end=this._start+d;var u=this._end*this.scale,f=this.magnitudefactor*this.majorSteps[this.minorStepIdx],p=this.getFirstMajor()-t.getFirstMajor();if(this.zeroAlign){var m=a-u;this._end+=m/this.scale,this._start=this._end-d}else this.autoScaleStart?(this._start-=p/this.scale,this._end=this._start+d):(this._start+=f-p/this.scale,this._end=this._start+d);if(!this.autoScaleEnd&&this._end>n+1e-5)s(),l=!1;else{if(!this.autoScaleStart&&this._start<i-1e-5){if(!(this.zeroAlign&&i>=0)){s(),l=!1;continue}console.warn("Can't adhere to given 'min' range, due to zeroalign")}this.autoScaleStart&&this.autoScaleEnd&&n-i>d?(o(),l=!1):l=!0}}},i.prototype.convertValue=function(t){return this.containerHeight-(t-this._start)*this.scale},i.prototype.screenToValue=function(t){return(this.containerHeight-t)/this.scale+this._start},t.exports=i},function(t,e,i){function n(t,e,i,n){this.id=e;var r=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=o.selectiveBridgeObject(r,i),this.usingDefaultStyle=void 0===t.className,this.groupsUsingDefaultStyles=n,this.zeroPosition=0,this.update(t),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=void 0===t.visible?!0:t.visible}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=i(1),s=(i(8),i(55)),a=i(57),h=i(56);n.prototype.setItems=function(t){null!=t?(this.itemsData=t,1==this.options.sort&&o.insertSort(this.itemsData,function(t,e){return t.x>e.x?1:-1})):this.itemsData=[]},n.prototype.getItems=function(){return this.itemsData},n.prototype.setZeroPosition=function(t){this.zeroPosition=t},n.prototype.setOptions=function(t){if(void 0!==t){var e=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];o.selectiveDeepExtend(e,this.options,t),"function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),o.mergeOptions(this.options,t,"interpolation"),o.mergeOptions(this.options,t,"drawPoints"),o.mergeOptions(this.options,t,"shaded"),t.interpolation&&"object"==r(t.interpolation)&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5));
}},n.prototype.update=function(t){this.group=t,this.content=t.content||"graph",this.className=t.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=void 0===t.visible?!0:t.visible,this.style=t.style,this.setOptions(t.options)},n.prototype.getLegend=function(t,e,i,n,r){if(void 0==i||null==i){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");i={svg:o,svgElements:{},options:this.options,groups:[this]}}switch(void 0!=n&&null!=n||(n=0),void 0!=r&&null!=r||(r=.5*e),this.options.style){case"line":a.drawIcon(this,n,r,t,e,i);break;case"points":case"point":h.drawIcon(this,n,r,t,e,i);break;case"bar":s.drawIcon(this,n,r,t,e,i)}return{icon:i.svg,label:this.content,orientation:this.options.yAxisOrientation}},n.prototype.getYRange=function(t){for(var e=t[0].y,i=t[0].y,n=0;n<t.length;n++)e=e>t[n].y?t[n].y:e,i=i<t[n].y?t[n].y:i;return{min:e,max:i,yAxisOrientation:this.options.yAxisOrientation}},t.exports=n},function(t,e,i){function n(t,e){}var r=i(8),o=i(56);n.drawIcon=function(t,e,i,n,o,s){var a=.5*o,h=r.getSVGElement("rect",s.svgElements,s.svg);h.setAttributeNS(null,"x",e),h.setAttributeNS(null,"y",i-a),h.setAttributeNS(null,"width",n),h.setAttributeNS(null,"height",2*a),h.setAttributeNS(null,"class","vis-outline");var l=Math.round(.3*n),c=t.options.barChart.width,d=c/l,u=Math.round(.4*o),f=Math.round(.75*o),p=Math.round((n-2*l)/3);if(r.drawBar(e+.5*l+p,i+a-u-1,l,u,t.className+" vis-bar",s.svgElements,s.svg,t.style),r.drawBar(e+1.5*l+p+2,i+a-f-1,l,f,t.className+" vis-bar",s.svgElements,s.svg,t.style),1==t.options.drawPoints.enabled){var m={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size/d,className:t.className};r.drawPoint(e+.5*l+p,i+a-u-1,m,s.svgElements,s.svg),r.drawPoint(e+1.5*l+p+2,i+a-f-1,m,s.svgElements,s.svg)}},n.draw=function(t,e,i){var s,a,h,l,c,d,u=[],f={},p=0;for(c=0;c<t.length;c++)if(l=i.groups[t[c]],"bar"===l.options.style&&l.visible===!0&&(void 0===i.options.groups.visibility[t[c]]||i.options.groups.visibility[t[c]]===!0))for(d=0;d<e[t[c]].length;d++)u.push({screen_x:e[t[c]][d].screen_x,screen_y:e[t[c]][d].screen_y,x:e[t[c]][d].x,y:e[t[c]][d].y,groupId:t[c],label:e[t[c]][d].label}),p+=1;if(0!==p)for(u.sort(function(t,e){return t.screen_x===e.screen_x?t.groupId<e.groupId?-1:1:t.screen_x-e.screen_x}),n._getDataIntersections(f,u),c=0;c<u.length;c++){l=i.groups[u[c].groupId];var m=void 0!=l.options.barChart.minWidth?l.options.barChart.minWidth:.1*l.options.barChart.width;a=u[c].screen_x;var g=0;if(void 0===f[a])c+1<u.length&&(s=Math.abs(u[c+1].screen_x-a)),h=n._getSafeDrawData(s,l,m);else{var v=c+(f[a].amount-f[a].resolved);c-(f[a].resolved+1),v<u.length&&(s=Math.abs(u[v].screen_x-a)),h=n._getSafeDrawData(s,l,m),f[a].resolved+=1,l.options.stack===!0&&l.options.excludeFromStacking!==!0?u[c].screen_y<l.zeroPosition?(g=f[a].accumulatedNegative,f[a].accumulatedNegative+=l.zeroPosition-u[c].screen_y):(g=f[a].accumulatedPositive,f[a].accumulatedPositive+=l.zeroPosition-u[c].screen_y):l.options.barChart.sideBySide===!0&&(h.width=h.width/f[a].amount,h.offset+=f[a].resolved*h.width-.5*h.width*(f[a].amount+1))}if(r.drawBar(u[c].screen_x+h.offset,u[c].screen_y-g,h.width,l.zeroPosition-u[c].screen_y,l.className+" vis-bar",i.svgElements,i.svg,l.style),l.options.drawPoints.enabled===!0){var A={screen_x:u[c].screen_x,screen_y:u[c].screen_y-g,x:u[c].x,y:u[c].y,groupId:u[c].groupId,label:u[c].label};o.draw([A],l,i,h.offset)}}},n._getDataIntersections=function(t,e){for(var i,n=0;n<e.length;n++)n+1<e.length&&(i=Math.abs(e[n+1].screen_x-e[n].screen_x)),n>0&&(i=Math.min(i,Math.abs(e[n-1].screen_x-e[n].screen_x))),0===i&&(void 0===t[e[n].screen_x]&&(t[e[n].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),t[e[n].screen_x].amount+=1)},n._getSafeDrawData=function(t,e,i){var n,r;return t<e.options.barChart.width&&t>0?(n=i>t?i:t,r=0,"left"===e.options.barChart.align?r-=.5*t:"right"===e.options.barChart.align&&(r+=.5*t)):(n=e.options.barChart.width,r=0,"left"===e.options.barChart.align?r-=.5*e.options.barChart.width:"right"===e.options.barChart.align&&(r+=.5*e.options.barChart.width)),{width:n,offset:r}},n.getStackedYRange=function(t,e,i,r,o){if(t.length>0){t.sort(function(t,e){return t.screen_x===e.screen_x?t.groupId<e.groupId?-1:1:t.screen_x-e.screen_x});var s={};n._getDataIntersections(s,t),e[r]=n._getStackedYRange(s,t),e[r].yAxisOrientation=o,i.push(r)}},n._getStackedYRange=function(t,e){for(var i,n=e[0].screen_y,r=e[0].screen_y,o=0;o<e.length;o++)i=e[o].screen_x,void 0===t[i]?(n=n>e[o].screen_y?e[o].screen_y:n,r=r<e[o].screen_y?e[o].screen_y:r):e[o].screen_y<0?t[i].accumulatedNegative+=e[o].screen_y:t[i].accumulatedPositive+=e[o].screen_y;for(var s in t)t.hasOwnProperty(s)&&(n=n>t[s].accumulatedNegative?t[s].accumulatedNegative:n,n=n>t[s].accumulatedPositive?t[s].accumulatedPositive:n,r=r<t[s].accumulatedNegative?t[s].accumulatedNegative:r,r=r<t[s].accumulatedPositive?t[s].accumulatedPositive:r);return{min:n,max:r}},t.exports=n},function(t,e,i){function n(t,e){}function r(t,e){return e="undefined"==typeof e?{}:e,{style:e.style||t.options.drawPoints.style,styles:e.styles||t.options.drawPoints.styles,size:e.size||t.options.drawPoints.size,className:e.className||t.className}}function o(t,e){var i=void 0;return t.options&&t.options.drawPoints&&t.options.drawPoints.onRender&&"function"==typeof t.options.drawPoints.onRender&&(i=t.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&"function"==typeof e.group.options.drawPoints.onRender&&(i=e.group.options.drawPoints.onRender),i}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=i(8);n.draw=function(t,e,i,n){n=n||0;for(var h=o(i,e),l=0;l<t.length;l++)if(h){var c=h(t[l],e);c!==!0&&"object"!==("undefined"==typeof c?"undefined":s(c))||a.drawPoint(t[l].screen_x+n,t[l].screen_y,r(e,c),i.svgElements,i.svg,t[l].label)}else a.drawPoint(t[l].screen_x+n,t[l].screen_y,r(e),i.svgElements,i.svg,t[l].label)},n.drawIcon=function(t,e,i,n,o,s){var h=.5*o,l=a.getSVGElement("rect",s.svgElements,s.svg);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",i-h),l.setAttributeNS(null,"width",n),l.setAttributeNS(null,"height",2*h),l.setAttributeNS(null,"class","vis-outline"),a.drawPoint(e+.5*n,i,r(t),s.svgElements,s.svg)},t.exports=n},function(t,e,i){function n(t,e){}var r=i(8);n.calcPath=function(t,e){if(null!=t&&t.length>0){var i=[];return i=1==e.options.interpolation.enabled?n._catmullRom(t,e):n._linear(t)}},n.drawIcon=function(t,e,i,n,o,s){var a,h,l=.5*o,c=r.getSVGElement("rect",s.svgElements,s.svg);if(c.setAttributeNS(null,"x",e),c.setAttributeNS(null,"y",i-l),c.setAttributeNS(null,"width",n),c.setAttributeNS(null,"height",2*l),c.setAttributeNS(null,"class","vis-outline"),a=r.getSVGElement("path",s.svgElements,s.svg),a.setAttributeNS(null,"class",t.className),void 0!==t.style&&a.setAttributeNS(null,"style",t.style),a.setAttributeNS(null,"d","M"+e+","+i+" L"+(e+n)+","+i),1==t.options.shaded.enabled&&(h=r.getSVGElement("path",s.svgElements,s.svg),"top"==t.options.shaded.orientation?h.setAttributeNS(null,"d","M"+e+", "+(i-l)+"L"+e+","+i+" L"+(e+n)+","+i+" L"+(e+n)+","+(i-l)):h.setAttributeNS(null,"d","M"+e+","+i+" L"+e+","+(i+l)+" L"+(e+n)+","+(i+l)+"L"+(e+n)+","+i),h.setAttributeNS(null,"class",t.className+" vis-icon-fill"),void 0!==t.options.shaded.style&&""!==t.options.shaded.style&&h.setAttributeNS(null,"style",t.options.shaded.style)),1==t.options.drawPoints.enabled){var d={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size,className:t.className};r.drawPoint(e+.5*n,i,d,s.svgElements,s.svg)}},n.drawShading=function(t,e,i,n){if(1==e.options.shaded.enabled){var o=Number(n.svg.style.height.replace("px","")),s=r.getSVGElement("path",n.svgElements,n.svg),a="L";1==e.options.interpolation.enabled&&(a="C");var h,l=0;l="top"==e.options.shaded.orientation?0:"bottom"==e.options.shaded.orientation?o:Math.min(Math.max(0,e.zeroPosition),o),h="group"==e.options.shaded.orientation&&null!=i&&void 0!=i?"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,a,!1)+" L"+i[i.length-1][0]+","+i[i.length-1][1]+" "+this.serializePath(i,a,!0)+i[0][0]+","+i[0][1]+" Z":"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,a,!1)+" V"+l+" H"+t[0][0]+" Z",s.setAttributeNS(null,"class",e.className+" vis-fill"),void 0!==e.options.shaded.style&&s.setAttributeNS(null,"style",e.options.shaded.style),s.setAttributeNS(null,"d",h)}},n.draw=function(t,e,i){if(null!=t&&void 0!=t){var n=r.getSVGElement("path",i.svgElements,i.svg);n.setAttributeNS(null,"class",e.className),void 0!==e.style&&n.setAttributeNS(null,"style",e.style);var o="L";1==e.options.interpolation.enabled&&(o="C"),n.setAttributeNS(null,"d","M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,o,!1))}},n.serializePath=function(t,e,i){if(t.length<2)return"";var n=e;if(i)for(var r=t.length-2;r>0;r--)n+=t[r][0]+","+t[r][1]+" ";else for(var r=1;r<t.length;r++)n+=t[r][0]+","+t[r][1]+" ";return n},n._catmullRomUniform=function(t){var e,i,n,r,o,s,a=[];a.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var h=1/6,l=t.length,c=0;l-1>c;c++)e=0==c?t[0]:t[c-1],i=t[c],n=t[c+1],r=l>c+2?t[c+2]:n,o={screen_x:(-e.screen_x+6*i.screen_x+n.screen_x)*h,screen_y:(-e.screen_y+6*i.screen_y+n.screen_y)*h},s={screen_x:(i.screen_x+6*n.screen_x-r.screen_x)*h,screen_y:(i.screen_y+6*n.screen_y-r.screen_y)*h},a.push([o.screen_x,o.screen_y]),a.push([s.screen_x,s.screen_y]),a.push([n.screen_x,n.screen_y]);return a},n._catmullRom=function(t,e){var i=e.options.interpolation.alpha;if(0==i||void 0===i)return this._catmullRomUniform(t);var n,r,o,s,a,h,l,c,d,u,f,p,m,g,v,A,y,b,E,w=[];w.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var x=t.length,_=0;x-1>_;_++)n=0==_?t[0]:t[_-1],r=t[_],o=t[_+1],s=x>_+2?t[_+2]:o,l=Math.sqrt(Math.pow(n.screen_x-r.screen_x,2)+Math.pow(n.screen_y-r.screen_y,2)),c=Math.sqrt(Math.pow(r.screen_x-o.screen_x,2)+Math.pow(r.screen_y-o.screen_y,2)),d=Math.sqrt(Math.pow(o.screen_x-s.screen_x,2)+Math.pow(o.screen_y-s.screen_y,2)),g=Math.pow(d,i),A=Math.pow(d,2*i),v=Math.pow(c,i),y=Math.pow(c,2*i),E=Math.pow(l,i),b=Math.pow(l,2*i),u=2*b+3*E*v+y,f=2*A+3*g*v+y,p=3*E*(E+v),p>0&&(p=1/p),m=3*g*(g+v),m>0&&(m=1/m),a={screen_x:(-y*n.screen_x+u*r.screen_x+b*o.screen_x)*p,screen_y:(-y*n.screen_y+u*r.screen_y+b*o.screen_y)*p},h={screen_x:(A*r.screen_x+f*o.screen_x-y*s.screen_x)*m,screen_y:(A*r.screen_y+f*o.screen_y-y*s.screen_y)*m},0==a.screen_x&&0==a.screen_y&&(a=r),0==h.screen_x&&0==h.screen_y&&(h=o),w.push([a.screen_x,a.screen_y]),w.push([h.screen_x,h.screen_y]),w.push([o.screen_x,o.screen_y]);return w},n._linear=function(t){for(var e=[],i=0;i<t.length;i++)e.push([t[i].screen_x,t[i].screen_y]);return e},t.exports=n},function(t,e,i){function n(t,e,i,n){this.body=t,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=i,this.options=r.extend({},this.defaultOptions),this.linegraphOptions=n,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}var r=i(1),o=i(8),s=i(31);n.prototype=new s,n.prototype.clear=function(){this.groups={},this.amountOfGroups=0},n.prototype.addGroup=function(t,e){1!=e.options.excludeFromLegend&&(this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1)},n.prototype.updateGroup=function(t,e){this.groups[t]=e},n.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},n.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},n.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},n.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},n.prototype.setOptions=function(t){var e=["enabled","orientation","icons","left","right"];r.selectiveDeepExtend(e,this.options,t)},n.prototype.redraw=function(){var t=0,e=Object.keys(this.groups);e.sort(function(t,e){return e>t?-1:1});for(var i=0;i<e.length;i++){var n=e[i];1!=this.groups[n].visible||void 0!==this.linegraphOptions.visibility[n]&&1!=this.linegraphOptions.visibility[n]||t++}if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==t)this.hide();else{if(this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position)this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var r=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+r+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());for(var o="",i=0;i<e.length;i++){var n=e[i];1!=this.groups[n].visible||void 0!==this.linegraphOptions.visibility[n]&&1!=this.linegraphOptions.visibility[n]||(o+=this.groups[n].content+"<br />")}this.dom.textArea.innerHTML=o,this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},n.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var t=Object.keys(this.groups);t.sort(function(t,e){return e>t?-1:1}),o.resetElements(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,i=Number(e.replace("px","")),n=i,r=this.options.iconSize,s=.75*this.options.iconSize,a=i+.5*s+3;this.svg.style.width=r+5+i+"px";for(var h=0;h<t.length;h++){var l=t[h];1!=this.groups[l].visible||void 0!==this.linegraphOptions.visibility[l]&&1!=this.linegraphOptions.visibility[l]||(this.groups[l].getLegend(r,s,this.framework,n,a),a+=s+this.options.iconSpacing)}}},t.exports=n},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i="string",n="boolean",r="number",o="array",s="date",a="object",h="dom",l="moment",c="any",d={configure:{enabled:{"boolean":n},filter:{"boolean":n,"function":"function"},container:{dom:h},__type__:{object:a,"boolean":n,"function":"function"}},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:i},sort:{"boolean":n},sampling:{"boolean":n},stack:{"boolean":n},graphHeight:{string:i,number:r},shaded:{enabled:{"boolean":n},orientation:{string:["bottom","top","zero","group"]},groupId:{object:a},__type__:{"boolean":n,object:a}},style:{string:["line","bar","points"]},barChart:{width:{number:r},minWidth:{number:r},sideBySide:{"boolean":n},align:{string:["left","center","right"]},__type__:{object:a}},interpolation:{enabled:{"boolean":n},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:r},__type__:{object:a,"boolean":n}},drawPoints:{enabled:{"boolean":n},onRender:{"function":"function"},size:{number:r},style:{string:["square","circle"]},__type__:{object:a,"boolean":n,"function":"function"}},dataAxis:{showMinorLabels:{"boolean":n},showMajorLabels:{"boolean":n},icons:{"boolean":n},width:{string:i,number:r},visible:{"boolean":n},alignZeros:{"boolean":n},left:{range:{min:{number:r},max:{number:r},__type__:{object:a}},format:{"function":"function"},title:{text:{string:i,number:r},style:{string:i},__type__:{object:a}},__type__:{object:a}},right:{range:{min:{number:r},max:{number:r},__type__:{object:a}},format:{"function":"function"},title:{text:{string:i,number:r},style:{string:i},__type__:{object:a}},__type__:{object:a}},__type__:{object:a}},legend:{enabled:{"boolean":n},icons:{"boolean":n},left:{visible:{"boolean":n},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:a}},right:{visible:{"boolean":n},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:a}},__type__:{object:a,"boolean":n}},groups:{visibility:{any:c},__type__:{object:a}},autoResize:{"boolean":n},throttleRedraw:{number:r},clickToUse:{"boolean":n},end:{number:r,date:s,string:i,moment:l},format:{minorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:a}},majorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:a}},__type__:{object:a}},moment:{"function":"function"},height:{string:i,number:r},hiddenDates:{start:{date:s,number:r,string:i,moment:l},end:{date:s,number:r,string:i,moment:l},repeat:{string:i},__type__:{object:a,array:o}},locale:{string:i},locales:{__any__:{any:c},__type__:{object:a}},max:{date:s,number:r,string:i,moment:l},maxHeight:{number:r,string:i},maxMinorChars:{number:r},min:{date:s,number:r,string:i,moment:l},minHeight:{number:r,string:i},moveable:{"boolean":n},multiselect:{"boolean":n},orientation:{string:i},showCurrentTime:{"boolean":n},showMajorLabels:{"boolean":n},showMinorLabels:{"boolean":n},start:{date:s,number:r,string:i,moment:l},timeAxis:{scale:{string:i,undefined:"undefined"},step:{number:r,undefined:"undefined"},__type__:{object:a}},width:{string:i,number:r},zoomable:{"boolean":n},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:r},zoomMin:{number:r},zIndex:{number:r},__type__:{object:a}},u={global:{sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,throttleRedraw:[10,0,1e3,10],clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};e.allOptions=d,e.configureOptions=u},function(t,e,i){e.util=i(1),e.DOMutil=i(8),e.DataSet=i(9),e.DataView=i(11),e.Queue=i(10),e.Network=i(61),e.network={Images:i(62),dotparser:i(118),gephiParser:i(119),allOptions:i(114)},e.network.convertDot=function(t){return e.network.dotparser.DOTToGraph(t)},e.network.convertGephi=function(t,i){return e.network.gephiParser.parseGephi(t,i)},e.moment=i(2),e.Hammer=i(20),e.keycharm=i(23)},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,i){var n=this;if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:V,clickToUse:!1},N.extend(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new s["default"](function(){return n.body.emitter.emit("_requestRedraw")}),this.groups=new h["default"],this.canvas=new b["default"](this.body),this.selectionHandler=new S["default"](this.body,this.canvas),this.interactionHandler=new _["default"](this.body,this.canvas,this.selectionHandler),this.view=new w["default"](this.body,this.canvas),this.renderer=new A["default"](this.body,this.canvas),this.physics=new p["default"](this.body),this.layoutEngine=new C["default"](this.body),this.clustering=new g["default"](this.body),this.manipulation=new M["default"](this.body,this.canvas,this.selectionHandler),this.nodesHandler=new c["default"](this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new u["default"](this.body,this.images,this.groups),this.body.modules.kamadaKawai=new B["default"](this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(e)}var o=i(62),s=n(o),a=i(63),h=n(a),l=i(64),c=n(l),d=i(84),u=n(d),f=i(93),p=n(f),m=i(102),g=n(m),v=i(105),A=n(v),y=i(106),b=n(y),E=i(107),w=n(E),x=i(108),_=n(x),T=i(111),S=n(T),R=i(112),C=n(R),k=i(113),M=n(k),H=i(26),P=n(H),D=i(29),O=n(D),L=i(114),I=i(115),B=n(I);i(117);var F=i(13),N=i(1),z=(i(9),i(11),i(118)),j=i(119),U=i(45),V=i(120);F(r.prototype),r.prototype.setOptions=function(t){var e=this;if(void 0!==t){var i=O["default"].validate(t,L.allOptions);i===!0&&console.log("%cErrors have been found in the supplied options object.",D.printStyle);var n=["locale","locales","clickToUse"];if(N.selectiveDeepExtend(n,this.options,t),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),void 0!==t.groups&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new P["default"](this,this.body.container,L.configureOptions,this.canvas.pixelRatio)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){var r={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};N.deepExtend(r.nodes,this.nodesHandler.options),N.deepExtend(r.edges,this.edgesHandler.options),N.deepExtend(r.layout,this.layoutEngine.options),N.deepExtend(r.interaction,this.selectionHandler.options),N.deepExtend(r.interaction,this.renderer.options),N.deepExtend(r.interaction,this.interactionHandler.options),N.deepExtend(r.manipulation,this.manipulation.options),N.deepExtend(r.physics,this.physics.options),N.deepExtend(r.global,this.canvas.options),N.deepExtend(r.global,this.options),this.configurator.setModuleOptions(r)}void 0!==t.clickToUse?t.clickToUse===!0?void 0===this.activator&&(this.activator=new U(this.canvas.frame),this.activator.on("change",function(){e.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},r.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var i in t)t.hasOwnProperty(i)&&t[i].options.hidden===!1&&this.body.nodeIndices.push(t[i].id);for(var n in e)e.hasOwnProperty(n)&&e[n].options.hidden===!1&&this.body.edgeIndices.push(e[n].id)},r.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",function(){t._updateVisibleIndices(),t.body.emitter.emit("_requestRedraw"),t.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")})},r.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.log("The dot property has been depricated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=z.DOTToGraph(t.dot);return void this.setData(e)}if(t&&t.gephi){console.log("The gephi property has been depricated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=j.parseGephi(t.gephi);return void this.setData(i)}this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},r.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var t in this.body.nodes)delete this.body.nodes[t];for(var e in this.body.edges)delete this.body.edges[e];N.recursiveDOMDelete(this.body.container)},r.prototype._updateValueRange=function(t){var e,i=void 0,n=void 0,r=0;for(e in t)if(t.hasOwnProperty(e)){var o=t[e].getValue();void 0!==o&&(i=void 0===i?o:Math.min(o,i),n=void 0===n?o:Math.max(o,n),r+=o)}if(void 0!==i&&void 0!==n)for(e in t)t.hasOwnProperty(e)&&t[e].setValueRange(i,n,r)},r.prototype.isActive=function(){return!this.activator||this.activator.active},r.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},r.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},r.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},r.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},r.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},r.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},r.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},r.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},r.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},r.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},r.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},r.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},r.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},r.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},r.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},r.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},r.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},r.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},r.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},r.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},r.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},r.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},r.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},r.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},r.prototype.getConnectedNodes=function(t){return void 0!==this.body.nodes[t]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},r.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},r.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},r.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},r.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},r.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},r.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},r.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},r.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments);
},r.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},r.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},r.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},r.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},r.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},r.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},r.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},r.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},r.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},r.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},r.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},r.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},r.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t},t.exports=r},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){i(this,t),this.images={},this.imageBroken={},this.callback=e}return n(t,[{key:"_addImageToCache",value:function(t,e){0===e.width&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e)),this.images[t]=e}},{key:"_tryloadBrokenUrl",value:function(t,e,i){var n=this;void 0!==t&&void 0!==e&&void 0!==i&&(i.onerror=function(){console.error("Could not load brokenImage:",e),n._addImageToCache(t,new Image)},i.src=e)}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,e,i){var n=this,r=this.images[t];if(r)return r;var o=new Image;return o.onload=function(){n._addImageToCache(t,o),n._redrawWithImage(o)},o.onerror=function(){console.error("Could not load image:",t),n._tryloadBrokenUrl(t,e,o)},o.src=t,o}}]),t}();e["default"]=r},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(1),s=function(){function t(){n(this,t),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},o.extend(this.options,this.defaultOptions)}return r(t,[{key:"setOptions",value:function(t){var e=["useDefaultGroups"];if(void 0!==t)for(var i in t)if(t.hasOwnProperty(i)&&-1===e.indexOf(i)){var n=t[i];this.add(i,n)}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(t){var e=this.groups[t];if(void 0===e)if(this.options.useDefaultGroups===!1&&this.groupsArray.length>0){var i=this.groupIndex%this.groupsArray.length;this.groupIndex++,e={},e.color=this.groups[this.groupsArray[i]],this.groups[t]=e}else{var n=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,e={},e.color=this.defaultGroups[n],this.groups[t]=e}return e}},{key:"add",value:function(t,e){return this.groups[t]=e,this.groupsArray.push(t),e}}]),t}();e["default"]=s},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(65),a=n(s),h=i(66),l=n(h),c=i(1),d=i(9),u=i(11),f=function(){function t(e,i,n,o){var s=this;r(this,t),this.body=e,this.images=i,this.groups=n,this.layoutEngine=o,this.body.functions.createNode=this.create.bind(this),this.nodesListeners={add:function(t,e){s.add(e.items)},update:function(t,e){s.update(e.items,e.data)},remove:function(t,e){s.remove(e.items)}},this.options={},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center"},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,label:void 0,labelHighlightBold:!0,level:void 0,mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,n){if(e===t)return.5;var r=1/(e-t);return Math.max(0,(n-t)*r)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},c.extend(this.options,this.defaultOptions),this.bindEventListeners()}return o(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){c.forEach(t.nodesListeners,function(e,i){t.body.data.nodes&&t.body.data.nodes.off(i,e)}),delete t.body.functions.createNode,delete t.nodesListeners.add,delete t.nodesListeners.update,delete t.nodesListeners.remove,delete t.nodesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){if(a["default"].parseOptions(this.options,t),void 0!==t.shape)for(var e in this.body.nodes)this.body.nodes.hasOwnProperty(e)&&this.body.nodes[e].updateShape();if(void 0!==t.font){l["default"].parseOptions(this.options.font,t);for(var i in this.body.nodes)this.body.nodes.hasOwnProperty(i)&&(this.body.nodes[i].updateLabelModule(),this.body.nodes[i]._reset())}if(void 0!==t.size)for(var n in this.body.nodes)this.body.nodes.hasOwnProperty(n)&&this.body.nodes[n]._reset();void 0===t.hidden&&void 0===t.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=this.body.data.nodes;if(t instanceof d||t instanceof u)this.body.data.nodes=t;else if(Array.isArray(t))this.body.data.nodes=new d,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new d}n&&c.forEach(this.nodesListeners,function(t,e){n.off(e,t)}),this.body.nodes={},this.body.data.nodes&&!function(){var t=e;c.forEach(e.nodesListeners,function(e,i){t.body.data.nodes.on(i,e)});var i=e.body.data.nodes.getIds();e.add(i,!0)}(),i===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=void 0,n=[],r=0;r<t.length;r++){i=t[r];var o=this.body.data.nodes.get(i),s=this.create(o);n.push(s),this.body.nodes[i]=s}this.layoutEngine.positionInitially(n),e===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,e){for(var i=this.body.nodes,n=!1,r=0;r<t.length;r++){var o=t[r],s=i[o],a=e[r];void 0!==s?n=s.setOptions(a):(n=!0,s=this.create(a),i[o]=s)}n===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e=this.body.nodes,i=0;i<t.length;i++){var n=t[i];delete e[n]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?a["default"]:arguments[1];return new e(t,this.body,this.images,this.groups,this.options)}},{key:"refresh",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],e=this.body.nodes;for(var i in e){var n=void 0;e.hasOwnProperty(i)&&(n=e[i]);var r=this.body.data.nodes._data[i];void 0!==n&&void 0!==r&&(t===!0&&n.setOptions({x:null,y:null}),n.setOptions({fixed:!1}),n.setOptions(r))}}},{key:"getPositions",value:function(t){var e={};if(void 0!==t){if(Array.isArray(t)===!0){for(var i=0;i<t.length;i++)if(void 0!==this.body.nodes[t[i]]){var n=this.body.nodes[t[i]];e[t[i]]={x:Math.round(n.x),y:Math.round(n.y)}}}else if(void 0!==this.body.nodes[t]){var r=this.body.nodes[t];e[t]={x:Math.round(r.x),y:Math.round(r.y)}}}else for(var o=0;o<this.body.nodeIndices.length;o++){var s=this.body.nodes[this.body.nodeIndices[o]];e[this.body.nodeIndices[o]]={x:Math.round(s.x),y:Math.round(s.y)}}return e}},{key:"storePositions",value:function(){var t=[],e=this.body.data.nodes.getDataSet();for(var i in e._data)if(e._data.hasOwnProperty(i)){var n=this.body.nodes[i];e._data[i].x==Math.round(n.x)&&e._data[i].y==Math.round(n.y)||t.push({id:n.id,x:Math.round(n.x),y:Math.round(n.y)})}e.update(t)}},{key:"getBoundingBox",value:function(t){return void 0!==this.body.nodes[t]?this.body.nodes[t].shape.boundingBox:void 0}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var i=this.body.nodes[t],n={},r=0;r<i.edges.length;r++){var o=i.edges[r];o.toId==i.id?void 0===n[o.fromId]&&(e.push(o.fromId),n[o.fromId]=!0):o.fromId==i.id&&void 0===n[o.toId]&&(e.push(o.toId),n[o.toId]=!0)}return e}},{key:"getConnectedEdges",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var i=this.body.nodes[t],n=0;n<i.edges.length;n++)e.push(i.edges[n].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}},{key:"moveNode",value:function(t,e,i){var n=this;void 0!==this.body.nodes[t]?(this.body.nodes[t].x=Number(e),this.body.nodes[t].y=Number(i),setTimeout(function(){n.body.emitter.emit("startSimulation")},0)):console.log("Node id supplied to moveNode does not exist. Provided: ",t)}}]),t}();e["default"]=f},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(66),a=n(s),h=i(67),l=n(h),c=i(69),d=n(c),u=i(71),f=n(u),p=i(72),m=n(p),g=i(73),v=n(g),A=i(75),y=n(A),b=i(76),E=n(b),w=i(77),x=n(w),_=i(78),T=n(_),S=i(79),R=n(S),C=i(80),k=n(C),M=i(81),H=n(M),P=i(82),D=n(P),O=i(83),L=n(O),I=i(29),B=(n(I),i(1)),F=function(){function t(e,i,n,o,s){r(this,t),this.options=B.bridgeObject(s),this.globalOptions=s,this.body=i,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=o,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new a["default"](this.body,this.options,!1),this.setOptions(e)}return o(t,[{key:"attachEdge",value:function(t){-1===this.edges.indexOf(t)&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var e=this.edges.indexOf(t);-1!=e&&this.edges.splice(e,1)}},{key:"setOptions",value:function(e){var i=this.options.shape;if(e){if(void 0!==e.id&&(this.id=e.id),void 0===this.id)throw"Node must have an id";if(void 0!==e.x&&(null===e.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=parseInt(e.x),this.predefinedPosition=!0)),void 0!==e.y&&(null===e.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=parseInt(e.y),this.predefinedPosition=!0)),void 0!==e.size&&(this.baseSize=e.size),void 0!==e.value&&(e.value=parseFloat(e.value)),"number"==typeof e.group||"string"==typeof e.group&&""!=e.group){var n=this.grouplist.get(e.group);B.deepExtend(this.options,n),this.options.color=B.parseColor(this.options.color)}if(t.parseOptions(this.options,e,!0,this.globalOptions),void 0!==this.options.image){if(!this.imagelist)throw"No imagelist provided";this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id)}return this.updateLabelModule(),this.updateShape(i),void 0!==e.hidden||void 0!==e.physics}}},{key:"updateLabelModule",value:function(){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),this.labelModule.setOptions(this.options,!0),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj);else switch(this.options.shape){case"box":this.shape=new l["default"](this.options,this.body,this.labelModule);break;case"circle":this.shape=new d["default"](this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new f["default"](this.options,this.body,this.labelModule,this.imageObj);break;case"database":this.shape=new m["default"](this.options,this.body,this.labelModule);break;case"diamond":this.shape=new v["default"](this.options,this.body,this.labelModule);break;case"dot":this.shape=new y["default"](this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new E["default"](this.options,this.body,this.labelModule);break;case"icon":this.shape=new x["default"](this.options,this.body,this.labelModule);break;case"image":this.shape=new T["default"](this.options,this.body,this.labelModule,this.imageObj);break;case"square":this.shape=new R["default"](this.options,this.body,this.labelModule);break;case"star":this.shape=new k["default"](this.options,this.body,this.labelModule);break;case"text":this.shape=new H["default"](this.options,this.body,this.labelModule);break;case"triangle":this.shape=new D["default"](this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new L["default"](this.options,this.body,this.labelModule);break;default:this.shape=new E["default"](this.options,this.body,this.labelModule)}this._reset()}},{key:"select",value:function(){this.selected=!0,this._reset()}},{key:"unselect",value:function(){this.selected=!1,this._reset()}},{key:"_reset",value:function(){this.shape.width=void 0,this.shape.height=void 0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,e){return this.shape.distanceToBorder(t,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.size=this.options.scaling.min+n*r}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){this.shape.draw(t,this.x,this.y,this.selected,this.hover)}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){this.shape.resize(t,this.selected)}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"parseOptions",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],r=["color","font","fixed","shadow"];if(B.selectiveNotDeepExtend(r,t,e,i),B.mergeOptions(t,e,"shadow",i,n),void 0!==e.color&&null!==e.color){var o=B.parseColor(e.color);B.fillIfDefined(t.color,o)}else i===!0&&null===e.color&&(t.color=B.bridgeObject(n.color));void 0!==e.fixed&&null!==e.fixed&&("boolean"==typeof e.fixed?(t.fixed.x=e.fixed,t.fixed.y=e.fixed):(void 0!==e.fixed.x&&"boolean"==typeof e.fixed.x&&(t.fixed.x=e.fixed.x),void 0!==e.fixed.y&&"boolean"==typeof e.fixed.y&&(t.fixed.y=e.fixed.y))),void 0!==e.font&&null!==e.font?a["default"].parseOptions(t.font,e):i===!0&&null===e.font&&(t.font=B.bridgeObject(n.font)),void 0!==e.scaling&&B.mergeOptions(t.scaling,e.scaling,"label",i,n.scaling)}}]),t}();e["default"]=F},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(h){r=!0,o=h}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(1),h=function(){function t(e,i){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];n(this,t),this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(i),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=r}return s(t,[{key:"setOptions",value:function(e){var i=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];this.nodeOptions=e,this.fontOptions=a.deepExtend({},e.font,!0),void 0!==e.label&&(this.labelDirty=!0),void 0!==e.font&&(t.parseOptions(this.fontOptions,e,i),"string"==typeof e.font?this.baseSize=this.fontOptions.size:"object"===o(e.font)&&void 0!==e.font.size&&(this.baseSize=e.font.size))}},{key:"draw",value:function(t,e,i,n){var r=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4];if(void 0!==this.nodeOptions.label){var o=this.fontOptions.size*this.body.view.scale;this.nodeOptions.label&&o<this.nodeOptions.scaling.label.drawThreshold-1||(this.calculateLabelSize(t,n,e,i,r),this._drawBackground(t),this._drawText(t,n,e,i,r))}}},{key:"_drawBackground",value:function(t){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){t.fillStyle=this.fontOptions.background;var e=2;if(this.isEdgeLabel)switch(this.fontOptions.align){case"middle":t.fillRect(.5*-this.size.width,.5*-this.size.height,this.size.width,this.size.height);break;case"top":t.fillRect(.5*-this.size.width,-(this.size.height+e),this.size.width,this.size.height);break;case"bottom":t.fillRect(.5*-this.size.width,e,this.size.width,this.size.height);break;default:t.fillRect(this.size.left,this.size.top-.5*e,this.size.width,this.size.height)}else t.fillRect(this.size.left,this.size.top-.5*e,this.size.width,this.size.height)}}},{key:"_drawText",value:function(t,e,i,n){var o=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4],s=this.fontOptions.size,a=s*this.body.view.scale;a>=this.nodeOptions.scaling.label.maxVisible&&(s=Number(this.nodeOptions.scaling.label.maxVisible)/this.body.view.scale);var h=this.size.yLine,l=this._getColor(a),c=r(l,2),d=c[0],u=c[1],f=this._setAlignment(t,i,h,o),p=r(f,2);i=p[0],h=p[1],t.font=(e&&this.nodeOptions.labelHighlightBold?"bold ":"")+s+"px "+this.fontOptions.face,t.fillStyle=d,this.isEdgeLabel||"left"!==this.fontOptions.align?t.textAlign="center":(t.textAlign=this.fontOptions.align,i-=.5*this.size.width),this.fontOptions.strokeWidth>0&&(t.lineWidth=this.fontOptions.strokeWidth,t.strokeStyle=u,t.lineJoin="round");for(var m=0;m<this.lineCount;m++)this.fontOptions.strokeWidth>0&&t.strokeText(this.lines[m],i,h),t.fillText(this.lines[m],i,h),h+=s}},{key:"_setAlignment",value:function(t,e,i,n){if(this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&this.pointToSelf===!1){e=0,i=0;var r=2;"top"===this.fontOptions.align?(t.textBaseline="alphabetic",i-=2*r):"bottom"===this.fontOptions.align?(t.textBaseline="hanging",i+=2*r):t.textBaseline="middle"}else t.textBaseline=n;return[e,i]}},{key:"_getColor",value:function(t){var e=this.fontOptions.color||"#000000",i=this.fontOptions.strokeColor||"#ffffff";if(t<=this.nodeOptions.scaling.label.drawThreshold){var n=Math.max(0,Math.min(1,1-(this.nodeOptions.scaling.label.drawThreshold-t)));e=a.overrideOpacity(e,n),i=a.overrideOpacity(i,n)}return[e,i]}},{key:"getTextSize",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i={width:this._processLabel(t,e),height:this.fontOptions.size*this.lineCount,lineCount:this.lineCount};return i}},{key:"calculateLabelSize",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3],r=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4];this.labelDirty===!0&&(this.size.width=this._processLabel(t,e)),this.size.height=this.fontOptions.size*this.lineCount,this.size.left=i-.5*this.size.width,this.size.top=n-.5*this.size.height,this.size.yLine=n+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===r&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4),this.labelDirty=!1}},{key:"_processLabel",value:function(t,e){var i=0,n=[""],r=0;if(void 0!==this.nodeOptions.label){n=String(this.nodeOptions.label).split("\n"),r=n.length,t.font=(e&&this.nodeOptions.labelHighlightBold?"bold ":"")+this.fontOptions.size+"px "+this.fontOptions.face,i=t.measureText(n[0]).width;for(var o=1;r>o;o++){var s=t.measureText(n[o]).width;i=s>i?s:i}}return this.lines=n,this.lineCount=r,i}}],[{key:"parseOptions",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if("string"==typeof e.font){var n=e.font.split(" ");t.size=n[0].replace("px",""),t.face=n[1],t.color=n[2]}else"object"===o(e.font)&&a.fillIfDefined(t,e.font,i);t.size=Number(t.size)}}]),t}();e["default"]=h},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(68),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(t,e){if(void 0===this.width){var i=5,n=this.labelModule.getTextSize(t,e);this.width=n.width+2*i,this.height=n.height+2*i,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,n,r){this.resize(t,n),this.left=e-this.width/2,this.top=i-this.height/2;var o=this.options.borderWidth,s=this.options.borderWidthSelected||2*this.options.borderWidth;t.strokeStyle=n?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,t.lineWidth=n?s:o,t.lineWidth/=this.body.view.scale,t.lineWidth=Math.min(this.width,t.lineWidth),t.fillStyle=n?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background;var a=this.options.shapeProperties.borderRadius;t.roundRect(this.left,this.top,this.width,this.height,a),this.enableShadow(t),t.fill(),this.disableShadow(t),t.save(),o>0&&(this.enableBorderDashes(t),t.stroke(),this.disableBorderDashes(t)),t.restore(),this.updateBoundingBox(e,i,t,n),this.labelModule.draw(t,e,i,n)}},{key:"updateBoundingBox",value:function(t,e,i,n){this.resize(i,n),this.left=t-.5*this.width,this.top=e-.5*this.height;var r=this.options.shapeProperties.borderRadius;this.boundingBox.left=this.left-r,this.boundingBox.top=this.top-r,this.boundingBox.bottom=this.top+this.height+r,this.boundingBox.right=this.left+this.width+r}},{key:"distanceToBorder",value:function(t,e){this.resize(t);var i=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}}]),e}(l["default"]);e["default"]=c},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,n,r){i(this,t),this.body=n,this.labelModule=r,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return n(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"_distanceToBorder",value:function(t,e){var i=this.options.borderWidth;return this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}},{key:"enableShadow",value:function(t){this.options.shadow.enabled===!0&&(t.shadowColor=this.options.shadow.color,t.shadowBlur=this.options.shadow.size,t.shadowOffsetX=this.options.shadow.x,t.shadowOffsetY=this.options.shadow.y)}},{key:"disableShadow",value:function(t){this.options.shadow.enabled===!0&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t){if(this.options.shapeProperties.borderDashes!==!1)if(void 0!==t.setLineDash){var e=this.options.shapeProperties.borderDashes;e===!0&&(e=[5,15]),t.setLineDash(e)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1}},{key:"disableBorderDashes",value:function(t){this.options.shapeProperties.borderDashes!==!1&&(void 0!==t.setLineDash?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1))}}]),t}();e["default"]=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(70),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(t,e){if(void 0===this.width){var i=5,n=this.labelModule.getTextSize(t,e),r=Math.max(n.width,n.height)+2*i;this.options.size=r/2,this.width=r,this.height=r,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,n,r){this.resize(t,n),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,n,r,this.options.size),this.boundingBox.top=i-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=i+this.options.size,this.updateBoundingBox(e,i),
this.labelModule.draw(t,e,i,n)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size}},{key:"distanceToBorder",value:function(t,e){return this.resize(t),.5*this.width}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(68),l=n(h),c=function(t){function e(t,i,n){r(this,e);var s=o(this,Object.getPrototypeOf(e).call(this,t,i,n));return s.labelOffset=0,s.imageLoaded=!1,s}return s(e,t),a(e,[{key:"setOptions",value:function(t,e){this.options=t,e&&(this.imageObj=e)}},{key:"_resizeImage",value:function(){var t=!1;if(this.imageObj.width&&this.imageObj.height?this.imageLoaded===!1&&(this.imageLoaded=!0,t=!0):this.imageLoaded=!1,!this.width||!this.height||t===!0){var e,i,n;this.imageObj.width&&this.imageObj.height&&(e=0,i=0),this.options.shapeProperties.useImageSize===!1?this.imageObj.width>this.imageObj.height?(n=this.imageObj.width/this.imageObj.height,e=2*this.options.size*n||this.imageObj.width,i=2*this.options.size||this.imageObj.height):(n=this.imageObj.width&&this.imageObj.height?this.imageObj.height/this.imageObj.width:1,e=2*this.options.size,i=2*this.options.size*n):(e=this.imageObj.width,i=this.imageObj.height),this.width=e,this.height=i,this.radius=.5*this.width}}},{key:"_drawRawCircle",value:function(t,e,i,n,r,o){var s=this.options.borderWidth,a=this.options.borderWidthSelected||2*this.options.borderWidth,h=(n?a:s)/this.body.view.scale;t.lineWidth=Math.min(this.width,h),t.strokeStyle=n?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,t.fillStyle=n?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background,t.circle(e,i,o),this.enableShadow(t),t.fill(),this.disableShadow(t),t.save(),h>0&&(this.enableBorderDashes(t),t.stroke(),this.disableBorderDashes(t)),t.restore()}},{key:"_drawImageAtPosition",value:function(t){if(0!=this.imageObj.width){t.globalAlpha=1,this.enableShadow(t);var e=this.imageObj.width/this.width/this.body.view.scale;if(e>2&&this.options.shapeProperties.interpolation===!0){var i=this.imageObj.width,n=this.imageObj.height,r=document.createElement("canvas");r.width=i,r.height=i;var o=r.getContext("2d");e*=.5,i*=.5,n*=.5,o.drawImage(this.imageObj,0,0,i,n);for(var s=0,a=1;e>2&&4>a;)o.drawImage(r,s,0,i,n,s+i,0,i/2,n/2),s+=i,e*=.5,i*=.5,n*=.5,a+=1;t.drawImage(r,s,0,i,n,this.left,this.top,this.width,this.height)}else t.drawImage(this.imageObj,this.left,this.top,this.width,this.height);this.disableShadow(t)}}},{key:"_drawImageLabel",value:function(t,e,i,n){var r,o=0;if(void 0!==this.height){o=.5*this.height;var s=this.labelModule.getTextSize(t);s.lineCount>=1&&(o+=s.height/2)}r=i+o,this.options.label&&(this.labelOffset=o),this.labelModule.draw(t,e,r,n,"hanging")}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(70),l=n(h),c=function(t){function e(t,i,n,s){r(this,e);var a=o(this,Object.getPrototypeOf(e).call(this,t,i,n));return a.imageObj=s,a._swapToImageResizeWhenImageLoaded=!0,a}return s(e,t),a(e,[{key:"resize",value:function(){if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){if(!this.width){var t=2*this.options.size;this.width=t,this.height=t,this._swapToImageResizeWhenImageLoaded=!0,this.radius=.5*this.width}}else this._swapToImageResizeWhenImageLoaded&&(this.width=void 0,this.height=void 0,this._swapToImageResizeWhenImageLoaded=!1),this._resizeImage()}},{key:"draw",value:function(t,e,i,n,r){this.resize(),this.left=e-this.width/2,this.top=i-this.height/2;var o=Math.min(.5*this.height,.5*this.width);this._drawRawCircle(t,e,i,n,r,o),t.save(),t.clip(),this._drawImageAtPosition(t),t.restore(),this._drawImageLabel(t,e,i,n),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(t,e){return this.resize(t),.5*this.width}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(68),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(t,e){if(void 0===this.width){var i=5,n=this.labelModule.getTextSize(t,e),r=n.width+2*i;this.width=r,this.height=r,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,n,r){this.resize(t,n),this.left=e-this.width/2,this.top=i-this.height/2;var o=this.options.borderWidth,s=this.options.borderWidthSelected||2*this.options.borderWidth,a=(n?s:o)/this.body.view.scale;t.lineWidth=Math.min(this.width,a),t.strokeStyle=n?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,t.fillStyle=n?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background,t.database(e-this.width/2,i-.5*this.height,this.width,this.height),this.enableShadow(t),t.fill(),this.disableShadow(t),t.save(),a>0&&(this.enableBorderDashes(t),t.stroke(),this.disableBorderDashes(t)),t.restore(),this.updateBoundingBox(e,i,t,n),this.labelModule.draw(t,e,i,n)}},{key:"updateBoundingBox",value:function(t,e,i,n){this.resize(i,n),this.left=t-.5*this.width,this.top=e-.5*this.height,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(74),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(t){this._resizeShape()}},{key:"draw",value:function(t,e,i,n,r){this._drawShape(t,"diamond",4,e,i,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(68),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"_resizeShape",value:function(){if(void 0===this.width){var t=2*this.options.size;this.width=t,this.height=t,this.radius=.5*this.width}}},{key:"_drawShape",value:function(t,e,i,n,r,o,s){this._resizeShape(),this.left=n-this.width/2,this.top=r-this.height/2;var a=this.options.borderWidth,h=this.options.borderWidthSelected||2*this.options.borderWidth,l=(o?h:a)/this.body.view.scale;if(t.lineWidth=Math.min(this.width,l),t.strokeStyle=o?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,t.fillStyle=o?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background,t[e](n,r,this.options.size),this.enableShadow(t),t.fill(),this.disableShadow(t),t.save(),l>0&&(this.enableBorderDashes(t),t.stroke(),this.disableBorderDashes(t)),t.restore(),void 0!==this.options.label){var c=r+.5*this.height+3;this.labelModule.draw(t,n,c,o,"hanging")}this.updateBoundingBox(n,r)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+3))}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(74),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(t){this._resizeShape()}},{key:"draw",value:function(t,e,i,n,r){this._drawShape(t,"circle",2,e,i,n,r)}},{key:"distanceToBorder",value:function(t,e){return this.resize(t),this.options.size}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(68),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(t,e){if(void 0===this.width){var i=this.labelModule.getTextSize(t,e);this.width=1.5*i.width,this.height=2*i.height,this.width<this.height&&(this.width=this.height),this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,n,r){this.resize(t,n),this.left=e-.5*this.width,this.top=i-.5*this.height;var o=this.options.borderWidth,s=this.options.borderWidthSelected||2*this.options.borderWidth,a=(n?s:o)/this.body.view.scale;t.lineWidth=Math.min(this.width,a),t.strokeStyle=n?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,t.fillStyle=n?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background,t.ellipse(this.left,this.top,this.width,this.height),this.enableShadow(t),t.fill(),this.disableShadow(t),t.save(),a>0&&(this.enableBorderDashes(t),t.stroke(),this.disableBorderDashes(t)),t.restore(),this.updateBoundingBox(e,i,t,n),this.labelModule.draw(t,e,i,n)}},{key:"updateBoundingBox",value:function(t,e,i,n){this.resize(i,n),this.left=t-.5*this.width,this.top=e-.5*this.height,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function(t,e){this.resize(t);var i=.5*this.width,n=.5*this.height,r=Math.sin(e)*i,o=Math.cos(e)*n;return i*n/Math.sqrt(r*r+o*o)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(68),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(t){if(void 0===this.width){var e=5,i={width:Number(this.options.icon.size),height:Number(this.options.icon.size)};this.width=i.width+2*e,this.height=i.height+2*e,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,n,r){if(this.resize(t),this.options.icon.size=this.options.icon.size||50,this.left=e-.5*this.width,this.top=i-.5*this.height,this._icon(t,e,i,n),void 0!==this.options.label){var o=5;this.labelModule.draw(t,e,i+.5*this.height+o,n)}this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){if(this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0){var i=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+i)}}},{key:"_icon",value:function(t,e,i,n){var r=Number(this.options.icon.size);void 0!==this.options.icon.code?(t.font=(n?"bold ":"")+r+"px "+this.options.icon.face,t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t),t.fillText(this.options.icon.code,e,i),this.disableShadow(t)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(70),l=n(h),c=function(t){function e(t,i,n,s){r(this,e);var a=o(this,Object.getPrototypeOf(e).call(this,t,i,n));return a.imageObj=s,a}return s(e,t),a(e,[{key:"resize",value:function(){this._resizeImage()}},{key:"draw",value:function(t,e,i,n,r){if(this.resize(),this.left=e-this.width/2,this.top=i-this.height/2,this.options.shapeProperties.useBorderWithImage===!0){var o=this.options.borderWidth,s=this.options.borderWidthSelected||2*this.options.borderWidth,a=(n?s:o)/this.body.view.scale;t.lineWidth=Math.min(this.width,a),t.beginPath(),t.strokeStyle=n?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,t.fillStyle=n?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background,t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth),t.fill(),t.save(),a>0&&(this.enableBorderDashes(t),t.stroke(),this.disableBorderDashes(t)),t.restore(),t.closePath()}this._drawImageAtPosition(t),this._drawImageLabel(t,e,i,n||r),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.resize(),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(74),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(){this._resizeShape()}},{key:"draw",value:function(t,e,i,n,r){this._drawShape(t,"square",2,e,i,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(74),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(t){this._resizeShape()}},{key:"draw",value:function(t,e,i,n,r){this._drawShape(t,"star",4,e,i,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(68),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(t,e){if(void 0===this.width){var i=5,n=this.labelModule.getTextSize(t,e);this.width=n.width+2*i,this.height=n.height+2*i,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,n,r){this.resize(t,n||r),this.left=e-this.width/2,this.top=i-this.height/2,this.enableShadow(t),this.labelModule.draw(t,e,i,n||r),this.disableShadow(t),this.updateBoundingBox(e,i,t,n)}},{key:"updateBoundingBox",value:function(t,e,i,n){this.resize(i,n),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(74),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(t){this._resizeShape()}},{key:"draw",value:function(t,e,i,n,r){this._drawShape(t,"triangle",3,e,i,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(74),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"resize",value:function(t){this._resizeShape()}},{key:"draw",value:function(t,e,i,n,r){this._drawShape(t,"triangleDown",3,e,i,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(85),a=n(s),h=i(66),l=n(h),c=i(1),d=i(9),u=i(11),f=function(){function t(e,i,n){var o=this;r(this,t),this.body=e,this.images=i,this.groups=n,this.body.functions.createEdge=this.create.bind(this),this.edgesListeners={add:function(t,e){o.add(e.items)},update:function(t,e){o.update(e.items)},remove:function(t,e){o.remove(e.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1},middle:{enabled:!1,scaleFactor:1},from:{enabled:!1,scaleFactor:1}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal"},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,n){if(e===t)return.5;var r=1/(e-t);return Math.max(0,(n-t)*r)}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},c.extend(this.options,this.defaultOptions),this.bindEventListeners()}return o(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_forceDisableDynamicCurves",function(e){"dynamic"===e&&(e="continuous");var i=!1;for(var n in t.body.edges)if(t.body.edges.hasOwnProperty(n)){var r=t.body.edges[n],o=t.body.data.edges._data[n];if(void 0!==o){var s=o.smooth;void 0!==s&&s.enabled===!0&&"dynamic"===s.type&&(void 0===e?r.setOptions({smooth:!1}):r.setOptions({smooth:{type:e}}),i=!0)}}i===!0&&t.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){t.reconnectEdges(),t.markAllEdgesAsDirty()}),this.body.emitter.on("refreshEdges",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){c.forEach(t.edgesListeners,function(e,i){t.body.data.edges&&t.body.data.edges.off(i,e)}),delete t.body.functions.createEdge,delete t.edgesListeners.add,delete t.edgesListeners.update,delete t.edgesListeners.remove,delete t.edgesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){a["default"].parseOptions(this.options,t),
void 0!==t.color&&this.markAllEdgesAsDirty();var e=!1;if(void 0!==t.smooth)for(var i in this.body.edges)this.body.edges.hasOwnProperty(i)&&(e=this.body.edges[i].updateEdgeType()||e);if(void 0!==t.font){l["default"].parseOptions(this.options.font,t);for(var n in this.body.edges)this.body.edges.hasOwnProperty(n)&&this.body.edges[n].updateLabelModule()}void 0===t.hidden&&void 0===t.physics&&e!==!0||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=this.body.data.edges;if(t instanceof d||t instanceof u)this.body.data.edges=t;else if(Array.isArray(t))this.body.data.edges=new d,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new d}if(n&&c.forEach(this.edgesListeners,function(t,e){n.off(e,t)}),this.body.edges={},this.body.data.edges){c.forEach(this.edgesListeners,function(t,i){e.body.data.edges.on(i,t)});var r=this.body.data.edges.getIds();this.add(r,!0)}i===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=this.body.edges,n=this.body.data.edges,r=0;r<t.length;r++){var o=t[r],s=i[o];s&&s.disconnect();var a=n.get(o,{showInternalIds:!0});i[o]=this.create(a)}e===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var e=this.body.edges,i=this.body.data.edges,n=!1,r=0;r<t.length;r++){var o=t[r],s=i.get(o),a=e[o];void 0!==a?(a.disconnect(),n=a.setOptions(s)||n,a.connect()):(this.body.edges[o]=this.create(s),n=!0)}n===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e=this.body.edges,i=0;i<t.length;i++){var n=t[i],r=e[n];void 0!==r&&(r.cleanup(),r.disconnect(),delete e[n])}this.body.emitter.emit("_dataChanged")}},{key:"refresh",value:function(){var t=this.body.edges;for(var e in t){var i=void 0;t.hasOwnProperty(e)&&(i=t[e]);var n=this.body.data.edges._data[e];void 0!==i&&void 0!==n&&i.setOptions(n)}}},{key:"create",value:function(t){return new a["default"](t,this.body,this.options)}},{key:"markAllEdgesAsDirty",value:function(){for(var t in this.body.edges)this.body.edges[t].edgeType.colorDirty=!0}},{key:"reconnectEdges",value:function(){var t,e=this.body.nodes,i=this.body.edges;for(t in e)e.hasOwnProperty(t)&&(e[t].edges=[]);for(t in i)if(i.hasOwnProperty(t)){var n=i[t];n.from=null,n.to=null,n.connect()}}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.edges[t]){var i=this.body.edges[t];i.fromId&&e.push(i.fromId),i.toId&&e.push(i.toId)}return e}}]),t}();e["default"]=f},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(66),h=n(a),l=i(86),c=n(l),d=i(90),u=n(d),f=i(91),p=n(f),m=i(92),g=n(m),v=i(1),A=function(){function t(e,i,n){if(r(this,t),void 0===i)throw"No body provided";this.options=v.bridgeObject(n),this.globalOptions=n,this.body=i,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.colorDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new h["default"](this.body,this.options,!0),this.setOptions(e)}return s(t,[{key:"setOptions",value:function(e){if(e){this.colorDirty=!0,t.parseOptions(this.options,e,!0,this.globalOptions),void 0!==e.id&&(this.id=e.id),void 0!==e.from&&(this.fromId=e.from),void 0!==e.to&&(this.toId=e.to),void 0!==e.title&&(this.title=e.title),void 0!==e.value&&(e.value=parseFloat(e.value)),this.updateLabelModule();var i=this.updateEdgeType();return this._setInteractionWidths(),this.connect(),void 0===e.hidden&&void 0===e.physics||(i=!0),i}}},{key:"updateLabelModule",value:function(){this.labelModule.setOptions(this.options,!0),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=!1,e=!0,i=this.options.smooth;return void 0!==this.edgeType&&(this.edgeType instanceof u["default"]&&i.enabled===!0&&"dynamic"===i.type&&(e=!1),this.edgeType instanceof c["default"]&&i.enabled===!0&&"cubicBezier"===i.type&&(e=!1),this.edgeType instanceof p["default"]&&i.enabled===!0&&"dynamic"!==i.type&&"cubicBezier"!==i.type&&(e=!1),this.edgeType instanceof g["default"]&&i.enabled===!1&&(e=!1),e===!0&&(t=this.cleanup())),e===!0?this.options.smooth.enabled===!0?"dynamic"===this.options.smooth.type?(t=!0,this.edgeType=new u["default"](this.options,this.body,this.labelModule)):"cubicBezier"===this.options.smooth.type?this.edgeType=new c["default"](this.options,this.body,this.labelModule):this.edgeType=new p["default"](this.options,this.body,this.labelModule):this.edgeType=new g["default"](this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),t}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.width=this.options.scaling.min+n*r}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var e=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,this.options.arrows.from.enabled===!0&&(i.from=this.edgeType.getArrowData(t,"from",e,this.selected,this.hover),this.options.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core)),this.options.arrows.to.enabled===!0&&(i.to=this.edgeType.getArrowData(t,"to",e,this.selected,this.hover),this.options.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core)),this.options.arrows.middle.enabled===!0&&(i.middle=this.edgeType.getArrowData(t,"middle",e,this.selected,this.hover)),this.edgeType.drawLine(t,this.selected,this.hover,e),this.drawArrows(t,i),this.drawLabel(t,e)}},{key:"drawArrows",value:function(t,e){this.options.arrows.from.enabled===!0&&this.edgeType.drawArrowHead(t,this.selected,this.hover,e.from),this.options.arrows.middle.enabled===!0&&this.edgeType.drawArrowHead(t,this.selected,this.hover,e.middle),this.options.arrows.to.enabled===!0&&this.edgeType.drawArrowHead(t,this.selected,this.hover,e.to)}},{key:"drawLabel",value:function(t,e){if(void 0!==this.options.label){var i=this.from,n=this.to,r=this.from.selected||this.to.selected||this.selected;if(i.id!=n.id){this.labelModule.pointToSelf=!1;var o=this.edgeType.getPoint(.5,e);t.save(),"horizontal"!==this.options.font.align&&(this.labelModule.calculateLabelSize(t,r,o.x,o.y),t.translate(o.x,this.labelModule.size.yLine),this._rotateForLabelAlignment(t)),this.labelModule.draw(t,o.x,o.y,r),t.restore()}else{this.labelModule.pointToSelf=!0;var s,a,h=this.options.selfReferenceSize;i.shape.width>i.shape.height?(s=i.x+.5*i.shape.width,a=i.y-h):(s=i.x+h,a=i.y-.5*i.shape.height),o=this._pointOnCircle(s,a,h,.125),this.labelModule.draw(t,o.x,o.y,r)}}}},{key:"isOverlappingWith",value:function(t){if(this.connected){var e=10,i=this.from.x,n=this.from.y,r=this.to.x,o=this.to.y,s=t.left,a=t.top,h=this.edgeType.getDistanceToEdge(i,n,r,o,s,a);return e>h}return!1}},{key:"_rotateForLabelAlignment",value:function(t){var e=this.from.y-this.to.y,i=this.from.x-this.to.x,n=Math.atan2(e,i);(-1>n&&0>i||n>0&&0>i)&&(n+=Math.PI),t.rotate(n)}},{key:"_pointOnCircle",value:function(t,e,i,n){var r=2*n*Math.PI;return{x:t+i*Math.cos(r),y:e-i*Math.sin(r)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}}],[{key:"parseOptions",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],r=["arrowStrikethrough","id","from","hidden","hoverWidth","label","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","to","title","value","width"];if(v.selectiveDeepExtend(r,t,e,i),v.mergeOptions(t,e,"smooth",i,n),v.mergeOptions(t,e,"shadow",i,n),void 0!==e.dashes&&null!==e.dashes?t.dashes=e.dashes:i===!0&&null===e.dashes&&(t.dashes=Object.create(n.dashes)),void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(t.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(t.scaling.max=e.scaling.max),v.mergeOptions(t.scaling,e.scaling,"label",i,n.scaling)):i===!0&&null===e.scaling&&(t.scaling=Object.create(n.scaling)),void 0!==e.arrows&&null!==e.arrows)if("string"==typeof e.arrows){var s=e.arrows.toLowerCase();t.arrows.to.enabled=-1!=s.indexOf("to"),t.arrows.middle.enabled=-1!=s.indexOf("middle"),t.arrows.from.enabled=-1!=s.indexOf("from")}else{if("object"!==o(e.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+JSON.stringify(e.arrows));v.mergeOptions(t.arrows,e.arrows,"to",i,n.arrows),v.mergeOptions(t.arrows,e.arrows,"middle",i,n.arrows),v.mergeOptions(t.arrows,e.arrows,"from",i,n.arrows)}else i===!0&&null===e.arrows&&(t.arrows=Object.create(n.arrows));if(void 0!==e.color&&null!==e.color)if(t.color=v.deepExtend({},t.color,!0),v.isString(e.color))t.color.color=e.color,t.color.highlight=e.color,t.color.hover=e.color,t.color.inherit=!1;else{var a=!1;void 0!==e.color.color&&(t.color.color=e.color.color,a=!0),void 0!==e.color.highlight&&(t.color.highlight=e.color.highlight,a=!0),void 0!==e.color.hover&&(t.color.hover=e.color.hover,a=!0),void 0!==e.color.inherit&&(t.color.inherit=e.color.inherit),void 0!==e.color.opacity&&(t.color.opacity=Math.min(1,Math.max(0,e.color.opacity))),void 0===e.color.inherit&&a===!0&&(t.color.inherit=!1)}else i===!0&&null===e.color&&(t.color=v.bridgeObject(n.color));void 0!==e.font&&null!==e.font?h["default"].parseOptions(t.font,e):i===!0&&null===e.font&&(t.font=v.bridgeObject(n.font))}}]),t}();e["default"]=A},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(h){r=!0,o=h}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(87),c=n(l),d=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),h(e,[{key:"_line",value:function(t,e){var i=e[0],n=e[1];t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===e||void 0===i.x?t.lineTo(this.toPoint.x,this.toPoint.y):t.bezierCurveTo(i.x,i.y,n.x,n.y,this.toPoint.x,this.toPoint.y),this.enableShadow(t),t.stroke(),this.disableShadow(t)}},{key:"_getViaCoordinates",value:function(){var t=this.from.x-this.to.x,e=this.from.y-this.to.y,i=void 0,n=void 0,r=void 0,o=void 0,s=this.options.smooth.roundness;return(Math.abs(t)>Math.abs(e)||this.options.smooth.forceDirection===!0||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(n=this.from.y,o=this.to.y,i=this.from.x-s*t,r=this.to.x+s*t):(n=this.from.y-s*e,o=this.to.y+s*e,i=this.from.x,r=this.to.x),[{x:i,y:n},{x:r,y:o}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){var s=arguments.length<=6||void 0===arguments[6]?this._getViaCoordinates():arguments[6],h=a(s,2),l=h[0],c=h[1];return this._getDistanceToBezierEdge(t,e,i,n,r,o,l,c)}},{key:"getPoint",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?this._getViaCoordinates():arguments[1],i=a(e,2),n=i[0],r=i[1],o=t,s=[];s[0]=Math.pow(1-o,3),s[1]=3*o*Math.pow(1-o,2),s[2]=3*Math.pow(o,2)*(1-o),s[3]=Math.pow(o,3);var h=s[0]*this.fromPoint.x+s[1]*n.x+s[2]*r.x+s[3]*this.toPoint.x,l=s[0]*this.fromPoint.y+s[1]*n.y+s[2]*r.y+s[3]*this.toPoint.y;return{x:h,y:l}}}]),e}(c["default"]);e["default"]=d},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(88),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"_getDistanceToBezierEdge",value:function(t,e,i,n,r,o,s,a){var h=1e9,l=void 0,c=void 0,d=void 0,u=void 0,f=void 0,p=t,m=e,g=[0,0,0,0];for(c=1;10>c;c++)d=.1*c,g[0]=Math.pow(1-d,3),g[1]=3*d*Math.pow(1-d,2),g[2]=3*Math.pow(d,2)*(1-d),g[3]=Math.pow(d,3),u=g[0]*t+g[1]*s.x+g[2]*a.x+g[3]*i,f=g[0]*e+g[1]*s.y+g[2]*a.y+g[3]*n,c>0&&(l=this._getDistanceToLine(p,m,u,f,r,o),h=h>l?l:h),p=u,m=f;return h}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(89),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"_findBorderPositionBezier",value:function(t,e){var i,n,r,o,s,a=arguments.length<=2||void 0===arguments[2]?this._getViaCoordinates():arguments[2],h=10,l=0,c=0,d=1,u=.2,f=this.to,p=!1;for(t.id===this.from.id&&(f=this.from,p=!0);d>=c&&h>l;){var m=.5*(c+d);if(i=this.getPoint(m,a),n=Math.atan2(f.y-i.y,f.x-i.x),r=f.distanceToBorder(e,n),o=Math.sqrt(Math.pow(i.x-f.x,2)+Math.pow(i.y-f.y,2)),s=r-o,Math.abs(s)<u)break;0>s?p===!1?c=m:d=m:p===!1?d=m:c=m,l++}return i.t=m,i}},{key:"_getDistanceToBezierEdge",value:function(t,e,i,n,r,o,s){var a=1e9,h=void 0,l=void 0,c=void 0,d=void 0,u=void 0,f=t,p=e;for(l=1;10>l;l++)c=.1*l,d=Math.pow(1-c,2)*t+2*c*(1-c)*s.x+Math.pow(c,2)*i,u=Math.pow(1-c,2)*e+2*c*(1-c)*s.y+Math.pow(c,2)*n,l>0&&(h=this._getDistanceToLine(f,p,d,u,r,o),a=a>h?h:a),f=d,p=u;return a}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(h){r=!0,o=h}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1),a=function(){function t(e,i,r){n(this,t),this.body=i,this.labelModule=r,this.options={},this.setOptions(e),this.colorDirty=!0,this.color={},this.selectionWidth=2,this.hoverWidth=1.5,this.fromPoint=this.from,this.toPoint=this.to}return o(t,[{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,e,i,n){t.strokeStyle=this.getColor(t,e,i),t.lineWidth=this.getLineWidth(e,i),this.options.dashes!==!1?this._drawDashedLine(t,n):this._drawLine(t,n)}},{key:"_drawLine",value:function(t,e,i,n){if(this.from!=this.to)this._line(t,e,i,n);else{var o=this._getCircleData(t),s=r(o,3),a=s[0],h=s[1],l=s[2];this._circle(t,a,h,l)}}},{key:"_drawDashedLine",value:function(t,e,i,n){t.lineCap="round";var o=[5,5];if(Array.isArray(this.options.dashes)===!0&&(o=this.options.dashes),void 0!==t.setLineDash){if(t.save(),t.setLineDash(o),t.lineDashOffset=0,this.from!=this.to)this._line(t,e);else{var s=this._getCircleData(t),a=r(s,3),h=a[0],l=a[1],c=a[2];this._circle(t,h,l,c)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)t.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,o);else{var d=this._getCircleData(t),u=r(d,3),f=u[0],p=u[1],m=u[2];this._circle(t,f,p,m)}this.enableShadow(t),t.stroke(),this.disableShadow(t)}}},{key:"findBorderPosition",value:function(t,e,i){return this.from!=this.to?this._findBorderPosition(t,e,i):this._findBorderPositionCircle(t,e,i)}},{key:"findBorderPositions",value:function(t){var e={},i={};if(this.from!=this.to)e=this._findBorderPosition(this.from,t),i=this._findBorderPosition(this.to,t);else{var n=this._getCircleData(t),o=r(n,3),s=o[0],a=o[1];o[2],e=this._findBorderPositionCircle(this.from,t,{x:s,y:a,low:.25,high:.6,direction:-1}),i=this._findBorderPositionCircle(this.from,t,{x:s,y:a,low:.6,high:.8,direction:1})}return{from:e,to:i}}},{key:"_getCircleData",value:function(t){var e=void 0,i=void 0,n=this.from,r=this.options.selfReferenceSize;return void 0!==t&&void 0===n.shape.width&&n.shape.resize(t),n.shape.width>n.shape.height?(e=n.x+.5*n.shape.width,i=n.y-r):(e=n.x+r,i=n.y-.5*n.shape.height),[e,i,r]}},{key:"_pointOnCircle",value:function(t,e,i,n){var r=2*n*Math.PI;return{x:t+i*Math.cos(r),y:e-i*Math.sin(r)}}},{key:"_findBorderPositionCircle",value:function(t,e,i){for(var n=i.x,r=i.y,o=i.low,s=i.high,a=i.direction,h=10,l=0,c=this.options.selfReferenceSize,d=void 0,u=void 0,f=void 0,p=void 0,m=void 0,g=.05,v=.5*(o+s);s>=o&&h>l&&(v=.5*(o+s),d=this._pointOnCircle(n,r,c,v),u=Math.atan2(t.y-d.y,t.x-d.x),f=t.distanceToBorder(e,u),p=Math.sqrt(Math.pow(d.x-t.x,2)+Math.pow(d.y-t.y,2)),m=f-p,!(Math.abs(m)<g));)m>0?a>0?o=v:s=v:a>0?s=v:o=v,l++;return d.t=v,d}},{key:"getLineWidth",value:function(t,e){return t===!0?Math.max(this.selectionWidth,.3/this.body.view.scale):e===!0?Math.max(this.hoverWidth,.3/this.body.view.scale):Math.max(this.options.width,.3/this.body.view.scale)}},{key:"getColor",value:function(t,e,i){var n=this.options.color;if(n.inherit!==!1){if("both"===n.inherit&&this.from.id!==this.to.id){var r=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),o=void 0,a=void 0;return o=this.from.options.color.highlight.border,a=this.to.options.color.highlight.border,this.from.selected===!1&&this.to.selected===!1?(o=s.overrideOpacity(this.from.options.color.border,this.options.color.opacity),a=s.overrideOpacity(this.to.options.color.border,this.options.color.opacity)):this.from.selected===!0&&this.to.selected===!1?a=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(o=this.from.options.color.border),r.addColorStop(0,o),r.addColorStop(1,a),r}this.colorDirty===!0&&("to"===n.inherit?(this.color.highlight=this.to.options.color.highlight.border,this.color.hover=this.to.options.color.hover.border,this.color.color=s.overrideOpacity(this.to.options.color.border,n.opacity)):(this.color.highlight=this.from.options.color.highlight.border,this.color.hover=this.from.options.color.hover.border,this.color.color=s.overrideOpacity(this.from.options.color.border,n.opacity)))}else this.colorDirty===!0&&(this.color.highlight=n.highlight,this.color.hover=n.hover,this.color.color=s.overrideOpacity(n.color,n.opacity));return this.colorDirty=!1,e===!0?this.color.highlight:i===!0?this.color.hover:this.color.color}},{key:"_circle",value:function(t,e,i,n){this.enableShadow(t),t.beginPath(),t.arc(e,i,n,0,2*Math.PI,!1),t.stroke(),this.disableShadow(t)}},{key:"getDistanceToEdge",value:function(t,e,i,n,o,s,a){var h=0;if(this.from!=this.to)h=this._getDistanceToEdge(t,e,i,n,o,s,a);else{var l=this._getCircleData(),c=r(l,3),d=c[0],u=c[1],f=c[2],p=d-o,m=u-s;h=Math.abs(Math.sqrt(p*p+m*m)-f)}return this.labelModule.size.left<o&&this.labelModule.size.left+this.labelModule.size.width>o&&this.labelModule.size.top<s&&this.labelModule.size.top+this.labelModule.size.height>s?0:h}},{key:"_getDistanceToLine",value:function(t,e,i,n,r,o){var s=i-t,a=n-e,h=s*s+a*a,l=((r-t)*s+(o-e)*a)/h;l>1?l=1:0>l&&(l=0);var c=t+l*s,d=e+l*a,u=c-r,f=d-o;return Math.sqrt(u*u+f*f)}},{key:"getArrowData",value:function(t,e,i,n,o){var s=void 0,a=void 0,h=void 0,l=void 0,c=void 0,d=void 0,u=this.getLineWidth(n,o);if("from"===e?(h=this.from,l=this.to,c=.1,d=this.options.arrows.from.scaleFactor):"to"===e?(h=this.to,l=this.from,c=-.1,d=this.options.arrows.to.scaleFactor):(h=this.to,l=this.from,d=this.options.arrows.middle.scaleFactor),h!=l)if("middle"!==e)if(this.options.smooth.enabled===!0){a=this.findBorderPosition(h,t,{via:i});var f=this.getPoint(Math.max(0,Math.min(1,a.t+c)),i);s=Math.atan2(a.y-f.y,a.x-f.x)}else s=Math.atan2(h.y-l.y,h.x-l.x),a=this.findBorderPosition(h,t);else s=Math.atan2(h.y-l.y,h.x-l.x),a=this.getPoint(.5,i);else{var p=this._getCircleData(t),m=r(p,3),g=m[0],v=m[1],A=m[2];"from"===e?(a=this.findBorderPosition(this.from,t,{x:g,y:v,low:.25,high:.6,direction:-1}),s=-2*a.t*Math.PI+1.5*Math.PI+.1*Math.PI):"to"===e?(a=this.findBorderPosition(this.from,t,{x:g,y:v,low:.6,high:1,direction:1}),s=-2*a.t*Math.PI+1.5*Math.PI-1.1*Math.PI):(a=this._pointOnCircle(g,v,A,.175),s=3.9269908169872414)}var y=15*d+3*u,b=a.x-.9*y*Math.cos(s),E=a.y-.9*y*Math.sin(s),w={x:b,y:E};return{point:a,core:w,angle:s,length:y}}},{key:"drawArrowHead",value:function(t,e,i,n){t.strokeStyle=this.getColor(t,e,i),t.fillStyle=t.strokeStyle,t.lineWidth=this.getLineWidth(e,i),t.arrow(n.point.x,n.point.y,n.angle,n.length),this.enableShadow(t),t.fill(),this.disableShadow(t)}},{key:"enableShadow",value:function(t){this.options.shadow.enabled===!0&&(t.shadowColor=this.options.shadow.color,t.shadowBlur=this.options.shadow.size,t.shadowOffsetX=this.options.shadow.x,t.shadowOffsetY=this.options.shadow.y)}},{key:"disableShadow",value:function(t){this.options.shadow.enabled===!0&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}}]),t}();e["default"]=a},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(88),l=n(h),c=function(t){function e(t,i,n){r(this,e);var s=o(this,Object.getPrototypeOf(e).call(this,t,i,n));return s._boundFunction=function(){s.positionBezierNode()},s.body.emitter.on("_repositionBezierNodes",s._boundFunction),s}return s(e,t),a(e,[{key:"setOptions",value:function(t){var e=!1;this.options.physics!==t.physics&&(e=!0),this.options=t,this.id=this.options.id,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.setupSupportNode(),this.connect(),e===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],void 0===this.from||void 0===this.to||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this.body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via?(delete this.body.nodes[this.via.id],this.via=void 0,!0):!1}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var t="edgeId:"+this.id,e=this.body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this.body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===e.x?t.lineTo(this.toPoint.x,this.toPoint.y):t.quadraticCurveTo(e.x,e.y,this.toPoint.x,this.toPoint.y),this.enableShadow(t),t.stroke(),this.disableShadow(t)}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.via:arguments[1],i=t,n=Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*e.x+Math.pow(i,2)*this.toPoint.x,r=Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*e.y+Math.pow(i,2)*this.toPoint.y;return{x:n,y:r}}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e,this.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){return this._getDistanceToBezierEdge(t,e,i,n,r,o,this.via)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(88),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===e.x?t.lineTo(this.toPoint.x,this.toPoint.y):t.quadraticCurveTo(e.x,e.y,this.toPoint.x,this.toPoint.y),this.enableShadow(t),t.stroke(),this.disableShadow(t)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var t=void 0,e=void 0,i=this.options.smooth.roundness,n=this.options.smooth.type,r=Math.abs(this.from.x-this.to.x),o=Math.abs(this.from.y-this.to.y);if("discrete"===n||"diagonalCross"===n)Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?(this.from.y>=this.to.y?this.from.x<=this.to.x?(t=this.from.x+i*o,e=this.from.y-i*o):this.from.x>this.to.x&&(t=this.from.x-i*o,e=this.from.y-i*o):this.from.y<this.to.y&&(this.from.x<=this.to.x?(t=this.from.x+i*o,e=this.from.y+i*o):this.from.x>this.to.x&&(t=this.from.x-i*o,e=this.from.y+i*o)),"discrete"===n&&(t=i*o>r?this.from.x:t)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>=this.to.y?this.from.x<=this.to.x?(t=this.from.x+i*r,e=this.from.y-i*r):this.from.x>this.to.x&&(t=this.from.x-i*r,e=this.from.y-i*r):this.from.y<this.to.y&&(this.from.x<=this.to.x?(t=this.from.x+i*r,e=this.from.y+i*r):this.from.x>this.to.x&&(t=this.from.x-i*r,e=this.from.y+i*r)),"discrete"===n&&(e=i*r>o?this.from.y:e));else if("straightCross"===n)Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?(t=this.from.x,
e=this.from.y<this.to.y?this.to.y-(1-i)*o:this.to.y+(1-i)*o):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(t=this.from.x<this.to.x?this.to.x-(1-i)*r:this.to.x+(1-i)*r,e=this.from.y);else if("horizontal"===n)t=this.from.x<this.to.x?this.to.x-(1-i)*r:this.to.x+(1-i)*r,e=this.from.y;else if("vertical"===n)t=this.from.x,e=this.from.y<this.to.y?this.to.y-(1-i)*o:this.to.y+(1-i)*o;else if("curvedCW"===n){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var s=Math.sqrt(r*r+o*o),a=Math.PI,h=Math.atan2(o,r),l=(h+(.5*i+.5)*a)%(2*a);t=this.from.x+(.5*i+.5)*s*Math.sin(l),e=this.from.y+(.5*i+.5)*s*Math.cos(l)}else if("curvedCCW"===n){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var c=Math.sqrt(r*r+o*o),d=Math.PI,u=Math.atan2(o,r),f=(u+(.5*-i+.5)*d)%(2*d);t=this.from.x+(.5*i+.5)*c*Math.sin(f),e=this.from.y+(.5*i+.5)*c*Math.cos(f)}else Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?this.from.y>=this.to.y?this.from.x<=this.to.x?(t=this.from.x+i*o,e=this.from.y-i*o,t=this.to.x<t?this.to.x:t):this.from.x>this.to.x&&(t=this.from.x-i*o,e=this.from.y-i*o,t=this.to.x>t?this.to.x:t):this.from.y<this.to.y&&(this.from.x<=this.to.x?(t=this.from.x+i*o,e=this.from.y+i*o,t=this.to.x<t?this.to.x:t):this.from.x>this.to.x&&(t=this.from.x-i*o,e=this.from.y+i*o,t=this.to.x>t?this.to.x:t)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>=this.to.y?this.from.x<=this.to.x?(t=this.from.x+i*r,e=this.from.y-i*r,e=this.to.y>e?this.to.y:e):this.from.x>this.to.x&&(t=this.from.x-i*r,e=this.from.y-i*r,e=this.to.y>e?this.to.y:e):this.from.y<this.to.y&&(this.from.x<=this.to.x?(t=this.from.x+i*r,e=this.from.y+i*r,e=this.to.y<e?this.to.y:e):this.from.x>this.to.x&&(t=this.from.x-i*r,e=this.from.y+i*r,e=this.to.y<e?this.to.y:e)));return{x:t,y:e}}},{key:"_findBorderPosition",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this._findBorderPositionBezier(t,e,i.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){var s=arguments.length<=6||void 0===arguments[6]?this._getViaCoordinates():arguments[6];return this._getDistanceToBezierEdge(t,e,i,n,r,o,s)}},{key:"getPoint",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?this._getViaCoordinates():arguments[1],i=t,n=Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*e.x+Math.pow(i,2)*this.toPoint.x,r=Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*e.y+Math.pow(i,2)*this.toPoint.y;return{x:n,y:r}}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(89),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"_line",value:function(t){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t),t.stroke(),this.disableShadow(t)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){var i=this.to,n=this.from;t.id===this.from.id&&(i=this.from,n=this.to);var r=Math.atan2(i.y-n.y,i.x-n.x),o=i.x-n.x,s=i.y-n.y,a=Math.sqrt(o*o+s*s),h=t.distanceToBorder(e,r),l=(a-h)/a,c={};return c.x=(1-l)*n.x+l*i.x,c.y=(1-l)*n.y+l*i.y,c}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){return this._getDistanceToLine(t,e,i,n,r,o)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(94),a=n(s),h=i(95),l=n(h),c=i(96),d=n(c),u=i(97),f=n(u),p=i(98),m=n(p),g=i(99),v=n(g),A=i(100),y=n(A),b=i(101),E=n(b),w=i(1),x=function(){function t(e){r(this,t),this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0},w.extend(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return o(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),t.ready===!0&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){t.ready===!0&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){void 0!==t&&(t===!1?(this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation()):(this.physicsEnabled=!0,w.selectiveNotDeepExtend(["stabilization"],this.options,t),w.mergeOptions(this.options,t,"stabilization"),void 0===t.enabled&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation()),this.timestep=this.options.timestep)),this.init()}},{key:"init",value:function(){var t;"forceAtlas2Based"===this.options.solver?(t=this.options.forceAtlas2Based,this.nodesSolver=new y["default"](this.body,this.physicsBody,t),this.edgesSolver=new f["default"](this.body,this.physicsBody,t),this.gravitySolver=new E["default"](this.body,this.physicsBody,t)):"repulsion"===this.options.solver?(t=this.options.repulsion,this.nodesSolver=new l["default"](this.body,this.physicsBody,t),this.edgesSolver=new f["default"](this.body,this.physicsBody,t),this.gravitySolver=new v["default"](this.body,this.physicsBody,t)):"hierarchicalRepulsion"===this.options.solver?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new d["default"](this.body,this.physicsBody,t),this.edgesSolver=new m["default"](this.body,this.physicsBody,t),this.gravitySolver=new v["default"](this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new a["default"](this.body,this.physicsBody,t),this.edgesSolver=new f["default"](this.body,this.physicsBody,t),this.gravitySolver=new v["default"](this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=this.simulationStep.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this.stabilized=!0,t===!0&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,t===!0&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=Date.now();this.physicsTick();var e=Date.now()-t;(e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?this.stabilizationIterations:arguments[0];(this.stabilizationIterations>1||this.startedStabilization===!0)&&setTimeout(function(){t.body.emitter.emit("stabilized",{iterations:e}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsTick",value:function(){if(this.startedStabilization===!1&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0),this.stabilized===!1){if(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0){var t=1.2;this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.calculateForces(),this.moveNodes(),this.revert(),this.timestep=.5*this.timestep,this.calculateForces(),this.moveNodes(),this.calculateForces(),this.moveNodes(),this._evaluateStepQuality()===!0?this.timestep=t*this.timestep:this.timestep/t<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/t))):(this.calculateForces(),this.moveNodes()),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.calculateForces(),this.moveNodes();this.stabilized===!0&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,e=this.body.edges;for(var i in t)t.hasOwnProperty(i)&&t[i].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var n in e)e.hasOwnProperty(n)&&e[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(e[n].id);for(var r=0;r<this.physicsBody.physicsNodeIndices.length;r++){var o=this.physicsBody.physicsNodeIndices[r];this.physicsBody.forces[o]={x:0,y:0},void 0===this.physicsBody.velocities[o]&&(this.physicsBody.velocities[o]={x:0,y:0})}for(var s in this.physicsBody.velocities)void 0===t[s]&&delete this.physicsBody.velocities[s]}},{key:"revert",value:function(){var t=Object.keys(this.previousStates),e=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var n=0;n<t.length;n++){var r=t[n];void 0!==e[r]?e[r].options.physics===!0&&(this.referenceState[r]={positions:{x:e[r].x,y:e[r].y}},i[r].x=this.previousStates[r].vx,i[r].y=this.previousStates[r].vy,e[r].x=this.previousStates[r].x,e[r].y=this.previousStates[r].y):delete this.previousStates[r]}}},{key:"_evaluateStepQuality",value:function(){var t=void 0,e=void 0,i=void 0,n=this.body.nodes,r=this.referenceState,o=.3;for(var s in this.referenceState)if(this.referenceState.hasOwnProperty(s)&&void 0!==n[s]&&(t=n[s].x-r[s].positions.x,e=n[s].y-r[s].positions.y,i=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),i>o))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,e=this.options.maxVelocity?this.options.maxVelocity:1e9,i=0,n=0,r=5,o=0;o<t.length;o++){var s=t[o],a=this._performStep(s,e);i=Math.max(i,a),n+=a}this.adaptiveTimestepEnabled=n/t.length<r,this.stabilized=i<this.options.minVelocity}},{key:"_performStep",value:function(t,e){var i=this.body.nodes[t],n=this.timestep,r=this.physicsBody.forces,o=this.physicsBody.velocities;if(this.previousStates[t]={x:i.x,y:i.y,vx:o[t].x,vy:o[t].y},i.options.fixed.x===!1){var s=this.modelOptions.damping*o[t].x,a=(r[t].x-s)/i.options.mass;o[t].x+=a*n,o[t].x=Math.abs(o[t].x)>e?o[t].x>0?e:-e:o[t].x,i.x+=o[t].x*n}else r[t].x=0,o[t].x=0;if(i.options.fixed.y===!1){var h=this.modelOptions.damping*o[t].y,l=(r[t].y-h)/i.options.mass;o[t].y+=l*n,o[t].y=Math.abs(o[t].y)>e?o[t].y>0?e:-e:o[t].y,i.y+=o[t].y*n}else r[t].y=0,o[t].y=0;var c=Math.sqrt(Math.pow(o[t].x,2)+Math.pow(o[t].y,2));return c}},{key:"calculateForces",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve()}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var e in t)t.hasOwnProperty(e)&&t[e].x&&t[e].y&&(this.freezeCache[e]={x:t[e].options.fixed.x,y:t[e].options.fixed.y},t[e].options.fixed.x=!0,t[e].options.fixed.y=!0)}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var e in t)t.hasOwnProperty(e)&&void 0!==this.freezeCache[e]&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?this.options.stabilization.iterations:arguments[0];return"number"!=typeof e&&(console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",this.options.stabilization.iterations),e=this.options.stabilization.iterations),0===this.physicsBody.physicsNodeIndices.length?void(this.ready=!0):(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,void setTimeout(function(){return t._stabilizationBatch()},0))}},{key:"_stabilizationBatch",value:function(){this.startedStabilization===!1&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0);for(var t=0;this.stabilized===!1&&t<this.options.stabilization.updateInterval&&this.stabilizationIterations<this.targetIterations;)this.physicsTick(),t++;this.stabilized===!1&&this.stabilizationIterations<this.targetIterations?(this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations}),setTimeout(this._stabilizationBatch.bind(this),0)):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var i=this.body.nodes[this.physicsBody.physicsNodeIndices[e]],n=this.physicsBody.forces[this.physicsBody.physicsNodeIndices[e]],r=20,o=.03,s=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.x,2)),a=Math.min(Math.max(5,s),15),h=3*a,l=w.HSVToHex((180-180*Math.min(1,Math.max(0,o*s)))/360,1,1);t.lineWidth=a,t.strokeStyle=l,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(i.x+r*n.x,i.y+r*n.y),t.stroke();var c=Math.atan2(n.y,n.x);t.fillStyle=l,t.arrow(i.x+r*n.x+Math.cos(c)*h,i.y+r*n.y+Math.sin(c)*h,c,h),t.fill()}}}]),t}();e["default"]=x},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,n,r){i(this,t),this.body=e,this.physicsBody=n,this.barnesHutTree,this.setOptions(r),this.randomSeed=5}return n(t,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"seededRandom",value:function(){var t=1e4*Math.sin(this.randomSeed++);return t-Math.floor(t)}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var t=void 0,e=this.body.nodes,i=this.physicsBody.physicsNodeIndices,n=i.length,r=this._formBarnesHutTree(e,i);this.barnesHutTree=r;for(var o=0;n>o;o++)t=e[i[o]],t.options.mass>0&&(this._getForceContribution(r.root.children.NW,t),this._getForceContribution(r.root.children.NE,t),this._getForceContribution(r.root.children.SW,t),this._getForceContribution(r.root.children.SE,t))}}},{key:"_getForceContribution",value:function(t,e){if(t.childrenCount>0){var i=void 0,n=void 0,r=void 0;i=t.centerOfMass.x-e.x,n=t.centerOfMass.y-e.y,r=Math.sqrt(i*i+n*n),r*t.calcSize>this.thetaInversed?this._calculateForces(r,i,n,e,t):4===t.childrenCount?(this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)):t.children.data.id!=e.id&&this._calculateForces(r,i,n,e,t)}}},{key:"_calculateForces",value:function(t,e,i,n,r){0===t&&(t=.1,e=t),this.overlapAvoidanceFactor<1&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var o=this.options.gravitationalConstant*r.mass*n.options.mass/Math.pow(t,3),s=e*o,a=i*o;this.physicsBody.forces[n.id].x+=s,this.physicsBody.forces[n.id].y+=a}},{key:"_formBarnesHutTree",value:function(t,e){for(var i=void 0,n=e.length,r=t[e[0]].x,o=t[e[0]].y,s=t[e[0]].x,a=t[e[0]].y,h=1;n>h;h++){var l=t[e[h]].x,c=t[e[h]].y;t[e[h]].options.mass>0&&(r>l&&(r=l),l>s&&(s=l),o>c&&(o=c),c>a&&(a=c))}var d=Math.abs(s-r)-Math.abs(a-o);d>0?(o-=.5*d,a+=.5*d):(r+=.5*d,s-=.5*d);var u=1e-5,f=Math.max(u,Math.abs(s-r)),p=.5*f,m=.5*(r+s),g=.5*(o+a),v={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:m-p,maxX:m+p,minY:g-p,maxY:g+p},size:f,calcSize:1/f,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(v.root);for(var A=0;n>A;A++)i=t[e[A]],i.options.mass>0&&this._placeInTree(v.root,i);return v}},{key:"_updateBranchMass",value:function(t,e){var i=t.mass+e.options.mass,n=1/i;t.centerOfMass.x=t.centerOfMass.x*t.mass+e.x*e.options.mass,t.centerOfMass.x*=n,t.centerOfMass.y=t.centerOfMass.y*t.mass+e.y*e.options.mass,t.centerOfMass.y*=n,t.mass=i;var r=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<r?r:t.maxWidth}},{key:"_placeInTree",value:function(t,e,i){1==i&&void 0!==i||this._updateBranchMass(t,e),t.children.NW.range.maxX>e.x?t.children.NW.range.maxY>e.y?this._placeInRegion(t,e,"NW"):this._placeInRegion(t,e,"SW"):t.children.NW.range.maxY>e.y?this._placeInRegion(t,e,"NE"):this._placeInRegion(t,e,"SE")}},{key:"_placeInRegion",value:function(t,e,i){switch(t.children[i].childrenCount){case 0:t.children[i].children.data=e,t.children[i].childrenCount=1,this._updateBranchMass(t.children[i],e);break;case 1:t.children[i].children.data.x===e.x&&t.children[i].children.data.y===e.y?(e.x+=this.seededRandom(),e.y+=this.seededRandom()):(this._splitBranch(t.children[i]),this._placeInTree(t.children[i],e));break;case 4:this._placeInTree(t.children[i],e)}}},{key:"_splitBranch",value:function(t){var e=null;1===t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)}},{key:"_insertRegion",value:function(t,e){var i=void 0,n=void 0,r=void 0,o=void 0,s=.5*t.size;switch(e){case"NW":i=t.range.minX,n=t.range.minX+s,r=t.range.minY,o=t.range.minY+s;break;case"NE":i=t.range.minX+s,n=t.range.maxX,r=t.range.minY,o=t.range.minY+s;break;case"SW":i=t.range.minX,n=t.range.minX+s,r=t.range.minY+s,o=t.range.maxY;break;case"SE":i=t.range.minX+s,n=t.range.maxX,r=t.range.minY+s,o=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:n,minY:r,maxY:o},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}},{key:"_drawBranch",value:function(t,e,i){void 0===i&&(i="#FF0000"),4===t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=i,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}]),t}();e["default"]=r},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,n,r){i(this,t),this.body=e,this.physicsBody=n,this.setOptions(r)}return n(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,r,o,s,a,h=this.body.nodes,l=this.physicsBody.physicsNodeIndices,c=this.physicsBody.forces,d=this.options.nodeDistance,u=-2/3/d,f=4/3,p=0;p<l.length-1;p++){s=h[l[p]];for(var m=p+1;m<l.length;m++)a=h[l[m]],t=a.x-s.x,e=a.y-s.y,i=Math.sqrt(t*t+e*e),0===i&&(i=.1*Math.random(),t=i),2*d>i&&(o=.5*d>i?1:u*i+f,o/=i,n=t*o,r=e*o,c[s.id].x-=n,c[s.id].y-=r,c[a.id].x+=n,c[a.id].y+=r)}}}]),t}();e["default"]=r},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,n,r){i(this,t),this.body=e,this.physicsBody=n,this.setOptions(r)}return n(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){var t,e,i,n,r,o,s,a,h,l,c=this.body.nodes,d=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,f=this.options.nodeDistance;for(h=0;h<d.length-1;h++)for(s=c[d[h]],l=h+1;l<d.length;l++)if(a=c[d[l]],s.level===a.level){t=a.x-s.x,e=a.y-s.y,i=Math.sqrt(t*t+e*e);var p=.05;o=f>i?-Math.pow(p*i,2)+Math.pow(p*f,2):0,0===i?i=.01:o/=i,n=t*o,r=e*o,u[s.id].x-=n,u[s.id].y-=r,u[a.id].x+=n,u[a.id].y+=r}}}]),t}();e["default"]=r},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,n,r){i(this,t),this.body=e,this.physicsBody=n,this.setOptions(r)}return n(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t=void 0,e=void 0,i=this.physicsBody.physicsEdgeIndices,n=this.body.edges,r=void 0,o=void 0,s=void 0,a=0;a<i.length;a++)e=n[i[a]],e.connected===!0&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0!==e.edgeType.via?(t=void 0===e.options.length?this.options.springLength:e.options.length,r=e.to,o=e.edgeType.via,s=e.from,this._calculateSpringForce(r,o,.5*t),this._calculateSpringForce(o,s,.5*t)):(t=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)))}},{key:"_calculateSpringForce",value:function(t,e,i){var n=t.x-e.x,r=t.y-e.y,o=Math.max(Math.sqrt(n*n+r*r),.01),s=this.options.springConstant*(i-o)/o,a=n*s,h=r*s;void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x+=a,this.physicsBody.forces[t.id].y+=h),void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x-=a,this.physicsBody.forces[e.id].y-=h)}}]),t}();e["default"]=r},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,n,r){i(this,t),this.body=e,this.physicsBody=n,this.setOptions(r)}return n(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,r,o,s,a,h=this.body.edges,l=.5,c=this.physicsBody.physicsEdgeIndices,d=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,f=0;f<d.length;f++){var p=d[f];u[p].springFx=0,u[p].springFy=0}for(var m=0;m<c.length;m++)e=h[c[m]],e.connected===!0&&(t=void 0===e.options.length?this.options.springLength:e.options.length,i=e.from.x-e.to.x,n=e.from.y-e.to.y,a=Math.sqrt(i*i+n*n),a=0===a?.01:a,s=this.options.springConstant*(t-a)/a,r=i*s,o=n*s,e.to.level!=e.from.level?(void 0!==u[e.toId]&&(u[e.toId].springFx-=r,u[e.toId].springFy-=o),void 0!==u[e.fromId]&&(u[e.fromId].springFx+=r,u[e.fromId].springFy+=o)):(void 0!==u[e.toId]&&(u[e.toId].x-=l*r,u[e.toId].y-=l*o),void 0!==u[e.fromId]&&(u[e.fromId].x+=l*r,u[e.fromId].y+=l*o)));for(var g,v,s=1,A=0;A<d.length;A++){var y=d[A];g=Math.min(s,Math.max(-s,u[y].springFx)),v=Math.min(s,Math.max(-s,u[y].springFy)),u[y].x+=g,u[y].y+=v}for(var b=0,E=0,w=0;w<d.length;w++){var x=d[w];b+=u[x].x,E+=u[x].y}for(var _=b/d.length,T=E/d.length,S=0;S<d.length;S++){var R=d[S];u[R].x-=_,u[R].y-=T}}}]),t}();e["default"]=r},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,n,r){i(this,t),this.body=e,this.physicsBody=n,this.setOptions(r)}return n(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t=void 0,e=void 0,i=void 0,n=void 0,r=this.body.nodes,o=this.physicsBody.physicsNodeIndices,s=this.physicsBody.forces,a=0;a<o.length;a++){var h=o[a];n=r[h],t=-n.x,e=-n.y,i=Math.sqrt(t*t+e*e),this._calculateForces(i,t,e,s,n)}}},{key:"_calculateForces",value:function(t,e,i,n,r){var o=0===t?0:this.options.centralGravity/t;n[r.id].x=e*o,n[r.id].y=i*o}}]),t}();e["default"]=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(94),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"_calculateForces",value:function(t,e,i,n,r){0===t&&(t=.1*Math.random(),e=t),this.overlapAvoidanceFactor<1&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var o=n.edges.length+1,s=this.options.gravitationalConstant*r.mass*n.options.mass*o/Math.pow(t,2),a=e*s,h=i*s;this.physicsBody.forces[n.id].x+=a,this.physicsBody.forces[n.id].y+=h}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(99),l=n(h),c=function(t){function e(t,i,n){return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,i,n))}return s(e,t),a(e,[{key:"_calculateForces",value:function(t,e,i,n,r){if(t>0){var o=r.edges.length+1,s=this.options.centralGravity*o*r.options.mass;n[r.id].x=e*s,n[r.id].y=i*s}}}]),e}(l["default"]);e["default"]=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(103),h=n(a),l=i(104),c=n(l),d=i(1),u=function(){function t(e){var i=this;r(this,t),this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},d.extend(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){i.clusteredNodes={},i.clusteredEdges={};
})}return s(t,[{key:"setOptions",value:function(t){}},{key:"clusterByHubsize",value:function(t,e){void 0===t?t=this._getHubSize():"object"===("undefined"==typeof t?"undefined":o(t))&&(e=this._checkOptions(t),t=this._getHubSize());for(var i=[],n=0;n<this.body.nodeIndices.length;n++){var r=this.body.nodes[this.body.nodeIndices[n]];r.edges.length>=t&&i.push(r.id)}for(var s=0;s<i.length;s++)this.clusterByConnection(i[s],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(void 0===t.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");t=this._checkOptions(t);for(var i={},n={},r=0;r<this.body.nodeIndices.length;r++){var o=this.body.nodeIndices[r],s=this.body.nodes[o],a=h["default"].cloneOptions(s);if(t.joinCondition(a)===!0){i[o]=this.body.nodes[o];for(var l=0;l<s.edges.length;l++){var c=s.edges[l];void 0===this.clusteredEdges[c.id]&&(n[c.id]=c)}}}this._cluster(i,n,t,e)}},{key:"clusterByEdgeCount",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];e=this._checkOptions(e);for(var n=[],r={},o=void 0,s=void 0,a=void 0,l=void 0,c=void 0,d=0;d<this.body.nodeIndices.length;d++){var u={},f={};if(l=this.body.nodeIndices[d],void 0===r[l]){c=0,a=this.body.nodes[l],s=[];for(var p=0;p<a.edges.length;p++)o=a.edges[p],void 0===this.clusteredEdges[o.id]&&(o.toId!==o.fromId&&c++,s.push(o));if(c===t){for(var m=!0,g=0;g<s.length;g++){o=s[g];var v=this._getConnectedId(o,l);if(void 0===e.joinCondition)f[o.id]=o,u[l]=this.body.nodes[l],u[v]=this.body.nodes[v],r[l]=!0;else{var A=h["default"].cloneOptions(this.body.nodes[l]);if(e.joinCondition(A)!==!0){m=!1;break}f[o.id]=o,u[l]=this.body.nodes[l],r[l]=!0}}Object.keys(u).length>0&&Object.keys(f).length>0&&m===!0&&n.push({nodes:u,edges:f})}}}for(var y=0;y<n.length;y++)this._cluster(n[y].nodes,n[y].edges,e,!1);i===!0&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];this.clusterByEdgeCount(1,t,e)}},{key:"clusterBridges",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];this.clusterByEdgeCount(2,t,e)}},{key:"clusterByConnection",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];if(void 0===t)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[t])throw new Error("The nodeId given to clusterByConnection does not exist!");var n=this.body.nodes[t];e=this._checkOptions(e,n),void 0===e.clusterNodeProperties.x&&(e.clusterNodeProperties.x=n.x),void 0===e.clusterNodeProperties.y&&(e.clusterNodeProperties.y=n.y),void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=n.options.fixed.x,e.clusterNodeProperties.fixed.y=n.options.fixed.y);var r={},o={},s=n.id,a=h["default"].cloneOptions(n);r[s]=n;for(var l=0;l<n.edges.length;l++){var c=n.edges[l];if(void 0===this.clusteredEdges[c.id]){var d=this._getConnectedId(c,s);if(void 0===this.clusteredNodes[d])if(d!==s)if(void 0===e.joinCondition)o[c.id]=c,r[d]=this.body.nodes[d];else{var u=h["default"].cloneOptions(this.body.nodes[d]);e.joinCondition(a,u)===!0&&(o[c.id]=c,r[d]=this.body.nodes[d])}else o[c.id]=c}}this._cluster(r,o,e,i)}},{key:"_createClusterEdges",value:function(t,e,i,n){for(var r=void 0,o=void 0,s=void 0,a=void 0,l=void 0,c=void 0,u=Object.keys(t),f=[],p=0;p<u.length;p++){o=u[p],s=t[o];for(var m=0;m<s.edges.length;m++)r=s.edges[m],void 0===this.clusteredEdges[r.id]&&(r.toId==r.fromId?e[r.id]=r:r.toId==o?(a=i.id,l=r.fromId,c=l):(a=r.toId,l=i.id,c=a),void 0===t[c]&&f.push({edge:r,fromId:l,toId:a}))}for(var g=0;g<f.length;g++){var v=f[g].edge,A=h["default"].cloneOptions(v,"edge");d.deepExtend(A,n),A.from=f[g].fromId,A.to=f[g].toId,A.id="clusterEdge:"+d.randomUUID();var y=this.body.functions.createEdge(A);y.clusteringEdgeReplacingId=v.id,this.body.edges[y.id]=y,y.connect(),this._backupEdgeOptions(v),v.setOptions({physics:!1,hidden:!0})}}},{key:"_checkOptions",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return void 0===t.clusterEdgeProperties&&(t.clusterEdgeProperties={}),void 0===t.clusterNodeProperties&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,e,i){var n=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];if(!(Object.keys(t).length<2)){for(var r in t)if(t.hasOwnProperty(r)&&void 0!==this.clusteredNodes[r])return;var o=d.deepExtend({},i.clusterNodeProperties);if(void 0!==i.processProperties){var s=[];for(var a in t)if(t.hasOwnProperty(a)){var l=h["default"].cloneOptions(t[a]);s.push(l)}var u=[];for(var f in e)if(e.hasOwnProperty(f)&&"clusterEdge:"!==f.substr(0,12)){var p=h["default"].cloneOptions(e[f],"edge");u.push(p)}if(o=i.processProperties(o,s,u),!o)throw new Error("The processProperties function does not return properties!")}void 0===o.id&&(o.id="cluster:"+d.randomUUID());var m=o.id;void 0===o.label&&(o.label="cluster");var g=void 0;void 0===o.x&&(g=this._getClusterPosition(t),o.x=g.x),void 0===o.y&&(void 0===g&&(g=this._getClusterPosition(t)),o.y=g.y),o.id=m;var v=this.body.functions.createNode(o,c["default"]);v.isCluster=!0,v.containedNodes=t,v.containedEdges=e,v.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[o.id]=v,this._createClusterEdges(t,e,o,i.clusterEdgeProperties);for(var A in e)if(e.hasOwnProperty(A)&&void 0!==this.body.edges[A]){var y=this.body.edges[A];this._backupEdgeOptions(y),y.setOptions({physics:!1,hidden:!0})}for(var b in t)t.hasOwnProperty(b)&&(this.clusteredNodes[b]={clusterId:o.id,node:this.body.nodes[b]},this.body.nodes[b].setOptions({hidden:!0,physics:!1}));o.id=void 0,n===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){void 0===this.clusteredEdges[t.id]&&(this.clusteredEdges[t.id]={physics:t.options.physics,hidden:t.options.hidden})}},{key:"_restoreEdge",value:function(t){var e=this.clusteredEdges[t.id];void 0!==e&&(t.setOptions({physics:e.physics,hidden:e.hidden}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return void 0!==this.body.nodes[t]?this.body.nodes[t].isCluster===!0:(console.log("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var e=Object.keys(t),i=t[e[0]].x,n=t[e[0]].x,r=t[e[0]].y,o=t[e[0]].y,s=void 0,a=1;a<e.length;a++)s=t[e[a]],i=s.x<i?s.x:i,n=s.x>n?s.x:n,r=s.y<r?s.y:r,o=s.y>o?s.y:o;return{x:.5*(i+n),y:.5*(r+o)}}},{key:"openCluster",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];if(void 0===t)throw new Error("No clusterNodeId supplied to openCluster.");if(void 0===this.body.nodes[t])throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(void 0===this.body.nodes[t].containedNodes)return void console.log("The node:"+t+" is not a cluster.");var n=this.body.nodes[t],r=n.containedNodes,o=n.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"==typeof e.releaseFunction){var s={},a={x:n.x,y:n.y};for(var l in r)if(r.hasOwnProperty(l)){var c=this.body.nodes[l];s[l]={x:c.x,y:c.y}}var u=e.releaseFunction(a,s);for(var f in r)if(r.hasOwnProperty(f)){var p=this.body.nodes[f];void 0!==u[f]&&(p.x=void 0===u[f].x?n.x:u[f].x,p.y=void 0===u[f].y?n.y:u[f].y)}}else for(var m in r)if(r.hasOwnProperty(m)){var g=this.body.nodes[m];g=r[m],g.options.fixed.x===!1&&(g.x=n.x),g.options.fixed.y===!1&&(g.y=n.y)}for(var v in r)if(r.hasOwnProperty(v)){var A=this.body.nodes[v];A.vx=n.vx,A.vy=n.vy,A.setOptions({hidden:!1,physics:!0}),delete this.clusteredNodes[v]}for(var y=[],b=0;b<n.edges.length;b++)y.push(n.edges[b]);for(var E=0;E<y.length;E++){var w=y[E],x=this._getConnectedId(w,t);if(void 0!==this.clusteredNodes[x]){var _=this.body.nodes[this.clusteredNodes[x].clusterId],T=this.body.edges[w.clusteringEdgeReplacingId];if(void 0!==T){_.containedEdges[T.id]=T,delete o[T.id];var S=T.fromId,R=T.toId;T.toId==x?R=this.clusteredNodes[x].clusterId:S=this.clusteredNodes[x].clusterId;var C=h["default"].cloneOptions(T,"edge");d.deepExtend(C,_.clusterEdgeProperties);var k="clusterEdge:"+d.randomUUID();d.deepExtend(C,{from:S,to:R,hidden:!1,physics:!0,id:k});var M=this.body.functions.createEdge(C);M.clusteringEdgeReplacingId=T.id,this.body.edges[k]=M,this.body.edges[k].connect()}}else{var H=this.body.edges[w.clusteringEdgeReplacingId];void 0!==H&&this._restoreEdge(H)}w.cleanup(),w.disconnect(),delete this.body.edges[w.id]}for(var P in o)o.hasOwnProperty(P)&&this._restoreEdge(o[P]);delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var e=[];if(this.isCluster(t)===!0){var i=this.body.nodes[t].containedNodes;for(var n in i)i.hasOwnProperty(n)&&e.push(this.body.nodes[n].id)}return e}},{key:"findNode",value:function(t){for(var e=[],i=100,n=0;void 0!==this.clusteredNodes[t]&&i>n;)e.push(this.body.nodes[t].id),t=this.clusteredNodes[t].clusterId,n++;return e.push(this.body.nodes[t].id),e.reverse(),e}},{key:"_getConnectedId",value:function(t,e){return t.toId!=e?t.toId:t.fromId!=e?t.fromId:t.fromId}},{key:"_getHubSize",value:function(){for(var t=0,e=0,i=0,n=0,r=0;r<this.body.nodeIndices.length;r++){var o=this.body.nodes[this.body.nodeIndices[r]];o.edges.length>n&&(n=o.edges.length),t+=o.edges.length,e+=Math.pow(o.edges.length,2),i+=1}t/=i,e/=i;var s=e-Math.pow(t,2),a=Math.sqrt(s),h=Math.floor(t+2*a);return h>n&&(h=n),h}}]),t}();e["default"]=u},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(1),s=function(){function t(){n(this,t)}return r(t,null,[{key:"getRange",value:function(t){var e,i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=1e9,r=-1e9,o=1e9,s=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)e=t[i[a]],o>e.shape.boundingBox.left&&(o=e.shape.boundingBox.left),s<e.shape.boundingBox.right&&(s=e.shape.boundingBox.right),n>e.shape.boundingBox.top&&(n=e.shape.boundingBox.top),r<e.shape.boundingBox.bottom&&(r=e.shape.boundingBox.bottom);return 1e9===o&&-1e9===s&&1e9===n&&-1e9===r&&(n=0,r=0,o=0,s=0),{minX:o,maxX:s,minY:n,maxY:r}}},{key:"getRangeCore",value:function(t){var e,i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=1e9,r=-1e9,o=1e9,s=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)e=t[i[a]],o>e.x&&(o=e.x),s<e.x&&(s=e.x),n>e.y&&(n=e.y),r<e.y&&(r=e.y);return 1e9===o&&-1e9===s&&1e9===n&&-1e9===r&&(n=0,r=0,o=0,s=0),{minX:o,maxX:s,minY:n,maxY:r}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,e){var i={};return void 0===e||"node"===e?(o.deepExtend(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):o.deepExtend(i,t.options,!0),i}}]),t}();e["default"]=s},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(65),h=n(a),l=function(t){function e(t,i,n,s,a){r(this,e);var h=o(this,Object.getPrototypeOf(e).call(this,t,i,n,s,a));return h.isCluster=!0,h.containedNodes={},h.containedEdges={},h}return s(e,t),e}(h["default"]);e["default"]=l},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);var o=i(1),s=function(){function t(e,i){n(this,t),this.body=e,this.canvas=i,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.pixelRatio=void 0,this.allowRedraw=!0,this.dragging=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideNodesOnDrag:!1},o.extend(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return r(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("dragStart",function(){t.dragging=!0}),this.body.emitter.on("dragEnd",function(){return t.dragging=!1}),this.body.emitter.on("_resizeNodes",function(){return t._resizeNodes()}),this.body.emitter.on("_redraw",function(){t.renderingActive===!1&&t._redraw()}),this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=!0,t.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this)),this.body.emitter.on("_startRendering",function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()}),this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1,t.renderingActive=t.renderRequests>0,t.renderTimer=void 0}),this.body.emitter.on("destroy",function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,t.requiresTimeout===!0?clearTimeout(t.renderTimer):cancelAnimationFrame(t.renderTimer),t.body.emitter.off()})}},{key:"setOptions",value:function(t){if(void 0!==t){var e=["hideEdgesOnDrag","hideNodesOnDrag"];o.selectiveDeepExtend(e,this.options,t)}}},{key:"_startRendering",value:function(){this.renderingActive===!0&&void 0===this.renderTimer&&(this.requiresTimeout===!0?this.renderTimer=window.setTimeout(this._renderStep.bind(this),this.simulationInterval):this.renderTimer=window.requestAnimationFrame(this._renderStep.bind(this)))}},{key:"_renderStep",value:function(){this.renderingActive===!0&&(this.renderTimer=void 0,this.requiresTimeout===!0&&this._startRendering(),this._redraw(),this.requiresTimeout===!1&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,this.requiresTimeout===!0?window.setTimeout(function(){t._redraw(!1)},0):window.requestAnimationFrame(function(){t._redraw(!1)}))}},{key:"_redraw",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var e=this.canvas.frame.canvas.getContext("2d");0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.canvas.frame.canvas.clientWidth,n=this.canvas.frame.canvas.clientHeight;if(e.clearRect(0,0,i,n),0===this.canvas.frame.clientWidth)return;e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale),e.beginPath(),this.body.emitter.emit("beforeDrawing",e),e.closePath(),t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&this._drawEdges(e),(this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1)&&this._drawNodes(e,t),e.beginPath(),this.body.emitter.emit("afterDrawing",e),e.closePath(),e.restore(),t===!0&&e.clearRect(0,0,i,n)}}},{key:"_resizeNodes",value:function(){var t=this.canvas.frame.canvas.getContext("2d");void 0===this.pixelRatio&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var e=this.body.nodes,i=void 0;for(var n in e)e.hasOwnProperty(n)&&(i=e[n],i.resize(t),i.updateBoundingBox(t,i.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=this.body.nodes,n=this.body.nodeIndices,r=void 0,o=[],s=20,a=this.canvas.DOMtoCanvas({x:-s,y:-s}),h=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+s,y:this.canvas.frame.canvas.clientHeight+s}),l={top:a.y,left:a.x,bottom:h.y,right:h.x},c=0;c<n.length;c++)r=i[n[c]],r.isSelected()?o.push(n[c]):e===!0?r.draw(t):r.isBoundingBoxOverlappingWith(l)===!0?r.draw(t):r.updateBoundingBox(t,r.selected);for(var d=0;d<o.length;d++)r=i[o[d]],r.draw(t)}},{key:"_drawEdges",value:function(t){for(var e=this.body.edges,i=this.body.edgeIndices,n=void 0,r=0;r<i.length;r++)n=e[i[r]],n.connected===!0&&n.draw(t)}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,-1!=t.indexOf("msie 9.0")?this.requiresTimeout=!0:-1!=t.indexOf("safari")&&t.indexOf("chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}}]),t}();e["default"]=s},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(20),s=i(28),a=i(1),h=function(){function t(e){n(this,t),this.body=e,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=this._onResize.bind(this),this.cameraState={},this.initialized=!1,this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},a.extend(this.options,this.defaultOptions),this.bindEventListeners()}return r(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.once("resize",function(e){0!==e.width&&(t.body.view.translation.x=.5*e.width),0!==e.height&&(t.body.view.translation.y=.5*e.height)}),this.body.emitter.on("setSize",this.setSize.bind(this)),this.body.emitter.on("destroy",function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()})}},{key:"setOptions",value:function(t){var e=this;if(void 0!==t){var i=["width","height","autoResize"];a.selectiveDeepExtend(i,this.options,t)}this.options.autoResize===!0&&(this._cleanUp(),this.resizeTimer=setInterval(function(){var t=e.setSize();t===!0&&e.body.emitter.emit("_requestRedraw")},1e3),this.resizeFunction=this._onResize.bind(this),a.addEventListener(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer),a.removeEventListener(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.pixelRatio:arguments[0];this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;1!=t&&1!=e?i=.5*this.cameraState.scale*(t+e):1!=t?i=this.cameraState.scale*t:1!=e&&(i=this.cameraState.scale*e),this.body.view.scale=i;var n=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),r={x:n.x-this.cameraState.position.x,y:n.y-this.cameraState.position.y};this.body.view.translation.x+=r.x*this.body.view.scale,this.body.view.translation.y+=r.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if("number"==typeof t)return t+"px";if("string"==typeof t){if(-1!==t.indexOf("%")||-1!==t.indexOf("px"))return t;if(-1===t.indexOf("%"))return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext){var t=this.frame.canvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.frame.canvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new o(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:o.DIRECTION_ALL}),s.onTouch(this.hammer,function(e){t.body.eventListeners.onTouch(e)}),this.hammer.on("tap",function(e){t.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",function(e){t.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",function(e){t.body.eventListeners.onHold(e)}),this.hammer.on("panstart",function(e){t.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",function(e){t.body.eventListeners.onDrag(e)}),this.hammer.on("panend",function(e){t.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",function(e){t.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("mousewheel",function(e){t.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("DOMMouseScroll",function(e){t.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",function(e){t.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",function(e){t.body.eventListeners.onContext(e)}),this.hammerFrame=new o(this.frame),s.onRelease(this.hammerFrame,function(e){t.body.eventListeners.onRelease(e)})}},{key:"setSize",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.options.width:arguments[0],e=arguments.length<=1||void 0===arguments[1]?this.options.height:arguments[1];t=this._prepareValue(t),e=this._prepareValue(e);var i=!1,n=this.frame.canvas.width,r=this.frame.canvas.height,o=this.frame.canvas.getContext("2d"),s=this.pixelRatio;return this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),t!=this.options.width||e!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=e?(this._getCameraState(s),this.frame.style.width=t,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=e,i=!0):(this.frame.canvas.width==Math.round(this.frame.canvas.clientWidth*this.pixelRatio)&&this.frame.canvas.height==Math.round(this.frame.canvas.clientHeight*this.pixelRatio)||this._getCameraState(s),this.frame.canvas.width!=Math.round(this.frame.canvas.clientWidth*this.pixelRatio)&&(this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),i=!0),this.frame.canvas.height!=Math.round(this.frame.canvas.clientHeight*this.pixelRatio)&&(this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),i=!0)),i===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(n/this.pixelRatio),oldHeight:Math.round(r/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),t}();e["default"]=h},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(103),a=n(s),h=i(1),l=function(){function t(e,i){var n=this;r(this,t),this.body=e,this.canvas=i,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",this.fit.bind(this)),this.body.emitter.on("animationFinished",function(){n.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}return o(t,[{key:"setOptions",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}},{key:"fit",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{nodes:[]}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=void 0,n=void 0;if(void 0!==t.nodes&&0!==t.nodes.length||(t.nodes=this.body.nodeIndices),e===!0){var r=0;for(var o in this.body.nodes)if(this.body.nodes.hasOwnProperty(o)){var s=this.body.nodes[o];s.predefinedPosition===!0&&(r+=1)}if(r>.5*this.body.nodeIndices.length)return void this.fit(t,!1);i=a["default"].getRange(this.body.nodes,t.nodes);var h=this.body.nodeIndices.length;n=12.662/(h+7.4147)+.0964822;var l=Math.min(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600);n*=l}else{this.body.emitter.emit("_resizeNodes"),i=a["default"].getRange(this.body.nodes,t.nodes);var c=1.1*Math.abs(i.maxX-i.minX),d=1.1*Math.abs(i.maxY-i.minY),u=this.canvas.frame.canvas.clientWidth/c,f=this.canvas.frame.canvas.clientHeight/d;n=f>=u?u:f}n>1?n=1:0===n&&(n=1);var p=a["default"].findCenter(i),m={position:p,scale:n,animation:t.animation};this.moveTo(m)}},{key:"focus",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(void 0!==this.body.nodes[t]){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};e.position=i,e.lockedOnNode=t,this.moveTo(e)}else console.log("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){return void 0===t?void(t={}):(void 0===t.offset&&(t.offset={x:0,y:0}),void 0===t.offset.x&&(t.offset.x=0),void 0===t.offset.y&&(t.offset.y=0),void 0===t.scale&&(t.scale=this.body.view.scale),void 0===t.position&&(t.position=this.getViewPosition()),void 0===t.animation&&(t.animation={duration:0}),t.animation===!1&&(t.animation={duration:0}),t.animation===!0&&(t.animation={}),void 0===t.animation.duration&&(t.animation.duration=1e3),void 0===t.animation.easingFunction&&(t.animation.easingFunction="easeInOutQuad"),void this.animateView(t))}},{key:"animateView",value:function(t){if(void 0!==t){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),t.locked===!0&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var e=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:e.x-t.position.x,y:e.y-t.position.y};this.targetTranslation={x:this.sourceTranslation.x+i.x*this.targetScale+t.offset.x,y:this.sourceTranslation.y+i.y*this.targetScale+t.offset.y},0===t.animation.duration?void 0!=this.lockedOnNodeId?(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=this._transitionRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var t={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},e=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:e.x-t.x,y:e.y-t.y},n=this.body.view.translation,r={x:n.x+i.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:n.y+i.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=r}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=t===!0?1:this.easingTime;var e=h.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*e,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*e,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*e},this.easingTime>=1&&(this.body.emitter.off("initRedraw",this.viewFunction),
this.easingTime=0,void 0!=this.lockedOnNodeId&&(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),t}();e["default"]=l},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(109),a=n(s),h=i(110),l=n(h),c=i(1),d=function(){function t(e,i,n){r(this,t),this.body=e,this.canvas=i,this.selectionHandler=n,this.navigationHandler=new a["default"](e,i),this.body.eventListeners.onTap=this.onTap.bind(this),this.body.eventListeners.onTouch=this.onTouch.bind(this),this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this),this.body.eventListeners.onHold=this.onHold.bind(this),this.body.eventListeners.onDragStart=this.onDragStart.bind(this),this.body.eventListeners.onDrag=this.onDrag.bind(this),this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this),this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this),this.body.eventListeners.onPinch=this.onPinch.bind(this),this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this),this.body.eventListeners.onRelease=this.onRelease.bind(this),this.body.eventListeners.onContext=this.onContext.bind(this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=this.getPointer.bind(this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0},c.extend(this.options,this.defaultOptions),this.bindEventListeners()}return o(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){if(void 0!==t){var e=["hideEdgesOnDrag","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];c.selectiveNotDeepExtend(e,this.options,t),c.mergeOptions(this.options,t,"keyboard"),t.tooltip&&(c.extend(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=c.parseColor(t.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-c.getAbsoluteLeft(this.canvas.frame.canvas),y:t.y-c.getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,t,i),this.selectionHandler._generateClickEvent("click",t,e)}},{key:"onDoubleTap",value:function(t){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("doubleClick",t,e)}},{key:"onHold",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,t,i),this.selectionHandler._generateClickEvent("click",t,e),this.selectionHandler._generateClickEvent("hold",t,e)}},{key:"onRelease",value:function(t){if((new Date).valueOf()-this.touchTime>10){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("release",t,e),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(t){var e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler._generateClickEvent("oncontext",t,e)}},{key:"checkSelectionChanges",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=this.selectionHandler._getSelectedEdgeCount(),r=this.selectionHandler._getSelectedNodeCount(),o=this.selectionHandler.getSelection(),s=void 0;s=i===!0?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t);var a=this.selectionHandler._getSelectedEdgeCount(),h=this.selectionHandler._getSelectedNodeCount(),l=this.selectionHandler.getSelection(),c=this._determineIfDifferent(o,l),d=c.nodesChanged,u=c.edgesChanged,f=!1;h-r>0?(this.selectionHandler._generateClickEvent("selectNode",e,t),s=!0,f=!0):d===!0&&h>0?(this.selectionHandler._generateClickEvent("deselectNode",e,t,o),this.selectionHandler._generateClickEvent("selectNode",e,t),f=!0,s=!0):0>h-r&&(this.selectionHandler._generateClickEvent("deselectNode",e,t,o),s=!0),a-n>0&&f===!1?(this.selectionHandler._generateClickEvent("selectEdge",e,t),s=!0):a>0&&u===!0?(this.selectionHandler._generateClickEvent("deselectEdge",e,t,o),this.selectionHandler._generateClickEvent("selectEdge",e,t),s=!0):0>a-n&&(this.selectionHandler._generateClickEvent("deselectEdge",e,t,o),s=!0),s===!0&&this.selectionHandler._generateClickEvent("select",e,t)}},{key:"_determineIfDifferent",value:function(t,e){for(var i=!1,n=!1,r=0;r<t.nodes.length;r++)-1===e.nodes.indexOf(t.nodes[r])&&(i=!0);for(var o=0;o<e.nodes.length;o++)-1===t.nodes.indexOf(t.nodes[o])&&(i=!0);for(var s=0;s<t.edges.length;s++)-1===e.edges.indexOf(t.edges[s])&&(n=!0);for(var a=0;a<e.edges.length;a++)-1===t.edges.indexOf(t.edges[a])&&(n=!0);return{nodesChanged:i,edgesChanged:n}}},{key:"onDragStart",value:function(t){void 0===this.drag.pointer&&this.onTouch(t);var e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=c.extend({},this.body.view.translation),this.drag.nodeId=void 0,void 0!==e&&this.options.dragNodes===!0){this.drag.nodeId=e.id,e.isSelected()===!1&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(e)),this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer);var i=this.selectionHandler.selectionObj.nodes;for(var n in i)if(i.hasOwnProperty(n)){var r=i[n],o={id:r.id,node:r,x:r.x,y:r.y,xFixed:r.options.fixed.x,yFixed:r.options.fixed.y};r.options.fixed.x=!0,r.options.fixed.y=!0,this.drag.selection.push(o)}}else this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(t){var e=this;if(this.drag.pinched!==!0){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0)!function(){e.selectionHandler._generateClickEvent("dragging",t,i);var r=i.x-e.drag.pointer.x,o=i.y-e.drag.pointer.y;n.forEach(function(t){var i=t.node;t.xFixed===!1&&(i.x=e.canvas._XconvertDOMtoCanvas(e.canvas._XconvertCanvasToDOM(t.x)+r)),t.yFixed===!1&&(i.y=e.canvas._YconvertDOMtoCanvas(e.canvas._YconvertCanvasToDOM(t.y)+o))}),e.body.emitter.emit("startSimulation")}();else if(this.options.dragView===!0){if(this.selectionHandler._generateClickEvent("dragging",t,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);var r=i.x-this.drag.pointer.x,o=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+r,y:this.drag.translation.y+o},this.body.emitter.emit("_redraw")}}}},{key:"onDragEnd",value:function(t){this.drag.dragging=!1;var e=this.drag.selection;e&&e.length?(e.forEach(function(t){t.node.options.fixed.x=t.xFixed,t.node.options.fixed.y=t.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(t){var e=this.getPointer(t.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,e)}},{key:"zoom",value:function(t,e){if(this.options.zoomView===!0){var i=this.body.view.scale;1e-5>t&&(t=1e-5),t>10&&(t=10);var n=void 0;void 0!==this.drag&&this.drag.dragging===!0&&(n=this.canvas.DOMtoCanvas(this.drag.pointer));var r=this.body.view.translation,o=t/i,s=(1-o)*e.x+r.x*o,a=(1-o)*e.y+r.y*o;if(this.body.view.scale=t,this.body.view.translation={x:s,y:a},void 0!=n){var h=this.canvas.canvasToDOM(n);this.drag.pointer.x=h.x,this.drag.pointer.y=h.y}this.body.emitter.emit("_requestRedraw"),t>i?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale})}}},{key:"onMouseWheel",value:function(t){if(this.options.zoomView===!0){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),0!==e){var i=this.body.view.scale,n=e/10;0>e&&(n/=1-n),i*=1+n;var r=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(i,r)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var e=this,i=this.getPointer({x:t.clientX,y:t.clientY}),n=!1;if(void 0!==this.popup&&(this.popup.hidden===!1&&this._checkHidePopup(i),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=setTimeout(function(){return e._checkShowPopup(i)},this.options.tooltipDelay))),this.options.hover===!0){var r=this.selectionHandler.getNodeAt(i);void 0===r&&(r=this.selectionHandler.getEdgeAt(i)),this.selectionHandler.hoverObject(r)}}},{key:"_checkShowPopup",value:function(t){var e=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),n={left:e,top:i,right:e,bottom:i},r=void 0===this.popupObj?void 0:this.popupObj.id,o=!1,s="node";if(void 0===this.popupObj){for(var a=this.body.nodeIndices,h=this.body.nodes,c=void 0,d=[],u=0;u<a.length;u++)c=h[a[u]],c.isOverlappingWith(n)===!0&&void 0!==c.getTitle()&&d.push(a[u]);d.length>0&&(this.popupObj=h[d[d.length-1]],o=!0)}if(void 0===this.popupObj&&o===!1){for(var f=this.body.edgeIndices,p=this.body.edges,m=void 0,g=[],v=0;v<f.length;v++)m=p[f[v]],m.isOverlappingWith(n)===!0&&m.connected===!0&&void 0!==m.getTitle()&&g.push(f[v]);g.length>0&&(this.popupObj=p[g[g.length-1]],s="edge")}void 0!==this.popupObj?this.popupObj.id!==r&&(void 0===this.popup&&(this.popup=new l["default"](this.canvas.frame)),this.popup.popupTargetType=s,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var e=this.selectionHandler._pointerToPositionObject(t),i=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e),i===!0)){var n=this.selectionHandler.getNodeAt(t);i=n.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(t)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));i===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),t}();e["default"]=d},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=(i(1),i(20)),s=i(28),a=i(23),h=function(){function t(e,i){var r=this;n(this,t),this.body=e,this.canvas=i,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){r.activated=!0,r.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){r.activated=!1,r.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){void 0!==r.keycharm&&r.keycharm.destroy()}),this.options={}}return r(t,[{key:"setOptions",value:function(t){void 0!==t&&(this.options=t,this.create())}},{key:"create",value:function(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var n=0;n<e.length;n++){this.navigationDOM[e[n]]=document.createElement("div"),this.navigationDOM[e[n]].className="vis-button vis-"+e[n],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[n]]);var r=new o(this.navigationDOM[e[n]]);"_fit"===i[n]?s.onTouch(r,this._fit.bind(this)):s.onTouch(r,this.bindToRedraw.bind(this,i[n])),this.navigationHammers.push(r)}var a=new o(this.canvas.frame);s.onRelease(a,function(){t._stopMovement()}),this.navigationHammers.push(a),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){void 0===this.boundFunctions[t]&&(this.boundFunctions[t]=this[t].bind(this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(t){void 0!==this.boundFunctions[t]&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)this.boundFunctions.hasOwnProperty(t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){this.body.view.scale*=1+this.options.keyboard.speed.zoom,this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale})}},{key:"_zoomOut",value:function(){this.body.view.scale/=1+this.options.keyboard.speed.zoom,this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale})}},{key:"configureKeyboardBindings",value:function(){var t=this;void 0!==this.keycharm&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=a({container:window,preventDefault:!0}):this.keycharm=a({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0&&(this.keycharm.bind("up",function(){t.bindToRedraw("_moveUp")},"keydown"),this.keycharm.bind("down",function(){t.bindToRedraw("_moveDown")},"keydown"),this.keycharm.bind("left",function(){t.bindToRedraw("_moveLeft")},"keydown"),this.keycharm.bind("right",function(){t.bindToRedraw("_moveRight")},"keydown"),this.keycharm.bind("=",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num+",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num-",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("-",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("[",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("]",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pageup",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("up",function(){t.unbindFromRedraw("_moveUp")},"keyup"),this.keycharm.bind("down",function(){t.unbindFromRedraw("_moveDown")},"keyup"),this.keycharm.bind("left",function(){t.unbindFromRedraw("_moveLeft")},"keyup"),this.keycharm.bind("right",function(){t.unbindFromRedraw("_moveRight")},"keyup"),this.keycharm.bind("=",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("[",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("]",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")))}}]),t}();e["default"]=h},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){i(this,t),this.container=e,this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-network-tooltip",this.container.appendChild(this.frame)}return n(t,[{key:"setPosition",value:function(t,e){this.x=parseInt(t),this.y=parseInt(e)}},{key:"setText",value:function(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),t===!0){var e=this.frame.clientHeight,i=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,r=this.frame.parentNode.clientWidth,o=this.y-e;o+e+this.padding>n&&(o=n-e-this.padding),o<this.padding&&(o=this.padding);var s=this.x;s+i+this.padding>r&&(s=r-i-this.padding),s<this.padding&&(s=this.padding),this.frame.style.left=s+"px",this.frame.style.top=o+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.visibility="hidden"}}]),t}();e["default"]=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(65),a=n(s),h=i(85),l=n(h),c=i(1),d=function(){function t(e,i){var n=this;r(this,t),this.body=e,this.canvas=i,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},c.extend(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}return o(t,[{key:"setOptions",value:function(t){if(void 0!==t){var e=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];c.selectiveDeepExtend(e,this.options,t)}}},{key:"selectOnPoint",value:function(t){var e=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),void 0!==i&&(e=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return e}},{key:"selectAdditionalOnPoint",value:function(t){var e=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);void 0!==i&&(e=!0,i.isSelected()===!0?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return e}},{key:"_generateClickEvent",value:function(t,e,i,n){var r=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],o=void 0;o=r===!0?{nodes:[],edges:[]}:this.getSelection(),o.pointer={DOM:{x:i.x,y:i.y},canvas:this.canvas.DOMtoCanvas(i)},o.event=e,void 0!==n&&(o.previousSelection=n),this.body.emitter.emit(t,o)}},{key:"selectObject",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.options.selectConnectedEdges:arguments[1];return void 0!==t?(t instanceof a["default"]&&e===!0&&this._selectConnectedEdges(t),t.select(),this._addToSelection(t),!0):!1}},{key:"deselectObject",value:function(t){t.isSelected()===!0&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var e=[],i=this.body.nodes,n=0;n<this.body.nodeIndices.length;n++){var r=this.body.nodeIndices[n];i[r].isOverlappingWith(t)&&e.push(r)}return e}},{key:"_pointerToPositionObject",value:function(t){var e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}},{key:"getNodeAt",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],i=this._pointerToPositionObject(t),n=this._getAllNodesOverlappingWith(i);return n.length>0?e===!0?this.body.nodes[n[n.length-1]]:n[n.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(t,e){for(var i=this.body.edges,n=0;n<this.body.edgeIndices.length;n++){var r=this.body.edgeIndices[n];i[r].isOverlappingWith(t)&&e.push(r)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var e=[];return this._getEdgesOverlappingWith(t,e),e}},{key:"getEdgeAt",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],i=this._pointerToPositionObject(t),n=this._getAllEdgesOverlappingWith(i);return n.length>0?e===!0?this.body.edges[n[n.length-1]]:n[n.length-1]:void 0}},{key:"_addToSelection",value:function(t){t instanceof a["default"]?this.selectionObj.nodes[t.id]=t:this.selectionObj.edges[t.id]=t}},{key:"_addToHover",value:function(t){t instanceof a["default"]?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){t instanceof a["default"]?(delete this.selectionObj.nodes[t.id],this._unselectConnectedEdges(t)):delete this.selectionObj.edges[t.id]}},{key:"unselectAll",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].unselect();for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&this.selectionObj.edges[e].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedNode",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return this.selectionObj.nodes[t]}},{key:"_getSelectedEdge",value:function(){for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return this.selectionObj.edges[t]}},{key:"_getSelectedEdgeCount",value:function(){var t=0;for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedObjectCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(t+=1);return t}},{key:"_selectionIsEmpty",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return!1;for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].clusterSize>1)return!0;return!1}},{key:"_selectConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.select(),this._addToSelection(i)}}},{key:"_hoverConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.hover=!0,this._addToHover(i)}}},{key:"_unselectConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.unselect(),this._removeFromSelection(i)}}},{key:"blurObject",value:function(t){t.hover===!0&&(t.hover=!1,t instanceof a["default"]?this.body.emitter.emit("blurNode",{node:t.id}):this.body.emitter.emit("blurEdge",{edge:t.id}))}},{key:"hoverObject",value:function(t){var e=!1;for(var i in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(i)&&(void 0===t||t instanceof a["default"]&&t.id!=i||t instanceof l["default"])&&(this.blurObject(this.hoverObj.nodes[i]),delete this.hoverObj.nodes[i],e=!0);for(var n in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(n)&&(e===!0?(this.hoverObj.edges[n].hover=!1,delete this.hoverObj.edges[n]):void 0===t&&(this.blurObject(this.hoverObj.edges[n]),delete this.hoverObj.edges[n],e=!0));void 0!==t&&(t.hover===!1&&(t.hover=!0,this._addToHover(t),e=!0,t instanceof a["default"]?this.body.emitter.emit("hoverNode",{node:t.id}):this.body.emitter.emit("hoverEdge",{edge:t.id})),t instanceof a["default"]&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(t)),e===!0&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){var t=this.getSelectedNodes(),e=this.getSelectedEdges();return{nodes:t,edges:e}}},{key:"getSelectedNodes",value:function(){var t=[];if(this.options.selectable===!0)for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&t.push(this.selectionObj.nodes[e].id);return t}},{key:"getSelectedEdges",value:function(){var t=[];if(this.options.selectable===!0)for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&t.push(this.selectionObj.edges[e].id);return t}},{key:"setSelection",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=void 0,n=void 0;if(!t||!t.nodes&&!t.edges)throw"Selection must be an object with nodes and/or edges properties";if((e.unselectAll||void 0===e.unselectAll)&&this.unselectAll(),t.nodes)for(i=0;i<t.nodes.length;i++){n=t.nodes[i];var r=this.body.nodes[n];if(!r)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(r,e.highlightEdges)}if(t.edges)for(i=0;i<t.edges.length;i++){n=t.edges[i];var o=this.body.edges[n];if(!o)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(o)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:e})}},{key:"selectEdges",value:function(t){if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(this.body.nodes.hasOwnProperty(t)||delete this.selectionObj.nodes[t]);for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(this.body.edges.hasOwnProperty(e)||delete this.selectionObj.edges[e])}}]),t}();e["default"]=d},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(h){r=!0,o=h}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(103),l=n(h),c=i(1),d=function(){function t(e){r(this,t),this.body=e,this.initialRandomSeed=Math.round(1e6*Math.random()),this.randomSeed=this.initialRandomSeed,this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},c.extend(this.options,this.defaultOptions),this.bindEventListeners()}return a(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()})}},{key:"setOptions",value:function(t,e){if(void 0!==t){var i=this.options.hierarchical.enabled;if(c.selectiveDeepExtend(["randomSeed","improvedLayout"],this.options,t),c.mergeOptions(this.options,t,"hierarchical"),void 0!==t.randomSeed&&(this.initialRandomSeed=t.randomSeed),this.options.hierarchical.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),"RL"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?this.options.hierarchical.levelSeparation>0&&(this.options.hierarchical.levelSeparation*=-1):this.options.hierarchical.levelSeparation<0&&(this.options.hierarchical.levelSeparation*=-1),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(i===!0)return this.body.emitter.emit("refresh"),c.deepExtend(e,this.optionsBackup)}return e}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(this.options.hierarchical.enabled===!0){void 0===t.physics||t.physics===!0?(t.physics={enabled:void 0===this.optionsBackup.physics.enabled?!0:this.optionsBackup.physics.enabled,solver:"hierarchicalRepulsion"},this.optionsBackup.physics.enabled=void 0===this.optionsBackup.physics.enabled?!0:this.optionsBackup.physics.enabled,this.optionsBackup.physics.solver=this.optionsBackup.physics.solver||"barnesHut"):"object"===s(t.physics)?(this.optionsBackup.physics.enabled=void 0===t.physics.enabled?!0:t.physics.enabled,this.optionsBackup.physics.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):t.physics!==!1&&(this.optionsBackup.physics.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var e="horizontal";"RL"!==this.options.hierarchical.direction&&"LR"!==this.options.hierarchical.direction||(e="vertical"),void 0===t.edges?(this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1}):void 0===t.edges.smooth?(this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1):"boolean"==typeof t.edges.smooth?(this.optionsBackup.edges={
smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:e}):(void 0!==t.edges.smooth.type&&"dynamic"!==t.edges.smooth.type&&(e=t.edges.smooth.type),this.optionsBackup.edges={smooth:void 0===t.edges.smooth.enabled?!0:t.edges.smooth.enabled,type:void 0===t.edges.smooth.type?"dynamic":t.edges.smooth.type,roundness:void 0===t.edges.smooth.roundness?.5:t.edges.smooth.roundness,forceDirection:void 0===t.edges.smooth.forceDirection?!1:t.edges.smooth.forceDirection},t.edges.smooth={enabled:void 0===t.edges.smooth.enabled?!0:t.edges.smooth.enabled,type:e,roundness:void 0===t.edges.smooth.roundness?.5:t.edges.smooth.roundness,forceDirection:void 0===t.edges.smooth.forceDirection?!1:t.edges.smooth.forceDirection}),this.body.emitter.emit("_forceDisableDynamicCurves",e)}return t}},{key:"seededRandom",value:function(){var t=1e4*Math.sin(this.randomSeed++);return t-Math.floor(t)}},{key:"positionInitially",value:function(t){if(this.options.hierarchical.enabled!==!0){this.randomSeed=this.initialRandomSeed;for(var e=0;e<t.length;e++){var i=t[e],n=1*t.length+10,r=2*Math.PI*this.seededRandom();void 0===i.x&&(i.x=n*Math.cos(r)),void 0===i.y&&(i.y=n*Math.sin(r))}}}},{key:"layoutNetwork",value:function(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){for(var t=0,e=0;e<this.body.nodeIndices.length;e++){var i=this.body.nodes[this.body.nodeIndices[e]];i.predefinedPosition===!0&&(t+=1)}if(t<.5*this.body.nodeIndices.length){var n=10,r=0,o=100;if(this.body.nodeIndices.length>o){for(var s=this.body.nodeIndices.length;this.body.nodeIndices.length>o;){r+=1;var a=this.body.nodeIndices.length;r%3===0?this.body.modules.clustering.clusterBridges():this.body.modules.clustering.clusterOutliers();var h=this.body.nodeIndices.length;if(a==h&&r%3!==0||r>n)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*s)})}this.body.modules.kamadaKawai.solve(this.body.nodeIndices,this.body.edgeIndices,!0),this._shiftToCenter();for(var l=70,c=0;c<this.body.nodeIndices.length;c++)this.body.nodes[this.body.nodeIndices[c]].x+=(.5-this.seededRandom())*l,this.body.nodes[this.body.nodeIndices[c]].y+=(.5-this.seededRandom())*l;this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=l["default"].getRangeCore(this.body.nodes,this.body.nodeIndices),e=l["default"].findCenter(t),i=0;i<this.body.nodeIndices.length;i++)this.body.nodes[this.body.nodeIndices[i]].x-=e.x,this.body.nodes[this.body.nodeIndices[i]].y-=e.y}},{key:"_declusterAll",value:function(){for(var t=!0;t===!0;){t=!1;for(var e=0;e<this.body.nodeIndices.length;e++)this.body.nodes[this.body.nodeIndices[e]].isCluster===!0&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));t===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){var t=void 0,e=void 0,i=!1,n=!0,r=!1;this.hierarchicalLevels={},this.lastNodeOnLevel={},this.hierarchicalChildrenReference={},this.hierarchicalParentReference={},this.hierarchicalTrees={},this.treeIndex=-1,this.distributionOrdering={},this.distributionIndex={},this.distributionOrderingPresence={};for(e in this.body.nodes)this.body.nodes.hasOwnProperty(e)&&(t=this.body.nodes[e],void 0===t.options.x&&void 0===t.options.y&&(n=!1),void 0!==t.options.level?(i=!0,this.hierarchicalLevels[e]=t.options.level):r=!0);if(r===!0&&i===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");r===!0&&("hubsize"===this.options.hierarchical.sortMethod?this._determineLevelsByHubsize():"directed"===this.options.hierarchical.sortMethod?this._determineLevelsDirected():"custom"===this.options.hierarchical.sortMethod&&this._determineLevelsCustomCallback());for(var o in this.body.nodes)this.body.nodes.hasOwnProperty(o)&&void 0===this.hierarchicalLevels[o]&&(this.hierarchicalLevels[o]=0);var s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,e=!1,i={},n=function(){for(var e=a(),i=0;i<e.length-1;i++){var n=e[i].max-e[i+1].min;r(i+1,n+t.options.hierarchical.treeSpacing)}},r=function(e,i){for(var n in t.hierarchicalTrees)if(t.hierarchicalTrees.hasOwnProperty(n)&&t.hierarchicalTrees[n]===e){var r=t.body.nodes[n],o=t._getPositionForHierarchy(r);t._setPositionForHierarchy(r,o+i,void 0,!0)}},s=function(e){var i=1e9,n=-1e9;for(var r in t.hierarchicalTrees)if(t.hierarchicalTrees.hasOwnProperty(r)&&t.hierarchicalTrees[r]===e){var o=t._getPositionForHierarchy(t.body.nodes[r]);i=Math.min(o,i),n=Math.max(o,n)}return{min:i,max:n}},a=function(){for(var e=[],i=0;i<=t.treeIndex;i++)e.push(s(i));return e},h=function b(e,i){if(i[e.id]=!0,t.hierarchicalChildrenReference[e.id]){var n=t.hierarchicalChildrenReference[e.id];if(n.length>0)for(var r=0;r<n.length;r++)b(t.body.nodes[n[r]],i)}},l=function(e){var i=arguments.length<=1||void 0===arguments[1]?1e9:arguments[1],n=1e9,r=1e9,s=1e9,a=-1e9;for(var h in e)if(e.hasOwnProperty(h)){var l=t.body.nodes[h],c=t.hierarchicalLevels[l.id],d=t._getPositionForHierarchy(l),u=t._getSpaceAroundNode(l,e),f=o(u,2),p=f[0],m=f[1];n=Math.min(p,n),r=Math.min(m,r),i>=c&&(s=Math.min(d,s),a=Math.max(d,a))}return[s,a,n,r]},c=function E(e){var i=t.hierarchicalLevels[e];if(t.hierarchicalChildrenReference[e]){var n=t.hierarchicalChildrenReference[e];if(n.length>0)for(var r=0;r<n.length;r++)i=Math.max(i,E(n[r]))}return i},d=function(t,e){var i=c(t.id),n=c(e.id);return Math.min(i,n)},u=function(e,i){var n=t.hierarchicalParentReference[e.id],r=t.hierarchicalParentReference[i.id];if(void 0===n||void 0===r)return!1;for(var o=0;o<n.length;o++)for(var s=0;s<r.length;s++)if(n[o]==r[s])return!0;return!1},f=function(e,i,n){for(var r=0;r<i.length;r++){var o=i[r],s=t.distributionOrdering[o];if(s.length>1)for(var a=0;a<s.length-1;a++)u(s[a],s[a+1])===!0&&t.hierarchicalTrees[s[a].id]===t.hierarchicalTrees[s[a+1].id]&&e(s[a],s[a+1],n)}},p=function(i,n){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],s=t._getPositionForHierarchy(i),a=t._getPositionForHierarchy(n),c=Math.abs(a-s);if(c>t.options.hierarchical.nodeSpacing){var u={};u[i.id]=!0;var f={};f[n.id]=!0,h(i,u),h(n,f);var p=d(i,n),m=l(u,p),g=o(m,4),v=(g[0],g[1]),A=(g[2],g[3],l(f,p)),y=o(A,4),b=y[0],E=(y[1],y[2]),w=(y[3],Math.abs(v-b));if(w>t.options.hierarchical.nodeSpacing){var x=v-b+t.options.hierarchical.nodeSpacing;x<-E+t.options.hierarchical.nodeSpacing&&(x=-E+t.options.hierarchical.nodeSpacing),0>x&&(t._shiftBlock(n.id,x),e=!0,r===!0&&t._centerParent(n))}}},m=function(n,r){for(var s=r.id,a=r.edges,c=t.hierarchicalLevels[r.id],d=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,u={},f=[],p=0;p<a.length;p++){var m=a[p];if(m.toId!=m.fromId){var g=m.toId==s?m.from:m.to;u[a[p].id]=g,t.hierarchicalLevels[g.id]<c&&f.push(m)}}var v=function(e,i){for(var n=0,r=0;r<i.length;r++)if(void 0!==u[i[r].id]){var o=t._getPositionForHierarchy(u[i[r].id])-e;n+=o/Math.sqrt(o*o+d)}return n},A=function(e,i){for(var n=0,r=0;r<i.length;r++)if(void 0!==u[i[r].id]){var o=t._getPositionForHierarchy(u[i[r].id])-e;n-=d*Math.pow(o*o+d,-1.5)}return n},y=function(e,i){for(var n=t._getPositionForHierarchy(r),o={},s=0;e>s;s++){var a=v(n,i),h=A(n,i),l=40,c=Math.max(-l,Math.min(l,Math.round(a/h)));if(n-=c,void 0!==o[n])break;o[n]=s}return n},b=function(n){var s=t._getPositionForHierarchy(r);if(void 0===i[r.id]){var a={};a[r.id]=!0,h(r,a),i[r.id]=a}var c=l(i[r.id]),d=o(c,4),u=(d[0],d[1],d[2]),f=d[3],p=n-s,m=0;p>0?m=Math.min(p,f-t.options.hierarchical.nodeSpacing):0>p&&(m=-Math.min(-p,u-t.options.hierarchical.nodeSpacing)),0!=m&&(t._shiftBlock(r.id,m),e=!0)},E=function(i){var n=t._getPositionForHierarchy(r),s=t._getSpaceAroundNode(r),a=o(s,2),h=a[0],l=a[1],c=i-n,d=n;c>0?d=Math.min(n+(l-t.options.hierarchical.nodeSpacing),i):0>c&&(d=Math.max(n-(h-t.options.hierarchical.nodeSpacing),i)),d!==n&&(t._setPositionForHierarchy(r,d,void 0,!0),e=!0)},w=y(n,f);b(w),w=y(n,a),E(w)},g=function(i){var n=Object.keys(t.distributionOrdering);n=n.reverse();for(var r=0;i>r;r++){e=!1;for(var o=0;o<n.length;o++)for(var s=n[o],a=t.distributionOrdering[s],h=0;h<a.length;h++)m(1e3,a[h]);if(e!==!0)break}},v=function(i){var n=Object.keys(t.distributionOrdering);n=n.reverse();for(var r=0;i>r&&(e=!1,f(p,n,!0),e===!0);r++);},A=function(){for(var e in t.body.nodes)t.body.nodes.hasOwnProperty(e)&&t._centerParent(t.body.nodes[e])},y=function(){var e=Object.keys(t.distributionOrdering);e=e.reverse();for(var i=0;i<e.length;i++)for(var n=e[i],r=t.distributionOrdering[n],o=0;o<r.length;o++)t._centerParent(r[o])};this.options.hierarchical.blockShifting===!0&&(v(5),A()),this.options.hierarchical.edgeMinimization===!0&&g(20),this.options.hierarchical.parentCentralization===!0&&y(),n()}},{key:"_getSpaceAroundNode",value:function(t,e){var i=!0;void 0===e&&(i=!1);var n=this.hierarchicalLevels[t.id];if(void 0!==n){var r=this.distributionIndex[t.id],o=this._getPositionForHierarchy(t),s=1e9,a=1e9;if(0!==r){var h=this.distributionOrdering[n][r-1];if(i===!0&&void 0===e[h.id]||i===!1){var l=this._getPositionForHierarchy(h);s=o-l}}if(r!=this.distributionOrdering[n].length-1){var c=this.distributionOrdering[n][r+1];if(i===!0&&void 0===e[c.id]||i===!1){var d=this._getPositionForHierarchy(c);a=Math.min(a,d-o)}}return[s,a]}return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchicalParentReference[t.id])for(var e=this.hierarchicalParentReference[t.id],i=0;i<e.length;i++){var n=e[i],r=this.body.nodes[n];if(this.hierarchicalChildrenReference[n]){var s=1e9,a=-1e9,h=this.hierarchicalChildrenReference[n];if(h.length>0)for(var l=0;l<h.length;l++){var c=this.body.nodes[h[l]];s=Math.min(s,this._getPositionForHierarchy(c)),a=Math.max(a,this._getPositionForHierarchy(c))}var d=this._getPositionForHierarchy(r),u=this._getSpaceAroundNode(r),f=o(u,2),p=f[0],m=f[1],g=.5*(s+a),v=d-g;(0>v&&Math.abs(v)<m-this.options.hierarchical.nodeSpacing||v>0&&Math.abs(v)<p-this.options.hierarchical.nodeSpacing)&&this._setPositionForHierarchy(r,g,void 0,!0)}}}},{key:"_placeNodesByHierarchy",value:function(t){this.positionedNodes={};for(var e in t)if(t.hasOwnProperty(e)){var i=Object.keys(t[e]);i=this._indexArrayToNodes(i),this._sortNodeArray(i);for(var n=0,r=0;r<i.length;r++){var o=i[r];if(void 0===this.positionedNodes[o.id]){var s=this.options.hierarchical.nodeSpacing*n;n>0&&(s=this._getPositionForHierarchy(i[r-1])+this.options.hierarchical.nodeSpacing),this._setPositionForHierarchy(o,s,e),this._validataPositionAndContinue(o,e,s),n++}}}}},{key:"_placeBranchNodes",value:function(t,e){if(void 0!==this.hierarchicalChildrenReference[t]){for(var i=[],n=0;n<this.hierarchicalChildrenReference[t].length;n++)i.push(this.body.nodes[this.hierarchicalChildrenReference[t][n]]);this._sortNodeArray(i);for(var r=0;r<i.length;r++){var o=i[r],s=this.hierarchicalLevels[o.id];if(!(s>e&&void 0===this.positionedNodes[o.id]))return;var a=void 0;a=0===r?this._getPositionForHierarchy(this.body.nodes[t]):this._getPositionForHierarchy(i[r-1])+this.options.hierarchical.nodeSpacing,this._setPositionForHierarchy(o,a,s),this._validataPositionAndContinue(o,s,a)}for(var h=1e9,l=-1e9,c=0;c<i.length;c++){var d=i[c].id;h=Math.min(h,this._getPositionForHierarchy(this.body.nodes[d])),l=Math.max(l,this._getPositionForHierarchy(this.body.nodes[d]))}this._setPositionForHierarchy(this.body.nodes[t],.5*(h+l),e)}}},{key:"_validataPositionAndContinue",value:function(t,e,i){if(void 0!==this.lastNodeOnLevel[e]){var n=this._getPositionForHierarchy(this.body.nodes[this.lastNodeOnLevel[e]]);if(i-n<this.options.hierarchical.nodeSpacing){var r=n+this.options.hierarchical.nodeSpacing-i,o=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(o.withChild,r)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}},{key:"_indexArrayToNodes",value:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.body.nodes[t[i]]);return e}},{key:"_getDistribution",value:function(){var t={},e=void 0,i=void 0;for(e in this.body.nodes)if(this.body.nodes.hasOwnProperty(e)){i=this.body.nodes[e];var n=void 0===this.hierarchicalLevels[e]?0:this.hierarchicalLevels[e];"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?(i.y=this.options.hierarchical.levelSeparation*n,i.options.fixed.y=!0):(i.x=this.options.hierarchical.levelSeparation*n,i.options.fixed.x=!0),void 0===t[n]&&(t[n]={}),t[n][e]=i}return t}},{key:"_getHubSize",value:function(){var t=0;for(var e in this.body.nodes)if(this.body.nodes.hasOwnProperty(e)){var i=this.body.nodes[e];void 0===this.hierarchicalLevels[e]&&(t=i.edges.length<t?t:i.edges.length)}return t}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,e=1,i=function(e,i){void 0===t.hierarchicalLevels[i.id]&&(void 0===t.hierarchicalLevels[e.id]&&(t.hierarchicalLevels[e.id]=0),t.hierarchicalLevels[i.id]=t.hierarchicalLevels[e.id]+1)};e>0&&(e=this._getHubSize(),0!==e);)for(var n in this.body.nodes)if(this.body.nodes.hasOwnProperty(n)){var r=this.body.nodes[n];r.edges.length===e&&this._crawlNetwork(i,n)}}},{key:"_determineLevelsCustomCallback",value:function(){var t=this,e=1e5,i=function(t,e,i){},n=function(n,r,o){var s=t.hierarchicalLevels[n.id];void 0===s&&(t.hierarchicalLevels[n.id]=e);var a=i(l["default"].cloneOptions(n,"node"),l["default"].cloneOptions(r,"node"),l["default"].cloneOptions(o,"edge"));t.hierarchicalLevels[r.id]=t.hierarchicalLevels[n.id]+a};this._crawlNetwork(n),this._setMinLevelToZero()}},{key:"_determineLevelsDirected",value:function(){var t=this,e=1e4,i=function(i,n,r){var o=t.hierarchicalLevels[i.id];void 0===o&&(t.hierarchicalLevels[i.id]=e),r.toId==n.id?t.hierarchicalLevels[n.id]=t.hierarchicalLevels[i.id]+1:t.hierarchicalLevels[n.id]=t.hierarchicalLevels[i.id]-1};this._crawlNetwork(i),this._setMinLevelToZero()}},{key:"_setMinLevelToZero",value:function(){var t=1e9;for(var e in this.body.nodes)this.body.nodes.hasOwnProperty(e)&&void 0!==this.hierarchicalLevels[e]&&(t=Math.min(this.hierarchicalLevels[e],t));for(var i in this.body.nodes)this.body.nodes.hasOwnProperty(i)&&void 0!==this.hierarchicalLevels[i]&&(this.hierarchicalLevels[i]-=t)}},{key:"_generateMap",value:function(){var t=this,e=function(e,i){if(t.hierarchicalLevels[i.id]>t.hierarchicalLevels[e.id]){var n=e.id,r=i.id;void 0===t.hierarchicalChildrenReference[n]&&(t.hierarchicalChildrenReference[n]=[]),t.hierarchicalChildrenReference[n].push(r),void 0===t.hierarchicalParentReference[r]&&(t.hierarchicalParentReference[r]=[]),t.hierarchicalParentReference[r].push(n)}};this._crawlNetwork(e)}},{key:"_crawlNetwork",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],i=arguments[1],n={},r=0,o=function l(i,r){if(void 0===n[i.id]){void 0===t.hierarchicalTrees[i.id]&&(t.hierarchicalTrees[i.id]=r,t.treeIndex=Math.max(r,t.treeIndex)),n[i.id]=!0;for(var o=void 0,s=0;s<i.edges.length;s++)i.edges[s].connected===!0&&(o=i.edges[s].toId===i.id?i.edges[s].from:i.edges[s].to,i.id!==o.id&&(e(i,o,i.edges[s]),l(o,r)))}};if(void 0===i)for(var s=0;s<this.body.nodeIndices.length;s++){var a=this.body.nodes[this.body.nodeIndices[s]];void 0===n[a.id]&&(o(a,r),r+=1)}else{var h=this.body.nodes[i];if(void 0===h)return void console.error("Node not found:",i);o(h)}}},{key:"_shiftBlock",value:function(t,e){if("UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?this.body.nodes[t].x+=e:this.body.nodes[t].y+=e,void 0!==this.hierarchicalChildrenReference[t])for(var i=0;i<this.hierarchicalChildrenReference[t].length;i++)this._shiftBlock(this.hierarchicalChildrenReference[t][i],e)}},{key:"_findCommonParent",value:function(t,e){var i=this,n={},r=function s(t,e){if(void 0!==i.hierarchicalParentReference[e])for(var n=0;n<i.hierarchicalParentReference[e].length;n++){var r=i.hierarchicalParentReference[e][n];t[r]=!0,s(t,r)}},o=function a(t,e){if(void 0!==i.hierarchicalParentReference[e])for(var n=0;n<i.hierarchicalParentReference[e].length;n++){var r=i.hierarchicalParentReference[e][n];if(void 0!==t[r])return{foundParent:r,withChild:e};var o=a(t,r);if(null!==o.foundParent)return o}return{foundParent:null,withChild:e}};return r(n,t),o(n,e)}},{key:"_setPositionForHierarchy",value:function(t,e,i){var n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];n!==!0&&(void 0===this.distributionOrdering[i]&&(this.distributionOrdering[i]=[],this.distributionOrderingPresence[i]={}),void 0===this.distributionOrderingPresence[i][t.id]&&(this.distributionOrdering[i].push(t),this.distributionIndex[t.id]=this.distributionOrdering[i].length-1),this.distributionOrderingPresence[i][t.id]=!0),"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?t.x=e:t.y=e}},{key:"_getPositionForHierarchy",value:function(t){return"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?t.x:t.y}},{key:"_sortNodeArray",value:function(t){t.length>1&&("UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?t.sort(function(t,e){return t.x-e.x}):t.sort(function(t,e){return t.y-e.y}))}}]),t}();e["default"]=d},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(1),s=i(20),a=i(28),h=function(){function t(e,i,r){var s=this;n(this,t),this.body=e,this.canvas=i,this.selectionHandler=r,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},o.extend(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){s._clean()}),this.body.emitter.on("_dataChanged",this._restore.bind(this)),this.body.emitter.on("_resetData",this._restore.bind(this))}return r(t,[{key:"_restore",value:function(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,e,i){void 0!==e&&(void 0!==e.locale?this.options.locale=e.locale:this.options.locale=i.locale,void 0!==e.locales?this.options.locales=e.locales:this.options.locales=i.locales),void 0!==t&&("boolean"==typeof t?this.options.enabled=t:(this.options.enabled=!0,o.deepExtend(this.options,t)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var t=this.selectionHandler._getSelectedNodeCount(),e=this.selectionHandler._getSelectedEdgeCount(),i=t+e,n=this.options.locales[this.options.locale],r=!1;this.options.addNode!==!1&&(this._createAddNodeButton(n),r=!0),this.options.addEdge!==!1&&(r===!0?this._createSeperator(1):r=!0,this._createAddEdgeButton(n)),1===t&&"function"==typeof this.options.editNode?(r===!0?this._createSeperator(2):r=!0,this._createEditNodeButton(n)):1===e&&0===t&&this.options.editEdge!==!1&&(r===!0?this._createSeperator(3):r=!0,this._createEditEdgeButton(n)),0!==i&&(t>0&&this.options.deleteNode!==!1?(r===!0&&this._createSeperator(4),this._createDeleteButton(n)):0===t&&this.options.deleteEdge!==!1&&(r===!0&&this._createSeperator(4),this._createDeleteButton(n))),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this)),this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean();var e=this.selectionHandler._getSelectedNode();if(void 0!==e){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(e.isCluster!==!0){var i=o.deepExtend({},e.options,!1);if(i.x=e.x,i.y=e.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(i,function(e){null!==e&&void 0!==e&&"editNode"===t.inMode&&t.body.data.nodes.getDataSet().update(e),t.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this)),this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this)),this._temporaryBindUI("onDrag",this._dragControlNode.bind(this)),this._temporaryBindUI("onRelease",this._finishConnect.bind(this)),this._temporaryBindUI("onDragStart",function(){}),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){var t=this;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",this.guiEnabled===!0){var e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId?!function(){var e=t.body.edges[t.edgeBeingEditedId],i=t._getNewTargetNode(e.from.x,e.from.y),n=t._getNewTargetNode(e.to.x,e.to.y);t.temporaryIds.nodes.push(i.id),t.temporaryIds.nodes.push(n.id),t.body.nodes[i.id]=i,t.body.nodeIndices.push(i.id),t.body.nodes[n.id]=n,t.body.nodeIndices.push(n.id),t._temporaryBindUI("onTouch",t._controlNodeTouch.bind(t)),t._temporaryBindUI("onTap",function(){}),t._temporaryBindUI("onHold",function(){}),t._temporaryBindUI("onDragStart",t._controlNodeDragStart.bind(t)),t._temporaryBindUI("onDrag",t._controlNodeDrag.bind(t)),t._temporaryBindUI("onDragEnd",t._controlNodeDragEnd.bind(t)),t._temporaryBindUI("onMouseMove",function(){}),t._temporaryBindEvent("beforeDrawing",function(t){var r=e.edgeType.findBorderPositions(t);i.selected===!1&&(i.x=r.from.x,i.y=r.from.y),n.selected===!1&&(n.x=r.to.x,n.y=r.to.y)}),t.body.emitter.emit("_redraw")}():this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";var e=this.selectionHandler.getSelectedNodes(),i=this.selectionHandler.getSelectedEdges(),n=void 0;if(e.length>0){for(var r=0;r<e.length;r++)if(this.body.nodes[e[r]].isCluster===!0)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(n=this.options.deleteNode)}else i.length>0&&"function"==typeof this.options.deleteEdge&&(n=this.options.deleteEdge);if("function"==typeof n){var o={nodes:e,edges:i};if(2!==n.length)throw new Error("The function for delete does not support two arguments (data, callback)");n(o,function(e){null!==e&&void 0!==e&&"delete"===t.inMode?(t.body.data.edges.getDataSet().remove(e.edges),t.body.data.nodes.getDataSet().remove(e.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(t,e){var i=o.deepExtend({},this.options.controlNodeStyle);i.id="targetNode"+o.randomUUID(),i.hidden=!1,i.physics=!1,i.x=t,i.y=e;var n=this.body.functions.createNode(i);return n.shape.boundingBox={left:t,right:t,top:e,bottom:e},n}},{key:"_createEditButton",value:function(){this._clean(),this.manipulationDOM={},o.recursiveDOMDelete(this.editModeDiv);var t=this.options.locales[this.options.locale],e=this._createButton("editMode","vis-button vis-edit vis-edit-mode",t.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(e),this._bindHammerToDiv(e,this.toggleEditMode.bind(this))}},{key:"_clean",value:function(){this.inMode=!1,this.guiEnabled===!0&&(o.recursiveDOMDelete(this.editModeDiv),o.recursiveDOMDelete(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var t=0;t<this.manipulationHammers.length;t++)this.manipulationHammers[t].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),o.recursiveDOMDelete(this.manipulationDiv),o.recursiveDOMDelete(this.editModeDiv),o.recursiveDOMDelete(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var e=this._createButton("addNode","vis-button vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function(t){var e=this._createButton("addEdge","vis-button vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function(t){var e=this._createButton("editNode","vis-button vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function(t){var e=this._createButton("editEdge","vis-button vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function(t){if(this.options.rtl)var e="vis-button vis-delete-rtl";else var e="vis-button vis-delete";var i=this._createButton("delete",e,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function(t){var e=this._createButton("back","vis-button vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function(t,e,i){var n=arguments.length<=3||void 0===arguments[3]?"vis-label":arguments[3];return this.manipulationDOM[t+"Div"]=document.createElement("div"),this.manipulationDOM[t+"Div"].className=e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=n,this.manipulationDOM[t+"Label"].innerHTML=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",t))}},{key:"_temporaryBindEvent",value:function(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}},{key:"_temporaryBindUI",value:function(t,e){if(void 0===this.body.eventListeners[t])throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+JSON.stringify(Object.keys(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var e=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,i)}this.temporaryEventFunctions=[]}},{
key:"_bindHammerToDiv",value:function(t,e){var i=new s(t,{});a.onTouch(i,e),this.manipulationHammers.push(i)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var e=this.body.edgeIndices.indexOf(this.temporaryIds.edges[t]);-1!==e&&this.body.edgeIndices.splice(e,1)}for(var i=0;i<this.temporaryIds.nodes.length;i++){delete this.body.nodes[this.temporaryIds.nodes[i]];var n=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[i]);-1!==n&&this.body.nodeIndices.splice(n,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=o.extend({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(t){var e=this.lastTouch,i=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],r=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var s=n.isOverlappingWith(i),a=r.isOverlappingWith(i);s===!0?(this.selectedControlNode=n,o.edgeType.from=n):a===!0&&(this.selectedControlNode=r,o.edgeType.to=r),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(e);if(void 0!==this.selectedControlNode)this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y;else{var n=e.x-this.lastTouch.x,r=e.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+n,y:this.lastTouch.translation.y+r}}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var r=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,s=r.length-1;s>=0;s--)if(r[s]!==this.selectedControlNode.id){o=this.body.nodes[r[s]];break}if(void 0!==o&&void 0!==this.selectedControlNode)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,n.to.id):this._performEditEdge(n.from.id,o.id)}else n.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=o.extend({},this.body.view.translation);var e=this.lastTouch,i=this.selectionHandler.getNodeAt(e);if(void 0!==i)if(i.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var n=this._getNewTargetNode(i.x,i.y);this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id);var r=this.body.functions.createEdge({id:"connectionEdge"+o.randomUUID(),from:i.id,to:n.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[r.id]=r,this.body.edgeIndices.push(r.id),this.temporaryIds.nodes.push(n.id),this.temporaryIds.edges.push(r.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(t){var e=this.body.functions.getPointer(t.center);if(void 0!==this.temporaryIds.nodes[0]){var i=this.body.nodes[this.temporaryIds.nodes[0]];i.x=this.canvas._XconvertDOMtoCanvas(e.x),i.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else{var n=e.x-this.lastTouch.x,r=e.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+n,y:this.lastTouch.translation.y+r}}}},{key:"_finishConnect",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,s=r.length-1;s>=0;s--)if(-1===this.temporaryIds.nodes.indexOf(r[s])){o=this.body.nodes[r[s]];break}this._cleanupTemporaryNodesAndEdges(),void 0!==o&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[n]&&void 0!==this.body.nodes[o.id]&&this._performAddEdge(n,o.id)),this.body.emitter.emit("_redraw")}},{key:"_performAddNode",value:function(t){var e=this,i={id:o.randomUUID(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(i,function(t){null!==t&&void 0!==t&&"addNode"===e.inMode&&(e.body.data.nodes.getDataSet().add(t),e.showManipulatorToolbar())})}else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,e){var i=this,n={from:t,to:e};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(n,function(t){null!==t&&void 0!==t&&"addEdge"===i.inMode&&(i.body.data.edges.getDataSet().add(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,e){var i=this,n={id:this.edgeBeingEditedId,from:t,to:e};if("function"==typeof this.options.editEdge){if(2!==this.options.editEdge.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editEdge(n,function(t){null===t||void 0===t||"editEdge"!==i.inMode?(i.body.edges[n.id].updateEdgeType(),i.body.emitter.emit("_redraw")):(i.body.data.edges.getDataSet().update(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),t}();e["default"]=h},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i="string",n="boolean",r="number",o="array",s="object",a="dom",h="any",l={configure:{enabled:{"boolean":n},filter:{"boolean":n,string:i,array:o,"function":"function"},container:{dom:a},showButton:{"boolean":n},__type__:{object:s,"boolean":n,string:i,array:o,"function":"function"}},edges:{arrows:{to:{enabled:{"boolean":n},scaleFactor:{number:r},__type__:{object:s,"boolean":n}},middle:{enabled:{"boolean":n},scaleFactor:{number:r},__type__:{object:s,"boolean":n}},from:{enabled:{"boolean":n},scaleFactor:{number:r},__type__:{object:s,"boolean":n}},__type__:{string:["from","to","middle"],object:s}},arrowStrikethrough:{"boolean":n},color:{color:{string:i},highlight:{string:i},hover:{string:i},inherit:{string:["from","to","both"],"boolean":n},opacity:{number:r},__type__:{object:s,string:i}},dashes:{"boolean":n,array:o},font:{color:{string:i},size:{number:r},face:{string:i},background:{string:i},strokeWidth:{number:r},strokeColor:{string:i},align:{string:["horizontal","top","middle","bottom"]},__type__:{object:s,string:i}},hidden:{"boolean":n},hoverWidth:{"function":"function",number:r},label:{string:i,undefined:"undefined"},labelHighlightBold:{"boolean":n},length:{number:r,undefined:"undefined"},physics:{"boolean":n},scaling:{min:{number:r},max:{number:r},label:{enabled:{"boolean":n},min:{number:r},max:{number:r},maxVisible:{number:r},drawThreshold:{number:r},__type__:{object:s,"boolean":n}},customScalingFunction:{"function":"function"},__type__:{object:s}},selectionWidth:{"function":"function",number:r},selfReferenceSize:{number:r},shadow:{enabled:{"boolean":n},color:{string:i},size:{number:r},x:{number:r},y:{number:r},__type__:{object:s,"boolean":n}},smooth:{enabled:{"boolean":n},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:r},forceDirection:{string:["horizontal","vertical","none"],"boolean":n},__type__:{object:s,"boolean":n}},title:{string:i,undefined:"undefined"},width:{number:r},value:{number:r,undefined:"undefined"},__type__:{object:s}},groups:{useDefaultGroups:{"boolean":n},__any__:"get from nodes, will be overwritten below",__type__:{object:s}},interaction:{dragNodes:{"boolean":n},dragView:{"boolean":n},hideEdgesOnDrag:{"boolean":n},hideNodesOnDrag:{"boolean":n},hover:{"boolean":n},keyboard:{enabled:{"boolean":n},speed:{x:{number:r},y:{number:r},zoom:{number:r},__type__:{object:s}},bindToWindow:{"boolean":n},__type__:{object:s,"boolean":n}},multiselect:{"boolean":n},navigationButtons:{"boolean":n},selectable:{"boolean":n},selectConnectedEdges:{"boolean":n},hoverConnectedEdges:{"boolean":n},tooltipDelay:{number:r},zoomView:{"boolean":n},__type__:{object:s}},layout:{randomSeed:{undefined:"undefined",number:r},improvedLayout:{"boolean":n},hierarchical:{enabled:{"boolean":n},levelSeparation:{number:r},nodeSpacing:{number:r},treeSpacing:{number:r},blockShifting:{"boolean":n},edgeMinimization:{"boolean":n},parentCentralization:{"boolean":n},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},__type__:{object:s,"boolean":n}},__type__:{object:s}},manipulation:{enabled:{"boolean":n},initiallyActive:{"boolean":n},addNode:{"boolean":n,"function":"function"},addEdge:{"boolean":n,"function":"function"},editNode:{"function":"function"},editEdge:{"boolean":n,"function":"function"},deleteNode:{"boolean":n,"function":"function"},deleteEdge:{"boolean":n,"function":"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:s,"boolean":n}},nodes:{borderWidth:{number:r},borderWidthSelected:{number:r,undefined:"undefined"},brokenImage:{string:i,undefined:"undefined"},color:{border:{string:i},background:{string:i},highlight:{border:{string:i},background:{string:i},__type__:{object:s,string:i}},hover:{border:{string:i},background:{string:i},__type__:{object:s,string:i}},__type__:{object:s,string:i}},fixed:{x:{"boolean":n},y:{"boolean":n},__type__:{object:s,"boolean":n}},font:{align:{string:i},color:{string:i},size:{number:r},face:{string:i},background:{string:i},strokeWidth:{number:r},strokeColor:{string:i},__type__:{object:s,string:i}},group:{string:i,number:r,undefined:"undefined"},hidden:{"boolean":n},icon:{face:{string:i},code:{string:i},size:{number:r},color:{string:i},__type__:{object:s}},id:{string:i,number:r},image:{string:i,undefined:"undefined"},label:{string:i,undefined:"undefined"},labelHighlightBold:{"boolean":n},level:{number:r,undefined:"undefined"},mass:{number:r},physics:{"boolean":n},scaling:{min:{number:r},max:{number:r},label:{enabled:{"boolean":n},min:{number:r},max:{number:r},maxVisible:{number:r},drawThreshold:{number:r},__type__:{object:s,"boolean":n}},customScalingFunction:{"function":"function"},__type__:{object:s}},shadow:{enabled:{"boolean":n},color:{string:i},size:{number:r},x:{number:r},y:{number:r},__type__:{object:s,"boolean":n}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon"]},shapeProperties:{borderDashes:{"boolean":n,array:o},borderRadius:{number:r},interpolation:{"boolean":n},useImageSize:{"boolean":n},useBorderWithImage:{"boolean":n},__type__:{object:s}},size:{number:r},title:{string:i,undefined:"undefined"},value:{number:r,undefined:"undefined"},x:{number:r},y:{number:r},__type__:{object:s}},physics:{enabled:{"boolean":n},barnesHut:{gravitationalConstant:{number:r},centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},damping:{number:r},avoidOverlap:{number:r},__type__:{object:s}},forceAtlas2Based:{gravitationalConstant:{number:r},centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},damping:{number:r},avoidOverlap:{number:r},__type__:{object:s}},repulsion:{centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},nodeDistance:{number:r},damping:{number:r},__type__:{object:s}},hierarchicalRepulsion:{centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},nodeDistance:{number:r},damping:{number:r},__type__:{object:s}},maxVelocity:{number:r},minVelocity:{number:r},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{"boolean":n},iterations:{number:r},updateInterval:{number:r},onlyDynamicEdges:{"boolean":n},fit:{"boolean":n},__type__:{object:s,"boolean":n}},timestep:{number:r},adaptiveTimestep:{"boolean":n},__type__:{object:s,"boolean":n}},autoResize:{"boolean":n},clickToUse:{"boolean":n},locale:{string:i},locales:{__any__:{any:h},__type__:{object:s}},height:{string:i},width:{string:i},__type__:{object:s}};l.groups.__any__=l.nodes,l.manipulation.controlNodeStyle=l.nodes;var c={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05]},middle:{enabled:!1,scaleFactor:[1,0,3,.05]},from:{enabled:!1,scaleFactor:[1,0,3,.05]}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01]},global:{locale:["en","nl"]}};e.allOptions=l,e.configureOptions=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(h){r=!0,o=h}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(116),h=n(a),l=function(){function t(e,i,n){r(this,t),this.body=e,this.springLength=i,this.springConstant=n,this.distanceSolver=new h["default"]}return s(t,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(n),this._createK_matrix(n);for(var r=.01,s=1,a=0,h=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),l=5,c=1e9,d=0,u=0,f=0,p=0,m=0;c>r&&h>a;){a+=1;var g=this._getHighestEnergyNode(i),v=o(g,4);for(d=v[0],c=v[1],u=v[2],f=v[3],p=c,m=0;p>s&&l>m;){m+=1,this._moveNode(d,u,f);var A=this._getEnergy(d),y=o(A,3);p=y[0],u=y[1],f=y[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,n=0,r=e[0],s=0,a=0,h=0;h<e.length;h++){var l=e[h];if(i[l].predefinedPosition===!1||i[l].isCluster===!0&&t===!0||i[l].options.fixed.x===!0||i[l].options.fixed.y===!0){var c=this._getEnergy(l),d=o(c,3),u=d[0],f=d[1],p=d[2];u>n&&(n=u,r=l,s=f,a=p)}}return[r,n,s,a]}},{key:"_getEnergy",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,n=i[t].x,r=i[t].y,o=0,s=0,a=0;a<e.length;a++){var h=e[a];if(h!==t){var l=i[h].x,c=i[h].y,d=1/Math.sqrt(Math.pow(n-l,2)+Math.pow(r-c,2));o+=this.K_matrix[t][h]*(n-l-this.L_matrix[t][h]*(n-l)*d),s+=this.K_matrix[t][h]*(r-c-this.L_matrix[t][h]*(r-c)*d)}}var u=Math.sqrt(Math.pow(o,2)+Math.pow(s,2));return[u,o,s]}},{key:"_moveNode",value:function(t,e,i){for(var n=this.body.nodeIndices,r=this.body.nodes,o=0,s=0,a=0,h=r[t].x,l=r[t].y,c=0;c<n.length;c++){var d=n[c];if(d!==t){var u=r[d].x,f=r[d].y,p=1/Math.pow(Math.pow(h-u,2)+Math.pow(l-f,2),1.5);o+=this.K_matrix[t][d]*(1-this.L_matrix[t][d]*Math.pow(l-f,2)*p),s+=this.K_matrix[t][d]*(this.L_matrix[t][d]*(h-u)*(l-f)*p),a+=this.K_matrix[t][d]*(1-this.L_matrix[t][d]*Math.pow(h-u,2)*p)}}var m=o,g=s,v=e,A=a,y=i,b=(v/m+y/g)/(g/m-A/g),E=-(g*b+v)/m;r[t].x+=E,r[t].y+=b}},{key:"_createL_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var n=0;n<e.length;n++){this.L_matrix[e[n]]={};for(var r=0;r<e.length;r++)this.L_matrix[e[n]][e[r]]=i*t[e[n]][e[r]]}}},{key:"_createK_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var n=0;n<e.length;n++){this.K_matrix[e[n]]={};for(var r=0;r<e.length;r++)this.K_matrix[e[n]][e[r]]=i*Math.pow(t[e[n]][e[r]],-2)}}}]),t}();e["default"]=l},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){i(this,t)}return n(t,[{key:"getDistances",value:function(t,e,i){for(var n={},r=t.edges,o=0;o<e.length;o++){n[e[o]]={},n[e[o]]={};for(var s=0;s<e.length;s++)n[e[o]][e[s]]=o==s?0:1e9,n[e[o]][e[s]]=o==s?0:1e9}for(var a=0;a<i.length;a++){var h=r[i[a]];h.connected===!0&&void 0!==n[h.fromId]&&void 0!==n[h.toId]&&(n[h.fromId][h.toId]=1,n[h.toId][h.fromId]=1)}for(var l=e.length,c=0;l>c;c++)for(var d=0;l-1>d;d++)for(var u=d+1;l>u;u++)n[e[d]][e[u]]=Math.min(n[e[d]][e[u]],n[e[d]][e[c]]+n[e[c]][e[u]]),n[e[u]][e[d]]=n[e[d]][e[u]];return n}}]),t}();e["default"]=r},function(t,e){"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(t,e,i){this.beginPath(),this.arc(t,e,i,0,2*Math.PI,!1),this.closePath()},CanvasRenderingContext2D.prototype.square=function(t,e,i){this.beginPath(),this.rect(t-i,e-i,2*i,2*i),this.closePath()},CanvasRenderingContext2D.prototype.triangle=function(t,e,i){this.beginPath(),i*=1.15,e+=.275*i;var n=2*i,r=n/2,o=Math.sqrt(3)/6*n,s=Math.sqrt(n*n-r*r);this.moveTo(t,e-(s-o)),this.lineTo(t+r,e+o),this.lineTo(t-r,e+o),this.lineTo(t,e-(s-o)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(t,e,i){this.beginPath(),i*=1.15,e-=.275*i;var n=2*i,r=n/2,o=Math.sqrt(3)/6*n,s=Math.sqrt(n*n-r*r);this.moveTo(t,e+(s-o)),this.lineTo(t+r,e-o),this.lineTo(t-r,e-o),this.lineTo(t,e+(s-o)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(t,e,i){this.beginPath(),i*=.82,e+=.1*i;for(var n=0;10>n;n++){var r=n%2===0?1.3*i:.5*i;this.lineTo(t+r*Math.sin(2*n*Math.PI/10),e-r*Math.cos(2*n*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.diamond=function(t,e,i){this.beginPath(),this.lineTo(t,e+i),this.lineTo(t+i,e),this.lineTo(t,e-i),this.lineTo(t-i,e),this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,r){var o=Math.PI/180;0>i-2*r&&(r=i/2),0>n-2*r&&(r=n/2),this.beginPath(),this.moveTo(t+r,e),this.lineTo(t+i-r,e),this.arc(t+i-r,e+r,r,270*o,360*o,!1),this.lineTo(t+i,e+n-r),this.arc(t+i-r,e+n-r,r,0,90*o,!1),this.lineTo(t+r,e+n),this.arc(t+r,e+n-r,r,90*o,180*o,!1),this.lineTo(t,e+r),this.arc(t+r,e+r,r,180*o,270*o,!1),this.closePath()},CanvasRenderingContext2D.prototype.ellipse=function(t,e,i,n){var r=.5522848,o=i/2*r,s=n/2*r,a=t+i,h=e+n,l=t+i/2,c=e+n/2;this.beginPath(),this.moveTo(t,c),this.bezierCurveTo(t,c-s,l-o,e,l,e),this.bezierCurveTo(l+o,e,a,c-s,a,c),this.bezierCurveTo(a,c+s,l+o,h,l,h),this.bezierCurveTo(l-o,h,t,c+s,t,c),this.closePath()},CanvasRenderingContext2D.prototype.database=function(t,e,i,n){var r=1/3,o=i,s=n*r,a=.5522848,h=o/2*a,l=s/2*a,c=t+o,d=e+s,u=t+o/2,f=e+s/2,p=e+(n-s/2),m=e+n;this.beginPath(),this.moveTo(c,f),this.bezierCurveTo(c,f+l,u+h,d,u,d),this.bezierCurveTo(u-h,d,t,f+l,t,f),this.bezierCurveTo(t,f-l,u-h,e,u,e),this.bezierCurveTo(u+h,e,c,f-l,c,f),this.lineTo(c,p),this.bezierCurveTo(c,p+l,u+h,m,u,m),this.bezierCurveTo(u-h,m,t,p+l,t,p),this.lineTo(t,f)},CanvasRenderingContext2D.prototype.arrow=function(t,e,i,n){var r=t-n*Math.cos(i),o=e-n*Math.sin(i),s=t-.9*n*Math.cos(i),a=e-.9*n*Math.sin(i),h=r+n/3*Math.cos(i+.5*Math.PI),l=o+n/3*Math.sin(i+.5*Math.PI),c=r+n/3*Math.cos(i-.5*Math.PI),d=o+n/3*Math.sin(i-.5*Math.PI);this.beginPath(),this.moveTo(t,e),this.lineTo(h,l),this.lineTo(s,a),this.lineTo(c,d),this.closePath()},CanvasRenderingContext2D.prototype.dashedLine=function(t,e,i,n,r){this.beginPath(),this.moveTo(t,e);for(var o=r.length,s=i-t,a=n-e,h=a/s,l=Math.sqrt(s*s+a*a),c=0,d=!0,u=0,f=r[0];l>=.1;)f=r[c++%o],f>l&&(f=l),u=Math.sqrt(f*f/(1+h*h)),u=0>s?-u:u,t+=u,e+=h*u,d===!0?this.lineTo(t,e):this.moveTo(t,e),l-=f,d=!d})},function(t,e){function i(t){return H=t,f()}function n(){P=0,D=H.charAt(0)}function r(){P++,D=H.charAt(P)}function o(){return H.charAt(P+1)}function s(t){return I.test(t)}function a(t,e){if(t||(t={}),e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function h(t,e,i){for(var n=e.split("."),r=t;n.length;){var o=n.shift();n.length?(r[o]||(r[o]={}),r=r[o]):r[o]=i}}function l(t,e){for(var i,n,r=null,o=[t],s=t;s.parent;)o.push(s.parent),s=s.parent;if(s.nodes)for(i=0,n=s.nodes.length;n>i;i++)if(e.id===s.nodes[i].id){r=s.nodes[i];break}for(r||(r={id:e.id},t.node&&(r.attr=a(r.attr,t.node))),i=o.length-1;i>=0;i--){var h=o[i];h.nodes||(h.nodes=[]),-1===h.nodes.indexOf(r)&&h.nodes.push(r)}e.attr&&(r.attr=a(r.attr,e.attr))}function c(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var i=a({},t.edge);e.attr=a(i,e.attr)}}function d(t,e,i,n,r){var o={from:e,to:i,type:n};return t.edge&&(o.attr=a({},t.edge)),o.attr=a(o.attr||{},r),o}function u(){for(L=k.NULL,O="";" "===D||"    "===D||"\n"===D||"\r"===D;)r();do{var t=!1;if("#"===D){for(var e=P-1;" "===H.charAt(e)||"   "===H.charAt(e);)e--;if("\n"===H.charAt(e)||""===H.charAt(e)){for(;""!=D&&"\n"!=D;)r();t=!0}}if("/"===D&&"/"===o()){for(;""!=D&&"\n"!=D;)r();t=!0}if("/"===D&&"*"===o()){for(;""!=D;){if("*"===D&&"/"===o()){r(),r();break}r()}t=!0}for(;" "===D||" "===D||"\n"===D||"\r"===D;)r()}while(t);if(""===D)return void(L=k.DELIMITER);var i=D+o();if(M[i])return L=k.DELIMITER,O=i,r(),void r();if(M[D])return L=k.DELIMITER,O=D,void r();if(s(D)||"-"===D){for(O+=D,r();s(D);)O+=D,r();return"false"===O?O=!1:"true"===O?O=!0:isNaN(Number(O))||(O=Number(O)),void(L=k.IDENTIFIER)}if('"'===D){for(r();""!=D&&('"'!=D||'"'===D&&'"'===o());)O+=D,'"'===D&&r(),r();if('"'!=D)throw E('End of string " expected');return r(),void(L=k.IDENTIFIER)}for(L=k.UNKNOWN;""!=D;)O+=D,r();throw new SyntaxError('Syntax error in part "'+w(O,30)+'"')}function f(){var t={};if(n(),u(),"strict"===O&&(t.strict=!0,u()),"graph"!==O&&"digraph"!==O||(t.type=O,u()),L===k.IDENTIFIER&&(t.id=O,u()),"{"!=O)throw E("Angle bracket { expected");if(u(),p(t),"}"!=O)throw E("Angle bracket } expected");if(u(),""!==O)throw E("End of file expected");return u(),delete t.node,delete t.edge,delete t.graph,t}function p(t){for(;""!==O&&"}"!=O;)m(t),";"===O&&u()}function m(t){var e=g(t);if(e)return void y(t,e);var i=v(t);if(!i){if(L!=k.IDENTIFIER)throw E("Identifier expected");var n=O;if(u(),"="===O){if(u(),L!=k.IDENTIFIER)throw E("Identifier expected");t[n]=O,u()}else A(t,n)}}function g(t){var e=null;if("subgraph"===O&&(e={},e.type="subgraph",u(),L===k.IDENTIFIER&&(e.id=O,u())),"{"===O){if(u(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,p(e),"}"!=O)throw E("Angle bracket } expected");u(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function v(t){return"node"===O?(u(),t.node=b(),"node"):"edge"===O?(u(),t.edge=b(),"edge"):"graph"===O?(u(),t.graph=b(),"graph"):null}function A(t,e){var i={id:e},n=b();n&&(i.attr=n),l(t,i),y(t,e)}function y(t,e){for(;"->"===O||"--"===O;){var i,n=O;u();var r=g(t);if(r)i=r;else{if(L!=k.IDENTIFIER)throw E("Identifier or subgraph expected");i=O,l(t,{id:i}),u()}var o=b(),s=d(t,e,i,n,o);c(t,s),e=i}}function b(){for(var t=null;"["===O;){for(u(),t={};""!==O&&"]"!=O;){if(L!=k.IDENTIFIER)throw E("Attribute name expected");var e=O;if(u(),"="!=O)throw E("Equal sign = expected");if(u(),L!=k.IDENTIFIER)throw E("Attribute value expected");var i=O;h(t,e,i),u(),","==O&&u()}if("]"!=O)throw E("Bracket ] expected");u()}return t}function E(t){return new SyntaxError(t+', got "'+w(O,30)+'" (char '+P+")")}function w(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function x(t,e,i){Array.isArray(t)?t.forEach(function(t){Array.isArray(e)?e.forEach(function(e){i(t,e)}):i(t,e)}):Array.isArray(e)?e.forEach(function(e){i(t,e)}):i(t,e)}function _(t,e,i){for(var n=e.split("."),r=n.pop(),o=t,s=0;s<n.length;s++){var a=n[s];a in o||(o[a]={}),o=o[a]}return o[r]=i,t}function T(t,e){var i={};for(var n in t)if(t.hasOwnProperty(n)){var r=e[n];Array.isArray(r)?r.forEach(function(e){_(i,e,t[n])}):"string"==typeof r?_(i,r,t[n]):_(i,n,t[n])}return i}function S(t){var e=i(t),n={nodes:[],edges:[],options:{}};if(e.nodes&&e.nodes.forEach(function(t){var e={id:t.id,label:String(t.label||t.id)};a(e,T(t.attr,R)),e.image&&(e.shape="image"),n.nodes.push(e)}),e.edges){var r=function(t){var e={from:t.from,to:t.to};return a(e,T(t.attr,C)),e.arrows="->"===t.type?"to":void 0,e};e.edges.forEach(function(t){var e,i;e=t.from instanceof Object?t.from.nodes:{id:t.from},i=t.to instanceof Object?t.to.nodes:{id:t.to},t.from instanceof Object&&t.from.edges&&t.from.edges.forEach(function(t){var e=r(t);n.edges.push(e)}),x(e,i,function(e,i){var o=d(n,e.id,i.id,t.type,t.attr),s=r(o);n.edges.push(s)}),t.to instanceof Object&&t.to.edges&&t.to.edges.forEach(function(t){var e=r(t);n.edges.push(e)})})}return e.attr&&(n.options=e.attr),n}var R={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},C=Object.create(R);C.color="color.color";var k={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},M={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},H="",P=0,D="",O="",L=k.NULL,I=/[a-zA-Z_0-9.:#]/;e.parseDOT=i,e.DOTToGraph=S},function(t,e){function i(t,e){var i=[],n=[],r={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};void 0!==e&&(void 0!==e.fixed&&(r.nodes.fixed=e.fixed),void 0!==e.parseColor&&(r.nodes.parseColor=e.parseColor),void 0!==e.inheritColor&&(r.edges.inheritColor=e.inheritColor));for(var o=t.edges,s=t.nodes,a=0;a<o.length;a++){var h={},l=o[a];h.id=l.id,h.from=l.source,h.to=l.target,h.attributes=l.attributes,h.label=l.label,h.title=void 0!==l.attributes?l.attributes.title:void 0,"Directed"===l.type&&(h.arrows="to"),l.color&&r.inheritColor===!1&&(h.color=l.color),i.push(h)}for(var a=0;a<s.length;a++){var c={},d=s[a];c.id=d.id,c.attributes=d.attributes,c.title=d.title,c.x=d.x,c.y=d.y,c.label=d.label,c.title=void 0!==d.attributes?d.attributes.title:void 0,r.nodes.parseColor===!0?c.color=d.color:c.color=void 0!==d.color?{background:d.color,border:d.color,highlight:{background:d.color,border:d.color},hover:{background:d.color,border:d.color}}:void 0,c.size=d.size,c.fixed=r.nodes.fixed&&void 0!==d.x&&void 0!==d.y,n.push(c)}return{nodes:n,edges:i}}e.parseGephi=i},function(t,e){e.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},e.en_EN=e.en,e.en_US=e.en,e.de={edit:"Editieren",del:"Lösche Auswahl",back:"Zurück",addNode:"Knoten hinzufügen",addEdge:"Kante hinzufügen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster können nicht gelöscht werden.",
editClusterError:"Cluster können nicht editiert werden."},e.de_DE=e.de,e.es={edit:"Editar",del:"Eliminar selección",back:"Átras",addNode:"Añadir nodo",addEdge:"Añadir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},e.es_ES=e.es,e.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},e.nl_NL=e.nl,e.nl_BE=e.nl}])});var THREE={REVISION:"69"};"object"==typeof module&&(module.exports=THREE),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:t>0?1:0}),THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.MinEquation=103,THREE.MaxEquation=104,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.RGB_PVRTC_4BPPV1_Format=2100,THREE.RGB_PVRTC_2BPPV1_Format=2101,THREE.RGBA_PVRTC_4BPPV1_Format=2102,THREE.RGBA_PVRTC_2BPPV1_Format=2103,THREE.Color=function(t){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(t)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(t){return t instanceof THREE.Color?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){if(0===e)this.r=this.g=this.b=i;else{var n=function(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+6*(e-t)*(2/3-i):t},r=.5>=i?i*(1+e):i+e-i*e,o=2*i-r;this.r=n(o,r,t+1/3),this.g=n(o,r,t),this.b=n(o,r,t-1/3)}return this},setStyle:function(t){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(t)){var e=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(t);return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(t)){var e=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(t);return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(t)){var e=/^\#([0-9a-f]{6})$/i.exec(t);return this.setHex(parseInt(e[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(t)){var e=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t);return this.setHex(parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16)),this}return/^(\w+)$/i.test(t)?(this.setHex(THREE.ColorKeywords[t]),this):void 0},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t){return this.r=t.r*t.r,this.g=t.g*t.g,this.b=t.b*t.b,this},copyLinearToGamma:function(t){return this.r=Math.sqrt(t.r),this.g=Math.sqrt(t.g),this.b=Math.sqrt(t.b),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,i,n=t||{h:0,s:0,l:0},r=this.r,o=this.g,s=this.b,a=Math.max(r,o,s),h=Math.min(r,o,s),l=(h+a)/2;if(h===a)e=0,i=0;else{var c=a-h;switch(i=.5>=l?c/(a+h):c/(2-a-h),a){case r:e=(o-s)/c+(s>o?6:0);break;case o:e=(s-r)/c+2;break;case s:e=(r-o)/c+4}e/=6}return n.h=e,n.s=i,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){var n=this.getHSL();return n.h+=t,n.s+=e,n.l+=i,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t){return this.r=t[0],this.g=t[1],this.b=t[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(t instanceof THREE.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=Math.cos(t._x/2),n=Math.cos(t._y/2),r=Math.cos(t._z/2),o=Math.sin(t._x/2),s=Math.sin(t._y/2),a=Math.sin(t._z/2);return"XYZ"===t.order?(this._x=o*n*r+i*s*a,this._y=i*s*r-o*n*a,this._z=i*n*a+o*s*r,this._w=i*n*r-o*s*a):"YXZ"===t.order?(this._x=o*n*r+i*s*a,this._y=i*s*r-o*n*a,this._z=i*n*a-o*s*r,this._w=i*n*r+o*s*a):"ZXY"===t.order?(this._x=o*n*r-i*s*a,this._y=i*s*r+o*n*a,this._z=i*n*a+o*s*r,this._w=i*n*r-o*s*a):"ZYX"===t.order?(this._x=o*n*r-i*s*a,this._y=i*s*r+o*n*a,this._z=i*n*a-o*s*r,this._w=i*n*r+o*s*a):"YZX"===t.order?(this._x=o*n*r+i*s*a,this._y=i*s*r+o*n*a,this._z=i*n*a-o*s*r,this._w=i*n*r-o*s*a):"XZY"===t.order&&(this._x=o*n*r-i*s*a,this._y=i*s*r-o*n*a,this._z=i*n*a+o*s*r,this._w=i*n*r+o*s*a),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,n=i[0],r=i[4],o=i[8],s=i[1],a=i[5],h=i[9],l=i[2],c=i[6],d=i[10],u=n+a+d;return u>0?(e=.5/Math.sqrt(u+1),this._w=.25/e,this._x=(c-h)*e,this._y=(o-l)*e,this._z=(s-r)*e):n>a&&n>d?(e=2*Math.sqrt(1+n-a-d),this._w=(c-h)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(o+l)/e):a>d?(e=2*Math.sqrt(1+a-n-d),this._w=(o-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(h+c)/e):(e=2*Math.sqrt(1+d-n-a),this._w=(s-r)/e,this._x=(o+l)/e,this._y=(h+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,i=1e-6;return function(n,r){return void 0===t&&(t=new THREE.Vector3),e=n.dot(r)+1,i>e?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z,o=t._w,s=e._x,a=e._y,h=e._z,l=e._w;return this._x=i*l+o*s+n*h-r*a,this._y=n*l+o*a+r*s-i*h,this._z=r*l+o*h+i*a-n*s,this._w=o*l-i*s-n*a-r*h,this.onChangeCallback(),this},multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,o=this._w,s=o*t._w+i*t._x+n*t._y+r*t._z;if(0>s?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;var a=Math.acos(s),h=Math.sqrt(1-s*s);if(Math.abs(h)<.001)return this._w=.5*(o+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var l=Math.sin((1-e)*a)/h,c=Math.sin(e*a)/h;return this._w=o*l+this._w*c,this._x=i*l+this._x*c,this._y=n*l+this._y*c,this._z=r*l+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(t,e,i,n){return i.copy(t).slerp(e,n)},THREE.Vector2=function(t,e){this.x=t||0,this.y=e||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e}else this.x=0,this.y=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new THREE.Vector2,e=new THREE.Vector2),t.set(i,i),e.set(n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return e instanceof THREE.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new THREE.Quaternion),this.applyQuaternion(t.setFromEuler(e)),this}}(),applyAxisAngle:function(){var t;return function(e,i){return void 0===t&&(t=new THREE.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,i)),this}}(),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n+r[12],this.y=r[1]*e+r[5]*i+r[9]*n+r[13],this.z=r[2]*e+r[6]*i+r[10]*n+r[14],this},applyProjection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*o,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,s=t.z,a=t.w,h=a*e+o*n-s*i,l=a*i+s*e-r*n,c=a*n+r*i-o*e,d=-r*e-o*i-s*n;return this.x=h*a+d*-r+l*-s-c*-o,this.y=l*a+d*-o+c*-r-h*-s,this.z=c*a+d*-s+h*-o-l*-r,this},project:function(){var t;return function(e){return void 0===t&&(t=new THREE.Matrix4),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new THREE.Matrix4),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new THREE.Vector3,e=new THREE.Vector3),t.set(i,i,i),e.set(n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var i=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-i*t.z,this.z=i*t.y-n*t.x,this},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,o=e.x,s=e.y,a=e.z;return this.x=n*a-r*s,this.y=r*o-i*a,this.z=i*s-n*o,this},projectOnVector:function(){var t,e;return function(i){return void 0===t&&(t=new THREE.Vector3),t.copy(i).normalize(),e=this.dot(t),this.copy(t).multiplyScalar(e)}}(),projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new THREE.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new THREE.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/(this.length()*t.length());return Math.acos(THREE.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},setEulerFromRotationMatrix:function(t,e){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(t,e){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),i=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),n=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=e,this.y=i,this.z=n,this},setFromMatrixColumn:function(t,e){var i=4*t,n=e.elements;return this.x=n[i],this.y=n[i+1],this.z=n[i+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*n+o[15]*r,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e,this.w*=e}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,n,r,o=.01,s=.1,a=t.elements,h=a[0],l=a[4],c=a[8],d=a[1],u=a[5],f=a[9],p=a[2],m=a[6],g=a[10];if(Math.abs(l-d)<o&&Math.abs(c-p)<o&&Math.abs(f-m)<o){if(Math.abs(l+d)<s&&Math.abs(c+p)<s&&Math.abs(f+m)<s&&Math.abs(h+u+g-3)<s)return this.set(1,0,0,0),this;e=Math.PI;var v=(h+1)/2,A=(u+1)/2,y=(g+1)/2,b=(l+d)/4,E=(c+p)/4,w=(f+m)/4;return v>A&&v>y?o>v?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(v),n=b/i,r=E/i):A>y?o>A?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(A),i=b/n,r=w/n):o>y?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(y),i=E/r,n=w/r),this.set(i,n,r,e),this}var x=Math.sqrt((m-f)*(m-f)+(c-p)*(c-p)+(d-l)*(d-l));return Math.abs(x)<.001&&(x=1),this.x=(m-f)/x,this.y=(c-p)/x,this.z=(d-l)/x,this.w=Math.acos((h+u+g-1)/2),this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this.w>t.w&&(this.w=t.w),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this.w<t.w&&(this.w=t.w),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this.w<t.w?this.w=t.w:this.w>e.w&&(this.w=e.w),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new THREE.Vector4,e=new THREE.Vector4),t.set(i,i,i,i),e.set(n,n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,n){
return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e){var i=THREE.Math.clamp,n=t.elements,r=n[0],o=n[4],s=n[8],a=n[1],h=n[5],l=n[9],c=n[2],d=n[6],u=n[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,u),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(d,h),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,u),this._z=Math.atan2(a,h)):(this._y=Math.atan2(-c,r),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-c,u),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(a,r))):"ZYX"===e?(this._y=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(d,u),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-o,h))):"YZX"===e?(this._z=Math.asin(i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-l,h),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(s,u))):"XZY"===e?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,h),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-l,u),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,this.onChangeCallback(),this},setFromQuaternion:function(t,e,i){var n=THREE.Math.clamp,r=t.x*t.x,o=t.y*t.y,s=t.z*t.z,a=t.w*t.w;return e=e||this._order,"XYZ"===e?(this._x=Math.atan2(2*(t.x*t.w-t.y*t.z),a-r-o+s),this._y=Math.asin(n(2*(t.x*t.z+t.y*t.w),-1,1)),this._z=Math.atan2(2*(t.z*t.w-t.x*t.y),a+r-o-s)):"YXZ"===e?(this._x=Math.asin(n(2*(t.x*t.w-t.y*t.z),-1,1)),this._y=Math.atan2(2*(t.x*t.z+t.y*t.w),a-r-o+s),this._z=Math.atan2(2*(t.x*t.y+t.z*t.w),a-r+o-s)):"ZXY"===e?(this._x=Math.asin(n(2*(t.x*t.w+t.y*t.z),-1,1)),this._y=Math.atan2(2*(t.y*t.w-t.z*t.x),a-r-o+s),this._z=Math.atan2(2*(t.z*t.w-t.x*t.y),a-r+o-s)):"ZYX"===e?(this._x=Math.atan2(2*(t.x*t.w+t.z*t.y),a-r-o+s),this._y=Math.asin(n(2*(t.y*t.w-t.x*t.z),-1,1)),this._z=Math.atan2(2*(t.x*t.y+t.z*t.w),a+r-o-s)):"YZX"===e?(this._x=Math.atan2(2*(t.x*t.w-t.z*t.y),a-r+o-s),this._y=Math.atan2(2*(t.y*t.w-t.x*t.z),a+r-o-s),this._z=Math.asin(n(2*(t.x*t.y+t.z*t.w),-1,1))):"XZY"===e?(this._x=Math.atan2(2*(t.x*t.w+t.y*t.z),a-r+o-s),this._y=Math.atan2(2*(t.x*t.z+t.y*t.w),a+r-o-s),this._z=Math.asin(n(2*(t.z*t.w-t.x*t.y),-1,1))):console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+e),this._order=e,i!==!1&&this.onChangeCallback(),this},reorder:function(){var t=new THREE.Quaternion;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(t,e){this.start=void 0!==t?t:new THREE.Vector3,this.end=void 0!==e?e:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},center:function(t){var e=t||new THREE.Vector3;return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){var e=t||new THREE.Vector3;return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var i=e||new THREE.Vector3;return this.delta(i).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i,n){t.subVectors(i,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),o=e.dot(t),s=o/r;return n&&(s=THREE.Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(t,e,i){var n=this.closestPointToPointParameter(t,e),r=i||new THREE.Vector3;return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(t,e){this.min=void 0!==t?t:new THREE.Vector2(1/0,1/0),this.max=void 0!==e?e:new THREE.Vector2(-(1/0),-(1/0))},THREE.Box2.prototype={constructor:THREE.Box2,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;i>e;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new THREE.Vector2;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){var e=t||new THREE.Vector2;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new THREE.Vector2;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){var i=e||new THREE.Vector2;return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){var i=e||new THREE.Vector2;return i.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new THREE.Vector2;return function(e){var i=t.copy(e).clamp(this.min,this.max);return i.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(t,e){this.min=void 0!==t?t:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==e?e:new THREE.Vector3(-(1/0),-(1/0),-(1/0))},THREE.Box3.prototype={constructor:THREE.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;i>e;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new THREE.Vector3;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(){var t=new THREE.Vector3;return function(e){var i=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var n=e.geometry;if(void 0!==n)if(n instanceof THREE.Geometry)for(var r=n.vertices,o=0,s=r.length;s>o;o++)t.copy(r[o]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t);else if(n instanceof THREE.BufferGeometry&&void 0!==n.attributes.position)for(var a=n.attributes.position.array,o=0,s=a.length;s>o;o+=3)t.set(a[o],a[o+1],a[o+2]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t)}),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){var e=t||new THREE.Vector3;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new THREE.Vector3;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){var i=e||new THREE.Vector3;return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},clampPoint:function(t,e){var i=e||new THREE.Vector3;return i.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new THREE.Vector3;return function(e){var i=t.copy(e).clamp(this.min,this.max);return i.sub(e).length()}}(),getBoundingSphere:function(){var t=new THREE.Vector3;return function(e){var i=e||new THREE.Sphere;return i.center=this.center(),i.radius=.5*this.size(t).length(),i}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(e){return t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(t),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(t,e,i,n,r,o,s,a,h){var l=this.elements;return l[0]=t,l[3]=e,l[6]=i,l[1]=n,l[4]=r,l[7]=o,l[2]=s,l[5]=a,l[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new THREE.Vector3;return function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var r=0,o=i;n>r;r+=3,o+=3)t.x=e[o],t.y=e[o+1],t.z=e[o+2],t.applyMatrix3(this),e[o]=t.x,e[o+1]=t.y,e[o+2]=t.z;return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],h=t[7],l=t[8];return e*o*l-e*s*h-i*r*l+i*s*a+n*r*h-n*o*a},getInverse:function(t,e){var i=t.elements,n=this.elements;n[0]=i[10]*i[5]-i[6]*i[9],n[1]=-i[10]*i[1]+i[2]*i[9],n[2]=i[6]*i[1]-i[2]*i[5],n[3]=-i[10]*i[4]+i[6]*i[8],n[4]=i[10]*i[0]-i[2]*i[8],n[5]=-i[6]*i[0]+i[2]*i[4],n[6]=i[9]*i[4]-i[5]*i[8],n[7]=-i[9]*i[0]+i[1]*i[8],n[8]=i[5]*i[0]-i[1]*i[4];var r=i[0]*n[0]+i[1]*n[3]+i[2]*n[6];if(0===r){var o="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(o);return console.warn(o),this.identity(),this}return this.multiplyScalar(1/r),this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},clone:function(){return(new THREE.Matrix3).fromArray(this.elements)}},THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(t,e,i,n,r,o,s,a,h,l,c,d,u,f,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=o,g[9]=s,g[13]=a,g[2]=h,g[6]=l,g[10]=c,g[14]=d,g[3]=u,g[7]=f,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(t){return this.elements.set(t.elements),this},extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractRotation:function(){var t=new THREE.Vector3;return function(e){var i=this.elements,n=e.elements,r=1/t.set(n[0],n[1],n[2]).length(),o=1/t.set(n[4],n[5],n[6]).length(),s=1/t.set(n[8],n[9],n[10]).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[4]=n[4]*o,i[5]=n[5]*o,i[6]=n[6]*o,i[8]=n[8]*s,i[9]=n[9]*s,i[10]=n[10]*s,this}}(),makeRotationFromEuler:function(t){t instanceof THREE.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,o=Math.cos(i),s=Math.sin(i),a=Math.cos(n),h=Math.sin(n),l=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var d=o*l,u=o*c,f=s*l,p=s*c;e[0]=a*l,e[4]=-a*c,e[8]=h,e[1]=u+f*h,e[5]=d-p*h,e[9]=-s*a,e[2]=p-d*h,e[6]=f+u*h,e[10]=o*a}else if("YXZ"===t.order){var m=a*l,g=a*c,v=h*l,A=h*c;e[0]=m+A*s,e[4]=v*s-g,e[8]=o*h,e[1]=o*c,e[5]=o*l,e[9]=-s,e[2]=g*s-v,e[6]=A+m*s,e[10]=o*a}else if("ZXY"===t.order){var m=a*l,g=a*c,v=h*l,A=h*c;e[0]=m-A*s,e[4]=-o*c,e[8]=v+g*s,e[1]=g+v*s,e[5]=o*l,e[9]=A-m*s,e[2]=-o*h,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){var d=o*l,u=o*c,f=s*l,p=s*c;e[0]=a*l,e[4]=f*h-u,e[8]=d*h+p,e[1]=a*c,e[5]=p*h+d,e[9]=u*h-f,e[2]=-h,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){var y=o*a,b=o*h,E=s*a,w=s*h;e[0]=a*l,e[4]=w-y*c,e[8]=E*c+b,e[1]=c,e[5]=o*l,e[9]=-s*l,e[2]=-h*l,e[6]=b*c+E,e[10]=y-w*c}else if("XZY"===t.order){var y=o*a,b=o*h,E=s*a,w=s*h;e[0]=a*l,e[4]=-c,e[8]=h*l,e[1]=y*c+w,e[5]=o*l,e[9]=b*c-E,e[2]=E*c-b,e[6]=s*l,e[10]=w*c+y}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},makeRotationFromQuaternion:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z,o=t.w,s=i+i,a=n+n,h=r+r,l=i*s,c=i*a,d=i*h,u=n*a,f=n*h,p=r*h,m=o*s,g=o*a,v=o*h;return e[0]=1-(u+p),e[4]=c-v,e[8]=d+g,e[1]=c+v,e[5]=1-(l+p),e[9]=f-m,e[2]=d-g,e[6]=f+m,e[10]=1-(l+u),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;return function(n,r,o){var s=this.elements;return i.subVectors(n,r).normalize(),0===i.length()&&(i.z=1),t.crossVectors(o,i).normalize(),0===t.length()&&(i.x+=1e-4,t.crossVectors(o,i).normalize()),e.crossVectors(i,t),s[0]=t.x,s[4]=e.x,s[8]=i.x,s[1]=t.y,s[5]=e.y,s[9]=i.y,s[2]=t.z,s[6]=e.z,s[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,o=i[0],s=i[4],a=i[8],h=i[12],l=i[1],c=i[5],d=i[9],u=i[13],f=i[2],p=i[6],m=i[10],g=i[14],v=i[3],A=i[7],y=i[11],b=i[15],E=n[0],w=n[4],x=n[8],_=n[12],T=n[1],S=n[5],R=n[9],C=n[13],k=n[2],M=n[6],H=n[10],P=n[14],D=n[3],O=n[7],L=n[11],I=n[15];return r[0]=o*E+s*T+a*k+h*D,r[4]=o*w+s*S+a*M+h*O,r[8]=o*x+s*R+a*H+h*L,r[12]=o*_+s*C+a*P+h*I,r[1]=l*E+c*T+d*k+u*D,r[5]=l*w+c*S+d*M+u*O,r[9]=l*x+c*R+d*H+u*L,r[13]=l*_+c*C+d*P+u*I,r[2]=f*E+p*T+m*k+g*D,r[6]=f*w+p*S+m*M+g*O,r[10]=f*x+p*R+m*H+g*L,r[14]=f*_+p*C+m*P+g*I,r[3]=v*E+A*T+y*k+b*D,r[7]=v*w+A*S+y*M+b*O,r[11]=v*x+A*R+y*H+b*L,r[15]=v*_+A*C+y*P+b*I,this},multiplyToArray:function(t,e,i){var n=this.elements;return this.multiplyMatrices(t,e),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new THREE.Vector3;return function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var r=0,o=i;n>r;r+=3,o+=3)t.x=e[o],t.y=e[o+1],t.z=e[o+2],t.applyMatrix4(this),e[o]=t.x,e[o+1]=t.y,e[o+2]=t.z;return e}}(),rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],o=t[1],s=t[5],a=t[9],h=t[13],l=t[2],c=t[6],d=t[10],u=t[14],f=t[3],p=t[7],m=t[11],g=t[15];return f*(+r*a*c-n*h*c-r*s*d+i*h*d+n*s*u-i*a*u)+p*(+e*a*u-e*h*d+r*o*d-n*o*u+n*h*l-r*a*l)+m*(+e*h*c-e*s*u-r*o*c+i*o*u+r*s*l-i*h*l)+g*(-n*s*l-e*a*c+e*s*d+n*o*c-i*o*d+i*a*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t},getPosition:function(){var t=new THREE.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var e=this.elements;return t.set(e[12],e[13],e[14])}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,n=t.elements,r=n[0],o=n[4],s=n[8],a=n[12],h=n[1],l=n[5],c=n[9],d=n[13],u=n[2],f=n[6],p=n[10],m=n[14],g=n[3],v=n[7],A=n[11],y=n[15];i[0]=c*m*v-d*p*v+d*f*A-l*m*A-c*f*y+l*p*y,i[4]=a*p*v-s*m*v-a*f*A+o*m*A+s*f*y-o*p*y,i[8]=s*d*v-a*c*v+a*l*A-o*d*A-s*l*y+o*c*y,i[12]=a*c*f-s*d*f-a*l*p+o*d*p+s*l*m-o*c*m,i[1]=d*p*g-c*m*g-d*u*A+h*m*A+c*u*y-h*p*y,i[5]=s*m*g-a*p*g+a*u*A-r*m*A-s*u*y+r*p*y,i[9]=a*c*g-s*d*g-a*h*A+r*d*A+s*h*y-r*c*y,i[13]=s*d*u-a*c*u+a*h*p-r*d*p-s*h*m+r*c*m,i[2]=l*m*g-d*f*g+d*u*v-h*m*v-l*u*y+h*f*y,i[6]=a*f*g-o*m*g-a*u*v+r*m*v+o*u*y-r*f*y,i[10]=o*d*g-a*l*g+a*h*v-r*d*v-o*h*y+r*l*y,i[14]=a*l*u-o*d*u-a*h*f+r*d*f+o*h*m-r*l*m,i[3]=c*f*g-l*p*g-c*u*v+h*p*v+l*u*A-h*f*A,i[7]=o*p*g-s*f*g+s*u*v-r*p*v-o*u*A+r*f*A,i[11]=s*l*g-o*c*g-s*h*v+r*c*v+o*h*A-r*l*A,i[15]=o*c*u-s*l*u+s*h*f-r*c*f-o*h*p+r*l*p;var b=r*i[0]+h*i[4]+u*i[8]+g*i[12];if(0==b){var E="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(E);return console.warn(E),this.identity(),this}return this.multiplyScalar(1/b),this},translate:function(t){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(t){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(t){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(t){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(t,e){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,Math.max(i,n)))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,o=t.x,s=t.y,a=t.z,h=r*o,l=r*s;return this.set(h*o+i,h*s-n*a,h*a+n*s,0,h*s+n*a,l*s+i,l*a-n*o,0,h*a-n*s,l*a+n*o,r*a*a+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:function(){var t=new THREE.Vector3,e=new THREE.Matrix4;return function(i,n,r){var o=this.elements,s=t.set(o[0],o[1],o[2]).length(),a=t.set(o[4],o[5],o[6]).length(),h=t.set(o[8],o[9],o[10]).length(),l=this.determinant();0>l&&(s=-s),i.x=o[12],i.y=o[13],i.z=o[14],e.elements.set(this.elements);var c=1/s,d=1/a,u=1/h;return e.elements[0]*=c,e.elements[1]*=c,e.elements[2]*=c,e.elements[4]*=d,e.elements[5]*=d,e.elements[6]*=d,e.elements[8]*=u,e.elements[9]*=u,e.elements[10]*=u,n.setFromRotationMatrix(e),r.x=s,r.y=a,r.z=h,this}}(),makeFrustum:function(t,e,i,n,r,o){var s=this.elements,a=2*r/(e-t),h=2*r/(n-i),l=(e+t)/(e-t),c=(n+i)/(n-i),d=-(o+r)/(o-r),u=-2*o*r/(o-r);return s[0]=a,s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=h,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=u,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makePerspective:function(t,e,i,n){var r=i*Math.tan(THREE.Math.degToRad(.5*t)),o=-r,s=o*e,a=r*e;return this.makeFrustum(s,a,o,r,i,n)},makeOrthographic:function(t,e,i,n,r,o){var s=this.elements,a=e-t,h=i-n,l=o-r,c=(e+t)/a,d=(i+n)/h,u=(o+r)/l;return s[0]=2/a,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2/h,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=-2/l,s[14]=-u,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)}},THREE.Ray=function(t,e){this.origin=void 0!==t?t:new THREE.Vector3,this.direction=void 0!==e?e:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){var i=e||new THREE.Vector3;return i.copy(this.direction).multiplyScalar(t).add(this.origin)},recast:function(){var t=new THREE.Vector3;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var i=e||new THREE.Vector3;i.subVectors(t,this.origin);var n=i.dot(this.direction);return 0>n?i.copy(this.origin):i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(){var t=new THREE.Vector3;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return 0>i?this.origin.distanceTo(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceTo(e))}}(),distanceSqToSegment:function(t,e,i,n){var r,o,s,a,h=t.clone().add(e).multiplyScalar(.5),l=e.clone().sub(t).normalize(),c=.5*t.distanceTo(e),d=this.origin.clone().sub(h),u=-this.direction.dot(l),f=d.dot(this.direction),p=-d.dot(l),m=d.lengthSq(),g=Math.abs(1-u*u);if(g>=0)if(r=u*p-f,o=u*f-p,a=c*g,r>=0)if(o>=-a)if(a>=o){var v=1/g;r*=v,o*=v,s=r*(r+u*o+2*f)+o*(u*r+o+2*p)+m}else o=c,r=Math.max(0,-(u*o+f)),s=-r*r+o*(o+2*p)+m;else o=-c,r=Math.max(0,-(u*o+f)),s=-r*r+o*(o+2*p)+m;else-a>=o?(r=Math.max(0,-(-u*c+f)),o=r>0?-c:Math.min(Math.max(-c,-p),c),s=-r*r+o*(o+2*p)+m):a>=o?(r=0,o=Math.min(Math.max(-c,-p),c),s=o*(o+2*p)+m):(r=Math.max(0,-(u*c+f)),o=r>0?c:Math.min(Math.max(-c,-p),c),s=-r*r+o*(o+2*p)+m);else o=u>0?-c:c,r=Math.max(0,-(u*o+f)),s=-r*r+o*(o+2*p)+m;return i&&i.copy(this.direction.clone().multiplyScalar(r).add(this.origin)),n&&n.copy(l.clone().multiplyScalar(o).add(h)),s},isIntersectionSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},intersectSphere:function(){var t=new THREE.Vector3;return function(e,i){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),r=t.dot(t)-n*n,o=e.radius*e.radius;if(r>o)return null;var s=Math.sqrt(o-r),a=n-s,h=n+s;return 0>a&&0>h?null:0>a?this.at(h,i):this.at(a,i)}}(),isIntersectionPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var i=t.normal.dot(this.direction);return 0>i*e},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0==e)return 0==t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},isIntersectionBox:function(){var t=new THREE.Vector3;return function(e){return null!==this.intersectBox(e,t)}}(),intersectBox:function(t,e){var i,n,r,o,s,a,h=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,d=this.origin;return h>=0?(i=(t.min.x-d.x)*h,n=(t.max.x-d.x)*h):(i=(t.max.x-d.x)*h,n=(t.min.x-d.x)*h),l>=0?(r=(t.min.y-d.y)*l,o=(t.max.y-d.y)*l):(r=(t.max.y-d.y)*l,o=(t.min.y-d.y)*l),i>o||r>n?null:((r>i||i!==i)&&(i=r),(n>o||n!==n)&&(n=o),c>=0?(s=(t.min.z-d.z)*c,a=(t.max.z-d.z)*c):(s=(t.max.z-d.z)*c,a=(t.min.z-d.z)*c),i>a||s>n?null:((s>i||i!==i)&&(i=s),(n>a||n!==n)&&(n=a),0>n?null:this.at(i>=0?i:n,e)))},intersectTriangle:function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3,n=new THREE.Vector3;return function(r,o,s,a,h){e.subVectors(o,r),i.subVectors(s,r),n.crossVectors(e,i);var l,c=this.direction.dot(n);if(c>0){if(a)return null;l=1}else{if(!(0>c))return null;l=-1,c=-c}t.subVectors(this.origin,r);var d=l*this.direction.dot(i.crossVectors(t,i));if(0>d)return null;var u=l*this.direction.dot(e.cross(t));if(0>u)return null;if(d+u>c)return null;var f=-l*t.dot(n);return 0>f?null:this.at(f/c,h)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(t,e){this.center=void 0!==t?t:new THREE.Vector3,this.radius=void 0!==e?e:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new THREE.Box3;return function(e,i){var n=this.center;void 0!==i?n.copy(i):t.setFromPoints(e).center(n);for(var r=0,o=0,s=e.length;s>o;o++)r=Math.max(r,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}}(),copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},clampPoint:function(t,e){var i=this.center.distanceToSquared(t),n=e||new THREE.Vector3;return n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){var e=t||new THREE.Box3;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(t,e,i,n,r,o){this.planes=[void 0!==t?t:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==o?o:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(t,e,i,n,r,o){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(o),this},copy:function(t){for(var e=this.planes,i=0;6>i;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements,n=i[0],r=i[1],o=i[2],s=i[3],a=i[4],h=i[5],l=i[6],c=i[7],d=i[8],u=i[9],f=i[10],p=i[11],m=i[12],g=i[13],v=i[14],A=i[15];return e[0].setComponents(s-n,c-a,p-d,A-m).normalize(),e[1].setComponents(s+n,c+a,p+d,A+m).normalize(),e[2].setComponents(s+r,c+h,p+u,A+g).normalize(),e[3].setComponents(s-r,c-h,p-u,A-g).normalize(),e[4].setComponents(s-o,c-l,p-f,A-v).normalize(),e[5].setComponents(s+o,c+l,p+f,A+v).normalize(),this},intersectsObject:function(){var t=new THREE.Sphere;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere),t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,i=t.center,n=-t.radius,r=0;6>r;r++){var o=e[r].distanceToPoint(i);if(n>o)return!1}return!0},intersectsBox:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i){for(var n=this.planes,r=0;6>r;r++){var o=n[r];t.x=o.normal.x>0?i.min.x:i.max.x,e.x=o.normal.x>0?i.max.x:i.min.x,t.y=o.normal.y>0?i.min.y:i.max.y,e.y=o.normal.y>0?i.max.y:i.min.y,t.z=o.normal.z>0?i.min.z:i.max.z,e.z=o.normal.z>0?i.max.z:i.min.z;var s=o.distanceToPoint(t),a=o.distanceToPoint(e);if(0>s&&0>a)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;6>i;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(t,e){this.normal=void 0!==t?t:new THREE.Vector3(1,0,0),this.constant=void 0!==e?e:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(t,e){return this.normal.copy(t),
this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i,n,r){var o=t.subVectors(r,n).cross(e.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,i),this}}(),copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var i=this.distanceToPoint(t),n=e||new THREE.Vector3;return n.copy(this.normal).multiplyScalar(i)},isIntersectionLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return 0>e&&i>0||0>i&&e>0},intersectLine:function(){var t=new THREE.Vector3;return function(e,i){var n=i||new THREE.Vector3,r=e.delta(t),o=this.normal.dot(r);if(0!=o){var s=-(e.start.dot(this.normal)+this.constant)/o;if(!(0>s||s>1))return n.copy(r).multiplyScalar(s).add(e.start)}else if(0==this.distanceToPoint(e.start))return n.copy(e.start)}}(),coplanarPoint:function(t){var e=t||new THREE.Vector3;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Matrix3;return function(n,r){var o=r||i.getNormalMatrix(n),s=t.copy(this.normal).applyMatrix3(o),a=this.coplanarPoint(e);return a.applyMatrix4(n),this.setFromNormalAndCoplanarPoint(s,a),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0;return function(){for(var r=0;36>r;r++)8==r||13==r||18==r||23==r?i[r]="-":14==r?i[r]="4":(2>=n&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=e[19==r?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return e>t?e:t>i?i:t},clampBottom:function(t,e){return e>t?e:t},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},smoothstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*(3-2*t))},smootherstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}(),isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t}},THREE.Spline=function(t){function e(t,e,i,n,r,o,s){var a=.5*(i-t),h=.5*(n-e);return(2*(e-i)+a+h)*s+(-3*(e-i)-2*a-h)*o+a*r+e}this.points=t;var i,n,r,o,s,a,h,l,c,d=[],u={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return i=(this.points.length-1)*t,n=Math.floor(i),r=i-n,d[0]=0===n?n:n-1,d[1]=n,d[2]=n>this.points.length-2?this.points.length-1:n+1,d[3]=n>this.points.length-3?this.points.length-1:n+2,a=this.points[d[0]],h=this.points[d[1]],l=this.points[d[2]],c=this.points[d[3]],o=r*r,s=r*o,u.x=e(a.x,h.x,l.x,c.x,r,o,s),u.y=e(a.y,h.y,l.y,c.y,r,o,s),u.z=e(a.z,h.z,l.z,c.z,r,o,s),u},this.getControlPointsArray=function(){var t,e,i=this.points.length,n=[];for(t=0;i>t;t++)e=this.points[t],n[t]=[e.x,e.y,e.z];return n},this.getLength=function(t){var e,i,n,r,o=0,s=0,a=0,h=new THREE.Vector3,l=new THREE.Vector3,c=[],d=0;for(c[0]=0,t||(t=100),n=this.points.length*t,h.copy(this.points[0]),e=1;n>e;e++)i=e/n,r=this.getPoint(i),l.copy(r),d+=l.distanceTo(h),h.copy(r),o=(this.points.length-1)*i,s=Math.floor(o),s!=a&&(c[s]=d,a=s);return c[c.length]=d,{chunks:c,total:d}},this.reparametrizeByArcLength=function(t){var e,i,n,r,o,s,a,h,l=[],c=new THREE.Vector3,d=this.getLength();for(l.push(c.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(s=d.chunks[e]-d.chunks[e-1],a=Math.ceil(t*s/d.total),r=(e-1)/(this.points.length-1),o=e/(this.points.length-1),i=1;a-1>i;i++)n=r+i*(1/a)*(o-r),h=this.getPoint(n),l.push(c.copy(h).clone());l.push(c.copy(this.points[e]).clone())}this.points=l}},THREE.Triangle=function(t,e,i){this.a=void 0!==t?t:new THREE.Vector3,this.b=void 0!==e?e:new THREE.Vector3,this.c=void 0!==i?i:new THREE.Vector3},THREE.Triangle.normal=function(){var t=new THREE.Vector3;return function(e,i,n,r){var o=r||new THREE.Vector3;o.subVectors(n,i),t.subVectors(e,i),o.cross(t);var s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;return function(n,r,o,s,a){t.subVectors(s,r),e.subVectors(o,r),i.subVectors(n,r);var h=t.dot(t),l=t.dot(e),c=t.dot(i),d=e.dot(e),u=e.dot(i),f=h*d-l*l,p=a||new THREE.Vector3;if(0==f)return p.set(-2,-1,-1);var m=1/f,g=(d*c-l*u)*m,v=(h*u-l*c)*m;return p.set(1-g-v,v,g)}}(),THREE.Triangle.containsPoint=function(){var t=new THREE.Vector3;return function(e,i,n,r){var o=THREE.Triangle.barycoordFromPoint(e,i,n,r,t);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){var e=t||new THREE.Vector3;return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return THREE.Triangle.normal(this.a,this.b,this.c,t)},plane:function(t){var e=t||new THREE.Plane;return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return THREE.Triangle.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return THREE.Triangle.containsPoint(t,this.a,this.b,this.c)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Clock=function(t){this.autoStart=void 0!==t?t:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();t=.001*(e-this.oldTime),this.oldTime=e,this.elapsedTime+=t}return t}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(t){t.addEventListener=THREE.EventDispatcher.prototype.addEventListener,t.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,t.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,t.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners,n=i[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,i=e[t.type];if(void 0!==i){t.target=this;for(var n=[],r=i.length,o=0;r>o;o++)n[o]=i[o];for(var o=0;r>o;o++)n[o].call(this,t)}}}},function(t){t.Raycaster=function(e,i,n,r){this.ray=new t.Ray(e,i),this.near=n||0,this.far=r||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var e=function(t,e){return t.distance-e.distance},i=function(t,e,n,r){if(t.raycast(e,n),r===!0)for(var o=t.children,s=0,a=o.length;a>s;s++)i(o[s],e,n,!0)};t.Raycaster.prototype={constructor:t.Raycaster,precision:1e-4,linePrecision:1,set:function(t,e){this.ray.set(t,e)},intersectObject:function(t,n){var r=[];return i(t,this,r,n),r.sort(e),r},intersectObjects:function(t,n){var r=[];if(t instanceof Array==!1)return console.log("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var o=0,s=t.length;s>o;o++)i(t[o],this,r,n);return r.sort(e),r}}}(THREE),THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=THREE.Object3D.DefaultUp.clone();var t=new THREE.Vector3,e=new THREE.Euler,i=new THREE.Quaternion,n=new THREE.Vector3(1,1,1),r=function(){i.setFromEuler(e,!1)},o=function(){e.setFromQuaternion(i,void 0,!1)};e.onChange(r),i.onChange(o),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:n}}),this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0),THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(t){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=t},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(t){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new THREE.Quaternion;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new THREE.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new THREE.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new THREE.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new THREE.Vector3;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},translateX:function(){var t=new THREE.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new THREE.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new THREE.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new THREE.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new THREE.Matrix4;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add:",t,"can't be added as a child of itself."),this):(t instanceof THREE.Object3D?(void 0!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add:",t,"is not an instance of THREE.Object3D."),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var i=this.children.indexOf(t);-1!==i&&(t.parent=void 0,t.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getChildByName:function(t,e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t,e)},getObjectById:function(t,e){if(this.id===t)return this;for(var i=0,n=this.children.length;n>i;i++){var r=this.children[i],o=r.getObjectById(t,e);if(void 0!==o)return o}},getObjectByName:function(t,e){if(this.name===t)return this;for(var i=0,n=this.children.length;n>i;i++){var r=this.children[i],o=r.getObjectByName(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){var e=t||new THREE.Vector3;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i){var n=i||new THREE.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new THREE.Quaternion;return function(e){var i=e||new THREE.Euler;return this.getWorldQuaternion(t),i.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new THREE.Vector3,e=new THREE.Quaternion;return function(i){var n=i||new THREE.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new THREE.Quaternion;return function(e){var i=e||new THREE.Vector3;return this.getWorldQuaternion(t),i.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=0,i=this.children.length;i>e;e++)this.children[e].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=0,i=this.children.length;i>e;e++)this.children[e].traverseVisible(t)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&t!==!0||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=0,i=this.children.length;i>e;e++)this.children[e].updateMatrixWorld(t)},toJSON:function(){var t={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},e={},i=function(i){if(void 0===t.geometries&&(t.geometries=[]),void 0===e[i.uuid]){var n=i.toJSON();delete n.metadata,e[i.uuid]=n,t.geometries.push(n)}return i.uuid},n={},r=function(e){if(void 0===t.materials&&(t.materials=[]),void 0===n[e.uuid]){var i=e.toJSON();delete i.metadata,n[e.uuid]=i,t.materials.push(i)}return e.uuid},o=function(t){var e={};if(e.uuid=t.uuid,e.type=t.type,""!==t.name&&(e.name=t.name),"{}"!==JSON.stringify(t.userData)&&(e.userData=t.userData),t.visible!==!0&&(e.visible=t.visible),t instanceof THREE.PerspectiveCamera?(e.fov=t.fov,e.aspect=t.aspect,e.near=t.near,e.far=t.far):t instanceof THREE.OrthographicCamera?(e.left=t.left,e.right=t.right,e.top=t.top,e.bottom=t.bottom,e.near=t.near,e.far=t.far):t instanceof THREE.AmbientLight?e.color=t.color.getHex():t instanceof THREE.DirectionalLight?(e.color=t.color.getHex(),e.intensity=t.intensity):t instanceof THREE.PointLight?(e.color=t.color.getHex(),e.intensity=t.intensity,e.distance=t.distance):t instanceof THREE.SpotLight?(e.color=t.color.getHex(),e.intensity=t.intensity,e.distance=t.distance,e.angle=t.angle,e.exponent=t.exponent):t instanceof THREE.HemisphereLight?(e.color=t.color.getHex(),e.groundColor=t.groundColor.getHex()):t instanceof THREE.Mesh?(e.geometry=i(t.geometry),e.material=r(t.material)):t instanceof THREE.Line?(e.geometry=i(t.geometry),e.material=r(t.material)):t instanceof THREE.Sprite&&(e.material=r(t.material)),e.matrix=t.matrix.toArray(),t.children.length>0){e.children=[];for(var n=0;n<t.children.length;n++)e.children.push(o(t.children[n]))}return e};return t.object=o(this),t},clone:function(t,e){if(void 0===t&&(t=new THREE.Object3D),void 0===e&&(e=!0),t.name=this.name,t.up.copy(this.up),t.position.copy(this.position),t.quaternion.copy(this.quaternion),t.scale.copy(this.scale),t.renderDepth=this.renderDepth,t.rotationAutoUpdate=this.rotationAutoUpdate,t.matrix.copy(this.matrix),t.matrixWorld.copy(this.matrixWorld),t.matrixAutoUpdate=this.matrixAutoUpdate,t.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,t.visible=this.visible,t.castShadow=this.castShadow,t.receiveShadow=this.receiveShadow,t.frustumCulled=this.frustumCulled,t.userData=JSON.parse(JSON.stringify(this.userData)),e===!0)for(var i=0;i<this.children.length;i++){var n=this.children[i];t.add(n.clone())}return t}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Projector=function(){console.warn("THREE.Projector has been moved to /examples/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(t,e){console.error("THREE.Projector: .pickingRay() has been removed.")}},THREE.Face3=function(t,e,i,n,r,o){this.a=t,this.b=e,this.c=i,this.normal=n instanceof THREE.Vector3?n:new THREE.Vector3,this.vertexNormals=n instanceof Array?n:[],this.color=r instanceof THREE.Color?r:new THREE.Color,this.vertexColors=r instanceof Array?r:[],this.vertexTangents=[],this.materialIndex=void 0!==o?o:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var t=new THREE.Face3(this.a,this.b,this.c);t.normal.copy(this.normal),t.color.copy(this.color),t.materialIndex=this.materialIndex;for(var e=0,i=this.vertexNormals.length;i>e;e++)t.vertexNormals[e]=this.vertexNormals[e].clone();for(var e=0,i=this.vertexColors.length;i>e;e++)t.vertexColors[e]=this.vertexColors[e].clone();for(var e=0,i=this.vertexTangents.length;i>e;e++)t.vertexTangents[e]=this.vertexTangents[e].clone();return t}},THREE.Face4=function(t,e,i,n,r,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(t,e,i,r,o,s)},THREE.BufferAttribute=function(t,e){this.array=t,this.itemSize=e,this.needsUpdate=!1},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;r>n;n++)this.array[t+n]=e.array[i+n]},set:function(t){return this.array.set(t),this},setX:function(t,e){return this.array[t*this.itemSize]=e,this},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},clone:function(){return new THREE.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},THREE.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.drawcalls=[],this.offsets=this.drawcalls,this.boundingBox=null,this.boundingSphere=null},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(t,e){return e instanceof THREE.BufferAttribute==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void(this.attributes[t]={array:arguments[1],itemSize:arguments[2]})):(this.attributes[t]=e,void(this.attributesKeys=Object.keys(this.attributes)))},getAttribute:function(t){return this.attributes[t]},addDrawCall:function(t,e,i){this.drawcalls.push({start:t,count:e,index:void 0!==i?i:0})},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){var n=(new THREE.Matrix3).getNormalMatrix(t);n.applyToVector3Array(i.array),i.needsUpdate=!0}},center:function(){},fromGeometry:function(t,e){e=e||{vertexColors:THREE.NoColors};var i=t.vertices,n=t.faces,r=t.faceVertexUvs,o=e.vertexColors,s=r[0].length>0,a=3==n[0].vertexNormals.length,h=new Float32Array(3*n.length*3);this.addAttribute("position",new THREE.BufferAttribute(h,3));var l=new Float32Array(3*n.length*3);if(this.addAttribute("normal",new THREE.BufferAttribute(l,3)),o!==THREE.NoColors){var c=new Float32Array(3*n.length*3);this.addAttribute("color",new THREE.BufferAttribute(c,3))}if(s===!0){var d=new Float32Array(3*n.length*2);this.addAttribute("uv",new THREE.BufferAttribute(d,2))}for(var u=0,f=0,p=0;u<n.length;u++,f+=6,p+=9){var m=n[u],g=i[m.a],v=i[m.b],A=i[m.c];if(h[p]=g.x,h[p+1]=g.y,h[p+2]=g.z,h[p+3]=v.x,h[p+4]=v.y,h[p+5]=v.z,h[p+6]=A.x,h[p+7]=A.y,h[p+8]=A.z,a===!0){var y=m.vertexNormals[0],b=m.vertexNormals[1],E=m.vertexNormals[2];l[p]=y.x,l[p+1]=y.y,l[p+2]=y.z,l[p+3]=b.x,l[p+4]=b.y,l[p+5]=b.z,l[p+6]=E.x,l[p+7]=E.y,l[p+8]=E.z}else{var w=m.normal;l[p]=w.x,l[p+1]=w.y,l[p+2]=w.z,l[p+3]=w.x,l[p+4]=w.y,l[p+5]=w.z,l[p+6]=w.x,l[p+7]=w.y,l[p+8]=w.z}if(o===THREE.FaceColors){var x=m.color;c[p]=x.r,c[p+1]=x.g,c[p+2]=x.b,c[p+3]=x.r,c[p+4]=x.g,c[p+5]=x.b,c[p+6]=x.r,c[p+7]=x.g,c[p+8]=x.b}else if(o===THREE.VertexColors){var _=m.vertexColors[0],T=m.vertexColors[1],S=m.vertexColors[2];c[p]=_.r,c[p+1]=_.g,c[p+2]=_.b,c[p+3]=T.r,c[p+4]=T.g,c[p+5]=T.b,c[p+6]=S.r,c[p+7]=S.g,c[p+8]=S.b}if(s===!0){var R=r[0][u][0],C=r[0][u][1],k=r[0][u][2];d[f]=R.x,d[f+1]=R.y,d[f+2]=C.x,d[f+3]=C.y,d[f+4]=k.x,d[f+5]=k.y}}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var t=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.attributes.position.array;if(e){var i=this.boundingBox;i.makeEmpty();for(var n=0,r=e.length;r>n;n+=3)t.set(e[n],e[n+1],e[n+2]),i.expandByPoint(t)}void 0!==e&&0!==e.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}(),computeBoundingSphere:function(){var t=new THREE.Box3,e=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var i=this.attributes.position.array;if(i){t.makeEmpty();for(var n=this.boundingSphere.center,r=0,o=i.length;o>r;r+=3)e.set(i[r],i[r+1],i[r+2]),t.expandByPoint(e);t.center(n);for(var s=0,r=0,o=i.length;o>r;r+=3)e.set(i[r],i[r+1],i[r+2]),s=Math.max(s,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.attributes;if(t.position){var e=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(e.length),3));else for(var i=t.normal.array,n=0,r=i.length;r>n;n++)i[n]=0;var o,s,a,i=t.normal.array,h=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3,u=new THREE.Vector3;if(t.index)for(var f=t.index.array,p=this.offsets.length>0?this.offsets:[{start:0,count:f.length,index:0}],m=0,g=p.length;g>m;++m)for(var v=p[m].start,A=p[m].count,y=p[m].index,n=v,r=v+A;r>n;n+=3)o=3*(y+f[n]),s=3*(y+f[n+1]),a=3*(y+f[n+2]),h.fromArray(e,o),l.fromArray(e,s),c.fromArray(e,a),d.subVectors(c,l),u.subVectors(h,l),d.cross(u),i[o]+=d.x,i[o+1]+=d.y,i[o+2]+=d.z,i[s]+=d.x,i[s+1]+=d.y,i[s+2]+=d.z,i[a]+=d.x,i[a+1]+=d.y,i[a+2]+=d.z;else for(var n=0,r=e.length;r>n;n+=9)h.fromArray(e,n),l.fromArray(e,n+3),c.fromArray(e,n+6),d.subVectors(c,l),u.subVectors(h,l),d.cross(u),i[n]=d.x,i[n+1]=d.y,i[n+2]=d.z,i[n+3]=d.x,i[n+4]=d.y,i[n+5]=d.z,i[n+6]=d.x,i[n+7]=d.y,i[n+8]=d.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},computeTangents:function(){function t(t,e,i){k.fromArray(n,3*t),M.fromArray(n,3*e),H.fromArray(n,3*i),P.fromArray(o,2*t),D.fromArray(o,2*e),O.fromArray(o,2*i),d=M.x-k.x,u=H.x-k.x,f=M.y-k.y,p=H.y-k.y,m=M.z-k.z,g=H.z-k.z,v=D.x-P.x,A=O.x-P.x,y=D.y-P.y,b=O.y-P.y,E=1/(v*b-A*y),L.set((b*d-y*u)*E,(b*f-y*p)*E,(b*m-y*g)*E),I.set((v*u-A*d)*E,(v*p-A*f)*E,(v*g-A*m)*E),h[t].add(L),h[e].add(L),h[i].add(L),l[t].add(I),l[e].add(I),l[i].add(I)}function e(t){Y.fromArray(r,3*t),q.copy(Y),U=h[t],W.copy(U),W.sub(Y.multiplyScalar(Y.dot(U))).normalize(),G.crossVectors(q,U),V=G.dot(l[t]),j=0>V?-1:1,a[4*t]=W.x,a[4*t+1]=W.y,a[4*t+2]=W.z,a[4*t+3]=j}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)return void console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");var i=this.attributes.index.array,n=this.attributes.position.array,r=this.attributes.normal.array,o=this.attributes.uv.array,s=n.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*s),4));for(var a=this.attributes.tangent.array,h=[],l=[],c=0;s>c;c++)h[c]=new THREE.Vector3,l[c]=new THREE.Vector3;var d,u,f,p,m,g,v,A,y,b,E,w,x,_,T,S,R,C,k=new THREE.Vector3,M=new THREE.Vector3,H=new THREE.Vector3,P=new THREE.Vector2,D=new THREE.Vector2,O=new THREE.Vector2,L=new THREE.Vector3,I=new THREE.Vector3;0===this.drawcalls.length&&this.addDrawCall(0,i.length,0);var B=this.drawcalls;for(_=0,T=B.length;T>_;++_){var F=B[_].start,N=B[_].count,z=B[_].index;for(w=F,x=F+N;x>w;w+=3)S=z+i[w],R=z+i[w+1],C=z+i[w+2],t(S,R,C)}var j,U,V,W=new THREE.Vector3,G=new THREE.Vector3,Y=new THREE.Vector3,q=new THREE.Vector3;for(_=0,T=B.length;T>_;++_){var F=B[_].start,N=B[_].count,z=B[_].index;for(w=F,x=F+N;x>w;w+=3)S=z+i[w],R=z+i[w+1],C=z+i[w+2],e(S),e(R),e(C)}},computeOffsets:function(t){var e=t;void 0===t&&(e=65535);for(var i=(Date.now(),this.attributes.index.array),n=this.attributes.position.array,r=(n.length/3,i.length/3),o=new Uint16Array(i.length),s=0,a=0,h=[{start:0,count:0,index:0}],l=h[0],c=0,d=0,u=new Int32Array(6),f=new Int32Array(n.length),p=new Int32Array(n.length),m=0;m<n.length;m++)f[m]=-1,p[m]=-1;for(var g=0;r>g;g++){d=0;for(var v=0;3>v;v++){var A=i[3*g+v];-1==f[A]?(u[2*v]=A,u[2*v+1]=-1,d++):f[A]<l.index?(u[2*v]=A,u[2*v+1]=-1,c++):(u[2*v]=A,u[2*v+1]=f[A])}var y=a+d;if(y>l.index+e){var b={start:s,count:0,index:a};h.push(b),l=b;for(var E=0;6>E;E+=2){var w=u[E+1];w>-1&&w<l.index&&(u[E+1]=-1)}}for(var E=0;6>E;E+=2){var A=u[E],w=u[E+1];-1===w&&(w=a++),f[A]=w,p[w]=A,o[s++]=w-l.index,l.count++}}return this.reorderBuffers(o,p,a),this.offsets=h,h},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var t,e,i,n,r=this.attributes.normal.array,o=0,s=r.length;s>o;o+=3)t=r[o],e=r[o+1],i=r[o+2],n=1/Math.sqrt(t*t+e*e+i*i),r[o]*=n,r[o+1]*=n,r[o+2]*=n},reorderBuffers:function(t,e,i){var n={};for(var r in this.attributes)if("index"!=r){var o=this.attributes[r].array;n[r]=new o.constructor(this.attributes[r].itemSize*i)}for(var s=0;i>s;s++){var a=e[s];for(var r in this.attributes)if("index"!=r)for(var h=this.attributes[r].array,l=this.attributes[r].itemSize,c=n[r],d=0;l>d;d++)c[s*l+d]=h[a*l+d]}this.attributes.index.array=t;for(var r in this.attributes)"index"!=r&&(this.attributes[r].array=n[r],this.attributes[r].numItems=this.attributes[r].itemSize*i)},toJSON:function(){var t={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},e=this.attributes,i=this.offsets,n=this.boundingSphere;for(var r in e){for(var o=e[r],s=[],a=o.array,h=0,l=a.length;l>h;h++)s[h]=a[h];t.data.attributes[r]={itemSize:o.itemSize,type:o.array.constructor.name,array:s}}return i.length>0&&(t.data.offsets=JSON.parse(JSON.stringify(i))),null!==n&&(t.data.boundingSphere={center:n.center.toArray(),radius:n.radius}),t},clone:function(){var t=new THREE.BufferGeometry;for(var e in this.attributes){var i=this.attributes[e];t.addAttribute(e,i.clone())}for(var n=0,r=this.offsets.length;r>n;n++){var o=this.offsets[n];t.offsets.push({start:o.start,index:o.index,count:o.count})}return t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,
this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(t){for(var e=(new THREE.Matrix3).getNormalMatrix(t),i=0,n=this.vertices.length;n>i;i++){var r=this.vertices[i];r.applyMatrix4(t)}for(var i=0,n=this.faces.length;n>i;i++){var o=this.faces[i];o.normal.applyMatrix3(e).normalize();for(var s=0,a=o.vertexNormals.length;a>s;s++)o.vertexNormals[s].applyMatrix3(e).normalize()}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},fromBufferGeometry:function(t){for(var e=this,i=t.attributes,n=i.position.array,r=void 0!==i.index?i.index.array:void 0,o=void 0!==i.normal?i.normal.array:void 0,s=void 0!==i.color?i.color.array:void 0,a=void 0!==i.uv?i.uv.array:void 0,h=[],l=[],c=0,d=0;c<n.length;c+=3,d+=2)e.vertices.push(new THREE.Vector3(n[c],n[c+1],n[c+2])),void 0!==o&&h.push(new THREE.Vector3(o[c],o[c+1],o[c+2])),void 0!==s&&e.colors.push(new THREE.Color(s[c],s[c+1],s[c+2])),void 0!==a&&l.push(new THREE.Vector2(a[d],a[d+1]));var u=function(t,i,n){var r=void 0!==o?[h[t].clone(),h[i].clone(),h[n].clone()]:[],a=void 0!==s?[e.colors[t].clone(),e.colors[i].clone(),e.colors[n].clone()]:[];e.faces.push(new THREE.Face3(t,i,n,r,a)),e.faceVertexUvs[0].push([l[t],l[i],l[n]])};if(void 0!==r)for(var c=0;c<r.length;c+=3)u(r[c],r[c+1],r[c+2]);else for(var c=0;c<n.length/3;c+=3)u(c,c+1,c+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=new THREE.Vector3;return t.addVectors(this.boundingBox.min,this.boundingBox.max),t.multiplyScalar(-.5),this.applyMatrix((new THREE.Matrix4).makeTranslation(t.x,t.y,t.z)),this.computeBoundingBox(),t},computeFaceNormals:function(){for(var t=new THREE.Vector3,e=new THREE.Vector3,i=0,n=this.faces.length;n>i;i++){var r=this.faces[i],o=this.vertices[r.a],s=this.vertices[r.b],a=this.vertices[r.c];t.subVectors(a,s),e.subVectors(o,s),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,i,n,r,o,s;for(s=new Array(this.vertices.length),e=0,i=this.vertices.length;i>e;e++)s[e]=new THREE.Vector3;if(t){var a,h,l,c=new THREE.Vector3,d=new THREE.Vector3;new THREE.Vector3,new THREE.Vector3,new THREE.Vector3;for(n=0,r=this.faces.length;r>n;n++)o=this.faces[n],a=this.vertices[o.a],h=this.vertices[o.b],l=this.vertices[o.c],c.subVectors(l,h),d.subVectors(a,h),c.cross(d),s[o.a].add(c),s[o.b].add(c),s[o.c].add(c)}else for(n=0,r=this.faces.length;r>n;n++)o=this.faces[n],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(e=0,i=this.vertices.length;i>e;e++)s[e].normalize();for(n=0,r=this.faces.length;r>n;n++)o=this.faces[n],o.vertexNormals[0]=s[o.a].clone(),o.vertexNormals[1]=s[o.b].clone(),o.vertexNormals[2]=s[o.c].clone()},computeMorphNormals:function(){var t,e,i,n,r;for(i=0,n=this.faces.length;n>i;i++)for(r=this.faces[i],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;e>t;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var o=new THREE.Geometry;for(o.faces=this.faces,t=0,e=this.morphTargets.length;e>t;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s,a,h=this.morphNormals[t].faceNormals,l=this.morphNormals[t].vertexNormals;for(i=0,n=this.faces.length;n>i;i++)s=new THREE.Vector3,a={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},h.push(s),l.push(a)}var c=this.morphNormals[t];o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals();var s,a;for(i=0,n=this.faces.length;n>i;i++)r=this.faces[i],s=c.faceNormals[i],a=c.vertexNormals[i],s.copy(r.normal),a.a.copy(r.vertexNormals[0]),a.b.copy(r.vertexNormals[1]),a.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;n>i;i++)r=this.faces[i],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeTangents:function(){function t(t,e,i,n,r,o,s){l=t.vertices[e],c=t.vertices[i],d=t.vertices[n],u=h[r],f=h[o],p=h[s],m=c.x-l.x,g=d.x-l.x,v=c.y-l.y,A=d.y-l.y,y=c.z-l.z,b=d.z-l.z,E=f.x-u.x,w=p.x-u.x,x=f.y-u.y,_=p.y-u.y,T=1/(E*_-w*x),H.set((_*m-x*g)*T,(_*v-x*A)*T,(_*y-x*b)*T),P.set((E*g-w*m)*T,(E*A-w*v)*T,(E*b-w*y)*T),k[e].add(H),k[i].add(H),k[n].add(H),M[e].add(P),M[i].add(P),M[n].add(P)}var e,i,n,r,o,s,a,h,l,c,d,u,f,p,m,g,v,A,y,b,E,w,x,_,T,S,R,C,k=[],M=[],H=new THREE.Vector3,P=new THREE.Vector3,D=new THREE.Vector3,O=new THREE.Vector3,L=new THREE.Vector3;for(n=0,r=this.vertices.length;r>n;n++)k[n]=new THREE.Vector3,M[n]=new THREE.Vector3;for(e=0,i=this.faces.length;i>e;e++)a=this.faces[e],h=this.faceVertexUvs[0][e],t(this,a.a,a.b,a.c,0,1,2);var I=["a","b","c","d"];for(e=0,i=this.faces.length;i>e;e++)for(a=this.faces[e],o=0;o<Math.min(a.vertexNormals.length,3);o++)L.copy(a.vertexNormals[o]),s=a[I[o]],S=k[s],D.copy(S),D.sub(L.multiplyScalar(L.dot(S))).normalize(),O.crossVectors(a.vertexNormals[o],S),R=O.dot(M[s]),C=0>R?-1:1,a.vertexTangents[o]=new THREE.Vector4(D.x,D.y,D.z,C);this.hasTangents=!0},computeLineDistances:function(){for(var t=0,e=this.vertices,i=0,n=e.length;n>i;i++)i>0&&(t+=e[i].distanceTo(e[i-1])),this.lineDistances[i]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t instanceof THREE.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var n,r=this.vertices.length,o=this.vertices,s=t.vertices,a=this.faces,h=t.faces,l=this.faceVertexUvs[0],c=t.faceVertexUvs[0];void 0===i&&(i=0),void 0!==e&&(n=(new THREE.Matrix3).getNormalMatrix(e));for(var d=0,u=s.length;u>d;d++){var f=s[d],p=f.clone();void 0!==e&&p.applyMatrix4(e),o.push(p)}for(d=0,u=h.length;u>d;d++){var m,g,v,A=h[d],y=A.vertexNormals,b=A.vertexColors;m=new THREE.Face3(A.a+r,A.b+r,A.c+r),m.normal.copy(A.normal),void 0!==n&&m.normal.applyMatrix3(n).normalize();for(var E=0,w=y.length;w>E;E++)g=y[E].clone(),void 0!==n&&g.applyMatrix3(n).normalize(),m.vertexNormals.push(g);m.color.copy(A.color);for(var E=0,w=b.length;w>E;E++)v=b[E],m.vertexColors.push(v.clone());m.materialIndex=A.materialIndex+i,a.push(m)}for(d=0,u=c.length;u>d;d++){var x=c[d],_=[];if(void 0!==x){for(var E=0,w=x.length;w>E;E++)_.push(new THREE.Vector2(x[E].x,x[E].y));l.push(_)}}},mergeVertices:function(){var t,e,i,n,r,o,s,a,h={},l=[],c=[],d=4,u=Math.pow(10,d);for(i=0,n=this.vertices.length;n>i;i++)t=this.vertices[i],e=Math.round(t.x*u)+"_"+Math.round(t.y*u)+"_"+Math.round(t.z*u),void 0===h[e]?(h[e]=i,l.push(this.vertices[i]),c[i]=l.length-1):c[i]=c[h[e]];var f=[];for(i=0,n=this.faces.length;n>i;i++){r=this.faces[i],r.a=c[r.a],r.b=c[r.b],r.c=c[r.c],o=[r.a,r.b,r.c];for(var p=-1,m=0;3>m;m++)if(o[m]==o[(m+1)%3]){p=m,f.push(i);break}}for(i=f.length-1;i>=0;i--){var g=f[i];for(this.faces.splice(g,1),s=0,a=this.faceVertexUvs.length;a>s;s++)this.faceVertexUvs[s].splice(g,1)}var v=this.vertices.length-l.length;return this.vertices=l,v},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]?u[e]:(u[e]=d.length/3,d.push(t.x,t.y,t.z),u[e])}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==p[e]?p[e]:(p[e]=f.length,f.push(t.getHex()),p[e])}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==g[e]?g[e]:(g[e]=m.length/2,m.push(t.x,t.y),g[e])}var r={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var s in o)void 0!==o[s]&&(r[s]=o[s]);return r}for(var a=[],h=0;h<this.vertices.length;h++){var l=this.vertices[h];a.push(l.x,l.y,l.z)}for(var c=[],d=[],u={},f=[],p={},m=[],g={},h=0;h<this.faces.length;h++){var v=this.faces[h],A=!1,y=!1,b=void 0!==this.faceVertexUvs[0][h],E=v.normal.length()>0,w=v.vertexNormals.length>0,x=1!==v.color.r||1!==v.color.g||1!==v.color.b,_=v.vertexColors.length>0,T=0;if(T=t(T,0,0),T=t(T,1,A),T=t(T,2,y),T=t(T,3,b),T=t(T,4,E),T=t(T,5,w),T=t(T,6,x),T=t(T,7,_),c.push(T),c.push(v.a,v.b,v.c),b){var S=this.faceVertexUvs[0][h];c.push(n(S[0]),n(S[1]),n(S[2]))}if(E&&c.push(e(v.normal)),w){var R=v.vertexNormals;c.push(e(R[0]),e(R[1]),e(R[2]))}if(x&&c.push(i(v.color)),_){var C=v.vertexColors;c.push(i(C[0]),i(C[1]),i(C[2]))}}return r.data={},r.data.vertices=a,r.data.normals=d,f.length>0&&(r.data.colors=f),m.length>0&&(r.data.uvs=[m]),r.data.faces=c,r},clone:function(){for(var t=new THREE.Geometry,e=this.vertices,i=0,n=e.length;n>i;i++)t.vertices.push(e[i].clone());for(var r=this.faces,i=0,n=r.length;n>i;i++)t.faces.push(r[i].clone());for(var o=this.faceVertexUvs[0],i=0,n=o.length;n>i;i++){for(var s=o[i],a=[],h=0,l=s.length;l>h;h++)a.push(new THREE.Vector2(s[h].x,s[h].y));t.faceVertexUvs[0].push(a)}return t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.Camera=function(){THREE.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.getWorldDirection=function(){var t=new THREE.Quaternion;return function(e){var i=e||new THREE.Vector3;return this.getWorldQuaternion(t),i.set(0,0,-1).applyQuaternion(t)}}(),THREE.Camera.prototype.lookAt=function(){var t=new THREE.Matrix4;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),THREE.Camera.prototype.clone=function(t){return void 0===t&&(t=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,t),t.matrixWorldInverse.copy(this.matrixWorldInverse),t.projectionMatrix.copy(this.projectionMatrix),t},THREE.CubeCamera=function(t,e,i){THREE.Object3D.call(this),this.type="CubeCamera";var n=90,r=1,o=new THREE.PerspectiveCamera(n,r,t,e);o.up.set(0,-1,0),o.lookAt(new THREE.Vector3(1,0,0)),this.add(o);var s=new THREE.PerspectiveCamera(n,r,t,e);s.up.set(0,-1,0),s.lookAt(new THREE.Vector3(-1,0,0)),this.add(s);var a=new THREE.PerspectiveCamera(n,r,t,e);a.up.set(0,0,1),a.lookAt(new THREE.Vector3(0,1,0)),this.add(a);var h=new THREE.PerspectiveCamera(n,r,t,e);h.up.set(0,0,-1),h.lookAt(new THREE.Vector3(0,-1,0)),this.add(h);var l=new THREE.PerspectiveCamera(n,r,t,e);l.up.set(0,-1,0),l.lookAt(new THREE.Vector3(0,0,1)),this.add(l);var c=new THREE.PerspectiveCamera(n,r,t,e);c.up.set(0,-1,0),c.lookAt(new THREE.Vector3(0,0,-1)),this.add(c),this.renderTarget=new THREE.WebGLRenderTargetCube(i,i,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(t,e){var i=this.renderTarget,n=i.generateMipmaps;i.generateMipmaps=!1,i.activeCubeFace=0,t.render(e,o,i),i.activeCubeFace=1,t.render(e,s,i),i.activeCubeFace=2,t.render(e,a,i),i.activeCubeFace=3,t.render(e,h,i),i.activeCubeFace=4,t.render(e,l,i),i.generateMipmaps=n,i.activeCubeFace=5,t.render(e,c,i)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.OrthographicCamera=function(t,e,i,n,r,o){THREE.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(i-t,i+t,n+e,n-e,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var t=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,t),t.zoom=this.zoom,t.left=this.left,t.right=this.right,t.top=this.top,t.bottom=this.bottom,t.near=this.near,t.far=this.far,t.projectionMatrix.copy(this.projectionMatrix),t},THREE.PerspectiveCamera=function(t,e,i,n){THREE.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==t?t:50,this.aspect=void 0!==e?e:1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.setLens=function(t,e){void 0===e&&(e=24),this.fov=2*THREE.Math.radToDeg(Math.atan(e/(2*t))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(t,e,i,n,r,o){this.fullWidth=t,this.fullHeight=e,this.x=i,this.y=n,this.width=r,this.height=o,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var t=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var e=this.fullWidth/this.fullHeight,i=Math.tan(THREE.Math.degToRad(.5*t))*this.near,n=-i,r=e*n,o=e*i,s=Math.abs(o-r),a=Math.abs(i-n);this.projectionMatrix.makeFrustum(r+this.x*s/this.fullWidth,r+(this.x+this.width)*s/this.fullWidth,i-(this.y+this.height)*a/this.fullHeight,i-this.y*a/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(t,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var t=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,t),t.zoom=this.zoom,t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t.projectionMatrix.copy(this.projectionMatrix),t},THREE.Light=function(t){THREE.Object3D.call(this),this.type="Light",this.color=new THREE.Color(t)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.clone=function(t){return void 0===t&&(t=new THREE.Light),THREE.Object3D.prototype.clone.call(this,t),t.color.copy(this.color),t},THREE.AmbientLight=function(t){THREE.Light.call(this,t),this.type="AmbientLight"},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.clone=function(){var t=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,t),t},THREE.AreaLight=function(t,e){THREE.Light.call(this,t),this.type="AreaLight",this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==e?e:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight=function(t,e){THREE.Light.call(this,t),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==e?e:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.clone=function(){var t=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,t),t.target=this.target.clone(),t.intensity=this.intensity,t.castShadow=this.castShadow,t.onlyShadow=this.onlyShadow,t.shadowCameraNear=this.shadowCameraNear,t.shadowCameraFar=this.shadowCameraFar,t.shadowCameraLeft=this.shadowCameraLeft,t.shadowCameraRight=this.shadowCameraRight,t.shadowCameraTop=this.shadowCameraTop,t.shadowCameraBottom=this.shadowCameraBottom,t.shadowCameraVisible=this.shadowCameraVisible,t.shadowBias=this.shadowBias,t.shadowDarkness=this.shadowDarkness,t.shadowMapWidth=this.shadowMapWidth,t.shadowMapHeight=this.shadowMapHeight,t.shadowCascade=this.shadowCascade,t.shadowCascadeOffset.copy(this.shadowCascadeOffset),t.shadowCascadeCount=this.shadowCascadeCount,t.shadowCascadeBias=this.shadowCascadeBias.slice(0),t.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),t.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),t.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),t.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),t},THREE.HemisphereLight=function(t,e,i){THREE.Light.call(this,t),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new THREE.Color(e),this.intensity=void 0!==i?i:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.clone=function(){var t=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,t),t.groundColor.copy(this.groundColor),t.intensity=this.intensity,t},THREE.PointLight=function(t,e,i){THREE.Light.call(this,t),this.type="PointLight",this.intensity=void 0!==e?e:1,this.distance=void 0!==i?i:0},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.clone=function(){var t=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,t),t.intensity=this.intensity,t.distance=this.distance,t},THREE.SpotLight=function(t,e,i,n,r){THREE.Light.call(this,t),this.type="SpotLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==e?e:1,this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.exponent=void 0!==r?r:10,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.clone=function(){var t=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,t),t.target=this.target.clone(),t.intensity=this.intensity,t.distance=this.distance,t.angle=this.angle,t.exponent=this.exponent,t.castShadow=this.castShadow,t.onlyShadow=this.onlyShadow,t.shadowCameraNear=this.shadowCameraNear,t.shadowCameraFar=this.shadowCameraFar,t.shadowCameraFov=this.shadowCameraFov,t.shadowCameraVisible=this.shadowCameraVisible,t.shadowBias=this.shadowBias,t.shadowDarkness=this.shadowDarkness,t.shadowMapWidth=this.shadowMapWidth,t.shadowMapHeight=this.shadowMapHeight,t},THREE.Cache=function(){this.files={}},THREE.Cache.prototype={constructor:THREE.Cache,add:function(t,e){this.files[t]=e},get:function(t){return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},THREE.Loader=function(t){this.showStatus=t,this.statusDomElement=t?THREE.Loader.prototype.addStatusElement():null,this.imageLoader=new THREE.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var t=document.createElement("div");return t.style.position="absolute",t.style.right="0px",t.style.top="0px",t.style.fontSize="0.8em",t.style.textAlign="left",t.style.background="rgba(0,0,0,0.25)",t.style.color="#fff",t.style.width="120px",t.style.padding="0.5em 0.5em 0.5em 0.5em",t.style.zIndex=1e3,t.innerHTML="Loading ...",t},updateProgress:function(t){var e="Loaded ";e+=t.total?(100*t.loaded/t.total).toFixed(0)+"%":(t.loaded/1024).toFixed(2)+" KB",this.statusDomElement.innerHTML=e},extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e){for(var i=[],n=0;n<t.length;++n)i[n]=this.createMaterial(t[n],e);return i},needsTangents:function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];if(n instanceof THREE.ShaderMaterial)return!0}return!1},createMaterial:function(t,e){function i(t){var e=Math.log(t)/Math.LN2;return Math.pow(2,Math.round(e))}function n(t,n,r,s,a,h,l){var c,d=e+r,u=THREE.Loader.Handlers.get(d);if(null!==u?c=u.load(d):(c=new THREE.Texture,u=o.imageLoader,u.crossOrigin=o.crossOrigin,u.load(d,function(t){if(THREE.Math.isPowerOfTwo(t.width)===!1||THREE.Math.isPowerOfTwo(t.height)===!1){var e=i(t.width),n=i(t.height),r=document.createElement("canvas");r.width=e,r.height=n;var o=r.getContext("2d");o.drawImage(t,0,0,e,n),c.image=r}else c.image=t;c.needsUpdate=!0})),c.sourceFile=r,s&&(c.repeat.set(s[0],s[1]),1!==s[0]&&(c.wrapS=THREE.RepeatWrapping),1!==s[1]&&(c.wrapT=THREE.RepeatWrapping)),a&&c.offset.set(a[0],a[1]),h){var f={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==f[h[0]]&&(c.wrapS=f[h[0]]),void 0!==f[h[1]]&&(c.wrapT=f[h[1]])}l&&(c.anisotropy=l),t[n]=c}function r(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]}var o=this,s="MeshLambertMaterial",a={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(t.shading){var h=t.shading.toLowerCase();"phong"===h?s="MeshPhongMaterial":"basic"===h&&(s="MeshBasicMaterial")}if(void 0!==t.blending&&void 0!==THREE[t.blending]&&(a.blending=THREE[t.blending]),(void 0!==t.transparent||t.opacity<1)&&(a.transparent=t.transparent),void 0!==t.depthTest&&(a.depthTest=t.depthTest),void 0!==t.depthWrite&&(a.depthWrite=t.depthWrite),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.flipSided&&(a.side=THREE.BackSide),void 0!==t.doubleSided&&(a.side=THREE.DoubleSide),void 0!==t.wireframe&&(a.wireframe=t.wireframe),void 0!==t.vertexColors&&("face"===t.vertexColors?a.vertexColors=THREE.FaceColors:t.vertexColors&&(a.vertexColors=THREE.VertexColors)),t.colorDiffuse?a.color=r(t.colorDiffuse):t.DbgColor&&(a.color=t.DbgColor),t.colorSpecular&&(a.specular=r(t.colorSpecular)),t.colorAmbient&&(a.ambient=r(t.colorAmbient)),t.colorEmissive&&(a.emissive=r(t.colorEmissive)),t.transparency&&(a.opacity=t.transparency),t.specularCoef&&(a.shininess=t.specularCoef),t.mapDiffuse&&e&&n(a,"map",t.mapDiffuse,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy),t.mapLight&&e&&n(a,"lightMap",t.mapLight,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy),t.mapBump&&e&&n(a,"bumpMap",t.mapBump,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy),t.mapNormal&&e&&n(a,"normalMap",t.mapNormal,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy),t.mapSpecular&&e&&n(a,"specularMap",t.mapSpecular,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy),t.mapAlpha&&e&&n(a,"alphaMap",t.mapAlpha,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy),t.mapBumpScale&&(a.bumpScale=t.mapBumpScale),t.mapNormal){var l=THREE.ShaderLib.normalmap,c=THREE.UniformsUtils.clone(l.uniforms);c.tNormal.value=a.normalMap,t.mapNormalFactor&&c.uNormalScale.value.set(t.mapNormalFactor,t.mapNormalFactor),a.map&&(c.tDiffuse.value=a.map,c.enableDiffuse.value=!0),a.specularMap&&(c.tSpecular.value=a.specularMap,c.enableSpecular.value=!0),a.lightMap&&(c.tAO.value=a.lightMap,c.enableAO.value=!0),c.diffuse.value.setHex(a.color),c.specular.value.setHex(a.specular),c.ambient.value.setHex(a.ambient),c.shininess.value=a.shininess,void 0!==a.opacity&&(c.opacity.value=a.opacity);var d={fragmentShader:l.fragmentShader,vertexShader:l.vertexShader,uniforms:c,lights:!0,fog:!0},u=new THREE.ShaderMaterial(d);a.transparent&&(u.transparent=!0)}else var u=new THREE[s](a);return void 0!==t.DbgName&&(u.name=t.DbgName),u}},THREE.Loader.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=0,i=this.handlers.length;i>e;e+=2){var n=this.handlers[e],r=this.handlers[e+1];if(n.test(t))return r}return null}},THREE.XHRLoader=function(t){this.cache=new THREE.Cache,this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(t,e,i,n){var r=this,o=r.cache.get(t);if(void 0!==o)return void(e&&e(o));var s=new XMLHttpRequest;s.open("GET",t,!0),s.addEventListener("load",function(i){r.cache.add(t,this.response),e&&e(this.response),r.manager.itemEnd(t)},!1),void 0!==i&&s.addEventListener("progress",function(t){i(t)},!1),void 0!==n&&s.addEventListener("error",function(t){n(t)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(s.responseType=this.responseType),s.send(null),r.manager.itemStart(t)},setResponseType:function(t){this.responseType=t},setCrossOrigin:function(t){this.crossOrigin=t}},THREE.ImageLoader=function(t){this.cache=new THREE.Cache,this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(t,e,i,n){var r=this,o=r.cache.get(t);if(void 0!==o)return void e(o);var s=document.createElement("img");return void 0!==e&&s.addEventListener("load",function(i){r.cache.add(t,this),e(this),r.manager.itemEnd(t)},!1),void 0!==i&&s.addEventListener("progress",function(t){i(t)},!1),void 0!==n&&s.addEventListener("error",function(t){n(t)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),s.src=t,r.manager.itemStart(t),s},setCrossOrigin:function(t){this.crossOrigin=t}},THREE.JSONLoader=function(t){THREE.Loader.call(this,t),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.load=function(t,e,i){i=i&&"string"==typeof i?i:this.extractUrlBase(t),this.onLoadStart(),this.loadAjaxJSON(this,t,e,i)},THREE.JSONLoader.prototype.loadAjaxJSON=function(t,e,i,n,r){var o=new XMLHttpRequest,s=0;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(200===o.status||0===o.status){if(o.responseText){var a=JSON.parse(o.responseText);if(void 0!==a.metadata&&"scene"===a.metadata.type)return void console.error('THREE.JSONLoader: "'+e+'" seems to be a Scene. Use THREE.SceneLoader instead.');var h=t.parse(a,n);i(h.geometry,h.materials)}else console.error('THREE.JSONLoader: "'+e+'" seems to be unreachable or the file is empty.');t.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+e+'" ('+o.status+")");else o.readyState===o.LOADING?r&&(0===s&&(s=o.getResponseHeader("Content-Length")),r({total:s,loaded:o.responseText.length})):o.readyState===o.HEADERS_RECEIVED&&void 0!==r&&(s=o.getResponseHeader("Content-Length"))},o.open("GET",e,!0),o.withCredentials=this.withCredentials,o.send(null)},THREE.JSONLoader.prototype.parse=function(t,e){function i(e){function i(t,e){return t&1<<e}var n,r,s,a,h,l,c,d,u,f,p,m,g,v,A,y,b,E,w,x,_,T,S,R,C,k,M,H=t.faces,P=t.vertices,D=t.normals,O=t.colors,L=0;if(void 0!==t.uvs){for(n=0;n<t.uvs.length;n++)t.uvs[n].length&&L++;for(n=0;L>n;n++)o.faceVertexUvs[n]=[]}for(a=0,h=P.length;h>a;)E=new THREE.Vector3,E.x=P[a++]*e,E.y=P[a++]*e,E.z=P[a++]*e,o.vertices.push(E);for(a=0,h=H.length;h>a;)if(f=H[a++],p=i(f,0),m=i(f,1),g=i(f,3),v=i(f,4),A=i(f,5),y=i(f,6),b=i(f,7),p){if(x=new THREE.Face3,x.a=H[a],x.b=H[a+1],x.c=H[a+3],_=new THREE.Face3,_.a=H[a+1],_.b=H[a+2],_.c=H[a+3],a+=4,m&&(u=H[a++],x.materialIndex=u,_.materialIndex=u),s=o.faces.length,g)for(n=0;L>n;n++)for(R=t.uvs[n],o.faceVertexUvs[n][s]=[],o.faceVertexUvs[n][s+1]=[],r=0;4>r;r++)d=H[a++],k=R[2*d],M=R[2*d+1],C=new THREE.Vector2(k,M),2!==r&&o.faceVertexUvs[n][s].push(C),0!==r&&o.faceVertexUvs[n][s+1].push(C);if(v&&(c=3*H[a++],x.normal.set(D[c++],D[c++],D[c]),_.normal.copy(x.normal)),A)for(n=0;4>n;n++)c=3*H[a++],S=new THREE.Vector3(D[c++],D[c++],D[c]),2!==n&&x.vertexNormals.push(S),0!==n&&_.vertexNormals.push(S);if(y&&(l=H[a++],T=O[l],x.color.setHex(T),_.color.setHex(T)),b)for(n=0;4>n;n++)l=H[a++],T=O[l],2!==n&&x.vertexColors.push(new THREE.Color(T)),0!==n&&_.vertexColors.push(new THREE.Color(T));o.faces.push(x),o.faces.push(_)}else{if(w=new THREE.Face3,w.a=H[a++],w.b=H[a++],w.c=H[a++],m&&(u=H[a++],w.materialIndex=u),s=o.faces.length,g)for(n=0;L>n;n++)for(R=t.uvs[n],o.faceVertexUvs[n][s]=[],r=0;3>r;r++)d=H[a++],k=R[2*d],M=R[2*d+1],C=new THREE.Vector2(k,M),o.faceVertexUvs[n][s].push(C);if(v&&(c=3*H[a++],w.normal.set(D[c++],D[c++],D[c])),A)for(n=0;3>n;n++)c=3*H[a++],S=new THREE.Vector3(D[c++],D[c++],D[c]),w.vertexNormals.push(S);if(y&&(l=H[a++],w.color.setHex(O[l])),b)for(n=0;3>n;n++)l=H[a++],w.vertexColors.push(new THREE.Color(O[l]));o.faces.push(w)}}function n(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,n=t.skinWeights.length;n>i;i+=e){var r=t.skinWeights[i],s=e>1?t.skinWeights[i+1]:0,a=e>2?t.skinWeights[i+2]:0,h=e>3?t.skinWeights[i+3]:0;o.skinWeights.push(new THREE.Vector4(r,s,a,h))}if(t.skinIndices)for(var i=0,n=t.skinIndices.length;n>i;i+=e){var l=t.skinIndices[i],c=e>1?t.skinIndices[i+1]:0,d=e>2?t.skinIndices[i+2]:0,u=e>3?t.skinIndices[i+3]:0;o.skinIndices.push(new THREE.Vector4(l,c,d,u))}o.bones=t.bones,o.bones&&o.bones.length>0&&(o.skinWeights.length!==o.skinIndices.length||o.skinIndices.length!==o.vertices.length)&&console.warn("When skinning, number of vertices ("+o.vertices.length+"), skinIndices ("+o.skinIndices.length+"), and skinWeights ("+o.skinWeights.length+") should match."),o.animation=t.animation,o.animations=t.animations}function r(e){if(void 0!==t.morphTargets){var i,n,r,s,a,h;for(i=0,n=t.morphTargets.length;n>i;i++)for(o.morphTargets[i]={},o.morphTargets[i].name=t.morphTargets[i].name,o.morphTargets[i].vertices=[],a=o.morphTargets[i].vertices,h=t.morphTargets[i].vertices,r=0,s=h.length;s>r;r+=3){var l=new THREE.Vector3;l.x=h[r]*e,l.y=h[r+1]*e,l.z=h[r+2]*e,a.push(l)}}if(void 0!==t.morphColors){var i,n,c,d,u,f,p;for(i=0,n=t.morphColors.length;n>i;i++)for(o.morphColors[i]={},o.morphColors[i].name=t.morphColors[i].name,o.morphColors[i].colors=[],u=o.morphColors[i].colors,f=t.morphColors[i].colors,c=0,d=f.length;d>c;c+=3)p=new THREE.Color(16755200),p.setRGB(f[c],f[c+1],f[c+2]),u.push(p)}}var o=new THREE.Geometry,s=void 0!==t.scale?1/t.scale:1;if(i(s),n(),r(s),o.computeFaceNormals(),o.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:o};var a=this.initMaterials(t.materials,e);return this.needsTangents(a)&&o.computeTangents(),{geometry:o,materials:a}},THREE.LoadingManager=function(t,e,i){var n=this,r=0,o=0;this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++},this.itemEnd=function(t){r++,void 0!==n.onProgress&&n.onProgress(t,r,o),r===o&&void 0!==n.onLoad&&n.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(t,e,i,n){var r=this,o=new THREE.XHRLoader;o.setCrossOrigin(this.crossOrigin),o.load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e=new THREE.BufferGeometry,i=t.attributes;for(var n in i){var r=i[n],o=new self[r.type](r.array);e.addAttribute(n,new THREE.BufferAttribute(o,r.itemSize))}var s=t.offsets;void 0!==s&&(e.offsets=JSON.parse(JSON.stringify(s)));var a=t.boundingSphere;if(void 0!==a){var h=new THREE.Vector3;void 0!==a.center&&h.fromArray(a.center),e.boundingSphere=new THREE.Sphere(h,a.radius)}return e}},THREE.MaterialLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(t,e,i,n){var r=this,o=new THREE.XHRLoader;o.setCrossOrigin(this.crossOrigin),o.load(t,function(t){e(r.parse(JSON.parse(t)));
},i,n)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e=new THREE[t.type];if(void 0!==t.color&&e.color.setHex(t.color),void 0!==t.ambient&&e.ambient.setHex(t.ambient),void 0!==t.emissive&&e.emissive.setHex(t.emissive),void 0!==t.specular&&e.specular.setHex(t.specular),void 0!==t.shininess&&(e.shininess=t.shininess),void 0!==t.uniforms&&(e.uniforms=t.uniforms),void 0!==t.vertexShader&&(e.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(e.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(e.vertexColors=t.vertexColors),void 0!==t.shading&&(e.shading=t.shading),void 0!==t.blending&&(e.blending=t.blending),void 0!==t.side&&(e.side=t.side),void 0!==t.opacity&&(e.opacity=t.opacity),void 0!==t.transparent&&(e.transparent=t.transparent),void 0!==t.wireframe&&(e.wireframe=t.wireframe),void 0!==t.materials)for(var i=0,n=t.materials.length;n>i;i++)e.materials.push(this.parse(t.materials[i]));return e}},THREE.ObjectLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(t,e,i,n){var r=this,o=new THREE.XHRLoader(r.manager);o.setCrossOrigin(this.crossOrigin),o.load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e=this.parseGeometries(t.geometries),i=this.parseMaterials(t.materials),n=this.parseObject(t.object,e,i);return n},parseGeometries:function(t){var e={};if(void 0!==t)for(var i=new THREE.JSONLoader,n=new THREE.BufferGeometryLoader,r=0,o=t.length;o>r;r++){var s,a=t[r];switch(a.type){case"PlaneGeometry":s=new THREE.PlaneGeometry(a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"CubeGeometry":s=new THREE.BoxGeometry(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":s=new THREE.CircleGeometry(a.radius,a.segments);break;case"CylinderGeometry":s=new THREE.CylinderGeometry(a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded);break;case"SphereGeometry":s=new THREE.SphereGeometry(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"IcosahedronGeometry":s=new THREE.IcosahedronGeometry(a.radius,a.detail);break;case"TorusGeometry":s=new THREE.TorusGeometry(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":s=new THREE.TorusKnotGeometry(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.p,a.q,a.heightScale);break;case"BufferGeometry":s=n.parse(a.data);break;case"Geometry":s=i.parse(a.data).geometry}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),e[a.uuid]=s}return e},parseMaterials:function(t){var e={};if(void 0!==t)for(var i=new THREE.MaterialLoader,n=0,r=t.length;r>n;n++){var o=t[n],s=i.parse(o);s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),e[o.uuid]=s}return e},parseObject:function(){var t=new THREE.Matrix4;return function(e,i,n){var r;switch(e.type){case"Scene":r=new THREE.Scene;break;case"PerspectiveCamera":r=new THREE.PerspectiveCamera(e.fov,e.aspect,e.near,e.far);break;case"OrthographicCamera":r=new THREE.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":r=new THREE.AmbientLight(e.color);break;case"DirectionalLight":r=new THREE.DirectionalLight(e.color,e.intensity);break;case"PointLight":r=new THREE.PointLight(e.color,e.intensity,e.distance);break;case"SpotLight":r=new THREE.SpotLight(e.color,e.intensity,e.distance,e.angle,e.exponent);break;case"HemisphereLight":r=new THREE.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"Mesh":var o=i[e.geometry],s=n[e.material];void 0===o&&console.warn("THREE.ObjectLoader: Undefined geometry",e.geometry),void 0===s&&console.warn("THREE.ObjectLoader: Undefined material",e.material),r=new THREE.Mesh(o,s);break;case"Line":var o=i[e.geometry],s=n[e.material];void 0===o&&console.warn("THREE.ObjectLoader: Undefined geometry",e.geometry),void 0===s&&console.warn("THREE.ObjectLoader: Undefined material",e.material),r=new THREE.Line(o,s);break;case"Sprite":var s=n[e.material];void 0===s&&console.warn("THREE.ObjectLoader: Undefined material",e.material),r=new THREE.Sprite(s);break;case"Group":r=new THREE.Group;break;default:r=new THREE.Object3D}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.children)for(var a in e.children)r.add(this.parseObject(e.children[a],i,n));return r}}()},THREE.TextureLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(t,e,i,n){var r=this,o=new THREE.ImageLoader(r.manager);o.setCrossOrigin(this.crossOrigin),o.load(t,function(t){var i=new THREE.Texture(t);i.needsUpdate=!0,void 0!==e&&e(i)},i,n)},setCrossOrigin:function(t){this.crossOrigin=t}},THREE.CompressedTextureLoader=function(){this._parser=null},THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(t,e,i){var n=this,r=[],o=new THREE.CompressedTexture;o.image=r;var s=new THREE.XHRLoader;if(s.setResponseType("arraybuffer"),t instanceof Array)for(var a=0,h=function(i){s.load(t[i],function(t){var s=n._parser(t,!0);r[i]={width:s.width,height:s.height,format:s.format,mipmaps:s.mipmaps},a+=1,6===a&&(1==s.mipmapCount&&(o.minFilter=THREE.LinearFilter),o.format=s.format,o.needsUpdate=!0,e&&e(o))})},l=0,c=t.length;c>l;++l)h(l);else s.load(t,function(t){var i=n._parser(t,!0);if(i.isCubemap)for(var s=i.mipmaps.length/i.mipmapCount,a=0;s>a;a++){r[a]={mipmaps:[]};for(var h=0;h<i.mipmapCount;h++)r[a].mipmaps.push(i.mipmaps[a*i.mipmapCount+h]),r[a].format=i.format,r[a].width=i.width,r[a].height=i.height}else o.image.width=i.width,o.image.height=i.height,o.mipmaps=i.mipmaps;1===i.mipmapCount&&(o.minFilter=THREE.LinearFilter),o.format=i.format,o.needsUpdate=!0,e&&e(o)});return o}},THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Material",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},THREE.Material.prototype={constructor:THREE.Material,setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i){if(e in this){var n=this[e];n instanceof THREE.Color?n.set(i):n instanceof THREE.Vector3&&i instanceof THREE.Vector3?n.copy(i):"overdraw"==e?this[e]=Number(i):this[e]=i}}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(){var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(t.name=this.name),this instanceof THREE.MeshBasicMaterial?(t.color=this.color.getHex(),this.vertexColors!==THREE.NoColors&&(t.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshLambertMaterial?(t.color=this.color.getHex(),t.ambient=this.ambient.getHex(),t.emissive=this.emissive.getHex(),this.vertexColors!==THREE.NoColors&&(t.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshPhongMaterial?(t.color=this.color.getHex(),t.ambient=this.ambient.getHex(),t.emissive=this.emissive.getHex(),t.specular=this.specular.getHex(),t.shininess=this.shininess,this.vertexColors!==THREE.NoColors&&(t.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshNormalMaterial?(this.shading!==THREE.FlatShading&&(t.shading=this.shading),this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshDepthMaterial?(this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.ShaderMaterial?(t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader):this instanceof THREE.SpriteMaterial&&(t.color=this.color.getHex()),this.opacity<1&&(t.opacity=this.opacity),this.transparent!==!1&&(t.transparent=this.transparent),this.wireframe!==!1&&(t.wireframe=this.wireframe),t},clone:function(t){return void 0===t&&(t=new THREE.Material),t.name=this.name,t.side=this.side,t.opacity=this.opacity,t.transparent=this.transparent,t.blending=this.blending,t.blendSrc=this.blendSrc,t.blendDst=this.blendDst,t.blendEquation=this.blendEquation,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.polygonOffset=this.polygonOffset,t.polygonOffsetFactor=this.polygonOffsetFactor,t.polygonOffsetUnits=this.polygonOffsetUnits,t.alphaTest=this.alphaTest,t.overdraw=this.overdraw,t.visible=this.visible,t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(t){THREE.Material.call(this),this.type="LineBasicMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(t)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.clone=function(){var t=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.linewidth=this.linewidth,t.linecap=this.linecap,t.linejoin=this.linejoin,t.vertexColors=this.vertexColors,t.fog=this.fog,t},THREE.LineDashedMaterial=function(t){THREE.Material.call(this),this.type="LineDashedMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(t)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.clone=function(){var t=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.linewidth=this.linewidth,t.scale=this.scale,t.dashSize=this.dashSize,t.gapSize=this.gapSize,t.vertexColors=this.vertexColors,t.fog=this.fog,t},THREE.MeshBasicMaterial=function(t){THREE.Material.call(this),this.type="MeshBasicMaterial",this.color=new THREE.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(t)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.clone=function(){var t=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.lightMap=this.lightMap,t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t},THREE.MeshLambertMaterial=function(t){THREE.Material.call(this),this.type="MeshLambertMaterial",this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.clone=function(){var t=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.ambient.copy(this.ambient),t.emissive.copy(this.emissive),t.wrapAround=this.wrapAround,t.wrapRGB.copy(this.wrapRGB),t.map=this.map,t.lightMap=this.lightMap,t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},THREE.MeshPhongMaterial=function(t){THREE.Material.call(this),this.type="MeshPhongMaterial",this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.clone=function(){var t=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.ambient.copy(this.ambient),t.emissive.copy(this.emissive),t.specular.copy(this.specular),t.shininess=this.shininess,t.metal=this.metal,t.wrapAround=this.wrapAround,t.wrapRGB.copy(this.wrapRGB),t.map=this.map,t.lightMap=this.lightMap,t.bumpMap=this.bumpMap,t.bumpScale=this.bumpScale,t.normalMap=this.normalMap,t.normalScale.copy(this.normalScale),t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},THREE.MeshDepthMaterial=function(t){THREE.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.clone=function(){var t=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,t),t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t},THREE.MeshNormalMaterial=function(t){THREE.Material.call(this,t),this.type="MeshNormalMaterial",this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(t)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.clone=function(){var t=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,t),t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t},THREE.MeshFaceMaterial=function(t){this.uuid=THREE.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=t instanceof Array?t:[]},THREE.MeshFaceMaterial.prototype={constructor:THREE.MeshFaceMaterial,toJSON:function(){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},e=0,i=this.materials.length;i>e;e++)t.materials.push(this.materials[e].toJSON());return t},clone:function(){for(var t=new THREE.MeshFaceMaterial,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t}},THREE.PointCloudMaterial=function(t){THREE.Material.call(this),this.type="PointCloudMaterial",this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(t)},THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype),THREE.PointCloudMaterial.prototype.clone=function(){var t=new THREE.PointCloudMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.size=this.size,t.sizeAttenuation=this.sizeAttenuation,t.vertexColors=this.vertexColors,t.fog=this.fog,t},THREE.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(t)},THREE.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(t)},THREE.ShaderMaterial=function(t){THREE.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(t)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.clone=function(){var t=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,t),t.fragmentShader=this.fragmentShader,t.vertexShader=this.vertexShader,t.uniforms=THREE.UniformsUtils.clone(this.uniforms),t.attributes=this.attributes,t.defines=this.defines,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.fog=this.fog,t.lights=this.lights,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},THREE.RawShaderMaterial=function(t){THREE.ShaderMaterial.call(this,t),this.type="RawShaderMaterial"},THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.clone=function(){var t=new THREE.RawShaderMaterial;return THREE.ShaderMaterial.prototype.clone.call(this,t),t},THREE.SpriteMaterial=function(t){THREE.Material.call(this),this.type="SpriteMaterial",this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(t)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.clone=function(){var t=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.rotation=this.rotation,t.fog=this.fog,t},THREE.Texture=function(t,e,i,n,r,o,s,a,h){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.image=void 0!==t?t:THREE.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:THREE.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==n?n:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==r?r:THREE.LinearFilter,this.minFilter=void 0!==o?o:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==h?h:1,this.format=void 0!==s?s:THREE.RGBAFormat,this.type=void 0!==a?a:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},THREE.Texture.DEFAULT_IMAGE=void 0,THREE.Texture.DEFAULT_MAPPING=new THREE.UVMapping,THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){t===!0&&this.update(),this._needsUpdate=t},clone:function(t){return void 0===t&&(t=new THREE.Texture),t.image=this.image,t.mipmaps=this.mipmaps.slice(0),t.mapping=this.mapping,t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.magFilter=this.magFilter,t.minFilter=this.minFilter,t.anisotropy=this.anisotropy,t.format=this.format,t.type=this.type,t.offset.copy(this.offset),t.repeat.copy(this.repeat),t.generateMipmaps=this.generateMipmaps,t.premultiplyAlpha=this.premultiplyAlpha,t.flipY=this.flipY,t.unpackAlignment=this.unpackAlignment,t},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CubeTexture=function(t,e,i,n,r,o,s,a,h){THREE.Texture.call(this,t,e,i,n,r,o,s,a,h),this.images=t},THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CubeTexture.clone=function(t){return void 0===t&&(t=new THREE.CubeTexture),THREE.Texture.prototype.clone.call(this,t),t.images=this.images,t},THREE.CompressedTexture=function(t,e,i,n,r,o,s,a,h,l,c){THREE.Texture.call(this,null,o,s,a,h,l,n,r,c),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.clone=function(){var t=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,t),t},THREE.DataTexture=function(t,e,i,n,r,o,s,a,h,l,c){THREE.Texture.call(this,null,o,s,a,h,l,n,r,c),this.image={data:t,width:e,height:i}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone=function(){var t=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,t),t},THREE.VideoTexture=function(t,e,i,n,r,o,s,a,h){THREE.Texture.call(this,t,e,i,n,r,o,s,a,h),this.generateMipmaps=!1;var l=this,c=function(){requestAnimationFrame(c),t.readyState===t.HAVE_ENOUGH_DATA&&(l.needsUpdate=!0)};c()},THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype),THREE.Group=function(){THREE.Object3D.call(this),this.type="Group"},THREE.Group.prototype=Object.create(THREE.Object3D.prototype),THREE.PointCloud=function(t,e){THREE.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==t?t:new THREE.Geometry,this.material=void 0!==e?e:new THREE.PointCloudMaterial({color:16777215*Math.random()}),this.sortParticles=!1},THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype),THREE.PointCloud.prototype.raycast=function(){var t=new THREE.Matrix4,e=new THREE.Ray;return function(i,n){var r=this,o=r.geometry,s=i.params.PointCloud.threshold;if(t.getInverse(this.matrixWorld),e.copy(i.ray).applyMatrix4(t),null===o.boundingBox||e.isIntersectionBox(o.boundingBox)!==!1){var a=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=new THREE.Vector3,l=function(t,o){var s=e.distanceToPoint(t);if(a>s){var h=e.closestPointToPoint(t);h.applyMatrix4(r.matrixWorld);var l=i.ray.origin.distanceTo(h);n.push({distance:l,distanceToRay:s,point:h.clone(),index:o,face:null,object:r})}};if(o instanceof THREE.BufferGeometry){var c=o.attributes,d=c.position.array;if(void 0!==c.index){var u=c.index.array,f=o.offsets;if(0===f.length){var p={start:0,count:u.length,index:0};f=[p]}for(var m=0,g=f.length;g>m;++m)for(var v=f[m].start,A=f[m].count,y=f[m].index,b=v,E=v+A;E>b;b++){var w=y+u[b];h.fromArray(d,3*w),l(h,w)}}else for(var x=d.length/3,b=0;x>b;b++)h.set(d[3*b],d[3*b+1],d[3*b+2]),l(h,b)}else for(var _=this.geometry.vertices,b=0;b<_.length;b++)l(_[b],b)}}}(),THREE.PointCloud.prototype.clone=function(t){return void 0===t&&(t=new THREE.PointCloud(this.geometry,this.material)),t.sortParticles=this.sortParticles,THREE.Object3D.prototype.clone.call(this,t),t},THREE.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new THREE.PointCloud(t,e)},THREE.Line=function(t,e,i){THREE.Object3D.call(this),this.type="Line",this.geometry=void 0!==t?t:new THREE.Geometry,this.material=void 0!==e?e:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==i?i:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.raycast=function(){var t=new THREE.Matrix4,e=new THREE.Ray,i=new THREE.Sphere;return function(n,r){var o=n.linePrecision,s=o*o,a=this.geometry;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(this.matrixWorld),n.ray.isIntersectionSphere(i)!==!1&&(t.getInverse(this.matrixWorld),e.copy(n.ray).applyMatrix4(t),a instanceof THREE.Geometry))for(var h=a.vertices,l=h.length,c=new THREE.Vector3,d=new THREE.Vector3,u=this.mode===THREE.LineStrip?1:2,f=0;l-1>f;f+=u){var p=e.distanceSqToSegment(h[f],h[f+1],d,c);if(!(p>s)){var m=e.origin.distanceTo(d);m<n.near||m>n.far||r.push({distance:m,point:c.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}}(),THREE.Line.prototype.clone=function(t){return void 0===t&&(t=new THREE.Line(this.geometry,this.material,this.mode)),THREE.Object3D.prototype.clone.call(this,t),t},THREE.Mesh=function(t,e){THREE.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new THREE.Geometry,this.material=void 0!==e?e:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,e=this.geometry.morphTargets.length;e>t;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[t].name]=t}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(t){return void 0!==this.morphTargetDictionary[t]?this.morphTargetDictionary[t]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.raycast=function(){var t=new THREE.Matrix4,e=new THREE.Ray,i=new THREE.Sphere,n=new THREE.Vector3,r=new THREE.Vector3,o=new THREE.Vector3;return function(s,a){var h=this.geometry;if(null===h.boundingSphere&&h.computeBoundingSphere(),i.copy(h.boundingSphere),i.applyMatrix4(this.matrixWorld),s.ray.isIntersectionSphere(i)!==!1&&(t.getInverse(this.matrixWorld),e.copy(s.ray).applyMatrix4(t),null===h.boundingBox||e.isIntersectionBox(h.boundingBox)!==!1))if(h instanceof THREE.BufferGeometry){var l=this.material;if(void 0===l)return;var c,d,u,f=h.attributes,p=s.precision;if(void 0!==f.index){var m=f.index.array,g=f.position.array,v=h.offsets;0===v.length&&(v=[{start:0,count:m.length,index:0}]);for(var A=0,y=v.length;y>A;++A)for(var b=v[A].start,E=v[A].count,w=v[A].index,x=b,_=b+E;_>x;x+=3){if(c=w+m[x],d=w+m[x+1],u=w+m[x+2],n.fromArray(g,3*c),r.fromArray(g,3*d),o.fromArray(g,3*u),l.side===THREE.BackSide)var T=e.intersectTriangle(o,r,n,!0);else var T=e.intersectTriangle(n,r,o,l.side!==THREE.DoubleSide);if(null!==T){T.applyMatrix4(this.matrixWorld);var S=s.ray.origin.distanceTo(T);p>S||S<s.near||S>s.far||a.push({distance:S,point:T,face:new THREE.Face3(c,d,u,THREE.Triangle.normal(n,r,o)),faceIndex:null,object:this})}}}else for(var g=f.position.array,x=0,R=0,_=g.length;_>x;x+=3,R+=9){if(c=x,d=x+1,u=x+2,n.fromArray(g,R),r.fromArray(g,R+3),o.fromArray(g,R+6),l.side===THREE.BackSide)var T=e.intersectTriangle(o,r,n,!0);else var T=e.intersectTriangle(n,r,o,l.side!==THREE.DoubleSide);if(null!==T){T.applyMatrix4(this.matrixWorld);var S=s.ray.origin.distanceTo(T);p>S||S<s.near||S>s.far||a.push({distance:S,point:T,face:new THREE.Face3(c,d,u,THREE.Triangle.normal(n,r,o)),faceIndex:null,object:this})}}}else if(h instanceof THREE.Geometry)for(var c,d,u,C=this.material instanceof THREE.MeshFaceMaterial,k=C===!0?this.material.materials:null,p=s.precision,M=h.vertices,H=0,P=h.faces.length;P>H;H++){var D=h.faces[H],l=C===!0?k[D.materialIndex]:this.material;if(void 0!==l){if(c=M[D.a],d=M[D.b],u=M[D.c],l.morphTargets===!0){var O=h.morphTargets,L=this.morphTargetInfluences;n.set(0,0,0),r.set(0,0,0),o.set(0,0,0);for(var I=0,B=O.length;B>I;I++){var F=L[I];if(0!==F){var N=O[I].vertices;n.x+=(N[D.a].x-c.x)*F,n.y+=(N[D.a].y-c.y)*F,n.z+=(N[D.a].z-c.z)*F,r.x+=(N[D.b].x-d.x)*F,r.y+=(N[D.b].y-d.y)*F,r.z+=(N[D.b].z-d.z)*F,o.x+=(N[D.c].x-u.x)*F,o.y+=(N[D.c].y-u.y)*F,o.z+=(N[D.c].z-u.z)*F}}n.add(c),r.add(d),o.add(u),c=n,d=r,u=o}if(l.side===THREE.BackSide)var T=e.intersectTriangle(u,d,c,!0);else var T=e.intersectTriangle(c,d,u,l.side!==THREE.DoubleSide);if(null!==T){T.applyMatrix4(this.matrixWorld);var S=s.ray.origin.distanceTo(T);p>S||S<s.near||S>s.far||a.push({distance:S,point:T,face:D,faceIndex:H,object:this})}}}}}(),THREE.Mesh.prototype.clone=function(t,e){return void 0===t&&(t=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,t,e),t},THREE.Bone=function(t){THREE.Object3D.call(this),this.skin=t},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Skeleton=function(t,e,i){if(this.useVertexTexture=void 0!==i?i:!0,this.identityMatrix=new THREE.Matrix4,t=t||[],this.bones=t.slice(0),this.useVertexTexture){var n;n=this.bones.length>256?64:this.bones.length>64?32:this.bones.length>16?16:8,this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var r=0,o=this.bones.length;o>r;r++)this.boneInverses.push(new THREE.Matrix4)}},THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var t=0,e=this.bones.length;e>t;t++){var i=new THREE.Matrix4;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},THREE.Skeleton.prototype.pose=function(){for(var t,e=0,i=this.bones.length;i>e;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,i=this.bones.length;i>e;e++)t=this.bones[e],t&&(t.parent?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},THREE.Skeleton.prototype.update=function(){
var t=new THREE.Matrix4;return function(){for(var e=0,i=this.bones.length;i>e;e++){var n=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;t.multiplyMatrices(n,this.boneInverses[e]),t.flattenToArrayOffset(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh=function(t,e,i){THREE.Mesh.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4;var n=[];if(this.geometry&&void 0!==this.geometry.bones){for(var r,o,s,a,h,l=0,c=this.geometry.bones.length;c>l;++l)o=this.geometry.bones[l],s=o.pos,a=o.rotq,h=o.scl,r=new THREE.Bone(this),n.push(r),r.name=o.name,r.position.set(s[0],s[1],s[2]),r.quaternion.set(a[0],a[1],a[2],a[3]),void 0!==h?r.scale.set(h[0],h[1],h[2]):r.scale.set(1,1,1);for(var l=0,c=this.geometry.bones.length;c>l;++l)o=this.geometry.bones[l],-1!==o.parent?n[o.parent].add(n[l]):this.add(n[l])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new THREE.Skeleton(n,void 0,i))},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.bind=function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var t=0;t<this.geometry.skinIndices.length;t++){var e=this.geometry.skinWeights[t],i=1/e.lengthManhattan();i!==1/0?e.multiplyScalar(i):e.set(1)}},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(t){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},THREE.SkinnedMesh.prototype.clone=function(t){return void 0===t&&(t=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,t),t},THREE.MorphAnimMesh=function(t,e){THREE.Mesh.call(this,t,e),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.setFrameRange=function(t,e){this.startKeyframe=t,this.endKeyframe=e,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var t=this.geometry;t.animations||(t.animations={});for(var e,i=t.animations,n=/([a-z]+)_?(\d+)/,r=0,o=t.morphTargets.length;o>r;r++){var s=t.morphTargets[r],a=s.name.match(n);if(a&&a.length>1){var h=a[1];a[2];i[h]||(i[h]={start:1/0,end:-(1/0)});var l=i[h];r<l.start&&(l.start=r),r>l.end&&(l.end=r),e||(e=h)}}t.firstAnimation=e},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(t,e,i){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[t]={start:e,end:i}},THREE.MorphAnimMesh.prototype.playAnimation=function(t,e){var i=this.geometry.animations[t];i?(this.setFrameRange(i.start,i.end),this.duration=1e3*((i.end-i.start)/e),this.time=0):console.warn("animation["+t+"] undefined")},THREE.MorphAnimMesh.prototype.updateAnimation=function(t){var e=this.duration/this.length;this.time+=this.direction*t,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var i=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/e),0,this.length-1);i!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[i]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=i);var n=this.time%e/e;this.directionBackwards&&(n=1-n),this.morphTargetInfluences[this.currentKeyframe]=n,this.morphTargetInfluences[this.lastKeyframe]=1-n},THREE.MorphAnimMesh.prototype.interpolateTargets=function(t,e,i){for(var n=this.morphTargetInfluences,r=0,o=n.length;o>r;r++)n[r]=0;t>-1&&(n[t]=1-i),e>-1&&(n[e]=i)},THREE.MorphAnimMesh.prototype.clone=function(t){return void 0===t&&(t=new THREE.MorphAnimMesh(this.geometry,this.material)),t.duration=this.duration,t.mirroredLoop=this.mirroredLoop,t.time=this.time,t.lastKeyframe=this.lastKeyframe,t.currentKeyframe=this.currentKeyframe,t.direction=this.direction,t.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,t),t},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.addLevel=function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=0;i<this.objects.length&&!(e<this.objects[i].distance);i++);this.objects.splice(i,0,{distance:e,object:t}),this.add(t)},THREE.LOD.prototype.getObjectForDistance=function(t){for(var e=1,i=this.objects.length;i>e&&!(t<this.objects[e].distance);e++);return this.objects[e-1].object},THREE.LOD.prototype.raycast=function(){var t=new THREE.Vector3;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(t);this.getObjectForDistance(n).raycast(e,i)}}(),THREE.LOD.prototype.update=function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i){if(this.objects.length>1){t.setFromMatrixPosition(i.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var n=t.distanceTo(e);this.objects[0].object.visible=!0;for(var r=1,o=this.objects.length;o>r&&n>=this.objects[r].distance;r++)this.objects[r-1].object.visible=!1,this.objects[r].object.visible=!0;for(;o>r;r++)this.objects[r].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(t){void 0===t&&(t=new THREE.LOD),THREE.Object3D.prototype.clone.call(this,t);for(var e=0,i=this.objects.length;i>e;e++){var n=this.objects[e].object.clone();n.visible=0===e,t.addLevel(n,this.objects[e].distance)}return t},THREE.Sprite=function(){var t=new Uint16Array([0,1,2,0,2,3]),e=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),i=new Float32Array([0,0,1,0,1,1,0,1]),n=new THREE.BufferGeometry;return n.addAttribute("index",new THREE.BufferAttribute(t,1)),n.addAttribute("position",new THREE.BufferAttribute(e,3)),n.addAttribute("uv",new THREE.BufferAttribute(i,2)),function(t){THREE.Object3D.call(this),this.type="Sprite",this.geometry=n,this.material=void 0!==t?t:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.raycast=function(){var t=new THREE.Vector3;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceToPoint(t);n>this.scale.x||i.push({distance:n,point:this.position,face:null,object:this})}}(),THREE.Sprite.prototype.clone=function(t){return void 0===t&&(t=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,t),t},THREE.Particle=THREE.Sprite,THREE.LensFlare=function(t,e,i,n,r){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,i,n,r)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.add=function(t,e,i,n,r,o){void 0===e&&(e=-1),void 0===i&&(i=0),void 0===o&&(o=1),void 0===r&&(r=new THREE.Color(16777215)),void 0===n&&(n=THREE.NormalBlending),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:t,size:e,distance:i,x:0,y:0,z:0,scale:1,rotation:1,opacity:o,color:r,blending:n})},THREE.LensFlare.prototype.updateLensFlares=function(){var t,e,i=this.lensFlares.length,n=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(t=0;i>t;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+n*e.distance,e.y=this.positionScreen.y+r*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)},THREE.Scene=function(){THREE.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.clone=function(t){return void 0===t&&(t=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,t),null!==this.fog&&(t.fog=this.fog.clone()),null!==this.overrideMaterial&&(t.overrideMaterial=this.overrideMaterial.clone()),t.autoUpdate=this.autoUpdate,t.matrixAutoUpdate=this.matrixAutoUpdate,t},THREE.Fog=function(t,e,i){this.name="",this.color=new THREE.Color(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(t,e){this.name="",this.color=new THREE.Color(t),this.density=void 0!==e?e:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.ShaderChunk={},THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n",THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n	vec3 dirVector = normalize( lDirection.xyz );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float lDistance = 1.0;\n			if ( spotLightDistance[ i ] > 0.0 )\n				lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif",THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",THREE.ShaderChunk.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n	mvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n	mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n	mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n	normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	vec3 pointDiffuse = vec3( 0.0 );\n	vec3 pointSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n				// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		pointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	vec3 spotDiffuse = vec3( 0.0 );\n	vec3 spotSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( spotLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n					// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n					// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	vec3 dirDiffuse = vec3( 0.0 );\n	vec3 dirSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n		vec3 dirVector = normalize( lDirection.xyz );\n\n				// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		dirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	vec3 hemiDiffuse = vec3( 0.0 );\n	vec3 hemiSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		hemiDiffuse += diffuse * hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n	totalDiffuse += dirDiffuse;\n	totalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	totalDiffuse += hemiDiffuse;\n	totalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	totalDiffuse += pointDiffuse;\n	totalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	totalDiffuse += spotDiffuse;\n	totalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	uniform samplerCube envMap;\n	uniform float flipEnvMap;\n	uniform int combine;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform bool useRefract;\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif",THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n			// Per-Pixel Tangent Space Normal Mapping\n			// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	#ifdef GAMMA_INPUT\n\n		texelColor.xyz *= texelColor.xyz;\n\n	#endif\n\n	gl_FragColor = gl_FragColor * texelColor;\n\n#endif",THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif",THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	#ifdef GAMMA_INPUT\n\n		vColor = color * color;\n\n	#else\n\n		vColor = color;\n\n	#endif\n\n#endif",THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n	uniform bool useRefract;\n\n#endif\n",THREE.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n	gl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif",THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	vec3 reflectVec;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n		// Transforming Normal Vectors with the Inverse Transformation\n\n		vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n		if ( useRefract ) {\n\n			reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		} else { \n\n			reflectVec = reflect( cameraToVertex, worldNormal );\n\n		}\n\n	#else\n\n		reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n		vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#else\n\n		vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#endif\n\n	#ifdef GAMMA_INPUT\n\n		cubeColor.xyz *= cubeColor.xyz;\n\n	#endif\n\n	if ( combine == 1 ) {\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n	} else if ( combine == 2 ) {\n\n		gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n	} else {\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n	}\n\n#endif",THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		const float LOG2 = 1.442695;\n		float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n		fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif",THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n			// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n			//	http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n			// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif",THREE.ShaderChunk.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n	objectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n	objectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n	objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;",THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif",THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif",THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n	worldNormal = normalize( worldNormal );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	if ( useRefract ) {\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	} else {\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	}\n\n#endif",THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	#ifdef GAMMA_OUTPUT\n\n		shadowColor *= shadowColor;\n\n	#endif\n\n	gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n",THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#endif\n\n	#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#endif\n\n	#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif",THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	gl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",THREE.UniformsUtils={merge:function(t){for(var e={},i=0;i<t.length;i++){var n=this.clone(t[i]);for(var r in n)e[r]=n[r]}return e},clone:function(t){var e={};for(var i in t){e[i]={};for(var n in t[i]){var r=t[i][n];r instanceof THREE.Color||r instanceof THREE.Vector2||r instanceof THREE.Vector3||r instanceof THREE.Vector4||r instanceof THREE.Matrix4||r instanceof THREE.Texture?e[i][n]=r.clone():r instanceof Array?e[i][n]=r.slice():e[i][n]=r}}return e}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED","		if ( gl_FrontFacing )","			gl_FragColor.xyz *= vLightFront;","		else","			gl_FragColor.xyz *= vLightBack;","	#else","		gl_FragColor.xyz *= vLightFront;","	#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","	#else","		gl_PointSize = size;","	#endif","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;","	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	if ( mod( vLineDistance, totalSize ) > dashSize ) {","		discard;","	}","	gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	float color = 1.0 - smoothstep( mNear, mFar, depth );","	gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new THREE.Color(16777215)},specular:{type:"c",value:new THREE.Color(1118481)},ambient:{type:"c",value:new THREE.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;","uniform samplerCube tCube;","uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float refractionRatio;","uniform float reflectivity;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","	uniform vec3 wrapRGB;","#endif","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	gl_FragColor = vec4( vec3( 1.0 ), opacity );","	vec3 specularTex = vec3( 1.0 );","	vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","	normalTex.xy *= uNormalScale;","	normalTex = normalize( normalTex );","	if( enableDiffuse ) {","		#ifdef GAMMA_INPUT","			vec4 texelColor = texture2D( tDiffuse, vUv );","			texelColor.xyz *= texelColor.xyz;","			gl_FragColor = gl_FragColor * texelColor;","		#else","			gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );","		#endif","	}","	if( enableAO ) {","		#ifdef GAMMA_INPUT","			vec4 aoColor = texture2D( tAO, vUv );","			aoColor.xyz *= aoColor.xyz;","			gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;","		#else","			gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;","		#endif","	}",THREE.ShaderChunk.alphatest_fragment,"	if( enableSpecular )","		specularTex = texture2D( tSpecular, vUv ).xyz;","	mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","	vec3 finalNormal = tsb * normalTex;","	#ifdef FLIP_SIDED","		finalNormal = -finalNormal;","	#endif","	vec3 normal = normalize( finalNormal );","	vec3 viewPosition = normalize( vViewPosition );","	#if MAX_POINT_LIGHTS > 0","		vec3 pointDiffuse = vec3( 0.0 );","		vec3 pointSpecular = vec3( 0.0 );","		for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","			vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","			vec3 pointVector = lPosition.xyz + vViewPosition.xyz;","			float pointDistance = 1.0;","			if ( pointLightDistance[ i ] > 0.0 )","				pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","			pointVector = normalize( pointVector );","			#ifdef WRAP_AROUND","				float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","				float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","				vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","			#else","				float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","			#endif","			pointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;","			vec3 pointHalfVector = normalize( pointVector + viewPosition );","			float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","			float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );","			pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;","		}","	#endif","	#if MAX_SPOT_LIGHTS > 0","		vec3 spotDiffuse = vec3( 0.0 );","		vec3 spotSpecular = vec3( 0.0 );","		for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","			vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","			vec3 spotVector = lPosition.xyz + vViewPosition.xyz;","			float spotDistance = 1.0;","			if ( spotLightDistance[ i ] > 0.0 )","				spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","			spotVector = normalize( spotVector );","			float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","			if ( spotEffect > spotLightAngleCos[ i ] ) {","				spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );","				#ifdef WRAP_AROUND","					float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","					float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","					vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","				#else","					float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );","				#endif","				spotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;","				vec3 spotHalfVector = normalize( spotVector + viewPosition );","				float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","				float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );","				float specularNormalization = ( shininess + 2.0 ) / 8.0;","				vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );","				spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;","			}","		}","	#endif","	#if MAX_DIR_LIGHTS > 0","		vec3 dirDiffuse = vec3( 0.0 );","		vec3 dirSpecular = vec3( 0.0 );","		for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","			vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","			vec3 dirVector = normalize( lDirection.xyz );","			#ifdef WRAP_AROUND","				float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","				float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","				vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );","			#else","				float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","			#endif","			dirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;","			vec3 dirHalfVector = normalize( dirVector + viewPosition );","			float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","			float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );","			dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","		}","	#endif","	#if MAX_HEMI_LIGHTS > 0","		vec3 hemiDiffuse = vec3( 0.0 );","		vec3 hemiSpecular = vec3( 0.0 );","		for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","			vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","			vec3 lVector = normalize( lDirection.xyz );","			float dotProduct = dot( normal, lVector );","			float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","			vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","			hemiDiffuse += diffuse * hemiColor;","			vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","			float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","			float hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );","			vec3 lVectorGround = -lVector;","			vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","			float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","			float hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );","			float dotProductGround = dot( normal, lVectorGround );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );","			vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );","			hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","		}","	#endif","	vec3 totalDiffuse = vec3( 0.0 );","	vec3 totalSpecular = vec3( 0.0 );","	#if MAX_DIR_LIGHTS > 0","		totalDiffuse += dirDiffuse;","		totalSpecular += dirSpecular;","	#endif","	#if MAX_HEMI_LIGHTS > 0","		totalDiffuse += hemiDiffuse;","		totalSpecular += hemiSpecular;","	#endif","	#if MAX_POINT_LIGHTS > 0","		totalDiffuse += pointDiffuse;","		totalSpecular += pointSpecular;","	#endif","	#if MAX_SPOT_LIGHTS > 0","		totalDiffuse += spotDiffuse;","		totalSpecular += spotSpecular;","	#endif","	#ifdef METAL","		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );","	#else","		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","	#endif","	if ( enableReflection ) {","		vec3 vReflect;","		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","		if ( useRefract ) {","			vReflect = refract( cameraToVertex, normal, refractionRatio );","		} else {","			vReflect = reflect( cameraToVertex, normal );","		}","		vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","		#ifdef GAMMA_INPUT","			cubeColor.xyz *= cubeColor.xyz;","		#endif","		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );","	}",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),
vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","	uniform sampler2D tDisplacement;","	uniform float uDisplacementScale;","	uniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"	#ifdef USE_SKINNING","		vNormal = normalize( normalMatrix * skinnedNormal.xyz );","		vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","		vTangent = normalize( normalMatrix * skinnedTangent.xyz );","	#else","		vNormal = normalize( normalMatrix * normal );","		vTangent = normalize( normalMatrix * tangent.xyz );","	#endif","	vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );","	vUv = uv * uRepeat + uOffset;","	vec3 displacedPosition;","	#ifdef VERTEX_TEXTURES","		if ( enableDisplacement ) {","			vec3 dv = texture2D( tDisplacement, uv ).xyz;","			float df = uDisplacementScale * dv.x + uDisplacementBias;","			displacedPosition = position + normalize( normal ) * df;","		} else {","			#ifdef USE_SKINNING","				vec4 skinVertex = bindMatrix * vec4( position, 1.0 );","				vec4 skinned = vec4( 0.0 );","				skinned += boneMatX * skinVertex * skinWeight.x;","				skinned += boneMatY * skinVertex * skinWeight.y;","				skinned += boneMatZ * skinVertex * skinWeight.z;","				skinned += boneMatW * skinVertex * skinWeight.w;","				skinned  = bindMatrixInverse * skinned;","				displacedPosition = skinned.xyz;","			#else","				displacedPosition = position;","			#endif","		}","	#else","		#ifdef USE_SKINNING","			vec4 skinVertex = bindMatrix * vec4( position, 1.0 );","			vec4 skinned = vec4( 0.0 );","			skinned += boneMatX * skinVertex * skinWeight.x;","			skinned += boneMatY * skinVertex * skinWeight.y;","			skinned += boneMatZ * skinVertex * skinWeight.z;","			skinned += boneMatW * skinVertex * skinWeight.w;","			skinned  = bindMatrixInverse * skinned;","			displacedPosition = skinned.xyz;","		#else","			displacedPosition = position;","		#endif","	#endif","	vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","	vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"	vWorldPosition = worldPosition.xyz;","	vViewPosition = -mvPosition.xyz;","	#ifdef USE_SHADOWMAP","		for( int i = 0; i < MAX_SHADOWS; i ++ ) {","			vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","		}","	#endif","}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bit_mask;","	return res;","}","void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","	#else","		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","	#endif","}"].join("\n")}},THREE.WebGLRenderer=function(t){function e(){It.clearColor(0,0,0,1),It.clearDepth(1),It.clearStencil(0),It.enable(It.DEPTH_TEST),It.depthFunc(It.LEQUAL),It.frontFace(It.CCW),It.cullFace(It.BACK),It.enable(It.CULL_FACE),It.enable(It.BLEND),It.blendEquation(It.FUNC_ADD),It.blendFunc(It.SRC_ALPHA,It.ONE_MINUS_SRC_ALPHA),It.viewport(ne,re,oe,se),It.clearColor(Rt.r,Rt.g,Rt.b,Ct)}function i(t){t.__webglVertexBuffer=It.createBuffer(),t.__webglColorBuffer=It.createBuffer(),Bt.info.memory.geometries++}function n(t){t.__webglVertexBuffer=It.createBuffer(),t.__webglColorBuffer=It.createBuffer(),t.__webglLineDistanceBuffer=It.createBuffer(),Bt.info.memory.geometries++}function r(t){t.__webglVertexBuffer=It.createBuffer(),t.__webglNormalBuffer=It.createBuffer(),t.__webglTangentBuffer=It.createBuffer(),t.__webglColorBuffer=It.createBuffer(),t.__webglUVBuffer=It.createBuffer(),t.__webglUV2Buffer=It.createBuffer(),t.__webglSkinIndicesBuffer=It.createBuffer(),t.__webglSkinWeightsBuffer=It.createBuffer(),t.__webglFaceBuffer=It.createBuffer(),t.__webglLineBuffer=It.createBuffer();var e,i;if(t.numMorphTargets)for(t.__webglMorphTargetsBuffers=[],e=0,i=t.numMorphTargets;i>e;e++)t.__webglMorphTargetsBuffers.push(It.createBuffer());if(t.numMorphNormals)for(t.__webglMorphNormalsBuffers=[],e=0,i=t.numMorphNormals;i>e;e++)t.__webglMorphNormalsBuffers.push(It.createBuffer());Bt.info.memory.geometries++}function o(t){var e=t.geometry,i=t.material,n=e.vertices.length;if(i.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var r in i.attributes){var o=i.attributes[r];if(!o.__webglInitialized||o.createUniqueBuffers){o.__webglInitialized=!0;var s=1;"v2"===o.type?s=2:"v3"===o.type?s=3:"v4"===o.type?s=4:"c"===o.type&&(s=3),o.size=s,o.array=new Float32Array(n*s),o.buffer=It.createBuffer(),o.buffer.belongsToAttribute=r,o.needsUpdate=!0}e.__webglCustomAttributesList.push(o)}}}function s(t,e){var i=t.vertices.length;t.__vertexArray=new Float32Array(3*i),t.__colorArray=new Float32Array(3*i),t.__sortArray=[],t.__webglParticleCount=i,o(e)}function a(t,e){var i=t.vertices.length;t.__vertexArray=new Float32Array(3*i),t.__colorArray=new Float32Array(3*i),t.__lineDistanceArray=new Float32Array(1*i),t.__webglLineCount=i,o(e)}function h(t,e){var i=e.geometry,n=t.faces3,r=3*n.length,o=1*n.length,s=3*n.length,a=l(e,t);t.__vertexArray=new Float32Array(3*r),t.__normalArray=new Float32Array(3*r),t.__colorArray=new Float32Array(3*r),t.__uvArray=new Float32Array(2*r),i.faceVertexUvs.length>1&&(t.__uv2Array=new Float32Array(2*r)),i.hasTangents&&(t.__tangentArray=new Float32Array(4*r)),e.geometry.skinWeights.length&&e.geometry.skinIndices.length&&(t.__skinIndexArray=new Float32Array(4*r),t.__skinWeightArray=new Float32Array(4*r));var h=null!==be.get("OES_element_index_uint")&&o>21845?Uint32Array:Uint16Array;t.__typeArray=h,t.__faceArray=new h(3*o),t.__lineArray=new h(2*s);var c,d;if(t.numMorphTargets)for(t.__morphTargetsArrays=[],c=0,d=t.numMorphTargets;d>c;c++)t.__morphTargetsArrays.push(new Float32Array(3*r));if(t.numMorphNormals)for(t.__morphNormalsArrays=[],c=0,d=t.numMorphNormals;d>c;c++)t.__morphNormalsArrays.push(new Float32Array(3*r));if(t.__webglFaceCount=3*o,t.__webglLineCount=2*s,a.attributes){void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[]);for(var u in a.attributes){var f=a.attributes[u],p={};for(var m in f)p[m]=f[m];if(!p.__webglInitialized||p.createUniqueBuffers){p.__webglInitialized=!0;var g=1;"v2"===p.type?g=2:"v3"===p.type?g=3:"v4"===p.type?g=4:"c"===p.type&&(g=3),p.size=g,p.array=new Float32Array(r*g),p.buffer=It.createBuffer(),p.buffer.belongsToAttribute=u,f.needsUpdate=!0,p.__original=f}t.__webglCustomAttributesList.push(p)}}t.__inittedArrays=!0}function l(t,e){return t.material instanceof THREE.MeshFaceMaterial?t.material.materials[e.materialIndex]:t.material}function c(t){return t&&void 0!==t.shading&&t.shading===THREE.SmoothShading}function d(t,e,i){var n,r,o,s,a,h,l,c,d,u,f,p,m=t.vertices,g=m.length,v=t.colors,A=v.length,y=t.__vertexArray,b=t.__colorArray,E=t.__sortArray,x=t.verticesNeedUpdate,_=(t.elementsNeedUpdate,t.colorsNeedUpdate),T=t.__webglCustomAttributesList;if(i.sortParticles){for(fe.copy(ue),fe.multiply(i.matrixWorld),n=0;g>n;n++)o=m[n],pe.copy(o),pe.applyProjection(fe),E[n]=[pe.z,n];for(E.sort(w),n=0;g>n;n++)o=m[E[n][1]],s=3*n,y[s]=o.x,y[s+1]=o.y,y[s+2]=o.z;for(r=0;A>r;r++)s=3*r,h=v[E[r][1]],b[s]=h.r,b[s+1]=h.g,b[s+2]=h.b;if(T)for(l=0,c=T.length;c>l;l++)if(p=T[l],void 0===p.boundTo||"vertices"===p.boundTo)if(s=0,u=p.value.length,1===p.size)for(d=0;u>d;d++)a=E[d][1],p.array[d]=p.value[a];else if(2===p.size)for(d=0;u>d;d++)a=E[d][1],f=p.value[a],p.array[s]=f.x,p.array[s+1]=f.y,s+=2;else if(3===p.size)if("c"===p.type)for(d=0;u>d;d++)a=E[d][1],f=p.value[a],p.array[s]=f.r,p.array[s+1]=f.g,p.array[s+2]=f.b,s+=3;else for(d=0;u>d;d++)a=E[d][1],f=p.value[a],p.array[s]=f.x,p.array[s+1]=f.y,p.array[s+2]=f.z,s+=3;else if(4===p.size)for(d=0;u>d;d++)a=E[d][1],f=p.value[a],p.array[s]=f.x,p.array[s+1]=f.y,p.array[s+2]=f.z,p.array[s+3]=f.w,s+=4}else{if(x)for(n=0;g>n;n++)o=m[n],s=3*n,y[s]=o.x,y[s+1]=o.y,y[s+2]=o.z;if(_)for(r=0;A>r;r++)h=v[r],s=3*r,b[s]=h.r,b[s+1]=h.g,b[s+2]=h.b;if(T)for(l=0,c=T.length;c>l;l++)if(p=T[l],p.needsUpdate&&(void 0===p.boundTo||"vertices"===p.boundTo))if(u=p.value.length,s=0,1===p.size)for(d=0;u>d;d++)p.array[d]=p.value[d];else if(2===p.size)for(d=0;u>d;d++)f=p.value[d],p.array[s]=f.x,p.array[s+1]=f.y,s+=2;else if(3===p.size)if("c"===p.type)for(d=0;u>d;d++)f=p.value[d],p.array[s]=f.r,p.array[s+1]=f.g,p.array[s+2]=f.b,s+=3;else for(d=0;u>d;d++)f=p.value[d],p.array[s]=f.x,p.array[s+1]=f.y,p.array[s+2]=f.z,s+=3;else if(4===p.size)for(d=0;u>d;d++)f=p.value[d],p.array[s]=f.x,p.array[s+1]=f.y,p.array[s+2]=f.z,p.array[s+3]=f.w,s+=4}if((x||i.sortParticles)&&(It.bindBuffer(It.ARRAY_BUFFER,t.__webglVertexBuffer),It.bufferData(It.ARRAY_BUFFER,y,e)),(_||i.sortParticles)&&(It.bindBuffer(It.ARRAY_BUFFER,t.__webglColorBuffer),It.bufferData(It.ARRAY_BUFFER,b,e)),T)for(l=0,c=T.length;c>l;l++)p=T[l],(p.needsUpdate||i.sortParticles)&&(It.bindBuffer(It.ARRAY_BUFFER,p.buffer),It.bufferData(It.ARRAY_BUFFER,p.array,e))}function u(t,e){var i,n,r,o,s,a,h,l,c,d,u,f,p=t.vertices,m=t.colors,g=t.lineDistances,v=p.length,A=m.length,y=g.length,b=t.__vertexArray,E=t.__colorArray,w=t.__lineDistanceArray,x=t.verticesNeedUpdate,_=t.colorsNeedUpdate,T=t.lineDistancesNeedUpdate,S=t.__webglCustomAttributesList;if(x){for(i=0;v>i;i++)o=p[i],s=3*i,b[s]=o.x,b[s+1]=o.y,b[s+2]=o.z;It.bindBuffer(It.ARRAY_BUFFER,t.__webglVertexBuffer),It.bufferData(It.ARRAY_BUFFER,b,e)}if(_){for(n=0;A>n;n++)a=m[n],s=3*n,E[s]=a.r,E[s+1]=a.g,E[s+2]=a.b;It.bindBuffer(It.ARRAY_BUFFER,t.__webglColorBuffer),It.bufferData(It.ARRAY_BUFFER,E,e)}if(T){for(r=0;y>r;r++)w[r]=g[r];It.bindBuffer(It.ARRAY_BUFFER,t.__webglLineDistanceBuffer),It.bufferData(It.ARRAY_BUFFER,w,e)}if(S)for(h=0,l=S.length;l>h;h++)if(f=S[h],f.needsUpdate&&(void 0===f.boundTo||"vertices"===f.boundTo)){if(s=0,d=f.value.length,1===f.size)for(c=0;d>c;c++)f.array[c]=f.value[c];else if(2===f.size)for(c=0;d>c;c++)u=f.value[c],f.array[s]=u.x,f.array[s+1]=u.y,s+=2;else if(3===f.size)if("c"===f.type)for(c=0;d>c;c++)u=f.value[c],f.array[s]=u.r,f.array[s+1]=u.g,f.array[s+2]=u.b,s+=3;else for(c=0;d>c;c++)u=f.value[c],f.array[s]=u.x,f.array[s+1]=u.y,f.array[s+2]=u.z,s+=3;else if(4===f.size)for(c=0;d>c;c++)u=f.value[c],f.array[s]=u.x,f.array[s+1]=u.y,f.array[s+2]=u.z,f.array[s+3]=u.w,s+=4;It.bindBuffer(It.ARRAY_BUFFER,f.buffer),It.bufferData(It.ARRAY_BUFFER,f.array,e)}}function f(t,e,i,n,r){if(t.__inittedArrays){var o,s,a,h,l,d,u,f,p,m,g,v,A,y,b,E,w,x,_,T,S,R,C,k,M,H,P,D,O,L,I,B,F,N,z,j,U,V,W,G,Y,q,X=c(r),Q=0,Z=0,K=0,J=0,$=0,tt=0,et=0,it=0,nt=0,rt=0,ot=0,st=0,at=0,ht=t.__vertexArray,lt=t.__uvArray,ct=t.__uv2Array,dt=t.__normalArray,ut=t.__tangentArray,ft=t.__colorArray,pt=t.__skinIndexArray,mt=t.__skinWeightArray,gt=t.__morphTargetsArrays,vt=t.__morphNormalsArrays,At=t.__webglCustomAttributesList,yt=t.__faceArray,bt=t.__lineArray,Et=e.geometry,wt=Et.verticesNeedUpdate,xt=Et.elementsNeedUpdate,_t=Et.uvsNeedUpdate,Tt=Et.normalsNeedUpdate,St=Et.tangentsNeedUpdate,Rt=Et.colorsNeedUpdate,Ct=Et.morphTargetsNeedUpdate,kt=Et.vertices,Mt=t.faces3,Ht=Et.faces,Pt=Et.faceVertexUvs[0],Dt=Et.faceVertexUvs[1],Ot=(Et.colors,Et.skinIndices),Lt=Et.skinWeights,Bt=Et.morphTargets,Ft=Et.morphNormals;if(wt){for(o=0,s=Mt.length;s>o;o++)h=Ht[Mt[o]],v=kt[h.a],A=kt[h.b],y=kt[h.c],ht[Z]=v.x,ht[Z+1]=v.y,ht[Z+2]=v.z,ht[Z+3]=A.x,ht[Z+4]=A.y,ht[Z+5]=A.z,ht[Z+6]=y.x,ht[Z+7]=y.y,ht[Z+8]=y.z,Z+=9;It.bindBuffer(It.ARRAY_BUFFER,t.__webglVertexBuffer),It.bufferData(It.ARRAY_BUFFER,ht,i)}if(Ct)for(z=0,j=Bt.length;j>z;z++){for(ot=0,o=0,s=Mt.length;s>o;o++)W=Mt[o],h=Ht[W],v=Bt[z].vertices[h.a],A=Bt[z].vertices[h.b],y=Bt[z].vertices[h.c],U=gt[z],U[ot]=v.x,U[ot+1]=v.y,U[ot+2]=v.z,U[ot+3]=A.x,U[ot+4]=A.y,U[ot+5]=A.z,U[ot+6]=y.x,U[ot+7]=y.y,U[ot+8]=y.z,r.morphNormals&&(X?(G=Ft[z].vertexNormals[W],x=G.a,_=G.b,T=G.c):(x=Ft[z].faceNormals[W],_=x,T=x),V=vt[z],V[ot]=x.x,V[ot+1]=x.y,V[ot+2]=x.z,V[ot+3]=_.x,V[ot+4]=_.y,V[ot+5]=_.z,V[ot+6]=T.x,V[ot+7]=T.y,V[ot+8]=T.z),ot+=9;It.bindBuffer(It.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[z]),It.bufferData(It.ARRAY_BUFFER,gt[z],i),r.morphNormals&&(It.bindBuffer(It.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[z]),It.bufferData(It.ARRAY_BUFFER,vt[z],i))}if(Lt.length){for(o=0,s=Mt.length;s>o;o++)h=Ht[Mt[o]],k=Lt[h.a],M=Lt[h.b],H=Lt[h.c],mt[rt]=k.x,mt[rt+1]=k.y,mt[rt+2]=k.z,mt[rt+3]=k.w,mt[rt+4]=M.x,mt[rt+5]=M.y,mt[rt+6]=M.z,mt[rt+7]=M.w,mt[rt+8]=H.x,mt[rt+9]=H.y,mt[rt+10]=H.z,mt[rt+11]=H.w,P=Ot[h.a],D=Ot[h.b],O=Ot[h.c],pt[rt]=P.x,pt[rt+1]=P.y,pt[rt+2]=P.z,pt[rt+3]=P.w,pt[rt+4]=D.x,pt[rt+5]=D.y,pt[rt+6]=D.z,pt[rt+7]=D.w,pt[rt+8]=O.x,pt[rt+9]=O.y,pt[rt+10]=O.z,pt[rt+11]=O.w,rt+=12;rt>0&&(It.bindBuffer(It.ARRAY_BUFFER,t.__webglSkinIndicesBuffer),It.bufferData(It.ARRAY_BUFFER,pt,i),It.bindBuffer(It.ARRAY_BUFFER,t.__webglSkinWeightsBuffer),It.bufferData(It.ARRAY_BUFFER,mt,i))}if(Rt){for(o=0,s=Mt.length;s>o;o++)h=Ht[Mt[o]],u=h.vertexColors,f=h.color,3===u.length&&r.vertexColors===THREE.VertexColors?(S=u[0],R=u[1],C=u[2]):(S=f,R=f,C=f),ft[nt]=S.r,ft[nt+1]=S.g,ft[nt+2]=S.b,ft[nt+3]=R.r,ft[nt+4]=R.g,ft[nt+5]=R.b,ft[nt+6]=C.r,ft[nt+7]=C.g,ft[nt+8]=C.b,nt+=9;nt>0&&(It.bindBuffer(It.ARRAY_BUFFER,t.__webglColorBuffer),It.bufferData(It.ARRAY_BUFFER,ft,i))}if(St&&Et.hasTangents){for(o=0,s=Mt.length;s>o;o++)h=Ht[Mt[o]],p=h.vertexTangents,b=p[0],E=p[1],w=p[2],ut[et]=b.x,ut[et+1]=b.y,ut[et+2]=b.z,ut[et+3]=b.w,ut[et+4]=E.x,ut[et+5]=E.y,ut[et+6]=E.z,ut[et+7]=E.w,ut[et+8]=w.x,ut[et+9]=w.y,ut[et+10]=w.z,ut[et+11]=w.w,et+=12;It.bindBuffer(It.ARRAY_BUFFER,t.__webglTangentBuffer),It.bufferData(It.ARRAY_BUFFER,ut,i)}if(Tt){for(o=0,s=Mt.length;s>o;o++)if(h=Ht[Mt[o]],l=h.vertexNormals,d=h.normal,3===l.length&&X)for(L=0;3>L;L++)B=l[L],dt[tt]=B.x,dt[tt+1]=B.y,dt[tt+2]=B.z,tt+=3;else for(L=0;3>L;L++)dt[tt]=d.x,dt[tt+1]=d.y,dt[tt+2]=d.z,tt+=3;It.bindBuffer(It.ARRAY_BUFFER,t.__webglNormalBuffer),It.bufferData(It.ARRAY_BUFFER,dt,i)}if(_t&&Pt){for(o=0,s=Mt.length;s>o;o++)if(a=Mt[o],m=Pt[a],void 0!==m)for(L=0;3>L;L++)F=m[L],lt[K]=F.x,lt[K+1]=F.y,K+=2;K>0&&(It.bindBuffer(It.ARRAY_BUFFER,t.__webglUVBuffer),It.bufferData(It.ARRAY_BUFFER,lt,i))}if(_t&&Dt){for(o=0,s=Mt.length;s>o;o++)if(a=Mt[o],g=Dt[a],void 0!==g)for(L=0;3>L;L++)N=g[L],ct[J]=N.x,ct[J+1]=N.y,J+=2;J>0&&(It.bindBuffer(It.ARRAY_BUFFER,t.__webglUV2Buffer),It.bufferData(It.ARRAY_BUFFER,ct,i))}if(xt){for(o=0,s=Mt.length;s>o;o++)yt[$]=Q,yt[$+1]=Q+1,yt[$+2]=Q+2,$+=3,bt[it]=Q,bt[it+1]=Q+1,bt[it+2]=Q,bt[it+3]=Q+2,bt[it+4]=Q+1,bt[it+5]=Q+2,it+=6,Q+=3;It.bindBuffer(It.ELEMENT_ARRAY_BUFFER,t.__webglFaceBuffer),It.bufferData(It.ELEMENT_ARRAY_BUFFER,yt,i),It.bindBuffer(It.ELEMENT_ARRAY_BUFFER,t.__webglLineBuffer),It.bufferData(It.ELEMENT_ARRAY_BUFFER,bt,i)}if(At)for(L=0,I=At.length;I>L;L++)if(q=At[L],q.__original.needsUpdate){if(st=0,at=0,1===q.size){if(void 0===q.boundTo||"vertices"===q.boundTo)for(o=0,s=Mt.length;s>o;o++)h=Ht[Mt[o]],q.array[st]=q.value[h.a],q.array[st+1]=q.value[h.b],q.array[st+2]=q.value[h.c],st+=3;else if("faces"===q.boundTo)for(o=0,s=Mt.length;s>o;o++)Y=q.value[Mt[o]],q.array[st]=Y,q.array[st+1]=Y,q.array[st+2]=Y,st+=3}else if(2===q.size){if(void 0===q.boundTo||"vertices"===q.boundTo)for(o=0,s=Mt.length;s>o;o++)h=Ht[Mt[o]],v=q.value[h.a],A=q.value[h.b],y=q.value[h.c],q.array[st]=v.x,q.array[st+1]=v.y,q.array[st+2]=A.x,q.array[st+3]=A.y,q.array[st+4]=y.x,q.array[st+5]=y.y,st+=6;else if("faces"===q.boundTo)for(o=0,s=Mt.length;s>o;o++)Y=q.value[Mt[o]],v=Y,A=Y,y=Y,q.array[st]=v.x,q.array[st+1]=v.y,q.array[st+2]=A.x,q.array[st+3]=A.y,q.array[st+4]=y.x,q.array[st+5]=y.y,st+=6}else if(3===q.size){var Nt;if(Nt="c"===q.type?["r","g","b"]:["x","y","z"],void 0===q.boundTo||"vertices"===q.boundTo)for(o=0,s=Mt.length;s>o;o++)h=Ht[Mt[o]],v=q.value[h.a],A=q.value[h.b],y=q.value[h.c],q.array[st]=v[Nt[0]],q.array[st+1]=v[Nt[1]],q.array[st+2]=v[Nt[2]],q.array[st+3]=A[Nt[0]],q.array[st+4]=A[Nt[1]],q.array[st+5]=A[Nt[2]],q.array[st+6]=y[Nt[0]],q.array[st+7]=y[Nt[1]],q.array[st+8]=y[Nt[2]],st+=9;else if("faces"===q.boundTo)for(o=0,s=Mt.length;s>o;o++)Y=q.value[Mt[o]],v=Y,A=Y,y=Y,q.array[st]=v[Nt[0]],q.array[st+1]=v[Nt[1]],q.array[st+2]=v[Nt[2]],q.array[st+3]=A[Nt[0]],q.array[st+4]=A[Nt[1]],q.array[st+5]=A[Nt[2]],q.array[st+6]=y[Nt[0]],q.array[st+7]=y[Nt[1]],q.array[st+8]=y[Nt[2]],st+=9;else if("faceVertices"===q.boundTo)for(o=0,s=Mt.length;s>o;o++)Y=q.value[Mt[o]],v=Y[0],A=Y[1],y=Y[2],q.array[st]=v[Nt[0]],q.array[st+1]=v[Nt[1]],q.array[st+2]=v[Nt[2]],q.array[st+3]=A[Nt[0]],q.array[st+4]=A[Nt[1]],q.array[st+5]=A[Nt[2]],q.array[st+6]=y[Nt[0]],q.array[st+7]=y[Nt[1]],q.array[st+8]=y[Nt[2]],st+=9}else if(4===q.size)if(void 0===q.boundTo||"vertices"===q.boundTo)for(o=0,s=Mt.length;s>o;o++)h=Ht[Mt[o]],v=q.value[h.a],A=q.value[h.b],y=q.value[h.c],q.array[st]=v.x,q.array[st+1]=v.y,q.array[st+2]=v.z,q.array[st+3]=v.w,q.array[st+4]=A.x,q.array[st+5]=A.y,q.array[st+6]=A.z,q.array[st+7]=A.w,q.array[st+8]=y.x,q.array[st+9]=y.y,q.array[st+10]=y.z,q.array[st+11]=y.w,st+=12;else if("faces"===q.boundTo)for(o=0,s=Mt.length;s>o;o++)Y=q.value[Mt[o]],v=Y,A=Y,y=Y,q.array[st]=v.x,q.array[st+1]=v.y,q.array[st+2]=v.z,q.array[st+3]=v.w,q.array[st+4]=A.x,q.array[st+5]=A.y,q.array[st+6]=A.z,q.array[st+7]=A.w,q.array[st+8]=y.x,q.array[st+9]=y.y,q.array[st+10]=y.z,q.array[st+11]=y.w,st+=12;else if("faceVertices"===q.boundTo)for(o=0,s=Mt.length;s>o;o++)Y=q.value[Mt[o]],v=Y[0],A=Y[1],y=Y[2],q.array[st]=v.x,q.array[st+1]=v.y,q.array[st+2]=v.z,q.array[st+3]=v.w,q.array[st+4]=A.x,q.array[st+5]=A.y,q.array[st+6]=A.z,q.array[st+7]=A.w,q.array[st+8]=y.x,q.array[st+9]=y.y,q.array[st+10]=y.z,q.array[st+11]=y.w,st+=12;It.bindBuffer(It.ARRAY_BUFFER,q.buffer),It.bufferData(It.ARRAY_BUFFER,q.array,i)}n&&(delete t.__inittedArrays,delete t.__colorArray,delete t.__normalArray,delete t.__tangentArray,delete t.__uvArray,delete t.__uv2Array,delete t.__faceArray,delete t.__vertexArray,delete t.__lineArray,delete t.__skinIndexArray,delete t.__skinWeightArray)}}function p(t){for(var e=t.attributes,i=t.attributesKeys,n=0,r=i.length;r>n;n++){var o=i[n],s=e[o];if(void 0===s.buffer&&(s.buffer=It.createBuffer(),s.needsUpdate=!0),s.needsUpdate===!0){var a="index"===o?It.ELEMENT_ARRAY_BUFFER:It.ARRAY_BUFFER;It.bindBuffer(a,s.buffer),It.bufferData(a,s.array,It.STATIC_DRAW),s.needsUpdate=!1}}}function m(t,e,i,n){for(var r=i.attributes,o=e.attributes,s=e.attributesKeys,a=0,h=s.length;h>a;a++){var l=s[a],c=o[l];if(c>=0){var d=r[l];if(void 0!==d){var u=d.itemSize;It.bindBuffer(It.ARRAY_BUFFER,d.buffer),v(c),It.vertexAttribPointer(c,u,It.FLOAT,!1,0,n*u*4)}else void 0!==t.defaultAttributeValues&&(2===t.defaultAttributeValues[l].length?It.vertexAttrib2fv(c,t.defaultAttributeValues[l]):3===t.defaultAttributeValues[l].length&&It.vertexAttrib3fv(c,t.defaultAttributeValues[l]))}}A()}function g(){for(var t=0,e=le.length;e>t;t++)le[t]=0}function v(t){le[t]=1,0===ce[t]&&(It.enableVertexAttribArray(t),ce[t]=1)}function A(){for(var t=0,e=ce.length;e>t;t++)ce[t]!==le[t]&&(It.disableVertexAttribArray(t),ce[t]=0)}function y(t,e,i){var n=t.program.attributes;if(-1!==i.morphTargetBase&&n.position>=0?(It.bindBuffer(It.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[i.morphTargetBase]),v(n.position),It.vertexAttribPointer(n.position,3,It.FLOAT,!1,0,0)):n.position>=0&&(It.bindBuffer(It.ARRAY_BUFFER,e.__webglVertexBuffer),v(n.position),It.vertexAttribPointer(n.position,3,It.FLOAT,!1,0,0)),i.morphTargetForcedOrder.length)for(var r=0,o=i.morphTargetForcedOrder,s=i.morphTargetInfluences;r<t.numSupportedMorphTargets&&r<o.length;)n["morphTarget"+r]>=0&&(It.bindBuffer(It.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[o[r]]),v(n["morphTarget"+r]),It.vertexAttribPointer(n["morphTarget"+r],3,It.FLOAT,!1,0,0)),n["morphNormal"+r]>=0&&t.morphNormals&&(It.bindBuffer(It.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[o[r]]),v(n["morphNormal"+r]),It.vertexAttribPointer(n["morphNormal"+r],3,It.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[r]=s[o[r]],r++;else{var a,h,l=[],s=i.morphTargetInfluences,c=s.length;for(h=0;c>h;h++)a=s[h],a>0&&l.push([a,h]);l.length>t.numSupportedMorphTargets?(l.sort(w),l.length=t.numSupportedMorphTargets):l.length>t.numSupportedMorphNormals?l.sort(w):0===l.length&&l.push([0,0]);for(var d,r=0;r<t.numSupportedMorphTargets;)l[r]?(d=l[r][1],n["morphTarget"+r]>=0&&(It.bindBuffer(It.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[d]),v(n["morphTarget"+r]),It.vertexAttribPointer(n["morphTarget"+r],3,It.FLOAT,!1,0,0)),n["morphNormal"+r]>=0&&t.morphNormals&&(It.bindBuffer(It.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[d]),v(n["morphNormal"+r]),It.vertexAttribPointer(n["morphNormal"+r],3,It.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[r]=s[d]):i.__webglMorphTargetInfluences[r]=0,r++}null!==t.program.uniforms.morphTargetInfluences&&It.uniform1fv(t.program.uniforms.morphTargetInfluences,i.__webglMorphTargetInfluences)}function b(t,e){return t.material.id!==e.material.id?e.material.id-t.material.id:t.z!==e.z?e.z-t.z:t.id-e.id}function E(t,e){return t.z!==e.z?t.z-e.z:t.id-e.id}function w(t,e){return e[0]-t[0]}function x(t,e){if(e.visible!==!1){if(e instanceof THREE.Scene||e instanceof THREE.Group);else if(C(e,t),e instanceof THREE.Light)kt.push(e);else if(e instanceof THREE.Sprite)Ot.push(e);else if(e instanceof THREE.LensFlare)Lt.push(e);else{var i=Mt[e.id];if(i&&(e.frustumCulled===!1||de.intersectsObject(e)===!0)){D(e,t);for(var n=0,r=i.length;r>n;n++){var o=i[n];R(o),o.render=!0,Bt.sortObjects===!0&&(null!==e.renderDepth?o.z=e.renderDepth:(pe.setFromMatrixPosition(e.matrixWorld),pe.applyProjection(ue),o.z=pe.z))}}}for(var n=0,r=e.children.length;r>n;n++)x(t,e.children[n])}}function _(t,e,i,n,r,o){for(var s,a=t.length-1;-1!==a;a--){var h=t[a],l=h.object,c=h.buffer;if($(l,e),o)s=o;else{if(s=h.material,!s)continue;r&&Bt.setBlending(s.blending,s.blendEquation,s.blendSrc,s.blendDst),Bt.setDepthTest(s.depthTest),Bt.setDepthWrite(s.depthWrite),rt(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits)}Bt.setMaterialFaces(s),c instanceof THREE.BufferGeometry?Bt.renderBufferDirect(e,i,n,s,c,l):Bt.renderBuffer(e,i,n,s,c,l)}}function T(t,e,i,n,r,o,s){for(var a,h=0,l=t.length;l>h;h++){var c=t[h],d=c.object;if(d.visible){if(s)a=s;else{if(a=c[e],!a)continue;o&&Bt.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst),Bt.setDepthTest(a.depthTest),Bt.setDepthWrite(a.depthWrite),rt(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}Bt.renderImmediateObject(i,n,r,a,d)}}}function S(t){var e=t.object,i=e.material;i.transparent?(t.transparent=i,t.opaque=null):(t.opaque=i,t.transparent=null)}function R(t){var e=t.object,i=t.buffer,n=e.geometry,r=e.material;if(r instanceof THREE.MeshFaceMaterial){var o=n instanceof THREE.BufferGeometry?0:i.materialIndex;r=r.materials[o],t.material=r,r.transparent?Dt.push(t):Pt.push(t)}else r&&(t.material=r,r.transparent?Dt.push(t):Pt.push(t))}function C(t,e){void 0===t.__webglInit&&(t.__webglInit=!0,t._modelViewMatrix=new THREE.Matrix4,t._normalMatrix=new THREE.Matrix3,t.addEventListener("removed",Be));var r=t.geometry;if(void 0===r||void 0===r.__webglInit&&(r.__webglInit=!0,r.addEventListener("dispose",Fe),r instanceof THREE.BufferGeometry||(t instanceof THREE.Mesh?M(e,t,r):t instanceof THREE.Line?void 0===r.__webglVertexBuffer&&(n(r),a(r,t),r.verticesNeedUpdate=!0,r.colorsNeedUpdate=!0,r.lineDistancesNeedUpdate=!0):t instanceof THREE.PointCloud&&void 0===r.__webglVertexBuffer&&(i(r),s(r,t),r.verticesNeedUpdate=!0,r.colorsNeedUpdate=!0))),void 0===t.__webglActive)if(t.__webglActive=!0,t instanceof THREE.Mesh){if(r instanceof THREE.BufferGeometry)H(Mt,r,t);else if(r instanceof THREE.Geometry)for(var o=qe[r.id],h=0,l=o.length;l>h;h++)H(Mt,o[h],t)}else t instanceof THREE.Line||t instanceof THREE.PointCloud?H(Mt,r,t):(t instanceof THREE.ImmediateRenderObject||t.immediateRenderCallback)&&P(Ht,t)}function k(t,e){for(var i,n,r=be.get("OES_element_index_uint")?4294967296:65535,o={},s=t.morphTargets.length,a=t.morphNormals.length,h={},l=[],c=0,d=t.faces.length;d>c;c++){var u=t.faces[c],f=e?u.materialIndex:0;f in o||(o[f]={hash:f,counter:0}),i=o[f].hash+"_"+o[f].counter,i in h||(n={id:Xe++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:s,numMorphNormals:a},h[i]=n,l.push(n)),h[i].vertices+3>r&&(o[f].counter+=1,i=o[f].hash+"_"+o[f].counter,i in h||(n={id:Xe++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:s,numMorphNormals:a},h[i]=n,l.push(n))),h[i].faces3.push(c),h[i].vertices+=3}return l}function M(t,e,i){var n=e.material,o=!1;void 0!==qe[i.id]&&i.groupsNeedUpdate!==!0||(delete Mt[e.id],qe[i.id]=k(i,n instanceof THREE.MeshFaceMaterial),i.groupsNeedUpdate=!1);for(var s=qe[i.id],a=0,l=s.length;l>a;a++){var c=s[a];void 0===c.__webglVertexBuffer?(r(c),h(c,e),i.verticesNeedUpdate=!0,i.morphTargetsNeedUpdate=!0,i.elementsNeedUpdate=!0,i.uvsNeedUpdate=!0,i.normalsNeedUpdate=!0,i.tangentsNeedUpdate=!0,i.colorsNeedUpdate=!0,o=!0):o=!1,(o||void 0===e.__webglActive)&&H(Mt,c,e)}e.__webglActive=!0}function H(t,e,i){var n=i.id;t[n]=t[n]||[],t[n].push({id:n,buffer:e,object:i,material:null,z:0})}function P(t,e){t.push({id:null,object:e,opaque:null,transparent:null,z:0})}function D(t,e){var i,n,r=t.geometry;if(r instanceof THREE.BufferGeometry)p(r);else if(t instanceof THREE.Mesh){r.groupsNeedUpdate===!0&&M(e,t,r);for(var o=qe[r.id],s=0,a=o.length;a>s;s++){var c=o[s];n=l(t,c),r.groupsNeedUpdate===!0&&h(c,t),i=n.attributes&&O(n),(r.verticesNeedUpdate||r.morphTargetsNeedUpdate||r.elementsNeedUpdate||r.uvsNeedUpdate||r.normalsNeedUpdate||r.colorsNeedUpdate||r.tangentsNeedUpdate||i)&&f(c,t,It.DYNAMIC_DRAW,!r.dynamic,n)}r.verticesNeedUpdate=!1,r.morphTargetsNeedUpdate=!1,r.elementsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.tangentsNeedUpdate=!1,n.attributes&&L(n)}else t instanceof THREE.Line?(n=l(t,r),i=n.attributes&&O(n),(r.verticesNeedUpdate||r.colorsNeedUpdate||r.lineDistancesNeedUpdate||i)&&u(r,It.DYNAMIC_DRAW),r.verticesNeedUpdate=!1,r.colorsNeedUpdate=!1,r.lineDistancesNeedUpdate=!1,n.attributes&&L(n)):t instanceof THREE.PointCloud&&(n=l(t,r),i=n.attributes&&O(n),(r.verticesNeedUpdate||r.colorsNeedUpdate||t.sortParticles||i)&&d(r,It.DYNAMIC_DRAW,t),r.verticesNeedUpdate=!1,r.colorsNeedUpdate=!1,n.attributes&&L(n))}function O(t){for(var e in t.attributes)if(t.attributes[e].needsUpdate)return!0;return!1}function L(t){for(var e in t.attributes)t.attributes[e].needsUpdate=!1}function I(t){t instanceof THREE.Mesh||t instanceof THREE.PointCloud||t instanceof THREE.Line?delete Mt[t.id]:(t instanceof THREE.ImmediateRenderObject||t.immediateRenderCallback)&&B(Ht,t),delete t.__webglInit,delete t._modelViewMatrix,delete t._normalMatrix,delete t.__webglActive}function B(t,e){for(var i=t.length-1;i>=0;i--)t[i].object===e&&t.splice(i,1)}function F(t,e,i,n){t.addEventListener("dispose",je);var r;if(t instanceof THREE.MeshDepthMaterial?r="depth":t instanceof THREE.MeshNormalMaterial?r="normal":t instanceof THREE.MeshBasicMaterial?r="basic":t instanceof THREE.MeshLambertMaterial?r="lambert":t instanceof THREE.MeshPhongMaterial?r="phong":t instanceof THREE.LineBasicMaterial?r="basic":t instanceof THREE.LineDashedMaterial?r="dashed":t instanceof THREE.PointCloudMaterial&&(r="particle_basic"),r){var o=THREE.ShaderLib[r];t.__webglShader={uniforms:THREE.UniformsUtils.clone(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}}else t.__webglShader={uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};var s=mt(e),a=gt(e),h=pt(n),l={precision:yt,supportsVertexTextures:Te,map:!!t.map,envMap:!!t.envMap,lightMap:!!t.lightMap,bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,vertexColors:t.vertexColors,fog:i,useFog:t.fog,fogExp:i instanceof THREE.FogExp2,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:St,skinning:t.skinning,maxBones:h,useVertexTexture:Se&&n&&n.skeleton&&n.skeleton.useVertexTexture,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:Bt.maxMorphTargets,maxMorphNormals:Bt.maxMorphNormals,maxDirLights:s.directional,maxPointLights:s.point,maxSpotLights:s.spot,maxHemiLights:s.hemi,maxShadows:a,shadowMapEnabled:Bt.shadowMapEnabled&&n.receiveShadow&&a>0,shadowMapType:Bt.shadowMapType,shadowMapDebug:Bt.shadowMapDebug,shadowMapCascade:Bt.shadowMapCascade,alphaTest:t.alphaTest,metal:t.metal,wrapAround:t.wrapAround,doubleSided:t.side===THREE.DoubleSide,flipSided:t.side===THREE.BackSide},c=[];if(r?c.push(r):(c.push(t.fragmentShader),c.push(t.vertexShader)),void 0!==t.defines)for(var d in t.defines)c.push(d),c.push(t.defines[d]);for(var d in l)c.push(d),c.push(l[d]);for(var u,f=c.join(),p=0,m=Ft.length;m>p;p++){var g=Ft[p];if(g.code===f){u=g,u.usedTimes++;break}}void 0===u&&(u=new THREE.WebGLProgram(Bt,f,t,l),Ft.push(u),Bt.info.memory.programs=Ft.length),t.program=u;var v=u.attributes;if(t.morphTargets){t.numSupportedMorphTargets=0;for(var A,y="morphTarget",b=0;b<Bt.maxMorphTargets;b++)A=y+b,v[A]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;var A,y="morphNormal";for(b=0;b<Bt.maxMorphNormals;b++)A=y+b,v[A]>=0&&t.numSupportedMorphNormals++}t.uniformsList=[];for(var E in t.__webglShader.uniforms){var w=t.program.uniforms[E];w&&t.uniformsList.push([t.__webglShader.uniforms[E],w])}}function N(t,e,i,n,r){Wt=0,n.needsUpdate&&(n.program&&Ye(n),F(n,e,i,r),n.needsUpdate=!1),n.morphTargets&&(r.__webglMorphTargetInfluences||(r.__webglMorphTargetInfluences=new Float32Array(Bt.maxMorphTargets)));var o=!1,s=!1,a=!1,h=n.program,l=h.uniforms,c=n.__webglShader.uniforms;if(h.id!==Nt&&(It.useProgram(h.program),Nt=h.id,o=!0,s=!0,a=!0),n.id!==jt&&(-1===jt&&(a=!0),jt=n.id,s=!0),(o||t!==Vt)&&(It.uniformMatrix4fv(l.projectionMatrix,!1,t.projectionMatrix.elements),St&&It.uniform1f(l.logDepthBufFC,2/(Math.log(t.far+1)/Math.LN2)),t!==Vt&&(Vt=t),(n instanceof THREE.ShaderMaterial||n instanceof THREE.MeshPhongMaterial||n.envMap)&&null!==l.cameraPosition&&(pe.setFromMatrixPosition(t.matrixWorld),It.uniform3f(l.cameraPosition,pe.x,pe.y,pe.z)),(n instanceof THREE.MeshPhongMaterial||n instanceof THREE.MeshLambertMaterial||n instanceof THREE.ShaderMaterial||n.skinning)&&null!==l.viewMatrix&&It.uniformMatrix4fv(l.viewMatrix,!1,t.matrixWorldInverse.elements)),n.skinning)if(r.bindMatrix&&null!==l.bindMatrix&&It.uniformMatrix4fv(l.bindMatrix,!1,r.bindMatrix.elements),r.bindMatrixInverse&&null!==l.bindMatrixInverse&&It.uniformMatrix4fv(l.bindMatrixInverse,!1,r.bindMatrixInverse.elements),Se&&r.skeleton&&r.skeleton.useVertexTexture){
if(null!==l.boneTexture){var d=K();It.uniform1i(l.boneTexture,d),Bt.setTexture(r.skeleton.boneTexture,d)}null!==l.boneTextureWidth&&It.uniform1i(l.boneTextureWidth,r.skeleton.boneTextureWidth),null!==l.boneTextureHeight&&It.uniform1i(l.boneTextureHeight,r.skeleton.boneTextureHeight)}else r.skeleton&&r.skeleton.boneMatrices&&null!==l.boneGlobalMatrices&&It.uniformMatrix4fv(l.boneGlobalMatrices,!1,r.skeleton.boneMatrices);return s&&(i&&n.fog&&W(c,i),(n instanceof THREE.MeshPhongMaterial||n instanceof THREE.MeshLambertMaterial||n.lights)&&(ge&&(a=!0,it(e),ge=!1),a?(q(c,ve),X(c,!0)):X(c,!1)),(n instanceof THREE.MeshBasicMaterial||n instanceof THREE.MeshLambertMaterial||n instanceof THREE.MeshPhongMaterial)&&z(c,n),n instanceof THREE.LineBasicMaterial?j(c,n):n instanceof THREE.LineDashedMaterial?(j(c,n),U(c,n)):n instanceof THREE.PointCloudMaterial?V(c,n):n instanceof THREE.MeshPhongMaterial?G(c,n):n instanceof THREE.MeshLambertMaterial?Y(c,n):n instanceof THREE.MeshDepthMaterial?(c.mNear.value=t.near,c.mFar.value=t.far,c.opacity.value=n.opacity):n instanceof THREE.MeshNormalMaterial&&(c.opacity.value=n.opacity),r.receiveShadow&&!n._shadowPass&&Q(c,e),J(n.uniformsList)),Z(l,r),null!==l.modelMatrix&&It.uniformMatrix4fv(l.modelMatrix,!1,r.matrixWorld.elements),h}function z(t,e){t.opacity.value=e.opacity,Bt.gammaInput?t.diffuse.value.copyGammaToLinear(e.color):t.diffuse.value=e.color,t.map.value=e.map,t.lightMap.value=e.lightMap,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale));var i;if(e.map?i=e.map:e.specularMap?i=e.specularMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.alphaMap&&(i=e.alphaMap),void 0!==i){var n=i.offset,r=i.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,Bt.gammaInput?t.reflectivity.value=e.reflectivity:t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.combine.value=e.combine,t.useRefract.value=e.envMap&&e.envMap.mapping instanceof THREE.CubeRefractionMapping}function j(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function U(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function V(t,e){t.psColor.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size,t.scale.value=vt.height/2,t.map.value=e.map}function W(t,e){t.fogColor.value=e.color,e instanceof THREE.Fog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e instanceof THREE.FogExp2&&(t.fogDensity.value=e.density)}function G(t,e){t.shininess.value=e.shininess,Bt.gammaInput?(t.ambient.value.copyGammaToLinear(e.ambient),t.emissive.value.copyGammaToLinear(e.emissive),t.specular.value.copyGammaToLinear(e.specular)):(t.ambient.value=e.ambient,t.emissive.value=e.emissive,t.specular.value=e.specular),e.wrapAround&&t.wrapRGB.value.copy(e.wrapRGB)}function Y(t,e){Bt.gammaInput?(t.ambient.value.copyGammaToLinear(e.ambient),t.emissive.value.copyGammaToLinear(e.emissive)):(t.ambient.value=e.ambient,t.emissive.value=e.emissive),e.wrapAround&&t.wrapRGB.value.copy(e.wrapRGB)}function q(t,e){t.ambientLightColor.value=e.ambient,t.directionalLightColor.value=e.directional.colors,t.directionalLightDirection.value=e.directional.positions,t.pointLightColor.value=e.point.colors,t.pointLightPosition.value=e.point.positions,t.pointLightDistance.value=e.point.distances,t.spotLightColor.value=e.spot.colors,t.spotLightPosition.value=e.spot.positions,t.spotLightDistance.value=e.spot.distances,t.spotLightDirection.value=e.spot.directions,t.spotLightAngleCos.value=e.spot.anglesCos,t.spotLightExponent.value=e.spot.exponents,t.hemisphereLightSkyColor.value=e.hemi.skyColors,t.hemisphereLightGroundColor.value=e.hemi.groundColors,t.hemisphereLightDirection.value=e.hemi.positions}function X(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLightColor.needsUpdate=e,t.directionalLightDirection.needsUpdate=e,t.pointLightColor.needsUpdate=e,t.pointLightPosition.needsUpdate=e,t.pointLightDistance.needsUpdate=e,t.spotLightColor.needsUpdate=e,t.spotLightPosition.needsUpdate=e,t.spotLightDistance.needsUpdate=e,t.spotLightDirection.needsUpdate=e,t.spotLightAngleCos.needsUpdate=e,t.spotLightExponent.needsUpdate=e,t.hemisphereLightSkyColor.needsUpdate=e,t.hemisphereLightGroundColor.needsUpdate=e,t.hemisphereLightDirection.needsUpdate=e}function Q(t,e){if(t.shadowMatrix)for(var i=0,n=0,r=e.length;r>n;n++){var o=e[n];o.castShadow&&(o instanceof THREE.SpotLight||o instanceof THREE.DirectionalLight&&!o.shadowCascade)&&(t.shadowMap.value[i]=o.shadowMap,t.shadowMapSize.value[i]=o.shadowMapSize,t.shadowMatrix.value[i]=o.shadowMatrix,t.shadowDarkness.value[i]=o.shadowDarkness,t.shadowBias.value[i]=o.shadowBias,i++)}}function Z(t,e){It.uniformMatrix4fv(t.modelViewMatrix,!1,e._modelViewMatrix.elements),t.normalMatrix&&It.uniformMatrix3fv(t.normalMatrix,!1,e._normalMatrix.elements)}function K(){var t=Wt;return t>=Ee&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+Ee),Wt+=1,t}function J(t){for(var e,i,n,r=0,o=t.length;o>r;r++){var s=t[r][0];if(s.needsUpdate!==!1){var a=s.type,h=s.value,l=t[r][1];switch(a){case"1i":It.uniform1i(l,h);break;case"1f":It.uniform1f(l,h);break;case"2f":It.uniform2f(l,h[0],h[1]);break;case"3f":It.uniform3f(l,h[0],h[1],h[2]);break;case"4f":It.uniform4f(l,h[0],h[1],h[2],h[3]);break;case"1iv":It.uniform1iv(l,h);break;case"3iv":It.uniform3iv(l,h);break;case"1fv":It.uniform1fv(l,h);break;case"2fv":It.uniform2fv(l,h);break;case"3fv":It.uniform3fv(l,h);break;case"4fv":It.uniform4fv(l,h);break;case"Matrix3fv":It.uniformMatrix3fv(l,!1,h);break;case"Matrix4fv":It.uniformMatrix4fv(l,!1,h);break;case"i":It.uniform1i(l,h);break;case"f":It.uniform1f(l,h);break;case"v2":It.uniform2f(l,h.x,h.y);break;case"v3":It.uniform3f(l,h.x,h.y,h.z);break;case"v4":It.uniform4f(l,h.x,h.y,h.z,h.w);break;case"c":It.uniform3f(l,h.r,h.g,h.b);break;case"iv1":It.uniform1iv(l,h);break;case"iv":It.uniform3iv(l,h);break;case"fv1":It.uniform1fv(l,h);break;case"fv":It.uniform3fv(l,h);break;case"v2v":void 0===s._array&&(s._array=new Float32Array(2*h.length));for(var c=0,d=h.length;d>c;c++)n=2*c,s._array[n]=h[c].x,s._array[n+1]=h[c].y;It.uniform2fv(l,s._array);break;case"v3v":void 0===s._array&&(s._array=new Float32Array(3*h.length));for(var c=0,d=h.length;d>c;c++)n=3*c,s._array[n]=h[c].x,s._array[n+1]=h[c].y,s._array[n+2]=h[c].z;It.uniform3fv(l,s._array);break;case"v4v":void 0===s._array&&(s._array=new Float32Array(4*h.length));for(var c=0,d=h.length;d>c;c++)n=4*c,s._array[n]=h[c].x,s._array[n+1]=h[c].y,s._array[n+2]=h[c].z,s._array[n+3]=h[c].w;It.uniform4fv(l,s._array);break;case"m3":It.uniformMatrix3fv(l,!1,h.elements);break;case"m3v":void 0===s._array&&(s._array=new Float32Array(9*h.length));for(var c=0,d=h.length;d>c;c++)h[c].flattenToArrayOffset(s._array,9*c);It.uniformMatrix3fv(l,!1,s._array);break;case"m4":It.uniformMatrix4fv(l,!1,h.elements);break;case"m4v":void 0===s._array&&(s._array=new Float32Array(16*h.length));for(var c=0,d=h.length;d>c;c++)h[c].flattenToArrayOffset(s._array,16*c);It.uniformMatrix4fv(l,!1,s._array);break;case"t":if(e=h,i=K(),It.uniform1i(l,i),!e)continue;e instanceof THREE.CubeTexture||e.image instanceof Array&&6===e.image.length?at(e,i):e instanceof THREE.WebGLRenderTargetCube?ht(e,i):Bt.setTexture(e,i);break;case"tv":void 0===s._array&&(s._array=[]);for(var c=0,d=s.value.length;d>c;c++)s._array[c]=K();It.uniform1iv(l,s._array);for(var c=0,d=s.value.length;d>c;c++)e=s.value[c],i=s._array[c],e&&Bt.setTexture(e,i);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+a)}}}}function $(t,e){t._modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,t.matrixWorld),t._normalMatrix.getNormalMatrix(t._modelViewMatrix)}function tt(t,e,i,n){t[e]=i.r*i.r*n,t[e+1]=i.g*i.g*n,t[e+2]=i.b*i.b*n}function et(t,e,i,n){t[e]=i.r*n,t[e+1]=i.g*n,t[e+2]=i.b*n}function it(t){var e,i,n,r,o,s,a,h,l,c=0,d=0,u=0,f=ve,p=f.directional.colors,m=f.directional.positions,g=f.point.colors,v=f.point.positions,A=f.point.distances,y=f.spot.colors,b=f.spot.positions,E=f.spot.distances,w=f.spot.directions,x=f.spot.anglesCos,_=f.spot.exponents,T=f.hemi.skyColors,S=f.hemi.groundColors,R=f.hemi.positions,C=0,k=0,M=0,H=0,P=0,D=0,O=0,L=0,I=0,B=0,F=0,N=0;for(e=0,i=t.length;i>e;e++)if(n=t[e],!n.onlyShadow)if(r=n.color,a=n.intensity,l=n.distance,n instanceof THREE.AmbientLight){if(!n.visible)continue;Bt.gammaInput?(c+=r.r*r.r,d+=r.g*r.g,u+=r.b*r.b):(c+=r.r,d+=r.g,u+=r.b)}else if(n instanceof THREE.DirectionalLight){if(P+=1,!n.visible)continue;me.setFromMatrixPosition(n.matrixWorld),pe.setFromMatrixPosition(n.target.matrixWorld),me.sub(pe),me.normalize(),I=3*C,m[I]=me.x,m[I+1]=me.y,m[I+2]=me.z,Bt.gammaInput?tt(p,I,r,a*a):et(p,I,r,a),C+=1}else if(n instanceof THREE.PointLight){if(D+=1,!n.visible)continue;B=3*k,Bt.gammaInput?tt(g,B,r,a*a):et(g,B,r,a),pe.setFromMatrixPosition(n.matrixWorld),v[B]=pe.x,v[B+1]=pe.y,v[B+2]=pe.z,A[k]=l,k+=1}else if(n instanceof THREE.SpotLight){if(O+=1,!n.visible)continue;F=3*M,Bt.gammaInput?tt(y,F,r,a*a):et(y,F,r,a),me.setFromMatrixPosition(n.matrixWorld),b[F]=me.x,b[F+1]=me.y,b[F+2]=me.z,E[M]=l,pe.setFromMatrixPosition(n.target.matrixWorld),me.sub(pe),me.normalize(),w[F]=me.x,w[F+1]=me.y,w[F+2]=me.z,x[M]=Math.cos(n.angle),_[M]=n.exponent,M+=1}else if(n instanceof THREE.HemisphereLight){if(L+=1,!n.visible)continue;me.setFromMatrixPosition(n.matrixWorld),me.normalize(),N=3*H,R[N]=me.x,R[N+1]=me.y,R[N+2]=me.z,o=n.color,s=n.groundColor,Bt.gammaInput?(h=a*a,tt(T,N,o,h),tt(S,N,s,h)):(et(T,N,o,a),et(S,N,s,a)),H+=1}for(e=3*C,i=Math.max(p.length,3*P);i>e;e++)p[e]=0;for(e=3*k,i=Math.max(g.length,3*D);i>e;e++)g[e]=0;for(e=3*M,i=Math.max(y.length,3*O);i>e;e++)y[e]=0;for(e=3*H,i=Math.max(T.length,3*L);i>e;e++)T[e]=0;for(e=3*H,i=Math.max(S.length,3*L);i>e;e++)S[e]=0;f.directional.length=C,f.point.length=k,f.spot.length=M,f.hemi.length=H,f.ambient[0]=c,f.ambient[1]=d,f.ambient[2]=u}function nt(t){t!==ie&&(It.lineWidth(t),ie=t)}function rt(t,e,i){$t!==t&&(t?It.enable(It.POLYGON_OFFSET_FILL):It.disable(It.POLYGON_OFFSET_FILL),$t=t),!t||te===e&&ee===i||(It.polygonOffset(e,i),te=e,ee=i)}function ot(t,e,i){var n;i?(It.texParameteri(t,It.TEXTURE_WRAP_S,ft(e.wrapS)),It.texParameteri(t,It.TEXTURE_WRAP_T,ft(e.wrapT)),It.texParameteri(t,It.TEXTURE_MAG_FILTER,ft(e.magFilter)),It.texParameteri(t,It.TEXTURE_MIN_FILTER,ft(e.minFilter))):(It.texParameteri(t,It.TEXTURE_WRAP_S,It.CLAMP_TO_EDGE),It.texParameteri(t,It.TEXTURE_WRAP_T,It.CLAMP_TO_EDGE),It.texParameteri(t,It.TEXTURE_MAG_FILTER,ut(e.magFilter)),It.texParameteri(t,It.TEXTURE_MIN_FILTER,ut(e.minFilter))),n=be.get("EXT_texture_filter_anisotropic"),n&&e.type!==THREE.FloatType&&(e.anisotropy>1||e.__oldAnisotropy)&&(It.texParameterf(t,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,Bt.getMaxAnisotropy())),e.__oldAnisotropy=e.anisotropy)}function st(t,e){if(t.width>e||t.height>e){var i=e/Math.max(t.width,t.height),n=document.createElement("canvas");n.width=Math.floor(t.width*i),n.height=Math.floor(t.height*i);var r=n.getContext("2d");return r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),console.log("THREE.WebGLRenderer:",t,"is too big ("+t.width+"x"+t.height+"). Resized to "+n.width+"x"+n.height+"."),n}return t}function at(t,e){if(6===t.image.length)if(t.needsUpdate){t.image.__webglTextureCube||(t.addEventListener("dispose",Ne),t.image.__webglTextureCube=It.createTexture(),Bt.info.memory.textures++),It.activeTexture(It.TEXTURE0+e),It.bindTexture(It.TEXTURE_CUBE_MAP,t.image.__webglTextureCube),It.pixelStorei(It.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var i=t instanceof THREE.CompressedTexture,n=t.image[0]instanceof THREE.DataTexture,r=[],o=0;6>o;o++)!Bt.autoScaleCubemaps||i||n?r[o]=n?t.image[o].image:t.image[o]:r[o]=st(t.image[o],_e);var s=r[0],a=THREE.Math.isPowerOfTwo(s.width)&&THREE.Math.isPowerOfTwo(s.height),h=ft(t.format),l=ft(t.type);ot(It.TEXTURE_CUBE_MAP,t,a);for(var o=0;6>o;o++)if(i)for(var c,d=r[o].mipmaps,u=0,f=d.length;f>u;u++)c=d[u],t.format!==THREE.RGBAFormat&&t.format!==THREE.RGBFormat?He().indexOf(h)>-1?It.compressedTexImage2D(It.TEXTURE_CUBE_MAP_POSITIVE_X+o,u,h,c.width,c.height,0,c.data):console.warn("Attempt to load unsupported compressed texture format"):It.texImage2D(It.TEXTURE_CUBE_MAP_POSITIVE_X+o,u,h,c.width,c.height,0,h,l,c.data);else n?It.texImage2D(It.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,h,r[o].width,r[o].height,0,h,l,r[o].data):It.texImage2D(It.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,h,h,l,r[o]);t.generateMipmaps&&a&&It.generateMipmap(It.TEXTURE_CUBE_MAP),t.needsUpdate=!1,t.onUpdate&&t.onUpdate()}else It.activeTexture(It.TEXTURE0+e),It.bindTexture(It.TEXTURE_CUBE_MAP,t.image.__webglTextureCube)}function ht(t,e){It.activeTexture(It.TEXTURE0+e),It.bindTexture(It.TEXTURE_CUBE_MAP,t.__webglTexture)}function lt(t,e,i){It.bindFramebuffer(It.FRAMEBUFFER,t),It.framebufferTexture2D(It.FRAMEBUFFER,It.COLOR_ATTACHMENT0,i,e.__webglTexture,0)}function ct(t,e){It.bindRenderbuffer(It.RENDERBUFFER,t),e.depthBuffer&&!e.stencilBuffer?(It.renderbufferStorage(It.RENDERBUFFER,It.DEPTH_COMPONENT16,e.width,e.height),It.framebufferRenderbuffer(It.FRAMEBUFFER,It.DEPTH_ATTACHMENT,It.RENDERBUFFER,t)):e.depthBuffer&&e.stencilBuffer?(It.renderbufferStorage(It.RENDERBUFFER,It.DEPTH_STENCIL,e.width,e.height),It.framebufferRenderbuffer(It.FRAMEBUFFER,It.DEPTH_STENCIL_ATTACHMENT,It.RENDERBUFFER,t)):It.renderbufferStorage(It.RENDERBUFFER,It.RGBA4,e.width,e.height)}function dt(t){t instanceof THREE.WebGLRenderTargetCube?(It.bindTexture(It.TEXTURE_CUBE_MAP,t.__webglTexture),It.generateMipmap(It.TEXTURE_CUBE_MAP),It.bindTexture(It.TEXTURE_CUBE_MAP,null)):(It.bindTexture(It.TEXTURE_2D,t.__webglTexture),It.generateMipmap(It.TEXTURE_2D),It.bindTexture(It.TEXTURE_2D,null))}function ut(t){return t===THREE.NearestFilter||t===THREE.NearestMipMapNearestFilter||t===THREE.NearestMipMapLinearFilter?It.NEAREST:It.LINEAR}function ft(t){var e;if(t===THREE.RepeatWrapping)return It.REPEAT;if(t===THREE.ClampToEdgeWrapping)return It.CLAMP_TO_EDGE;if(t===THREE.MirroredRepeatWrapping)return It.MIRRORED_REPEAT;if(t===THREE.NearestFilter)return It.NEAREST;if(t===THREE.NearestMipMapNearestFilter)return It.NEAREST_MIPMAP_NEAREST;if(t===THREE.NearestMipMapLinearFilter)return It.NEAREST_MIPMAP_LINEAR;if(t===THREE.LinearFilter)return It.LINEAR;if(t===THREE.LinearMipMapNearestFilter)return It.LINEAR_MIPMAP_NEAREST;if(t===THREE.LinearMipMapLinearFilter)return It.LINEAR_MIPMAP_LINEAR;if(t===THREE.UnsignedByteType)return It.UNSIGNED_BYTE;if(t===THREE.UnsignedShort4444Type)return It.UNSIGNED_SHORT_4_4_4_4;if(t===THREE.UnsignedShort5551Type)return It.UNSIGNED_SHORT_5_5_5_1;if(t===THREE.UnsignedShort565Type)return It.UNSIGNED_SHORT_5_6_5;if(t===THREE.ByteType)return It.BYTE;if(t===THREE.ShortType)return It.SHORT;if(t===THREE.UnsignedShortType)return It.UNSIGNED_SHORT;if(t===THREE.IntType)return It.INT;if(t===THREE.UnsignedIntType)return It.UNSIGNED_INT;if(t===THREE.FloatType)return It.FLOAT;if(t===THREE.AlphaFormat)return It.ALPHA;if(t===THREE.RGBFormat)return It.RGB;if(t===THREE.RGBAFormat)return It.RGBA;if(t===THREE.LuminanceFormat)return It.LUMINANCE;if(t===THREE.LuminanceAlphaFormat)return It.LUMINANCE_ALPHA;if(t===THREE.AddEquation)return It.FUNC_ADD;if(t===THREE.SubtractEquation)return It.FUNC_SUBTRACT;if(t===THREE.ReverseSubtractEquation)return It.FUNC_REVERSE_SUBTRACT;if(t===THREE.ZeroFactor)return It.ZERO;if(t===THREE.OneFactor)return It.ONE;if(t===THREE.SrcColorFactor)return It.SRC_COLOR;if(t===THREE.OneMinusSrcColorFactor)return It.ONE_MINUS_SRC_COLOR;if(t===THREE.SrcAlphaFactor)return It.SRC_ALPHA;if(t===THREE.OneMinusSrcAlphaFactor)return It.ONE_MINUS_SRC_ALPHA;if(t===THREE.DstAlphaFactor)return It.DST_ALPHA;if(t===THREE.OneMinusDstAlphaFactor)return It.ONE_MINUS_DST_ALPHA;if(t===THREE.DstColorFactor)return It.DST_COLOR;if(t===THREE.OneMinusDstColorFactor)return It.ONE_MINUS_DST_COLOR;if(t===THREE.SrcAlphaSaturateFactor)return It.SRC_ALPHA_SATURATE;if(e=be.get("WEBGL_compressed_texture_s3tc"),null!==e){if(t===THREE.RGB_S3TC_DXT1_Format)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===THREE.RGBA_S3TC_DXT1_Format)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===THREE.RGBA_S3TC_DXT3_Format)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===THREE.RGBA_S3TC_DXT5_Format)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e=be.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(t===THREE.RGB_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===THREE.RGB_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===THREE.RGBA_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===THREE.RGBA_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e=be.get("EXT_blend_minmax"),null!==e){if(t===THREE.MinEquation)return e.MIN_EXT;if(t===THREE.MaxEquation)return e.MAX_EXT}return 0}function pt(t){if(Se&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var e=It.getParameter(It.MAX_VERTEX_UNIFORM_VECTORS),i=Math.floor((e-20)/4),n=i;return void 0!==t&&t instanceof THREE.SkinnedMesh&&(n=Math.min(t.skeleton.bones.length,n),n<t.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+t.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)")),n}function mt(t){for(var e=0,i=0,n=0,r=0,o=0,s=t.length;s>o;o++){var a=t[o];a.onlyShadow||a.visible===!1||(a instanceof THREE.DirectionalLight&&e++,a instanceof THREE.PointLight&&i++,a instanceof THREE.SpotLight&&n++,a instanceof THREE.HemisphereLight&&r++)}return{directional:e,point:i,spot:n,hemi:r}}function gt(t){for(var e=0,i=0,n=t.length;n>i;i++){var r=t[i];r.castShadow&&(r instanceof THREE.SpotLight&&e++,r instanceof THREE.DirectionalLight&&!r.shadowCascade&&e++)}return e}console.log("THREE.WebGLRenderer",THREE.REVISION),t=t||{};var vt=void 0!==t.canvas?t.canvas:document.createElement("canvas"),At=void 0!==t.context?t.context:null,yt=void 0!==t.precision?t.precision:"highp",bt=void 0!==t.alpha?t.alpha:!1,Et=void 0!==t.depth?t.depth:!0,wt=void 0!==t.stencil?t.stencil:!0,xt=void 0!==t.antialias?t.antialias:!1,_t=void 0!==t.premultipliedAlpha?t.premultipliedAlpha:!0,Tt=void 0!==t.preserveDrawingBuffer?t.preserveDrawingBuffer:!1,St=void 0!==t.logarithmicDepthBuffer?t.logarithmicDepthBuffer:!1,Rt=new THREE.Color(0),Ct=0,kt=[],Mt={},Ht=[],Pt=[],Dt=[],Ot=[],Lt=[];this.domElement=vt,this.context=null,this.devicePixelRatio=void 0!==t.devicePixelRatio?t.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaInput=!1,this.gammaOutput=!1,this.shadowMapEnabled=!1,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var It,Bt=this,Ft=[],Nt=null,zt=null,jt=-1,Ut=-1,Vt=null,Wt=0,Gt=-1,Yt=-1,qt=-1,Xt=-1,Qt=-1,Zt=-1,Kt=-1,Jt=-1,$t=null,te=null,ee=null,ie=null,ne=0,re=0,oe=vt.width,se=vt.height,ae=0,he=0,le=new Uint8Array(16),ce=new Uint8Array(16),de=new THREE.Frustum,ue=new THREE.Matrix4,fe=new THREE.Matrix4,pe=new THREE.Vector3,me=new THREE.Vector3,ge=!0,ve={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};try{var Ae={alpha:bt,depth:Et,stencil:wt,antialias:xt,premultipliedAlpha:_t,preserveDrawingBuffer:Tt};if(It=At||vt.getContext("webgl",Ae)||vt.getContext("experimental-webgl",Ae),null===It)throw null!==vt.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context."}catch(ye){console.error(ye)}void 0===It.getShaderPrecisionFormat&&(It.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var be=new THREE.WebGLExtensions(It);be.get("OES_texture_float"),be.get("OES_texture_float_linear"),be.get("OES_standard_derivatives"),St&&be.get("EXT_frag_depth"),e(),this.context=It;var Ee=It.getParameter(It.MAX_TEXTURE_IMAGE_UNITS),we=It.getParameter(It.MAX_VERTEX_TEXTURE_IMAGE_UNITS),xe=It.getParameter(It.MAX_TEXTURE_SIZE),_e=It.getParameter(It.MAX_CUBE_MAP_TEXTURE_SIZE),Te=we>0,Se=Te&&be.get("OES_texture_float"),Re=It.getShaderPrecisionFormat(It.VERTEX_SHADER,It.HIGH_FLOAT),Ce=It.getShaderPrecisionFormat(It.VERTEX_SHADER,It.MEDIUM_FLOAT),ke=(It.getShaderPrecisionFormat(It.VERTEX_SHADER,It.LOW_FLOAT),It.getShaderPrecisionFormat(It.FRAGMENT_SHADER,It.HIGH_FLOAT)),Me=It.getShaderPrecisionFormat(It.FRAGMENT_SHADER,It.MEDIUM_FLOAT),He=(It.getShaderPrecisionFormat(It.FRAGMENT_SHADER,It.LOW_FLOAT),function(){var t;return function(){if(void 0!==t)return t;if(t=[],be.get("WEBGL_compressed_texture_pvrtc")||be.get("WEBGL_compressed_texture_s3tc"))for(var e=It.getParameter(It.COMPRESSED_TEXTURE_FORMATS),i=0;i<e.length;i++)t.push(e[i]);return t}}()),Pe=Re.precision>0&&ke.precision>0,De=Ce.precision>0&&Me.precision>0;"highp"!==yt||Pe||(De?(yt="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(yt="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==yt||De||(yt="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var Oe=new THREE.ShadowMapPlugin(this,kt,Mt,Ht),Le=new THREE.SpritePlugin(this,Ot),Ie=new THREE.LensFlarePlugin(this,Lt);this.getContext=function(){return It},this.supportsVertexTextures=function(){return Te},this.supportsFloatTextures=function(){return be.get("OES_texture_float")},this.supportsStandardDerivatives=function(){return be.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return be.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return be.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return be.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var t;return function(){if(void 0!==t)return t;var e=be.get("EXT_texture_filter_anisotropic");return t=null!==e?It.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return yt},this.setSize=function(t,e,i){vt.width=t*this.devicePixelRatio,vt.height=e*this.devicePixelRatio,i!==!1&&(vt.style.width=t+"px",vt.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,i,n){ne=t*this.devicePixelRatio,re=e*this.devicePixelRatio,oe=i*this.devicePixelRatio,se=n*this.devicePixelRatio,It.viewport(ne,re,oe,se)},this.setScissor=function(t,e,i,n){It.scissor(t*this.devicePixelRatio,e*this.devicePixelRatio,i*this.devicePixelRatio,n*this.devicePixelRatio)},this.enableScissorTest=function(t){t?It.enable(It.SCISSOR_TEST):It.disable(It.SCISSOR_TEST)},this.setClearColor=function(t,e){Rt.set(t),Ct=void 0!==e?e:1,It.clearColor(Rt.r,Rt.g,Rt.b,Ct)},this.setClearColorHex=function(t,e){console.warn("THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(t,e)},this.getClearColor=function(){return Rt},this.getClearAlpha=function(){return Ct},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=It.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=It.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=It.STENCIL_BUFFER_BIT),It.clear(n)},this.clearColor=function(){It.clear(It.COLOR_BUFFER_BIT)},this.clearDepth=function(){It.clear(It.DEPTH_BUFFER_BIT)},this.clearStencil=function(){It.clear(It.STENCIL_BUFFER_BIT)},this.clearTarget=function(t,e,i,n){this.setRenderTarget(t),this.clear(e,i,n)},this.resetGLState=function(){Nt=null,Vt=null,qt=-1,Kt=-1,Jt=-1,Gt=-1,Yt=-1,Ut=-1,jt=-1,ge=!0};var Be=function(t){var e=t.target;e.traverse(function(t){t.removeEventListener("remove",Be),I(t)})},Fe=function(t){var e=t.target;e.removeEventListener("dispose",Fe),Ve(e)},Ne=function(t){var e=t.target;e.removeEventListener("dispose",Ne),We(e),Bt.info.memory.textures--},ze=function(t){var e=t.target;e.removeEventListener("dispose",ze),Ge(e),Bt.info.memory.textures--},je=function(t){var e=t.target;e.removeEventListener("dispose",je),Ye(e)},Ue=function(t){for(var e=["__webglVertexBuffer","__webglNormalBuffer","__webglTangentBuffer","__webglColorBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","__webglLineDistanceBuffer"],i=0,n=e.length;n>i;i++){var r=e[i];void 0!==t[r]&&(It.deleteBuffer(t[r]),delete t[r])}if(void 0!==t.__webglCustomAttributesList){for(var r in t.__webglCustomAttributesList)It.deleteBuffer(t.__webglCustomAttributesList[r].buffer);delete t.__webglCustomAttributesList}Bt.info.memory.geometries--},Ve=function(t){if(delete t.__webglInit,t instanceof THREE.BufferGeometry){for(var e in t.attributes){var i=t.attributes[e];void 0!==i.buffer&&(It.deleteBuffer(i.buffer),delete i.buffer)}Bt.info.memory.geometries--}else{var n=qe[t.id];if(void 0!==n){for(var r=0,o=n.length;o>r;r++){var s=n[r];if(void 0!==s.numMorphTargets){for(var a=0,h=s.numMorphTargets;h>a;a++)It.deleteBuffer(s.__webglMorphTargetsBuffers[a]);delete s.__webglMorphTargetsBuffers}if(void 0!==s.numMorphNormals){for(var a=0,h=s.numMorphNormals;h>a;a++)It.deleteBuffer(s.__webglMorphNormalsBuffers[a]);delete s.__webglMorphNormalsBuffers}Ue(s)}delete qe[t.id]}else Ue(t)}Ut=-1},We=function(t){if(t.image&&t.image.__webglTextureCube)It.deleteTexture(t.image.__webglTextureCube),delete t.image.__webglTextureCube;else{if(void 0===t.__webglInit)return;It.deleteTexture(t.__webglTexture),delete t.__webglTexture,delete t.__webglInit}},Ge=function(t){if(t&&void 0!==t.__webglTexture){if(It.deleteTexture(t.__webglTexture),delete t.__webglTexture,t instanceof THREE.WebGLRenderTargetCube)for(var e=0;6>e;e++)It.deleteFramebuffer(t.__webglFramebuffer[e]),It.deleteRenderbuffer(t.__webglRenderbuffer[e]);else It.deleteFramebuffer(t.__webglFramebuffer),It.deleteRenderbuffer(t.__webglRenderbuffer);delete t.__webglFramebuffer,delete t.__webglRenderbuffer}},Ye=function(t){var e=t.program.program;if(void 0!==e){t.program=void 0;var i,n,r,o=!1;for(i=0,n=Ft.length;n>i;i++)if(r=Ft[i],r.program===e){r.usedTimes--,0===r.usedTimes&&(o=!0);break}if(o===!0){var s=[];for(i=0,n=Ft.length;n>i;i++)r=Ft[i],r.program!==e&&s.push(r);Ft=s,It.deleteProgram(e),Bt.info.memory.programs--}}};this.renderBufferImmediate=function(t,e,i){if(g(),t.hasPositions&&!t.__webglVertexBuffer&&(t.__webglVertexBuffer=It.createBuffer()),t.hasNormals&&!t.__webglNormalBuffer&&(t.__webglNormalBuffer=It.createBuffer()),t.hasUvs&&!t.__webglUvBuffer&&(t.__webglUvBuffer=It.createBuffer()),t.hasColors&&!t.__webglColorBuffer&&(t.__webglColorBuffer=It.createBuffer()),t.hasPositions&&(It.bindBuffer(It.ARRAY_BUFFER,t.__webglVertexBuffer),It.bufferData(It.ARRAY_BUFFER,t.positionArray,It.DYNAMIC_DRAW),v(e.attributes.position),It.vertexAttribPointer(e.attributes.position,3,It.FLOAT,!1,0,0)),t.hasNormals){if(It.bindBuffer(It.ARRAY_BUFFER,t.__webglNormalBuffer),i.shading===THREE.FlatShading){var n,r,o,s,a,h,l,c,d,u,f,p,m,y,b=3*t.count;for(y=0;b>y;y+=9)m=t.normalArray,s=m[y],l=m[y+1],u=m[y+2],a=m[y+3],c=m[y+4],f=m[y+5],h=m[y+6],d=m[y+7],p=m[y+8],n=(s+a+h)/3,r=(l+c+d)/3,o=(u+f+p)/3,m[y]=n,m[y+1]=r,m[y+2]=o,m[y+3]=n,m[y+4]=r,m[y+5]=o,m[y+6]=n,m[y+7]=r,m[y+8]=o}It.bufferData(It.ARRAY_BUFFER,t.normalArray,It.DYNAMIC_DRAW),v(e.attributes.normal),It.vertexAttribPointer(e.attributes.normal,3,It.FLOAT,!1,0,0)}t.hasUvs&&i.map&&(It.bindBuffer(It.ARRAY_BUFFER,t.__webglUvBuffer),It.bufferData(It.ARRAY_BUFFER,t.uvArray,It.DYNAMIC_DRAW),v(e.attributes.uv),It.vertexAttribPointer(e.attributes.uv,2,It.FLOAT,!1,0,0)),t.hasColors&&i.vertexColors!==THREE.NoColors&&(It.bindBuffer(It.ARRAY_BUFFER,t.__webglColorBuffer),It.bufferData(It.ARRAY_BUFFER,t.colorArray,It.DYNAMIC_DRAW),v(e.attributes.color),It.vertexAttribPointer(e.attributes.color,3,It.FLOAT,!1,0,0)),A(),It.drawArrays(It.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,n,r,o){if(n.visible!==!1){var s=N(t,e,i,n,o),a=!1,h=n.wireframe?1:0,l=16777215*r.id+2*s.id+h;if(l!==Ut&&(Ut=l,a=!0),a&&g(),o instanceof THREE.Mesh){var c=n.wireframe===!0?It.LINES:It.TRIANGLES,d=r.attributes.index;if(d){var u,f;d.array instanceof Uint32Array&&be.get("OES_element_index_uint")?(u=It.UNSIGNED_INT,f=4):(u=It.UNSIGNED_SHORT,f=2);var p=r.offsets;if(0===p.length)a&&(m(n,s,r,0),It.bindBuffer(It.ELEMENT_ARRAY_BUFFER,d.buffer)),It.drawElements(c,d.array.length,u,0),Bt.info.render.calls++,Bt.info.render.vertices+=d.array.length,Bt.info.render.faces+=d.array.length/3;else{a=!0;for(var v=0,A=p.length;A>v;v++){var y=p[v].index;a&&(m(n,s,r,y),It.bindBuffer(It.ELEMENT_ARRAY_BUFFER,d.buffer)),It.drawElements(c,p[v].count,u,p[v].start*f),Bt.info.render.calls++,Bt.info.render.vertices+=p[v].count,Bt.info.render.faces+=p[v].count/3}}}else{a&&m(n,s,r,0);var b=r.attributes.position;It.drawArrays(c,0,b.array.length/3),Bt.info.render.calls++,Bt.info.render.vertices+=b.array.length/3,Bt.info.render.faces+=b.array.length/9}}else if(o instanceof THREE.PointCloud){a&&m(n,s,r,0);var b=r.attributes.position;It.drawArrays(It.POINTS,0,b.array.length/3),Bt.info.render.calls++,Bt.info.render.points+=b.array.length/3}else if(o instanceof THREE.Line){var c=o.mode===THREE.LineStrip?It.LINE_STRIP:It.LINES;nt(n.linewidth);var d=r.attributes.index;if(d){var u,f;d.array instanceof Uint32Array?(u=It.UNSIGNED_INT,f=4):(u=It.UNSIGNED_SHORT,f=2);var p=r.offsets;if(0===p.length)a&&(m(n,s,r,0),It.bindBuffer(It.ELEMENT_ARRAY_BUFFER,d.buffer)),It.drawElements(c,d.array.length,u,0),Bt.info.render.calls++,Bt.info.render.vertices+=d.array.length;else{p.length>1&&(a=!0);for(var v=0,A=p.length;A>v;v++){var y=p[v].index;a&&(m(n,s,r,y),It.bindBuffer(It.ELEMENT_ARRAY_BUFFER,d.buffer)),It.drawElements(c,p[v].count,u,p[v].start*f),Bt.info.render.calls++,Bt.info.render.vertices+=p[v].count}}}else{a&&m(n,s,r,0);var b=r.attributes.position;It.drawArrays(c,0,b.array.length/3),Bt.info.render.calls++,Bt.info.render.points+=b.array.length/3}}}},this.renderBuffer=function(t,e,i,n,r,o){if(n.visible!==!1){var s=N(t,e,i,n,o),a=s.attributes,h=!1,l=n.wireframe?1:0,c=16777215*r.id+2*s.id+l;if(c!==Ut&&(Ut=c,h=!0),h&&g(),!n.morphTargets&&a.position>=0?h&&(It.bindBuffer(It.ARRAY_BUFFER,r.__webglVertexBuffer),v(a.position),It.vertexAttribPointer(a.position,3,It.FLOAT,!1,0,0)):o.morphTargetBase&&y(n,r,o),h){if(r.__webglCustomAttributesList)for(var d=0,u=r.__webglCustomAttributesList.length;u>d;d++){var f=r.__webglCustomAttributesList[d];a[f.buffer.belongsToAttribute]>=0&&(It.bindBuffer(It.ARRAY_BUFFER,f.buffer),v(a[f.buffer.belongsToAttribute]),It.vertexAttribPointer(a[f.buffer.belongsToAttribute],f.size,It.FLOAT,!1,0,0))}a.color>=0&&(o.geometry.colors.length>0||o.geometry.faces.length>0?(It.bindBuffer(It.ARRAY_BUFFER,r.__webglColorBuffer),v(a.color),It.vertexAttribPointer(a.color,3,It.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&It.vertexAttrib3fv(a.color,n.defaultAttributeValues.color)),a.normal>=0&&(It.bindBuffer(It.ARRAY_BUFFER,r.__webglNormalBuffer),v(a.normal),It.vertexAttribPointer(a.normal,3,It.FLOAT,!1,0,0)),a.tangent>=0&&(It.bindBuffer(It.ARRAY_BUFFER,r.__webglTangentBuffer),v(a.tangent),It.vertexAttribPointer(a.tangent,4,It.FLOAT,!1,0,0)),a.uv>=0&&(o.geometry.faceVertexUvs[0]?(It.bindBuffer(It.ARRAY_BUFFER,r.__webglUVBuffer),v(a.uv),It.vertexAttribPointer(a.uv,2,It.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&It.vertexAttrib2fv(a.uv,n.defaultAttributeValues.uv)),a.uv2>=0&&(o.geometry.faceVertexUvs[1]?(It.bindBuffer(It.ARRAY_BUFFER,r.__webglUV2Buffer),v(a.uv2),It.vertexAttribPointer(a.uv2,2,It.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&It.vertexAttrib2fv(a.uv2,n.defaultAttributeValues.uv2)),n.skinning&&a.skinIndex>=0&&a.skinWeight>=0&&(It.bindBuffer(It.ARRAY_BUFFER,r.__webglSkinIndicesBuffer),v(a.skinIndex),
It.vertexAttribPointer(a.skinIndex,4,It.FLOAT,!1,0,0),It.bindBuffer(It.ARRAY_BUFFER,r.__webglSkinWeightsBuffer),v(a.skinWeight),It.vertexAttribPointer(a.skinWeight,4,It.FLOAT,!1,0,0)),a.lineDistance>=0&&(It.bindBuffer(It.ARRAY_BUFFER,r.__webglLineDistanceBuffer),v(a.lineDistance),It.vertexAttribPointer(a.lineDistance,1,It.FLOAT,!1,0,0))}if(A(),o instanceof THREE.Mesh){var p=r.__typeArray===Uint32Array?It.UNSIGNED_INT:It.UNSIGNED_SHORT;n.wireframe?(nt(n.wireframeLinewidth),h&&It.bindBuffer(It.ELEMENT_ARRAY_BUFFER,r.__webglLineBuffer),It.drawElements(It.LINES,r.__webglLineCount,p,0)):(h&&It.bindBuffer(It.ELEMENT_ARRAY_BUFFER,r.__webglFaceBuffer),It.drawElements(It.TRIANGLES,r.__webglFaceCount,p,0)),Bt.info.render.calls++,Bt.info.render.vertices+=r.__webglFaceCount,Bt.info.render.faces+=r.__webglFaceCount/3}else if(o instanceof THREE.Line){var m=o.mode===THREE.LineStrip?It.LINE_STRIP:It.LINES;nt(n.linewidth),It.drawArrays(m,0,r.__webglLineCount),Bt.info.render.calls++}else o instanceof THREE.PointCloud&&(It.drawArrays(It.POINTS,0,r.__webglParticleCount),Bt.info.render.calls++,Bt.info.render.points+=r.__webglParticleCount)}},this.render=function(t,e,i,n){if(e instanceof THREE.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var r=t.fog;Ut=-1,jt=-1,Vt=null,ge=!0,t.autoUpdate===!0&&t.updateMatrixWorld(),void 0===e.parent&&e.updateMatrixWorld(),t.traverse(function(t){t instanceof THREE.SkinnedMesh&&t.skeleton.update()}),e.matrixWorldInverse.getInverse(e.matrixWorld),ue.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),de.setFromMatrix(ue),kt.length=0,Pt.length=0,Dt.length=0,Ot.length=0,Lt.length=0,x(t,t),Bt.sortObjects===!0&&(Pt.sort(b),Dt.sort(E)),Oe.render(t,e),Bt.info.render.calls=0,Bt.info.render.vertices=0,Bt.info.render.faces=0,Bt.info.render.points=0,this.setRenderTarget(i),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);for(var o=0,s=Ht.length;s>o;o++){var a=Ht[o],h=a.object;h.visible&&($(h,e),S(a))}if(t.overrideMaterial){var l=t.overrideMaterial;this.setBlending(l.blending,l.blendEquation,l.blendSrc,l.blendDst),this.setDepthTest(l.depthTest),this.setDepthWrite(l.depthWrite),rt(l.polygonOffset,l.polygonOffsetFactor,l.polygonOffsetUnits),_(Pt,e,kt,r,!0,l),_(Dt,e,kt,r,!0,l),T(Ht,"",e,kt,r,!1,l)}else{var l=null;this.setBlending(THREE.NoBlending),_(Pt,e,kt,r,!1,l),T(Ht,"opaque",e,kt,r,!1,l),_(Dt,e,kt,r,!0,l),T(Ht,"transparent",e,kt,r,!0,l)}Le.render(t,e),Ie.render(t,e,ae,he),i&&i.generateMipmaps&&i.minFilter!==THREE.NearestFilter&&i.minFilter!==THREE.LinearFilter&&dt(i),this.setDepthTest(!0),this.setDepthWrite(!0)},this.renderImmediateObject=function(t,e,i,n,r){var o=N(t,e,i,n,r);Ut=-1,Bt.setMaterialFaces(n),r.immediateRenderCallback?r.immediateRenderCallback(o,It,de):r.render(function(t){Bt.renderBufferImmediate(t,o,n)})};var qe={},Xe=0;this.setFaceCulling=function(t,e){t===THREE.CullFaceNone?It.disable(It.CULL_FACE):(e===THREE.FrontFaceDirectionCW?It.frontFace(It.CW):It.frontFace(It.CCW),t===THREE.CullFaceBack?It.cullFace(It.BACK):t===THREE.CullFaceFront?It.cullFace(It.FRONT):It.cullFace(It.FRONT_AND_BACK),It.enable(It.CULL_FACE))},this.setMaterialFaces=function(t){var e=t.side===THREE.DoubleSide,i=t.side===THREE.BackSide;Gt!==e&&(e?It.disable(It.CULL_FACE):It.enable(It.CULL_FACE),Gt=e),Yt!==i&&(i?It.frontFace(It.CW):It.frontFace(It.CCW),Yt=i)},this.setDepthTest=function(t){Kt!==t&&(t?It.enable(It.DEPTH_TEST):It.disable(It.DEPTH_TEST),Kt=t)},this.setDepthWrite=function(t){Jt!==t&&(It.depthMask(t),Jt=t)},this.setBlending=function(t,e,i,n){t!==qt&&(t===THREE.NoBlending?It.disable(It.BLEND):t===THREE.AdditiveBlending?(It.enable(It.BLEND),It.blendEquation(It.FUNC_ADD),It.blendFunc(It.SRC_ALPHA,It.ONE)):t===THREE.SubtractiveBlending?(It.enable(It.BLEND),It.blendEquation(It.FUNC_ADD),It.blendFunc(It.ZERO,It.ONE_MINUS_SRC_COLOR)):t===THREE.MultiplyBlending?(It.enable(It.BLEND),It.blendEquation(It.FUNC_ADD),It.blendFunc(It.ZERO,It.SRC_COLOR)):t===THREE.CustomBlending?It.enable(It.BLEND):(It.enable(It.BLEND),It.blendEquationSeparate(It.FUNC_ADD,It.FUNC_ADD),It.blendFuncSeparate(It.SRC_ALPHA,It.ONE_MINUS_SRC_ALPHA,It.ONE,It.ONE_MINUS_SRC_ALPHA)),qt=t),t===THREE.CustomBlending?(e!==Xt&&(It.blendEquation(ft(e)),Xt=e),i===Qt&&n===Zt||(It.blendFunc(ft(i),ft(n)),Qt=i,Zt=n)):(Xt=null,Qt=null,Zt=null)},this.uploadTexture=function(t){void 0===t.__webglInit&&(t.__webglInit=!0,t.addEventListener("dispose",Ne),t.__webglTexture=It.createTexture(),Bt.info.memory.textures++),It.bindTexture(It.TEXTURE_2D,t.__webglTexture),It.pixelStorei(It.UNPACK_FLIP_Y_WEBGL,t.flipY),It.pixelStorei(It.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),It.pixelStorei(It.UNPACK_ALIGNMENT,t.unpackAlignment),t.image=st(t.image,xe);var e=t.image,i=THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height),n=ft(t.format),r=ft(t.type);ot(It.TEXTURE_2D,t,i);var o,s=t.mipmaps;if(t instanceof THREE.DataTexture)if(s.length>0&&i){for(var a=0,h=s.length;h>a;a++)o=s[a],It.texImage2D(It.TEXTURE_2D,a,n,o.width,o.height,0,n,r,o.data);t.generateMipmaps=!1}else It.texImage2D(It.TEXTURE_2D,0,n,e.width,e.height,0,n,r,e.data);else if(t instanceof THREE.CompressedTexture)for(var a=0,h=s.length;h>a;a++)o=s[a],t.format!==THREE.RGBAFormat&&t.format!==THREE.RGBFormat?He().indexOf(n)>-1?It.compressedTexImage2D(It.TEXTURE_2D,a,n,o.width,o.height,0,o.data):console.warn("Attempt to load unsupported compressed texture format"):It.texImage2D(It.TEXTURE_2D,a,n,o.width,o.height,0,n,r,o.data);else if(s.length>0&&i){for(var a=0,h=s.length;h>a;a++)o=s[a],It.texImage2D(It.TEXTURE_2D,a,n,n,r,o);t.generateMipmaps=!1}else It.texImage2D(It.TEXTURE_2D,0,n,n,r,t.image);t.generateMipmaps&&i&&It.generateMipmap(It.TEXTURE_2D),t.needsUpdate=!1,t.onUpdate&&t.onUpdate()},this.setTexture=function(t,e){It.activeTexture(It.TEXTURE0+e),t.needsUpdate?Bt.uploadTexture(t):It.bindTexture(It.TEXTURE_2D,t.__webglTexture)},this.setRenderTarget=function(t){var e=t instanceof THREE.WebGLRenderTargetCube;if(t&&void 0===t.__webglFramebuffer){void 0===t.depthBuffer&&(t.depthBuffer=!0),void 0===t.stencilBuffer&&(t.stencilBuffer=!0),t.addEventListener("dispose",ze),t.__webglTexture=It.createTexture(),Bt.info.memory.textures++;var i=THREE.Math.isPowerOfTwo(t.width)&&THREE.Math.isPowerOfTwo(t.height),n=ft(t.format),r=ft(t.type);if(e){t.__webglFramebuffer=[],t.__webglRenderbuffer=[],It.bindTexture(It.TEXTURE_CUBE_MAP,t.__webglTexture),ot(It.TEXTURE_CUBE_MAP,t,i);for(var o=0;6>o;o++)t.__webglFramebuffer[o]=It.createFramebuffer(),t.__webglRenderbuffer[o]=It.createRenderbuffer(),It.texImage2D(It.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,n,t.width,t.height,0,n,r,null),lt(t.__webglFramebuffer[o],t,It.TEXTURE_CUBE_MAP_POSITIVE_X+o),ct(t.__webglRenderbuffer[o],t);i&&It.generateMipmap(It.TEXTURE_CUBE_MAP)}else t.__webglFramebuffer=It.createFramebuffer(),t.shareDepthFrom?t.__webglRenderbuffer=t.shareDepthFrom.__webglRenderbuffer:t.__webglRenderbuffer=It.createRenderbuffer(),It.bindTexture(It.TEXTURE_2D,t.__webglTexture),ot(It.TEXTURE_2D,t,i),It.texImage2D(It.TEXTURE_2D,0,n,t.width,t.height,0,n,r,null),lt(t.__webglFramebuffer,t,It.TEXTURE_2D),t.shareDepthFrom?t.depthBuffer&&!t.stencilBuffer?It.framebufferRenderbuffer(It.FRAMEBUFFER,It.DEPTH_ATTACHMENT,It.RENDERBUFFER,t.__webglRenderbuffer):t.depthBuffer&&t.stencilBuffer&&It.framebufferRenderbuffer(It.FRAMEBUFFER,It.DEPTH_STENCIL_ATTACHMENT,It.RENDERBUFFER,t.__webglRenderbuffer):ct(t.__webglRenderbuffer,t),i&&It.generateMipmap(It.TEXTURE_2D);e?It.bindTexture(It.TEXTURE_CUBE_MAP,null):It.bindTexture(It.TEXTURE_2D,null),It.bindRenderbuffer(It.RENDERBUFFER,null),It.bindFramebuffer(It.FRAMEBUFFER,null)}var s,a,h,l,c;t?(s=e?t.__webglFramebuffer[t.activeCubeFace]:t.__webglFramebuffer,a=t.width,h=t.height,l=0,c=0):(s=null,a=oe,h=se,l=ne,c=re),s!==zt&&(It.bindFramebuffer(It.FRAMEBUFFER,s),It.viewport(l,c,a,h),zt=s),ae=a,he=h},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},THREE.WebGLRenderTarget=function(t,e,i){this.width=t,this.height=e,i=i||{},this.wrapS=void 0!==i.wrapS?i.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==i.wrapT?i.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==i.magFilter?i.magFilter:THREE.LinearFilter,this.minFilter=void 0!==i.minFilter?i.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==i.format?i.format:THREE.RGBAFormat,this.type=void 0!==i.type?i.type:THREE.UnsignedByteType,this.depthBuffer=void 0!==i.depthBuffer?i.depthBuffer:!0,this.stencilBuffer=void 0!==i.stencilBuffer?i.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(t,e){this.width=t,this.height=e},clone:function(){var t=new THREE.WebGLRenderTarget(this.width,this.height);return t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.magFilter=this.magFilter,t.minFilter=this.minFilter,t.anisotropy=this.anisotropy,t.offset.copy(this.offset),t.repeat.copy(this.repeat),t.format=this.format,t.type=this.type,t.depthBuffer=this.depthBuffer,t.stencilBuffer=this.stencilBuffer,t.generateMipmaps=this.generateMipmaps,t.shareDepthFrom=this.shareDepthFrom,t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(t,e,i){THREE.WebGLRenderTarget.call(this,t,e,i),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.WebGLExtensions=function(t){var e={};this.get=function(i){if(void 0!==e[i])return e[i];var n;switch(i){case"OES_texture_float":n=t.getExtension("OES_texture_float");break;case"OES_texture_float_linear":n=t.getExtension("OES_texture_float_linear");break;case"OES_standard_derivatives":n=t.getExtension("OES_standard_derivatives");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"OES_element_index_uint":n=t.getExtension("OES_element_index_uint");break;case"EXT_blend_minmax":n=t.getExtension("EXT_blend_minmax");break;case"EXT_frag_depth":n=t.getExtension("EXT_frag_depth")}return null===n&&console.log("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=n,n}},THREE.WebGLProgram=function(){var t=0,e=function(t){var e,i,n=[];for(var r in t)e=t[r],e!==!1&&(i="#define "+r+" "+e,n.push(i));return n.join("\n")},i=function(t,e,i){for(var n={},r=0,o=i.length;o>r;r++){var s=i[r];n[s]=t.getUniformLocation(e,s)}return n},n=function(t,e,i){for(var n={},r=0,o=i.length;o>r;r++){var s=i[r];n[s]=t.getAttribLocation(e,s)}return n};return function(r,o,s,a){var h=r,l=h.context,c=s.defines,d=s.__webglShader.uniforms,u=s.attributes,f=s.__webglShader.vertexShader,p=s.__webglShader.fragmentShader,m=s.index0AttributeName;void 0===m&&a.morphTargets===!0&&(m="position");var g="SHADOWMAP_TYPE_BASIC";a.shadowMapType===THREE.PCFShadowMap?g="SHADOWMAP_TYPE_PCF":a.shadowMapType===THREE.PCFSoftShadowMap&&(g="SHADOWMAP_TYPE_PCF_SOFT");var v,A,y=e(c),b=l.createProgram();s instanceof THREE.RawShaderMaterial?(v="",A=""):(v=["precision "+a.precision+" float;","precision "+a.precision+" int;",y,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"",h.gammaInput?"#define GAMMA_INPUT":"",h.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+a.maxDirLights,"#define MAX_POINT_LIGHTS "+a.maxPointLights,"#define MAX_SPOT_LIGHTS "+a.maxSpotLights,"#define MAX_HEMI_LIGHTS "+a.maxHemiLights,"#define MAX_SHADOWS "+a.maxShadows,"#define MAX_BONES "+a.maxBones,a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.lightMap?"#define USE_LIGHTMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals?"#define USE_MORPHNORMALS":"",a.wrapAround?"#define WRAP_AROUND":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+g:"",a.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",a.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",""].join("\n"),A=["precision "+a.precision+" float;","precision "+a.precision+" int;",a.bumpMap||a.normalMap?"#extension GL_OES_standard_derivatives : enable":"",y,"#define MAX_DIR_LIGHTS "+a.maxDirLights,"#define MAX_POINT_LIGHTS "+a.maxPointLights,"#define MAX_SPOT_LIGHTS "+a.maxSpotLights,"#define MAX_HEMI_LIGHTS "+a.maxHemiLights,"#define MAX_SHADOWS "+a.maxShadows,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"",h.gammaInput?"#define GAMMA_INPUT":"",h.gammaOutput?"#define GAMMA_OUTPUT":"",a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.lightMap?"#define USE_LIGHTMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.metal?"#define METAL":"",a.wrapAround?"#define WRAP_AROUND":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+g:"",a.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",a.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"));var E=new THREE.WebGLShader(l,l.VERTEX_SHADER,v+f),w=new THREE.WebGLShader(l,l.FRAGMENT_SHADER,A+p);l.attachShader(b,E),l.attachShader(b,w),void 0!==m&&l.bindAttribLocation(b,0,m),l.linkProgram(b),l.getProgramParameter(b,l.LINK_STATUS)===!1&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",l.getProgramParameter(b,l.VALIDATE_STATUS)),console.error("gl.getError()",l.getError())),""!==l.getProgramInfoLog(b)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",l.getProgramInfoLog(b)),l.deleteShader(E),l.deleteShader(w);var x=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences","bindMatrix","bindMatrixInverse"];a.useVertexTexture?(x.push("boneTexture"),x.push("boneTextureWidth"),x.push("boneTextureHeight")):x.push("boneGlobalMatrices"),a.logarithmicDepthBuffer&&x.push("logDepthBufFC");for(var _ in d)x.push(_);this.uniforms=i(l,b,x),x=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(var T=0;T<a.maxMorphTargets;T++)x.push("morphTarget"+T);for(var T=0;T<a.maxMorphNormals;T++)x.push("morphNormal"+T);for(var S in u)x.push(S);return this.attributes=n(l,b,x),this.attributesKeys=Object.keys(this.attributes),this.id=t++,this.code=o,this.usedTimes=1,this.program=b,this.vertexShader=E,this.fragmentShader=w,this}}(),THREE.WebGLShader=function(){var t=function(t){for(var e=t.split("\n"),i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join("\n")};return function(e,i,n){var r=e.createShader(i);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e.getShaderInfoLog(r)),console.warn(t(n))),r}}(),THREE.LensFlarePlugin=function(t,e){function i(e){var i=d.createProgram(),n=d.createShader(d.FRAGMENT_SHADER),r=d.createShader(d.VERTEX_SHADER),o="precision "+t.getPrecision()+" float;\n";return d.shaderSource(n,o+e.fragmentShader),d.shaderSource(r,o+e.vertexShader),d.compileShader(n),d.compileShader(r),d.attachShader(i,n),d.attachShader(i,r),d.linkProgram(i),i}var n,r,o,s,a,h,l,c,d=t.context,u=function(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);n=d.createBuffer(),r=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,n),d.bufferData(d.ARRAY_BUFFER,t,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r),d.bufferData(d.ELEMENT_ARRAY_BUFFER,e,d.STATIC_DRAW),l=d.createTexture(),c=d.createTexture(),d.bindTexture(d.TEXTURE_2D,l),d.texImage2D(d.TEXTURE_2D,0,d.RGB,16,16,0,d.RGB,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.bindTexture(d.TEXTURE_2D,c),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,16,16,0,d.RGBA,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),h=d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;var u;u=h?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},o=i(u),s={vertex:d.getAttribLocation(o,"position"),uv:d.getAttribLocation(o,"uv")},a={renderType:d.getUniformLocation(o,"renderType"),map:d.getUniformLocation(o,"map"),occlusionMap:d.getUniformLocation(o,"occlusionMap"),opacity:d.getUniformLocation(o,"opacity"),color:d.getUniformLocation(o,"color"),scale:d.getUniformLocation(o,"scale"),rotation:d.getUniformLocation(o,"rotation"),screenPosition:d.getUniformLocation(o,"screenPosition")}};this.render=function(i,f,p,m){if(0!==e.length){var g=new THREE.Vector3,v=m/p,A=.5*p,y=.5*m,b=16/m,E=new THREE.Vector2(b*v,b),w=new THREE.Vector3(1,1,0),x=new THREE.Vector2(1,1);void 0===o&&u(),d.useProgram(o),d.enableVertexAttribArray(s.vertex),d.enableVertexAttribArray(s.uv),d.uniform1i(a.occlusionMap,0),d.uniform1i(a.map,1),d.bindBuffer(d.ARRAY_BUFFER,n),d.vertexAttribPointer(s.vertex,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(s.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r),d.disable(d.CULL_FACE),d.depthMask(!1);for(var _=0,T=e.length;T>_;_++){b=16/m,E.set(b*v,b);var S=e[_];if(g.set(S.matrixWorld.elements[12],S.matrixWorld.elements[13],S.matrixWorld.elements[14]),g.applyMatrix4(f.matrixWorldInverse),g.applyProjection(f.projectionMatrix),w.copy(g),x.x=w.x*A+A,x.y=w.y*y+y,h||x.x>0&&x.x<p&&x.y>0&&x.y<m){d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,l),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGB,x.x-8,x.y-8,16,16,0),d.uniform1i(a.renderType,0),d.uniform2f(a.scale,E.x,E.y),d.uniform3f(a.screenPosition,w.x,w.y,w.z),d.disable(d.BLEND),d.enable(d.DEPTH_TEST),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,c),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,x.x-8,x.y-8,16,16,0),d.uniform1i(a.renderType,1),d.disable(d.DEPTH_TEST),d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,l),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),S.positionScreen.copy(w),S.customUpdateCallback?S.customUpdateCallback(S):S.updateLensFlares(),d.uniform1i(a.renderType,2),d.enable(d.BLEND);for(var R=0,C=S.lensFlares.length;C>R;R++){var k=S.lensFlares[R];k.opacity>.001&&k.scale>.001&&(w.x=k.x,w.y=k.y,w.z=k.z,b=k.size*k.scale/m,E.x=b*v,E.y=b,d.uniform3f(a.screenPosition,w.x,w.y,w.z),d.uniform2f(a.scale,E.x,E.y),d.uniform1f(a.rotation,k.rotation),d.uniform1f(a.opacity,k.opacity),d.uniform3f(a.color,k.color.r,k.color.g,k.color.b),t.setBlending(k.blending,k.blendEquation,k.blendSrc,k.blendDst),t.setTexture(k.texture,1),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0))}}}d.enable(d.CULL_FACE),d.enable(d.DEPTH_TEST),d.depthMask(!0),t.resetGLState()}}},THREE.ShadowMapPlugin=function(t,e,i,n){function r(t,e,n){if(e.visible){var o=i[e.id];if(o&&e.castShadow&&(e.frustumCulled===!1||p.intersectsObject(e)===!0))for(var s=0,a=o.length;a>s;s++){var h=o[s];e._modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),y.push(h)}for(var s=0,a=e.children.length;a>s;s++)r(t,e.children[s],n)}}function o(t,e){var i=new THREE.DirectionalLight;i.isVirtual=!0,i.onlyShadow=!0,i.castShadow=!0,i.shadowCameraNear=t.shadowCameraNear,i.shadowCameraFar=t.shadowCameraFar,i.shadowCameraLeft=t.shadowCameraLeft,i.shadowCameraRight=t.shadowCameraRight,i.shadowCameraBottom=t.shadowCameraBottom,i.shadowCameraTop=t.shadowCameraTop,i.shadowCameraVisible=t.shadowCameraVisible,i.shadowDarkness=t.shadowDarkness,i.shadowBias=t.shadowCascadeBias[e],i.shadowMapWidth=t.shadowCascadeWidth[e],i.shadowMapHeight=t.shadowCascadeHeight[e],i.pointsWorld=[],i.pointsFrustum=[];for(var n=i.pointsWorld,r=i.pointsFrustum,o=0;8>o;o++)n[o]=new THREE.Vector3,r[o]=new THREE.Vector3;var s=t.shadowCascadeNearZ[e],a=t.shadowCascadeFarZ[e];return r[0].set(-1,-1,s),r[1].set(1,-1,s),r[2].set(-1,1,s),r[3].set(1,1,s),r[4].set(-1,-1,a),r[5].set(1,-1,a),r[6].set(-1,1,a),r[7].set(1,1,a),i}function s(t,e){var i=t.shadowCascadeArray[e];i.position.copy(t.position),i.target.position.copy(t.target.position),i.lookAt(i.target),i.shadowCameraVisible=t.shadowCameraVisible,i.shadowDarkness=t.shadowDarkness,i.shadowBias=t.shadowCascadeBias[e];var n=t.shadowCascadeNearZ[e],r=t.shadowCascadeFarZ[e],o=i.pointsFrustum;o[0].z=n,o[1].z=n,o[2].z=n,o[3].z=n,o[4].z=r,o[5].z=r,o[6].z=r,o[7].z=r}function a(t,e){var i=e.shadowCamera,n=e.pointsFrustum,r=e.pointsWorld;g.set(1/0,1/0,1/0),v.set(-(1/0),-(1/0),-(1/0));for(var o=0;8>o;o++){var s=r[o];s.copy(n[o]),s.unproject(t),s.applyMatrix4(i.matrixWorldInverse),s.x<g.x&&(g.x=s.x),s.x>v.x&&(v.x=s.x),s.y<g.y&&(g.y=s.y),s.y>v.y&&(v.y=s.y),s.z<g.z&&(g.z=s.z),s.z>v.z&&(v.z=s.z)}i.left=g.x,i.right=v.x,i.top=v.y,i.bottom=g.y,i.updateProjectionMatrix()}function h(t){return t.material instanceof THREE.MeshFaceMaterial?t.material.materials[0]:t.material}var l,c,d,u,f=t.context,p=new THREE.Frustum,m=new THREE.Matrix4,g=new THREE.Vector3,v=new THREE.Vector3,A=new THREE.Vector3,y=[],b=THREE.ShaderLib.depthRGBA,E=THREE.UniformsUtils.clone(b.uniforms);l=new THREE.ShaderMaterial({uniforms:E,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader}),c=new THREE.ShaderMaterial({uniforms:E,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,morphTargets:!0}),d=new THREE.ShaderMaterial({uniforms:E,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,skinning:!0}),u=new THREE.ShaderMaterial({uniforms:E,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,morphTargets:!0,skinning:!0}),l._shadowPass=!0,c._shadowPass=!0,d._shadowPass=!0,u._shadowPass=!0,this.render=function(i,g){if(t.shadowMapEnabled!==!1){var v,b,E,w,x,_,T,S,R,C,k,M,H,P=[],D=0,O=null;for(f.clearColor(1,1,1,1),f.disable(f.BLEND),f.enable(f.CULL_FACE),f.frontFace(f.CCW),t.shadowMapCullFace===THREE.CullFaceFront?f.cullFace(f.FRONT):f.cullFace(f.BACK),t.setDepthTest(!0),v=0,b=e.length;b>v;v++)if(H=e[v],H.castShadow)if(H instanceof THREE.DirectionalLight&&H.shadowCascade)for(x=0;x<H.shadowCascadeCount;x++){var L;if(H.shadowCascadeArray[x])L=H.shadowCascadeArray[x];else{L=o(H,x),L.originalCamera=g;var I=new THREE.Gyroscope;I.position.copy(H.shadowCascadeOffset),I.add(L),I.add(L.target),g.add(I),H.shadowCascadeArray[x]=L,console.log("Created virtualLight",L)}s(H,x),P[D]=L,D++}else P[D]=H,D++;for(v=0,b=P.length;b>v;v++){if(H=P[v],!H.shadowMap){var B=THREE.LinearFilter;t.shadowMapType===THREE.PCFSoftShadowMap&&(B=THREE.NearestFilter);var F={minFilter:B,magFilter:B,format:THREE.RGBAFormat};H.shadowMap=new THREE.WebGLRenderTarget(H.shadowMapWidth,H.shadowMapHeight,F),H.shadowMapSize=new THREE.Vector2(H.shadowMapWidth,H.shadowMapHeight),H.shadowMatrix=new THREE.Matrix4}if(!H.shadowCamera){if(H instanceof THREE.SpotLight)H.shadowCamera=new THREE.PerspectiveCamera(H.shadowCameraFov,H.shadowMapWidth/H.shadowMapHeight,H.shadowCameraNear,H.shadowCameraFar);else{if(!(H instanceof THREE.DirectionalLight)){console.error("Unsupported light type for shadow");continue}H.shadowCamera=new THREE.OrthographicCamera(H.shadowCameraLeft,H.shadowCameraRight,H.shadowCameraTop,H.shadowCameraBottom,H.shadowCameraNear,H.shadowCameraFar)}i.add(H.shadowCamera),i.autoUpdate===!0&&i.updateMatrixWorld()}H.shadowCameraVisible&&!H.cameraHelper&&(H.cameraHelper=new THREE.CameraHelper(H.shadowCamera),i.add(H.cameraHelper)),H.isVirtual&&L.originalCamera==g&&a(g,H),_=H.shadowMap,T=H.shadowMatrix,S=H.shadowCamera,S.position.setFromMatrixPosition(H.matrixWorld),A.setFromMatrixPosition(H.target.matrixWorld),S.lookAt(A),S.updateMatrixWorld(),S.matrixWorldInverse.getInverse(S.matrixWorld),H.cameraHelper&&(H.cameraHelper.visible=H.shadowCameraVisible),H.shadowCameraVisible&&H.cameraHelper.update(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(S.projectionMatrix),T.multiply(S.matrixWorldInverse),m.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse),p.setFromMatrix(m),t.setRenderTarget(_),t.clear(),y.length=0,r(i,i,S);var N,z,j;for(E=0,w=y.length;w>E;E++)k=y[E],M=k.object,R=k.buffer,N=h(M),z=void 0!==M.geometry.morphTargets&&M.geometry.morphTargets.length>0&&N.morphTargets,j=M instanceof THREE.SkinnedMesh&&N.skinning,C=M.customDepthMaterial?M.customDepthMaterial:j?z?u:d:z?c:l,t.setMaterialFaces(N),R instanceof THREE.BufferGeometry?t.renderBufferDirect(S,e,O,C,R,M):t.renderBuffer(S,e,O,C,R,M);for(E=0,w=n.length;w>E;E++)k=n[E],M=k.object,M.visible&&M.castShadow&&(M._modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,M.matrixWorld),t.renderImmediateObject(S,e,O,l,M))}var U=t.getClearColor(),V=t.getClearAlpha();f.clearColor(U.r,U.g,U.b,V),f.enable(f.BLEND),t.shadowMapCullFace===THREE.CullFaceFront&&f.cullFace(f.BACK),t.resetGLState()}}},THREE.SpritePlugin=function(t,e){function i(){var e=c.createProgram(),i=c.createShader(c.VERTEX_SHADER),n=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(i,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),c.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),
c.compileShader(i),c.compileShader(n),c.attachShader(e,i),c.attachShader(e,n),c.linkProgram(e),e}function n(t,e){return t.z!==e.z?e.z-t.z:e.id-t.id}var r,o,s,a,h,l,c=t.context,d=function(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);r=c.createBuffer(),o=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,r),c.bufferData(c.ARRAY_BUFFER,t,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),c.bufferData(c.ELEMENT_ARRAY_BUFFER,e,c.STATIC_DRAW),s=i(),a={position:c.getAttribLocation(s,"position"),uv:c.getAttribLocation(s,"uv")},h={uvOffset:c.getUniformLocation(s,"uvOffset"),uvScale:c.getUniformLocation(s,"uvScale"),rotation:c.getUniformLocation(s,"rotation"),scale:c.getUniformLocation(s,"scale"),color:c.getUniformLocation(s,"color"),map:c.getUniformLocation(s,"map"),opacity:c.getUniformLocation(s,"opacity"),modelViewMatrix:c.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:c.getUniformLocation(s,"projectionMatrix"),fogType:c.getUniformLocation(s,"fogType"),fogDensity:c.getUniformLocation(s,"fogDensity"),fogNear:c.getUniformLocation(s,"fogNear"),fogFar:c.getUniformLocation(s,"fogFar"),fogColor:c.getUniformLocation(s,"fogColor"),alphaTest:c.getUniformLocation(s,"alphaTest")};var n=document.createElement("canvas");n.width=8,n.height=8;var d=n.getContext("2d");d.fillStyle="white",d.fillRect(0,0,8,8),l=new THREE.Texture(n),l.needsUpdate=!0};this.render=function(i,u){if(0!==e.length){void 0===s&&d(),c.useProgram(s),c.enableVertexAttribArray(a.position),c.enableVertexAttribArray(a.uv),c.disable(c.CULL_FACE),c.enable(c.BLEND),c.bindBuffer(c.ARRAY_BUFFER,r),c.vertexAttribPointer(a.position,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(a.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),c.uniformMatrix4fv(h.projectionMatrix,!1,u.projectionMatrix.elements),c.activeTexture(c.TEXTURE0),c.uniform1i(h.map,0);var f=0,p=0,m=i.fog;m?(c.uniform3f(h.fogColor,m.color.r,m.color.g,m.color.b),m instanceof THREE.Fog?(c.uniform1f(h.fogNear,m.near),c.uniform1f(h.fogFar,m.far),c.uniform1i(h.fogType,1),f=1,p=1):m instanceof THREE.FogExp2&&(c.uniform1f(h.fogDensity,m.density),c.uniform1i(h.fogType,2),f=2,p=2)):(c.uniform1i(h.fogType,0),f=0,p=0);for(var g=0,v=e.length;v>g;g++){var A=e[g];A._modelViewMatrix.multiplyMatrices(u.matrixWorldInverse,A.matrixWorld),null===A.renderDepth?A.z=-A._modelViewMatrix.elements[14]:A.z=A.renderDepth}e.sort(n);for(var y=[],g=0,v=e.length;v>g;g++){var A=e[g],b=A.material;c.uniform1f(h.alphaTest,b.alphaTest),c.uniformMatrix4fv(h.modelViewMatrix,!1,A._modelViewMatrix.elements),y[0]=A.scale.x,y[1]=A.scale.y;var E=0;i.fog&&b.fog&&(E=p),f!==E&&(c.uniform1i(h.fogType,E),f=E),null!==b.map?(c.uniform2f(h.uvOffset,b.map.offset.x,b.map.offset.y),c.uniform2f(h.uvScale,b.map.repeat.x,b.map.repeat.y)):(c.uniform2f(h.uvOffset,0,0),c.uniform2f(h.uvScale,1,1)),c.uniform1f(h.opacity,b.opacity),c.uniform3f(h.color,b.color.r,b.color.g,b.color.b),c.uniform1f(h.rotation,b.rotation),c.uniform2fv(h.scale,y),t.setBlending(b.blending,b.blendEquation,b.blendSrc,b.blendDst),t.setDepthTest(b.depthTest),t.setDepthWrite(b.depthWrite),b.map&&b.map.image&&b.map.image.width?t.setTexture(b.map,0):t.setTexture(l,0),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)}c.enable(c.CULL_FACE),t.resetGLState()}}},THREE.GeometryUtils={merge:function(t,e,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;e instanceof THREE.Mesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,i,n){var r=new THREE.ImageLoader;r.crossOrigin=this.crossOrigin;var o=new THREE.Texture(void 0,e);return r.load(t,function(t){o.image=t,o.needsUpdate=!0,i&&i(o)},void 0,function(t){n&&n(t)}),o.sourceFile=t,o},loadTextureCube:function(t,e,i,n){var r=[],o=new THREE.ImageLoader;o.crossOrigin=this.crossOrigin;var s=new THREE.CubeTexture(r,e);s.flipY=!1;for(var a=0,h=function(e){o.load(t[e],function(t){s.images[e]=t,a+=1,6===a&&(s.needsUpdate=!0,i&&i(s))})},l=0,c=t.length;c>l;++l)h(l);return s},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(t,e){var i=function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},n=function(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]},r=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return[t[0]/e,t[1]/e,t[2]/e]};e=1|e;var o=t.width,s=t.height,a=document.createElement("canvas");a.width=o,a.height=s;var h=a.getContext("2d");h.drawImage(t,0,0);for(var l=h.getImageData(0,0,o,s).data,c=h.createImageData(o,s),d=c.data,u=0;o>u;u++)for(var f=0;s>f;f++){var p=0>f-1?0:f-1,m=f+1>s-1?s-1:f+1,g=0>u-1?0:u-1,v=u+1>o-1?o-1:u+1,A=[],y=[0,0,l[4*(f*o+u)]/255*e];A.push([-1,0,l[4*(f*o+g)]/255*e]),A.push([-1,-1,l[4*(p*o+g)]/255*e]),A.push([0,-1,l[4*(p*o+u)]/255*e]),A.push([1,-1,l[4*(p*o+v)]/255*e]),A.push([1,0,l[4*(f*o+v)]/255*e]),A.push([1,1,l[4*(m*o+v)]/255*e]),A.push([0,1,l[4*(m*o+u)]/255*e]),A.push([-1,1,l[4*(m*o+g)]/255*e]);for(var b=[],E=A.length,w=0;E>w;w++){var x=A[w],_=A[(w+1)%E];x=n(x,y),_=n(_,y),b.push(r(i(x,_)))}for(var T=[0,0,0],w=0;w<b.length;w++)T[0]+=b[w][0],T[1]+=b[w][1],T[2]+=b[w][2];T[0]/=b.length,T[1]/=b.length,T[2]/=b.length;var S=4*(f*o+u);d[S]=(T[0]+1)/2*255|0,d[S+1]=(T[1]+1)/2*255|0,d[S+2]=255*T[2]|0,d[S+3]=255}return h.putImageData(c,0,0),a},generateDataTexture:function(t,e,i){for(var n=t*e,r=new Uint8Array(3*n),o=Math.floor(255*i.r),s=Math.floor(255*i.g),a=Math.floor(255*i.b),h=0;n>h;h++)r[3*h]=o,r[3*h+1]=s,r[3*h+2]=a;var l=new THREE.DataTexture(r,t,e,THREE.RGBFormat);return l.needsUpdate=!0,l}},THREE.SceneUtils={createMultiMaterialObject:function(t,e){for(var i=new THREE.Object3D,n=0,r=e.length;r>n;n++)i.add(new THREE.Mesh(t,e[n]));return i},detach:function(t,e,i){t.applyMatrix(e.matrixWorld),e.remove(t),i.add(t)},attach:function(t,e,i){var n=new THREE.Matrix4;n.getInverse(i.matrixWorld),t.applyMatrix(n),e.remove(t),i.add(t)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(t){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(t){var e=t.familyName.toLowerCase(),i=this;i.faces[e]=i.faces[e]||{},i.faces[e][t.cssFontWeight]=i.faces[e][t.cssFontWeight]||{},i.faces[e][t.cssFontWeight][t.cssFontStyle]=t;i.faces[e][t.cssFontWeight][t.cssFontStyle]=t;return t},drawText:function(t){var e,i=this.getFace(),n=this.size/i.resolution,r=0,o=String(t).split(""),s=o.length,a=[];for(e=0;s>e;e++){var h=new THREE.Path,l=this.extractGlyphPoints(o[e],i,n,r,h);r+=l.offset,a.push(l.path)}var c=r/2;return{paths:a,offset:c}},extractGlyphPoints:function(t,e,i,n,r){var o,s,a,h,l,c,d,u,f,p,m,g,v,A,y,b,E,w,x,_=[],T=e.glyphs[t]||e.glyphs["?"];if(T){if(T.o)for(h=T._cachedOutline||(T._cachedOutline=T.o.split(" ")),c=h.length,d=i,u=i,o=0;c>o;)switch(l=h[o++]){case"m":f=h[o++]*d+n,p=h[o++]*u,r.moveTo(f,p);break;case"l":f=h[o++]*d+n,p=h[o++]*u,r.lineTo(f,p);break;case"q":if(m=h[o++]*d+n,g=h[o++]*u,y=h[o++]*d+n,b=h[o++]*u,r.quadraticCurveTo(y,b,m,g),x=_[_.length-1])for(v=x.x,A=x.y,s=1,a=this.divisions;a>=s;s++){var S=s/a;THREE.Shape.Utils.b2(S,v,y,m),THREE.Shape.Utils.b2(S,A,b,g)}break;case"b":if(m=h[o++]*d+n,g=h[o++]*u,y=h[o++]*d+n,b=h[o++]*u,E=h[o++]*d+n,w=h[o++]*u,r.bezierCurveTo(y,b,E,w,m,g),x=_[_.length-1])for(v=x.x,A=x.y,s=1,a=this.divisions;a>=s;s++){var S=s/a;THREE.Shape.Utils.b3(S,v,y,E,m),THREE.Shape.Utils.b3(S,A,b,w,g)}}return{offset:T.ha*i,path:r}}}},THREE.FontUtils.generateShapes=function(t,e){e=e||{};var i=void 0!==e.size?e.size:100,n=void 0!==e.curveSegments?e.curveSegments:4,r=void 0!==e.font?e.font:"helvetiker",o=void 0!==e.weight?e.weight:"normal",s=void 0!==e.style?e.style:"normal";THREE.FontUtils.size=i,THREE.FontUtils.divisions=n,THREE.FontUtils.face=r,THREE.FontUtils.weight=o,THREE.FontUtils.style=s;for(var a=THREE.FontUtils.drawText(t),h=a.paths,l=[],c=0,d=h.length;d>c;c++)Array.prototype.push.apply(l,h[c].toShapes());return l},function(t){var e=1e-10,i=function(t,e){var i=t.length;if(3>i)return null;var o,s,a,h=[],l=[],c=[];if(n(t)>0)for(s=0;i>s;s++)l[s]=s;else for(s=0;i>s;s++)l[s]=i-1-s;var d=i,u=2*d;for(s=d-1;d>2;){if(u--<=0)return console.log("Warning, unable to triangulate polygon!"),e?c:h;if(o=s,o>=d&&(o=0),s=o+1,s>=d&&(s=0),a=s+1,a>=d&&(a=0),r(t,o,s,a,d,l)){var f,p,m,g,v;for(f=l[o],p=l[s],m=l[a],h.push([t[f],t[p],t[m]]),c.push([l[o],l[s],l[a]]),g=s,v=s+1;d>v;g++,v++)l[g]=l[v];d--,u=2*d}}return e?c:h},n=function(t){for(var e=t.length,i=0,n=e-1,r=0;e>r;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},r=function(t,i,n,r,o,s){var a,h,l,c,d,u,f,p,m;if(h=t[s[i]].x,l=t[s[i]].y,c=t[s[n]].x,d=t[s[n]].y,u=t[s[r]].x,f=t[s[r]].y,e>(c-h)*(f-l)-(d-l)*(u-h))return!1;var g,v,A,y,b,E,w,x,_,T,S,R,C,k,M;for(g=u-c,v=f-d,A=h-u,y=l-f,b=c-h,E=d-l,a=0;o>a;a++)if(p=t[s[a]].x,m=t[s[a]].y,!(p===h&&m===l||p===c&&m===d||p===u&&m===f)&&(w=p-h,x=m-l,_=p-c,T=m-d,S=p-u,R=m-f,M=g*T-v*_,C=b*x-E*w,k=A*R-y*S,M>=-e&&k>=-e&&C>=-e))return!1;return!0};return t.Triangulate=i,t.Triangulate.area=n,t}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Audio=function(t){THREE.Object3D.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},THREE.Audio.prototype=Object.create(THREE.Object3D.prototype),THREE.Audio.prototype.load=function(t){var e=this,i=new XMLHttpRequest;return i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(t){e.context.decodeAudioData(this.response,function(t){e.source.buffer=t,e.source.connect(e.panner),e.source.start(0)})},i.send(),this},THREE.Audio.prototype.setLoop=function(t){this.source.loop=t},THREE.Audio.prototype.setRefDistance=function(t){this.panner.refDistance=t},THREE.Audio.prototype.setRolloffFactor=function(t){this.panner.rolloffFactor=t},THREE.Audio.prototype.updateMatrixWorld=function(){var t=new THREE.Vector3;return function(e){THREE.Object3D.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}(),THREE.AudioListener=function(){THREE.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype),THREE.AudioListener.prototype.updateMatrixWorld=function(){var t=new THREE.Vector3,e=new THREE.Quaternion,i=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3,o=new THREE.Vector3;return function(s){THREE.Object3D.prototype.updateMatrixWorld.call(this,s);var a=this.context.listener;this.matrixWorld.decompose(t,e,i),n.set(0,0,-1).applyQuaternion(e),r.subVectors(t,o),a.setPosition(t.x,t.y,t.z),a.setOrientation(n.x,n.y,n.z,this.up.x,this.up.y,this.up.z),a.setVelocity(r.x,r.y,r.z),o.copy(t)}}(),THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(t){return console.log("Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},THREE.Curve.prototype.getPoints=function(t){t||(t=5);var e,i=[];for(e=0;t>=e;e++)i.push(this.getPoint(e/t));return i},THREE.Curve.prototype.getSpacedPoints=function(t){t||(t=5);var e,i=[];for(e=0;t>=e;e++)i.push(this.getPointAt(e/t));return i},THREE.Curve.prototype.getLength=function(){var t=this.getLengths();return t[t.length-1]},THREE.Curve.prototype.getLengths=function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],r=this.getPoint(0),o=0;for(n.push(0),i=1;t>=i;i++)e=this.getPoint(i/t),o+=e.distanceTo(r),n.push(o),r=e;return this.cacheArcLengths=n,n},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(t,e){var i,n=this.getLengths(),r=0,o=n.length;i=e?e:t*n[o-1];for(var s,a=0,h=o-1;h>=a;)if(r=Math.floor(a+(h-a)/2),s=n[r]-i,0>s)a=r+1;else{if(!(s>0)){h=r;break}h=r-1}if(r=h,n[r]==i){var l=r/(o-1);return l}var c=n[r],d=n[r+1],u=d-c,f=(i-c)/u,l=(r+f)/(o-1);return l},THREE.Curve.prototype.getTangent=function(t){var e=1e-4,i=t-e,n=t+e;0>i&&(i=0),n>1&&(n=1);var r=this.getPoint(i),o=this.getPoint(n),s=o.clone().sub(r);return s.normalize()},THREE.Curve.prototype.getTangentAt=function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},THREE.Curve.Utils={tangentQuadraticBezier:function(t,e,i,n){return 2*(1-t)*(i-e)+2*t*(n-i)},tangentCubicBezier:function(t,e,i,n,r){return-3*e*(1-t)*(1-t)+3*i*(1-t)*(1-t)-6*t*i*(1-t)+6*t*n*(1-t)-3*t*t*n+3*t*t*r},tangentSpline:function(t,e,i,n,r){var o=6*t*t-6*t,s=3*t*t-4*t+1,a=-6*t*t+6*t,h=3*t*t-2*t;return o+s+a+h},interpolate:function(t,e,i,n,r){var o=.5*(i-t),s=.5*(n-e),a=r*r,h=r*a;return(2*e-2*i+o+s)*h+(-3*e+3*i-2*o-s)*a+o*r+e}},THREE.Curve.create=function(t,e){return t.prototype=Object.create(THREE.Curve.prototype),t.prototype.getPoint=e,t},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.add=function(t){this.curves.push(t)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new THREE.LineCurve(e,t))},THREE.CurvePath.prototype.getPoint=function(t){for(var e,i,n=t*this.getLength(),r=this.getCurveLengths(),o=0;o<r.length;){if(r[o]>=n){e=r[o]-n,i=this.curves[o];var s=1-e/i.getLength();return i.getPointAt(s)}o++}return null},THREE.CurvePath.prototype.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var t,e=[],i=0,n=this.curves.length;for(t=0;n>t;t++)i+=this.curves[t].getLength(),e.push(i);return this.cacheLengths=e,e},THREE.CurvePath.prototype.getBoundingBox=function(){var t,e,i,n,r,o,s=this.getPoints();t=e=Number.NEGATIVE_INFINITY,n=r=Number.POSITIVE_INFINITY;var a,h,l,c,d=s[0]instanceof THREE.Vector3;for(c=d?new THREE.Vector3:new THREE.Vector2,h=0,l=s.length;l>h;h++)a=s[h],a.x>t?t=a.x:a.x<n&&(n=a.x),a.y>e?e=a.y:a.y<r&&(r=a.y),d&&(a.z>i?i=a.z:a.z<o&&(o=a.z)),c.add(a);var u={minX:n,minY:r,maxX:t,maxY:e};return d&&(u.maxZ=i,u.minZ=o),u},THREE.CurvePath.prototype.createPointsGeometry=function(t){var e=this.getPoints(t,!0);return this.createGeometry(e)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(t){var e=this.getSpacedPoints(t,!0);return this.createGeometry(e)},THREE.CurvePath.prototype.createGeometry=function(t){for(var e=new THREE.Geometry,i=0;i<t.length;i++)e.vertices.push(new THREE.Vector3(t[i].x,t[i].y,t[i].z||0));return e},THREE.CurvePath.prototype.addWrapPath=function(t){this.bends.push(t)},THREE.CurvePath.prototype.getTransformedPoints=function(t,e){var i,n,r=this.getPoints(t);for(e||(e=this.bends),i=0,n=e.length;n>i;i++)r=this.getWrapPoints(r,e[i]);return r},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(t,e){var i,n,r=this.getSpacedPoints(t);for(e||(e=this.bends),i=0,n=e.length;n>i;i++)r=this.getWrapPoints(r,e[i]);return r},THREE.CurvePath.prototype.getWrapPoints=function(t,e){var i,n,r,o,s,a,h=this.getBoundingBox();for(i=0,n=t.length;n>i;i++){r=t[i],o=r.x,s=r.y,a=o/h.maxX,a=e.getUtoTmapping(a,o);var l=e.getPoint(a),c=e.getTangent(a);c.set(-c.y,c.x).multiplyScalar(s),r.x=l.x+c.x,r.y=l.y+c.y}return t},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.updateMatrixWorld=function(){var t=new THREE.Vector3,e=new THREE.Quaternion,i=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Quaternion,o=new THREE.Vector3;return function(s){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||s)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(n,r,o),this.matrix.decompose(t,e,i),this.matrixWorld.compose(n,e,o)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,s=!0);for(var a=0,h=this.children.length;h>a;a++)this.children[a].updateMatrixWorld(s)}}(),THREE.Path=function(t){THREE.CurvePath.call(this),this.actions=[],t&&this.fromPoints(t)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;i>e;e++)this.lineTo(t[e].x,t[e].y)},THREE.Path.prototype.moveTo=function(t,e){var i=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:i})},THREE.Path.prototype.lineTo=function(t,e){var i=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,r=n[n.length-2],o=n[n.length-1],s=new THREE.LineCurve(new THREE.Vector2(r,o),new THREE.Vector2(t,e));this.curves.push(s),this.actions.push({action:THREE.PathActions.LINE_TO,args:i})},THREE.Path.prototype.quadraticCurveTo=function(t,e,i,n){var r=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,s=o[o.length-2],a=o[o.length-1],h=new THREE.QuadraticBezierCurve(new THREE.Vector2(s,a),new THREE.Vector2(t,e),new THREE.Vector2(i,n));this.curves.push(h),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:r})},THREE.Path.prototype.bezierCurveTo=function(t,e,i,n,r,o){var s=Array.prototype.slice.call(arguments),a=this.actions[this.actions.length-1].args,h=a[a.length-2],l=a[a.length-1],c=new THREE.CubicBezierCurve(new THREE.Vector2(h,l),new THREE.Vector2(t,e),new THREE.Vector2(i,n),new THREE.Vector2(r,o));this.curves.push(c),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:s})},THREE.Path.prototype.splineThru=function(t){var e=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,n=i[i.length-2],r=i[i.length-1],o=[new THREE.Vector2(n,r)];Array.prototype.push.apply(o,t);var s=new THREE.SplineCurve(o);this.curves.push(s),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:e})},THREE.Path.prototype.arc=function(t,e,i,n,r,o){var s=this.actions[this.actions.length-1].args,a=s[s.length-2],h=s[s.length-1];this.absarc(t+a,e+h,i,n,r,o)},THREE.Path.prototype.absarc=function(t,e,i,n,r,o){this.absellipse(t,e,i,i,n,r,o)},THREE.Path.prototype.ellipse=function(t,e,i,n,r,o,s){var a=this.actions[this.actions.length-1].args,h=a[a.length-2],l=a[a.length-1];this.absellipse(t+h,e+l,i,n,r,o,s)},THREE.Path.prototype.absellipse=function(t,e,i,n,r,o,s){var a=Array.prototype.slice.call(arguments),h=new THREE.EllipseCurve(t,e,i,n,r,o,s);this.curves.push(h);var l=h.getPoint(1);a.push(l.x),a.push(l.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:a})},THREE.Path.prototype.getSpacedPoints=function(t,e){t||(t=40);for(var i=[],n=0;t>n;n++)i.push(this.getPoint(n/t));return i},THREE.Path.prototype.getPoints=function(t,e){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(t,e);t=t||12;var i,n,r,o,s,a,h,l,c,d,u,f,p,m,g,v,A,y,b=[];for(i=0,n=this.actions.length;n>i;i++)switch(r=this.actions[i],o=r.action,s=r.args,o){case THREE.PathActions.MOVE_TO:b.push(new THREE.Vector2(s[0],s[1]));break;case THREE.PathActions.LINE_TO:b.push(new THREE.Vector2(s[0],s[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(a=s[2],h=s[3],d=s[0],u=s[1],b.length>0?(m=b[b.length-1],f=m.x,p=m.y):(m=this.actions[i-1].args,f=m[m.length-2],p=m[m.length-1]),g=1;t>=g;g++)v=g/t,A=THREE.Shape.Utils.b2(v,f,d,a),y=THREE.Shape.Utils.b2(v,p,u,h),b.push(new THREE.Vector2(A,y));break;case THREE.PathActions.BEZIER_CURVE_TO:for(a=s[4],h=s[5],d=s[0],u=s[1],l=s[2],c=s[3],b.length>0?(m=b[b.length-1],f=m.x,p=m.y):(m=this.actions[i-1].args,f=m[m.length-2],p=m[m.length-1]),g=1;t>=g;g++)v=g/t,A=THREE.Shape.Utils.b3(v,f,d,l,a),y=THREE.Shape.Utils.b3(v,p,u,c,h),b.push(new THREE.Vector2(A,y));break;case THREE.PathActions.CSPLINE_THRU:m=this.actions[i-1].args;var E=new THREE.Vector2(m[m.length-2],m[m.length-1]),w=[E],x=t*s[0].length;w=w.concat(s[0]);var _=new THREE.SplineCurve(w);for(g=1;x>=g;g++)b.push(_.getPointAt(g/x));break;case THREE.PathActions.ARC:var T,S=s[0],R=s[1],C=s[2],k=s[3],M=s[4],H=!!s[5],P=M-k,D=2*t;for(g=1;D>=g;g++)v=g/D,H||(v=1-v),T=k+v*P,A=S+C*Math.cos(T),y=R+C*Math.sin(T),b.push(new THREE.Vector2(A,y));break;case THREE.PathActions.ELLIPSE:var T,S=s[0],R=s[1],O=s[2],L=s[3],k=s[4],M=s[5],H=!!s[6],P=M-k,D=2*t;for(g=1;D>=g;g++)v=g/D,H||(v=1-v),T=k+v*P,A=S+O*Math.cos(T),y=R+L*Math.sin(T),b.push(new THREE.Vector2(A,y))}var I=b[b.length-1],B=1e-10;return Math.abs(I.x-b[0].x)<B&&Math.abs(I.y-b[0].y)<B&&b.splice(b.length-1,1),e&&b.push(b[0]),b},THREE.Path.prototype.toShapes=function(t,e){function i(t){var e,i,n,r,o,s=[],a=new THREE.Path;for(e=0,i=t.length;i>e;e++)n=t[e],o=n.args,r=n.action,r==THREE.PathActions.MOVE_TO&&0!=a.actions.length&&(s.push(a),a=new THREE.Path),a[r].apply(a,o);return 0!=a.actions.length&&s.push(a),s}function n(t){for(var e=[],i=0,n=t.length;n>i;i++){var r=t[i],o=new THREE.Shape;o.actions=r.actions,o.curves=r.curves,e.push(o)}return e}function r(t,e){for(var i=1e-10,n=e.length,r=!1,o=n-1,s=0;n>s;o=s++){var a=e[o],h=e[s],l=h.x-a.x,c=h.y-a.y;if(Math.abs(c)>i){if(0>c&&(a=e[s],l=-l,h=e[o],c=-c),t.y<a.y||t.y>h.y)continue;if(t.y==a.y){if(t.x==a.x)return!0}else{var d=c*(t.x-a.x)-l*(t.y-a.y);if(0==d)return!0;if(0>d)continue;r=!r}}else{if(t.y!=a.y)continue;if(h.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=h.x)return!0}}return r}var o=i(this.actions);if(0==o.length)return[];if(e===!0)return n(o);var s,a,h,l=[];if(1==o.length)return a=o[0],h=new THREE.Shape,h.actions=a.actions,h.curves=a.curves,l.push(h),l;var c=!THREE.Shape.Utils.isClockWise(o[0].getPoints());c=t?!c:c;var d,u=[],f=[],p=[],m=0;f[m]=void 0,p[m]=[];var g,v;for(g=0,v=o.length;v>g;g++)a=o[g],d=a.getPoints(),s=THREE.Shape.Utils.isClockWise(d),s=t?!s:s,s?(!c&&f[m]&&m++,f[m]={s:new THREE.Shape,p:d},f[m].s.actions=a.actions,f[m].s.curves=a.curves,c&&m++,p[m]=[]):p[m].push({h:a,p:d[0]});if(!f[0])return n(o);if(f.length>1){for(var A=!1,y=[],b=0,E=f.length;E>b;b++)u[b]=[];for(var b=0,E=f.length;E>b;b++)for(var w=(f[b],p[b]),x=0;x<w.length;x++){for(var _=w[x],T=!0,S=0;S<f.length;S++)r(_.p,f[S].p)&&(b!=S&&y.push({froms:b,tos:S,hole:x}),T?(T=!1,u[S].push(_)):A=!0);T&&u[b].push(_)}y.length>0&&(A||(p=u))}var R,C,k;for(g=0,v=f.length;v>g;g++)for(h=f[g].s,l.push(h),R=p[g],C=0,k=R.length;k>C;C++)h.holes.push(R[C].h);return l},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.extrude=function(t){var e=new THREE.ExtrudeGeometry(this,t);return e},THREE.Shape.prototype.makeGeometry=function(t){var e=new THREE.ShapeGeometry(this,t);return e},THREE.Shape.prototype.getPointsHoles=function(t){var e,i=this.holes.length,n=[];for(e=0;i>e;e++)n[e]=this.holes[e].getTransformedPoints(t,this.bends);return n},THREE.Shape.prototype.getSpacedPointsHoles=function(t){var e,i=this.holes.length,n=[];for(e=0;i>e;e++)n[e]=this.holes[e].getTransformedSpacedPoints(t,this.bends);return n},THREE.Shape.prototype.extractAllPoints=function(t){return{shape:this.getTransformedPoints(t),holes:this.getPointsHoles(t)}},THREE.Shape.prototype.extractPoints=function(t){return this.useSpacedPoints?this.extractAllSpacedPoints(t):this.extractAllPoints(t)},THREE.Shape.prototype.extractAllSpacedPoints=function(t){return{shape:this.getTransformedSpacedPoints(t),holes:this.getSpacedPointsHoles(t)}},THREE.Shape.Utils={triangulateShape:function(t,e){function i(t,e,i){return t.x!=e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function n(t,e,n,r,o){var s=1e-10,a=e.x-t.x,h=e.y-t.y,l=r.x-n.x,c=r.y-n.y,d=t.x-n.x,u=t.y-n.y,f=h*l-a*c,p=h*d-a*u;if(Math.abs(f)>s){var m;if(f>0){if(0>p||p>f)return[];if(m=c*d-l*u,0>m||m>f)return[]}else{if(p>0||f>p)return[];if(m=c*d-l*u,m>0||f>m)return[]}if(0==m)return!o||0!=p&&p!=f?[t]:[];if(m==f)return!o||0!=p&&p!=f?[e]:[];if(0==p)return[n];if(p==f)return[r];var g=m/f;return[{x:t.x+g*a,y:t.y+g*h}]}if(0!=p||c*d!=l*u)return[];var v=0==a&&0==h,A=0==l&&0==c;if(v&&A)return t.x!=n.x||t.y!=n.y?[]:[t];if(v)return i(n,r,t)?[t]:[];if(A)return i(t,e,n)?[n]:[];var y,b,E,w,x,_,T,S;return 0!=a?(t.x<e.x?(y=t,E=t.x,b=e,w=e.x):(y=e,E=e.x,b=t,w=t.x),n.x<r.x?(x=n,T=n.x,_=r,S=r.x):(x=r,T=r.x,_=n,S=n.x)):(t.y<e.y?(y=t,E=t.y,b=e,w=e.y):(y=e,E=e.y,b=t,w=t.y),n.y<r.y?(x=n,T=n.y,_=r,S=r.y):(x=r,T=r.y,_=n,S=n.y)),T>=E?T>w?[]:w==T?o?[]:[x]:S>=w?[x,b]:[x,_]:E>S?[]:E==S?o?[]:[y]:S>=w?[y,b]:[y,_]}function r(t,e,i,n){var r=1e-10,o=e.x-t.x,s=e.y-t.y,a=i.x-t.x,h=i.y-t.y,l=n.x-t.x,c=n.y-t.y,d=o*h-s*a,u=o*c-s*l;if(Math.abs(d)>r){var f=l*h-c*a;return d>0?u>=0&&f>=0:u>=0||f>=0}return u>0}function o(t,e){function i(t,e){var i=A.length-1,n=t-1;0>n&&(n=i);var o=t+1;o>i&&(o=0);var s=r(A[t],A[n],A[o],a[e]);if(!s)return!1;var h=a.length-1,l=e-1;0>l&&(l=h);var c=e+1;return c>h&&(c=0),s=r(a[e],a[l],a[c],A[t]),!!s}function o(t,e){var i,r,o;for(i=0;i<A.length;i++)if(r=i+1,r%=A.length,o=n(t,e,A[i],A[r],!0),o.length>0)return!0;return!1}function s(t,i){var r,o,s,a,h;for(r=0;r<y.length;r++)for(o=e[y[r]],s=0;s<o.length;s++)if(a=s+1,a%=o.length,h=n(t,i,o[s],o[a],!0),h.length>0)return!0;return!1}for(var a,h,l,c,d,u,f,p,m,g,v,A=t.concat(),y=[],b=[],E=0,w=e.length;w>E;E++)y.push(E);for(var x=0,_=2*y.length;y.length>0;){if(_--,0>_){console.log("Infinite Loop! Holes left:"+y.length+", Probably Hole outside Shape!");break}for(l=x;l<A.length;l++){c=A[l],h=-1;for(var E=0;E<y.length;E++)if(u=y[E],f=c.x+":"+c.y+":"+u,void 0===b[f]){a=e[u];for(var T=0;T<a.length;T++)if(d=a[T],i(l,T)&&!o(c,d)&&!s(c,d)){h=T,y.splice(E,1),p=A.slice(0,l+1),m=A.slice(l),g=a.slice(h),v=a.slice(0,h+1),A=p.concat(g).concat(v).concat(m),x=l;break}if(h>=0)break;b[f]=!0}if(h>=0)break}}return A}for(var s,a,h,l,c,d,u={},f=t.concat(),p=0,m=e.length;m>p;p++)Array.prototype.push.apply(f,e[p]);for(s=0,a=f.length;a>s;s++)c=f[s].x+":"+f[s].y,void 0!==u[c]&&console.log("Duplicate point",c),u[c]=s;var g=o(t,e),v=THREE.FontUtils.Triangulate(g,!1);for(s=0,a=v.length;a>s;s++)for(l=v[s],h=0;3>h;h++)c=l[h].x+":"+l[h].y,d=u[c],void 0!==d&&(l[h]=d);return v.concat()},isClockWise:function(t){return THREE.FontUtils.Triangulate.area(t)<0},b2p0:function(t,e){var i=1-t;return i*i*e},b2p1:function(t,e){return 2*(1-t)*t*e},b2p2:function(t,e){return t*t*e},b2:function(t,e,i,n){return this.b2p0(t,e)+this.b2p1(t,i)+this.b2p2(t,n)},b3p0:function(t,e){var i=1-t;return i*i*i*e},b3p1:function(t,e){var i=1-t;return 3*i*i*t*e},b3p2:function(t,e){var i=1-t;return 3*i*t*t*e},b3p3:function(t,e){return t*t*t*e},b3:function(t,e,i,n,r){return this.b3p0(t,e)+this.b3p1(t,i)+this.b3p2(t,n)+this.b3p3(t,r)}},THREE.LineCurve=function(t,e){this.v1=t,this.v2=e},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.getPoint=function(t){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},THREE.LineCurve.prototype.getPointAt=function(t){return this.getPoint(t)},THREE.LineCurve.prototype.getTangent=function(t){var e=this.v2.clone().sub(this.v1);return e.normalize()},THREE.QuadraticBezierCurve=function(t,e,i){this.v0=t,this.v1=e,this.v2=i},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.getPoint=function(t){var e=new THREE.Vector2;return e.x=THREE.Shape.Utils.b2(t,this.v0.x,this.v1.x,this.v2.x),e.y=THREE.Shape.Utils.b2(t,this.v0.y,this.v1.y,this.v2.y),e},THREE.QuadraticBezierCurve.prototype.getTangent=function(t){var e=new THREE.Vector2;return e.x=THREE.Curve.Utils.tangentQuadraticBezier(t,this.v0.x,this.v1.x,this.v2.x),e.y=THREE.Curve.Utils.tangentQuadraticBezier(t,this.v0.y,this.v1.y,this.v2.y),e.normalize()},THREE.CubicBezierCurve=function(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.getPoint=function(t){var e,i;return e=THREE.Shape.Utils.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=THREE.Shape.Utils.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(e,i)},THREE.CubicBezierCurve.prototype.getTangent=function(t){var e,i;e=THREE.Curve.Utils.tangentCubicBezier(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=THREE.Curve.Utils.tangentCubicBezier(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var n=new THREE.Vector2(e,i);return n.normalize(),n},THREE.SplineCurve=function(t){this.points=void 0==t?[]:t},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.getPoint=function(t){var e=this.points,i=(e.length-1)*t,n=Math.floor(i),r=i-n,o=e[0==n?n:n-1],s=e[n],a=e[n>e.length-2?e.length-1:n+1],h=e[n>e.length-3?e.length-1:n+2],l=new THREE.Vector2;return l.x=THREE.Curve.Utils.interpolate(o.x,s.x,a.x,h.x,r),l.y=THREE.Curve.Utils.interpolate(o.y,s.y,a.y,h.y,r),l},THREE.EllipseCurve=function(t,e,i,n,r,o,s){this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=s},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.getPoint=function(t){var e=this.aEndAngle-this.aStartAngle;0>e&&(e+=2*Math.PI),e>2*Math.PI&&(e-=2*Math.PI);var i;i=this.aClockwise===!0?this.aEndAngle+(1-t)*(2*Math.PI-e):this.aStartAngle+t*e;var n=new THREE.Vector2;return n.x=this.aX+this.xRadius*Math.cos(i),n.y=this.aY+this.yRadius*Math.sin(i),n},THREE.ArcCurve=function(t,e,i,n,r,o){THREE.EllipseCurve.call(this,t,e,i,i,n,r,o)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.LineCurve3=THREE.Curve.create(function(t,e){this.v1=t,this.v2=e},function(t){var e=new THREE.Vector3;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(t,e,i){this.v0=t,this.v1=e,this.v2=i},function(t){var e=new THREE.Vector3;return e.x=THREE.Shape.Utils.b2(t,this.v0.x,this.v1.x,this.v2.x),e.y=THREE.Shape.Utils.b2(t,this.v0.y,this.v1.y,this.v2.y),e.z=THREE.Shape.Utils.b2(t,this.v0.z,this.v1.z,this.v2.z),e}),THREE.CubicBezierCurve3=THREE.Curve.create(function(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n},function(t){var e=new THREE.Vector3;return e.x=THREE.Shape.Utils.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e.y=THREE.Shape.Utils.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e.z=THREE.Shape.Utils.b3(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z),e}),THREE.SplineCurve3=THREE.Curve.create(function(t){this.points=void 0==t?[]:t},function(t){var e=this.points,i=(e.length-1)*t,n=Math.floor(i),r=i-n,o=e[0==n?n:n-1],s=e[n],a=e[n>e.length-2?e.length-1:n+1],h=e[n>e.length-3?e.length-1:n+2],l=new THREE.Vector3;return l.x=THREE.Curve.Utils.interpolate(o.x,s.x,a.x,h.x,r),l.y=THREE.Curve.Utils.interpolate(o.y,s.y,a.y,h.y,r),l.z=THREE.Curve.Utils.interpolate(o.z,s.z,a.z,h.z,r),l}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(t){this.points=void 0==t?[]:t},function(t){var e=this.points,i=(e.length-0)*t,n=Math.floor(i),r=i-n;n+=n>0?0:(Math.floor(Math.abs(n)/e.length)+1)*e.length;var o=e[(n-1)%e.length],s=e[n%e.length],a=e[(n+1)%e.length],h=e[(n+2)%e.length],l=new THREE.Vector3;
return l.x=THREE.Curve.Utils.interpolate(o.x,s.x,a.x,h.x,r),l.y=THREE.Curve.Utils.interpolate(o.y,s.y,a.y,h.y,r),l.z=THREE.Curve.Utils.interpolate(o.z,s.z,a.z,h.z,r),l}),THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(t){if(t.initialized!==!0){for(var e=0;e<t.hierarchy.length;e++){for(var i=0;i<t.hierarchy[e].keys.length;i++)if(t.hierarchy[e].keys[i].time<0&&(t.hierarchy[e].keys[i].time=0),void 0!==t.hierarchy[e].keys[i].rot&&!(t.hierarchy[e].keys[i].rot instanceof THREE.Quaternion)){var n=t.hierarchy[e].keys[i].rot;t.hierarchy[e].keys[i].rot=(new THREE.Quaternion).fromArray(n)}if(t.hierarchy[e].keys.length&&void 0!==t.hierarchy[e].keys[0].morphTargets){for(var r={},i=0;i<t.hierarchy[e].keys.length;i++)for(var o=0;o<t.hierarchy[e].keys[i].morphTargets.length;o++){var s=t.hierarchy[e].keys[i].morphTargets[o];r[s]=-1}t.hierarchy[e].usedMorphTargets=r;for(var i=0;i<t.hierarchy[e].keys.length;i++){var a={};for(var s in r){for(var o=0;o<t.hierarchy[e].keys[i].morphTargets.length;o++)if(t.hierarchy[e].keys[i].morphTargets[o]===s){a[s]=t.hierarchy[e].keys[i].morphTargetsInfluences[o];break}o===t.hierarchy[e].keys[i].morphTargets.length&&(a[s]=0)}t.hierarchy[e].keys[i].morphTargetsInfluences=a}}for(var i=1;i<t.hierarchy[e].keys.length;i++)t.hierarchy[e].keys[i].time===t.hierarchy[e].keys[i-1].time&&(t.hierarchy[e].keys.splice(i,1),i--);for(var i=0;i<t.hierarchy[e].keys.length;i++)t.hierarchy[e].keys[i].index=i}return t.initialized=!0,t}},parse:function(t){var e=function(t,i){i.push(t);for(var n=0;n<t.children.length;n++)e(t.children[n],i)},i=[];if(t instanceof THREE.SkinnedMesh)for(var n=0;n<t.skeleton.bones.length;n++)i.push(t.skeleton.bones[n]);else e(t,i);return i},play:function(t){-1===this.animations.indexOf(t)&&this.animations.push(t)},stop:function(t){var e=this.animations.indexOf(t);-1!==e&&this.animations.splice(e,1)},update:function(t){for(var e=0;e<this.animations.length;e++)this.animations[e].resetBlendWeights();for(var e=0;e<this.animations.length;e++)this.animations[e].update(t)}},THREE.Animation=function(t,e){this.root=t,this.data=THREE.AnimationHandler.init(e),this.hierarchy=THREE.AnimationHandler.parse(t),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=THREE.AnimationHandler.LINEAR},THREE.Animation.prototype.keyTypes=["pos","rot","scl"],THREE.Animation.prototype.play=function(t,e){this.currentTime=void 0!==t?t:0,this.weight=void 0!==e?e:1,this.isPlaying=!0,this.reset(),THREE.AnimationHandler.play(this)},THREE.Animation.prototype.stop=function(){this.isPlaying=!1,THREE.AnimationHandler.stop(this)},THREE.Animation.prototype.reset=function(){for(var t=0,e=this.hierarchy.length;e>t;t++){var i=this.hierarchy[t];i.matrixAutoUpdate=!0,void 0===i.animationCache&&(i.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}}),void 0===i.animationCache.animations[this.data.name]&&(i.animationCache.animations[this.data.name]={},i.animationCache.animations[this.data.name].prevKey={pos:0,rot:0,scl:0},i.animationCache.animations[this.data.name].nextKey={pos:0,rot:0,scl:0},i.animationCache.animations[this.data.name].originalMatrix=i.matrix);for(var n=i.animationCache.animations[this.data.name],r=0;3>r;r++){for(var o=this.keyTypes[r],s=this.data.hierarchy[t].keys[0],a=this.getNextKeyWith(o,t,1);a.time<this.currentTime&&a.index>s.index;)s=a,a=this.getNextKeyWith(o,t,a.index+1);n.prevKey[o]=s,n.nextKey[o]=a}}},THREE.Animation.prototype.resetBlendWeights=function(){for(var t=0,e=this.hierarchy.length;e>t;t++){var i=this.hierarchy[t];void 0!==i.animationCache&&(i.animationCache.blending.positionWeight=0,i.animationCache.blending.quaternionWeight=0,i.animationCache.blending.scaleWeight=0)}},THREE.Animation.prototype.update=function(){var t=[],e=new THREE.Vector3,i=new THREE.Vector3,n=new THREE.Quaternion,r=function(t,e){var i,n,r,s,a,h,l,c,d,u=[],f=[];return i=(t.length-1)*e,n=Math.floor(i),r=i-n,u[0]=0===n?n:n-1,u[1]=n,u[2]=n>t.length-2?n:n+1,u[3]=n>t.length-3?n:n+2,h=t[u[0]],l=t[u[1]],c=t[u[2]],d=t[u[3]],s=r*r,a=r*s,f[0]=o(h[0],l[0],c[0],d[0],r,s,a),f[1]=o(h[1],l[1],c[1],d[1],r,s,a),f[2]=o(h[2],l[2],c[2],d[2],r,s,a),f},o=function(t,e,i,n,r,o,s){var a=.5*(i-t),h=.5*(n-e);return(2*(e-i)+a+h)*s+(-3*(e-i)-2*a-h)*o+a*r+e};return function(o){if(this.isPlaying!==!1&&(this.currentTime+=o*this.timeScale,0!==this.weight)){var s=this.data.length;if(this.currentTime>s||this.currentTime<0){if(!this.loop)return void this.stop();this.currentTime%=s,this.currentTime<0&&(this.currentTime+=s),this.reset()}for(var a=0,h=this.hierarchy.length;h>a;a++)for(var l=this.hierarchy[a],c=l.animationCache.animations[this.data.name],d=l.animationCache.blending,u=0;3>u;u++){var f=this.keyTypes[u],p=c.prevKey[f],m=c.nextKey[f];if(this.timeScale>0&&m.time<=this.currentTime||this.timeScale<0&&p.time>=this.currentTime){for(p=this.data.hierarchy[a].keys[0],m=this.getNextKeyWith(f,a,1);m.time<this.currentTime&&m.index>p.index;)p=m,m=this.getNextKeyWith(f,a,m.index+1);c.prevKey[f]=p,c.nextKey[f]=m}l.matrixAutoUpdate=!0,l.matrixWorldNeedsUpdate=!0;var g=(this.currentTime-p.time)/(m.time-p.time),v=p[f],A=m[f];if(0>g&&(g=0),g>1&&(g=1),"pos"===f){if(this.interpolationType===THREE.AnimationHandler.LINEAR){i.x=v[0]+(A[0]-v[0])*g,i.y=v[1]+(A[1]-v[1])*g,i.z=v[2]+(A[2]-v[2])*g;var y=this.weight/(this.weight+d.positionWeight);l.position.lerp(i,y),d.positionWeight+=this.weight}else if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){t[0]=this.getPrevKeyWith("pos",a,p.index-1).pos,t[1]=v,t[2]=A,t[3]=this.getNextKeyWith("pos",a,m.index+1).pos,g=.33*g+.33;var b=r(t,g),y=this.weight/(this.weight+d.positionWeight);d.positionWeight+=this.weight;var E=l.position;if(E.x=E.x+(b[0]-E.x)*y,E.y=E.y+(b[1]-E.y)*y,E.z=E.z+(b[2]-E.z)*y,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){var w=r(t,1.01*g);e.set(w[0],w[1],w[2]),e.sub(E),e.y=0,e.normalize();var x=Math.atan2(e.x,e.z);l.rotation.set(0,x,0)}}}else if("rot"===f)if(THREE.Quaternion.slerp(v,A,n,g),0===d.quaternionWeight)l.quaternion.copy(n),d.quaternionWeight=this.weight;else{var y=this.weight/(this.weight+d.quaternionWeight);THREE.Quaternion.slerp(l.quaternion,n,l.quaternion,y),d.quaternionWeight+=this.weight}else if("scl"===f){i.x=v[0]+(A[0]-v[0])*g,i.y=v[1]+(A[1]-v[1])*g,i.z=v[2]+(A[2]-v[2])*g;var y=this.weight/(this.weight+d.scaleWeight);l.scale.lerp(i,y),d.scaleWeight+=this.weight}}return!0}}}(),THREE.Animation.prototype.getNextKeyWith=function(t,e,i){var n=this.data.hierarchy[e].keys;for(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?i=i<n.length-1?i:n.length-1:i%=n.length;i<n.length;i++)if(void 0!==n[i][t])return n[i];return this.data.hierarchy[e].keys[0]},THREE.Animation.prototype.getPrevKeyWith=function(t,e,i){var n=this.data.hierarchy[e].keys;for(i=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?i>0?i:0:i>=0?i:i+n.length;i>=0;i--)if(void 0!==n[i][t])return n[i];return this.data.hierarchy[e].keys[n.length-1]},THREE.KeyFrameAnimation=function(t){this.root=t.node,this.data=THREE.AnimationHandler.init(t),this.hierarchy=THREE.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0;for(var e=0,i=this.hierarchy.length;i>e;e++){var n=this.data.hierarchy[e].keys,r=this.data.hierarchy[e].sids,o=this.hierarchy[e];if(n.length&&r){for(var s=0;s<r.length;s++){var a=r[s],h=this.getNextKeyWith(a,e,0);h&&h.apply(a)}o.matrixAutoUpdate=!1,this.data.hierarchy[e].node.updateMatrix(),o.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype.play=function(t){if(this.currentTime=void 0!==t?t:0,this.isPlaying===!1){this.isPlaying=!0;var e,i,n,r=this.hierarchy.length;for(e=0;r>e;e++){i=this.hierarchy[e],n=this.data.hierarchy[e],void 0===n.animationCache&&(n.animationCache={},n.animationCache.prevKey=null,n.animationCache.nextKey=null,n.animationCache.originalMatrix=i.matrix);var o=this.data.hierarchy[e].keys;o.length&&(n.animationCache.prevKey=o[0],n.animationCache.nextKey=o[1],this.startTime=Math.min(o[0].time,this.startTime),this.endTime=Math.max(o[o.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.play(this)},THREE.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.stop(this);for(var t=0;t<this.data.hierarchy.length;t++){var e=this.hierarchy[t],i=this.data.hierarchy[t];if(void 0!==i.animationCache){var n=i.animationCache.originalMatrix;n.copy(e.matrix),e.matrix=n,delete i.animationCache}}},THREE.KeyFrameAnimation.prototype.update=function(t){if(this.isPlaying!==!1){this.currentTime+=t*this.timeScale;var e=this.data.length;this.loop===!0&&this.currentTime>e&&(this.currentTime%=e),this.currentTime=Math.min(this.currentTime,e);for(var i=0,n=this.hierarchy.length;n>i;i++){var r=this.hierarchy[i],o=this.data.hierarchy[i],s=o.keys,a=o.animationCache;if(s.length){var h=a.prevKey,l=a.nextKey;if(l.time<=this.currentTime){for(;l.time<this.currentTime&&l.index>h.index;)h=l,l=s[h.index+1];a.prevKey=h,a.nextKey=l}l.time>=this.currentTime?h.interpolate(l,this.currentTime):h.interpolate(l,l.time),this.data.hierarchy[i].node.updateMatrix(),r.matrixWorldNeedsUpdate=!0}}}},THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(t,e,i){var n=this.data.hierarchy[e].keys;for(i%=n.length;i<n.length;i++)if(n[i].hasTarget(t))return n[i];return n[0]},THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(t,e,i){var n=this.data.hierarchy[e].keys;for(i=i>=0?i:i+n.length;i>=0;i--)if(n[i].hasTarget(t))return n[i];return n[n.length-1]},THREE.MorphAnimation=function(t){this.mesh=t,this.frames=t.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.isPlaying=!1},THREE.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(){var t=0,e=0;return function(i){if(this.isPlaying!==!1){this.currentTime+=i,this.loop===!0&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration);var n=this.duration/this.frames,r=Math.floor(this.currentTime/n);r!=e&&(this.mesh.morphTargetInfluences[t]=0,this.mesh.morphTargetInfluences[e]=1,this.mesh.morphTargetInfluences[r]=0,t=e,e=r),this.mesh.morphTargetInfluences[r]=this.currentTime%n/n,this.mesh.morphTargetInfluences[t]=1-this.mesh.morphTargetInfluences[r]}}}()},THREE.BoxGeometry=function(t,e,i,n,r,o){function s(t,e,i,n,r,o,s,h){var l,c,d,u=a.widthSegments,f=a.heightSegments,p=r/2,m=o/2,g=a.vertices.length;"x"===t&&"y"===e||"y"===t&&"x"===e?l="z":"x"===t&&"z"===e||"z"===t&&"x"===e?(l="y",f=a.depthSegments):("z"===t&&"y"===e||"y"===t&&"z"===e)&&(l="x",u=a.depthSegments);var v=u+1,A=f+1,y=r/u,b=o/f,E=new THREE.Vector3;for(E[l]=s>0?1:-1,d=0;A>d;d++)for(c=0;v>c;c++){var w=new THREE.Vector3;w[t]=(c*y-p)*i,w[e]=(d*b-m)*n,w[l]=s,a.vertices.push(w)}for(d=0;f>d;d++)for(c=0;u>c;c++){var x=c+v*d,_=c+v*(d+1),T=c+1+v*(d+1),S=c+1+v*d,R=new THREE.Vector2(c/u,1-d/f),C=new THREE.Vector2(c/u,1-(d+1)/f),k=new THREE.Vector2((c+1)/u,1-(d+1)/f),M=new THREE.Vector2((c+1)/u,1-d/f),H=new THREE.Face3(x+g,_+g,S+g);H.normal.copy(E),H.vertexNormals.push(E.clone(),E.clone(),E.clone()),H.materialIndex=h,a.faces.push(H),a.faceVertexUvs[0].push([R,C,M]),H=new THREE.Face3(_+g,T+g,S+g),H.normal.copy(E),H.vertexNormals.push(E.clone(),E.clone(),E.clone()),H.materialIndex=h,a.faces.push(H),a.faceVertexUvs[0].push([C.clone(),k,M.clone()])}}THREE.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o},this.widthSegments=n||1,this.heightSegments=r||1,this.depthSegments=o||1;var a=this,h=t/2,l=e/2,c=i/2;s("z","y",-1,-1,i,e,h,0),s("z","y",1,-1,i,e,-h,1),s("x","z",1,1,t,i,l,2),s("x","z",1,-1,t,i,-l,3),s("x","y",1,-1,t,e,c,4),s("x","y",-1,-1,t,e,-c,5),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry=function(t,e,i,n){THREE.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},t=t||50,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var r,o=[],s=new THREE.Vector3,a=new THREE.Vector2(.5,.5);for(this.vertices.push(s),o.push(a),r=0;e>=r;r++){var h=new THREE.Vector3,l=i+r/e*n;h.x=t*Math.cos(l),h.y=t*Math.sin(l),this.vertices.push(h),o.push(new THREE.Vector2((h.x/t+1)/2,(h.y/t+1)/2))}var c=new THREE.Vector3(0,0,1);for(r=1;e>=r;r++)this.faces.push(new THREE.Face3(r,r+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([o[r].clone(),o[r+1].clone(),a.clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,t)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CubeGeometry=function(t,e,i,n,r,o){return console.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new THREE.BoxGeometry(t,e,i,n,r,o)},THREE.CylinderGeometry=function(t,e,i,n,r,o){THREE.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:o},t=void 0!==t?t:20,e=void 0!==e?e:20,i=void 0!==i?i:100,n=n||8,r=r||1,o=void 0!==o?o:!1;var s,a,h=i/2,l=[],c=[];for(a=0;r>=a;a++){var d=[],u=[],f=a/r,p=f*(e-t)+t;for(s=0;n>=s;s++){var m=s/n,g=new THREE.Vector3;g.x=p*Math.sin(m*Math.PI*2),g.y=-f*i+h,g.z=p*Math.cos(m*Math.PI*2),this.vertices.push(g),d.push(this.vertices.length-1),u.push(new THREE.Vector2(m,1-f))}l.push(d),c.push(u)}var v,A,y=(e-t)/i;for(s=0;n>s;s++)for(0!==t?(v=this.vertices[l[0][s]].clone(),A=this.vertices[l[0][s+1]].clone()):(v=this.vertices[l[1][s]].clone(),A=this.vertices[l[1][s+1]].clone()),v.setY(Math.sqrt(v.x*v.x+v.z*v.z)*y).normalize(),A.setY(Math.sqrt(A.x*A.x+A.z*A.z)*y).normalize(),a=0;r>a;a++){var b=l[a][s],E=l[a+1][s],w=l[a+1][s+1],x=l[a][s+1],_=v.clone(),T=v.clone(),S=A.clone(),R=A.clone(),C=c[a][s].clone(),k=c[a+1][s].clone(),M=c[a+1][s+1].clone(),H=c[a][s+1].clone();this.faces.push(new THREE.Face3(b,E,x,[_,T,R])),this.faceVertexUvs[0].push([C,k,H]),this.faces.push(new THREE.Face3(E,w,x,[T.clone(),S,R.clone()])),this.faceVertexUvs[0].push([k.clone(),M,H.clone()])}if(o===!1&&t>0)for(this.vertices.push(new THREE.Vector3(0,h,0)),s=0;n>s;s++){var b=l[0][s],E=l[0][s+1],w=this.vertices.length-1,_=new THREE.Vector3(0,1,0),T=new THREE.Vector3(0,1,0),S=new THREE.Vector3(0,1,0),C=c[0][s].clone(),k=c[0][s+1].clone(),M=new THREE.Vector2(k.x,0);this.faces.push(new THREE.Face3(b,E,w,[_,T,S])),this.faceVertexUvs[0].push([C,k,M])}if(o===!1&&e>0)for(this.vertices.push(new THREE.Vector3(0,-h,0)),s=0;n>s;s++){var b=l[a][s+1],E=l[a][s],w=this.vertices.length-1,_=new THREE.Vector3(0,-1,0),T=new THREE.Vector3(0,-1,0),S=new THREE.Vector3(0,-1,0),C=c[a][s+1].clone(),k=c[a][s].clone(),M=new THREE.Vector2(k.x,1);this.faces.push(new THREE.Face3(b,E,w,[_,T,S])),this.faceVertexUvs[0].push([C,k,M])}this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry=function(t,e){return"undefined"==typeof t?void(t=[]):(THREE.Geometry.call(this),this.type="ExtrudeGeometry",t=t instanceof Array?t:[t],this.addShapeList(t,e),void this.computeFaceNormals())},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.addShapeList=function(t,e){for(var i=t.length,n=0;i>n;n++){var r=t[n];this.addShape(r,e)}},THREE.ExtrudeGeometry.prototype.addShape=function(t,e){function i(t,e,i){return e||console.log("die"),e.clone().multiplyScalar(i).add(t)}function n(t,e,i){var n,r,o=1e-10,s=1,a=t.x-e.x,h=t.y-e.y,l=i.x-t.x,c=i.y-t.y,d=a*a+h*h,u=a*c-h*l;if(Math.abs(u)>o){var f=Math.sqrt(d),p=Math.sqrt(l*l+c*c),m=e.x-h/f,g=e.y+a/f,v=i.x-c/p,A=i.y+l/p,y=((v-m)*c-(A-g)*l)/(a*c-h*l);n=m+a*y-t.x,r=g+h*y-t.y;var b=n*n+r*r;if(2>=b)return new THREE.Vector2(n,r);s=Math.sqrt(b/2)}else{var E=!1;a>o?l>o&&(E=!0):-o>a?-o>l&&(E=!0):Math.sign(h)==Math.sign(c)&&(E=!0),E?(n=-h,r=a,s=Math.sqrt(d)):(n=a,r=h,s=Math.sqrt(d/2))}return new THREE.Vector2(n/s,r/s)}function r(){if(y){var t=0,e=W*t;for(q=0;G>q;q++)V=I[q],h(V[2]+e,V[1]+e,V[0]+e);for(t=E+2*A,e=W*t,q=0;G>q;q++)V=I[q],h(V[0]+e,V[1]+e,V[2]+e)}else{for(q=0;G>q;q++)V=I[q],h(V[2],V[1],V[0]);for(q=0;G>q;q++)V=I[q],h(V[0]+W*E,V[1]+W*E,V[2]+W*E)}}function o(){var t=0;for(s(B,t),t+=B.length,C=0,k=O.length;k>C;C++)R=O[C],s(R,t),t+=R.length}function s(t,e){var i,n;for(q=t.length;--q>=0;){i=q,n=q-1,0>n&&(n=t.length-1);var r=0,o=E+2*A;for(r=0;o>r;r++){var s=W*r,a=W*(r+1),h=e+i+s,c=e+n+s,d=e+n+a,u=e+i+a;l(h,c,d,u,t,r,o,i,n)}}}function a(t,e,i){M.vertices.push(new THREE.Vector3(t,e,i))}function h(t,e,i){t+=H,e+=H,i+=H,M.faces.push(new THREE.Face3(t,e,i,null,null,_));var n=S.generateTopUV(M,t,e,i);M.faceVertexUvs[0].push(n)}function l(t,e,i,n,r,o,s,a,h){t+=H,e+=H,i+=H,n+=H,M.faces.push(new THREE.Face3(t,e,n,null,null,T)),M.faces.push(new THREE.Face3(e,i,n,null,null,T));var l=S.generateSideWallUV(M,t,e,i,n);M.faceVertexUvs[0].push([l[0],l[1],l[3]]),M.faceVertexUvs[0].push([l[1],l[2],l[3]])}var c,d,u,f,p,m=void 0!==e.amount?e.amount:100,g=void 0!==e.bevelThickness?e.bevelThickness:6,v=void 0!==e.bevelSize?e.bevelSize:g-2,A=void 0!==e.bevelSegments?e.bevelSegments:3,y=void 0!==e.bevelEnabled?e.bevelEnabled:!0,b=void 0!==e.curveSegments?e.curveSegments:12,E=void 0!==e.steps?e.steps:1,w=e.extrudePath,x=!1,_=e.material,T=e.extrudeMaterial,S=void 0!==e.UVGenerator?e.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;w&&(c=w.getSpacedPoints(E),x=!0,y=!1,d=void 0!==e.frames?e.frames:new THREE.TubeGeometry.FrenetFrames(w,E,!1),u=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3),y||(A=0,g=0,v=0);var R,C,k,M=this,H=this.vertices.length,P=t.extractPoints(b),D=P.shape,O=P.holes,L=!THREE.Shape.Utils.isClockWise(D);if(L){for(D=D.reverse(),C=0,k=O.length;k>C;C++)R=O[C],THREE.Shape.Utils.isClockWise(R)&&(O[C]=R.reverse());L=!1}var I=THREE.Shape.Utils.triangulateShape(D,O),B=D;for(C=0,k=O.length;k>C;C++)R=O[C],D=D.concat(R);for(var F,N,z,j,U,V,W=D.length,G=I.length,Y=(B.length,180/Math.PI,[]),q=0,X=B.length,Q=X-1,Z=q+1;X>q;q++,Q++,Z++){Q===X&&(Q=0),Z===X&&(Z=0);B[q],B[Q],B[Z];Y[q]=n(B[q],B[Q],B[Z])}var K,J=[],$=Y.concat();for(C=0,k=O.length;k>C;C++){for(R=O[C],K=[],q=0,X=R.length,Q=X-1,Z=q+1;X>q;q++,Q++,Z++)Q===X&&(Q=0),Z===X&&(Z=0),K[q]=n(R[q],R[Q],R[Z]);J.push(K),$=$.concat(K)}for(F=0;A>F;F++){for(z=F/A,j=g*(1-z),N=v*Math.sin(z*Math.PI/2),q=0,X=B.length;X>q;q++)U=i(B[q],Y[q],N),a(U.x,U.y,-j);for(C=0,k=O.length;k>C;C++)for(R=O[C],K=J[C],q=0,X=R.length;X>q;q++)U=i(R[q],K[q],N),a(U.x,U.y,-j)}for(N=v,q=0;W>q;q++)U=y?i(D[q],$[q],N):D[q],x?(f.copy(d.normals[0]).multiplyScalar(U.x),u.copy(d.binormals[0]).multiplyScalar(U.y),p.copy(c[0]).add(f).add(u),a(p.x,p.y,p.z)):a(U.x,U.y,0);var tt;for(tt=1;E>=tt;tt++)for(q=0;W>q;q++)U=y?i(D[q],$[q],N):D[q],x?(f.copy(d.normals[tt]).multiplyScalar(U.x),u.copy(d.binormals[tt]).multiplyScalar(U.y),p.copy(c[tt]).add(f).add(u),a(p.x,p.y,p.z)):a(U.x,U.y,m/E*tt);for(F=A-1;F>=0;F--){for(z=F/A,j=g*(1-z),N=v*Math.sin(z*Math.PI/2),q=0,X=B.length;X>q;q++)U=i(B[q],Y[q],N),a(U.x,U.y,m+j);for(C=0,k=O.length;k>C;C++)for(R=O[C],K=J[C],q=0,X=R.length;X>q;q++)U=i(R[q],K[q],N),x?a(U.x,U.y+c[E-1].y,c[E-1].x+j):a(U.x,U.y,m+j)}r(),o()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(t,e,i,n){var r=t.vertices,o=r[e],s=r[i],a=r[n];return[new THREE.Vector2(o.x,o.y),new THREE.Vector2(s.x,s.y),new THREE.Vector2(a.x,a.y)]},generateSideWallUV:function(t,e,i,n,r){var o=t.vertices,s=o[e],a=o[i],h=o[n],l=o[r];return Math.abs(s.y-a.y)<.01?[new THREE.Vector2(s.x,1-s.z),new THREE.Vector2(a.x,1-a.z),new THREE.Vector2(h.x,1-h.z),new THREE.Vector2(l.x,1-l.z)]:[new THREE.Vector2(s.y,1-s.z),new THREE.Vector2(a.y,1-a.z),new THREE.Vector2(h.y,1-h.z),new THREE.Vector2(l.y,1-l.z)]}},THREE.ShapeGeometry=function(t,e){THREE.Geometry.call(this),this.type="ShapeGeometry",t instanceof Array==!1&&(t=[t]),this.addShapeList(t,e),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.addShapeList=function(t,e){for(var i=0,n=t.length;n>i;i++)this.addShape(t[i],e);return this},THREE.ShapeGeometry.prototype.addShape=function(t,e){void 0===e&&(e={});var i,n,r,o=void 0!==e.curveSegments?e.curveSegments:12,s=e.material,a=void 0===e.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:e.UVGenerator,h=this.vertices.length,l=t.extractPoints(o),c=l.shape,d=l.holes,u=!THREE.Shape.Utils.isClockWise(c);if(u){for(c=c.reverse(),i=0,n=d.length;n>i;i++)r=d[i],THREE.Shape.Utils.isClockWise(r)&&(d[i]=r.reverse());u=!1}var f=THREE.Shape.Utils.triangulateShape(c,d),p=c;for(i=0,n=d.length;n>i;i++)r=d[i],c=c.concat(r);var m,g,v=c.length,A=f.length;p.length;for(i=0;v>i;i++)m=c[i],this.vertices.push(new THREE.Vector3(m.x,m.y,0));for(i=0;A>i;i++){g=f[i];var y=g[0]+h,b=g[1]+h,E=g[2]+h;this.faces.push(new THREE.Face3(y,b,E,null,null,s)),this.faceVertexUvs[0].push(a.generateTopUV(this,y,b,E))}},THREE.LatheGeometry=function(t,e,i,n){THREE.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},e=e||12,i=i||0,n=n||2*Math.PI;for(var r=1/(t.length-1),o=1/e,s=0,a=e;a>=s;s++)for(var h=i+s*o*n,l=Math.cos(h),c=Math.sin(h),d=0,u=t.length;u>d;d++){var f=t[d],p=new THREE.Vector3;p.x=l*f.x-c*f.y,p.y=c*f.x+l*f.y,p.z=f.z,this.vertices.push(p)}for(var m=t.length,s=0,a=e;a>s;s++)for(var d=0,u=t.length-1;u>d;d++){var g=d+m*s,v=g,A=g+m,l=g+1+m,y=g+1,b=s*o,E=d*r,w=b+o,x=E+r;this.faces.push(new THREE.Face3(v,A,y)),this.faceVertexUvs[0].push([new THREE.Vector2(b,E),new THREE.Vector2(w,E),new THREE.Vector2(b,x)]),this.faces.push(new THREE.Face3(A,l,y)),this.faceVertexUvs[0].push([new THREE.Vector2(w,E),new THREE.Vector2(w,x),new THREE.Vector2(b,x)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry=function(t,e,i,n){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),THREE.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new THREE.PlaneBufferGeometry(t,e,i,n))},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneBufferGeometry=function(t,e,i,n){THREE.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};for(var r=t/2,o=e/2,s=i||1,a=n||1,h=s+1,l=a+1,c=t/s,d=e/a,u=new Float32Array(h*l*3),f=new Float32Array(h*l*3),p=new Float32Array(h*l*2),m=0,g=0,v=0;l>v;v++)for(var A=v*d-o,y=0;h>y;y++){var b=y*c-r;u[m]=b,u[m+1]=-A,f[m+2]=1,p[g]=y/s,p[g+1]=1-v/a,m+=3,g+=2}m=0;for(var E=new(u.length/3>65535?Uint32Array:Uint16Array)(s*a*6),v=0;a>v;v++)for(var y=0;s>y;y++){var w=y+h*v,x=y+h*(v+1),_=y+1+h*(v+1),T=y+1+h*v;E[m]=w,E[m+1]=x,E[m+2]=T,E[m+3]=x,E[m+4]=_,E[m+5]=T,m+=6}this.addAttribute("index",new THREE.BufferAttribute(E,1)),this.addAttribute("position",new THREE.BufferAttribute(u,3)),this.addAttribute("normal",new THREE.BufferAttribute(f,3)),this.addAttribute("uv",new THREE.BufferAttribute(p,2))},THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.RingGeometry=function(t,e,i,n,r,o){THREE.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},t=t||0,e=e||50,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8,n=void 0!==n?Math.max(1,n):8;var s,a,h=[],l=t,c=(e-t)/n;for(s=0;n+1>s;s++){for(a=0;i+1>a;a++){var d=new THREE.Vector3,u=r+a/i*o;d.x=l*Math.cos(u),d.y=l*Math.sin(u),this.vertices.push(d),h.push(new THREE.Vector2((d.x/e+1)/2,(d.y/e+1)/2))}l+=c}var f=new THREE.Vector3(0,0,1);for(s=0;n>s;s++){var p=s*(i+1);for(a=0;i>a;a++){var u=a+p,m=u,g=u+i+1,v=u+i+2;this.faces.push(new THREE.Face3(m,g,v,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([h[m].clone(),h[g].clone(),h[v].clone()]),m=u,g=u+i+2,v=u+1,this.faces.push(new THREE.Face3(m,g,v,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([h[m].clone(),h[g].clone(),h[v].clone()])}}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,l)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry=function(t,e,i,n,r,o,s){THREE.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var a,h,l=[],c=[];for(h=0;i>=h;h++){var d=[],u=[];for(a=0;e>=a;a++){var f=a/e,p=h/i,m=new THREE.Vector3;m.x=-t*Math.cos(n+f*r)*Math.sin(o+p*s),m.y=t*Math.cos(o+p*s),m.z=t*Math.sin(n+f*r)*Math.sin(o+p*s),this.vertices.push(m),d.push(this.vertices.length-1),u.push(new THREE.Vector2(f,1-p))}l.push(d),c.push(u)}for(h=0;i>h;h++)for(a=0;e>a;a++){var g=l[h][a+1],v=l[h][a],A=l[h+1][a],y=l[h+1][a+1],b=this.vertices[g].clone().normalize(),E=this.vertices[v].clone().normalize(),w=this.vertices[A].clone().normalize(),x=this.vertices[y].clone().normalize(),_=c[h][a+1].clone(),T=c[h][a].clone(),S=c[h+1][a].clone(),R=c[h+1][a+1].clone();Math.abs(this.vertices[g].y)===t?(_.x=(_.x+T.x)/2,this.faces.push(new THREE.Face3(g,A,y,[b,w,x])),this.faceVertexUvs[0].push([_,S,R])):Math.abs(this.vertices[A].y)===t?(S.x=(S.x+R.x)/2,this.faces.push(new THREE.Face3(g,v,A,[b,E,w])),this.faceVertexUvs[0].push([_,T,S])):(this.faces.push(new THREE.Face3(g,v,y,[b,E,x])),this.faceVertexUvs[0].push([_,T,R]),this.faces.push(new THREE.Face3(v,A,y,[E.clone(),w,x.clone()])),this.faceVertexUvs[0].push([T.clone(),S,R.clone()]))}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,t)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TextGeometry=function(t,e){e=e||{};var i=THREE.FontUtils.generateShapes(t,e);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,i,e),this.type="TextGeometry"},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TorusGeometry=function(t,e,i,n,r){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},t=t||100,e=e||40,i=i||8,n=n||6,r=r||2*Math.PI;for(var o=new THREE.Vector3,s=[],a=[],h=0;i>=h;h++)for(var l=0;n>=l;l++){var c=l/n*r,d=h/i*Math.PI*2;o.x=t*Math.cos(c),o.y=t*Math.sin(c);var u=new THREE.Vector3;u.x=(t+e*Math.cos(d))*Math.cos(c),u.y=(t+e*Math.cos(d))*Math.sin(c),u.z=e*Math.sin(d),this.vertices.push(u),s.push(new THREE.Vector2(l/n,h/i)),a.push(u.clone().sub(o).normalize())}for(var h=1;i>=h;h++)for(var l=1;n>=l;l++){var f=(n+1)*h+l-1,p=(n+1)*(h-1)+l-1,m=(n+1)*(h-1)+l,g=(n+1)*h+l,v=new THREE.Face3(f,p,g,[a[f].clone(),a[p].clone(),a[g].clone()]);this.faces.push(v),this.faceVertexUvs[0].push([s[f].clone(),s[p].clone(),s[g].clone()]),v=new THREE.Face3(p,m,g,[a[p].clone(),a[m].clone(),a[g].clone()]),this.faces.push(v),this.faceVertexUvs[0].push([s[p].clone(),s[m].clone(),s[g].clone()])}this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry=function(t,e,i,n,r,o,s){function a(t,e,i,n,r){var o=Math.cos(t),s=Math.sin(t),a=e/i*t,h=Math.cos(a),l=n*(2+h)*.5*o,c=n*(2+h)*s*.5,d=r*n*Math.sin(a)*.5;return new THREE.Vector3(l,c,d)}THREE.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,p:r,q:o,heightScale:s},t=t||100,e=e||40,i=i||64,n=n||8,r=r||2,o=o||3,s=s||1;for(var h=new Array(i),l=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3,u=0;i>u;++u){h[u]=new Array(n);var f=u/i*2*r*Math.PI,p=a(f,o,r,t,s),m=a(f+.01,o,r,t,s);l.subVectors(m,p),c.addVectors(m,p),d.crossVectors(l,c),c.crossVectors(d,l),d.normalize(),c.normalize();for(var g=0;n>g;++g){var v=g/n*2*Math.PI,A=-e*Math.cos(v),y=e*Math.sin(v),b=new THREE.Vector3;b.x=p.x+A*c.x+y*d.x,b.y=p.y+A*c.y+y*d.y,b.z=p.z+A*c.z+y*d.z,h[u][g]=this.vertices.push(b)-1}}for(var u=0;i>u;++u)for(var g=0;n>g;++g){var E=(u+1)%i,w=(g+1)%n,x=h[u][g],_=h[E][g],T=h[E][w],S=h[u][w],R=new THREE.Vector2(u/i,g/n),C=new THREE.Vector2((u+1)/i,g/n),k=new THREE.Vector2((u+1)/i,(g+1)/n),M=new THREE.Vector2(u/i,(g+1)/n);this.faces.push(new THREE.Face3(x,_,S)),this.faceVertexUvs[0].push([R,C,M]),this.faces.push(new THREE.Face3(_,T,S)),this.faceVertexUvs[0].push([C.clone(),k,M.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry=function(t,e,i,n,r){function o(t,e,i){return R.vertices.push(new THREE.Vector3(t,e,i))-1}THREE.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:t,segments:e,radius:i,radialSegments:n,closed:r},e=e||64,i=i||1,n=n||8,r=r||!1;var s,a,h,l,c,d,u,f,p,m,g,v,A,y,b,E,w,x,_,T,S=[],R=this,C=e+1,k=new THREE.Vector3,M=new THREE.TubeGeometry.FrenetFrames(t,e,r),H=M.tangents,P=M.normals,D=M.binormals;for(this.tangents=H,this.normals=P,this.binormals=D,p=0;C>p;p++)for(S[p]=[],l=p/(C-1),f=t.getPointAt(l),s=H[p],a=P[p],h=D[p],m=0;n>m;m++)c=m/n*2*Math.PI,d=-i*Math.cos(c),u=i*Math.sin(c),k.copy(f),k.x+=d*a.x+u*h.x,k.y+=d*a.y+u*h.y,k.z+=d*a.z+u*h.z,S[p][m]=o(k.x,k.y,k.z);for(p=0;e>p;p++)for(m=0;n>m;m++)g=r?(p+1)%e:p+1,v=(m+1)%n,A=S[p][m],y=S[g][m],b=S[g][v],E=S[p][v],w=new THREE.Vector2(p/e,m/n),x=new THREE.Vector2((p+1)/e,m/n),_=new THREE.Vector2((p+1)/e,(m+1)/n),T=new THREE.Vector2(p/e,(m+1)/n),this.faces.push(new THREE.Face3(A,y,E)),this.faceVertexUvs[0].push([w,x,T]),this.faces.push(new THREE.Face3(y,b,E)),this.faceVertexUvs[0].push([x.clone(),_,T.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.FrenetFrames=function(t,e,i){function n(){f[0]=new THREE.Vector3,p[0]=new THREE.Vector3,o=Number.MAX_VALUE,s=Math.abs(u[0].x),a=Math.abs(u[0].y),h=Math.abs(u[0].z),o>=s&&(o=s,d.set(1,0,0)),o>=a&&(o=a,d.set(0,1,0)),o>=h&&d.set(0,0,1),m.crossVectors(u[0],d).normalize(),f[0].crossVectors(u[0],m),p[0].crossVectors(u[0],f[0])}var r,o,s,a,h,l,c,d=(new THREE.Vector3,new THREE.Vector3),u=(new THREE.Vector3,[]),f=[],p=[],m=new THREE.Vector3,g=new THREE.Matrix4,v=e+1,A=1e-4;for(this.tangents=u,this.normals=f,this.binormals=p,l=0;v>l;l++)c=l/(v-1),u[l]=t.getTangentAt(c),u[l].normalize();for(n(),l=1;v>l;l++)f[l]=f[l-1].clone(),p[l]=p[l-1].clone(),m.crossVectors(u[l-1],u[l]),m.length()>A&&(m.normalize(),r=Math.acos(THREE.Math.clamp(u[l-1].dot(u[l]),-1,1)),f[l].applyMatrix4(g.makeRotationAxis(m,r))),p[l].crossVectors(u[l],f[l]);if(i)for(r=Math.acos(THREE.Math.clamp(f[0].dot(f[v-1]),-1,1)),r/=v-1,u[0].dot(m.crossVectors(f[0],f[v-1]))>0&&(r=-r),l=1;v>l;l++)f[l].applyMatrix4(g.makeRotationAxis(u[l],r*l)),p[l].crossVectors(u[l],f[l])},THREE.PolyhedronGeometry=function(t,e,i,n){function r(t){var e=t.normalize().clone();e.index=c.vertices.push(e)-1;var i=a(t)/2/Math.PI+.5,n=h(t)/Math.PI+.5;return e.uv=new THREE.Vector2(i,1-n),e}function o(t,e,i){var n=new THREE.Face3(t.index,e.index,i.index,[t.clone(),e.clone(),i.clone()]);c.faces.push(n),y.copy(t).add(e).add(i).divideScalar(3);var r=a(y);c.faceVertexUvs[0].push([l(t.uv,t,r),l(e.uv,e,r),l(i.uv,i,r)])}function s(t,e){for(var i=Math.pow(2,e),n=(Math.pow(4,e),
r(c.vertices[t.a])),s=r(c.vertices[t.b]),a=r(c.vertices[t.c]),h=[],l=0;i>=l;l++){h[l]=[];for(var d=r(n.clone().lerp(a,l/i)),u=r(s.clone().lerp(a,l/i)),f=i-l,p=0;f>=p;p++)0==p&&l==i?h[l][p]=d:h[l][p]=r(d.clone().lerp(u,p/f))}for(var l=0;i>l;l++)for(var p=0;2*(i-l)-1>p;p++){var m=Math.floor(p/2);p%2==0?o(h[l][m+1],h[l+1][m],h[l][m]):o(h[l][m+1],h[l+1][m+1],h[l+1][m])}}function a(t){return Math.atan2(t.z,-t.x)}function h(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}function l(t,e,i){return 0>i&&1===t.x&&(t=new THREE.Vector2(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new THREE.Vector2(i/2/Math.PI+.5,t.y)),t.clone()}THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},i=i||1,n=n||0;for(var c=this,d=0,u=t.length;u>d;d+=3)r(new THREE.Vector3(t[d],t[d+1],t[d+2]));for(var f=this.vertices,p=[],d=0,m=0,u=e.length;u>d;d+=3,m++){var g=f[e[d]],v=f[e[d+1]],A=f[e[d+2]];p[m]=new THREE.Face3(g.index,v.index,A.index,[g.clone(),v.clone(),A.clone()])}for(var y=new THREE.Vector3,d=0,u=p.length;u>d;d++)s(p[d],n);for(var d=0,u=this.faceVertexUvs[0].length;u>d;d++){var b=this.faceVertexUvs[0][d],E=b[0].x,w=b[1].x,x=b[2].x,_=Math.max(E,Math.max(w,x)),T=Math.min(E,Math.min(w,x));_>.9&&.1>T&&(.2>E&&(b[0].x+=1),.2>w&&(b[1].x+=1),.2>x&&(b[2].x+=1))}for(var d=0,u=this.vertices.length;u>d;d++)this.vertices[d].multiplyScalar(i);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,i)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.DodecahedronGeometry=function(t,e){this.parameters={radius:t,detail:e};var i=(1+Math.sqrt(5))/2,n=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];THREE.PolyhedronGeometry.call(this,r,o,t,e)},THREE.DodecahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry=function(t,e){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];THREE.PolyhedronGeometry.call(this,n,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry=function(t,e){this.parameters={radius:t,detail:e};var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];THREE.PolyhedronGeometry.call(this,i,n,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry=function(t,e){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];THREE.PolyhedronGeometry.call(this,i,n,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry=function(t,e,i){THREE.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i};var n,r,o,s,a,h=this.vertices,l=this.faces,c=this.faceVertexUvs[0],d=e+1;for(n=0;i>=n;n++)for(a=n/i,r=0;e>=r;r++)s=r/e,o=t(s,a),h.push(o);var u,f,p,m,g,v,A,y;for(n=0;i>n;n++)for(r=0;e>r;r++)u=n*d+r,f=n*d+r+1,p=(n+1)*d+r+1,m=(n+1)*d+r,g=new THREE.Vector2(r/e,n/i),v=new THREE.Vector2((r+1)/e,n/i),A=new THREE.Vector2((r+1)/e,(n+1)/i),y=new THREE.Vector2(r/e,(n+1)/i),l.push(new THREE.Face3(u,f,m)),c.push([g,v,y]),l.push(new THREE.Face3(f,p,m)),c.push([v.clone(),A,y.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.AxisHelper=function(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),i=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),n=new THREE.BufferGeometry;n.addAttribute("position",new THREE.BufferAttribute(e,3)),n.addAttribute("color",new THREE.BufferAttribute(i,3));var r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,n,r,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.ArrowHelper=function(){var t=new THREE.Geometry;t.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var e=new THREE.CylinderGeometry(0,.5,1,5,1);return e.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),function(i,n,r,o,s,a){THREE.Object3D.call(this),void 0===o&&(o=16776960),void 0===r&&(r=1),void 0===s&&(s=.2*r),void 0===a&&(a=.2*s),this.position.copy(n),this.line=new THREE.Line(t,new THREE.LineBasicMaterial({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new THREE.Mesh(e,new THREE.MeshBasicMaterial({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(i),this.setLength(r,s,a)}}(),THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.setDirection=function(){var t,e=new THREE.Vector3;return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(i.z,0,-i.x).normalize(),t=Math.acos(i.y),this.quaternion.setFromAxisAngle(e,t))}}(),THREE.ArrowHelper.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,t,1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},THREE.BoxHelper=function(t){var e=new THREE.BufferGeometry;e.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3)),THREE.Line.call(this,e,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==t&&this.update(t)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.update=function(t){var e=t.geometry;null===e.boundingBox&&e.computeBoundingBox();var i=e.boundingBox.min,n=e.boundingBox.max,r=this.geometry.attributes.position.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=i.x,r[4]=n.y,r[5]=n.z,r[6]=i.x,r[7]=n.y,r[8]=n.z,r[9]=i.x,r[10]=i.y,r[11]=n.z,r[12]=i.x,r[13]=i.y,r[14]=n.z,r[15]=n.x,r[16]=i.y,r[17]=n.z,r[18]=n.x,r[19]=i.y,r[20]=n.z,r[21]=n.x,r[22]=n.y,r[23]=n.z,r[24]=n.x,r[25]=n.y,r[26]=i.z,r[27]=i.x,r[28]=n.y,r[29]=i.z,r[30]=i.x,r[31]=n.y,r[32]=i.z,r[33]=i.x,r[34]=i.y,r[35]=i.z,r[36]=i.x,r[37]=i.y,r[38]=i.z,r[39]=n.x,r[40]=i.y,r[41]=i.z,r[42]=n.x,r[43]=i.y,r[44]=i.z,r[45]=n.x,r[46]=n.y,r[47]=i.z,r[48]=n.x,r[49]=n.y,r[50]=n.z,r[51]=n.x,r[52]=n.y,r[53]=i.z,r[54]=i.x,r[55]=n.y,r[56]=n.z,r[57]=i.x,r[58]=n.y,r[59]=i.z,r[60]=i.x,r[61]=i.y,r[62]=n.z,r[63]=i.x,r[64]=i.y,r[65]=i.z,r[66]=n.x,r[67]=i.y,r[68]=n.z,r[69]=n.x,r[70]=i.y,r[71]=i.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},THREE.BoundingBoxHelper=function(t,e){var i=void 0!==e?e:8947848;this.object=t,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:i,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(t){function e(t,e,n){i(t,n),i(e,n)}function i(t,e){n.vertices.push(new THREE.Vector3),n.colors.push(new THREE.Color(e)),void 0===o[t]&&(o[t]=[]),o[t].push(n.vertices.length-1)}var n=new THREE.Geometry,r=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),o={},s=16755200,a=16711680,h=43775,l=16777215,c=3355443;e("n1","n2",s),e("n2","n4",s),e("n4","n3",s),e("n3","n1",s),e("f1","f2",s),e("f2","f4",s),e("f4","f3",s),e("f3","f1",s),e("n1","f1",s),e("n2","f2",s),e("n3","f3",s),e("n4","f4",s),e("p","n1",a),e("p","n2",a),e("p","n3",a),e("p","n4",a),e("u1","u2",h),e("u2","u3",h),e("u3","u1",h),e("c","t",l),e("p","c",c),e("cn1","cn2",c),e("cn3","cn4",c),e("cf1","cf2",c),e("cf3","cf4",c),THREE.Line.call(this,n,r,THREE.LinePieces),this.camera=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.update=function(){var t,e,i=new THREE.Vector3,n=new THREE.Camera,r=function(r,o,s,a){i.set(o,s,a).unproject(n);var h=e[r];if(void 0!==h)for(var l=0,c=h.length;c>l;l++)t.vertices[h[l]].copy(i)};return function(){t=this.geometry,e=this.pointMap;var i=1,o=1;n.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-i,-o,-1),r("n2",i,-o,-1),r("n3",-i,o,-1),r("n4",i,o,-1),r("f1",-i,-o,1),r("f2",i,-o,1),r("f3",-i,o,1),r("f4",i,o,1),r("u1",.7*i,1.1*o,-1),r("u2",.7*-i,1.1*o,-1),r("u3",0,2*o,-1),r("cf1",-i,0,1),r("cf2",i,0,1),r("cf3",0,-o,1),r("cf4",0,o,1),r("cn1",-i,0,-1),r("cn2",i,0,-1),r("cn3",0,-o,-1),r("cn4",0,o,-1),t.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(t,e){THREE.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,e=e||1;var i=new THREE.Geometry;i.vertices.push(new THREE.Vector3(-e,e,0),new THREE.Vector3(e,e,0),new THREE.Vector3(e,-e,0),new THREE.Vector3(-e,-e,0),new THREE.Vector3(-e,e,0));var n=new THREE.LineBasicMaterial({fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(i,n),this.add(this.lightPlane),i=new THREE.Geometry,i.vertices.push(new THREE.Vector3,new THREE.Vector3),n=new THREE.LineBasicMaterial({fog:!1}),n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(i,n),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(e,t),this.lightPlane.lookAt(i),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(i),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(t,e){var i=void 0!==e?e:16777215,n=[0,0],r={},o=function(t,e){return t-e},s=["a","b","c"],a=new THREE.BufferGeometry,h=t.geometry.clone();h.mergeVertices(),h.computeFaceNormals();for(var l=h.vertices,c=h.faces,d=0,u=0,f=c.length;f>u;u++)for(var p=c[u],m=0;3>m;m++){n[0]=p[s[m]],n[1]=p[s[(m+1)%3]],n.sort(o);var g=n.toString();void 0===r[g]?(r[g]={vert1:n[0],vert2:n[1],face1:u,face2:void 0},d++):r[g].face2=u}var v=new Float32Array(2*d*3),A=0;for(var g in r){var y=r[g];if(void 0===y.face2||c[y.face1].normal.dot(c[y.face2].normal)<.9999){var b=l[y.vert1];v[A++]=b.x,v[A++]=b.y,v[A++]=b.z,b=l[y.vert2],v[A++]=b.x,v[A++]=b.y,v[A++]=b.z}}a.addAttribute("position",new THREE.BufferAttribute(v,3)),THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:i}),THREE.LinePieces),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper=function(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;for(var r=void 0!==i?i:16776960,o=void 0!==n?n:1,s=new THREE.Geometry,a=this.object.geometry.faces,h=0,l=a.length;l>h;h++)s.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:r,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.update=function(){var t=this.geometry.vertices,e=this.object,i=e.geometry.vertices,n=e.geometry.faces,r=e.matrixWorld;e.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(r);for(var o=0,s=0,a=n.length;a>o;o++,s+=2){var h=n[o];t[s].copy(i[h.a]).add(i[h.b]).add(i[h.c]).divideScalar(3).applyMatrix4(r),t[s+1].copy(h.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(t[s])}return this.geometry.verticesNeedUpdate=!0,this},THREE.GridHelper=function(t,e){var i=new THREE.Geometry,n=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var r=-t;t>=r;r+=e){i.vertices.push(new THREE.Vector3(-t,0,r),new THREE.Vector3(t,0,r),new THREE.Vector3(r,0,-t),new THREE.Vector3(r,0,t));var o=0===r?this.color1:this.color2;i.colors.push(o,o,o,o)}THREE.Line.call(this,i,n,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.setColors=function(t,e){this.color1.set(t),this.color2.set(e),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(t,e,i,n){THREE.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var r=new THREE.SphereGeometry(e,4,2);r.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var o=0,s=8;s>o;o++)r.faces[o].color=this.colors[4>o?0:1];var a=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(r,a),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var t=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(t,e){this.light=t,this.light.updateMatrixWorld();var i=new THREE.SphereGeometry(e,4,2),n=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,i,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SkeletonHelper=function(t){this.bones=this.getBoneList(t);for(var e=new THREE.Geometry,i=0;i<this.bones.length;i++){var n=this.bones[i];n.parent instanceof THREE.Bone&&(e.vertices.push(new THREE.Vector3),e.vertices.push(new THREE.Vector3),e.colors.push(new THREE.Color(0,0,1)),e.colors.push(new THREE.Color(0,1,0)))}var r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.Line.call(this,e,r,THREE.LinePieces),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype),THREE.SkeletonHelper.prototype.getBoneList=function(t){var e=[];t instanceof THREE.Bone&&e.push(t);for(var i=0;i<t.children.length;i++)e.push.apply(e,this.getBoneList(t.children[i]));return e},THREE.SkeletonHelper.prototype.update=function(){for(var t=this.geometry,e=(new THREE.Matrix4).getInverse(this.root.matrixWorld),i=new THREE.Matrix4,n=0,r=0;r<this.bones.length;r++){var o=this.bones[r];o.parent instanceof THREE.Bone&&(i.multiplyMatrices(e,o.matrixWorld),t.vertices[n].setFromMatrixPosition(i),i.multiplyMatrices(e,o.parent.matrixWorld),t.vertices[n+1].setFromMatrixPosition(i),n+=2)}t.verticesNeedUpdate=!0,t.computeBoundingSphere()},THREE.SpotLightHelper=function(t){THREE.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;var e=new THREE.CylinderGeometry(0,1,1,8,1,!0);e.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),e.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var i=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(e,i),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(){var i=this.light.distance?this.light.distance:1e4,n=i*Math.tan(this.light.angle);this.cone.scale.set(n,n,i),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;for(var r=void 0!==i?i:16711680,o=void 0!==n?n:1,s=new THREE.Geometry,a=(t.geometry.vertices,t.geometry.faces),h=0,l=a.length;l>h;h++)for(var c=a[h],d=0,u=c.vertexNormals.length;u>d;d++)s.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:r,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.update=function(t){var e=new THREE.Vector3;return function(t){var i=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,o=this.object.geometry.faces,s=this.object.matrixWorld,a=0,h=0,l=o.length;l>h;h++)for(var c=o[h],d=0,u=c.vertexNormals.length;u>d;d++){var f=c[i[d]],p=r[f],m=c.vertexNormals[d];n[a].copy(p).applyMatrix4(s),e.copy(m).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),e.add(n[a]),a+=1,n[a].copy(e),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;for(var r=void 0!==i?i:255,o=void 0!==n?n:1,s=new THREE.Geometry,a=(t.geometry.vertices,t.geometry.faces),h=0,l=a.length;l>h;h++)for(var c=a[h],d=0,u=c.vertexTangents.length;u>d;d++)s.vertices.push(new THREE.Vector3),s.vertices.push(new THREE.Vector3);THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:r,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.update=function(t){var e=new THREE.Vector3;return function(t){var i=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,o=this.object.geometry.faces,s=this.object.matrixWorld,a=0,h=0,l=o.length;l>h;h++)for(var c=o[h],d=0,u=c.vertexTangents.length;u>d;d++){var f=c[i[d]],p=r[f],m=c.vertexTangents[d];n[a].copy(p).applyMatrix4(s),e.copy(m).transformDirection(s).multiplyScalar(this.size),e.add(n[a]),a+=1,n[a].copy(e),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(t,e){var i=void 0!==e?e:16777215,n=[0,0],r={},o=function(t,e){return t-e},s=["a","b","c"],a=new THREE.BufferGeometry;if(t.geometry instanceof THREE.Geometry){for(var h=t.geometry.vertices,l=t.geometry.faces,c=0,d=new Uint32Array(6*l.length),u=0,f=l.length;f>u;u++)for(var p=l[u],m=0;3>m;m++){n[0]=p[s[m]],n[1]=p[s[(m+1)%3]],n.sort(o);var g=n.toString();void 0===r[g]&&(d[2*c]=n[0],d[2*c+1]=n[1],r[g]=!0,c++)}for(var v=new Float32Array(2*c*3),u=0,f=c;f>u;u++)for(var m=0;2>m;m++){var A=h[d[2*u+m]],y=6*u+3*m;v[y+0]=A.x,v[y+1]=A.y,v[y+2]=A.z}a.addAttribute("position",new THREE.BufferAttribute(v,3))}else if(t.geometry instanceof THREE.BufferGeometry)if(void 0!==t.geometry.attributes.index){var h=t.geometry.attributes.position.array,b=t.geometry.attributes.index.array,E=t.geometry.drawcalls,c=0;0===E.length&&(E=[{count:b.length,index:0,start:0}]);for(var d=new Uint32Array(2*b.length),w=0,x=E.length;x>w;++w)for(var _=E[w].start,T=E[w].count,y=E[w].index,u=_,S=_+T;S>u;u+=3)for(var m=0;3>m;m++){n[0]=y+b[u+m],n[1]=y+b[u+(m+1)%3],n.sort(o);var g=n.toString();void 0===r[g]&&(d[2*c]=n[0],d[2*c+1]=n[1],r[g]=!0,c++)}for(var v=new Float32Array(2*c*3),u=0,f=c;f>u;u++)for(var m=0;2>m;m++){var y=6*u+3*m,R=3*d[2*u+m];v[y+0]=h[R],v[y+1]=h[R+1],v[y+2]=h[R+2]}a.addAttribute("position",new THREE.BufferAttribute(v,3))}else{for(var h=t.geometry.attributes.position.array,c=h.length/3,C=c/3,v=new Float32Array(2*c*3),u=0,f=C;f>u;u++)for(var m=0;3>m;m++){var y=18*u+6*m,k=9*u+3*m;v[y+0]=h[k],v[y+1]=h[k+1],v[y+2]=h[k+2];var R=9*u+3*((m+1)%3);v[y+3]=h[R],v[y+4]=h[R+1],v[y+5]=h[R+2]}a.addAttribute("position",new THREE.BufferAttribute(v,3))}THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:i}),THREE.LinePieces),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(t){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.MorphBlendMesh=function(t,e){THREE.Mesh.call(this,t,e),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length,n="__default",r=0,o=i-1,s=i/1;this.createAnimation(n,r,o,s),this.setAnimationWeight(n,1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.createAnimation=function(t,e,i,n){var r={startFrame:e,endFrame:i,length:i-e+1,fps:n,duration:(i-e)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=r,this.animationsList.push(r)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(t){for(var e,i=/([a-z]+)_?(\d+)/,n={},r=this.geometry,o=0,s=r.morphTargets.length;s>o;o++){var a=r.morphTargets[o],h=a.name.match(i);if(h&&h.length>1){var l=h[1];h[2];n[l]||(n[l]={start:1/0,end:-(1/0)});var c=n[l];o<c.start&&(c.start=o),o>c.end&&(c.end=o),e||(e=l)}}for(var l in n){var c=n[l];this.createAnimation(l,c.start,c.end,t)}this.firstAnimation=e},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(t,e){var i=this.animationsMap[t];i&&(i.fps=e,i.duration=(i.end-i.start)/i.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(t,e){var i=this.animationsMap[t];i&&(i.duration=e,i.fps=(i.end-i.start)/i.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(t,e){var i=this.animationsMap[t];i&&(i.weight=e)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(t,e){var i=this.animationsMap[t];i&&(i.time=e)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(t){var e=0,i=this.animationsMap[t];return i&&(e=i.time),e},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(t){var e=-1,i=this.animationsMap[t];return i&&(e=i.duration),e},THREE.MorphBlendMesh.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("animation["+t+"] undefined")},THREE.MorphBlendMesh.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},THREE.MorphBlendMesh.prototype.update=function(t){for(var e=0,i=this.animationsList.length;i>e;e++){var n=this.animationsList[e];if(n.active){var r=n.duration/n.length;n.time+=n.direction*t,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var o=n.startFrame+THREE.Math.clamp(Math.floor(n.time/r),0,n.length-1),s=n.weight;o!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*s,this.morphTargetInfluences[o]=0,n.lastFrame=n.currentFrame,n.currentFrame=o);var a=n.time%r/r;n.directionBackwards&&(a=1-a),this.morphTargetInfluences[n.currentFrame]=a*s,this.morphTargetInfluences[n.lastFrame]=(1-a)*s}}};var Stats=function(){var t=Date.now(),e=t,i=0,n=1/0,r=0,o=0,s=1/0,a=0,h=0,l=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(t){t.preventDefault(),A(++l%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var d=document.createElement("div");d.id="fps",d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(d);var u=document.createElement("div");u.id="fpsText",u.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",u.innerHTML="FPS",d.appendChild(u);var f=document.createElement("div");for(f.id="fpsGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",d.appendChild(f);f.children.length<74;){var p=document.createElement("span");p.style.cssText="width:1px;height:30px;float:left;background-color:#113",f.appendChild(p)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var g=document.createElement("div");g.id="msText",g.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",g.innerHTML="MS",m.appendChild(g);var v=document.createElement("div");for(v.id="msGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(v);v.children.length<74;){var p=document.createElement("span");p.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(p)}var A=function(t){switch(l=t){case 0:d.style.display="block",m.style.display="none";break;case 1:d.style.display="none",m.style.display="block"}},y=function(t,e){var i=t.appendChild(t.firstChild);i.style.height=e+"px"};return{REVISION:11,domElement:c,setMode:A,begin:function(){t=Date.now()},end:function(){var l=Date.now();return i=l-t,n=Math.min(n,i),r=Math.max(r,i),g.textContent=i+" MS ("+n+"-"+r+")",y(v,Math.min(30,30-i/200*30)),h++,l>e+1e3&&(o=Math.round(1e3*h/(l-e)),s=Math.min(s,o),a=Math.max(a,o),u.textContent=o+" FPS ("+s+"-"+a+")",y(f,Math.min(30,30-o/100*30)),e=l,h=0),l},update:function(){t=this.end()}}},dat=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css=function(){return{load:function(t,e){e=e||document;var i=e.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t,e.getElementsByTagName("head")[0].appendChild(i)},inject:function(t,e){e=e||document;var i=document.createElement("style");i.type="text/css",i.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(i)}}}(),dat.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var i in e)this.isUndefined(e[i])||(t[i]=e[i])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var i in e)this.isUndefined(t[i])&&(t[i]=e[i])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var i=e.call(arguments),n=t.length-1;n>=0;n--)i=[t[n].apply(this,i)];return i[0]}},each:function(e,i,n){if(t&&e.forEach===t)e.forEach(i,n);else if(e.length===e.length+0)for(var r=0,o=e.length;o>r&&!(r in e&&i.call(n,e[r],r)===this.BREAK);r++);else for(r in e)if(i.call(n,e[r],r)===this.BREAK)break},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),dat.controllers.Controller=function(t){var e=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onFinishChange=this.__onChange=void 0};return t.extend(e.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),e}(dat.utils.common),dat.dom.dom=function(t){function e(e){return"0"===e||t.isUndefined(e)?0:(e=e.match(n),t.isNull(e)?0:parseFloat(e[1]))}var i={};t.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,n){t.each(e,function(t){i[t]=n})});var n=/(\d+(\.\d+)?)px/,r={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,i,n){t.isUndefined(i)&&(i=!0),t.isUndefined(n)&&(n=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),n&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,n,r,o){r=r||{};var s=i[n];if(!s)throw Error("Event type "+n+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":a.initMouseEvent(n,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,r.x||r.clientX||0,r.y||r.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":s=a.initKeyboardEvent||a.initKeyEvent,t.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),s(n,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:a.initEvent(n,r.bubbles||!1,r.cancelable||!0)}t.defaults(a,o),e.dispatchEvent(a)},bind:function(t,e,i,n){return t.addEventListener?t.addEventListener(e,i,n||!1):t.attachEvent&&t.attachEvent("on"+e,i),r},unbind:function(t,e,i,n){return t.removeEventListener?t.removeEventListener(e,i,n||!1):t.detachEvent&&t.detachEvent("on"+e,i),r},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var i=t.className.split(/ +/);-1==i.indexOf(e)&&(i.push(e),t.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return r},removeClass:function(t,e){if(e){if(void 0!==t.className)if(t.className===e)t.removeAttribute("class");else{var i=t.className.split(/ +/),n=i.indexOf(e);-1!=n&&(i.splice(n,1),t.className=i.join(" "))}}else t.className=void 0;return r},hasClass:function(t,e){return RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){return t=getComputedStyle(t),e(t["border-left-width"])+e(t["border-right-width"])+e(t["padding-left"])+e(t["padding-right"])+e(t.width)},getHeight:function(t){return t=getComputedStyle(t),e(t["border-top-width"])+e(t["border-bottom-width"])+e(t["padding-top"])+e(t["padding-bottom"])+e(t.height);
},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do e.left+=t.offsetLeft,e.top+=t.offsetTop;while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return r}(dat.utils.common),dat.controllers.OptionController=function(t,e,i){var n=function(t,r,o){n.superclass.call(this,t,r);var s=this;if(this.__select=document.createElement("select"),i.isArray(o)){var a={};i.each(o,function(t){a[t]=t}),o=a}i.each(o,function(t,e){var i=document.createElement("option");i.innerHTML=e,i.setAttribute("value",t),s.__select.appendChild(i)}),this.updateDisplay(),e.bind(this.__select,"change",function(){s.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return n.superclass=t,i.extend(n.prototype,t.prototype,{setValue:function(t){return t=n.superclass.prototype.setValue.call(this,t),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),n.superclass.prototype.updateDisplay.call(this)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(t,e){var i=function(t,n,r){i.superclass.call(this,t,n),r=r||{},this.__min=r.min,this.__max=r.max,this.__step=r.step,e.isUndefined(this.__step)?this.__impliedStep=0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,t=this.__impliedStep,t=t.toString(),t=-1<t.indexOf(".")?t.length-t.indexOf(".")-1:0,this.__precision=t};return i.superclass=t,e.extend(i.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&0!=t%this.__step&&(t=Math.round(t/this.__step)*this.__step),i.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),i}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(t,e,i){var n=function(t,r,o){function s(){var t=parseFloat(c.__input.value);i.isNaN(t)||c.setValue(t)}function a(t){var e=l-t.clientY;c.setValue(c.getValue()+e*c.__impliedStep),l=t.clientY}function h(){e.unbind(window,"mousemove",a),e.unbind(window,"mouseup",h)}this.__truncationSuspended=!1,n.superclass.call(this,t,r,o);var l,c=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",s),e.bind(this.__input,"blur",function(){s(),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}),e.bind(this.__input,"mousedown",function(t){e.bind(window,"mousemove",a),e.bind(window,"mouseup",h),l=t.clientY}),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(c.__truncationSuspended=!0,this.blur(),c.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return n.superclass=t,i.extend(n.prototype,t.prototype,{updateDisplay:function(){var t,e=this.__input;if(this.__truncationSuspended)t=this.getValue();else{t=this.getValue();var i=Math.pow(10,this.__precision);t=Math.round(t*i)/i}return e.value=t,n.superclass.prototype.updateDisplay.call(this)}}),n}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(t,e,i,n,r){function o(t,e,i,n,r){return n+(t-e)/(i-e)*(r-n)}var s=function(t,i,n,r,a){function h(t){t.preventDefault();var i=e.getOffset(c.__background),n=e.getWidth(c.__background);return c.setValue(o(t.clientX,i.left,i.left+n,c.__min,c.__max)),!1}function l(){e.unbind(window,"mousemove",h),e.unbind(window,"mouseup",l),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}s.superclass.call(this,t,i,{min:n,max:r,step:a});var c=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",function(t){e.bind(window,"mousemove",h),e.bind(window,"mouseup",l),h(t)}),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return s.superclass=t,s.useDefaultStyles=function(){i.inject(r)},n.extend(s.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",s.superclass.prototype.updateDisplay.call(this)}}),s}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,"/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),dat.controllers.FunctionController=function(t,e,i){var n=function(t,i,r){n.superclass.call(this,t,i);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===r?"Fire":r,e.bind(this.__button,"click",function(t){return t.preventDefault(),o.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return n.superclass=t,i.extend(n.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(t,e,i){var n=function(t,i){n.superclass.call(this,t,i);var r=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",function(){r.setValue(!r.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return n.superclass=t,i.extend(n.prototype,t.prototype,{setValue:function(t){return t=n.superclass.prototype.setValue.call(this,t),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,n.superclass.prototype.updateDisplay.call(this)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(e=e.hex.toString(16);6>e.length;)e="0"+e;return"#"+e}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(dat.utils.common),dat.color.interpret=function(t,e){var i,n,r=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){return t=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i),null===t?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){return t=t.match(/^#([A-F0-9]{6})$/i),null===t?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:t},CSS_RGB:{read:function(t){return t=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/),null===t?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:t},CSS_RGBA:{read:function(t){return t=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/),null===t?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3!=t.length?!1:{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4!=t.length?!1:{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a)?{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)?{space:"RGB",r:t.r,g:t.g,b:t.b}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a)?{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)?{space:"HSV",h:t.h,s:t.s,v:t.v}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return function(){n=!1;var t=1<arguments.length?e.toArray(arguments):arguments[0];return e.each(r,function(r){return r.litmus(t)?(e.each(r.conversions,function(r,o){return i=r.read(t),!1===n&&!1!==i?(n=i,i.conversionName=o,i.conversion=r,e.BREAK):void 0}),e.BREAK):void 0}),n}}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(t,e,i,n,r,o,s,a,h,l,c,d,u,f,p){function m(t,e,i,o){if(void 0===e[i])throw Error("Object "+e+' has no property "'+i+'"');o.color?e=new c(e,i):(e=[e,i].concat(o.factoryArgs),e=n.apply(t,e)),o.before instanceof r&&(o.before=o.before.__li),A(t,e),f.addClass(e.domElement,"c"),i=document.createElement("span"),f.addClass(i,"property-name"),i.innerHTML=e.property;var s=document.createElement("div");return s.appendChild(i),s.appendChild(e.domElement),o=g(t,s,o.before),f.addClass(o,O.CLASS_CONTROLLER_ROW),f.addClass(o,typeof e.getValue()),v(t,o,e),t.__controllers.push(e),e}function g(t,e,i){var n=document.createElement("li");return e&&n.appendChild(e),i?t.__ul.insertBefore(n,params.before):t.__ul.appendChild(n),t.onResize(),n}function v(t,e,i){if(i.__li=e,i.__gui=t,p.extend(i,{options:function(e){return 1<arguments.length?(i.remove(),m(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[p.toArray(arguments)]})):p.isArray(e)||p.isObject(e)?(i.remove(),m(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return i.__li.firstElementChild.firstElementChild.innerHTML=t,i},listen:function(){return i.__gui.listen(i),i},remove:function(){return i.__gui.remove(i),i}}),i instanceof h){var n=new a(i.object,i.property,{min:i.__min,max:i.__max,step:i.__step});p.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=i[t],r=n[t];i[t]=n[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(i,t),r.apply(n,t)}}),f.addClass(e,"has-slider"),i.domElement.insertBefore(n.domElement,i.domElement.firstElementChild)}else if(i instanceof a){var r=function(e){return p.isNumber(i.__min)&&p.isNumber(i.__max)?(i.remove(),m(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[i.__min,i.__max,i.__step]})):e};i.min=p.compose(r,i.min),i.max=p.compose(r,i.max)}else i instanceof o?(f.bind(e,"click",function(){f.fakeEvent(i.__checkbox,"click")}),f.bind(i.__checkbox,"click",function(t){t.stopPropagation()})):i instanceof s?(f.bind(e,"click",function(){f.fakeEvent(i.__button,"click")}),f.bind(e,"mouseover",function(){f.addClass(i.__button,"hover")}),f.bind(e,"mouseout",function(){f.removeClass(i.__button,"hover")})):i instanceof c&&(f.addClass(e,"color"),i.updateDisplay=p.compose(function(t){return e.style.borderLeftColor=i.__color.toString(),t},i.updateDisplay),i.updateDisplay());i.setValue=p.compose(function(e){return t.getRoot().__preset_select&&i.isModified()&&_(t.getRoot(),!0),e},i.setValue)}function A(t,e){var i=t.getRoot(),n=i.__rememberedObjects.indexOf(e.object);if(-1!=n){var r=i.__rememberedObjectIndecesToControllers[n];if(void 0===r&&(r={},i.__rememberedObjectIndecesToControllers[n]=r),r[e.property]=e,i.load&&i.load.remembered){if(i=i.load.remembered,i[t.preset])i=i[t.preset];else{if(!i[R])return;i=i[R]}i[n]&&void 0!==i[n][e.property]&&(n=i[n][e.property],e.initialValue=n,e.setValue(n))}}}function y(t){var e=t.__save_row=document.createElement("li");f.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),f.addClass(e,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",f.addClass(i,"button gears");var n=document.createElement("span");n.innerHTML="Save",f.addClass(n,"button"),f.addClass(n,"save");var r=document.createElement("span");r.innerHTML="New",f.addClass(r,"button"),f.addClass(r,"save-as");var o=document.createElement("span");o.innerHTML="Revert",f.addClass(o,"button"),f.addClass(o,"revert");var s=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?p.each(t.load.remembered,function(e,i){x(t,i,i==t.preset)}):x(t,R,!1),f.bind(s,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),e.appendChild(s),e.appendChild(i),e.appendChild(n),e.appendChild(r),e.appendChild(o),S){var e=document.getElementById("dg-save-locally"),a=document.getElementById("dg-local-explain");e.style.display="block",e=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(document.location.href+".isLocal")&&e.setAttribute("checked","checked");var h=function(){a.style.display=t.useLocalStorage?"block":"none"};h(),f.bind(e,"change",function(){t.useLocalStorage=!t.useLocalStorage,h()})}var l=document.getElementById("dg-new-constructor");f.bind(l,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||k.hide()}),f.bind(i,"click",function(){l.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),k.show(),l.focus(),l.select()}),f.bind(n,"click",function(){t.save()}),f.bind(r,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),f.bind(o,"click",function(){t.revert()})}function b(t){function e(e){return e.preventDefault(),r=e.clientX,f.addClass(t.__closeButton,O.CLASS_DRAG),f.bind(window,"mousemove",i),f.bind(window,"mouseup",n),!1}function i(e){return e.preventDefault(),t.width+=r-e.clientX,t.onResize(),r=e.clientX,!1}function n(){f.removeClass(t.__closeButton,O.CLASS_DRAG),f.unbind(window,"mousemove",i),f.unbind(window,"mouseup",n)}t.__resize_handle=document.createElement("div"),p.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var r;f.bind(t.__resize_handle,"mousedown",e),f.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function E(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function w(t,e){var i={};return p.each(t.__rememberedObjects,function(n,r){var o={};p.each(t.__rememberedObjectIndecesToControllers[r],function(t,i){o[i]=e?t.initialValue:t.getValue()}),i[r]=o}),i}function x(t,e,i){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.__preset_select.appendChild(n),i&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function _(t,e){var i=t.__preset_select[t.__preset_select.selectedIndex];i.innerHTML=e?i.value+"*":i.value}function T(t){0!=t.length&&d(function(){T(t)}),p.each(t,function(t){t.updateDisplay()})}t.inject(i);var S,R="Default";try{S="localStorage"in window&&null!==window.localStorage}catch(C){S=!1}var k,M,H=!0,P=!1,D=[],O=function(t){function e(){localStorage.setItem(document.location.href+".gui",JSON.stringify(n.getSaveObject()))}function i(){var t=n.getRoot();t.width+=1,p.defer(function(){t.width-=1})}var n=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),f.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=p.defaults(t,{autoPlace:!0,width:O.DEFAULT_WIDTH}),t=p.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),p.isUndefined(t.load)?t.load={preset:R}:t.preset&&(t.load.preset=t.preset),p.isUndefined(t.parent)&&t.hideable&&D.push(this),t.resizable=p.isUndefined(t.parent)&&t.resizable,t.autoPlace&&p.isUndefined(t.scrollable)&&(t.scrollable=!0);var r=S&&"true"===localStorage.getItem(document.location.href+".isLocal");if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:t.load.preset},set:function(e){for(n.parent?n.getRoot().preset=e:t.load.preset=e,e=0;e<this.__preset_select.length;e++)this.__preset_select[e].value==this.preset&&(this.__preset_select.selectedIndex=e);n.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,E(n,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,s&&(s.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(e){t.closed=e,t.closed?f.addClass(n.__ul,O.CLASS_CLOSED):f.removeClass(n.__ul,O.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?O.TEXT_OPEN:O.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return r},set:function(t){S&&((r=t)?f.bind(window,"unload",e):f.unbind(window,"unload",e),localStorage.setItem(document.location.href+".isLocal",t))}}}),p.isUndefined(t.parent)){if(t.closed=!1,f.addClass(this.domElement,O.CLASS_MAIN),f.makeSelectable(this.domElement,!1),S&&r){n.useLocalStorage=!0;var o=localStorage.getItem(document.location.href+".gui");o&&(t.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=O.TEXT_CLOSED,f.addClass(this.__closeButton,O.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),f.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===t.closed&&(t.closed=!0);var s=document.createTextNode(t.name);f.addClass(s,"controller-name"),o=g(n,s),f.addClass(this.__ul,O.CLASS_CLOSED),f.addClass(o,"title"),f.bind(o,"click",function(t){return t.preventDefault(),n.closed=!n.closed,!1}),t.closed||(this.closed=!1)}t.autoPlace&&(p.isUndefined(t.parent)&&(H&&(M=document.createElement("div"),f.addClass(M,"dg"),f.addClass(M,O.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(M),H=!1),M.appendChild(this.domElement),f.addClass(this.domElement,O.CLASS_AUTO_PLACE)),this.parent||E(n,t.width)),f.bind(window,"resize",function(){n.onResize()}),f.bind(this.__ul,"webkitTransitionEnd",function(){n.onResize()}),f.bind(this.__ul,"transitionend",function(){n.onResize()}),f.bind(this.__ul,"oTransitionEnd",function(){n.onResize()}),this.onResize(),t.resizable&&b(this),n.getRoot(),t.parent||i()};return O.toggleHide=function(){P=!P,p.each(D,function(t){t.domElement.style.zIndex=P?-999:999,t.domElement.style.opacity=P?0:1})},O.CLASS_AUTO_PLACE="a",O.CLASS_AUTO_PLACE_CONTAINER="ac",O.CLASS_MAIN="main",O.CLASS_CONTROLLER_ROW="cr",O.CLASS_TOO_TALL="taller-than-window",O.CLASS_CLOSED="closed",O.CLASS_CLOSE_BUTTON="close-button",O.CLASS_DRAG="drag",O.DEFAULT_WIDTH=245,O.TEXT_CLOSED="Close Controls",O.TEXT_OPEN="Open Controls",f.bind(window,"keydown",function(t){"text"===document.activeElement.type||72!==t.which&&72!=t.keyCode||O.toggleHide()},!1),p.extend(O.prototype,{add:function(t,e){return m(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return m(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;p.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&M.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};return e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]),e=new O(e),this.__folders[t]=e,t=g(this,e.domElement),f.addClass(t,"folder"),e},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=f.getOffset(t.__ul).top,i=0;p.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(i+=f.getHeight(e))}),window.innerHeight-e-20<i?(f.addClass(t.domElement,O.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(f.removeClass(t.domElement,O.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&p.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(p.isUndefined(k)&&(k=new u,k.domElement.innerHTML=e),this.parent)throw Error("You can only call remember on a top level GUI.");var t=this;p.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&y(t),-1==t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&E(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,0<this.__rememberedObjects.length&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=w(this)),t.folders={},p.each(this.__folders,function(e,i){t.folders[i]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=w(this),_(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[R]=w(this,!0)),this.load.remembered[t]=w(this),this.preset=t,x(this,t,!0)},revert:function(t){p.each(this.__controllers,function(e){this.getRoot().load.remembered?A(t||this.getRoot(),e):e.setValue(e.initialValue)},this),p.each(this.__folders,function(t){t.revert(t)}),t||_(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&T(this.__listening)}}),O}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n",dat.controllers.factory=function(t,e,i,n,r,o,s){return function(a,h,l,c){var d=a[h];return s.isArray(l)||s.isObject(l)?new t(a,h,l):s.isNumber(d)?s.isNumber(l)&&s.isNumber(c)?new i(a,h,l,c):new e(a,h,{min:l,max:c}):s.isString(d)?new n(a,h):s.isFunction(d)?new r(a,h,""):s.isBoolean(d)?new o(a,h):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(t,e,i){var n=function(t,i){function r(){o.setValue(o.__input.value)}n.superclass.call(this,t,i);var o=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",r),e.bind(this.__input,"change",r),e.bind(this.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue());
}),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return n.superclass=t,i.extend(n.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),n.superclass.prototype.updateDisplay.call(this)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(t,e,i,n,r){function o(t,e,i,n){t.style.background="",r.each(h,function(r){t.style.cssText+="background: "+r+"linear-gradient("+e+", "+i+" 0%, "+n+" 100%); "})}function s(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var a=function(t,h){function l(t){f(t),e.bind(window,"mousemove",f),e.bind(window,"mouseup",c)}function c(){e.unbind(window,"mousemove",f),e.unbind(window,"mouseup",c)}function d(){var t=n(this.value);!1!==t?(m.__color.__state=t,m.setValue(m.__color.toOriginal())):this.value=m.__color.toString()}function u(){e.unbind(window,"mousemove",p),e.unbind(window,"mouseup",u)}function f(t){t.preventDefault();var i=e.getWidth(m.__saturation_field),n=e.getOffset(m.__saturation_field),r=(t.clientX-n.left+document.body.scrollLeft)/i;return t=1-(t.clientY-n.top+document.body.scrollTop)/i,t>1?t=1:0>t&&(t=0),r>1?r=1:0>r&&(r=0),m.__color.v=t,m.__color.s=r,m.setValue(m.__color.toOriginal()),!1}function p(t){t.preventDefault();var i=e.getHeight(m.__hue_field),n=e.getOffset(m.__hue_field);return t=1-(t.clientY-n.top+document.body.scrollTop)/i,t>1?t=1:0>t&&(t=0),m.__color.h=360*t,m.setValue(m.__color.toOriginal()),!1}a.superclass.call(this,t,h),this.__color=new i(this.getValue()),this.__temp=new i(0);var m=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&d.call(this)}),e.bind(this.__input,"blur",d),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(m.__selector,"drag")})});var g=document.createElement("div");r.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),r.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(.5>this.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),r.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),r.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),r.extend(g.style,{width:"100%",height:"100%",background:"none"}),o(g,"top","rgba(0,0,0,0)","#000"),r.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),s(this.__hue_field),r.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",l),e.bind(this.__field_knob,"mousedown",l),e.bind(this.__hue_field,"mousedown",function(t){p(t),e.bind(window,"mousemove",p),e.bind(window,"mouseup",u)}),this.__saturation_field.appendChild(g),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=t,r.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=n(this.getValue());if(!1!==t){var e=!1;r.each(i.COMPONENTS,function(i){return r.isUndefined(t[i])||r.isUndefined(this.__color.__state[i])||t[i]===this.__color.__state[i]?void 0:(e=!0,{})},this),e&&r.extend(this.__color.__state,t)}r.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=.5>this.__color.v||.5<this.__color.s?255:0,a=255-s;r.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),r.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var h=["-moz-","-o-","-webkit-","-ms-",""];return a}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(t,e,i,n){function r(t,e,i){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,i),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,i),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,i,r){if("HEX"===t.__state.space)t.__state[i]=e.component_from_hex(t.__state.hex,r);else{if("HSV"!==t.__state.space)throw"Corrupted color state";n.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var i=e.rgb_to_hsv(t.r,t.g,t.b);n.extend(t.__state,{s:i.s,v:i.v}),n.isNaN(i.h)?n.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=i.h}var h=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return h.COMPONENTS="r g b h s v hex a".split(" "),n.extend(h.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),r(h.prototype,"r",2),r(h.prototype,"g",1),r(h.prototype,"b",0),o(h.prototype,"h"),o(h.prototype,"s"),o(h.prototype,"v"),Object.defineProperty(h.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(h.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),h}(dat.color.interpret,dat.color.math=function(){var t;return{hsv_to_rgb:function(t,e,i){var n=t/60-Math.floor(t/60),r=i*(1-e),o=i*(1-n*e);return e=i*(1-(1-n)*e),t=[[i,e,r],[o,i,r],[r,i,e],[r,o,i],[e,r,i],[i,r,o]][Math.floor(t/60)%6],{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(t,e,i){var n=Math.min(t,e,i),r=Math.max(t,e,i),n=r-n;return 0==r?{h:NaN,s:0,v:0}:(t=(t==r?(e-i)/n:e==r?2+(i-t)/n:4+(t-e)/n)/6,0>t&&(t+=1),{h:360*t,s:n/r,v:r/255})},rgb_to_hex:function(t,e,i){return t=this.hex_with_component(0,2,t),t=this.hex_with_component(t,1,e),t=this.hex_with_component(t,0,i)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,i,n){return n<<(t=8*i)|e&~(255<<t)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),dat.dom.CenteredDiv=function(t,e){var i=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var i=this;t.bind(this.backgroundElement,"click",function(){i.hide()})};return i.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},i.prototype.hide=function(){var e=this,i=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",i),t.unbind(e.domElement,"transitionend",i),t.unbind(e.domElement,"oTransitionEnd",i)};t.bind(this.domElement,"webkitTransitionEnd",i),t.bind(this.domElement,"transitionend",i),t.bind(this.domElement,"oTransitionEnd",i),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},i.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},i}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common);