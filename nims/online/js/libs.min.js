function HighlightedDate(e,t,i){"use strict";this.date=e,this.desc=t,this.style=i}if(!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function i(e,t){t=t||te;var i=t.createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}function r(e){var t=!!e&&"length"in e&&e.length,i=pe.type(e);return"function"!==i&&!pe.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function n(e,t,i){return pe.isFunction(t)?pe.grep(e,function(e,r){return!!t.call(e,r,e)!==i}):t.nodeType?pe.grep(e,function(e){return e===t!==i}):"string"!=typeof t?pe.grep(e,function(e){return ae.call(t,e)>-1!==i}):Te.test(t)?pe.filter(t,e,i):(t=pe.filter(t,e),pe.grep(e,function(e){return ae.call(t,e)>-1!==i&&1===e.nodeType}))}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t={};return pe.each(e.match(Me)||[],function(e,i){t[i]=!0}),t}function s(e){return e}function l(e){throw e}function h(e,t,i){var r;try{e&&pe.isFunction(r=e.promise)?r.call(e).done(t).fail(i):e&&pe.isFunction(r=e.then)?r.call(e,t,i):t.call(void 0,e)}catch(e){i.call(void 0,e)}}function c(){te.removeEventListener("DOMContentLoaded",c),e.removeEventListener("load",c),pe.ready()}function d(){this.expando=pe.expando+d.uid++}function u(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Be.test(e)?JSON.parse(e):e)}function f(e,t,i){var r;if(void 0===i&&1===e.nodeType)if(r="data-"+t.replace(Ne,"-$&").toLowerCase(),i=e.getAttribute(r),"string"==typeof i){try{i=u(i)}catch(n){}Ie.set(e,t,i)}else i=void 0;return i}function p(e,t,i,r){var n,o=1,a=20,s=r?function(){return r.cur()}:function(){return pe.css(e,t,"")},l=s(),h=i&&i[3]||(pe.cssNumber[t]?"":"px"),c=(pe.cssNumber[t]||"px"!==h&&+l)&&ze.exec(pe.css(e,t));if(c&&c[3]!==h){h=h||c[3],i=i||[],c=+l||1;do o=o||".5",c/=o,pe.style(e,t,c+h);while(o!==(o=s()/l)&&1!==o&&--a)}return i&&(c=+c||+l||0,n=i[1]?c+(i[1]+1)*i[2]:+i[2],r&&(r.unit=h,r.start=c,r.end=n)),n}function m(e){var t,i=e.ownerDocument,r=e.nodeName,n=Ge[r];return n?n:(t=i.body.appendChild(i.createElement(r)),n=pe.css(t,"display"),t.parentNode.removeChild(t),"none"===n&&(n="block"),Ge[r]=n,n)}function g(e,t){for(var i,r,n=[],o=0,a=e.length;a>o;o++)r=e[o],r.style&&(i=r.style.display,t?("none"===i&&(n[o]=Le.get(r,"display")||null,n[o]||(r.style.display="")),""===r.style.display&&je(r)&&(n[o]=m(r))):"none"!==i&&(n[o]="none",Le.set(r,"display",i)));for(o=0;a>o;o++)null!=n[o]&&(e[o].style.display=n[o]);return e}function v(e,t){var i;return i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&pe.nodeName(e,t)?pe.merge([e],i):i}function y(e,t){for(var i=0,r=e.length;r>i;i++)Le.set(e[i],"globalEval",!t||Le.get(t[i],"globalEval"))}function A(e,t,i,r,n){for(var o,a,s,l,h,c,d=t.createDocumentFragment(),u=[],f=0,p=e.length;p>f;f++)if(o=e[f],o||0===o)if("object"===pe.type(o))pe.merge(u,o.nodeType?[o]:o);else if(Qe.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(Ye.exec(o)||["",""])[1].toLowerCase(),l=Xe[s]||Xe._default,a.innerHTML=l[1]+pe.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;pe.merge(u,a.childNodes),a=d.firstChild,a.textContent=""}else u.push(t.createTextNode(o));for(d.textContent="",f=0;o=u[f++];)if(r&&pe.inArray(o,r)>-1)n&&n.push(o);else if(h=pe.contains(o.ownerDocument,o),a=v(d.appendChild(o),"script"),h&&y(a),i)for(c=0;o=a[c++];)qe.test(o.type||"")&&i.push(o);return d}function b(){return!0}function E(){return!1}function x(){try{return te.activeElement}catch(e){}}function w(e,t,i,r,n,o){var a,s;if("object"==typeof t){"string"!=typeof i&&(r=r||i,i=void 0);for(s in t)w(e,s,i,r,t[s],o);return e}if(null==r&&null==n?(n=i,r=i=void 0):null==n&&("string"==typeof i?(n=r,r=void 0):(n=r,r=i,i=void 0)),n===!1)n=E;else if(!n)return e;return 1===o&&(a=n,n=function(e){return pe().off(e),a.apply(this,arguments)},n.guid=a.guid||(a.guid=pe.guid++)),e.each(function(){pe.event.add(this,t,n,r,i)})}function T(e,t){return pe.nodeName(e,"table")&&pe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e:e}function _(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function S(e){var t=rt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function C(e,t){var i,r,n,o,a,s,l,h;if(1===t.nodeType){if(Le.hasData(e)&&(o=Le.access(e),a=Le.set(t,o),h=o.events)){delete a.handle,a.events={};for(n in h)for(i=0,r=h[n].length;r>i;i++)pe.event.add(t,n,h[n][i])}Ie.hasData(e)&&(s=Ie.access(e),l=pe.extend({},s),Ie.set(t,l))}}function R(e,t){var i=t.nodeName.toLowerCase();"input"===i&&We.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function k(e,t,r,n){t=ne.apply([],t);var o,a,s,l,h,c,d=0,u=e.length,f=u-1,p=t[0],m=pe.isFunction(p);if(m||u>1&&"string"==typeof p&&!ue.checkClone&&it.test(p))return e.each(function(i){var o=e.eq(i);m&&(t[0]=p.call(this,i,o.html())),k(o,t,r,n)});if(u&&(o=A(t,e[0].ownerDocument,!1,e,n),a=o.firstChild,1===o.childNodes.length&&(o=a),a||n)){for(s=pe.map(v(o,"script"),_),l=s.length;u>d;d++)h=o,d!==f&&(h=pe.clone(h,!0,!0),l&&pe.merge(s,v(h,"script"))),r.call(e[d],h,d);if(l)for(c=s[s.length-1].ownerDocument,pe.map(s,S),d=0;l>d;d++)h=s[d],qe.test(h.type||"")&&!Le.access(h,"globalEval")&&pe.contains(c,h)&&(h.src?pe._evalUrl&&pe._evalUrl(h.src):i(h.textContent.replace(nt,""),c))}return e}function M(e,t,i){for(var r,n=t?pe.filter(t,e):e,o=0;null!=(r=n[o]);o++)i||1!==r.nodeType||pe.cleanData(v(r)),r.parentNode&&(i&&pe.contains(r.ownerDocument,r)&&y(v(r,"script")),r.parentNode.removeChild(r));return e}function P(e,t,i){var r,n,o,a,s=e.style;return i=i||st(e),i&&(a=i.getPropertyValue(t)||i[t],""!==a||pe.contains(e.ownerDocument,e)||(a=pe.style(e,t)),!ue.pixelMarginRight()&&at.test(a)&&ot.test(t)&&(r=s.width,n=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=r,s.minWidth=n,s.maxWidth=o)),void 0!==a?a+"":a}function D(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function H(e){if(e in ut)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=dt.length;i--;)if(e=dt[i]+t,e in ut)return e}function O(e,t,i){var r=ze.exec(t);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):t}function L(e,t,i,r,n){var o,a=0;for(o=i===(r?"border":"content")?4:"width"===t?1:0;4>o;o+=2)"margin"===i&&(a+=pe.css(e,i+Ue[o],!0,n)),r?("content"===i&&(a-=pe.css(e,"padding"+Ue[o],!0,n)),"margin"!==i&&(a-=pe.css(e,"border"+Ue[o]+"Width",!0,n))):(a+=pe.css(e,"padding"+Ue[o],!0,n),"padding"!==i&&(a+=pe.css(e,"border"+Ue[o]+"Width",!0,n)));return a}function I(e,t,i){var r,n=!0,o=st(e),a="border-box"===pe.css(e,"boxSizing",!1,o);if(e.getClientRects().length&&(r=e.getBoundingClientRect()[t]),0>=r||null==r){if(r=P(e,t,o),(0>r||null==r)&&(r=e.style[t]),at.test(r))return r;n=a&&(ue.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+L(e,t,i||(a?"border":"content"),n,o)+"px"}function B(e,t,i,r,n){return new B.prototype.init(e,t,i,r,n)}function N(){pt&&(e.requestAnimationFrame(N),pe.fx.tick())}function F(){return e.setTimeout(function(){ft=void 0}),ft=pe.now()}function z(e,t){var i,r=0,n={height:e};for(t=t?1:0;4>r;r+=2-t)i=Ue[r],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function U(e,t,i){for(var r,n=(G.tweeners[t]||[]).concat(G.tweeners["*"]),o=0,a=n.length;a>o;o++)if(r=n[o].call(i,t,e))return r}function j(e,t,i){var r,n,o,a,s,l,h,c,d="width"in t||"height"in t,u=this,f={},p=e.style,m=e.nodeType&&je(e),v=Le.get(e,"fxshow");i.queue||(a=pe._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,pe.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(n=t[r],mt.test(n)){if(delete t[r],o=o||"toggle"===n,n===(m?"hide":"show")){if("show"!==n||!v||void 0===v[r])continue;m=!0}f[r]=v&&v[r]||pe.style(e,r)}if(l=!pe.isEmptyObject(t),l||!pe.isEmptyObject(f)){d&&1===e.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],h=v&&v.display,null==h&&(h=Le.get(e,"display")),c=pe.css(e,"display"),"none"===c&&(h?c=h:(g([e],!0),h=e.style.display||h,c=pe.css(e,"display"),g([e]))),("inline"===c||"inline-block"===c&&null!=h)&&"none"===pe.css(e,"float")&&(l||(u.done(function(){p.display=h}),null==h&&(c=p.display,h="none"===c?"":c)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1;for(r in f)l||(v?"hidden"in v&&(m=v.hidden):v=Le.access(e,"fxshow",{display:h}),o&&(v.hidden=!m),m&&g([e],!0),u.done(function(){m||g([e]),Le.remove(e,"fxshow");for(r in f)pe.style(e,r,f[r])})),l=U(m?v[r]:0,r,u),r in v||(v[r]=l.start,m&&(l.end=l.start,l.start=0))}}function V(e,t){var i,r,n,o,a;for(i in e)if(r=pe.camelCase(i),n=t[r],o=e[i],pe.isArray(o)&&(n=o[1],o=e[i]=o[0]),i!==r&&(e[r]=o,delete e[i]),a=pe.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(i in o)i in e||(e[i]=o[i],t[i]=n)}else t[r]=n}function G(e,t,i){var r,n,o=0,a=G.prefilters.length,s=pe.Deferred().always(function(){delete l.elem}),l=function(){if(n)return!1;for(var t=ft||F(),i=Math.max(0,h.startTime+h.duration-t),r=i/h.duration||0,o=1-r,a=0,l=h.tweens.length;l>a;a++)h.tweens[a].run(o);return s.notifyWith(e,[h,o,i]),1>o&&l?i:(s.resolveWith(e,[h]),!1)},h=s.promise({elem:e,props:pe.extend({},t),opts:pe.extend(!0,{specialEasing:{},easing:pe.easing._default},i),originalProperties:t,originalOptions:i,startTime:ft||F(),duration:i.duration,tweens:[],createTween:function(t,i){var r=pe.Tween(e,h.opts,t,i,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(r),r},stop:function(t){var i=0,r=t?h.tweens.length:0;if(n)return this;for(n=!0;r>i;i++)h.tweens[i].run(1);return t?(s.notifyWith(e,[h,1,0]),s.resolveWith(e,[h,t])):s.rejectWith(e,[h,t]),this}}),c=h.props;for(V(c,h.opts.specialEasing);a>o;o++)if(r=G.prefilters[o].call(h,e,c,h.opts))return pe.isFunction(r.stop)&&(pe._queueHooks(h.elem,h.opts.queue).stop=pe.proxy(r.stop,r)),r;return pe.map(c,U,h),pe.isFunction(h.opts.start)&&h.opts.start.call(e,h),pe.fx.timer(pe.extend(l,{elem:e,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function W(e){var t=e.match(Me)||[];return t.join(" ")}function Y(e){return e.getAttribute&&e.getAttribute("class")||""}function q(e,t,i,r){var n;if(pe.isArray(t))pe.each(t,function(t,n){i||St.test(e)?r(e,n):q(e+"["+("object"==typeof n&&null!=n?t:"")+"]",n,i,r)});else if(i||"object"!==pe.type(t))r(e,t);else for(n in t)q(e+"["+n+"]",t[n],i,r)}function X(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var r,n=0,o=t.toLowerCase().match(Me)||[];if(pe.isFunction(i))for(;r=o[n++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(i)):(e[r]=e[r]||[]).push(i)}}function Q(e,t,i,r){function n(s){var l;return o[s]=!0,pe.each(e[s]||[],function(e,s){var h=s(t,i,r);return"string"!=typeof h||a||o[h]?a?!(l=h):void 0:(t.dataTypes.unshift(h),n(h),!1)}),l}var o={},a=e===Nt;return n(t.dataTypes[0])||!o["*"]&&n("*")}function Z(e,t){var i,r,n=pe.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((n[i]?e:r||(r={}))[i]=t[i]);return r&&pe.extend(!0,e,r),e}function K(e,t,i){for(var r,n,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(n in s)if(s[n]&&s[n].test(r)){l.unshift(n);break}if(l[0]in i)o=l[0];else{for(n in i){if(!l[0]||e.converters[n+" "+l[0]]){o=n;break}a||(a=n)}o=o||a}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function J(e,t,i,r){var n,o,a,s,l,h={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)h[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=h[l+" "+o]||h["* "+o],!a)for(n in h)if(s=n.split(" "),s[1]===o&&(a=h[l+" "+s[0]]||h["* "+s[0]])){a===!0?a=h[n]:h[n]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function $(e){return pe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var ee=[],te=e.document,ie=Object.getPrototypeOf,re=ee.slice,ne=ee.concat,oe=ee.push,ae=ee.indexOf,se={},le=se.toString,he=se.hasOwnProperty,ce=he.toString,de=ce.call(Object),ue={},fe="3.1.1",pe=function(e,t){return new pe.fn.init(e,t)},me=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ge=/^-ms-/,ve=/-([a-z])/g,ye=function(e,t){return t.toUpperCase()};pe.fn=pe.prototype={jquery:fe,constructor:pe,length:0,toArray:function(){return re.call(this)},get:function(e){return null==e?re.call(this):0>e?this[e+this.length]:this[e]},pushStack:function(e){var t=pe.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return pe.each(this,e)},map:function(e){return this.pushStack(pe.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:oe,sort:ee.sort,splice:ee.splice},pe.extend=pe.fn.extend=function(){var e,t,i,r,n,o,a=arguments[0]||{},s=1,l=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[s]||{},s++),"object"==typeof a||pe.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)i=a[t],r=e[t],a!==r&&(h&&r&&(pe.isPlainObject(r)||(n=pe.isArray(r)))?(n?(n=!1,o=i&&pe.isArray(i)?i:[]):o=i&&pe.isPlainObject(i)?i:{},a[t]=pe.extend(h,o,r)):void 0!==r&&(a[t]=r));return a},pe.extend({expando:"jQuery"+(fe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===pe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=pe.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==le.call(e)||(t=ie(e))&&(i=he.call(t,"constructor")&&t.constructor,"function"!=typeof i||ce.call(i)!==de))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?se[le.call(e)]||"object":typeof e},globalEval:function(e){i(e)},camelCase:function(e){return e.replace(ge,"ms-").replace(ve,ye)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,n=0;if(r(e))for(i=e.length;i>n&&t.call(e[n],n,e[n])!==!1;n++);else for(n in e)if(t.call(e[n],n,e[n])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(me,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(r(Object(e))?pe.merge(i,"string"==typeof e?[e]:e):oe.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:ae.call(t,e,i)},merge:function(e,t){for(var i=+t.length,r=0,n=e.length;i>r;r++)e[n++]=t[r];return e.length=n,e},grep:function(e,t,i){for(var r,n=[],o=0,a=e.length,s=!i;a>o;o++)r=!t(e[o],o),r!==s&&n.push(e[o]);return n},map:function(e,t,i){var n,o,a=0,s=[];if(r(e))for(n=e.length;n>a;a++)o=t(e[a],a,i),null!=o&&s.push(o);else for(a in e)o=t(e[a],a,i),null!=o&&s.push(o);return ne.apply([],s)},guid:1,proxy:function(e,t){var i,r,n;return"string"==typeof t&&(i=e[t],t=e,e=i),pe.isFunction(e)?(r=re.call(arguments,2),n=function(){return e.apply(t||this,r.concat(re.call(arguments)))},n.guid=e.guid=e.guid||pe.guid++,n):void 0},now:Date.now,support:ue}),"function"==typeof Symbol&&(pe.fn[Symbol.iterator]=ee[Symbol.iterator]),pe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){se["[object "+t+"]"]=t.toLowerCase()});var Ae=function(e){function t(e,t,i,r){var n,o,a,s,l,h,c,u=t&&t.ownerDocument,p=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return i;if(!r&&((t?t.ownerDocument||t:U)!==H&&D(t),t=t||H,L)){if(11!==p&&(l=ve.exec(e)))if(n=l[1]){if(9===p){if(!(a=t.getElementById(n)))return i;if(a.id===n)return i.push(a),i}else if(u&&(a=u.getElementById(n))&&F(t,a)&&a.id===n)return i.push(a),i}else{if(l[2])return J.apply(i,t.getElementsByTagName(e)),i;if((n=l[3])&&x.getElementsByClassName&&t.getElementsByClassName)return J.apply(i,t.getElementsByClassName(n)),i}if(x.qsa&&!Y[e+" "]&&(!I||!I.test(e))){if(1!==p)u=t,c=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(Ee,xe):t.setAttribute("id",s=z),h=S(e),o=h.length;o--;)h[o]="#"+s+" "+f(h[o]);c=h.join(","),u=ye.test(e)&&d(t.parentNode)||t}if(c)try{return J.apply(i,u.querySelectorAll(c)),i}catch(m){}finally{s===z&&t.removeAttribute("id")}}}return R(e.replace(se,"$1"),t,i,r)}function i(){function e(i,r){return t.push(i+" ")>w.cacheLength&&delete e[t.shift()],e[i+" "]=r}var t=[];return e}function r(e){return e[z]=!0,e}function n(e){var t=H.createElement("fieldset");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),r=i.length;r--;)w.attrHandle[i[r]]=t}function a(e,t){var i=t&&e,r=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function s(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function h(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Te(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function c(e){return r(function(t){return t=+t,r(function(i,r){for(var n,o=e([],i.length,t),a=o.length;a--;)i[n=o[a]]&&(i[n]=!(r[n]=i[n]))})})}function d(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function u(){}function f(e){for(var t=0,i=e.length,r="";i>t;t++)r+=e[t].value;return r}function p(e,t,i){var r=t.dir,n=t.next,o=n||r,a=i&&"parentNode"===o,s=V++;return t.first?function(t,i,n){for(;t=t[r];)if(1===t.nodeType||a)return e(t,i,n);return!1}:function(t,i,l){var h,c,d,u=[j,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,i,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(d=t[z]||(t[z]={}),c=d[t.uniqueID]||(d[t.uniqueID]={}),n&&n===t.nodeName.toLowerCase())t=t[r]||t;else{if((h=c[o])&&h[0]===j&&h[1]===s)return u[2]=h[2];if(c[o]=u,u[2]=e(t,i,l))return!0}return!1}}function m(e){return e.length>1?function(t,i,r){for(var n=e.length;n--;)if(!e[n](t,i,r))return!1;return!0}:e[0]}function g(e,i,r){for(var n=0,o=i.length;o>n;n++)t(e,i[n],r);return r}function v(e,t,i,r,n){for(var o,a=[],s=0,l=e.length,h=null!=t;l>s;s++)(o=e[s])&&(i&&!i(o,r,n)||(a.push(o),h&&t.push(s)));return a}function y(e,t,i,n,o,a){return n&&!n[z]&&(n=y(n)),o&&!o[z]&&(o=y(o,a)),r(function(r,a,s,l){var h,c,d,u=[],f=[],p=a.length,m=r||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?m:v(m,u,e,s,l),A=i?o||(r?e:p||n)?[]:a:y;if(i&&i(y,A,s,l),n)for(h=v(A,f),n(h,[],s,l),c=h.length;c--;)(d=h[c])&&(A[f[c]]=!(y[f[c]]=d));if(r){if(o||e){if(o){for(h=[],c=A.length;c--;)(d=A[c])&&h.push(y[c]=d);o(null,A=[],h,l)}for(c=A.length;c--;)(d=A[c])&&(h=o?ee(r,d):u[c])>-1&&(r[h]=!(a[h]=d))}}else A=v(A===a?A.splice(p,A.length):A),o?o(null,a,A,l):J.apply(a,A)})}function A(e){for(var t,i,r,n=e.length,o=w.relative[e[0].type],a=o||w.relative[" "],s=o?1:0,l=p(function(e){return e===t},a,!0),h=p(function(e){return ee(t,e)>-1},a,!0),c=[function(e,i,r){var n=!o&&(r||i!==k)||((t=i).nodeType?l(e,i,r):h(e,i,r));return t=null,n}];n>s;s++)if(i=w.relative[e[s].type])c=[p(m(c),i)];else{if(i=w.filter[e[s].type].apply(null,e[s].matches),i[z]){for(r=++s;n>r&&!w.relative[e[r].type];r++);return y(s>1&&m(c),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),i,r>s&&A(e.slice(s,r)),n>r&&A(e=e.slice(r)),n>r&&f(e))}c.push(i)}return m(c)}function b(e,i){var n=i.length>0,o=e.length>0,a=function(r,a,s,l,h){var c,d,u,f=0,p="0",m=r&&[],g=[],y=k,A=r||o&&w.find.TAG("*",h),b=j+=null==y?1:Math.random()||.1,E=A.length;for(h&&(k=a===H||a||h);p!==E&&null!=(c=A[p]);p++){if(o&&c){for(d=0,a||c.ownerDocument===H||(D(c),s=!L);u=e[d++];)if(u(c,a||H,s)){l.push(c);break}h&&(j=b)}n&&((c=!u&&c)&&f--,r&&m.push(c))}if(f+=p,n&&p!==f){for(d=0;u=i[d++];)u(m,g,a,s);if(r){if(f>0)for(;p--;)m[p]||g[p]||(g[p]=Z.call(l));g=v(g)}J.apply(l,g),h&&!r&&g.length>0&&f+i.length>1&&t.uniqueSort(l)}return h&&(j=b,k=y),m};return n?r(a):a}var E,x,w,T,_,S,C,R,k,M,P,D,H,O,L,I,B,N,F,z="sizzle"+1*new Date,U=e.document,j=0,V=0,G=i(),W=i(),Y=i(),q=function(e,t){return e===t&&(P=!0),0},X={}.hasOwnProperty,Q=[],Z=Q.pop,K=Q.push,J=Q.push,$=Q.slice,ee=function(e,t){for(var i=0,r=e.length;r>i;i++)if(e[i]===t)return i;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\x00-\\xa0])+",ne="\\["+ie+"*("+re+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ie+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",ae=new RegExp(ie+"+","g"),se=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),he=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ce=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(oe),ue=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,Ae=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),be=function(e,t,i){var r="0x"+t-65536;return r!==r||i?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ee=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xe=function(e,t){return t?"\x00"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},we=function(){D()},Te=p(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{J.apply(Q=$.call(U.childNodes),U.childNodes),Q[U.childNodes.length].nodeType}catch(_e){J={apply:Q.length?function(e,t){K.apply(e,$.call(t))}:function(e,t){for(var i=e.length,r=0;e[i++]=t[r++];);e.length=i-1}}}x=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},D=t.setDocument=function(e){var t,i,r=e?e.ownerDocument||e:U;return r!==H&&9===r.nodeType&&r.documentElement?(H=r,O=H.documentElement,L=!_(H),U!==H&&(i=H.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",we,!1):i.attachEvent&&i.attachEvent("onunload",we)),x.attributes=n(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=n(function(e){return e.appendChild(H.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ge.test(H.getElementsByClassName),x.getById=n(function(e){return O.appendChild(e).id=z,!H.getElementsByName||!H.getElementsByName(z).length}),x.getById?(w.filter.ID=function(e){var t=e.replace(Ae,be);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var i=t.getElementById(e);return i?[i]:[]}}):(w.filter.ID=function(e){var t=e.replace(Ae,be);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},w.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var i,r,n,o=t.getElementById(e);if(o){if(i=o.getAttributeNode("id"),i&&i.value===e)return[o];for(n=t.getElementsByName(e),r=0;o=n[r++];)if(i=o.getAttributeNode("id"),i&&i.value===e)return[o]}return[]}}),w.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,r=[],n=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[n++];)1===i.nodeType&&r.push(i);return r}return o},w.find.CLASS=x.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&L?t.getElementsByClassName(e):void 0},B=[],I=[],(x.qsa=ge.test(H.querySelectorAll))&&(n(function(e){O.appendChild(e).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||I.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+z+"-]").length||I.push("~="),e.querySelectorAll(":checked").length||I.push(":checked"),e.querySelectorAll("a#"+z+"+*").length||I.push(".#.+[+~]")}),n(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=H.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&I.push("name"+ie+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&I.push(":enabled",":disabled"),O.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(x.matchesSelector=ge.test(N=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&n(function(e){x.disconnectedMatch=N.call(e,"*"),N.call(e,"[s!='']:x"),B.push("!=",oe)}),I=I.length&&new RegExp(I.join("|")),B=B.length&&new RegExp(B.join("|")),t=ge.test(O.compareDocumentPosition),F=t||ge.test(O.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(i.contains?i.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return P=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===H||e.ownerDocument===U&&F(U,e)?-1:t===H||t.ownerDocument===U&&F(U,t)?1:M?ee(M,e)-ee(M,t):0:4&i?-1:1)}:function(e,t){if(e===t)return P=!0,0;var i,r=0,n=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!n||!o)return e===H?-1:t===H?1:n?-1:o?1:M?ee(M,e)-ee(M,t):0;if(n===o)return a(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;s[r]===l[r];)r++;return r?a(s[r],l[r]):s[r]===U?-1:l[r]===U?1:0},H):H},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==H&&D(e),i=i.replace(ce,"='$1']"),x.matchesSelector&&L&&!Y[i+" "]&&(!B||!B.test(i))&&(!I||!I.test(i)))try{var r=N.call(e,i);if(r||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(n){}return t(i,H,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==H&&D(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==H&&D(e);var i=w.attrHandle[t.toLowerCase()],r=i&&X.call(w.attrHandle,t.toLowerCase())?i(e,t,!L):void 0;return void 0!==r?r:x.attributes||!L?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(Ee,xe)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],r=0,n=0;if(P=!x.detectDuplicates,M=!x.sortStable&&e.slice(0),e.sort(q),P){for(;t=e[n++];)t===e[n]&&(r=i.push(n));for(;r--;)e.splice(i[r],1)}return M=null,e},T=t.getText=function(e){var t,i="",r=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=T(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[r++];)i+=T(t);return i},w=t.selectors={cacheLength:50,createPseudo:r,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ae,be),e[3]=(e[3]||e[4]||e[5]||"").replace(Ae,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&de.test(i)&&(t=S(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ae,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=G[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&G(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,r){return function(n){var o=t.attr(n,e);return null==o?"!="===i:!i||(o+="","="===i?o===r:"!="===i?o!==r:"^="===i?r&&0===o.indexOf(r):"*="===i?r&&o.indexOf(r)>-1:"$="===i?r&&o.slice(-r.length)===r:"~="===i?(" "+o.replace(ae," ")+" ").indexOf(r)>-1:"|="===i&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,i,r,n){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===n?function(e){return!!e.parentNode}:function(t,i,l){var h,c,d,u,f,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,A=!1;if(g){if(o){for(;m;){for(u=t;u=u[m];)if(s?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(u=g,d=u[z]||(u[z]={}),c=d[u.uniqueID]||(d[u.uniqueID]={}),h=c[e]||[],f=h[0]===j&&h[1],A=f&&h[2],u=f&&g.childNodes[f];u=++f&&u&&u[m]||(A=f=0)||p.pop();)if(1===u.nodeType&&++A&&u===t){c[e]=[j,f,A];break}}else if(y&&(u=t,d=u[z]||(u[z]={}),c=d[u.uniqueID]||(d[u.uniqueID]={}),h=c[e]||[],f=h[0]===j&&h[1],A=f),A===!1)for(;(u=++f&&u&&u[m]||(A=f=0)||p.pop())&&((s?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++A||(y&&(d=u[z]||(u[z]={}),c=d[u.uniqueID]||(d[u.uniqueID]={}),c[e]=[j,A]),u!==t)););return A-=n,A===r||A%r===0&&A/r>=0}}},PSEUDO:function(e,i){var n,o=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[z]?o(i):o.length>1?(n=[e,e,"",i],w.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,n=o(e,i),a=n.length;a--;)r=ee(e,n[a]),e[r]=!(t[r]=n[a])}):function(e){return o(e,0,n)}):o}},pseudos:{not:r(function(e){var t=[],i=[],n=C(e.replace(se,"$1"));return n[z]?r(function(e,t,i,r){for(var o,a=n(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,n(t,null,o,i),t[0]=null,!i.pop()}}),has:r(function(e){return function(i){return t(e,i).length>0}}),contains:r(function(e){return e=e.replace(Ae,be),function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:r(function(e){return ue.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Ae,be).toLowerCase(),function(t){var i;do if(i=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),
i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:h(!1),disabled:h(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,i){return[0>i?i+t:i]}),even:c(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:c(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:c(function(e,t,i){for(var r=0>i?i+t:i;--r>=0;)e.push(r);return e}),gt:c(function(e,t,i){for(var r=0>i?i+t:i;++r<t;)e.push(r);return e})}},w.pseudos.nth=w.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[E]=s(E);for(E in{submit:!0,reset:!0})w.pseudos[E]=l(E);return u.prototype=w.filters=w.pseudos,w.setFilters=new u,S=t.tokenize=function(e,i){var r,n,o,a,s,l,h,c=W[e+" "];if(c)return i?0:c.slice(0);for(s=e,l=[],h=w.preFilter;s;){r&&!(n=le.exec(s))||(n&&(s=s.slice(n[0].length)||s),l.push(o=[])),r=!1,(n=he.exec(s))&&(r=n.shift(),o.push({value:r,type:n[0].replace(se," ")}),s=s.slice(r.length));for(a in w.filter)!(n=fe[a].exec(s))||h[a]&&!(n=h[a](n))||(r=n.shift(),o.push({value:r,type:a,matches:n}),s=s.slice(r.length));if(!r)break}return i?s.length:s?t.error(e):W(e,l).slice(0)},C=t.compile=function(e,t){var i,r=[],n=[],o=Y[e+" "];if(!o){for(t||(t=S(e)),i=t.length;i--;)o=A(t[i]),o[z]?r.push(o):n.push(o);o=Y(e,b(n,r)),o.selector=e}return o},R=t.select=function(e,t,i,r){var n,o,a,s,l,h="function"==typeof e&&e,c=!r&&S(e=h.selector||e);if(i=i||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&L&&w.relative[o[1].type]){if(t=(w.find.ID(a.matches[0].replace(Ae,be),t)||[])[0],!t)return i;h&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(n=fe.needsContext.test(e)?0:o.length;n--&&(a=o[n],!w.relative[s=a.type]);)if((l=w.find[s])&&(r=l(a.matches[0].replace(Ae,be),ye.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(n,1),e=r.length&&f(o),!e)return J.apply(i,r),i;break}}return(h||C(e,c))(r,t,!L,i,!t||ye.test(e)&&d(t.parentNode)||t),i},x.sortStable=z.split("").sort(q).join("")===z,x.detectDuplicates=!!P,D(),x.sortDetached=n(function(e){return 1&e.compareDocumentPosition(H.createElement("fieldset"))}),n(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&n(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),n(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,i){var r;return i?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);pe.find=Ae,pe.expr=Ae.selectors,pe.expr[":"]=pe.expr.pseudos,pe.uniqueSort=pe.unique=Ae.uniqueSort,pe.text=Ae.getText,pe.isXMLDoc=Ae.isXML,pe.contains=Ae.contains,pe.escapeSelector=Ae.escape;var be=function(e,t,i){for(var r=[],n=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&pe(e).is(i))break;r.push(e)}return r},Ee=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},xe=pe.expr.match.needsContext,we=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Te=/^.[^:#\[\.,]*$/;pe.filter=function(e,t,i){var r=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?pe.find.matchesSelector(r,e)?[r]:[]:pe.find.matches(e,pe.grep(t,function(e){return 1===e.nodeType}))},pe.fn.extend({find:function(e){var t,i,r=this.length,n=this;if("string"!=typeof e)return this.pushStack(pe(e).filter(function(){for(t=0;r>t;t++)if(pe.contains(n[t],this))return!0}));for(i=this.pushStack([]),t=0;r>t;t++)pe.find(e,n[t],i);return r>1?pe.uniqueSort(i):i},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&xe.test(e)?pe(e):e||[],!1).length}});var _e,Se=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ce=pe.fn.init=function(e,t,i){var r,n;if(!e)return this;if(i=i||_e,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Se.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof pe?t[0]:t,pe.merge(this,pe.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:te,!0)),we.test(r[1])&&pe.isPlainObject(t))for(r in t)pe.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return n=te.getElementById(r[2]),n&&(this[0]=n,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):pe.isFunction(e)?void 0!==i.ready?i.ready(e):e(pe):pe.makeArray(e,this)};Ce.prototype=pe.fn,_e=pe(te);var Re=/^(?:parents|prev(?:Until|All))/,ke={children:!0,contents:!0,next:!0,prev:!0};pe.fn.extend({has:function(e){var t=pe(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(pe.contains(this,t[e]))return!0})},closest:function(e,t){var i,r=0,n=this.length,o=[],a="string"!=typeof e&&pe(e);if(!xe.test(e))for(;n>r;r++)for(i=this[r];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&pe.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?pe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ae.call(pe(e),this[0]):ae.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(pe.uniqueSort(pe.merge(this.get(),pe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),pe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return be(e,"parentNode")},parentsUntil:function(e,t,i){return be(e,"parentNode",i)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return be(e,"nextSibling")},prevAll:function(e){return be(e,"previousSibling")},nextUntil:function(e,t,i){return be(e,"nextSibling",i)},prevUntil:function(e,t,i){return be(e,"previousSibling",i)},siblings:function(e){return Ee((e.parentNode||{}).firstChild,e)},children:function(e){return Ee(e.firstChild)},contents:function(e){return e.contentDocument||pe.merge([],e.childNodes)}},function(e,t){pe.fn[e]=function(i,r){var n=pe.map(this,t,i);return"Until"!==e.slice(-5)&&(r=i),r&&"string"==typeof r&&(n=pe.filter(r,n)),this.length>1&&(ke[e]||pe.uniqueSort(n),Re.test(e)&&n.reverse()),this.pushStack(n)}});var Me=/[^\x20\t\r\n\f]+/g;pe.Callbacks=function(e){e="string"==typeof e?a(e):pe.extend({},e);var t,i,r,n,o=[],s=[],l=-1,h=function(){for(n=e.once,r=t=!0;s.length;l=-1)for(i=s.shift();++l<o.length;)o[l].apply(i[0],i[1])===!1&&e.stopOnFalse&&(l=o.length,i=!1);e.memory||(i=!1),t=!1,n&&(o=i?[]:"")},c={add:function(){return o&&(i&&!t&&(l=o.length-1,s.push(i)),function r(t){pe.each(t,function(t,i){pe.isFunction(i)?e.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==pe.type(i)&&r(i)})}(arguments),i&&!t&&h()),this},remove:function(){return pe.each(arguments,function(e,t){for(var i;(i=pe.inArray(t,o,i))>-1;)o.splice(i,1),l>=i&&l--}),this},has:function(e){return e?pe.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return n=s=[],o=i="",this},disabled:function(){return!o},lock:function(){return n=s=[],i||t||(o=i=""),this},locked:function(){return!!n},fireWith:function(e,i){return n||(i=i||[],i=[e,i.slice?i.slice():i],s.push(i),t||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},pe.extend({Deferred:function(t){var i=[["notify","progress",pe.Callbacks("memory"),pe.Callbacks("memory"),2],["resolve","done",pe.Callbacks("once memory"),pe.Callbacks("once memory"),0,"resolved"],["reject","fail",pe.Callbacks("once memory"),pe.Callbacks("once memory"),1,"rejected"]],r="pending",n={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return n.then(null,e)},pipe:function(){var e=arguments;return pe.Deferred(function(t){pe.each(i,function(i,r){var n=pe.isFunction(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=n&&n.apply(this,arguments);e&&pe.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,n?[e]:arguments)})}),e=null}).promise()},then:function(t,r,n){function o(t,i,r,n){return function(){var h=this,c=arguments,d=function(){var e,d;if(!(a>t)){if(e=r.apply(h,c),e===i.promise())throw new TypeError("Thenable self-resolution");d=e&&("object"==typeof e||"function"==typeof e)&&e.then,pe.isFunction(d)?n?d.call(e,o(a,i,s,n),o(a,i,l,n)):(a++,d.call(e,o(a,i,s,n),o(a,i,l,n),o(a,i,s,i.notifyWith))):(r!==s&&(h=void 0,c=[e]),(n||i.resolveWith)(h,c))}},u=n?d:function(){try{d()}catch(e){pe.Deferred.exceptionHook&&pe.Deferred.exceptionHook(e,u.stackTrace),t+1>=a&&(r!==l&&(h=void 0,c=[e]),i.rejectWith(h,c))}};t?u():(pe.Deferred.getStackHook&&(u.stackTrace=pe.Deferred.getStackHook()),e.setTimeout(u))}}var a=0;return pe.Deferred(function(e){i[0][3].add(o(0,e,pe.isFunction(n)?n:s,e.notifyWith)),i[1][3].add(o(0,e,pe.isFunction(t)?t:s)),i[2][3].add(o(0,e,pe.isFunction(r)?r:l))}).promise()},promise:function(e){return null!=e?pe.extend(e,n):n}},o={};return pe.each(i,function(e,t){var a=t[2],s=t[5];n[t[1]]=a.add,s&&a.add(function(){r=s},i[3-e][2].disable,i[0][2].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,i=t,r=Array(i),n=re.call(arguments),o=pe.Deferred(),a=function(e){return function(i){r[e]=this,n[e]=arguments.length>1?re.call(arguments):i,--t||o.resolveWith(r,n)}};if(1>=t&&(h(e,o.done(a(i)).resolve,o.reject),"pending"===o.state()||pe.isFunction(n[i]&&n[i].then)))return o.then();for(;i--;)h(n[i],a(i),o.reject);return o.promise()}});var Pe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;pe.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&Pe.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},pe.readyException=function(t){e.setTimeout(function(){throw t})};var De=pe.Deferred();pe.fn.ready=function(e){return De.then(e)["catch"](function(e){pe.readyException(e)}),this},pe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?pe.readyWait++:pe.ready(!0)},ready:function(e){(e===!0?--pe.readyWait:pe.isReady)||(pe.isReady=!0,e!==!0&&--pe.readyWait>0||De.resolveWith(te,[pe]))}}),pe.ready.then=De.then,"complete"===te.readyState||"loading"!==te.readyState&&!te.documentElement.doScroll?e.setTimeout(pe.ready):(te.addEventListener("DOMContentLoaded",c),e.addEventListener("load",c));var He=function(e,t,i,r,n,o,a){var s=0,l=e.length,h=null==i;if("object"===pe.type(i)){n=!0;for(s in i)He(e,t,s,i[s],!0,o,a)}else if(void 0!==r&&(n=!0,pe.isFunction(r)||(a=!0),h&&(a?(t.call(e,r),t=null):(h=t,t=function(e,t,i){return h.call(pe(e),i)})),t))for(;l>s;s++)t(e[s],i,a?r:r.call(e[s],s,t(e[s],i)));return n?e:h?t.call(e):l?t(e[0],i):o},Oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};d.uid=1,d.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var r,n=this.cache(e);if("string"==typeof t)n[pe.camelCase(t)]=i;else for(r in t)n[pe.camelCase(r)]=t[r];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][pe.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,r=e[this.expando];if(void 0!==r){if(void 0!==t){pe.isArray(t)?t=t.map(pe.camelCase):(t=pe.camelCase(t),t=t in r?[t]:t.match(Me)||[]),i=t.length;for(;i--;)delete r[t[i]]}(void 0===t||pe.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!pe.isEmptyObject(t)}};var Le=new d,Ie=new d,Be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ne=/[A-Z]/g;pe.extend({hasData:function(e){return Ie.hasData(e)||Le.hasData(e)},data:function(e,t,i){return Ie.access(e,t,i)},removeData:function(e,t){Ie.remove(e,t)},_data:function(e,t,i){return Le.access(e,t,i)},_removeData:function(e,t){Le.remove(e,t)}}),pe.fn.extend({data:function(e,t){var i,r,n,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(n=Ie.get(o),1===o.nodeType&&!Le.get(o,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&(r=a[i].name,0===r.indexOf("data-")&&(r=pe.camelCase(r.slice(5)),f(o,r,n[r])));Le.set(o,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each(function(){Ie.set(this,e)}):He(this,function(t){var i;if(o&&void 0===t){if(i=Ie.get(o,e),void 0!==i)return i;if(i=f(o,e),void 0!==i)return i}else this.each(function(){Ie.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ie.remove(this,e)})}}),pe.extend({queue:function(e,t,i){var r;return e?(t=(t||"fx")+"queue",r=Le.get(e,t),i&&(!r||pe.isArray(i)?r=Le.access(e,t,pe.makeArray(i)):r.push(i)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=pe.queue(e,t),r=i.length,n=i.shift(),o=pe._queueHooks(e,t),a=function(){pe.dequeue(e,t)};"inprogress"===n&&(n=i.shift(),r--),n&&("fx"===t&&i.unshift("inprogress"),delete o.stop,n.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Le.get(e,i)||Le.access(e,i,{empty:pe.Callbacks("once memory").add(function(){Le.remove(e,[t+"queue",i])})})}}),pe.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?pe.queue(this[0],e):void 0===t?this:this.each(function(){var i=pe.queue(this,e,t);pe._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&pe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){pe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,r=1,n=pe.Deferred(),o=this,a=this.length,s=function(){--r||n.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)i=Le.get(o[a],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(s));return s(),n.promise(t)}});var Fe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ze=new RegExp("^(?:([+-])=|)("+Fe+")([a-z%]*)$","i"),Ue=["Top","Right","Bottom","Left"],je=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&pe.contains(e.ownerDocument,e)&&"none"===pe.css(e,"display")},Ve=function(e,t,i,r){var n,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];n=i.apply(e,r||[]);for(o in t)e.style[o]=a[o];return n},Ge={};pe.fn.extend({show:function(){return g(this,!0)},hide:function(){return g(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){je(this)?pe(this).show():pe(this).hide()})}});var We=/^(?:checkbox|radio)$/i,Ye=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,qe=/^$|\/(?:java|ecma)script/i,Xe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td;var Qe=/<|&#?\w+;/;!function(){var e=te.createDocumentFragment(),t=e.appendChild(te.createElement("div")),i=te.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),ue.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ue.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ze=te.documentElement,Ke=/^key/,Je=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,$e=/^([^.]*)(?:\.(.+)|)/;pe.event={global:{},add:function(e,t,i,r,n){var o,a,s,l,h,c,d,u,f,p,m,g=Le.get(e);if(g)for(i.handler&&(o=i,i=o.handler,n=o.selector),n&&pe.find.matchesSelector(Ze,n),i.guid||(i.guid=pe.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return"undefined"!=typeof pe&&pe.event.triggered!==t.type?pe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Me)||[""],h=t.length;h--;)s=$e.exec(t[h])||[],f=m=s[1],p=(s[2]||"").split(".").sort(),f&&(d=pe.event.special[f]||{},f=(n?d.delegateType:d.bindType)||f,d=pe.event.special[f]||{},c=pe.extend({type:f,origType:m,data:r,handler:i,guid:i.guid,selector:n,needsContext:n&&pe.expr.match.needsContext.test(n),namespace:p.join(".")},o),(u=l[f])||(u=l[f]=[],u.delegateCount=0,d.setup&&d.setup.call(e,r,p,a)!==!1||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),n?u.splice(u.delegateCount++,0,c):u.push(c),pe.event.global[f]=!0)},remove:function(e,t,i,r,n){var o,a,s,l,h,c,d,u,f,p,m,g=Le.hasData(e)&&Le.get(e);if(g&&(l=g.events)){for(t=(t||"").match(Me)||[""],h=t.length;h--;)if(s=$e.exec(t[h])||[],f=m=s[1],p=(s[2]||"").split(".").sort(),f){for(d=pe.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,u=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=u.length;o--;)c=u[o],!n&&m!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(u.splice(o,1),c.selector&&u.delegateCount--,d.remove&&d.remove.call(e,c));a&&!u.length&&(d.teardown&&d.teardown.call(e,p,g.handle)!==!1||pe.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)pe.event.remove(e,f+t[h],i,r,!0);pe.isEmptyObject(l)&&Le.remove(e,"handle events")}},dispatch:function(e){var t,i,r,n,o,a,s=pe.event.fix(e),l=new Array(arguments.length),h=(Le.get(this,"events")||{})[s.type]||[],c=pe.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,s)!==!1){for(a=pe.event.handlers.call(this,s,h),t=0;(n=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=n.elem,i=0;(o=n.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,r=((pe.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,l),void 0!==r&&(s.result=r)===!1&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var i,r,n,o,a,s=[],l=t.delegateCount,h=e.target;if(l&&h.nodeType&&!("click"===e.type&&e.button>=1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==e.type||h.disabled!==!0)){for(o=[],a={},i=0;l>i;i++)r=t[i],n=r.selector+" ",void 0===a[n]&&(a[n]=r.needsContext?pe(n,this).index(h)>-1:pe.find(n,this,null,[h]).length),a[n]&&o.push(r);o.length&&s.push({elem:h,handlers:o})}return h=this,l<t.length&&s.push({elem:h,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(pe.Event.prototype,e,{enumerable:!0,configurable:!0,get:pe.isFunction(t)?function(){return this.originalEvent?t(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[e]:void 0},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[pe.expando]?e:new pe.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==x()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===x()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&pe.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return pe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},pe.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},pe.Event=function(e,t){return this instanceof pe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?b:E,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&pe.extend(this,t),this.timeStamp=e&&e.timeStamp||pe.now(),void(this[pe.expando]=!0)):new pe.Event(e,t)},pe.Event.prototype={constructor:pe.Event,isDefaultPrevented:E,isPropagationStopped:E,isImmediatePropagationStopped:E,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=b,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=b,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=b,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},pe.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ke.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Je.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},pe.event.addProp),pe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){pe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,r=this,n=e.relatedTarget,o=e.handleObj;return n&&(n===r||pe.contains(r,n))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),pe.fn.extend({on:function(e,t,i,r){return w(this,e,t,i,r)},one:function(e,t,i,r){return w(this,e,t,i,r,1)},off:function(e,t,i){var r,n;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,pe(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return t!==!1&&"function"!=typeof t||(i=t,t=void 0),i===!1&&(i=E),this.each(function(){pe.event.remove(this,e,i,t)})}});var et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,tt=/<script|<style|<link/i,it=/checked\s*(?:[^=]|=\s*.checked.)/i,rt=/^true\/(.*)/,nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;pe.extend({htmlPrefilter:function(e){return e.replace(et,"<$1></$2>")},clone:function(e,t,i){var r,n,o,a,s=e.cloneNode(!0),l=pe.contains(e.ownerDocument,e);if(!(ue.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||pe.isXMLDoc(e)))for(a=v(s),o=v(e),r=0,n=o.length;n>r;r++)R(o[r],a[r]);if(t)if(i)for(o=o||v(e),a=a||v(s),r=0,n=o.length;n>r;r++)C(o[r],a[r]);else C(e,s);return a=v(s,"script"),a.length>0&&y(a,!l&&v(e,"script")),s},cleanData:function(e){for(var t,i,r,n=pe.event.special,o=0;void 0!==(i=e[o]);o++)if(Oe(i)){if(t=i[Le.expando]){if(t.events)for(r in t.events)n[r]?pe.event.remove(i,r):pe.removeEvent(i,r,t.handle);i[Le.expando]=void 0}i[Ie.expando]&&(i[Ie.expando]=void 0)}}}),pe.fn.extend({detach:function(e){return M(this,e,!0)},remove:function(e){return M(this,e)},text:function(e){return He(this,function(e){return void 0===e?pe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return k(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=T(this,e);t.appendChild(e)}})},prepend:function(){return k(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=T(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return k(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return k(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(pe.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return pe.clone(this,e,t)})},html:function(e){return He(this,function(e){var t=this[0]||{},i=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!tt.test(e)&&!Xe[(Ye.exec(e)||["",""])[1].toLowerCase()]){e=pe.htmlPrefilter(e);try{for(;r>i;i++)t=this[i]||{},1===t.nodeType&&(pe.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(n){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return k(this,arguments,function(t){var i=this.parentNode;pe.inArray(this,e)<0&&(pe.cleanData(v(this)),i&&i.replaceChild(t,this))},e)}}),pe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){pe.fn[e]=function(e){for(var i,r=[],n=pe(e),o=n.length-1,a=0;o>=a;a++)i=a===o?this:this.clone(!0),pe(n[a])[t](i),oe.apply(r,i.get());return this.pushStack(r)}});var ot=/^margin/,at=new RegExp("^("+Fe+")(?!px)[a-z%]+$","i"),st=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)};!function(){function t(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ze.appendChild(a);var t=e.getComputedStyle(s);i="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,s.style.marginRight="50%",n="4px"===t.marginRight,Ze.removeChild(a),s=null}}var i,r,n,o,a=te.createElement("div"),s=te.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",ue.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),pe.extend(ue,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return t(),r},pixelMarginRight:function(){return t(),n},reliableMarginLeft:function(){return t(),o}}))}();var lt=/^(none|table(?!-c[ea]).+)/,ht={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:"0",fontWeight:"400"},dt=["Webkit","Moz","ms"],ut=te.createElement("div").style;pe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=P(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,a,s=pe.camelCase(t),l=e.style;return t=pe.cssProps[s]||(pe.cssProps[s]=H(s)||s),a=pe.cssHooks[t]||pe.cssHooks[s],void 0===i?a&&"get"in a&&void 0!==(n=a.get(e,!1,r))?n:l[t]:(o=typeof i,"string"===o&&(n=ze.exec(i))&&n[1]&&(i=p(e,t,n),o="number"),void(null!=i&&i===i&&("number"===o&&(i+=n&&n[3]||(pe.cssNumber[s]?"":"px")),ue.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,r))||(l[t]=i))))}},css:function(e,t,i,r){var n,o,a,s=pe.camelCase(t);return t=pe.cssProps[s]||(pe.cssProps[s]=H(s)||s),a=pe.cssHooks[t]||pe.cssHooks[s],a&&"get"in a&&(n=a.get(e,!0,i)),void 0===n&&(n=P(e,t,r)),"normal"===n&&t in ct&&(n=ct[t]),""===i||i?(o=parseFloat(n),i===!0||isFinite(o)?o||0:n):n}}),pe.each(["height","width"],function(e,t){pe.cssHooks[t]={get:function(e,i,r){return i?!lt.test(pe.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?I(e,t,r):Ve(e,ht,function(){return I(e,t,r)}):void 0},set:function(e,i,r){var n,o=r&&st(e),a=r&&L(e,t,r,"border-box"===pe.css(e,"boxSizing",!1,o),o);return a&&(n=ze.exec(i))&&"px"!==(n[3]||"px")&&(e.style[t]=i,i=pe.css(e,t)),O(e,i,a)}}}),pe.cssHooks.marginLeft=D(ue.reliableMarginLeft,function(e,t){return t?(parseFloat(P(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),pe.each({margin:"",padding:"",border:"Width"},function(e,t){pe.cssHooks[e+t]={expand:function(i){for(var r=0,n={},o="string"==typeof i?i.split(" "):[i];4>r;r++)n[e+Ue[r]+t]=o[r]||o[r-2]||o[0];return n}},ot.test(e)||(pe.cssHooks[e+t].set=O)}),pe.fn.extend({css:function(e,t){return He(this,function(e,t,i){var r,n,o={},a=0;if(pe.isArray(t)){for(r=st(e),n=t.length;n>a;a++)o[t[a]]=pe.css(e,t[a],!1,r);return o}return void 0!==i?pe.style(e,t,i):pe.css(e,t)},e,t,arguments.length>1)}}),pe.Tween=B,B.prototype={constructor:B,init:function(e,t,i,r,n,o){this.elem=e,this.prop=i,this.easing=n||pe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(pe.cssNumber[i]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,i=B.propHooks[this.prop];return this.options.duration?this.pos=t=pe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=pe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){pe.fx.step[e.prop]?pe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[pe.cssProps[e.prop]]&&!pe.cssHooks[e.prop]?e.elem[e.prop]=e.now:pe.style(e.elem,e.prop,e.now+e.unit)}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},pe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},pe.fx=B.prototype.init,pe.fx.step={};var ft,pt,mt=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;pe.Animation=pe.extend(G,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return p(i.elem,e,ze.exec(t),i),i}]},tweener:function(e,t){pe.isFunction(e)?(t=e,e=["*"]):e=e.match(Me);for(var i,r=0,n=e.length;n>r;r++)i=e[r],G.tweeners[i]=G.tweeners[i]||[],G.tweeners[i].unshift(t)},prefilters:[j],prefilter:function(e,t){t?G.prefilters.unshift(e):G.prefilters.push(e)}}),pe.speed=function(e,t,i){var r=e&&"object"==typeof e?pe.extend({},e):{complete:i||!i&&t||pe.isFunction(e)&&e,duration:e,easing:i&&t||t&&!pe.isFunction(t)&&t};return pe.fx.off||te.hidden?r.duration=0:"number"!=typeof r.duration&&(r.duration in pe.fx.speeds?r.duration=pe.fx.speeds[r.duration]:r.duration=pe.fx.speeds._default),null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){pe.isFunction(r.old)&&r.old.call(this),r.queue&&pe.dequeue(this,r.queue)},r},pe.fn.extend({fadeTo:function(e,t,i,r){return this.filter(je).css("opacity",0).show().end().animate({opacity:t},e,i,r)},animate:function(e,t,i,r){var n=pe.isEmptyObject(e),o=pe.speed(t,i,r),a=function(){var t=G(this,pe.extend({},e),o);(n||Le.get(this,"finish"))&&t.stop(!0)};return a.finish=a,n||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,
t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=pe.timers,a=Le.get(this);if(n)a[n]&&a[n].stop&&r(a[n]);else for(n in a)a[n]&&a[n].stop&&gt.test(n)&&r(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(i),t=!1,o.splice(n,1));!t&&i||pe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=Le.get(this),r=i[e+"queue"],n=i[e+"queueHooks"],o=pe.timers,a=r?r.length:0;for(i.finish=!0,pe.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete i.finish})}}),pe.each(["toggle","show","hide"],function(e,t){var i=pe.fn[t];pe.fn[t]=function(e,r,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(z(t,!0),e,r,n)}}),pe.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){pe.fn[e]=function(e,i,r){return this.animate(t,e,i,r)}}),pe.timers=[],pe.fx.tick=function(){var e,t=0,i=pe.timers;for(ft=pe.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||pe.fx.stop(),ft=void 0},pe.fx.timer=function(e){pe.timers.push(e),e()?pe.fx.start():pe.timers.pop()},pe.fx.interval=13,pe.fx.start=function(){pt||(pt=e.requestAnimationFrame?e.requestAnimationFrame(N):e.setInterval(pe.fx.tick,pe.fx.interval))},pe.fx.stop=function(){e.cancelAnimationFrame?e.cancelAnimationFrame(pt):e.clearInterval(pt),pt=null},pe.fx.speeds={slow:600,fast:200,_default:400},pe.fn.delay=function(t,i){return t=pe.fx?pe.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,r){var n=e.setTimeout(i,t);r.stop=function(){e.clearTimeout(n)}})},function(){var e=te.createElement("input"),t=te.createElement("select"),i=t.appendChild(te.createElement("option"));e.type="checkbox",ue.checkOn=""!==e.value,ue.optSelected=i.selected,e=te.createElement("input"),e.value="t",e.type="radio",ue.radioValue="t"===e.value}();var vt,yt=pe.expr.attrHandle;pe.fn.extend({attr:function(e,t){return He(this,pe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){pe.removeAttr(this,e)})}}),pe.extend({attr:function(e,t,i){var r,n,o=e.nodeType;return 3!==o&&8!==o&&2!==o?"undefined"==typeof e.getAttribute?pe.prop(e,t,i):(1===o&&pe.isXMLDoc(e)||(n=pe.attrHooks[t.toLowerCase()]||(pe.expr.match.bool.test(t)?vt:void 0)),void 0!==i?null===i?void pe.removeAttr(e,t):n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):n&&"get"in n&&null!==(r=n.get(e,t))?r:(r=pe.find.attr(e,t),null==r?void 0:r)):void 0},attrHooks:{type:{set:function(e,t){if(!ue.radioValue&&"radio"===t&&pe.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,r=0,n=t&&t.match(Me);if(n&&1===e.nodeType)for(;i=n[r++];)e.removeAttribute(i)}}),vt={set:function(e,t,i){return t===!1?pe.removeAttr(e,i):e.setAttribute(i,i),i}},pe.each(pe.expr.match.bool.source.match(/\w+/g),function(e,t){var i=yt[t]||pe.find.attr;yt[t]=function(e,t,r){var n,o,a=t.toLowerCase();return r||(o=yt[a],yt[a]=n,n=null!=i(e,t,r)?a:null,yt[a]=o),n}});var At=/^(?:input|select|textarea|button)$/i,bt=/^(?:a|area)$/i;pe.fn.extend({prop:function(e,t){return He(this,pe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[pe.propFix[e]||e]})}}),pe.extend({prop:function(e,t,i){var r,n,o=e.nodeType;return 3!==o&&8!==o&&2!==o?(1===o&&pe.isXMLDoc(e)||(t=pe.propFix[t]||t,n=pe.propHooks[t]),void 0!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:e[t]=i:n&&"get"in n&&null!==(r=n.get(e,t))?r:e[t]):void 0},propHooks:{tabIndex:{get:function(e){var t=pe.find.attr(e,"tabindex");return t?parseInt(t,10):At.test(e.nodeName)||bt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ue.optSelected||(pe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),pe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pe.propFix[this.toLowerCase()]=this}),pe.fn.extend({addClass:function(e){var t,i,r,n,o,a,s,l=0;if(pe.isFunction(e))return this.each(function(t){pe(this).addClass(e.call(this,t,Y(this)))});if("string"==typeof e&&e)for(t=e.match(Me)||[];i=this[l++];)if(n=Y(i),r=1===i.nodeType&&" "+W(n)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=W(r),n!==s&&i.setAttribute("class",s)}return this},removeClass:function(e){var t,i,r,n,o,a,s,l=0;if(pe.isFunction(e))return this.each(function(t){pe(this).removeClass(e.call(this,t,Y(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Me)||[];i=this[l++];)if(n=Y(i),r=1===i.nodeType&&" "+W(n)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=W(r),n!==s&&i.setAttribute("class",s)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):pe.isFunction(e)?this.each(function(i){pe(this).toggleClass(e.call(this,i,Y(this),t),t)}):this.each(function(){var t,r,n,o;if("string"===i)for(r=0,n=pe(this),o=e.match(Me)||[];t=o[r++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==e&&"boolean"!==i||(t=Y(this),t&&Le.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Le.get(this,"__className__")||""))})},hasClass:function(e){var t,i,r=0;for(t=" "+e+" ";i=this[r++];)if(1===i.nodeType&&(" "+W(Y(i))+" ").indexOf(t)>-1)return!0;return!1}});var Et=/\r/g;pe.fn.extend({val:function(e){var t,i,r,n=this[0];return arguments.length?(r=pe.isFunction(e),this.each(function(i){var n;1===this.nodeType&&(n=r?e.call(this,i,pe(this).val()):e,null==n?n="":"number"==typeof n?n+="":pe.isArray(n)&&(n=pe.map(n,function(e){return null==e?"":e+""})),t=pe.valHooks[this.type]||pe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))})):n?(t=pe.valHooks[n.type]||pe.valHooks[n.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(n,"value"))?i:(i=n.value,"string"==typeof i?i.replace(Et,""):null==i?"":i)):void 0}}),pe.extend({valHooks:{option:{get:function(e){var t=pe.find.attr(e,"value");return null!=t?t:W(pe.text(e))}},select:{get:function(e){var t,i,r,n=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:n.length;for(r=0>o?l:a?o:0;l>r;r++)if(i=n[r],(i.selected||r===o)&&!i.disabled&&(!i.parentNode.disabled||!pe.nodeName(i.parentNode,"optgroup"))){if(t=pe(i).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var i,r,n=e.options,o=pe.makeArray(t),a=n.length;a--;)r=n[a],(r.selected=pe.inArray(pe.valHooks.option.get(r),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),pe.each(["radio","checkbox"],function(){pe.valHooks[this]={set:function(e,t){return pe.isArray(t)?e.checked=pe.inArray(pe(e).val(),t)>-1:void 0}},ue.checkOn||(pe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var xt=/^(?:focusinfocus|focusoutblur)$/;pe.extend(pe.event,{trigger:function(t,i,r,n){var o,a,s,l,h,c,d,u=[r||te],f=he.call(t,"type")?t.type:t,p=he.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||te,3!==r.nodeType&&8!==r.nodeType&&!xt.test(f+pe.event.triggered)&&(f.indexOf(".")>-1&&(p=f.split("."),f=p.shift(),p.sort()),h=f.indexOf(":")<0&&"on"+f,t=t[pe.expando]?t:new pe.Event(f,"object"==typeof t&&t),t.isTrigger=n?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),i=null==i?[t]:pe.makeArray(i,[t]),d=pe.event.special[f]||{},n||!d.trigger||d.trigger.apply(r,i)!==!1)){if(!n&&!d.noBubble&&!pe.isWindow(r)){for(l=d.delegateType||f,xt.test(l+f)||(a=a.parentNode);a;a=a.parentNode)u.push(a),s=a;s===(r.ownerDocument||te)&&u.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=u[o++])&&!t.isPropagationStopped();)t.type=o>1?l:d.bindType||f,c=(Le.get(a,"events")||{})[t.type]&&Le.get(a,"handle"),c&&c.apply(a,i),c=h&&a[h],c&&c.apply&&Oe(a)&&(t.result=c.apply(a,i),t.result===!1&&t.preventDefault());return t.type=f,n||t.isDefaultPrevented()||d._default&&d._default.apply(u.pop(),i)!==!1||!Oe(r)||h&&pe.isFunction(r[f])&&!pe.isWindow(r)&&(s=r[h],s&&(r[h]=null),pe.event.triggered=f,r[f](),pe.event.triggered=void 0,s&&(r[h]=s)),t.result}},simulate:function(e,t,i){var r=pe.extend(new pe.Event,i,{type:e,isSimulated:!0});pe.event.trigger(r,null,t)}}),pe.fn.extend({trigger:function(e,t){return this.each(function(){pe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?pe.event.trigger(e,t,i,!0):void 0}}),pe.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){pe.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),pe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ue.focusin="onfocusin"in e,ue.focusin||pe.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){pe.event.simulate(t,e.target,pe.event.fix(e))};pe.event.special[t]={setup:function(){var r=this.ownerDocument||this,n=Le.access(r,t);n||r.addEventListener(e,i,!0),Le.access(r,t,(n||0)+1)},teardown:function(){var r=this.ownerDocument||this,n=Le.access(r,t)-1;n?Le.access(r,t,n):(r.removeEventListener(e,i,!0),Le.remove(r,t))}}});var wt=e.location,Tt=pe.now(),_t=/\?/;pe.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(r){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||pe.error("Invalid XML: "+t),i};var St=/\[\]$/,Ct=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;pe.param=function(e,t){var i,r=[],n=function(e,t){var i=pe.isFunction(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(pe.isArray(e)||e.jquery&&!pe.isPlainObject(e))pe.each(e,function(){n(this.name,this.value)});else for(i in e)q(i,e[i],t,n);return r.join("&")},pe.fn.extend({serialize:function(){return pe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=pe.prop(this,"elements");return e?pe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!pe(this).is(":disabled")&&kt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!We.test(e))}).map(function(e,t){var i=pe(this).val();return null==i?null:pe.isArray(i)?pe.map(i,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:i.replace(Ct,"\r\n")}}).get()}});var Mt=/%20/g,Pt=/#.*$/,Dt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lt=/^(?:GET|HEAD)$/,It=/^\/\//,Bt={},Nt={},Ft="*/".concat("*"),zt=te.createElement("a");zt.href=wt.href,pe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:Ot.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":pe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Z(Z(e,pe.ajaxSettings),t):Z(pe.ajaxSettings,e)},ajaxPrefilter:X(Bt),ajaxTransport:X(Nt),ajax:function(t,i){function r(t,i,r,s){var h,u,f,b,E,x=i;c||(c=!0,l&&e.clearTimeout(l),n=void 0,a=s||"",w.readyState=t>0?4:0,h=t>=200&&300>t||304===t,r&&(b=K(p,w,r)),b=J(p,b,w,h),h?(p.ifModified&&(E=w.getResponseHeader("Last-Modified"),E&&(pe.lastModified[o]=E),E=w.getResponseHeader("etag"),E&&(pe.etag[o]=E)),204===t||"HEAD"===p.type?x="nocontent":304===t?x="notmodified":(x=b.state,u=b.data,f=b.error,h=!f)):(f=x,!t&&x||(x="error",0>t&&(t=0))),w.status=t,w.statusText=(i||x)+"",h?v.resolveWith(m,[u,x,w]):v.rejectWith(m,[w,x,f]),w.statusCode(A),A=void 0,d&&g.trigger(h?"ajaxSuccess":"ajaxError",[w,p,h?u:f]),y.fireWith(m,[w,x]),d&&(g.trigger("ajaxComplete",[w,p]),--pe.active||pe.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=void 0),i=i||{};var n,o,a,s,l,h,c,d,u,f,p=pe.ajaxSetup({},i),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?pe(m):pe.event,v=pe.Deferred(),y=pe.Callbacks("once memory"),A=p.statusCode||{},b={},E={},x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Ht.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=E[e.toLowerCase()]=E[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)w.always(e[w.status]);else for(t in e)A[t]=[A[t],e[t]];return this},abort:function(e){var t=e||x;return n&&n.abort(t),r(0,t),this}};if(v.promise(w),p.url=((t||p.url||wt.href)+"").replace(It,wt.protocol+"//"),p.type=i.method||i.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Me)||[""],null==p.crossDomain){h=te.createElement("a");try{h.href=p.url,h.href=h.href,p.crossDomain=zt.protocol+"//"+zt.host!=h.protocol+"//"+h.host}catch(T){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=pe.param(p.data,p.traditional)),Q(Bt,p,i,w),c)return w;d=pe.event&&p.global,d&&0===pe.active++&&pe.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Lt.test(p.type),o=p.url.replace(Pt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Mt,"+")):(f=p.url.slice(o.length),p.data&&(o+=(_t.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(o=o.replace(Dt,"$1"),f=(_t.test(o)?"&":"?")+"_="+Tt++ +f),p.url=o+f),p.ifModified&&(pe.lastModified[o]&&w.setRequestHeader("If-Modified-Since",pe.lastModified[o]),pe.etag[o]&&w.setRequestHeader("If-None-Match",pe.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||i.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ft+"; q=0.01":""):p.accepts["*"]);for(u in p.headers)w.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(p.beforeSend.call(m,w,p)===!1||c))return w.abort();if(x="abort",y.add(p.complete),w.done(p.success),w.fail(p.error),n=Q(Nt,p,i,w)){if(w.readyState=1,d&&g.trigger("ajaxSend",[w,p]),c)return w;p.async&&p.timeout>0&&(l=e.setTimeout(function(){w.abort("timeout")},p.timeout));try{c=!1,n.send(b,r)}catch(T){if(c)throw T;r(-1,T)}}else r(-1,"No Transport");return w},getJSON:function(e,t,i){return pe.get(e,t,i,"json")},getScript:function(e,t){return pe.get(e,void 0,t,"script")}}),pe.each(["get","post"],function(e,t){pe[t]=function(e,i,r,n){return pe.isFunction(i)&&(n=n||r,r=i,i=void 0),pe.ajax(pe.extend({url:e,type:t,dataType:n,data:i,success:r},pe.isPlainObject(e)&&e))}}),pe._evalUrl=function(e){return pe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},pe.fn.extend({wrapAll:function(e){var t;return this[0]&&(pe.isFunction(e)&&(e=e.call(this[0])),t=pe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return pe.isFunction(e)?this.each(function(t){pe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=pe(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=pe.isFunction(e);return this.each(function(i){pe(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){pe(this).replaceWith(this.childNodes)}),this}}),pe.expr.pseudos.hidden=function(e){return!pe.expr.pseudos.visible(e)},pe.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},pe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Ut={0:200,1223:204},jt=pe.ajaxSettings.xhr();ue.cors=!!jt&&"withCredentials"in jt,ue.ajax=jt=!!jt,pe.ajaxTransport(function(t){var i,r;return ue.cors||jt&&!t.crossDomain?{send:function(n,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(a in n)s.setRequestHeader(a,n[a]);i=function(e){return function(){i&&(i=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ut[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=i(),r=s.onerror=i("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){i&&r()})},i=i("abort");try{s.send(t.hasContent&&t.data||null)}catch(l){if(i)throw l}},abort:function(){i&&i()}}:void 0}),pe.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),pe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return pe.globalEval(e),e}}}),pe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),pe.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(r,n){t=pe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&n("error"===e.type?404:200,e.type)}),te.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Vt=[],Gt=/(=)\?(?=&|$)|\?\?/;pe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vt.pop()||pe.expando+"_"+Tt++;return this[e]=!0,e}}),pe.ajaxPrefilter("json jsonp",function(t,i,r){var n,o,a,s=t.jsonp!==!1&&(Gt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(n=t.jsonpCallback=pe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Gt,"$1"+n):t.jsonp!==!1&&(t.url+=(_t.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return a||pe.error(n+" was not called"),a[0]},t.dataTypes[0]="json",o=e[n],e[n]=function(){a=arguments},r.always(function(){void 0===o?pe(e).removeProp(n):e[n]=o,t[n]&&(t.jsonpCallback=i.jsonpCallback,Vt.push(n)),a&&pe.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),ue.createHTMLDocument=function(){var e=te.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),pe.parseHTML=function(e,t,i){if("string"!=typeof e)return[];"boolean"==typeof t&&(i=t,t=!1);var r,n,o;return t||(ue.createHTMLDocument?(t=te.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=te.location.href,t.head.appendChild(r)):t=te),n=we.exec(e),o=!i&&[],n?[t.createElement(n[1])]:(n=A([e],t,o),o&&o.length&&pe(o).remove(),pe.merge([],n.childNodes))},pe.fn.load=function(e,t,i){var r,n,o,a=this,s=e.indexOf(" ");return s>-1&&(r=W(e.slice(s)),e=e.slice(0,s)),pe.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(n="POST"),a.length>0&&pe.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?pe("<div>").append(pe.parseHTML(e)).find(r):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},pe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){pe.fn[t]=function(e){return this.on(t,e)}}),pe.expr.pseudos.animated=function(e){return pe.grep(pe.timers,function(t){return e===t.elem}).length},pe.offset={setOffset:function(e,t,i){var r,n,o,a,s,l,h,c=pe.css(e,"position"),d=pe(e),u={};"static"===c&&(e.style.position="relative"),s=d.offset(),o=pe.css(e,"top"),l=pe.css(e,"left"),h=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,h?(r=d.position(),a=r.top,n=r.left):(a=parseFloat(o)||0,n=parseFloat(l)||0),pe.isFunction(t)&&(t=t.call(e,i,pe.extend({},s))),null!=t.top&&(u.top=t.top-s.top+a),null!=t.left&&(u.left=t.left-s.left+n),"using"in t?t.using.call(e,u):d.css(u)}},pe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){pe.offset.setOffset(this,e,t)});var t,i,r,n,o=this[0];return o?o.getClientRects().length?(r=o.getBoundingClientRect(),r.width||r.height?(n=o.ownerDocument,i=$(n),t=n.documentElement,{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i=this[0],r={top:0,left:0};return"fixed"===pe.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),pe.nodeName(e[0],"html")||(r=e.offset()),r={top:r.top+pe.css(e[0],"borderTopWidth",!0),left:r.left+pe.css(e[0],"borderLeftWidth",!0)}),{top:t.top-r.top-pe.css(i,"marginTop",!0),left:t.left-r.left-pe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===pe.css(e,"position");)e=e.offsetParent;return e||Ze})}}),pe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;pe.fn[e]=function(r){return He(this,function(e,r,n){var o=$(e);return void 0===n?o?o[t]:e[r]:void(o?o.scrollTo(i?o.pageXOffset:n,i?n:o.pageYOffset):e[r]=n)},e,r,arguments.length)}}),pe.each(["top","left"],function(e,t){pe.cssHooks[t]=D(ue.pixelPosition,function(e,i){return i?(i=P(e,t),at.test(i)?pe(e).position()[t]+"px":i):void 0})}),pe.each({Height:"height",Width:"width"},function(e,t){pe.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,r){pe.fn[r]=function(n,o){var a=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||o===!0?"margin":"border");return He(this,function(t,i,n){var o;return pe.isWindow(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===n?pe.css(t,i,s):pe.style(t,i,n,s)},t,a?n:void 0,a)}})}),pe.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,r){return this.on(t,e,i,r)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),pe.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pe});var Wt=e.jQuery,Yt=e.$;return pe.noConflict=function(t){return e.$===pe&&(e.$=Yt),t&&e.jQuery===pe&&(e.jQuery=Wt),pe},t||(e.jQuery=e.$=pe),pe}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Ajv=e()}}(function(){var define,module,exports;return function e(t,i,r){function n(a,s){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return n(i?i:e)},c,c.exports,e,t,i,r)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;r.length>a;a++)n(r[a]);return n}({1:[function(require,module,exports){"use strict";function setupAsync(e,t){t!==!1&&(t=!0);var i,r=e.async,n=e.transpile;switch(typeof n){case"string":var o=TRANSPILE[n];if(!o)throw new Error("bad transpiler: "+n);return e._transpileFunc=o(e,t);case"undefined":case"boolean":if("string"==typeof r){if(i=ASYNC[r],!i)throw new Error("bad async mode: "+r);return e.transpile=i(e,t)}for(var a=0;MODES.length>a;a++){var s=MODES[a];if(setupAsync(s,!1))return util.copy(s,e),e.transpile}throw new Error("generators, nodent and regenerator are not available");case"function":return e._transpileFunc=e.transpile;default:throw new Error("bad transpiler: "+n)}}function checkGenerators(opts,required){try{return eval("(function*(){})()"),!0}catch(e){if(required)throw new Error("generators not supported")}}function checkAsyncFunction(opts,required){try{return eval("(async function(){})()"),!0}catch(e){if(required)throw new Error("es7 async functions not supported")}}function getRegenerator(e,t){try{return regenerator||(regenerator=require("regenerator"),regenerator.runtime()),e.async&&e.async!==!0||(e.async="es7"),regeneratorTranspile}catch(i){if(t)throw new Error("regenerator not available")}}function regeneratorTranspile(e){return regenerator.compile(e).code}function getNodent(e,t){try{return nodent||(nodent=require("nodent")({log:!1,dontInstallRequireHook:!0})),"es7"!=e.async&&(e.async&&e.async!==!0&&console.warn("nodent transpiles only es7 async functions"),e.async="es7"),nodentTranspile}catch(i){if(t)throw new Error("nodent not available")}}function nodentTranspile(e){return nodent.compile(e,"",{promises:!0,sourcemap:!1}).code}function compileAsync(e,t){function i(e,t,r){function o(r){function o(r,o){if(r)return t(r);if(!n._refs[a]&&!n._schemas[a])try{n.addSchema(o,a)}catch(s){return void t(s)}i(e,t)}var a=r.missingSchema;if(n._refs[a]||n._schemas[a])return t(new Error("Schema "+a+" is loaded but"+r.missingRef+"cannot be resolved"));var s=n._loadingSchemas[a];s?"function"==typeof s?n._loadingSchemas[a]=[s,o]:s[s.length]=o:(n._loadingSchemas[a]=o,n._opts.loadSchema(a,function(e,t){var i=n._loadingSchemas[a];if(delete n._loadingSchemas[a],"function"==typeof i)i(e,t);else for(var r=0;i.length>r;r++)i[r](e,t)}))}function a(e,i){return r?void setTimeout(function(){t(e,i)}):t(e,i)}var s;try{s=n.compile(e)}catch(l){return void(l.missingSchema?o(l):a(l))}a(null,s)}var r,n=this;try{r=this._addSchema(e)}catch(o){return void setTimeout(function(){t(o)})}if(r.validate)setTimeout(function(){t(null,r.validate)});else{if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");i(e,t,!0)}}module.exports={setup:setupAsync,compile:compileAsync};var util=require("./compile/util"),ASYNC={"*":checkGenerators,"co*":checkGenerators,es7:checkAsyncFunction},TRANSPILE={nodent:getNodent,regenerator:getRegenerator},MODES=[{async:"co*"},{async:"es7",transpile:"nodent"},{async:"co*",transpile:"regenerator"}],regenerator,nodent},{"./compile/util":10}],2:[function(e,t,i){"use strict";var r=t.exports=function(){this._cache={}};r.prototype.put=function(e,t){this._cache[e]=t},r.prototype.get=function(e){return this._cache[e]},r.prototype.del=function(e){delete this._cache[e]},r.prototype.clear=function(){this._cache={}}},{}],3:[function(e,t,i){"use strict";t.exports={$ref:e("../dotjs/ref"),allOf:e("../dotjs/allOf"),anyOf:e("../dotjs/anyOf"),dependencies:e("../dotjs/dependencies"),"enum":e("../dotjs/enum"),format:e("../dotjs/format"),items:e("../dotjs/items"),maximum:e("../dotjs/_limit"),minimum:e("../dotjs/_limit"),maxItems:e("../dotjs/_limitItems"),minItems:e("../dotjs/_limitItems"),maxLength:e("../dotjs/_limitLength"),minLength:e("../dotjs/_limitLength"),maxProperties:e("../dotjs/_limitProperties"),minProperties:e("../dotjs/_limitProperties"),multipleOf:e("../dotjs/multipleOf"),not:e("../dotjs/not"),oneOf:e("../dotjs/oneOf"),pattern:e("../dotjs/pattern"),properties:e("../dotjs/properties"),required:e("../dotjs/required"),uniqueItems:e("../dotjs/uniqueItems"),validate:e("../dotjs/validate")}},{"../dotjs/_limit":13,"../dotjs/_limitItems":14,"../dotjs/_limitLength":15,"../dotjs/_limitProperties":16,"../dotjs/allOf":17,"../dotjs/anyOf":18,"../dotjs/dependencies":20,"../dotjs/enum":21,"../dotjs/format":22,"../dotjs/items":23,"../dotjs/multipleOf":24,"../dotjs/not":25,"../dotjs/oneOf":26,"../dotjs/pattern":27,"../dotjs/properties":29,"../dotjs/ref":30,"../dotjs/required":31,"../dotjs/uniqueItems":33,"../dotjs/validate":34}],4:[function(e,t,i){"use strict";t.exports=function r(e,t){if(e===t)return!0;var i,n=Array.isArray(e),o=Array.isArray(t);if(n&&o){if(e.length!=t.length)return!1;for(i=0;e.length>i;i++)if(!r(e[i],t[i]))return!1;return!0}if(n!=o)return!1;if(e&&t&&"object"==typeof e&&"object"==typeof t){var a=Object.keys(e);if(a.length!==Object.keys(t).length)return!1;for(i=0;a.length>i;i++)if(void 0===t[a[i]])return!1;for(i=0;a.length>i;i++)if(!r(e[a[i]],t[a[i]]))return!1;return!0}return!1}},{}],5:[function(e,t,i){"use strict";function r(e){e="full"==e?"full":"fast";var t=f.copy(r[e]);for(var i in r.compare)t[i]={validate:t[i],compare:r.compare[i]};return t}function n(e){var t=e.match(p);if(!t)return!1;var i=+t[1],r=+t[2];return i>=1&&12>=i&&r>=1&&m[i]>=r}function o(e,t){var i=e.match(g);if(!i)return!1;var r=i[1],n=i[2],o=i[3],a=i[5];return 23>=r&&59>=n&&59>=o&&(!t||a)}function a(e){var t=e.split(x);return n(t[0])&&o(t[1],!0)}function s(e){return 255>=e.length&&v.test(e)}function l(e){return w.test(e)&&y.test(e)}function h(e){try{return new RegExp(e),!0}catch(t){return!1}}function c(e,t){return e&&t?e>t?1:t>e?-1:e===t?0:void 0:void 0}function d(e,t){return e&&t&&(e=e.match(g),t=t.match(g),e&&t)?(e=e[1]+e[2]+e[3]+(e[4]||""),t=t[1]+t[2]+t[3]+(t[4]||""),e>t?1:t>e?-1:e===t?0:void 0):void 0}function u(e,t){if(e&&t){e=e.split(x),t=t.split(x);var i=c(e[0],t[0]);if(void 0!==i)return i||d(e[1],t[1])}}var f=e("./util"),p=/^\d\d\d\d-(\d\d)-(\d\d)$/,m=[0,31,29,31,30,31,30,31,31,30,31,30,31],g=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,v=/^[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?(\.[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?)*$/i,y=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:\#(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,A=/^(?:urn\:uuid\:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,b=/^(?:\/(?:[^~\/]|~0|~1)+)*(?:\/)?$|^\#(?:\/(?:[a-z0-9_\-\.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)+)*(?:\/)?$/i,E=/^(?:0|[1-9][0-9]*)(?:\#|(?:\/(?:[^~\/]|~0|~1)+)*(?:\/)?)$/;t.exports=r,r.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*)?(?:\:|\/)\/?[^\s]*$/i,email:/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:v,
ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:h,uuid:A,"json-pointer":b,"relative-json-pointer":E},r.full={date:n,time:o,"date-time":a,uri:l,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:h,uuid:A,"json-pointer":b,"relative-json-pointer":E},r.compare={date:c,time:d,"date-time":u};var x=/t|\s/i,w=/\/|\:/},{"./util":10}],6:[function(require,module,exports){"use strict";function compile(schema,root,localRefs,baseId){function localCompile(_schema,_root,localRefs,baseId){var isRoot=!_root||_root&&_root.schema==_schema;if(_root.schema!=root.schema)return compile.call(self,_schema,_root,localRefs,baseId);var $async=_schema.$async===!0;$async&&!opts.transpile&&async.setup(opts);var sourceCode=validateGenerator({isTop:!0,schema:_schema,isRoot:isRoot,baseId:baseId,root:_root,schemaPath:"",errSchemaPath:"#",errorPath:'""',RULES:RULES,validate:validateGenerator,util:util,resolve:resolve,resolveRef:resolveRef,usePattern:usePattern,useDefault:useDefault,useCustomRule:useCustomRule,opts:opts,formats:formats,self:self});sourceCode=vars(refVal,refValCode)+vars(patterns,patternCode)+vars(defaults,defaultCode)+vars(customRules,customRuleCode)+sourceCode,opts.beautify&&(beautify?sourceCode=beautify(sourceCode,opts.beautify):console.error('"npm install js-beautify" to use beautify option'));var validate,validateCode,transpile=opts._transpileFunc;try{validateCode=$async&&transpile?transpile(sourceCode):sourceCode,eval(validateCode),refVal[0]=validate}catch(e){throw console.error("Error compiling schema, function code:",validateCode),e}return validate.schema=_schema,validate.errors=null,validate.refs=refs,validate.refVal=refVal,validate.root=isRoot?validate:_root,$async&&(validate.$async=!0),validate.sourceCode=sourceCode,validate}function resolveRef(e,t,i){t=resolve.url(e,t);var r,n,o=refs[t];if(void 0!==o)return r=refVal[o],n="refVal["+o+"]",resolvedRef(r,n);if(!i){var a=root.refs[t];if(void 0!==a)return r=root.refVal[a],n=addLocalRef(t,r),resolvedRef(r,n)}n=addLocalRef(t);var s=resolve.call(self,localCompile,root,t);if(!s){var l=localRefs&&localRefs[t];l&&(s=resolve.inlineRef(l,opts.inlineRefs)?l:compile.call(self,l,root,localRefs,e))}return s?(replaceLocalRef(t,s),resolvedRef(s,n)):void 0}function addLocalRef(e,t){var i=refVal.length;return refVal[i]=t,refs[e]=i,"refVal"+i}function replaceLocalRef(e,t){var i=refs[e];refVal[i]=t}function resolvedRef(e,t){return"object"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&e.$async}}function usePattern(e){var t=patternsHash[e];return void 0===t&&(t=patternsHash[e]=patterns.length,patterns[t]=e),"pattern"+t}function useDefault(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return util.toQuotedString(e);case"object":if(null===e)return"null";var t=stableStringify(e),i=defaultsHash[t];return void 0===i&&(i=defaultsHash[t]=defaults.length,defaults[i]=e),"default"+i}}function useCustomRule(e,t,i,r){var n,o=e.definition.compile,a=e.definition.inline,s=e.definition.macro;o?n=o.call(self,t,i):s?(n=s.call(self,t,i),opts.validateSchema!==!1&&self.validateSchema(n,!0)):n=a?a.call(self,r,e.keyword,t,i):e.definition.validate;var l=customRules.length;return customRules[l]=n,{code:"customRule"+l,validate:n}}var self=this,opts=this._opts,refVal=[void 0],refs={},patterns=[],patternsHash={},defaults=[],defaultsHash={},customRules=[];root=root||{schema:schema,refVal:refVal,refs:refs};var formats=this._formats,RULES=this.RULES;return localCompile(schema,root,localRefs,baseId)}function patternCode(e,t){return"var pattern"+e+" = new RegExp("+util.toQuotedString(t[e])+");"}function defaultCode(e){return"var default"+e+" = defaults["+e+"];"}function refValCode(e,t){return t[e]?"var refVal"+e+" = refVal["+e+"];":""}function customRuleCode(e){return"var customRule"+e+" = customRules["+e+"];"}function vars(e,t){if(!e.length)return"";for(var i="",r=0;e.length>r;r++)i+=t(r,e);return i}var resolve=require("./resolve"),util=require("./util"),stableStringify=require("json-stable-stringify"),async=require("../async"),beautify=function(){try{return require("js-beautify").js_beautify}catch(e){}}(),validateGenerator=require("../dotjs/validate");module.exports=compile;var co=require("co"),ucs2length=util.ucs2length,equal=require("./equal"),ValidationError=require("./validation_error")},{"../async":1,"../dotjs/validate":34,"./equal":4,"./resolve":7,"./util":10,"./validation_error":11,co:45,"json-stable-stringify":46}],7:[function(e,t,i){"use strict";function r(e,t,i){var o=this._refs[i];if("string"==typeof o){if(!this._refs[o])return r.call(this,e,t,o);o=this._refs[o]}if(o=o||this._schemas[i],o instanceof y)return s(o.schema,this._opts.inlineRefs)?o.schema:o.validate||this._compile(o);var a,l,h,c=n.call(this,t,i);return c&&(a=c.schema,t=c.root,h=c.baseId),a instanceof y?l=a.validate||e.call(this,a.schema,t,void 0,h):a&&(l=s(a,this._opts.inlineRefs)?a:e.call(this,a,t,void 0,h)),l}function n(e,t){var i=m.parse(t,!1,!0),r=d(i),n=c(e.schema.id);if(r!==n){var s=u(r),l=this._refs[s];if("string"==typeof l)return o.call(this,e,l,i);if(l instanceof y)l.validate||this._compile(l),e=l;else if(l=this._schemas[s],l instanceof y){if(l.validate||this._compile(l),s==u(t))return{schema:l,root:e,baseId:n};e=l}if(!e.schema)return;n=c(e.schema.id)}return a.call(this,i,n,e.schema,e)}function o(e,t,i){var r=n.call(this,e,t);if(r){var o=r.schema,s=r.baseId;return e=r.root,o.id&&(s=f(s,o.id)),a.call(this,i,s,o,e)}}function a(e,t,i,r){if(e.hash=e.hash||"","#/"==e.hash.slice(0,2)){for(var o=e.hash.split("/"),a=1;o.length>a;a++){var s=o[a];if(s){if(s=v.unescapeFragment(s),i=i[s],!i)break;if(i.id&&!A[s]&&(t=f(t,i.id)),i.$ref){var l=f(t,i.$ref),h=n.call(this,r,l);h&&(i=h.schema,r=h.root,t=h.baseId)}}}return i&&i!=r.schema?{schema:i,root:r,baseId:t}:void 0}}function s(e,t){return t===!1?!1:void 0===t||t===!0?l(e):t?h(e)<=t:void 0}function l(e){var t;if(Array.isArray(e)){for(var i=0;e.length>i;i++)if(t=e[i],"object"==typeof t&&!l(t))return!1}else for(var r in e){if("$ref"==r)return!1;if(t=e[r],"object"==typeof t&&!l(t))return!1}return!0}function h(e){var t,i=0;if(Array.isArray(e)){for(var r=0;e.length>r;r++)if(t=e[r],"object"==typeof t&&(i+=h(t)),i==1/0)return 1/0}else for(var n in e){if("$ref"==n)return 1/0;if(b[n])i++;else if(t=e[n],"object"==typeof t&&(i+=h(t)+1),i==1/0)return 1/0}return i}function c(e,t){t!==!1&&(e=u(e));var i=m.parse(e,!1,!0);return d(i)}function d(e){return(e.protocol||"")+(e.protocol?"//":"")+(e.host||"")+(e.path||"")+"#"}function u(e){return e?e.replace(E,""):""}function f(e,t){return t=u(t),m.resolve(e,t)}function p(e){function t(e,i,n){if(Array.isArray(e))for(var o=0;e.length>o;o++)t.call(this,e[o],i+"/"+o,n);else if(e&&"object"==typeof e){if("string"==typeof e.id){var a=n=n?m.resolve(n,e.id):e.id;a=u(a);var s=this._refs[a];if("string"==typeof s&&(s=this._refs[s]),s&&s.schema){if(!g(e,s.schema))throw new Error('id "'+a+'" resolves to more than one schema')}else if(a!=u(i))if("#"==a[0]){if(r[a]&&!g(e,r[a]))throw new Error('id "'+a+'" resolves to more than one schema');r[a]=e}else this._refs[a]=i}for(var l in e)t.call(this,e[l],i+"/"+v.escapeFragment(l),n)}}var i=u(e.id),r={};return t.call(this,e,c(i,!1),i),r}var m=e("url"),g=e("./equal"),v=e("./util"),y=e("./schema_obj");t.exports=r,r.normalizeId=u,r.fullPath=c,r.url=f,r.ids=p,r.inlineRef=s;var A=v.toHash(["properties","patternProperties","enum","dependencies","definitions"]),b=v.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]),E=/#\/?$/},{"./equal":4,"./schema_obj":9,"./util":10,url:43}],8:[function(e,t,i){"use strict";var r=e("./_rules"),n=e("./util");t.exports=function(){var e=[{type:"number",rules:["maximum","minimum","multipleOf"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","uniqueItems","items"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","properties"]},{rules:["$ref","enum","not","anyOf","oneOf","allOf"]}];return e.all=["type","additionalProperties","patternProperties"],e.keywords=["additionalItems","$schema","id","title","description","default"],e.types=["number","integer","string","array","object","boolean","null"],e.forEach(function(t){t.rules=t.rules.map(function(t){return e.all.push(t),{keyword:t,code:r[t]}})}),e.keywords=n.toHash(e.all.concat(e.keywords)),e.all=n.toHash(e.all),e.types=n.toHash(e.types),e}},{"./_rules":3,"./util":10}],9:[function(e,t,i){"use strict";function r(e){n.copy(e,this)}var n=e("./util");t.exports=r},{"./util":10}],10:[function(e,t,i){"use strict";function r(e,t){t=t||{};for(var i in e)t[i]=e[i];return t}function n(e,t,i){var r=i?" !== ":" === ",n=i?" || ":" && ",o=i?"!":"",a=i?"":"!";switch(e){case"null":return t+r+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+n+"typeof "+t+r+'"object"'+n+a+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+r+'"number"'+n+a+"("+t+" % 1)"+n+t+r+t+")";default:return"typeof "+t+r+'"'+e+'"'}}function o(e,t){switch(e.length){case 1:return n(e[0],t,!0);default:var i="",r=s(e);r.array&&r.object&&(i=r["null"]?"(":"(!"+t+" || ",i+="typeof "+t+' !== "object")',delete r["null"],delete r.array,delete r.object),r.number&&delete r.integer;for(var o in r)i+=(i?" && ":"")+n(o,t,!0);return i}}function a(e){if(Array.isArray(e)){for(var t=[],i=0;e.length>i;i++){var r=e[i];_[r]&&(t[t.length]=r)}if(t.length)return t}else if(_[e])return[e]}function s(e){for(var t={},i=0;e.length>i;i++)t[e[i]]=!0;return t}function l(e){return"number"==typeof e?"["+e+"]":S.test(e)?"."+e:"['"+e.replace(C,"\\$&")+"']"}function h(e){return e.replace(C,"\\$&")}function c(e){for(var t,i=0,r=e.length,n=0;r>n;)i++,t=e.charCodeAt(n++),t>=55296&&56319>=t&&r>n&&(t=e.charCodeAt(n),56320==(64512&t)&&n++);return i}function d(e,t){t+="[^0-9]";var i=e.match(new RegExp(t,"g"));return i?i.length:0}function u(e,t,i){return t+="([^0-9])",i=i.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),i+"$1")}function f(e){return e.replace(R,"").replace(k,"").replace(M,"if (!($1))")}function p(e,t){var i=e.match(P);return i&&2===i.length?t?e.replace(H,"").replace(I,B):e.replace(D,"").replace(O,L):e}function m(e,t){for(var i in e)if(t[i])return!0}function g(e){return"'"+h(e)+"'"}function v(e,t,i,r){var n=i?"'/' + "+t+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'";return b(e,n)}function y(e,t,i){var r=g(i?"/"+w(t):l(t));return b(e,r)}function A(e,t,i){var r=e.match(N);if(!r)throw new Error("Invalid relative JSON-pointer: "+e);var n=+r[1],o=r[2];if("#"==o){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return i[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);var a="data"+(t-n||"");if(!o)return a;for(var s=a,h=o.split("/"),c=0;h.length>c;c++){var d=h[c];d&&(a+=l(T(d)),s+=" && "+a)}return s}function b(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function E(e){return T(decodeURIComponent(e))}function x(e){return encodeURIComponent(w(e))}function w(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function T(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}t.exports={copy:r,checkDataType:n,checkDataTypes:o,coerceToTypes:a,toHash:s,getProperty:l,escapeQuotes:h,ucs2length:c,varOccurences:d,varReplace:u,cleanUpCode:f,cleanUpVarErrors:p,schemaHasRules:m,stableStringify:e("json-stable-stringify"),toQuotedString:g,getPathExpr:v,getPath:y,getData:A,unescapeFragment:E,escapeFragment:x,escapeJsonPointer:w};var _=s(["string","number","integer","boolean","null"]),S=/^[a-z$_][a-z$_0-9]*$/i,C=/'|\\/g,R=/else\s*{\s*}/g,k=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,M=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g,P=/[^v\.]errors/g,D=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,H=/var errors = 0;|var vErrors = null;/g,O="return errors === 0;",L="validate.errors = null; return true;",I=/if \(errors === 0\) return true;\s*else throw new ValidationError\(vErrors\);/,B="return true;",N=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/},{"json-stable-stringify":46}],11:[function(e,t,i){"use strict";function r(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}t.exports=r,r.prototype=Object.create(Error.prototype),r.prototype.constructor=r},{}],12:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+n;if(r+="var "+d+" = undefined;",e.opts.format===!1)return r+=" "+d+" = true; ";var u=e.schema.format,f=e.opts.v5&&u.$data,p="";if(f){var m=e.util.getData(u.$data,o,e.dataPathArr),g="format"+n,v="compare"+n;r+=" var "+g+" = formats["+m+"] , "+v+" = "+g+" && "+g+".compare;"}else{var g=e.formats[u];if(!g||!g.compare)return r+="  "+d+" = true; ";var v="formats"+e.util.getProperty(u)+".compare"}var y="formatMaximum"==t,A="formatExclusive"+(y?"Maximum":"Minimum"),b=e.schema[A],E=e.opts.v5&&b&&b.$data,x=y?"<":">",w="result"+n,T=e.opts.v5&&a.$data,_=T?e.util.getData(a.$data,o,e.dataPathArr):a;if(T&&(r+=" var schema"+n+" = "+_+"; ",_="schema"+n),E){var S=e.util.getData(b.$data,o,e.dataPathArr),C="exclusive"+n,R="op"+n,k="' + "+R+" + '";r+=" var schemaExcl"+n+" = "+S+"; ",S="schemaExcl"+n,r+=" if (typeof "+S+" != 'boolean' && "+S+" !== undefined) { "+d+" = false; ";var i=A,M=M||[];M.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"_formatExclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: {} ',e.opts.messages!==!1&&(r+=" , message: '"+A+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var P=r;r=M.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+P+"]); ":" validate.errors = ["+P+"]; return false; ":" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }  ",h&&(p+="}",r+=" else { "),T&&(r+=" if ("+_+" === undefined) "+d+" = true; else if (typeof "+_+" != 'string') "+d+" = false; else { ",p+="}"),f&&(r+=" if (!"+v+") "+d+" = true; else { ",p+="}"),r+=" var "+w+" = "+v+"("+c+",  ",r+=T?""+_:""+e.util.toQuotedString(a),r+=" ); if ("+w+" === undefined) "+d+" = false; var "+C+" = "+S+" === true; if ("+d+" === undefined) { "+d+" = "+C+" ? "+w+" "+x+" 0 : "+w+" "+x+"= 0; } if (!"+d+") var op"+n+" = "+C+" ? '"+x+"' : '"+x+"=';"}else{var C=b===!0,k=x;C||(k+="=");var R="'"+k+"'";T&&(r+=" if ("+_+" === undefined) "+d+" = true; else if (typeof "+_+" != 'string') "+d+" = false; else { ",p+="}"),f&&(r+=" if (!"+v+") "+d+" = true; else { ",p+="}"),r+=" var "+w+" = "+v+"("+c+",  ",r+=T?""+_:""+e.util.toQuotedString(a),r+=" ); if ("+w+" === undefined) "+d+" = false; if ("+d+" === undefined) "+d+" = "+w+" "+x,C||(r+="="),r+=" 0;"}r+=""+p+"if (!"+d+") { ";var i=t,M=M||[];M.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"_formatLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { comparison: '+R+", limit:  ",r+=T?""+_:""+e.util.toQuotedString(a),r+=" , exclusive: "+C+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+k+' "',r+=T?"' + "+_+" + '":""+e.util.escapeQuotes(a),r+="\"' "),e.opts.verbose&&(r+=" , schema:  ",r+=T?"validate.schema"+s:""+e.util.toQuotedString(a),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var P=r;return r=M.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+P+"]); ":" validate.errors = ["+P+"]; return false; ":" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="}"}},{}],13:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&a.$data,u=d?e.util.getData(a.$data,o,e.dataPathArr):a;d&&(r+=" var schema"+n+" = "+u+"; ",u="schema"+n);var f="maximum"==t,p=f?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[p],g=e.opts.v5&&m&&m.$data,v=f?"<":">",y=f?">":"<";if(g){var A=e.util.getData(m.$data,o,e.dataPathArr),b="exclusive"+n,E="op"+n,x="' + "+E+" + '";r+=" var schemaExcl"+n+" = "+A+"; ",A="schemaExcl"+n,r+=" var exclusive"+n+"; if (typeof "+A+" != 'boolean' && typeof "+A+" != 'undefined') { ";var i=p,w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: {} ',e.opts.messages!==!1&&(r+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var T=r;r=w.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+T+"]); ":" validate.errors = ["+T+"]; return false; ":" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if( ",d&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),r+=" ((exclusive"+n+" = "+A+" === true) ? "+c+" "+y+"= "+u+" : "+c+" "+y+" "+u+") || "+c+" !== "+c+") { var op"+n+" = exclusive"+n+" ? '"+v+"' : '"+v+"=';"}else{var b=m===!0,x=v;b||(x+="=");var E="'"+x+"'";r+=" if ( ",d&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),r+=" "+c+" "+y,b&&(r+="="),r+=" "+u+" || "+c+" !== "+c+") {"}var i=t,w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { comparison: '+E+", limit: "+u+", exclusive: "+b+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+x+" ",r+=d?"' + "+u:""+a+"'"),e.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+s:""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var T=r;return r=w.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+T+"]); ":" validate.errors = ["+T+"]; return false; ":" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r}},{}],14:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&a.$data,u=d?e.util.getData(a.$data,o,e.dataPathArr):a;d&&(r+=" var schema"+n+" = "+u+"; ",u="schema"+n);var f="maxItems"==t?">":"<";r+="if ( ",d&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),r+=" "+c+".length "+f+" "+u+") { ";var i=t,p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { limit: '+u+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",r+="maxItems"==t?"more":"less",r+=" than ",r+=d?"' + "+u+" + '":""+a,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+s:""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var m=r;return r=p.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}},{}],15:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&a.$data,u=d?e.util.getData(a.$data,o,e.dataPathArr):a;d&&(r+=" var schema"+n+" = "+u+"; ",u="schema"+n);var f="maxLength"==t?">":"<";r+="if ( ",d&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),r+=e.opts.unicode===!1?" "+c+".length ":" ucs2length("+c+") ",r+=" "+f+" "+u+") { ";var i=t,p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { limit: '+u+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",r+="maxLength"==t?"longer":"shorter",r+=" than ",r+=d?"' + "+u+" + '":""+a,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+s:""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var m=r;return r=p.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}},{}],16:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&a.$data,u=d?e.util.getData(a.$data,o,e.dataPathArr):a;d&&(r+=" var schema"+n+" = "+u+"; ",u="schema"+n);var f="maxProperties"==t?">":"<";r+="if ( ",d&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),r+=" Object.keys("+c+").length "+f+" "+u+") { ";var i=t,p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { limit: '+u+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",r+="maxProperties"==t?"more":"less",r+=" than ",r+=d?"' + "+u+" + '":""+a,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+s:""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var m=r;return r=p.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}},{}],17:[function(e,t,i){"use strict";t.exports=function(e,t){var i=" ",r=e.schema[t],n=e.schemaPath+"."+t,o=e.errSchemaPath+"/"+t,a=!e.opts.allErrors,s=e.util.copy(e),l="";s.level++;var h=s.baseId,c=r;if(c)for(var d,u=-1,f=c.length-1;f>u;)d=c[u+=1],e.util.schemaHasRules(d,e.RULES.all)&&(s.schema=d,s.schemaPath=n+"["+u+"]",s.errSchemaPath=o+"/"+u,i+="  "+e.validate(s)+" ",s.baseId=h,a&&(i+=" if (valid"+s.level+") { ",l+="}"));return a&&(i+=" "+l.slice(0,-1)),i=e.util.cleanUpCode(i)}},{}],18:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+n,u="errs__"+n,f=e.util.copy(e),p="";f.level++;var m=a.every(function(t){return e.util.schemaHasRules(t,e.RULES.all)});if(m){var g=f.baseId;r+=" var "+u+" = errors; var "+d+" = false;  ";var v=e.compositeRule;e.compositeRule=f.compositeRule=!0;var y=a;if(y)for(var A,b=-1,E=y.length-1;E>b;)A=y[b+=1],f.schema=A,f.schemaPath=s+"["+b+"]",f.errSchemaPath=l+"/"+b,r+="  "+e.validate(f)+" ",f.baseId=g,r+=" "+d+" = "+d+" || valid"+f.level+"; if (!"+d+") { ",p+="}";e.compositeRule=f.compositeRule=v,r+=" "+p+" if (!"+d+") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(i||"anyOf")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: {} ',e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } "),r=e.util.cleanUpCode(r)}else h&&(r+=" if (true) { ");return r}},{}],19:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+n,u=e.opts.v5&&a.$data,f=u?e.util.getData(a.$data,o,e.dataPathArr):a;u&&(r+=" var schema"+n+" = "+f+"; ",f="schema"+n),u||(r+=" var schema"+n+" = validate.schema"+s+";"),r+="var "+d+" = equal("+c+", schema"+n+"); if (!"+d+") {   ";var p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"constant")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: {} ',e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var m=r;return r=p.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }"}},{}],20:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="errs__"+n,u=e.util.copy(e),f="";u.level++;var p={},m={};for(A in a){var g=a[A],v=Array.isArray(g)?m:p;v[A]=g}r+="var "+d+" = errors;";var y=e.errorPath;r+="var missing"+n+";";for(var A in m){if(v=m[A],r+=" if ("+c+e.util.getProperty(A)+" !== undefined ",h){r+=" && ( ";var b=v;if(b)for(var E,x=-1,w=b.length-1;w>x;){E=b[x+=1],x&&(r+=" || ");var T=e.util.getProperty(E);r+=" ( "+c+T+" === undefined && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?E:T)+") ) "}r+=")) {  ";var _="missing"+n,S="' + "+_+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(y,_,!0):y+" + "+_);var C=C||[];C.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"dependencies")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { property: '"+e.util.escapeQuotes(A)+"', missingProperty: '"+S+"', depsCount: "+v.length+", deps: '"+e.util.escapeQuotes(1==v.length?v[0]:v.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",r+=1==v.length?"property "+e.util.escapeQuotes(v[0]):"properties "+e.util.escapeQuotes(v.join(", ")),r+=" when property "+e.util.escapeQuotes(A)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var R=r;r=C.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+R+"]); ":" validate.errors = ["+R+"]; return false; ":" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var k=v;if(k)for(var M,P=-1,D=k.length-1;D>P;){M=k[P+=1];var T=e.util.getProperty(M),S=e.util.escapeQuotes(M);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(y,M,e.opts.jsonPointers)),r+=" if ("+c+T+" === undefined) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(i||"dependencies")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { property: '"+e.util.escapeQuotes(A)+"', missingProperty: '"+S+"', depsCount: "+v.length+", deps: '"+e.util.escapeQuotes(1==v.length?v[0]:v.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",r+=1==v.length?"property "+e.util.escapeQuotes(v[0]):"properties "+e.util.escapeQuotes(v.join(", ")),r+=" when property "+e.util.escapeQuotes(A)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",h&&(f+="}",r+=" else { ")}e.errorPath=y;var H=u.baseId;for(var A in p){var g=p[A];e.util.schemaHasRules(g,e.RULES.all)&&(r+=" valid"+u.level+" = true; if ("+c+"['"+A+"'] !== undefined) { ",u.schema=g,u.schemaPath=s+e.util.getProperty(A),u.errSchemaPath=l+"/"+e.util.escapeFragment(A),r+="  "+e.validate(u)+" ",u.baseId=H,r+=" }  ",h&&(r+=" if (valid"+u.level+") { ",f+="}"))}return h&&(r+="   "+f+" if ("+d+" == errors) {"),r=e.util.cleanUpCode(r)}},{}],21:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+n,u=e.opts.v5&&a.$data,f=u?e.util.getData(a.$data,o,e.dataPathArr):a;u&&(r+=" var schema"+n+" = "+f+"; ",f="schema"+n);var p="i"+n;u||(r+=" var schema"+n+" = validate.schema"+s+";"),r+="var "+d+";",u&&(r+=" if (schema"+n+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+n+")) "+d+" = false; else {"),r+=""+d+" = false;for (var "+p+"=0; "+p+"<schema"+n+".length; "+p+"++) if (equal("+c+", schema"+n+"["+p+"])) { "+d+" = true; break; }",u&&(r+="  }  "),r+=" if (!"+d+") {   ";var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"enum")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: {} ',e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var g=r;return r=m.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",h&&(r+=" else { "),
r}},{}],22:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||"");if(e.opts.format===!1)return h&&(r+=" if (true) { "),r;var d=e.opts.v5&&a.$data,u=d?e.util.getData(a.$data,o,e.dataPathArr):a;if(d&&(r+=" var schema"+n+" = "+u+"; ",u="schema"+n),d){var f="format"+n;r+=" var "+f+" = formats["+u+"]; var isObject"+n+" = typeof "+f+" == 'object' && !("+f+" instanceof RegExp) && "+f+".validate; if (isObject"+n+") { var async"+n+" = "+f+".async; "+f+" = "+f+".validate; } if (  ",d&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),r+=" ("+f+" && !(typeof "+f+" == 'function' ? ",r+=e.async?" (async"+n+" ? "+e.yieldAwait+" "+f+"("+c+") : "+f+"("+c+")) ":" "+f+"("+c+") ",r+=" : "+f+".test("+c+")))) {"}else{var f=e.formats[a];if(!f)return h&&(r+=" if (true) { "),r;var p="object"==typeof f&&!(f instanceof RegExp)&&f.validate;if(p){var m=f.async===!0;f=f.validate}if(m){if(!e.async)throw new Error("async format in sync schema");var g="formats"+e.util.getProperty(a)+".validate";r+=" if (!("+e.yieldAwait+" "+g+"("+c+"))) { "}else{r+=" if (! ";var g="formats"+e.util.getProperty(a);p&&(g+=".validate"),r+="function"==typeof f?" "+g+"("+c+") ":" "+g+".test("+c+") ",r+=") { "}}var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"format")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { format:  ',r+=d?""+u:""+e.util.toQuotedString(a),r+="  } ",e.opts.messages!==!1&&(r+=" , message: 'should match format \"",r+=d?"' + "+u+" + '":""+e.util.escapeQuotes(a),r+="\"' "),e.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+s:""+e.util.toQuotedString(a),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var y=r;return r=v.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+y+"]); ":" validate.errors = ["+y+"]; return false; ":" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r}},{}],23:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+n,u="errs__"+n,f=e.util.copy(e),p="";f.level++;var m=f.dataLevel=e.dataLevel+1,g="data"+m,v=e.baseId;if(r+="var "+u+" = errors;var "+d+";",Array.isArray(a)){var y=e.schema.additionalItems;if(y===!1){r+=" "+d+" = "+c+".length <= "+a.length+"; ";var A=l;l=e.errSchemaPath+"/additionalItems",r+="  if (!"+d+") {   ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"additionalItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { limit: '+a.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var E=r;r=b.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+E+"]); ":" validate.errors = ["+E+"]; return false; ":" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",l=A,h&&(p+="}",r+=" else { ")}var x=a;if(x)for(var w,T=-1,_=x.length-1;_>T;)if(w=x[T+=1],e.util.schemaHasRules(w,e.RULES.all)){r+=" valid"+f.level+" = true; if ("+c+".length > "+T+") { ";var S=c+"["+T+"]";f.schema=w,f.schemaPath=s+"["+T+"]",f.errSchemaPath=l+"/"+T,f.errorPath=e.util.getPathExpr(e.errorPath,T,e.opts.jsonPointers,!0),f.dataPathArr[m]=T;var C=e.validate(f);f.baseId=v,r+=e.util.varOccurences(C,g)<2?" "+e.util.varReplace(C,g,S)+" ":" var "+g+" = "+S+"; "+C+" ",r+=" }  ",h&&(r+=" if (valid"+f.level+") { ",p+="}")}if("object"==typeof y&&e.util.schemaHasRules(y,e.RULES.all)){f.schema=y,f.schemaPath=e.schemaPath+".additionalItems",f.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" valid"+f.level+" = true; if ("+c+".length > "+a.length+") {  for (var i"+n+" = "+a.length+"; i"+n+" < "+c+".length; i"+n+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,"i"+n,e.opts.jsonPointers,!0);var S=c+"[i"+n+"]";f.dataPathArr[m]="i"+n;var C=e.validate(f);f.baseId=v,r+=e.util.varOccurences(C,g)<2?" "+e.util.varReplace(C,g,S)+" ":" var "+g+" = "+S+"; "+C+" ",h&&(r+=" if (!valid"+f.level+") break; "),r+=" } }  ",h&&(r+=" if (valid"+f.level+") { ",p+="}")}}else if(e.util.schemaHasRules(a,e.RULES.all)){f.schema=a,f.schemaPath=s,f.errSchemaPath=l,r+="  for (var i"+n+" = 0; i"+n+" < "+c+".length; i"+n+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,"i"+n,e.opts.jsonPointers,!0);var S=c+"[i"+n+"]";f.dataPathArr[m]="i"+n;var C=e.validate(f);f.baseId=v,r+=e.util.varOccurences(C,g)<2?" "+e.util.varReplace(C,g,S)+" ":" var "+g+" = "+S+"; "+C+" ",h&&(r+=" if (!valid"+f.level+") break; "),r+=" }  ",h&&(r+=" if (valid"+f.level+") { ",p+="}")}return h&&(r+=" "+p+" if ("+u+" == errors) {"),r=e.util.cleanUpCode(r)}},{}],24:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&a.$data,u=d?e.util.getData(a.$data,o,e.dataPathArr):a;d&&(r+=" var schema"+n+" = "+u+"; ",u="schema"+n),r+="var division"+n+";if (",d&&(r+=" "+u+" !== undefined && ( typeof "+u+" != 'number' || "),r+=" (division"+n+" = "+c+" / "+u+", ",r+=e.opts.multipleOfPrecision?" Math.abs(Math.round(division"+n+") - division"+n+") > 1e-"+e.opts.multipleOfPrecision+" ":" division"+n+" !== parseInt(division"+n+") ",r+=" ) ",d&&(r+="  )  "),r+=" ) {   ";var f=f||[];f.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"multipleOf")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { multipleOf: '+u+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",r+=d?"' + "+u:""+a+"'"),e.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+s:""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var p=r;return r=f.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}},{}],25:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="errs__"+n,u=e.util.copy(e);if(u.level++,e.util.schemaHasRules(a,e.RULES.all)){u.schema=a,u.schemaPath=s,u.errSchemaPath=l,r+=" var "+d+" = errors;  ";var f=e.compositeRule;e.compositeRule=u.compositeRule=!0,u.createErrors=!1;var p;u.opts.allErrors&&(p=u.opts.allErrors,u.opts.allErrors=!1),r+=" "+e.validate(u)+" ",u.createErrors=!0,p&&(u.opts.allErrors=p),e.compositeRule=u.compositeRule=f,r+=" if (valid"+u.level+") {   ";var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"not")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: {} ',e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var g=r;r=m.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(i||"not")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: {} ',e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(r+=" if (false) { ");return r}},{}],26:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+n,u="errs__"+n,f=e.util.copy(e),p="";f.level++,r+="var "+u+" = errors;var prevValid"+n+" = false;var "+d+" = false;";var m=f.baseId,g=e.compositeRule;e.compositeRule=f.compositeRule=!0;var v=a;if(v)for(var y,A=-1,b=v.length-1;b>A;)y=v[A+=1],e.util.schemaHasRules(y,e.RULES.all)?(f.schema=y,f.schemaPath=s+"["+A+"]",f.errSchemaPath=l+"/"+A,r+="  "+e.validate(f)+" ",f.baseId=m):r+=" var valid"+f.level+" = true; ",A&&(r+=" if (valid"+f.level+" && prevValid"+n+") "+d+" = false; else { ",p+="}"),r+=" if (valid"+f.level+") "+d+" = prevValid"+n+" = true;";e.compositeRule=f.compositeRule=g,r+=""+p+"if (!"+d+") {   ";var E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"oneOf")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: {} ',e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var x=r;return r=E.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+x+"]); ":" validate.errors = ["+x+"]; return false; ":" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}},{}],27:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&a.$data,u=d?e.util.getData(a.$data,o,e.dataPathArr):a;d&&(r+=" var schema"+n+" = "+u+"; ",u="schema"+n);var f=d?"(new RegExp("+u+"))":e.usePattern(a);r+="if ( ",d&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),r+=" !"+f+".test("+c+") ) {   ";var p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"pattern")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { pattern:  ',r+=d?""+u:""+e.util.toQuotedString(a),r+="  } ",e.opts.messages!==!1&&(r+=" , message: 'should match pattern \"",r+=d?"' + "+u+" + '":""+e.util.escapeQuotes(a),r+="\"' "),e.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+s:""+e.util.toQuotedString(a),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var m=r;return r=p.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}},{}],28:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+n,u="key"+n,f="patternMatched"+n,p="",m=e.opts.ownProperties;r+="var "+d+" = true;";var g=a;if(g)for(var v,y=-1,A=g.length-1;A>y;){v=g[y+=1],r+=" var "+f+" = false; for (var "+u+" in "+c+") {  ",m&&(r+=" if (!Object.prototype.hasOwnProperty.call("+c+", "+u+")) continue; "),r+=" "+f+" = "+e.usePattern(v)+".test("+u+"); if ("+f+") break; } ";var b=e.util.escapeQuotes(v);r+=" if (!"+f+") { "+d+" = false;  var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(i||"patternRequired")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { missingPattern: '"+b+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have property matching pattern \\'"+b+"\\'' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; }   ",h&&(p+="}",r+=" else { ")}return r+=""+p}},{}],29:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+n,u="errs__"+n,f=e.util.copy(e),p="";f.level++;var m="key"+n,g=f.dataLevel=e.dataLevel+1,v="data"+g,y=Object.keys(a||{}),A=e.schema.patternProperties||{},b=Object.keys(A),E=e.schema.additionalProperties,x=y.length||b.length,w=E===!1,T="object"==typeof E&&Object.keys(E).length,_=e.opts.removeAdditional,S=w||T||_,C=e.opts.ownProperties,R=e.baseId,k=e.schema.required;if(k&&(!e.opts.v5||!k.$data)&&e.opts.loopRequired>k.length)var M=e.util.toHash(k);if(e.opts.v5)var P=e.schema.patternGroups||{},D=Object.keys(P);if(r+="var "+u+" = errors;var valid"+f.level+" = true;",S){if(r+=" for (var "+m+" in "+c+") {  ",C&&(r+=" if (!Object.prototype.hasOwnProperty.call("+c+", "+m+")) continue; "),x){if(r+=" var isAdditional"+n+" = !(false ",y.length)if(y.length>5)r+=" || validate.schema"+s+"["+m+"] ";else{var H=y;if(H)for(var O,L=-1,I=H.length-1;I>L;)O=H[L+=1],r+=" || "+m+" == "+e.util.toQuotedString(O)+" "}if(b.length){var B=b;if(B)for(var N,F=-1,z=B.length-1;z>F;)N=B[F+=1],r+=" || "+e.usePattern(N)+".test("+m+") "}if(e.opts.v5&&D&&D.length){var U=D;if(U)for(var j,F=-1,V=U.length-1;V>F;)j=U[F+=1],r+=" || "+e.usePattern(j)+".test("+m+") "}r+=" ); if (isAdditional"+n+") { "}if("all"==_)r+=" delete "+c+"["+m+"]; ";else{var G=e.errorPath,W="' + key"+n+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,"key"+n,e.opts.jsonPointers)),w)if(_)r+=" delete "+c+"["+m+"]; ";else{r+=" valid"+f.level+" = false; ";var Y=l;l=e.errSchemaPath+"/additionalProperties";var q=q||[];q.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"additionalProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { additionalProperty: '"+W+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have additional properties' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var X=r;r=q.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+X+"]); ":" validate.errors = ["+X+"]; return false; ":" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=Y,h&&(r+=" break; ")}else if(T)if("failing"==_){r+=" var "+u+" = errors;  ";var Q=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=E,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,"key"+n,e.opts.jsonPointers);var Z=c+"[key"+n+"]";f.dataPathArr[g]="key"+n;var K=e.validate(f);f.baseId=R,r+=e.util.varOccurences(K,v)<2?" "+e.util.varReplace(K,v,Z)+" ":" var "+v+" = "+Z+"; "+K+" ",r+=" if (!valid"+f.level+") { errors = "+u+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+c+"["+m+"]; }  ",e.compositeRule=f.compositeRule=Q}else{f.schema=E,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,"key"+n,e.opts.jsonPointers);var Z=c+"[key"+n+"]";f.dataPathArr[g]="key"+n;var K=e.validate(f);f.baseId=R,r+=e.util.varOccurences(K,v)<2?" "+e.util.varReplace(K,v,Z)+" ":" var "+v+" = "+Z+"; "+K+" ",h&&(r+=" if (!valid"+f.level+") break; ")}e.errorPath=G}x&&(r+=" } "),r+=" }  ",h&&(r+=" if (valid"+f.level+") { ",p+="}")}var J=e.opts.useDefaults&&!e.compositeRule;if(y.length){var $=y;if($)for(var O,ee=-1,te=$.length-1;te>ee;){O=$[ee+=1];var ie=a[O];if(e.util.schemaHasRules(ie,e.RULES.all)){var re=e.util.getProperty(O),Z=c+re,ne=J&&void 0!==ie["default"];f.schema=ie,f.schemaPath=s+re,f.errSchemaPath=l+"/"+e.util.escapeFragment(O),f.errorPath=e.util.getPath(e.errorPath,O,e.opts.jsonPointers),f.dataPathArr[g]=e.util.toQuotedString(O);var K=e.validate(f);if(f.baseId=R,e.util.varOccurences(K,v)<2){K=e.util.varReplace(K,v,Z);var oe=Z}else{var oe=v;r+=" var "+v+" = "+Z+"; "}if(ne)r+=" "+K+" ";else{if(M&&M[O]){r+=" if ("+oe+" === undefined) { valid"+f.level+" = false; ";var G=e.errorPath,Y=l,ae=e.util.escapeQuotes(O);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(G,O,e.opts.jsonPointers)),l=e.errSchemaPath+"/required";var q=q||[];q.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { missingProperty: '"+ae+"' } ",e.opts.messages!==!1&&(r+=" , message: '",r+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+ae+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var X=r;r=q.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+X+"]); ":" validate.errors = ["+X+"]; return false; ":" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=Y,e.errorPath=G,r+=" } else { "}else r+=h?" if ("+oe+" === undefined) { valid"+f.level+" = true; } else { ":" if ("+oe+" !== undefined) { ";r+=" "+K+" } "}}h&&(r+=" if (valid"+f.level+") { ",p+="}")}}var se=b;if(se)for(var N,le=-1,he=se.length-1;he>le;){N=se[le+=1];var ie=A[N];if(e.util.schemaHasRules(ie,e.RULES.all)){f.schema=ie,f.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(N),f.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(N),r+=" for (var "+m+" in "+c+") {  ",C&&(r+=" if (!Object.prototype.hasOwnProperty.call("+c+", "+m+")) continue; "),r+=" if ("+e.usePattern(N)+".test("+m+")) { ",f.errorPath=e.util.getPathExpr(e.errorPath,"key"+n,e.opts.jsonPointers);var Z=c+"[key"+n+"]";f.dataPathArr[g]="key"+n;var K=e.validate(f);f.baseId=R,r+=e.util.varOccurences(K,v)<2?" "+e.util.varReplace(K,v,Z)+" ":" var "+v+" = "+Z+"; "+K+" ",h&&(r+=" if (!valid"+f.level+") break; "),r+=" } ",h&&(r+=" else valid"+f.level+" = true; "),r+=" }  ",h&&(r+=" if (valid"+f.level+") { ",p+="}")}}if(e.opts.v5){var ce=D;if(ce)for(var j,de=-1,ue=ce.length-1;ue>de;){j=ce[de+=1];var fe=P[j],ie=fe.schema;if(e.util.schemaHasRules(ie,e.RULES.all)){f.schema=ie,f.schemaPath=e.schemaPath+".patternGroups"+e.util.getProperty(j)+".schema",f.errSchemaPath=e.errSchemaPath+"/patternGroups/"+e.util.escapeFragment(j)+"/schema",r+=" var pgPropCount"+n+" = 0; for (var "+m+" in "+c+") {  ",C&&(r+=" if (!Object.prototype.hasOwnProperty.call("+c+", "+m+")) continue; "),r+=" if ("+e.usePattern(j)+".test("+m+")) { pgPropCount"+n+"++; ",f.errorPath=e.util.getPathExpr(e.errorPath,"key"+n,e.opts.jsonPointers);var Z=c+"[key"+n+"]";f.dataPathArr[g]="key"+n;var K=e.validate(f);f.baseId=R,r+=e.util.varOccurences(K,v)<2?" "+e.util.varReplace(K,v,Z)+" ":" var "+v+" = "+Z+"; "+K+" ",h&&(r+=" if (!valid"+f.level+") break; "),r+=" } ",h&&(r+=" else valid"+f.level+" = true; "),r+=" }  ",h&&(r+=" if (valid"+f.level+") { ",p+="}");var pe=fe.minimum,me=fe.maximum;if(void 0!==pe||void 0!==me){r+=" var "+d+" = true; ";var Y=l;if(void 0!==pe){var ge=pe,ve="minimum",ye="less";r+=" "+d+" = pgPropCount"+n+" >= "+pe+"; ",l=e.errSchemaPath+"/patternGroups/minimum",r+="  if (!"+d+") {   ";var q=q||[];q.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"patternGroups")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { reason: '"+ve+"', limit: "+ge+", pattern: '"+e.util.escapeQuotes(j)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have "+ye+" than "+ge+' properties matching pattern "'+e.util.escapeQuotes(j)+"\"' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var X=r;r=q.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+X+"]); ":" validate.errors = ["+X+"]; return false; ":" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",void 0!==me&&(r+=" else ")}if(void 0!==me){var ge=me,ve="maximum",ye="more";r+=" "+d+" = pgPropCount"+n+" <= "+me+"; ",l=e.errSchemaPath+"/patternGroups/maximum",r+="  if (!"+d+") {   ";var q=q||[];q.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"patternGroups")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { reason: '"+ve+"', limit: "+ge+", pattern: '"+e.util.escapeQuotes(j)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have "+ye+" than "+ge+' properties matching pattern "'+e.util.escapeQuotes(j)+"\"' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var X=r;r=q.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+X+"]); ":" validate.errors = ["+X+"]; return false; ":" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}l=Y,h&&(r+=" if ("+d+") { ",p+="}")}}}}return h&&(r+=" "+p+" if ("+u+" == errors) {"),r=e.util.cleanUpCode(r)}},{}],30:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r,n,o=" ",a=e.level,s=e.dataLevel,l=e.schema[t],h=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(s||""),u="valid"+a;if("#"==l||"#/"==l)e.isRoot?(r=e.async,n="validate"):(r=e.root.schema.$async===!0,n="root.refVal[0]");else{var f=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===f){var p="can't resolve reference "+l+" from id "+e.baseId;if("fail"==e.opts.missingRefs){console.log(p);var m=m||[];m.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(i||"$ref")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+h+"\" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",e.opts.messages!==!1&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var g=o;o=m.pop(),o+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs){var v=new Error(p);throw v.missingRef=e.resolve.url(e.baseId,l),v.missingSchema=e.resolve.normalizeId(e.resolve.fullPath(v.missingRef)),v}console.log(p),c&&(o+=" if (true) { ")}}else if(f.inline){var y=e.util.copy(e);y.level++,y.schema=f.schema,y.schemaPath="",y.errSchemaPath=l;var A=e.validate(y).replace(/validate\.schema/g,f.code);o+=" "+A+" ",c&&(o+=" if (valid"+y.level+") { ")}else r=f.$async===!0,n=f.code}if(n){var m=m||[];m.push(o),o="",o+=e.opts.passContext?" "+n+".call(this, ":" "+n+"( ",o+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath),o+=s?" , data"+(s-1||"")+" , "+e.dataPathArr[s]+" ":" , parentData , parentDataProperty ",o+=")  ";var b=o;if(o=m.pop(),r){if(!e.async)throw new Error("async schema referenced by sync schema");o+=" try { ",c&&(o+="var "+u+" ="),o+=" "+e.yieldAwait+" "+b+"; } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; } ",c&&(o+=" if ("+u+") { ")}else o+=" if (!"+b+") { if (vErrors === null) vErrors = "+n+".errors; else vErrors = vErrors.concat("+n+".errors); errors = vErrors.length; } ",c&&(o+=" else { ")}return o}},{}],31:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+n,u=e.opts.v5&&a.$data,f=u?e.util.getData(a.$data,o,e.dataPathArr):a;if(u&&(r+=" var schema"+n+" = "+f+"; ",f="schema"+n),!u)if(e.opts.loopRequired>a.length&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],m=a;if(m)for(var g,v=-1,y=m.length-1;y>v;){g=m[v+=1];var A=e.schema.properties[g];A&&e.util.schemaHasRules(A,e.RULES.all)||(p[p.length]=g)}}else var p=a;if(u||p.length){var b=e.errorPath,E=u||p.length>=e.opts.loopRequired;if(h)if(r+=" var missing"+n+"; ",E){u||(r+=" var schema"+n+" = validate.schema"+s+"; ");var x="i"+n,w="schema"+n+"["+x+"]",T="' + "+w+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,w,e.opts.jsonPointers)),r+=" var "+d+" = true; ",u&&(r+=" if (schema"+n+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+n+")) "+d+" = false; else {"),r+=" for (var "+x+" = 0; "+x+" < schema"+n+".length; "+x+"++) { "+d+" = "+c+"[schema"+n+"["+x+"]] !== undefined; if (!"+d+") break; } ",u&&(r+="  }  "),r+="  if (!"+d+") {   ";var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(r+=" , message: '",r+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+T+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var S=r;r=_.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var C=p;if(C)for(var R,x=-1,k=C.length-1;k>x;){R=C[x+=1],x&&(r+=" || ");var M=e.util.getProperty(R);r+=" ( "+c+M+" === undefined && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?R:M)+") ) "}r+=") {  ";var w="missing"+n,T="' + "+w+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,w,!0):b+" + "+w);var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(r+=" , message: '",r+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+T+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var S=r;r=_.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(E){u||(r+=" var schema"+n+" = validate.schema"+s+"; ");var x="i"+n,w="schema"+n+"["+x+"]",T="' + "+w+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,w,e.opts.jsonPointers)),u&&(r+=" if (schema"+n+" && !Array.isArray(schema"+n+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(r+=" , message: '",r+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+T+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (schema"+n+" !== undefined) { "),r+=" for (var "+x+" = 0; "+x+" < schema"+n+".length; "+x+"++) { if ("+c+"[schema"+n+"["+x+"]] === undefined) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(r+=" , message: '",r+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+T+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",u&&(r+="  }  ")}else{var P=p;if(P)for(var D,H=-1,O=P.length-1;O>H;){D=P[H+=1];var M=e.util.getProperty(D),T=e.util.escapeQuotes(D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,D,e.opts.jsonPointers)),r+=" if ("+c+M+" === undefined) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+"\" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(r+=" , message: '",r+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+T+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else h&&(r+=" if (true) {");return r}},{}],32:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+n,u="errs__"+n,f=e.util.copy(e),p="";f.level++;var m,g="ifPassed"+e.level,v=f.baseId;r+="var "+g+";";var y=a;if(y)for(var A,b=-1,E=y.length-1;E>b;){if(A=y[b+=1],b&&!m&&(r+=" if (!"+g+") { ",p+="}"),A["if"]&&e.util.schemaHasRules(A["if"],e.RULES.all)){r+=" var "+u+" = errors;   ";var x=e.compositeRule;if(e.compositeRule=f.compositeRule=!0,f.createErrors=!1,f.schema=A["if"],f.schemaPath=s+"["+b+"].if",f.errSchemaPath=l+"/"+b+"/if",r+="  "+e.validate(f)+" ",f.baseId=v,f.createErrors=!0,e.compositeRule=f.compositeRule=x,r+=" "+g+" = valid"+f.level+"; if ("+g+") {  ","boolean"==typeof A.then){if(A.then===!1){var w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"switch")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { caseIndex: '+b+" } ",e.opts.messages!==!1&&(r+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var T=r;r=w.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+T+"]); ":" validate.errors = ["+T+"]; return false; ":" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" var valid"+f.level+" = "+A.then+"; "}else f.schema=A.then,f.schemaPath=s+"["+b+"].then",f.errSchemaPath=l+"/"+b+"/then",r+="  "+e.validate(f)+" ",f.baseId=v;r+="  } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } } "}else if(r+=" "+g+" = true;  ","boolean"==typeof A.then){if(A.then===!1){var w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"switch")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { caseIndex: '+b+" } ",e.opts.messages!==!1&&(r+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var T=r;r=w.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+T+"]); ":" validate.errors = ["+T+"]; return false; ":" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" var valid"+f.level+" = "+A.then+"; "}else f.schema=A.then,f.schemaPath=s+"["+b+"].then",f.errSchemaPath=l+"/"+b+"/then",r+="  "+e.validate(f)+" ",f.baseId=v;m=A["continue"]}return r+=""+p+"var "+d+" = valid"+f.level+"; ",r=e.util.cleanUpCode(r)}},{}],33:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+"."+t,l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+n,u=e.opts.v5&&a.$data,f=u?e.util.getData(a.$data,o,e.dataPathArr):a;
if(u&&(r+=" var schema"+n+" = "+f+"; ",f="schema"+n),(a||u)&&e.opts.uniqueItems!==!1){u&&(r+=" var "+d+"; if ("+f+" === false || "+f+" === undefined) "+d+" = true; else if (typeof "+f+" != 'boolean') "+d+" = false; else { "),r+=" var "+d+" = true; if ("+c+".length > 1) { var i = "+c+".length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal("+c+"[i], "+c+"[j])) { "+d+" = false; break outer; } } } } ",u&&(r+="  }  "),r+=" if (!"+d+") {   ";var p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(i||"uniqueItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+l+'" , params: { i: i, j: j } ',e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",r+=u?"validate.schema"+s:""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var m=r;r=p.pop(),r+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { ")}else h&&(r+=" if (true) { ");return r}},{}],34:[function(e,t,i){"use strict";t.exports=function(e,t){function i(e){for(var t=0;e.rules.length>t;t++)if(r(e.rules[t]))return!0}function r(t){return void 0!==e.schema[t.keyword]||"properties"==t.keyword&&(e.schema.additionalProperties===!1||"object"==typeof e.schema.additionalProperties||e.schema.patternProperties&&Object.keys(e.schema.patternProperties).length||e.opts.v5&&e.schema.patternGroups&&Object.keys(e.schema.patternGroups).length)}var n="",o=e.schema.$async===!0;if(e.isTop){var a=e.isTop,s=e.level=0,l=e.dataLevel=0,h="data";if(e.rootId=e.resolve.fullPath(e.root.schema.id),e.baseId=e.baseId||e.rootId,o){e.async=!0;var c="es7"==e.opts.async;e.yieldAwait=c?"await":"yield"}delete e.isTop,e.dataPathArr=[void 0],n+=" validate = ",o?c?n+=" (async function ":("co*"==e.opts.async&&(n+="co.wrap"),n+="(function* "):n+=" (function ",n+=" (data, dataPath, parentData, parentDataProperty) { 'use strict'; var vErrors = null; ",n+=" var errors = 0;     "}else{var s=e.level,l=e.dataLevel,h="data"+(l||"");if(e.schema.id&&(e.baseId=e.resolve.url(e.baseId,e.schema.id)),o&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+s+" = errors;"}var d,u="valid"+s,f=!e.opts.allErrors,p="",m="",g=e.schema.type,v=Array.isArray(g);if(g&&e.opts.coerceTypes){var y=e.util.coerceToTypes(g);if(y){var A=e.schemaPath+".type",b=e.errSchemaPath+"/type",E=v?"checkDataTypes":"checkDataType";n+=" if ("+e.util[E](g,h,!0)+") {  ";var x="dataType"+s,w="coerced"+s;n+=" var "+x+" = typeof "+h+"; var "+w+" = undefined; ";var T="",_=y;if(_)for(var S,C=-1,R=_.length-1;R>C;)S=_[C+=1],C&&(n+=" if ("+w+" === undefined) { ",T+="}"),"string"==S?n+=" if ("+x+" == 'number' || "+x+" == 'boolean') "+w+" = '' + "+h+"; else if ("+h+" === null) "+w+" = ''; ":"number"==S||"integer"==S?(n+=" if ("+x+" == 'boolean' || "+h+" === null || ("+x+" == 'string' && "+h+" && "+h+" == +"+h+" ","integer"==S&&(n+=" && !("+h+" % 1)"),n+=")) "+w+" = +"+h+"; "):"boolean"==S?n+=" if ("+h+" === 'false' || "+h+" === 0 || "+h+" === null) "+w+" = false; else if ("+h+" === 'true' || "+h+" === 1) "+w+" = true; ":"null"==S&&(n+=" if ("+h+" === '' || "+h+" === 0 || "+h+" === false) "+w+" = null; ");n+=" "+T+" if ("+w+" === undefined) {   ";var k=k||[];k.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(d||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+b+"\" , params: { type: '",n+=v?""+g.join(","):""+g,n+="' } ",e.opts.messages!==!1&&(n+=" , message: 'should be ",n+=v?""+g.join(","):""+g,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+A+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var M=n;if(n=k.pop(),n+=!e.compositeRule&&f?e.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",l){var P="data"+(l-1||""),D=e.dataPathArr[l];n+=" "+h+" = "+P+"["+D+"] = "+w+"; "}else n+=" data = "+w+"; if (parentData !== undefined) parentData[parentDataProperty] = "+w+"; ";n+=" } } "}}var H=e.RULES;if(H)for(var O,L=-1,I=H.length-1;I>L;)if(O=H[L+=1],i(O)){if(O.type&&(n+=" if ("+e.util.checkDataType(O.type,h)+") { "),e.opts.useDefaults&&!e.compositeRule)if("object"==O.type&&e.schema.properties){var B=e.schema.properties,N=Object.keys(B),F=N;if(F)for(var z,U=-1,j=F.length-1;j>U;){z=F[U+=1];var V=B[z];if(void 0!==V["default"]){var G=h+e.util.getProperty(z);n+="  if ("+G+" === undefined) "+G+" = ",n+="shared"==e.opts.useDefaults?" "+e.useDefault(V["default"])+" ":" "+JSON.stringify(V["default"])+" ",n+="; "}}}else if("array"==O.type&&Array.isArray(e.schema.items)){var W=e.schema.items;if(W)for(var V,C=-1,Y=W.length-1;Y>C;)if(V=W[C+=1],void 0!==V["default"]){var G=h+"["+C+"]";n+="  if ("+G+" === undefined) "+G+" = ",n+="shared"==e.opts.useDefaults?" "+e.useDefault(V["default"])+" ":" "+JSON.stringify(V["default"])+" ",n+="; "}}var q=O.rules;if(q)for(var X,Q=-1,Z=q.length-1;Z>Q;)if(X=q[Q+=1],r(X)){if(X.custom){var B=e.schema[X.keyword],K=e.useCustomRule(X,B,e.schema,e),J=K.code+".errors",A=e.schemaPath+"."+X.keyword,b=e.errSchemaPath+"/"+X.keyword,$="errs"+s,C="i"+s,ee="ruleErr"+s,te=X.definition,ie=te.async,re=te.inline,ne=te.macro;if(ie&&!e.async)throw new Error("async keyword in sync schema");if(re||ne||(n+=""+J+" = null;"),n+="var "+$+" = errors;var valid"+s+";",re&&te.statements)n+=" "+K.validate;else if(ne){var oe=e.util.copy(e);oe.level++,oe.schema=K.validate,oe.schemaPath="";var ae=e.compositeRule;e.compositeRule=oe.compositeRule=!0;var se=e.validate(oe).replace(/validate\.schema/g,K.code);e.compositeRule=oe.compositeRule=ae,n+=" "+se}else if(te.compile||te.validate){var k=k||[];k.push(n),n="",n+="  "+K.code+".call( ",n+=e.opts.passContext?"this":"self",n+=te.compile||te.schema===!1?" , "+h+" ":" , validate.schema"+A+" , "+h+" , validate.schema"+e.schemaPath+" ",n+=" , (dataPath || '')",'""'!=e.errorPath&&(n+=" + "+e.errorPath),n+=l?" , data"+(l-1||"")+" , "+e.dataPathArr[l]+" ":" , parentData , parentDataProperty ",n+=" )  ";var le=n;n=k.pop(),te.errors!==!1&&(ie?(J="customErrors"+s,n+=" var "+J+" = null; try { valid"+s+" = "+e.yieldAwait+le+"; } catch (e) { valid"+s+" = false; if (e instanceof ValidationError) "+J+" = e.errors; else throw e; } "):n+=" "+K.code+".errors = null; ")}n+="if (! ",n+=re?te.statements?" valid"+s+" ":" ("+K.validate+") ":ne?" valid"+oe.level+" ":ie?te.errors===!1?" ("+e.yieldAwait+le+") ":" valid"+s+" ":" "+le+" ",n+=") { ",d=X.keyword;var k=k||[];k.push(n),n="";var k=k||[];k.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+b+"\" , params: { keyword: '"+X.keyword+"' } ",e.opts.messages!==!1&&(n+=" , message: 'should pass \""+X.keyword+"\" keyword validation' "),e.opts.verbose&&(n+=" , schema: validate.schema"+A+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var M=n;n=k.pop(),n+=!e.compositeRule&&f?e.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var he=n;n=k.pop(),re?te.errors?"full"!=te.errors&&(n+="  for (var "+C+"="+$+"; "+C+"<errors; "+C+"++) { var "+ee+" = vErrors["+C+"]; if ("+ee+".dataPath === undefined) { "+ee+".dataPath = (dataPath || '') + "+e.errorPath+"; } if ("+ee+".schemaPath === undefined) { "+ee+'.schemaPath = "'+b+'"; } ',e.opts.verbose&&(n+=" "+ee+".schema = validate.schema"+A+"; "+ee+".data = "+h+"; "),n+=" } "):te.errors===!1?n+=" "+he+" ":(n+=" if ("+$+" == errors) { "+he+" } else {  for (var "+C+"="+$+"; "+C+"<errors; "+C+"++) { var "+ee+" = vErrors["+C+"]; if ("+ee+".dataPath === undefined) { "+ee+".dataPath = (dataPath || '') + "+e.errorPath+"; } if ("+ee+".schemaPath === undefined) { "+ee+'.schemaPath = "'+b+'"; } ',e.opts.verbose&&(n+=" "+ee+".schema = validate.schema"+A+"; "+ee+".data = "+h+"; "),n+=" } } "):ne?(n+="   var err =   ",e.createErrors!==!1?(n+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+b+"\" , params: { keyword: '"+X.keyword+"' } ",e.opts.messages!==!1&&(n+=" , message: 'should pass \""+X.keyword+"\" keyword validation' "),e.opts.verbose&&(n+=" , schema: validate.schema"+A+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(n+=e.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false ")):te.errors===!1?n+=" "+he+" ":(n+=" if (Array.isArray("+J+")) { if (vErrors === null) vErrors = "+J+"; else vErrors.concat("+J+"); errors = vErrors.length;  for (var "+C+"="+$+"; "+C+"<errors; "+C+"++) { var "+ee+" = vErrors["+C+"];  "+ee+".dataPath = (dataPath || '') + "+e.errorPath+";   "+ee+'.schemaPath = "'+b+'";  ',e.opts.verbose&&(n+=" "+ee+".schema = validate.schema"+A+"; "+ee+".data = "+h+"; "),n+=" } } else { "+he+" } "),d=void 0,n+=" } ",f&&(n+=" else { ")}else n+=" "+X.code(e,X.keyword)+" ";f&&(p+="}")}if(f&&(n+=" "+p+" ",p=""),O.type&&(n+=" } ",g&&g===O.type)){var ce=!0;n+=" else { ";var A=e.schemaPath+".type",b=e.errSchemaPath+"/type",k=k||[];k.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(d||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+b+"\" , params: { type: '",n+=v?""+g.join(","):""+g,n+="' } ",e.opts.messages!==!1&&(n+=" , message: 'should be ",n+=v?""+g.join(","):""+g,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+A+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var M=n;n=k.pop(),n+=!e.compositeRule&&f?e.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}f&&(n+=" if (errors === ",n+=a?"0":"errs_"+s,n+=") { ",m+="}")}if(g&&!ce&&(!e.opts.coerceTypes||!y)){var A=e.schemaPath+".type",b=e.errSchemaPath+"/type",E=v?"checkDataTypes":"checkDataType";n+=" if ("+e.util[E](g,h,!0)+") {   ";var k=k||[];k.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(d||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+b+"\" , params: { type: '",n+=v?""+g.join(","):""+g,n+="' } ",e.opts.messages!==!1&&(n+=" , message: 'should be ",n+=v?""+g.join(","):""+g,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+A+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var M=n;n=k.pop(),n+=!e.compositeRule&&f?e.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }"}return f&&(n+=" "+m+" "),a?(o?(n+=" if (errors === 0) return true;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" });"):n+=" var "+u+" = errors === errs_"+s+";",n=e.util.cleanUpCode(n),a&&f&&(n=e.util.cleanUpVarErrors(n,o)),n}},{}],35:[function(e,t,i){"use strict";var r=/^[a-z_$][a-z0-9_$]*$/i;t.exports=function(e,t){function i(e,t,i){for(var r,n=0;o.RULES.length>n;n++){var a=o.RULES[n];if(a.type==t){r=a;break}}r||(r={type:t,rules:[]},o.RULES.push(r));var s={keyword:e,definition:i,custom:!0};r.rules.push(s)}function n(e){if(!o.RULES.types[e])throw new Error("Unknown type "+e)}var o=this;if(this.RULES.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!r.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){var a=t.type;if(Array.isArray(a)){var s,l=a.length;for(s=0;l>s;s++)n(a[s]);for(s=0;l>s;s++)i(e,a[s],t)}else a&&n(a),i(e,a,t)}this.RULES.keywords[e]=!0,this.RULES.all[e]=!0}},{}],36:[function(e,t,i){t.exports={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},"default":{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean","default":!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean","default":!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean","default":!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},"enum":{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},"default":{}}},{}],37:[function(e,t,i){t.exports={id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema (v5 proposals)",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},$data:{type:"object",required:["$data"],properties:{$data:{type:"string",format:"relative-json-pointer"}},additionalProperties:!1}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},"default":{},multipleOf:{anyOf:[{type:"number",minimum:0,exclusiveMinimum:!0},{$ref:"#/definitions/$data"}]},maximum:{anyOf:[{type:"number"},{$ref:"#/definitions/$data"}]},exclusiveMaximum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},minimum:{anyOf:[{type:"number"},{$ref:"#/definitions/$data"}]},exclusiveMinimum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},maxLength:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minLength:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},pattern:{anyOf:[{type:"string",format:"regex"},{$ref:"#/definitions/$data"}]},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"},{$ref:"#/definitions/$data"}],"default":{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minItems:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},uniqueItems:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},maxProperties:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minProperties:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},required:{anyOf:[{$ref:"#/definitions/stringArray"},{$ref:"#/definitions/$data"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"},{$ref:"#/definitions/$data"}],"default":{}},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},"enum":{anyOf:[{type:"array",minItems:1,uniqueItems:!0},{$ref:"#/definitions/$data"}]},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"},format:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},formatMaximum:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},formatMinimum:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},formatExclusiveMaximum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},formatExclusiveMinimum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},constant:{anyOf:[{},{$ref:"#/definitions/$data"}]},contains:{$ref:"#"},patternGroups:{type:"object",additionalProperties:{type:"object",required:["schema"],properties:{maximum:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minimum:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},schema:{$ref:"#"}},additionalProperties:!1},"default":{}},"switch":{type:"array",items:{required:["then"],properties:{"if":{$ref:"#"},then:{anyOf:[{type:"boolean"},{$ref:"#"}]},"continue":{type:"boolean"}},additionalProperties:!1,dependencies:{"continue":["if"]}}}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"],formatMaximum:["format"],formatMinimum:["format"],formatExclusiveMaximum:["formatMaximum"],formatExclusiveMinimum:["formatMinimum"]},"default":{}}},{}],38:[function(e,t,i){"use strict";function r(t){function i(e,i,n){var o={inline:n||r[e],statements:!0,errors:"full"};i&&(o.type=i),t.addKeyword(e,o)}var r={"switch":e("./dotjs/switch"),constant:e("./dotjs/constant"),_formatLimit:e("./dotjs/_formatLimit"),patternRequired:e("./dotjs/patternRequired")};if(t._opts.meta!==!1){var a=e("./refs/json-schema-v5.json");t.addMetaSchema(a,o)}i("constant"),t.addKeyword("contains",{type:"array",macro:n}),i("formatMaximum","string",r._formatLimit),i("formatMinimum","string",r._formatLimit),t.addKeyword("formatExclusiveMaximum"),t.addKeyword("formatExclusiveMinimum"),t.addKeyword("patternGroups"),i("patternRequired","object"),i("switch")}function n(e){return{not:{items:{not:e}}}}var o="https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json";t.exports={enable:r,META_SCHEMA_ID:o}},{"./dotjs/_formatLimit":12,"./dotjs/constant":19,"./dotjs/patternRequired":28,"./dotjs/switch":32,"./refs/json-schema-v5.json":37}],39:[function(e,t,i){(function(e){!function(r){function n(e){throw new RangeError(H[e])}function o(e,t){for(var i=e.length,r=[];i--;)r[i]=t(e[i]);return r}function a(e,t){var i=e.split("@"),r="";i.length>1&&(r=i[0]+"@",e=i[1]),e=e.replace(D,".");var n=e.split("."),a=o(n,t).join(".");return r+a}function s(e){for(var t,i,r=[],n=0,o=e.length;o>n;)t=e.charCodeAt(n++),t>=55296&&56319>=t&&o>n?(i=e.charCodeAt(n++),56320==(64512&i)?r.push(((1023&t)<<10)+(1023&i)+65536):(r.push(t),n--)):r.push(t);return r}function l(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=I(e>>>10&1023|55296),e=56320|1023&e),t+=I(e)}).join("")}function h(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:x}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function d(e,t,i){var r=0;for(e=i?L(e/S):e>>1,e+=L(e/t);e>O*T>>1;r+=x)e=L(e/O);return L(r+(O+1)*e/(e+_))}function u(e){var t,i,r,o,a,s,c,u,f,p,m=[],g=e.length,v=0,y=R,A=C;for(i=e.lastIndexOf(k),0>i&&(i=0),r=0;i>r;++r)e.charCodeAt(r)>=128&&n("not-basic"),m.push(e.charCodeAt(r));for(o=i>0?i+1:0;g>o;){for(a=v,s=1,c=x;o>=g&&n("invalid-input"),u=h(e.charCodeAt(o++)),(u>=x||u>L((E-v)/s))&&n("overflow"),v+=u*s,f=A>=c?w:c>=A+T?T:c-A,!(f>u);c+=x)p=x-f,s>L(E/p)&&n("overflow"),s*=p;t=m.length+1,A=d(v-a,t,0==a),L(v/t)>E-y&&n("overflow"),y+=L(v/t),v%=t,m.splice(v++,0,y)}return l(m)}function f(e){var t,i,r,o,a,l,h,u,f,p,m,g,v,y,A,b=[];for(e=s(e),g=e.length,t=R,i=0,a=C,l=0;g>l;++l)m=e[l],128>m&&b.push(I(m));for(r=o=b.length,o&&b.push(k);g>r;){for(h=E,l=0;g>l;++l)m=e[l],m>=t&&h>m&&(h=m);for(v=r+1,h-t>L((E-i)/v)&&n("overflow"),i+=(h-t)*v,t=h,l=0;g>l;++l)if(m=e[l],t>m&&++i>E&&n("overflow"),m==t){for(u=i,f=x;p=a>=f?w:f>=a+T?T:f-a,!(p>u);f+=x)A=u-p,y=x-p,b.push(I(c(p+A%y,0))),u=L(A/y);b.push(I(c(u,0))),a=d(i,v,r==o),i=0,++r}++i,++t}return b.join("")}function p(e){return a(e,function(e){return M.test(e)?u(e.slice(4).toLowerCase()):e})}function m(e){return a(e,function(e){return P.test(e)?"xn--"+f(e):e})}var g="object"==typeof i&&i&&!i.nodeType&&i,v="object"==typeof t&&t&&!t.nodeType&&t,y="object"==typeof e&&e;y.global!==y&&y.window!==y&&y.self!==y||(r=y);var A,b,E=2147483647,x=36,w=1,T=26,_=38,S=700,C=72,R=128,k="-",M=/^xn--/,P=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=x-w,L=Math.floor,I=String.fromCharCode;if(A={version:"1.4.1",ucs2:{decode:s,encode:l},decode:u,encode:f,toASCII:m,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return A});else if(g&&v)if(t.exports==g)v.exports=A;else for(b in A)A.hasOwnProperty(b)&&(g[b]=A[b]);else r.punycode=A}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(e,t,i){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,i,o){t=t||"&",i=i||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var h=e.length;l>0&&h>l&&(h=l);for(var c=0;h>c;++c){var d,u,f,p,m=e[c].replace(s,"%20"),g=m.indexOf(i);g>=0?(d=m.substr(0,g),u=m.substr(g+1)):(d=m,u=""),f=decodeURIComponent(d),p=decodeURIComponent(u),r(a,f)?n(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],41:[function(e,t,i){"use strict";function r(e,t){if(e.map)return e.map(t);for(var i=[],r=0;e.length>r;r++)i.push(t(e[r],r));return i}var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,i,s){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(n(a))+i;return o(e[a])?r(e[a],function(e){return s+encodeURIComponent(n(e))}).join(t):s+encodeURIComponent(n(e[a]))}).join(t):s?encodeURIComponent(n(s))+i+encodeURIComponent(n(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}},{}],42:[function(e,t,i){"use strict";i.decode=i.parse=e("./decode"),i.encode=i.stringify=e("./encode")},{"./decode":40,"./encode":41}],43:[function(e,t,i){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(e,t,i){if(e&&h.isObject(e)&&e instanceof r)return e;var n=new r;return n.parse(e,t,i),n}function o(e){return h.isString(e)&&(e=n(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return n(e,!1,!0).resolve(t)}function s(e,t){return e?n(e,!1,!0).resolveObject(t):t}var l=e("punycode"),h=e("./util");i.parse=n,i.resolve=a,i.resolveObject=s,i.format=o,i.Url=r;var c=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","    "],p=["{","}","|","\\","^","`"].concat(f),m=["'"].concat(p),g=["%","/","?",";","#"].concat(m),v=["/","?","#"],y=255,A=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=e("querystring");r.prototype.parse=function(e,t,i){if(!h.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),n=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(n),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(n);var s=e;if(s=s.trim(),!i&&1===e.split("#").length){var d=u.exec(s);if(d)return this.path=s,this.href=s,this.pathname=d[1],d[2]?(this.search=d[2],this.query=t?T.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=c.exec(s);if(f){f=f[0];var p=f.toLowerCase();this.protocol=p,s=s.substr(f.length)}if(i||f||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var _="//"===s.substr(0,2);!_||f&&x[f]||(s=s.substr(2),this.slashes=!0)}if(!x[f]&&(_||f&&!w[f])){for(var S=-1,C=0;v.length>C;C++){var R=s.indexOf(v[C]);-1!==R&&(-1===S||S>R)&&(S=R)}var k,M;M=-1===S?s.lastIndexOf("@"):s.lastIndexOf("@",S),-1!==M&&(k=s.slice(0,M),s=s.slice(M+1),this.auth=decodeURIComponent(k)),S=-1;for(var C=0;g.length>C;C++){var R=s.indexOf(g[C]);-1!==R&&(-1===S||S>R)&&(S=R)}-1===S&&(S=s.length),this.host=s.slice(0,S),s=s.slice(S),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var D=this.hostname.split(/\./),C=0,H=D.length;H>C;C++){var O=D[C];if(O&&!O.match(A)){for(var L="",I=0,B=O.length;B>I;I++)L+=O.charCodeAt(I)>127?"x":O[I];if(!L.match(A)){var N=D.slice(0,C),F=D.slice(C+1),z=O.match(b);z&&(N.push(z[1]),F.unshift(z[2])),F.length&&(s="/"+F.join(".")+s),this.hostname=N.join(".");break}}}this.hostname=this.hostname.length>y?"":this.hostname.toLowerCase(),P||(this.hostname=l.toASCII(this.hostname));var U=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+U,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!E[p])for(var C=0,H=m.length;H>C;C++){var V=m[C];if(-1!==s.indexOf(V)){var G=encodeURIComponent(V);G===V&&(G=escape(V)),s=s.split(V).join(G)}}var W=s.indexOf("#");-1!==W&&(this.hash=s.substr(W),s=s.slice(0,W));var Y=s.indexOf("?");if(-1!==Y?(this.search=s.substr(Y),this.query=s.substr(Y+1),t&&(this.query=T.parse(this.query)),s=s.slice(0,Y)):t&&(this.search="",this.query={}),s&&(this.pathname=s),w[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",q=this.search||"";this.path=U+q}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=!1,o="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(o=T.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||w[t])&&n!==!1?(n="//"+(n||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):n||(n=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),i=i.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+n+i+a+r},r.prototype.resolve=function(e){return this.resolveObject(n(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(h.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var i=new r,n=Object.keys(this),o=0;n.length>o;o++){var a=n[o];i[a]=this[a]}if(i.hash=e.hash,""===e.href)return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;s.length>l;l++){var c=s[l];"protocol"!==c&&(i[c]=e[c])}return w[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!w[e.protocol]){for(var d=Object.keys(e),u=0;d.length>u;u++){var f=d[u];i[f]=e[f]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||x[e.protocol])i.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),2>p.length&&p.unshift(""),i.pathname=p.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var m=i.pathname||"",g=i.search||"";i.path=m+g}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),A=y||v||i.host&&e.pathname,b=A,E=i.pathname&&i.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],T=i.protocol&&!w[i.protocol];if(T&&(i.hostname="",i.port=null,i.host&&(""===E[0]?E[0]=i.host:E.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),A=A&&(""===p[0]||""===E[0])),y)i.host=e.host||""===e.host?e.host:i.host,i.hostname=e.hostname||""===e.hostname?e.hostname:i.hostname,i.search=e.search,i.query=e.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),i.search=e.search,i.query=e.query;else if(!h.isNullOrUndefined(e.search)){if(T){i.hostname=i.host=E.shift();var _=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;_&&(i.auth=_.shift(),i.host=i.hostname=_.shift())}return i.search=e.search,i.query=e.query,h.isNull(i.pathname)&&h.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!E.length)return i.pathname=null,i.path=i.search?"/"+i.search:null,i.href=i.format(),i;for(var S=E.slice(-1)[0],C=(i.host||e.host||E.length>1)&&("."===S||".."===S)||""===S,R=0,k=E.length;k>=0;k--)S=E[k],"."===S?E.splice(k,1):".."===S?(E.splice(k,1),R++):R&&(E.splice(k,1),R--);if(!A&&!b)for(;R--;R)E.unshift("..");!A||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),C&&"/"!==E.join("/").substr(-1)&&E.push("");var M=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(T){i.hostname=i.host=M?"":E.length?E.shift():"";var _=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;_&&(i.auth=_.shift(),i.host=i.hostname=_.shift())}return A=A||i.host&&E.length,A&&!M&&E.unshift(""),E.length?i.pathname=E.join("/"):(i.pathname=null,i.path=null),h.isNull(i.pathname)&&h.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},r.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":44,punycode:39,querystring:42}],44:[function(e,t,i){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],45:[function(e,t,i){function r(e){var t=this,i=u.call(arguments,1);return new Promise(function(r,o){function a(t){var i;try{i=e.next(t)}catch(r){return o(r)}h(i)}function s(t){var i;
try{i=e["throw"](t)}catch(r){return o(r)}h(i)}function h(e){if(e.done)return r(e.value);var i=n.call(t,e.value);return i&&l(i)?i.then(a,s):s(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(e.value)+'"'))}return"function"==typeof e&&(e=e.apply(t,i)),e&&"function"==typeof e.next?void a():r(e)})}function n(e){return e?l(e)?e:c(e)||h(e)?r.call(this,e):"function"==typeof e?o.call(this,e):Array.isArray(e)?a.call(this,e):d(e)?s.call(this,e):e:e}function o(e){var t=this;return new Promise(function(i,r){e.call(t,function(e,t){return e?r(e):(arguments.length>2&&(t=u.call(arguments,1)),void i(t))})})}function a(e){return Promise.all(e.map(n,this))}function s(e){function t(e,t){i[t]=void 0,o.push(e.then(function(e){i[t]=e}))}for(var i=new e.constructor,r=Object.keys(e),o=[],a=0;r.length>a;a++){var s=r[a],h=n.call(this,e[s]);h&&l(h)?t(h,s):i[s]=e[s]}return Promise.all(o).then(function(){return i})}function l(e){return"function"==typeof e.then}function h(e){return"function"==typeof e.next&&"function"==typeof e["throw"]}function c(e){var t=e.constructor;return t?"GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName?!0:h(t.prototype):!1}function d(e){return Object==e.constructor}var u=Array.prototype.slice;t.exports=r["default"]=r.co=r,r.wrap=function(e){function t(){return r.call(this,e.apply(this,arguments))}return t.__generatorFunction__=e,t}},{}],46:[function(e,t,i){var r="undefined"!=typeof JSON?JSON:e("jsonify");t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var i=t.space||"";"number"==typeof i&&(i=Array(i+1).join(" "));var a="boolean"==typeof t.cycles?t.cycles:!1,s=t.replacer||function(e,t){return t},l=t.cmp&&function(e){return function(t){return function(i,r){var n={key:i,value:t[i]},o={key:r,value:t[r]};return e(n,o)}}}(t.cmp),h=[];return function c(e,t,d,u){var f=i?"\n"+new Array(u+1).join(i):"",p=i?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),d=s.call(e,t,d),void 0!==d){if("object"!=typeof d||null===d)return r.stringify(d);if(n(d)){for(var m=[],g=0;d.length>g;g++){var v=c(d,g,d[g],u+1)||r.stringify(null);m.push(f+i+v)}return"["+m.join(",")+f+"]"}if(-1!==h.indexOf(d)){if(a)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}h.push(d);for(var y=o(d).sort(l&&l(d)),m=[],g=0;y.length>g;g++){var t=y[g],A=c(d,t,d[t],u+1);if(A){var b=r.stringify(t)+p+A;m.push(f+i+b)}}return h.splice(h.indexOf(d),1),"{"+m.join(",")+f+"}"}}({"":e},"",e,0)};var n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(var r in e)t.call(e,r)&&i.push(r);return i}},{jsonify:47}],47:[function(e,t,i){i.parse=e("./lib/parse"),i.stringify=e("./lib/stringify")},{"./lib/parse":48,"./lib/stringify":49}],48:[function(e,t,i){var r,n,o,a,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"  "},l=function(e){throw{name:"SyntaxError",message:e,at:r,text:o}},h=function(e){return e&&e!==n&&l("Expected '"+e+"' instead of '"+n+"'"),n=o.charAt(r),r+=1,n},c=function(){var e,t="";for("-"===n&&(t="-",h("-"));n>="0"&&"9">=n;)t+=n,h();if("."===n)for(t+=".";h()&&n>="0"&&"9">=n;)t+=n;if("e"===n||"E"===n)for(t+=n,h(),"-"!==n&&"+"!==n||(t+=n,h());n>="0"&&"9">=n;)t+=n,h();return e=+t,isFinite(e)?e:void l("Bad number")},d=function(){var e,t,i,r="";if('"'===n)for(;h();){if('"'===n)return h(),r;if("\\"===n)if(h(),"u"===n){for(i=0,t=0;4>t&&(e=parseInt(h(),16),isFinite(e));t+=1)i=16*i+e;r+=String.fromCharCode(i)}else{if("string"!=typeof s[n])break;r+=s[n]}else r+=n}l("Bad string")},u=function(){for(;n&&" ">=n;)h()},f=function(){switch(n){case"t":return h("t"),h("r"),h("u"),h("e"),!0;case"f":return h("f"),h("a"),h("l"),h("s"),h("e"),!1;case"n":return h("n"),h("u"),h("l"),h("l"),null}l("Unexpected '"+n+"'")},p=function(){var e=[];if("["===n){if(h("["),u(),"]"===n)return h("]"),e;for(;n;){if(e.push(a()),u(),"]"===n)return h("]"),e;h(","),u()}}l("Bad array")},m=function(){var e,t={};if("{"===n){if(h("{"),u(),"}"===n)return h("}"),t;for(;n;){if(e=d(),u(),h(":"),Object.hasOwnProperty.call(t,e)&&l('Duplicate key "'+e+'"'),t[e]=a(),u(),"}"===n)return h("}"),t;h(","),u()}}l("Bad object")};a=function(){switch(u(),n){case"{":return m();case"[":return p();case'"':return d();case"-":return c();default:return n>="0"&&"9">=n?c():f()}},t.exports=function(e,t){var i;return o=e,r=0,n=" ",i=a(),u(),n&&l("Syntax error"),"function"==typeof t?function s(e,i){var r,n,o=e[i];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n=s(o,r),void 0!==n?o[r]=n:delete o[r]);return t.call(e,i,o)}({"":i},""):i}},{}],49:[function(e,t,i){function r(e){return l.lastIndex=0,l.test(e)?'"'+e.replace(l,function(e){var t=h[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function n(e,t){var i,l,h,c,d,u=o,f=t[e];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(e)),"function"==typeof s&&(f=s.call(t,e,f)),typeof f){case"string":return r(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(o+=a,d=[],"[object Array]"===Object.prototype.toString.apply(f)){for(c=f.length,i=0;c>i;i+=1)d[i]=n(i,f)||"null";return h=0===d.length?"[]":o?"[\n"+o+d.join(",\n"+o)+"\n"+u+"]":"["+d.join(",")+"]",o=u,h}if(s&&"object"==typeof s)for(c=s.length,i=0;c>i;i+=1)l=s[i],"string"==typeof l&&(h=n(l,f),h&&d.push(r(l)+(o?": ":":")+h));else for(l in f)Object.prototype.hasOwnProperty.call(f,l)&&(h=n(l,f),h&&d.push(r(l)+(o?": ":":")+h));return h=0===d.length?"{}":o?"{\n"+o+d.join(",\n"+o)+"\n"+u+"}":"{"+d.join(",")+"}",o=u,h}}var o,a,s,l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h={"\b":"\\b","    ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};t.exports=function(e,t,i){var r;if(o="",a="","number"==typeof i)for(r=0;i>r;r+=1)a+=" ";else"string"==typeof i&&(a=i);if(s=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return n("",{"":e})}},{}],ajv:[function(e,t,i){"use strict";function r(e){return v.test(e)}function n(t){function i(e,t){var i;if("string"==typeof e){if(i=T(e),!i)throw new Error('no schema with key or ref "'+e+'"')}else{var r=R(e);i=r.validate||k(r)}var n=i(t);return i.$async===!0?"*"==B._opts.async?m(n):n:(B.errors=i.errors,n)}function A(e){var t=R(e);return t.validate||k(t)}function b(e,t,i,r){if(Array.isArray(e))for(var n=0;e.length>n;n++)b(e[n],void 0,i,r);else{t=a.normalizeId(t||e.id),L(t);var o=B._schemas[t]=R(e,i,!0);o.meta=r}}function E(e,t,i){b(e,t,i,!0)}function x(e,t){var n=e.$schema||B._opts.defaultMeta||w(),o=B._formats.uri;B._formats.uri="function"==typeof o?r:v;var a=i(n,e);if(B._formats.uri=o,!a&&t){var s="schema is invalid:"+M();if("log"!=B._opts.validateSchema)throw new Error(s);console.error(s)}return a}function w(){var e=B._opts.meta;return B._opts.defaultMeta="object"==typeof e?e.id||e:B._opts.v5?u.META_SCHEMA_ID:g}function T(e){var t=_(e);switch(typeof t){case"object":return t.validate||k(t);case"string":return T(t)}}function _(e){return e=a.normalizeId(e),B._schemas[e]||B._refs[e]}function S(e){if(e instanceof RegExp)return C(B._schemas,e),void C(B._refs,e);switch(typeof e){case"undefined":return C(B._schemas),C(B._refs),void B._cache.clear();case"string":var t=_(e);return t&&B._cache.del(t.jsonStr),delete B._schemas[e],void delete B._refs[e];case"object":var i=h(e);B._cache.del(i);var r=e.id;r&&(r=a.normalizeId(r),delete B._schemas[r],delete B._refs[r])}}function C(e,t){for(var i in e){var r=e[i];r.meta||t&&!t.test(i)||(B._cache.del(r.jsonStr),delete e[i])}}function R(e,t,i){if("object"!=typeof e)throw new Error("schema should be object");var r=h(e),n=B._cache.get(r);if(n)return n;i=i||B._opts.addUsedSchema!==!1;var o=a.normalizeId(e.id);o&&i&&L(o),B._opts.validateSchema===!1||t||x(e,!0);var s=a.ids.call(B,e),c=new l({id:o,schema:e,localRefs:s,jsonStr:r});return"#"!=o[0]&&i&&(B._refs[o]=c),B._cache.put(r,c),c}function k(e,t){function i(){var t=e.validate,r=t.apply(null,arguments);return i.errors=t.errors,r}if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t?t:i,e.schema.$async===!0&&(i.$async=!0),i;e.compiling=!0;var r;e.meta&&(r=B._opts,B._opts=B._metaOpts);var n;try{n=o.call(B,e.schema,t,e.localRefs)}finally{e.compiling=!1,e.meta&&(B._opts=r)}return e.validate=n,e.refs=n.refs,e.refVal=n.refVal,e.root=n.root,n}function M(e,t){if(e=e||B.errors,!e)return"No errors";t=t||{};for(var i=void 0===t.separator?", ":t.separator,r=void 0===t.dataVar?"data":t.dataVar,n="",o=0;e.length>o;o++){var a=e[o];a&&(n+=r+a.dataPath+" "+a.message+i)}return n.slice(0,-i.length)}function P(e,t){"string"==typeof t&&(t=new RegExp(t)),B._formats[e]=t}function D(){if(B._opts.meta!==!1){var t=e("./refs/json-schema-draft-04.json");E(t,g,!0),B._refs["http://json-schema.org/schema"]=g}}function H(){var e=B._opts.schemas;if(e)if(Array.isArray(e))b(e);else for(var t in e)b(e[t],t)}function O(){for(var e in B._opts.formats){var t=B._opts.formats[e];P(e,t)}}function L(e){if(B._schemas[e]||B._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function I(){for(var e=f.copy(B._opts),t=0;y.length>t;t++)delete e[y[t]];return e}if(!(this instanceof n))return new n(t);var B=this;t=this._opts=f.copy(t)||{},this._schemas={},this._refs={},this._formats=c(t.format),this._cache=t.cache||new s,this._loadingSchemas={},this.RULES=d(),this.validate=i,this.compile=A,this.addSchema=b,this.addMetaSchema=E,this.validateSchema=x,this.getSchema=T,this.removeSchema=S,this.addFormat=P,this.errorsText=M,this._addSchema=R,this._compile=k,t.loopRequired=t.loopRequired||1/0,(t.async||t.transpile)&&p.setup(t),t.beautify===!0&&(t.beautify={indent_size:2}),"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),this._metaOpts=I(),t.formats&&O(),D(),t.v5&&u.enable(this),"object"==typeof t.meta&&E(t.meta),H()}var o=e("./compile"),a=e("./compile/resolve"),s=e("./cache"),l=e("./compile/schema_obj"),h=e("json-stable-stringify"),c=e("./compile/formats"),d=e("./compile/rules"),u=e("./v5"),f=e("./compile/util"),p=e("./async"),m=e("co");t.exports=n,n.prototype.compileAsync=p.compile,n.prototype.addKeyword=e("./keyword"),n.ValidationError=e("./compile/validation_error");var g="http://json-schema.org/draft-04/schema",v=/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,y=["removeAdditional","useDefaults","coerceTypes"]},{"./async":1,"./cache":2,"./compile":6,"./compile/formats":5,"./compile/resolve":7,"./compile/rules":8,"./compile/schema_obj":9,"./compile/util":10,"./compile/validation_error":11,"./keyword":35,"./refs/json-schema-draft-04.json":36,"./v5":38,co:45,"json-stable-stringify":46}]},{},[])("ajv")}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,r=this;e(this).one("bsTransitionEnd",function(){i=!0});var n=function(){i||e(r).trigger(e.support.transition.end)};return setTimeout(n,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),n=i.data("bs.alert");n||i.data("bs.alert",n=new r(this)),"string"==typeof t&&n[t].call(i)})}var i='[data-dismiss="alert"]',r=function(t){e(t).on("click",i,this.close)};r.VERSION="3.3.5",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function i(){a.detach().trigger("closed.bs.alert").remove()}var n=e(this),o=n.attr("data-target");o||(o=n.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=e(o);t&&t.preventDefault(),a.length||(a=n.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(r.TRANSITION_DURATION):i())};var n=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.bs.alert.data-api",i,r.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),n=r.data("bs.button"),o="object"==typeof t&&t;n||r.data("bs.button",n=new i(this,o)),"toggle"==t?n.toggle():t&&n.setState(t)})}var i=function(t,r){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,r),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",r=this.$element,n=r.is("input")?"val":"html",o=r.data();t+="Text",null==o.resetText&&r.data("resetText",r[n]()),setTimeout(e.proxy(function(){r[n](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,r.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var r=e(i.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),e(i.target).is('input[type="radio"]')||e(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),n=r.data("bs.carousel"),o=e.extend({},i.DEFAULTS,r.data(),"object"==typeof t&&t),a="string"==typeof t?t:o.slide;n||r.data("bs.carousel",n=new i(this,o)),"number"==typeof t?n.to(t):a?n[a]():o.interval&&n.pause().cycle()})}var i=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t),r="prev"==e&&0===i||"next"==e&&i==this.$items.length-1;if(r&&!this.options.wrap)return t;var n="prev"==e?-1:1,o=(i+n)%this.$items.length;return this.$items.eq(o)},i.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",this.$items.eq(e))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(t,r){var n=this.$element.find(".item.active"),o=r||this.getItemForDirection(t,n),a=this.interval,s="next"==t?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var h=o[0],c=e.Event("slide.bs.carousel",{relatedTarget:h,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(o)]);d&&d.addClass("active")}var u=e.Event("slid.bs.carousel",{relatedTarget:h,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,n.addClass(s),o.addClass(s),n.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),n.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(u)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(n.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(u)),a&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var n=function(i){var r,n=e(this),o=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=e.extend({},o.data(),n.data()),s=n.attr("data-slide-to");s&&(a.interval=!1),t.call(o,a),s&&o.data("bs.carousel").to(s),i.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",n).on("click.bs.carousel.data-api","[data-slide-to]",n),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var i=e(this);t.call(i,i.data())})})}(jQuery),+function(e){"use strict";function t(t){var i,r=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function i(t){return this.each(function(){var i=e(this),n=i.data("bs.collapse"),o=e.extend({},r.DEFAULTS,i.data(),"object"==typeof t&&t);!n&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),n||i.data("bs.collapse",n=new r(this,o)),"string"==typeof t&&n[t]()})}var r=function(t,i){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,i),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.5",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,n=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(n&&n.length&&(t=n.data("bs.collapse"),t&&t.transitioning))){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){n&&n.length&&(i.call(n,"hide"),t||n.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[a](this.$element[0][l])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(n,this)).emulateTransitionEnd(r.TRANSITION_DURATION):n.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(i,r){var n=e(r);this.addAriaAndCollapsedClass(t(n),n)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var n=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var n=e(this);n.attr("data-target")||r.preventDefault();var o=t(n),a=o.data("bs.collapse"),s=a?"toggle":n.data();i.call(o,s)})}(jQuery),+function(e){"use strict";function t(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var r=i&&e(i);return r&&r.length?r:t.parent()}function i(i){i&&3===i.which||(e(n).remove(),e(o).each(function(){var r=e(this),n=t(r),o={relatedTarget:this};n.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&e.contains(n[0],i.target)||(n.trigger(i=e.Event("hide.bs.dropdown",o)),i.isDefaultPrevented()||(r.attr("aria-expanded","false"),n.removeClass("open").trigger("hidden.bs.dropdown",o))))}))}function r(t){return this.each(function(){var i=e(this),r=i.data("bs.dropdown");r||i.data("bs.dropdown",r=new a(this)),"string"==typeof t&&r[t].call(i)})}var n=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.5",a.prototype.toggle=function(r){var n=e(this);if(!n.is(".disabled, :disabled")){var o=t(n),a=o.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",i);var s={relatedTarget:this};if(o.trigger(r=e.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var r=e(this);if(i.preventDefault(),i.stopPropagation(),!r.is(".disabled, :disabled")){var n=t(r),a=n.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&n.find(o).trigger("focus"),r.trigger("click");var s=" li:not(.disabled):visible a",l=n.find(".dropdown-menu"+s);if(l.length){var h=l.index(i.target);38==i.which&&h>0&&h--,40==i.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,r){return this.each(function(){var n=e(this),o=n.data("bs.modal"),a=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);o||n.data("bs.modal",o=new i(this,a)),"string"==typeof t?o[t](r):a.show&&o.show(r)})}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var r=this,n=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var n=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),n&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});n?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var r=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&n;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var r=e(this),n=r.attr("href"),o=e(r.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},o.data(),r.data());r.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(o,a,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),n=r.data("bs.tooltip"),o="object"==typeof t&&t;(n||!/destroy|hide/.test(t))&&(n||r.data("bs.tooltip",n=new i(this,o)),"string"==typeof t&&n[t]())})}var i=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(t,i,r){if(this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),o=n.length;o--;){var a=n[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),
this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},i.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,r){i[e]!=r&&(t[e]=r)}),t},i.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},i.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var n=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,h=l.test(s);h&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),d=o[0].offsetWidth,u=o[0].offsetHeight;if(h){var f=s,p=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+u>p.bottom?"top":"top"==s&&c.top-u<p.top?"bottom":"right"==s&&c.right+d>p.width?"left":"left"==s&&c.left-d<p.left?"right":s,o.removeClass(f).addClass(s)}var m=this.getCalculatedOffset(s,c,d,u);this.applyPlacement(m,s);var g=function(){var e=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==e&&n.leave(n)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(i.TRANSITION_DURATION):g()}},i.prototype.applyPlacement=function(t,i){var r=this.tip(),n=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var l=r[0].offsetWidth,h=r[0].offsetHeight;"top"==i&&h!=o&&(t.top=t.top+o-h);var c=this.getViewportAdjustedDelta(i,t,l,h);c.left?t.left+=c.left:t.top+=c.top;var d=/top|bottom/.test(i),u=d?2*c.left-n+l:2*c.top-o+h,f=d?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(u,r[0][f],d)},i.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},i.prototype.hide=function(t){function r(){"in"!=n.hoverState&&o.detach(),n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),t&&t()}var n=this,o=e(this.$tip),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(i.TRANSITION_DURATION):r(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(t){t=t||this.$element;var i=t[0],r="BODY"==i.tagName,n=i.getBoundingClientRect();null==n.width&&(n=e.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var o=r?{top:0,left:0}:t.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},n,a,s,o)},i.prototype.getCalculatedOffset=function(e,t,i,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},i.prototype.getViewportAdjustedDelta=function(e,t,i,r){var n={top:0,left:0};if(!this.$viewport)return n;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,l=t.top+o-a.scroll+r;s<a.top?n.top=a.top-s:l>a.top+a.height&&(n.top=a.top+a.height-l)}else{var h=t.left-o,c=t.left+o+i;h<a.left?n.left=a.left-h:c>a.right&&(n.left=a.left+a.width-c)}return n},i.prototype.getTitle=function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},i.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(t){var i=this;t&&(i=e(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=i,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),n=r.data("bs.popover"),o="object"==typeof t&&t;(n||!/destroy|hide/.test(t))&&(n||r.data("bs.popover",n=new i(this,o)),"string"==typeof t&&n[t]())})}var i=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=i,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(i,r){this.$body=e(document.body),this.$scrollElement=e(e(i).is(document.body)?window:i),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var r=e(this),n=r.data("bs.scrollspy"),o="object"==typeof i&&i;n||r.data("bs.scrollspy",n=new t(this,o)),"string"==typeof i&&n[i]()})}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,i="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(i="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),o=/^#./.test(n)&&e(n);return o&&o.length&&o.is(":visible")&&[[o[i]().top+r,n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),r=this.options.offset+i-this.$scrollElement.height(),n=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=r)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<n[0])return this.activeTarget=null,this.clear();for(e=n.length;e--;)a!=o[e]&&t>=n[e]&&(void 0===n[e+1]||t<n[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(i).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),n=r.data("bs.tab");n||r.data("bs.tab",n=new i(this)),"string"==typeof t&&n[t]()})}var i=function(t){this.element=e(t)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var n=i.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),i),this.activate(s,s.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},i.prototype.activate=function(t,r,n){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}var a=r.find("> .active"),s=n&&e.support.transition&&(a.length&&a.hasClass("fade")||!!r.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),a.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var n=function(i){i.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),n=r.data("bs.affix"),o="object"==typeof t&&t;n||r.data("bs.affix",n=new i(this,o)),"string"==typeof t&&n[t]()})}var i=function(t,r){this.options=e.extend({},i.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(e,t,i,r){var n=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return i>n?"top":!1;if("bottom"==this.affixed)return null!=i?n+this.unpin<=o.top?!1:"bottom":e-r>=n+a?!1:"bottom";var s=null==this.affixed,l=s?n:o.top,h=s?a:t;return null!=i&&i>=n?"top":null!=r&&l+h>=e-r?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,n=r.top,o=r.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(o=n=r),"function"==typeof n&&(n=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,t,n,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),h=e.Event(l+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-t-o})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var i=e(this),r=i.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(i,r)})})}(jQuery),function(){"use strict";var e=this,t=e.Chart,i=function(e){this.canvas=e.canvas,this.ctx=e;var t=function(e,t){return e["offset"+t]?e["offset"+t]:document.defaultView.getComputedStyle(e).getPropertyValue(t)},i=this.width=t(e.canvas,"Width")||e.canvas.width,n=this.height=t(e.canvas,"Height")||e.canvas.height;return i=this.width=e.canvas.width,n=this.height=e.canvas.height,this.aspectRatio=this.width/this.height,r.retinaScale(this),this};i.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipTitleTemplate:"<%= label%>",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= datasetLabel %>: <%= value %>",multiTooltipKeyBackground:"#fff",segmentColorDefault:["#A6CEE3","#1F78B4","#B2DF8A","#33A02C","#FB9A99","#E31A1C","#FDBF6F","#FF7F00","#CAB2D6","#6A3D9A","#B4B482","#B15928"],segmentHighlightColorDefaults:["#CEF6FF","#47A0DC","#DAFFB2","#5BC854","#FFC2C1","#FF4244","#FFE797","#FFA728","#F2DAFE","#9265C2","#DCDCAA","#D98150"],onAnimationProgress:function(){},onAnimationComplete:function(){}}},i.types={};var r=i.helpers={},n=r.each=function(e,t,i){var r=Array.prototype.slice.call(arguments,3);if(e)if(e.length===+e.length){var n;for(n=0;n<e.length;n++)t.apply(i,[e[n],n].concat(r))}else for(var o in e)t.apply(i,[e[o],o].concat(r))},o=r.clone=function(e){var t={};return n(e,function(i,r){e.hasOwnProperty(r)&&(t[r]=i)}),t},a=r.extend=function(e){return n(Array.prototype.slice.call(arguments,1),function(t){n(t,function(i,r){t.hasOwnProperty(r)&&(e[r]=i)})}),e},s=r.merge=function(e,t){var i=Array.prototype.slice.call(arguments,0);return i.unshift({}),a.apply(null,i)},l=r.indexOf=function(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},h=(r.where=function(e,t){var i=[];return r.each(e,function(e){t(e)&&i.push(e)}),i},r.findNextWhere=function(e,t,i){i||(i=-1);for(var r=i+1;r<e.length;r++){var n=e[r];if(t(n))return n}},r.findPreviousWhere=function(e,t,i){i||(i=e.length);for(var r=i-1;r>=0;r--){var n=e[r];if(t(n))return n}},r.inherits=function(e){var t=this,i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},r=function(){this.constructor=i};return r.prototype=t.prototype,i.prototype=new r,i.extend=h,e&&a(i.prototype,e),i.__super__=t.prototype,i}),c=r.noop=function(){},d=r.uid=function(){var e=0;return function(){return"chart-"+e++}}(),u=r.warn=function(e){window.console&&"function"==typeof window.console.warn&&console.warn(e)},f=r.amd="function"==typeof define&&define.amd,p=r.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},m=r.max=function(e){return Math.max.apply(Math,e)},g=r.min=function(e){return Math.min.apply(Math,e)},v=(r.cap=function(e,t,i){if(p(t)){if(e>t)return t}else if(p(i)&&i>e)return i;return e},r.getDecimalPlaces=function(e){if(e%1!==0&&p(e)){var t=e.toString();if(t.indexOf("e-")<0)return t.split(".")[1].length;if(t.indexOf(".")<0)return parseInt(t.split("e-")[1]);var i=t.split(".")[1].split("e-");return i[0].length+parseInt(i[1])}return 0}),y=r.radians=function(e){return e*(Math.PI/180)},A=(r.getAngleFromPoint=function(e,t){var i=t.x-e.x,r=t.y-e.y,n=Math.sqrt(i*i+r*r),o=2*Math.PI+Math.atan2(r,i);return 0>i&&0>r&&(o+=2*Math.PI),{angle:o,distance:n}},r.aliasPixel=function(e){return e%2===0?0:.5}),b=(r.splineCurve=function(e,t,i,r){var n=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),a=r*n/(n+o),s=r*o/(n+o);return{inner:{x:t.x-a*(i.x-e.x),y:t.y-a*(i.y-e.y)},outer:{x:t.x+s*(i.x-e.x),y:t.y+s*(i.y-e.y)}}},r.calculateOrderOfMagnitude=function(e){return Math.floor(Math.log(e)/Math.LN10)}),E=(r.calculateScaleRange=function(e,t,i,r,o){var a=2,s=Math.floor(t/(1.5*i)),l=a>=s,h=[];n(e,function(e){null==e||h.push(e)});var c=g(h),d=m(h);d===c&&(d+=.5,c>=.5&&!r?c-=.5:d+=.5);for(var u=Math.abs(d-c),f=b(u),p=Math.ceil(d/(1*Math.pow(10,f)))*Math.pow(10,f),v=r?0:Math.floor(c/(1*Math.pow(10,f)))*Math.pow(10,f),y=p-v,A=Math.pow(10,f),E=Math.round(y/A);(E>s||s>2*E)&&!l;)if(E>s)A*=2,E=Math.round(y/A),E%1!==0&&(l=!0);else if(o&&f>=0){if(A/2%1!==0)break;A/=2,E=Math.round(y/A)}else A/=2,E=Math.round(y/A);return l&&(E=a,A=y/E),{steps:E,stepValue:A,min:v,max:v+E*A}},r.template=function(e,t){function i(e,t){var i=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):r[e]=r[e];return t?i(t):i}if(e instanceof Function)return e(t);var r={};return i(e,t)}),x=(r.generateLabels=function(e,t,i,r){var o=new Array(t);return e&&n(o,function(t,n){o[n]=E(e,{value:i+r*(n+1)})}),o},r.easingEffects={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0===e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1===e?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,i=0,r=1;return 0===e?0:1==(e/=1)?1:(i||(i=.3),r<Math.abs(1)?(r=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/r),-(r*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/i)))},easeOutElastic:function(e){var t=1.70158,i=0,r=1;return 0===e?0:1==(e/=1)?1:(i||(i=.3),r<Math.abs(1)?(r=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin((1*e-t)*(2*Math.PI)/i)+1)},easeInOutElastic:function(e){var t=1.70158,i=0,r=1;return 0===e?0:2==(e/=.5)?1:(i||(i=1*(.3*1.5)),r<Math.abs(1)?(r=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/r),1>e?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/i)):r*Math.pow(2,-10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/i)*.5+1)},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-x.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?1*(7.5625*e*e):2/2.75>e?1*(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return.5>e?.5*x.easeInBounce(2*e):.5*x.easeOutBounce(2*e-1)+.5}}),w=r.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),T=(r.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return window.clearTimeout(e,1e3/60)}}(),r.animationLoop=function(e,t,i,r,n,o){var a=0,s=x[i]||x.linear,l=function(){a++;var i=a/t,h=s(i);e.call(o,h,i,a),r.call(o,h,i),t>a?o.animationFrame=w(l):n.apply(o)};w(l)},r.getRelativePosition=function(e){var t,i,r=e.originalEvent||e,n=e.currentTarget||e.srcElement,o=n.getBoundingClientRect();return r.touches?(t=r.touches[0].clientX-o.left,i=r.touches[0].clientY-o.top):(t=r.clientX-o.left,i=r.clientY-o.top),{x:t,y:i}},r.addEvent=function(e,t,i){e.addEventListener?e.addEventListener(t,i):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i}),_=r.removeEvent=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]=c},S=(r.bindEvents=function(e,t,i){e.events||(e.events={}),n(t,function(t){e.events[t]=function(){i.apply(e,arguments)},T(e.chart.canvas,t,e.events[t])})},r.unbindEvents=function(e,t){n(t,function(t,i){_(e.chart.canvas,i,t)})}),C=r.getMaximumWidth=function(e){var t=e.parentNode,i=parseInt(k(t,"padding-left"))+parseInt(k(t,"padding-right"));return t?t.clientWidth-i:0},R=r.getMaximumHeight=function(e){var t=e.parentNode,i=parseInt(k(t,"padding-bottom"))+parseInt(k(t,"padding-top"));return t?t.clientHeight-i:0},k=r.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},M=(r.getMaximumSize=r.getMaximumWidth,r.retinaScale=function(e){var t=e.ctx,i=e.canvas.width,r=e.canvas.height;window.devicePixelRatio&&(t.canvas.style.width=i+"px",t.canvas.style.height=r+"px",t.canvas.height=r*window.devicePixelRatio,t.canvas.width=i*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio))}),P=r.clear=function(e){e.ctx.clearRect(0,0,e.width,e.height)},D=r.fontString=function(e,t,i){return t+" "+e+"px "+i},H=r.longestText=function(e,t,i){e.font=t;var r=0;return n(i,function(t){var i=e.measureText(t).width;r=i>r?i:r}),r},O=r.drawRoundedRectangle=function(e,t,i,r,n,o){e.beginPath(),e.moveTo(t+o,i),e.lineTo(t+r-o,i),e.quadraticCurveTo(t+r,i,t+r,i+o),e.lineTo(t+r,i+n-o),e.quadraticCurveTo(t+r,i+n,t+r-o,i+n),e.lineTo(t+o,i+n),e.quadraticCurveTo(t,i+n,t,i+n-o),e.lineTo(t,i+o),e.quadraticCurveTo(t,i,t+o,i),e.closePath()};i.instances={},i.Type=function(e,t,r){this.options=t,this.chart=r,this.id=d(),i.instances[this.id]=this,t.responsive&&this.resize(),this.initialize.call(this,e)},a(i.Type.prototype,{initialize:function(){return this},clear:function(){return P(this.chart),this},stop:function(){return i.animationService.cancelAnimation(this),this},resize:function(e){this.stop();var t=this.chart.canvas,i=C(this.chart.canvas),r=this.options.maintainAspectRatio?i/this.chart.aspectRatio:R(this.chart.canvas);return t.width=this.chart.width=i,t.height=this.chart.height=r,M(this.chart),"function"==typeof e&&e.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:c,render:function(e){if(e&&this.reflow(),this.options.animation&&!e){var t=new i.Animation;t.numSteps=this.options.animationSteps,t.easing=this.options.animationEasing,t.render=function(e,t){var i=r.easingEffects[t.easing],n=t.currentStep/t.numSteps,o=i(n);e.draw(o,n,t.currentStep)},t.onAnimationProgress=this.options.onAnimationProgress,t.onAnimationComplete=this.options.onAnimationComplete,i.animationService.addAnimation(this,t)}else this.draw(),this.options.onAnimationComplete.call(this);return this},generateLegend:function(){return E(this.options.legendTemplate,this)},destroy:function(){this.clear(),S(this,this.events);var e=this.chart.canvas;e.width=this.chart.width,e.height=this.chart.height,e.style.removeProperty?(e.style.removeProperty("width"),e.style.removeProperty("height")):(e.style.removeAttribute("width"),e.style.removeAttribute("height")),delete i.instances[this.id]},showTooltip:function(e,t){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var o=function(e){var t=!1;return e.length!==this.activeElements.length?t=!0:(n(e,function(e,i){e!==this.activeElements[i]&&(t=!0)},this),t)}.call(this,e);if(o||t){if(this.activeElements=e,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),e.length>0)if(this.datasets&&this.datasets.length>1){for(var a,s,h=this.datasets.length-1;h>=0&&(a=this.datasets[h].points||this.datasets[h].bars||this.datasets[h].segments,s=l(a,e[0]),-1===s);h--);var c=[],d=[],u=function(e){var t,i,n,o,a,l=[],h=[],u=[];return r.each(this.datasets,function(e){t=e.points||e.bars||e.segments,t[s]&&t[s].hasValue()&&l.push(t[s])}),r.each(l,function(e){h.push(e.x),u.push(e.y),c.push(r.template(this.options.multiTooltipTemplate,e)),d.push({fill:e._saved.fillColor||e.fillColor,stroke:e._saved.strokeColor||e.strokeColor})},this),a=g(u),n=m(u),o=g(h),i=m(h),{x:o>this.chart.width/2?o:i,y:(a+n)/2}}.call(this,s);new i.MultiTooltip({x:u.x,y:u.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:c,legendColors:d,legendColorBackground:this.options.multiTooltipKeyBackground,title:E(this.options.tooltipTitleTemplate,e[0]),chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else n(e,function(e){var t=e.tooltipPosition();new i.Tooltip({x:Math.round(t.x),y:Math.round(t.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:E(this.options.tooltipTemplate,e),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),i.Type.extend=function(e){var t=this,r=function(){return t.apply(this,arguments)};if(r.prototype=o(t.prototype),a(r.prototype,e),r.extend=i.Type.extend,e.name||t.prototype.name){var n=e.name||t.prototype.name,l=i.defaults[t.prototype.name]?o(i.defaults[t.prototype.name]):{};i.defaults[n]=a(l,e.defaults),i.types[n]=r,i.prototype[n]=function(e,t){var o=s(i.defaults.global,i.defaults[n],t||{});return new r(e,o,this)}}else u("Name not provided for this chart, so it hasn't been registered");return t},i.Element=function(e){a(this,e),this.initialize.apply(this,arguments),this.save()},a(i.Element.prototype,{initialize:function(){},restore:function(e){return e?n(e,function(e){this[e]=this._saved[e]},this):a(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(e){return n(e,function(e,t){this._saved[t]=this[t],this[t]=e},this),this},transition:function(e,t){return n(e,function(e,i){this[i]=(e-this._saved[i])*t+this._saved[i]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return p(this.value)}}),i.Element.extend=h,i.Point=i.Element.extend({display:!0,inRange:function(e,t){var i=this.hitDetectionRadius+this.radius;return Math.pow(e-this.x,2)+Math.pow(t-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),
e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.stroke()}}}),i.Arc=i.Element.extend({inRange:function(e,t){var i=r.getAngleFromPoint(this,{x:e,y:t}),n=i.angle%(2*Math.PI),o=(2*Math.PI+this.startAngle)%(2*Math.PI),a=(2*Math.PI+this.endAngle)%(2*Math.PI)||360,s=o>a?a>=n||n>=o:n>=o&&a>=n,l=i.distance>=this.innerRadius&&i.distance<=this.outerRadius;return s&&l},tooltipPosition:function(){var e=this.startAngle+(this.endAngle-this.startAngle)/2,t=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(e)*t,y:this.y+Math.sin(e)*t}},draw:function(e){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.outerRadius<0?0:this.outerRadius,this.startAngle,this.endAngle),t.arc(this.x,this.y,this.innerRadius<0?0:this.innerRadius,this.endAngle,this.startAngle,!0),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.lineJoin="bevel",this.showStroke&&t.stroke()}}),i.Rectangle=i.Element.extend({draw:function(){var e=this.ctx,t=this.width/2,i=this.x-t,r=this.x+t,n=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(i+=o,r-=o,n+=o),e.beginPath(),e.fillStyle=this.fillColor,e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.moveTo(i,this.base),e.lineTo(i,n),e.lineTo(r,n),e.lineTo(r,this.base),e.fill(),this.showStroke&&e.stroke()},height:function(){return this.base-this.y},inRange:function(e,t){return e>=this.x-this.width/2&&e<=this.x+this.width/2&&t>=this.y&&t<=this.base}}),i.Animation=i.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),i.Tooltip=i.Element.extend({draw:function(){var e=this.chart.ctx;e.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var t=this.caretPadding=2,i=e.measureText(this.text).width+2*this.xPadding,r=this.fontSize+2*this.yPadding,n=r+this.caretHeight+t;this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right"),this.y-n<0&&(this.yAlign="below");var o=this.x-i/2,a=this.y-n;if(e.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":e.beginPath(),e.moveTo(this.x,this.y-t),e.lineTo(this.x+this.caretHeight,this.y-(t+this.caretHeight)),e.lineTo(this.x-this.caretHeight,this.y-(t+this.caretHeight)),e.closePath(),e.fill();break;case"below":a=this.y+t+this.caretHeight,e.beginPath(),e.moveTo(this.x,this.y+t),e.lineTo(this.x+this.caretHeight,this.y+t+this.caretHeight),e.lineTo(this.x-this.caretHeight,this.y+t+this.caretHeight),e.closePath(),e.fill()}switch(this.xAlign){case"left":o=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}O(e,o,a,i,r,this.cornerRadius),e.fill(),e.fillStyle=this.textColor,e.textAlign="center",e.textBaseline="middle",e.fillText(this.text,o+i/2,a+r/2)}}}),i.MultiTooltip=i.Element.extend({initialize:function(){this.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=D(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.titleHeight=this.title?1.5*this.titleFontSize:0,this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+this.titleHeight,this.ctx.font=this.titleFont;var e=this.ctx.measureText(this.title).width,t=H(this.ctx,this.font,this.labels)+this.fontSize+3,i=m([t,e]);this.width=i+2*this.xPadding;var r=this.height/2;this.y-r<0?this.y=r:this.y+r>this.chart.height&&(this.y=this.chart.height-r),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(e){var t=this.y-this.height/2+this.yPadding,i=e-1;return 0===e?t+this.titleHeight/3:t+(1.5*this.fontSize*i+this.fontSize/2)+this.titleHeight},draw:function(){if(this.custom)this.custom(this);else{O(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var e=this.ctx;e.fillStyle=this.fillColor,e.fill(),e.closePath(),e.textAlign="left",e.textBaseline="middle",e.fillStyle=this.titleTextColor,e.font=this.titleFont,e.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),e.font=this.font,r.each(this.labels,function(t,i){e.fillStyle=this.textColor,e.fillText(t,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(i+1)),e.fillStyle=this.legendColorBackground,e.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize),e.fillStyle=this.legendColors[i].fill,e.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),i.Scale=i.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var e=v(this.stepValue),t=0;t<=this.steps;t++)this.yLabels.push(E(this.templateString,{value:(this.min+t*this.stepValue).toFixed(e)}));this.yLabelWidth=this.display&&this.showLabels?H(this.ctx,this.font,this.yLabels)+10:0},addXLabel:function(e){this.xLabels.push(e),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var e,t=this.endPoint,i=this.endPoint-this.startPoint;for(this.calculateYRange(i),this.buildYLabels(),this.calculateXLabelRotation();i>this.endPoint-this.startPoint;)i=this.endPoint-this.startPoint,e=this.yLabelWidth,this.calculateYRange(i),this.buildYLabels(),e<this.yLabelWidth&&(this.endPoint=t,this.calculateXLabelRotation())},calculateXLabelRotation:function(){this.ctx.font=this.font;var e,t,i=this.ctx.measureText(this.xLabels[0]).width,r=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=r/2+3,this.xScalePaddingLeft=i/2>this.yLabelWidth?i/2:this.yLabelWidth,this.xLabelRotation=0,this.display){var n,o=H(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var a=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>a&&0===this.xLabelRotation||this.xLabelWidth>a&&this.xLabelRotation<=90&&this.xLabelRotation>0;)n=Math.cos(y(this.xLabelRotation)),e=n*i,t=n*r,e+this.fontSize/2>this.yLabelWidth&&(this.xScalePaddingLeft=e+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=n*o;this.xLabelRotation>0&&(this.endPoint-=Math.sin(y(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:c,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(e){var t=this.drawingArea()/(this.min-this.max);return this.endPoint-t*(e-this.min)},calculateX:function(e){var t=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),i=t/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),r=i*e+this.xScalePaddingLeft;return this.offsetGridLines&&(r+=i/2),Math.round(r)},update:function(e){r.extend(this,e),this.fit()},draw:function(){var e=this.ctx,t=(this.endPoint-this.startPoint)/this.steps,i=Math.round(this.xScalePaddingLeft);this.display&&(e.fillStyle=this.textColor,e.font=this.font,n(this.yLabels,function(n,o){var a=this.endPoint-t*o,s=Math.round(a),l=this.showHorizontalLines;e.textAlign="right",e.textBaseline="middle",this.showLabels&&e.fillText(n,i-10,a),0!==o||l||(l=!0),l&&e.beginPath(),o>0?(e.lineWidth=this.gridLineWidth,e.strokeStyle=this.gridLineColor):(e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor),s+=r.aliasPixel(e.lineWidth),l&&(e.moveTo(i,s),e.lineTo(this.width,s),e.stroke(),e.closePath()),e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor,e.beginPath(),e.moveTo(i-5,s),e.lineTo(i,s),e.stroke(),e.closePath()},this),n(this.xLabels,function(t,i){var r=this.calculateX(i)+A(this.lineWidth),n=this.calculateX(i-(this.offsetGridLines?.5:0))+A(this.lineWidth),o=this.xLabelRotation>0,a=this.showVerticalLines;0!==i||a||(a=!0),a&&e.beginPath(),i>0?(e.lineWidth=this.gridLineWidth,e.strokeStyle=this.gridLineColor):(e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor),a&&(e.moveTo(n,this.endPoint),e.lineTo(n,this.startPoint-3),e.stroke(),e.closePath()),e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor,e.beginPath(),e.moveTo(n,this.endPoint),e.lineTo(n,this.endPoint+5),e.stroke(),e.closePath(),e.save(),e.translate(r,o?this.endPoint+12:this.endPoint+8),e.rotate(-1*y(this.xLabelRotation)),e.font=this.font,e.textAlign=o?"right":"center",e.textBaseline=o?"middle":"top",e.fillText(t,0,0),e.restore()},this))}}),i.RadialScale=i.Element.extend({initialize:function(){this.size=g([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(e){var t=this.drawingArea/(this.max-this.min);return(e-this.min)*t},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var e=v(this.stepValue),t=0;t<=this.steps;t++)this.yLabels.push(E(this.templateString,{value:(this.min+t*this.stepValue).toFixed(e)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var e,t,i,r,n,o,a,s,l,h,c,d,u=g([this.height/2-this.pointLabelFontSize-5,this.width/2]),f=this.width,m=0;for(this.ctx.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t=0;t<this.valuesCount;t++)e=this.getPointPosition(t,u),i=this.ctx.measureText(E(this.templateString,{value:this.labels[t]})).width+5,0===t||t===this.valuesCount/2?(r=i/2,e.x+r>f&&(f=e.x+r,n=t),e.x-r<m&&(m=e.x-r,a=t)):t<this.valuesCount/2?e.x+i>f&&(f=e.x+i,n=t):t>this.valuesCount/2&&e.x-i<m&&(m=e.x-i,a=t);l=m,h=Math.ceil(f-this.width),o=this.getIndexAngle(n),s=this.getIndexAngle(a),c=h/Math.sin(o+Math.PI/2),d=l/Math.sin(s+Math.PI/2),c=p(c)?c:0,d=p(d)?d:0,this.drawingArea=u-(d+c)/2,this.setCenterPoint(d,c)},setCenterPoint:function(e,t){var i=this.width-t-this.drawingArea,r=e+this.drawingArea;this.xCenter=(r+i)/2,this.yCenter=this.height/2},getIndexAngle:function(e){var t=2*Math.PI/this.valuesCount;return e*t-Math.PI/2},getPointPosition:function(e,t){var i=this.getIndexAngle(e);return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter}},draw:function(){if(this.display){var e=this.ctx;if(n(this.yLabels,function(t,i){if(i>0){var r,n=i*(this.drawingArea/this.steps),o=this.yCenter-n;if(this.lineWidth>0)if(e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,this.lineArc)e.beginPath(),e.arc(this.xCenter,this.yCenter,n,0,2*Math.PI),e.closePath(),e.stroke();else{e.beginPath();for(var a=0;a<this.valuesCount;a++)r=this.getPointPosition(a,this.calculateCenterOffset(this.min+i*this.stepValue)),0===a?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y);e.closePath(),e.stroke()}if(this.showLabels){if(e.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var s=e.measureText(t).width;e.fillStyle=this.backdropColor,e.fillRect(this.xCenter-s/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,s+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.fontColor,e.fillText(t,this.xCenter,o)}}},this),!this.lineArc){e.lineWidth=this.angleLineWidth,e.strokeStyle=this.angleLineColor;for(var t=this.valuesCount-1;t>=0;t--){var i=null,r=null;if(this.angleLineWidth>0&&(i=this.calculateCenterOffset(this.max),r=this.getPointPosition(t,i),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(r.x,r.y),e.stroke(),e.closePath()),this.backgroundColors&&this.backgroundColors.length==this.valuesCount){null==i&&(i=this.calculateCenterOffset(this.max)),null==r&&(r=this.getPointPosition(t,i));var o=this.getPointPosition(0===t?this.valuesCount-1:t-1,i),a=this.getPointPosition(t===this.valuesCount-1?0:t+1,i),s={x:(o.x+r.x)/2,y:(o.y+r.y)/2},l={x:(r.x+a.x)/2,y:(r.y+a.y)/2};e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(s.x,s.y),e.lineTo(r.x,r.y),e.lineTo(l.x,l.y),e.fillStyle=this.backgroundColors[t],e.fill(),e.closePath()}var h=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5);e.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e.fillStyle=this.pointLabelFontColor;var c=this.labels.length,d=this.labels.length/2,u=d/2,f=u>t||t>c-u,p=t===u||t===c-u;0===t?e.textAlign="center":t===d?e.textAlign="center":d>t?e.textAlign="left":e.textAlign="right",p?e.textBaseline="middle":f?e.textBaseline="bottom":e.textBaseline="top",e.fillText(this.labels[t],h.x,h.y)}}}}}),i.animationService={frameDuration:17,animations:[],dropFrames:0,addAnimation:function(e,t){for(var i=0;i<this.animations.length;++i)if(this.animations[i].chartInstance===e)return void(this.animations[i].animationObject=t);this.animations.push({chartInstance:e,animationObject:t}),1==this.animations.length&&r.requestAnimFrame.call(window,this.digestWrapper)},cancelAnimation:function(e){var t=r.findNextWhere(this.animations,function(t){return t.chartInstance===e});t&&this.animations.splice(t,1)},digestWrapper:function(){i.animationService.startDigest.call(i.animationService)},startDigest:function(){var e=Date.now(),t=0;this.dropFrames>1&&(t=Math.floor(this.dropFrames),this.dropFrames-=t);for(var i=0;i<this.animations.length;i++)null===this.animations[i].animationObject.currentStep&&(this.animations[i].animationObject.currentStep=0),this.animations[i].animationObject.currentStep+=1+t,this.animations[i].animationObject.currentStep>this.animations[i].animationObject.numSteps&&(this.animations[i].animationObject.currentStep=this.animations[i].animationObject.numSteps),this.animations[i].animationObject.render(this.animations[i].chartInstance,this.animations[i].animationObject),this.animations[i].animationObject.currentStep==this.animations[i].animationObject.numSteps&&(this.animations[i].animationObject.onAnimationComplete.call(this.animations[i].chartInstance),this.animations.splice(i,1),i--);var n=Date.now(),o=n-e-this.frameDuration,a=o/this.frameDuration;a>1&&(this.dropFrames+=a),this.animations.length>0&&r.requestAnimFrame.call(window,this.digestWrapper)}},r.addEvent(window,"resize",function(){var e;return function(){clearTimeout(e),e=setTimeout(function(){n(i.instances,function(e){e.options.responsive&&e.resize(e.render,!0)})},50)}}()),f?define("Chart",[],function(){return i}):"object"==typeof module&&module.exports&&(module.exports=i),e.Chart=i,i.noConflict=function(){return e.Chart=t,i}}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,r={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'};t.Type.extend({name:"Bar",defaults:r,initialize:function(e){var r=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(e,t,i){var n=this.calculateBaseWidth(),o=this.calculateX(i)-n/2,a=this.calculateBarWidth(e);return o+a*t+t*r.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*r.barValueSpacing},calculateBarWidth:function(e){var t=this.calculateBaseWidth()-(e-1)*r.barDatasetSpacing;return t/e}}),this.datasets=[],this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getBarsAtEvent(e):[];this.eachBars(function(e){e.restore(["fillColor","strokeColor"])}),i.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),i.each(e.datasets,function(t,r){var n={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,bars:[]};this.datasets.push(n),i.each(t.data,function(i,r){n.bars.push(new this.BarClass({value:i,label:e.labels[r],datasetLabel:t.label,strokeColor:t.strokeColor,fillColor:t.fillColor,highlightFill:t.highlightFill||t.fillColor,highlightStroke:t.highlightStroke||t.strokeColor}))},this)},this),this.buildScale(e.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(e,t,r){i.extend(e,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,r,t),y:this.scale.endPoint}),e.save()},this),this.render()},update:function(){this.scale.update(),i.each(this.activeElements,function(e){e.restore(["fillColor","strokeColor"])}),this.eachBars(function(e){e.save()}),this.render()},eachBars:function(e){i.each(this.datasets,function(t,r){i.each(t.bars,e,this,r)},this)},getBarsAtEvent:function(e){for(var t,r=[],n=i.getRelativePosition(e),o=function(e){r.push(e.bars[t])},a=0;a<this.datasets.length;a++)for(t=0;t<this.datasets[a].bars.length;t++)if(this.datasets[a].bars[t].inRange(n.x,n.y))return i.each(this.datasets,o),r;return r},buildScale:function(e){var t=this,r=function(){var e=[];return t.eachBars(function(t){e.push(t.value)}),e},n={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:e.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(e){var t=i.calculateScaleRange(r(),e,this.fontSize,this.beginAtZero,this.integersOnly);i.extend(this,t)},xLabels:e,font:i.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&i.extend(n,{calculateYRange:i.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(n)},addData:function(e,t){i.each(e,function(e,i){this.datasets[i].bars.push(new this.BarClass({value:e,label:t,datasetLabel:this.datasets[i].label,x:this.scale.calculateBarX(this.datasets.length,i,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[i].strokeColor,fillColor:this.datasets[i].fillColor}))},this),this.scale.addXLabel(t),this.update()},removeData:function(){this.scale.removeXLabel(),i.each(this.datasets,function(e){e.bars.shift()},this),this.update()},reflow:function(){i.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var e=i.extend({height:this.chart.height,width:this.chart.width});this.scale.update(e)},draw:function(e){var t=e||1;this.clear(),this.chart.ctx,this.scale.draw(t),i.each(this.datasets,function(e,r){i.each(e.bars,function(e,i){e.hasValue()&&(e.base=this.scale.endPoint,e.transition({x:this.scale.calculateBarX(this.datasets.length,r,i),y:this.scale.calculateY(e.value),width:this.scale.calculateBarWidth(this.datasets.length)},t).draw())},this)},this)}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,r={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};t.Type.extend({name:"Doughnut",defaults:r,initialize:function(e){this.segments=[],this.outerRadius=(i.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getSegmentsAtEvent(e):[];i.each(this.segments,function(e){e.restore(["fillColor"])}),i.each(t,function(e){e.fillColor=e.highlightColor}),this.showTooltip(t)}),this.calculateTotal(e),i.each(e,function(t,i){t.color||(t.color="hsl("+360*i/e.length+", 100%, 50%)"),this.addData(t,i,!0)},this),this.render()},getSegmentsAtEvent:function(e){var t=[],r=i.getRelativePosition(e);return i.each(this.segments,function(e){e.inRange(r.x,r.y)&&t.push(e)},this),t},addData:function(e,i,r){var n=void 0!==i?i:this.segments.length;"undefined"==typeof e.color&&(e.color=t.defaults.global.segmentColorDefault[n%t.defaults.global.segmentColorDefault.length],e.highlight=t.defaults.global.segmentHighlightColorDefaults[n%t.defaults.global.segmentHighlightColorDefaults.length]),this.segments.splice(n,0,new this.SegmentArc({value:e.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:e.color,highlightColor:e.highlight||e.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(e.value),label:e.label})),r||(this.reflow(),this.update())},calculateCircumference:function(e){return this.total>0?2*Math.PI*(e/this.total):0},calculateTotal:function(e){this.total=0,i.each(e,function(e){this.total+=Math.abs(e.value)},this)},update:function(){this.calculateTotal(this.segments),i.each(this.activeElements,function(e){e.restore(["fillColor"])}),i.each(this.segments,function(e){e.save()}),this.render()},removeData:function(e){var t=i.isNumber(e)?e:this.segments.length-1;this.segments.splice(t,1),this.reflow(),this.update()},reflow:function(){i.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(i.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,i.each(this.segments,function(e){e.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(e){var t=e?e:1;this.clear(),i.each(this.segments,function(e,i){e.transition({circumference:this.calculateCircumference(e.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},t),e.endAngle=e.startAngle+e.circumference,e.draw(),0===i&&(e.startAngle=1.5*Math.PI),i<this.segments.length-1&&(this.segments[i+1].startAngle=e.endAngle)},this)}}),t.types.Doughnut.extend({name:"Pie",defaults:i.merge(r,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,r={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>',offsetGridLines:!1};t.Type.extend({name:"Line",defaults:r,initialize:function(e){this.PointClass=t.Point.extend({offsetGridLines:this.options.offsetGridLines,strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(e){return Math.pow(e-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getPointsAtEvent(e):[];this.eachPoints(function(e){e.restore(["fillColor","strokeColor"])}),i.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),i.each(e.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r),i.each(t.data,function(i,n){r.points.push(new this.PointClass({value:i,label:e.labels[n],datasetLabel:t.label,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this),this.buildScale(e.labels),this.eachPoints(function(e,t){i.extend(e,{x:this.scale.calculateX(t),y:this.scale.endPoint}),e.save()},this)},this),this.render()},update:function(){this.scale.update(),i.each(this.activeElements,function(e){e.restore(["fillColor","strokeColor"])}),this.eachPoints(function(e){e.save()}),this.render()},eachPoints:function(e){i.each(this.datasets,function(t){i.each(t.points,e,this)},this)},getPointsAtEvent:function(e){var t=[],r=i.getRelativePosition(e);return i.each(this.datasets,function(e){i.each(e.points,function(e){e.inRange(r.x,r.y)&&t.push(e)})},this),t},buildScale:function(e){var r=this,n=function(){var e=[];return r.eachPoints(function(t){e.push(t.value)}),e},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,offsetGridLines:this.options.offsetGridLines,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:e.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(e){var t=i.calculateScaleRange(n(),e,this.fontSize,this.beginAtZero,this.integersOnly);i.extend(this,t)},xLabels:e,font:i.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&i.extend(o,{calculateYRange:i.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new t.Scale(o)},addData:function(e,t){i.each(e,function(e,i){this.datasets[i].points.push(new this.PointClass({value:e,label:t,datasetLabel:this.datasets[i].label,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.addXLabel(t),this.update()},removeData:function(){this.scale.removeXLabel(),i.each(this.datasets,function(e){e.points.shift()},this),this.update()},reflow:function(){var e=i.extend({height:this.chart.height,width:this.chart.width});this.scale.update(e)},draw:function(e){var t=e||1;this.clear();var r=this.chart.ctx,n=function(e){return null!==e.value},o=function(e,t,r){return i.findNextWhere(t,n,r)||e},a=function(e,t,r){return i.findPreviousWhere(t,n,r)||e};this.scale&&(this.scale.draw(t),i.each(this.datasets,function(e){var s=i.where(e.points,n);i.each(e.points,function(e,i){e.hasValue()&&e.transition({y:this.scale.calculateY(e.value),x:this.scale.calculateX(i)},t)},this),this.options.bezierCurve&&i.each(s,function(e,t){var r=t>0&&t<s.length-1?this.options.bezierCurveTension:0;e.controlPoints=i.splineCurve(a(e,s,t),e,o(e,s,t),r),e.controlPoints.outer.y>this.scale.endPoint?e.controlPoints.outer.y=this.scale.endPoint:e.controlPoints.outer.y<this.scale.startPoint&&(e.controlPoints.outer.y=this.scale.startPoint),e.controlPoints.inner.y>this.scale.endPoint?e.controlPoints.inner.y=this.scale.endPoint:e.controlPoints.inner.y<this.scale.startPoint&&(e.controlPoints.inner.y=this.scale.startPoint)},this),r.lineWidth=this.options.datasetStrokeWidth,r.strokeStyle=e.strokeColor,r.beginPath(),i.each(s,function(e,t){if(0===t)r.moveTo(e.x,e.y);else if(this.options.bezierCurve){var i=a(e,s,t);r.bezierCurveTo(i.controlPoints.outer.x,i.controlPoints.outer.y,e.controlPoints.inner.x,e.controlPoints.inner.y,e.x,e.y)}else r.lineTo(e.x,e.y)},this),this.options.datasetStroke&&r.stroke(),this.options.datasetFill&&s.length>0&&(r.lineTo(s[s.length-1].x,this.scale.endPoint),r.lineTo(s[0].x,this.scale.endPoint),r.fillStyle=e.fillColor,r.closePath(),r.fill()),i.each(s,function(e){e.draw()})},this))}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,r={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};t.Type.extend({name:"PolarArea",defaults:r,initialize:function(e){this.segments=[],this.SegmentArc=t.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:e.length}),this.updateScaleRange(e),this.scale.update(),i.each(e,function(e,t){this.addData(e,t,!0)},this),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getSegmentsAtEvent(e):[];i.each(this.segments,function(e){e.restore(["fillColor"])}),i.each(t,function(e){e.fillColor=e.highlightColor}),this.showTooltip(t)}),this.render()},getSegmentsAtEvent:function(e){var t=[],r=i.getRelativePosition(e);return i.each(this.segments,function(e){e.inRange(r.x,r.y)&&t.push(e)},this),t},addData:function(e,t,i){var r=t||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({fillColor:e.color,highlightColor:e.highlight||e.color,label:e.label,value:e.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(e.value),
circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),i||(this.reflow(),this.update())},removeData:function(e){var t=i.isNumber(e)?e:this.segments.length-1;this.segments.splice(t,1),this.reflow(),this.update()},calculateTotal:function(e){this.total=0,i.each(e,function(e){this.total+=e.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(e){var t=[];i.each(e,function(e){t.push(e.value)});var r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:i.calculateScaleRange(t,i.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);i.extend(this.scale,r,{size:i.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),i.each(this.segments,function(e){e.save()}),this.reflow(),this.render()},reflow:function(){i.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),i.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),i.each(this.segments,function(e){e.update({outerRadius:this.scale.calculateCenterOffset(e.value)})},this)},draw:function(e){var t=e||1;this.clear(),i.each(this.segments,function(e,i){e.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(e.value)},t),e.endAngle=e.startAngle+e.circumference,0===i&&(e.startAngle=1.5*Math.PI),i<this.segments.length-1&&(this.segments[i+1].startAngle=e.endAngle),e.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'},initialize:function(e){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(e),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getPointsAtEvent(e):[];this.eachPoints(function(e){e.restore(["fillColor","strokeColor"])}),i.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),i.each(e.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r),i.each(t.data,function(i,n){var o;this.scale.animation||(o=this.scale.getPointPosition(n,this.scale.calculateCenterOffset(i))),r.points.push(new this.PointClass({value:i,label:e.labels[n],datasetLabel:t.label,x:this.options.animation?this.scale.xCenter:o.x,y:this.options.animation?this.scale.yCenter:o.y,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(e){i.each(this.datasets,function(t){i.each(t.points,e,this)},this)},getPointsAtEvent:function(e){var t=i.getRelativePosition(e),r=i.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},t),n=2*Math.PI/this.scale.valuesCount,o=Math.round((r.angle-1.5*Math.PI)/n),a=[];return(o>=this.scale.valuesCount||0>o)&&(o=0),r.distance<=this.scale.drawingArea&&i.each(this.datasets,function(e){a.push(e.points[o])}),a},buildScale:function(e){this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backgroundColors:this.options.scaleBackgroundColors,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:e.labels,valuesCount:e.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(e.datasets),this.scale.buildYLabels()},updateScaleRange:function(e){var t=function(){var t=[];return i.each(e,function(e){e.data?t=t.concat(e.data):i.each(e.points,function(e){t.push(e.value)})}),t}(),r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:i.calculateScaleRange(t,i.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);i.extend(this.scale,r)},addData:function(e,t){this.scale.valuesCount++,i.each(e,function(e,i){var r=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(e));this.datasets[i].points.push(new this.PointClass({value:e,label:t,datasetLabel:this.datasets[i].label,x:r.x,y:r.y,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.labels.push(t),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),i.each(this.datasets,function(e){e.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(e){e.save()}),this.reflow(),this.render()},reflow:function(){i.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:i.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(e){var t=e||1,r=this.chart.ctx;this.clear(),this.scale.draw(),i.each(this.datasets,function(e){i.each(e.points,function(e,i){e.hasValue()&&e.transition(this.scale.getPointPosition(i,this.scale.calculateCenterOffset(e.value)),t)},this),r.lineWidth=this.options.datasetStrokeWidth,r.strokeStyle=e.strokeColor,r.beginPath(),i.each(e.points,function(e,t){0===t?r.moveTo(e.x,e.y):r.lineTo(e.x,e.y)},this),r.closePath(),r.stroke(),r.fillStyle=e.fillColor,this.options.datasetFill&&r.fill(),i.each(e.points,function(e){e.hasValue()&&e.draw()})},this)}})}.call(this),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Docxgen=e()}}(function(){return function e(t,i,r){function n(a,s){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return n(i?i:e)},c,c.exports,e,t,i,r)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(e,t,i){(function(t){function r(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(i){return!1}}function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e){return this instanceof o?(this.length=0,this.parent=void 0,"number"==typeof e?a(this,e):"string"==typeof e?s(this,e,arguments.length>1?arguments[1]:"utf8"):l(this,e)):arguments.length>1?new o(e,arguments[1]):new o(e)}function a(e,t){if(e=m(e,0>t?0:0|g(t)),!o.TYPED_ARRAY_SUPPORT)for(var i=0;t>i;i++)e[i]=0;return e}function s(e,t,i){"string"==typeof i&&""!==i||(i="utf8");var r=0|y(t,i);return e=m(e,r),e.write(t,i),e}function l(e,t){if(o.isBuffer(t))return h(e,t);if(Z(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return d(e,t);if(t instanceof ArrayBuffer)return u(e,t)}return t.length?f(e,t):p(e,t)}function h(e,t){var i=0|g(t.length);return e=m(e,i),t.copy(e,0,0,i),e}function c(e,t){var i=0|g(t.length);e=m(e,i);for(var r=0;i>r;r+=1)e[r]=255&t[r];return e}function d(e,t){var i=0|g(t.length);e=m(e,i);for(var r=0;i>r;r+=1)e[r]=255&t[r];return e}function u(e,t){return o.TYPED_ARRAY_SUPPORT?(t.byteLength,e=o._augment(new Uint8Array(t))):e=d(e,new Uint8Array(t)),e}function f(e,t){var i=0|g(t.length);e=m(e,i);for(var r=0;i>r;r+=1)e[r]=255&t[r];return e}function p(e,t){var i,r=0;"Buffer"===t.type&&Z(t.data)&&(i=t.data,r=0|g(i.length)),e=m(e,r);for(var n=0;r>n;n+=1)e[n]=255&i[n];return e}function m(e,t){o.TYPED_ARRAY_SUPPORT?(e=o._augment(new Uint8Array(t)),e.__proto__=o.prototype):(e.length=t,e._isBuffer=!0);var i=0!==t&&t<=o.poolSize>>>1;return i&&(e.parent=K),e}function g(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function v(e,t){if(!(this instanceof v))return new v(e,t);var i=new o(e,t);return delete i.parent,i}function y(e,t){"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return i;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function A(e,t,i){var r=!1;if(t=0|t,i=void 0===i||i===1/0?this.length:0|i,e||(e="utf8"),0>t&&(t=0),i>this.length&&(i=this.length),t>=i)return"";for(;;)switch(e){case"hex":return P(this,t,i);case"utf8":case"utf-8":return C(this,t,i);case"ascii":return k(this,t,i);case"binary":return M(this,t,i);case"base64":return S(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,i,r){i=Number(i)||0;var n=e.length-i;r?(r=Number(r),r>n&&(r=n)):r=n;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[i+a]=s}return a}function E(e,t,i,r){return q(V(t,e.length-i),e,i,r)}function x(e,t,i,r){return q(G(t),e,i,r)}function w(e,t,i,r){return x(e,t,i,r)}function T(e,t,i,r){return q(Y(t),e,i,r)}function _(e,t,i,r){return q(W(t,e.length-i),e,i,r)}function S(e,t,i){return 0===t&&i===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,i))}function C(e,t,i){i=Math.min(e.length,i);for(var r=[],n=t;i>n;){var o=e[n],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i>=n+s){var l,h,c,d;switch(s){case 1:128>o&&(a=o);break;case 2:l=e[n+1],128===(192&l)&&(d=(31&o)<<6|63&l,d>127&&(a=d));break;case 3:l=e[n+1],h=e[n+2],128===(192&l)&&128===(192&h)&&(d=(15&o)<<12|(63&l)<<6|63&h,d>2047&&(55296>d||d>57343)&&(a=d));break;case 4:l=e[n+1],h=e[n+2],c=e[n+3],128===(192&l)&&128===(192&h)&&128===(192&c)&&(d=(15&o)<<18|(63&l)<<12|(63&h)<<6|63&c,d>65535&&1114112>d&&(a=d))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),n+=s}return R(r)}function R(e){var t=e.length;if(J>=t)return String.fromCharCode.apply(String,e);for(var i="",r=0;t>r;)i+=String.fromCharCode.apply(String,e.slice(r,r+=J));return i}function k(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;i>n;n++)r+=String.fromCharCode(127&e[n]);return r}function M(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;i>n;n++)r+=String.fromCharCode(e[n]);return r}function P(e,t,i){var r=e.length;(!t||0>t)&&(t=0),(!i||0>i||i>r)&&(i=r);for(var n="",o=t;i>o;o++)n+=j(e[o]);return n}function D(e,t,i){for(var r=e.slice(t,i),n="",o=0;o<r.length;o+=2)n+=String.fromCharCode(r[o]+256*r[o+1]);return n}function H(e,t,i){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,i,r,n,a){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>n||a>t)throw new RangeError("value is out of bounds");if(i+r>e.length)throw new RangeError("index out of range")}function L(e,t,i,r){0>t&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-i,2);o>n;n++)e[i+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function I(e,t,i,r){0>t&&(t=4294967295+t+1);for(var n=0,o=Math.min(e.length-i,4);o>n;n++)e[i+n]=t>>>8*(r?n:3-n)&255}function B(e,t,i,r,n,o){if(t>n||o>t)throw new RangeError("value is out of bounds");if(i+r>e.length)throw new RangeError("index out of range");if(0>i)throw new RangeError("index out of range")}function N(e,t,i,r,n){return n||B(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,i,r,23,4),i+4}function F(e,t,i,r,n){return n||B(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,i,r,52,8),i+8}function z(e){if(e=U(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function U(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function j(e){return 16>e?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var i,r=e.length,n=null,o=[],a=0;r>a;a++){if(i=e.charCodeAt(a),i>55295&&57344>i){if(!n){if(i>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}n=i;continue}if(56320>i){(t-=3)>-1&&o.push(239,191,189),n=i;continue}i=n-55296<<10|i-56320|65536}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,128>i){if((t-=1)<0)break;o.push(i)}else if(2048>i){if((t-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(65536>i){if((t-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(1114112>i))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function G(e){for(var t=[],i=0;i<e.length;i++)t.push(255&e.charCodeAt(i));return t}function W(e,t){for(var i,r,n,o=[],a=0;a<e.length&&!((t-=2)<0);a++)i=e.charCodeAt(a),r=i>>8,n=i%256,o.push(n),o.push(r);return o}function Y(e){return X.toByteArray(z(e))}function q(e,t,i,r){for(var n=0;r>n&&!(n+i>=t.length||n>=e.length);n++)t[n+i]=e[n];return n}var X=e("base64-js"),Q=e("ieee754"),Z=e("is-array");i.Buffer=o,i.SlowBuffer=v,i.INSPECT_MAX_BYTES=50,o.poolSize=8192;var K={};o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,r=t.length,n=0,a=Math.min(i,r);a>n&&e[n]===t[n];)++n;return n!==a&&(i=e[n],r=t[n]),r>i?-1:i>r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Z(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new o(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;i++)t+=e[i].length;var r=new o(t),n=0;for(i=0;i<e.length;i++){var a=e[i];a.copy(r,n),n+=a.length}return r},o.byteLength=y,o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):A.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:o.compare(this,e)},o.prototype.indexOf=function(e,t){function i(e,t,i){for(var r=-1,n=0;i+n<e.length;n++)if(e[i+n]===t[-1===r?0:n-r]){if(-1===r&&(r=n),n-r+1===t.length)return i+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(o.isBuffer(e))return i(this,e,t);if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):i(this,[e],t);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},o.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(i)?(i=0|i,void 0===r&&(r="utf8")):(r=i,i=void 0);else{var n=r;r=t,t=0|i,i=n}var o=this.length-t;if((void 0===i||i>o)&&(i=o),e.length>0&&(0>i||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,e,t,i);case"utf8":case"utf-8":return E(this,e,t,i);case"ascii":return x(this,e,t,i);case"binary":return w(this,e,t,i);case"base64":return T(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;o.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),e>t&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=o._augment(this.subarray(e,t));else{var n=t-e;r=new o(n,void 0);for(var a=0;n>a;a++)r[a]=this[a+e]}return r.length&&(r.parent=this.parent||this),r},o.prototype.readUIntLE=function(e,t,i){e=0|e,t=0|t,i||H(e,t,this.length);for(var r=this[e],n=1,o=0;++o<t&&(n*=256);)r+=this[e+o]*n;return r},o.prototype.readUIntBE=function(e,t,i){e=0|e,t=0|t,i||H(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},o.prototype.readUInt8=function(e,t){return t||H(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||H(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||H(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||H(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||H(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,i){e=0|e,t=0|t,i||H(e,t,this.length);for(var r=this[e],n=1,o=0;++o<t&&(n*=256);)r+=this[e+o]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,i){e=0|e,t=0|t,i||H(e,t,this.length);for(var r=t,n=1,o=this[e+--r];r>0&&(n*=256);)o+=this[e+--r]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||H(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||H(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(e,t){t||H(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(e,t){return t||H(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||H(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||H(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||H(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||H(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||H(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,i,r){e=+e,t=0|t,i=0|i,r||O(this,e,t,i,Math.pow(2,8*i),0);var n=1,o=0;for(this[t]=255&e;++o<i&&(n*=256);)this[t+o]=e/n&255;return t+i},o.prototype.writeUIntBE=function(e,t,i,r){e=+e,t=0|t,i=0|i,r||O(this,e,t,i,Math.pow(2,8*i),0);var n=i-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+i},o.prototype.writeUInt8=function(e,t,i){return e=+e,t=0|t,i||O(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=0|t,i||O(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=0|t,i||O(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=0|t,i||O(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=0|t,i||O(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t=0|t,!r){var n=Math.pow(2,8*i-1);O(this,e,t,i,n-1,-n)}var o=0,a=1,s=0>e?1:0;for(this[t]=255&e;++o<i&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+i},o.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t=0|t,!r){var n=Math.pow(2,8*i-1);O(this,e,t,i,n-1,-n)}var o=i-1,a=1,s=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+i},o.prototype.writeInt8=function(e,t,i){return e=+e,t=0|t,i||O(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,i){return e=+e,t=0|t,i||O(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,i){return e=+e,t=0|t,i||O(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,i){return e=+e,t=0|t,i||O(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,i){return e=+e,t=0|t,i||O(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,i){return N(this,e,t,!0,i)},o.prototype.writeFloatBE=function(e,t,i){return N(this,e,t,!1,i)},o.prototype.writeDoubleLE=function(e,t,i){return F(this,e,t,!0,i)},o.prototype.writeDoubleBE=function(e,t,i){return F(this,e,t,!1,i)},o.prototype.copy=function(e,t,i,r){if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&i>r&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n,a=r-i;if(this===e&&t>i&&r>t)for(n=a-1;n>=0;n--)e[n+t]=this[n+i];else if(1e3>a||!o.TYPED_ARRAY_SUPPORT)for(n=0;a>n;n++)e[n+t]=this[n+i];else e._set(this.subarray(i,i+a),t);return a},o.prototype.fill=function(e,t,i){if(e||(e=0),t||(t=0),i||(i=this.length),t>i)throw new RangeError("end < start");if(i!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>i||i>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;i>r;r++)this[r]=e;else{var n=V(e.toString()),o=n.length;for(r=t;i>r;r++)this[r]=n[r%o]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var e=new Uint8Array(this.length),t=0,i=e.length;i>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var $=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._set=e.set,e.get=$.get,e.set=$.set,e.write=$.write,e.toString=$.toString,e.toLocaleString=$.toString,e.toJSON=$.toJSON,e.equals=$.equals,e.compare=$.compare,e.indexOf=$.indexOf,e.copy=$.copy,e.slice=$.slice,e.readUIntLE=$.readUIntLE,e.readUIntBE=$.readUIntBE,e.readUInt8=$.readUInt8,e.readUInt16LE=$.readUInt16LE,e.readUInt16BE=$.readUInt16BE,e.readUInt32LE=$.readUInt32LE,e.readUInt32BE=$.readUInt32BE,e.readIntLE=$.readIntLE,e.readIntBE=$.readIntBE,e.readInt8=$.readInt8,e.readInt16LE=$.readInt16LE,e.readInt16BE=$.readInt16BE,e.readInt32LE=$.readInt32LE,e.readInt32BE=$.readInt32BE,e.readFloatLE=$.readFloatLE,e.readFloatBE=$.readFloatBE,e.readDoubleLE=$.readDoubleLE,e.readDoubleBE=$.readDoubleBE,e.writeUInt8=$.writeUInt8,e.writeUIntLE=$.writeUIntLE,e.writeUIntBE=$.writeUIntBE,e.writeUInt16LE=$.writeUInt16LE,e.writeUInt16BE=$.writeUInt16BE,e.writeUInt32LE=$.writeUInt32LE,e.writeUInt32BE=$.writeUInt32BE,e.writeIntLE=$.writeIntLE,e.writeIntBE=$.writeIntBE,e.writeInt8=$.writeInt8,e.writeInt16LE=$.writeInt16LE,e.writeInt16BE=$.writeInt16BE,e.writeInt32LE=$.writeInt32LE,e.writeInt32BE=$.writeInt32BE,e.writeFloatLE=$.writeFloatLE,e.writeFloatBE=$.writeFloatBE,e.writeDoubleLE=$.writeDoubleLE,e.writeDoubleBE=$.writeDoubleBE,e.fill=$.fill,e.inspect=$.inspect,e.toArrayBuffer=$.toArrayBuffer,e};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":2,ieee754:3,"is-array":4}],2:[function(e,t,i){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===d?62:t===s||t===u?63:l>t?-1:l+10>t?t-l+26+26:c+26>t?t-c:h+26>t?t-h+26:void 0}function i(e){function i(e){h[d++]=e}var r,n,a,s,l,h;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;l="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,h=new o(3*e.length/4-l),a=l>0?e.length-4:e.length;var d=0;for(r=0,n=0;a>r;r+=4,n+=3)s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),i((16711680&s)>>16),i((65280&s)>>8),i(255&s);return 2===l?(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,i(255&s)):1===l&&(s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,i(s>>8&255),i(255&s)),h}function n(e){function t(e){return r.charAt(e)}function i(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var n,o,a,s=e.length%3,l="";for(n=0,a=e.length-s;a>n;n+=3)o=(e[n]<<16)+(e[n+1]<<8)+e[n+2],l+=i(o);switch(s){case 1:o=e[e.length-1],l+=t(o>>2),l+=t(o<<4&63),l+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],l+=t(o>>10),l+=t(o>>4&63),l+=t(o<<2&63),l+="="}return l}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),l="0".charCodeAt(0),h="a".charCodeAt(0),c="A".charCodeAt(0),d="-".charCodeAt(0),u="_".charCodeAt(0);e.toByteArray=i,e.fromByteArray=n}("undefined"==typeof i?this.base64js={}:i)},{}],3:[function(e,t,i){i.read=function(e,t,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,h=l>>1,c=-7,d=i?n-1:0,u=i?-1:1,f=e[t+d];for(d+=u,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=u,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=u,c-=8);if(0===o)o=1-h;else{if(o===l)return a?NaN:(f?-1:1)*(1/0);a+=Math.pow(2,r),o-=h}return(f?-1:1)*a*Math.pow(2,o-r)},i.write=function(e,t,i,r,n,o){var a,s,l,h=8*o-n-1,c=(1<<h)-1,d=c>>1,u=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+d>=1?u/l:u*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,n),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,n),a=0));n>=8;e[i+f]=255&s,f+=p,s/=256,n-=8);for(a=a<<n|s,h+=n;h>0;e[i+f]=255&a,f+=p,a/=256,h-=8);e[i+f-p]|=128*m}},{}],4:[function(e,t,i){var r=Array.isArray,n=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==n.call(e)}},{}],5:[function(e,t,i){var r,n;n=e("./errors"),r=r=function(){function e(){this.compiled=[]}return e.prototype.prependText=function(e){return this.compiled.unshift(e),this},e.prototype.appendTag=function(e){var t;if(!e)throw t=new n.XTInternalError("Compiled tag empty"),t.properties.id="tag_appended_empty",t;return this.compiled=this.compiled.concat(e.compiled),this},e.prototype.appendRaw=function(e){return this.compiled.push({type:"raw",tag:e}),this},e.prototype.appendText=function(e){return""!==e&&this.compiled.push(e),this},e.prototype.appendSubTemplate=function(e,t,i){var r;if(!e)throw r=new n.XTInternalError("Subtemplate empty"),r.properties.id="subtemplate_appended_empty",r;return this.compiled.push({type:"loop",tag:t,inverted:i,template:e})},e}(),t.exports=r},{"./errors":9}],6:[function(e,t,i){var r;r=r=function(){function e(e){null==e&&(e=[]),this.set(e)}return e.prototype.set=function(e){var t,i,r;if(null==e&&(e=[]),this["null"])return this;for(this.compiled=[],t=0,i=e.length;i>t;t++)r=e[t],""!==r&&this.compiled.push(r);return this},e.prototype.prependText=function(e){return this["null"]?this:(""!==e&&this.compiled.unshift(e),this)},e.prototype.appendText=function(e){return this["null"]?this:(""!==e&&this.compiled.push(e),this)},e}(),r["null"]=function(){var e;return e=new r,e["null"]=!0,e},t.exports=r},{}],7:[function(e,t,i){var r,n,o=[].slice;n=e("./errors"),r={},r.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},r.defaults={nullGetter:function(e,t){return"simple"===t.tag?"undefined":("raw"===t.tag,"")},parser:function(e){return{get:function(t){return"."===e?t:t[e]}}},intelligentTagging:!0,delimiters:{start:"{",end:"}"}},r.charMap={"&":"&amp;","'":"&apos;","<":"&lt;",">":"&gt;"},r.wordToUtf8=function(e){var t,i,n;"string"!=typeof e&&(e=e.toString()),i=r.charMap;for(t in i)n=i[t],e=e.replace(new RegExp(r.escapeRegExp(n),"g"),t);return e},r.utf8ToWord=function(e){var t,i,n;"string"!=typeof e&&(e=e.toString()),i=r.charMap;for(n in i)t=i[n],e=e.replace(new RegExp(r.escapeRegExp(n),"g"),t);return e},r.clone=function(e){var t,i,n;if(null==e||"object"!=typeof e)return e;if("Date"==typeof e)return new Date(e.getTime());if("RegExp"==typeof e)return t="",null!=e.global&&(t+="g"),null!=e.ignoreCase&&(t+="i"),null!=e.multiline&&(t+="m"),null!=e.sticky&&(t+="y"),new RegExp(e.source,t);n=new e.constructor;for(i in e)n[i]=r.clone(e[i]);return n},r.convertSpaces=function(e){return e.replace(new RegExp(String.fromCharCode(160),"g")," ");
},r.pregMatchAll=function(e,t){var i,r;return"object"!=typeof e&&(e=new RegExp(e,"g")),i=[],r=function(){var e,t,r,n,a;return t=arguments[0],n=4<=arguments.length?o.call(arguments,1,e=arguments.length-2):(e=1,[]),r=arguments[e++],a=arguments[e++],n.unshift(t),n.offset=r,i.push(n)},t.replace(e,r),i},r.sizeOfObject=function(e){var t,i;i=0;for(t in e)i++;return i},r.encode_utf8=function(e){return unescape(encodeURIComponent(e))},r.decode_utf8=function(e){var t,i,o;try{if(void 0===e)return;return decodeURIComponent(escape(r.convert_spaces(e)))}catch(o){throw t=o,i=new n.XTError("Could not decode utf8"),i.properties={toDecode:e,baseErr:t},i}},r.base64encode=function(e){return btoa(unescape(encodeURIComponent(e)))},r.tags=r.defaults.delimiters,r.defaultParser=r.defaults.parser,r.convert_spaces=r.convertSpaces,r.preg_match_all=r.pregMatchAll,t.exports=r},{"./errors":9}],8:[function(e,t,i){var r,n,o,a,s=function(e,t){function i(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e("./xmlTemplater"),n=e("./subContent"),a=e("./xmlUtil"),r=r=function(e){function t(e,i){null==e&&(e=""),null==i&&(i={}),t.__super__.constructor.call(this,"",i),this.currentClass=t,this.tagsXmlArray=["w:t","m:t"],this.tagXml="w:t",this.tagRawXml="w:p",this.load(e)}return s(t,e),t.prototype.calcIntellegentlyDashElement=function(){var e,i,r,o,s,l,h,c;for(s=new n(this.content).getOuterLoop(this.templaterState),e=s.content,h=s.start,i=s.end,l=a.getListXmlElements(this.content,h,i-h),r=0,o=l.length;o>r;r++)if(c=l[r],"<w:tc>"===c.tag)return"w:tr";return t.__super__.calcIntellegentlyDashElement.call(this)},t}(o),t.exports=r},{"./subContent":12,"./xmlTemplater":15,"./xmlUtil":16}],9:[function(e,t,i){var r,n,o,a;r=function(e){return this.name="GenericError",this.message=e,this.stack=(new Error).stack},r.prototype=new Error,a=function(e){return this.name="TemplateError",this.message=e,this.stack=(new Error).stack},a.prototype=new r,o=function(e){return this.name="ScopeParserError",this.message=e,this.stack=(new Error).stack},o.prototype=new r,n=function(e){return this.name="InternalError",this.properties={explanation:"InternalError"},this.message=e,this.stack=(new Error).stack},n.prototype=new r,t.exports={XTError:r,XTTemplateError:a,XTInternalError:n,XTScopeParserError:o}},{}],10:[function(e,t,i){var r;t.exports=r=function(){function e(){this.modules=[]}return e.prototype.attachModule=function(e){return this.modules.push(e),e.manager=this,this},e.prototype.sendEvent=function(e,t){var i,r,n,o,a;for(o=this.modules,a=[],i=0,r=o.length;r>i;i++)n=o[i],a.push(n.handleEvent(e,t));return a},e.prototype.get=function(e){var t,i,r,n,o,a;for(a=null,o=this.modules,i=0,r=o.length;r>i;i++)n=o[i],t=n.get(e),a=null!==t?t:a;return a},e.prototype.handle=function(e,t){var i,r,n,o,a,s;for(s=null,a=this.modules,r=0,n=a.length;n>r;r++){if(o=a[r],null!==s)return;i=o.handle(e,t),s=null!==i?i:s}return s},e.prototype.getInstance=function(e){return this[e]},e}()},{}],11:[function(e,t,i){var r,n,o;r=e("./docUtils"),n=e("./errors"),t.exports=o=function(){function e(e){this.tags=e.tags,this.scopePath=e.scopePath,this.usedTags=e.usedTags,this.scopeList=e.scopeList,this.parser=e.parser,this.moduleManager=e.moduleManager,this.nullGetter=e.nullGetter,this.delimiters=e.delimiters,this.moduleManager.scopeManager=this}return e.prototype.loopOver=function(e,t,i){var r;return null==i&&(i=!1),r=this.getValue(e),this.loopOverValue(r,t,i)},e.prototype.loopOverValue=function(e,t,i){var r,n,o,a,s;if(null==i&&(i=!1),s=Object.prototype.toString.call(e),i)return null==e?t(this.scopeList[this.num]):e?void("[object Array]"===s&&0===e.length&&t(this.scopeList[this.num])):t(this.scopeList[this.num]);if(null!=e){if("[object Array]"===s)for(r=n=0,o=e.length;o>n;r=++n)a=e[r],t(a);return"[object Object]"===s&&t(e),e===!0?t(this.scopeList[this.num]):void 0}},e.prototype.getValue=function(e,t){var i,r,o,a,s,l,h;this.num=null!=t?t:this.scopeList.length-1,h=this.scopeList[this.num];try{s=this.parser(e)}catch(o){throw r=o,i=new n.XTScopeParserError("Scope parser compilation failed"),i.properties={id:"scopeparser_compilation_failed",tag:e,explanation:"The scope parser for the tag "+e+" failed to compile"},i}try{l=s.get(h)}catch(a){throw r=a,i=new n.XTScopeParserError("Scope parser execution failed"),i.properties={id:"scopeparser_execution_failed",explanation:"The scope parser for the tag "+e+" failed to execute",scope:h,tag:e},i}return null==l&&this.num>0?this.getValue(e,this.num-1):l},e.prototype.getValueFromScope=function(e){var t,i;return t=this.getValue(e),null==t?(this.useTag(e,!1),null):("string"==typeof t?(this.useTag(e,!0),i=t):i="number"==typeof t?String(t):t,i)},e.prototype.useTag=function(e,t){var i,r,n,o,a,s;for(s=t?this.usedTags.def:this.usedTags.undef,o=this.scopePath,i=r=0,n=o.length;n>r;i=++r)a=o[i],null==s[a]&&(s[a]={}),s=s[a];return""!==e?s[e]=!0:void 0},e}()},{"./docUtils":7,"./errors":9}],12:[function(e,t,i){var r,n;r=e("./errors"),t.exports=n=function(){function e(e){this.fullText=null!=e?e:"",this.text="",this.start=0,this.end=0}return e.prototype.getInnerLoop=function(e){return this.start=e.calcEndTag(e.loopOpen),this.end=e.calcStartTag(e.loopClose),this.refreshText()},e.prototype.getOuterLoop=function(e){return this.start=e.calcStartTag(e.loopOpen),this.end=e.calcEndTag(e.loopClose),this.refreshText()},e.prototype.getInnerTag=function(e){return this.start=e.calcPosition(e.tagStart),this.end=e.calcPosition(e.tagEnd)+1,this.refreshText()},e.prototype.refreshText=function(){return this.text=this.fullText.substr(this.start,this.end-this.start),this},e.prototype.getErrorProps=function(e){return{xmlTag:e,text:this.fullText,start:this.start,previousEnd:this.end}},e.prototype.getOuterXml=function(e){var t,i,n;if(t=this.fullText.indexOf("</"+e+">",this.end),n=Math.max(this.fullText.lastIndexOf("<"+e+">",this.start),this.fullText.lastIndexOf("<"+e+" ",this.start)),-1===t)throw i=new r.XTTemplateError("Can't find endTag"),i.properties=this.getErrorProps(e),i;if(-1===n)throw i=new r.XTTemplateError("Can't find startTag"),i.properties=this.getErrorProps(e),i;return this.end=t+("</"+e+">").length,this.start=n,this.refreshText()},e.prototype.replace=function(e){return this.fullText=this.fullText.substr(0,this.start)+e+this.fullText.substr(this.end),this.end=this.start+e.length,this.refreshText()},e}()},{"./errors":9}],13:[function(e,t,i){var r,n,o;r=e("./docUtils"),n=e("./errors"),t.exports=o=function(){function e(e,t){this.moduleManager=e,this.delimiters=t,this.moduleManager.templaterState=this}return e.prototype.moveCharacters=function(e,t,i){var r,n,o,a,s;for(s=[],n=r=o=e,a=this.matches.length;a>=o?a>r:r>a;n=a>=o?++r:--r)s.push(this.charactersAdded[n]+=t-i);return s},e.prototype.calcStartTag=function(e){return this.calcPosition(e.start)},e.prototype.calcXmlTagPosition=function(e){return this.matches[e].offset+this.charactersAdded[e]},e.prototype.calcEndTag=function(e){return this.calcPosition(e.end)+1},e.prototype.calcPosition=function(e){return this.matches[e.numXmlTag].offset+this.matches[e.numXmlTag][1].length+this.charactersAdded[e.numXmlTag]+e.numCharacter},e.prototype.innerContent=function(e){return this.matches[this[e].numXmlTag][2]},e.prototype.initialize=function(){return this.context="",this.inForLoop=!1,this.loopIsInverted=!1,this.inTag=!1,this.inDashLoop=!1,this.rawXmlTag=!1,this.textInsideTag="",this.trail="",this.trailSteps=[],this.offset=[]},e.prototype.startTag=function(){var e,t;if(this.inTag===!0)throw e=new n.XTTemplateError("Unclosed tag"),t=this.textInsideTag,e.properties={xtag:t,id:"unclosed_tag",context:this.context,explanation:"The tag beginning with '"+t.substr(10)+"' is unclosed"},e;return this.currentStep=this.trailSteps[0],this.inTag=!0,this.rawXmlTag=!1,this.textInsideTag="",this.tagStart=this.currentStep,this.trail=""},e.prototype.loopType=function(){var e;return this.inDashLoop?"dash":this.inForLoop?"for":this.rawXmlTag?"xml":(e=this.moduleManager.get("loopType"),null!==e?e:"simple")},e.prototype.isLoopClosingTag=function(){return"/"===this.textInsideTag[0]&&"/"+this.loopOpen.tag===this.textInsideTag},e.prototype.finishLoop=function(){return this.context="",this.rawXmlTag=!1,this.inForLoop=!1,this.loopIsInverted=!1,this.loopOpen=null,this.loopClose=null,this.inDashLoop=!1,this.inTag=!1,this.textInsideTag=""},e.prototype.getLeftValue=function(){return this.innerContent("tagStart").substr(0,this.tagStart.numCharacter+this.offset[this.tagStart.numXmlTag])},e.prototype.getRightValue=function(){return this.innerContent("tagEnd").substr(this.tagEnd.numCharacter+1+this.offset[this.tagEnd.numXmlTag])},e.prototype.endTag=function(){var e,t;if(this.inTag===!1)throw t=new n.XTTemplateError("Unopened tag"),t.properties={id:"unopened_tag",explanation:"Unopened tag near : '"+this.context.substr(this.context.length-10,10)+"'",context:this.context},t;return this.inTag=!1,this.tagEnd=this.currentStep,this.textInsideTag=this.textInsideTag.substr(0,this.textInsideTag.length+1-this.delimiters.end.length),this.textInsideTag=r.wordToUtf8(this.textInsideTag),this.fullTextTag=this.delimiters.start+this.textInsideTag+this.delimiters.end,"simple"===this.loopType()&&("@"===this.textInsideTag[0]&&(this.rawXmlTag=!0,this.tag=this.textInsideTag.substr(1)),"#"!==this.textInsideTag[0]&&"^"!==this.textInsideTag[0]||(this.inForLoop=!0,this.loopOpen={start:this.tagStart,end:this.tagEnd,tag:this.textInsideTag.substr(1),raw:this.textInsideTag}),"^"===this.textInsideTag[0]&&(this.loopIsInverted=!0),"-"===this.textInsideTag[0]&&"simple"===this.loopType()&&(this.inDashLoop=!0,e=/^-([^\s]+)\s(.+)$/,this.loopOpen={start:this.tagStart,end:this.tagEnd,tag:this.textInsideTag.replace(e,"$2"),element:this.textInsideTag.replace(e,"$1"),raw:this.textInsideTag})),"/"===this.textInsideTag[0]?this.loopClose={start:this.tagStart,end:this.tagEnd,raw:this.textInsideTag}:void 0},e}()},{"./docUtils":7,"./errors":9}],14:[function(e,t,i){var r,n,o=[].slice;r=e("./docUtils"),t.exports=n=function(){function e(e){this.content=e}return e.prototype.parse=function(e){var t;return this.tagsXmlArray=e,this.tagsXmlArrayJoined=this.tagsXmlArray.join("|"),this.matches=r.pregMatchAll("(<(?:"+this.tagsXmlArrayJoined+")[^>]*>)([^<>]*)</(?:"+this.tagsXmlArrayJoined+")>",this.content),this.charactersAdded=function(){var e,i,r;for(r=[],t=e=0,i=this.matches.length;i>=0?i>e:e>i;t=i>=0?++e:--e)r.push(0);return r}.call(this),this.handleRecursiveCase(),this},e.prototype.handleRecursiveCase=function(){var e,t,i;return i=function(e){return function(){var t,i,r,n,a;return i=arguments[0],n=4<=arguments.length?o.call(arguments,1,t=arguments.length-2):(t=1,[]),r=arguments[t++],a=arguments[t++],i=n[0]+n[1],n.unshift(i),n.offset=r,n.first=!0,e.matches.unshift(n),e.charactersAdded.unshift(0)}}(this),-1===this.content.indexOf("<")&&-1===this.content.indexOf(">")&&this.content.replace(/^()([^<>]*)$/,i),e="^()([^<]+)</(?:"+this.tagsXmlArrayJoined+")>",this.content.replace(new RegExp(e),i),t=function(e){return function(){var t,i,r,n,a;return i=arguments[0],n=4<=arguments.length?o.call(arguments,1,t=arguments.length-2):(t=1,[]),r=arguments[t++],a=arguments[t++],n.unshift(i),n.offset=r,n.last=!0,e.matches.push(n),e.charactersAdded.push(0)}}(this),e="(<(?:"+this.tagsXmlArrayJoined+")[^>]*>)([^>]+)$",this.content.replace(new RegExp(e),t),this},e}()},{"./docUtils":7}],15:[function(e,t,i){var r,n,o,a,s,l,h,c,d,u,f;o=e("./docUtils"),l=e("./scopeManager"),h=e("./subContent"),c=e("./templaterState"),d=e("./xmlMatcher"),s=e("./moduleManager"),r=e("./compiledTemplate"),n=e("./compiledXmlTag"),a=e("./errors"),f=function(e,t){var i,r,n;return r=new d(e).parse(t),n=function(){var e,t,n,o;for(n=r.matches,o=[],e=0,t=n.length;t>e;e++)i=n[e],o.push(i[2]);return o}(),o.wordToUtf8(o.convertSpaces(n.join("")))},t.exports=u=function(){function e(t,i){null==t&&(t=""),null==i&&(i={}),this.tagsXmlArray=[],this.tagXml="",this.tagRawXml="",this.currentClass=e,this.fromJson(i),this.templaterState=new c(this.moduleManager,this.delimiters)}return e.prototype.load=function(e){var t,i;if(this.content=e,"string"!=typeof this.content)throw t=new a.XTInternalError("Content must be a string"),t.properties.id="xmltemplater_content_must_be_string",t;return i=new d(this.content).parse(this.tagsXmlArray),this.templaterState.matches=i.matches,this.templaterState.charactersAdded=i.charactersAdded},e.prototype.fromJson=function(e){var t,i,r;null==e&&(e={}),this.tags=null!=e.tags?e.tags:{},this.scopePath=null!=e.scopePath?e.scopePath:[],this.scopeList=null!=e.scopeList?e.scopeList:[this.tags],this.usedTags=null!=e.usedTags?e.usedTags:{def:{},undef:{}},r=o.defaults;for(i in r)t=r[i],this[i]=null!=e[i]?e[i]:t;return this.moduleManager=null!=e.moduleManager?e.moduleManager:new s,this.scopeManager=new l({tags:this.tags,scopePath:this.scopePath,usedTags:this.usedTags,scopeList:this.scopeList,parser:this.parser,moduleManager:this.moduleManager,delimiters:this.delimiters})},e.prototype.toJson=function(){var e,t,i,r;i={tags:o.clone(this.scopeManager.tags),scopePath:o.clone(this.scopeManager.scopePath),scopeList:o.clone(this.scopeManager.scopeList),usedTags:this.scopeManager.usedTags,moduleManager:this.moduleManager},r=o.defaults;for(t in r)e=r[t],i[t]=this[t];return i},e.prototype.calcIntellegentlyDashElement=function(){return!1},e.prototype.getFullText=function(){return f(this.content,this.tagsXmlArray)},e.prototype.updateModuleManager=function(){return this.moduleManager.xmlTemplater=this,this.moduleManager.templaterState=this.templaterState,this.moduleManager.scopeManager=this.scopeManager},e.prototype.handleModuleManager=function(e,t){return this.updateModuleManager(),this.moduleManager.handle(e,t)},e.prototype.render=function(){return this.compile()},e.prototype.compile=function(){var e,t,i,n,o,a,s,l,h,c,d,u,f;for(this.sameTags=this.delimiters.start===this.delimiters.end,this.compiled=new r,this.lastStart=0,this.templaterState.initialize(),this.handleModuleManager("xmlRendering"),f=this.templaterState.matches,d=t=0,o=f.length;o>t;d=++t)if(h=f[d],i=h[2],this.templaterState.offset[d]=0,0!==this.templaterState.trail.length||this.templaterState.inTag||-1!==i.indexOf(this.delimiters.start[0])||-1!==i.indexOf(this.delimiters.end[0]))for(c=n=0,a=i.length;a>n;c=++n)e=i[c],this.templaterState.trail+=e,s=this.templaterState.inTag?this.delimiters.end.length:this.delimiters.start.length,this.templaterState.trail=this.templaterState.trail.substr(-s,s),this.templaterState.currentStep={numXmlTag:d,numCharacter:c},this.templaterState.trailSteps.push({numXmlTag:d,numCharacter:c}),this.templaterState.trailSteps=this.templaterState.trailSteps.splice(-this.delimiters.start.length,this.delimiters.start.length),this.templaterState.context+=e,this.sameTags===!0&&this.templaterState.inTag===!1&&this.templaterState.trail===this.delimiters.start||this.sameTags===!1&&this.templaterState.trail===this.delimiters.start?this.templaterState.startTag():this.sameTags===!0&&this.templaterState.inTag===!0&&this.templaterState.trail===this.delimiters.end||this.sameTags===!1&&this.templaterState.trail===this.delimiters.end?(this.updateModuleManager(),this.templaterState.endTag(),l=this.templaterState.loopType(),"simple"===l&&this.replaceSimpleTag(),"xml"===l&&this.replaceSimpleTagRawXml(),"dash"!==l&&"for"!==l||this.templaterState.isLoopClosingTag()&&(this.replaceLoopTag(),this.templaterState.finishLoop()),-1===["simple","dash","for","xml"].indexOf(l)&&this.handleModuleManager("replaceTag",l)):this.templaterState.inTag===!0&&(this.templaterState.textInsideTag+=e);return this.handleModuleManager("xmlRendered"),u=this.content.substr(this.lastStart),this.compiled.appendText(u),this},e.prototype.replaceSimpleTag=function(){var e;return e=this.scopeManager.getValueFromScope(this.templaterState.textInsideTag),null==e&&(e=this.nullGetter(this.templaterState.textInsideTag,{tag:"simple"})),this.content=this.replaceTagByValue(o.utf8ToWord(e),this.content)},e.prototype.replaceSimpleTagRawXml=function(){var e,t,i,r,n,o,s,l,c;n=this.scopeManager.getValueFromScope(this.templaterState.tag),null==n&&(n=this.nullGetter(this.templaterState.tag,{tag:"raw"})),c=new h(this.content),c.getInnerTag(this.templaterState);try{o=c.getOuterXml(this.tagRawXml)}catch(i){throw t=i,t instanceof a.XTTemplateError&&(t.properties.id="raw_tag_outerxml_invalid",t.properties.xtag=this.templaterState.textInsideTag,t.properties.explanation="The raw tag "+t.properties.xtag+" is not valid in this context."),t}if(r=f(o.text,this.tagsXmlArray),this.templaterState.fullTextTag!==r)throw e=new a.XTTemplateError("Raw xml tag should be the only text in paragraph"),e.properties={id:"raw_xml_tag_should_be_only_text_in_paragraph",paragraphContent:r,fullTag:this.templaterState.fullTextTag,xtag:this.templaterState.textInsideTag,explanation:"The tag : '"+this.templaterState.fullTextTag+"' should be the the only text in the paragraph (it contains '"+r+"')"},e;return l=o.start,s=this.content.substr(this.lastStart,l-this.lastStart),this.compiled.appendText(s),this.lastStart=l,this.compiled.appendRaw(this.templaterState.tag),this.replaceXml(o,n)},e.prototype.replaceXml=function(e,t){return this.templaterState.moveCharacters(this.templaterState.tagStart.numXmlTag,t.length,e.text.length),this.content=e.replace(t).fullText},e.prototype.deleteTag=function(e,t){var i;return this.templaterState.tagStart=t.start,this.templaterState.tagEnd=t.end,this.templaterState.textInsideTag=t.raw,i=this.replaceTagByValue("",e)},e.prototype.deleteOuterTags=function(e){return this.deleteTag(this.deleteTag(e,this.templaterState.loopOpen),this.templaterState.loopClose)},e.prototype.dashLoop=function(e,t){var i,r,n,o,s,l;null==t&&(t=!1),l=new h(this.content),l.getInnerLoop(this.templaterState);try{o=l.getOuterXml(e)}catch(r){throw i=r,i instanceof a.XTTemplateError&&(i.properties.id="dashloop_tag_outerxml_invalid",i.properties.xtag=this.templaterState.textInsideTag,i.properties.explanation="The dashLoop tag "+i.properties.xtag+" is not valid in this context."),i}return this.templaterState.moveCharacters(0,0,o.start),s=o.text,n=this.deleteOuterTags(s,t),this.templaterState.moveCharacters(0,o.start,0),this.templaterState.moveCharacters(this.templaterState.tagStart.numXmlTag,s.length,n.length),this.forLoop(o,n)},e.prototype.xmlToBeReplaced=function(e){var t,i;return i="",t="",e.noStartTag?e.insideValue:(i=e.spacePreserve&&"w:t"===e.tag?"<"+e.fullTag+' xml:space="preserve">':this.templaterState.matches[e.xmlTagNumber][1],e.noEndTag||(t="</"+e.tag+">"),this.currentCompiledTag.prependText(i),this.currentCompiledTag.appendText(t),i+e.insideValue+t)},e.prototype.replaceFirstFrom=function(e,t,i,r){var n,o;return o=e.substr(r),n=o.replace(t,i),e.substr(0,r)+n},e.prototype.replaceXmlTag=function(e,t){var i,r,n,o;if(this.templaterState.offset[t.xmlTagNumber]+=t.insideValue.length-this.templaterState.matches[t.xmlTagNumber][2].length,t.fullTag=this.templaterState.matches[t.xmlTagNumber][1].replace(/^<([^>]+)>$/,"$1"),t.tag=t.fullTag.replace(/([^ ]*).*/,"$1"),t.spacePreserve=null!=t.spacePreserve?t.spacePreserve:!0,t.spacePreserve=t.spacePreserve&&-1===this.templaterState.matches[t.xmlTagNumber][1].indexOf('xml:space="preserve"'),t.noStartTag=null!=t.noStartTag?t.noStartTag:!1,t.noEndTag=null!=t.noEndTag?t.noEndTag:!1,n=this.xmlToBeReplaced(t),this.templaterState.matches[t.xmlTagNumber][2]=t.insideValue,o=this.templaterState.calcXmlTagPosition(t.xmlTagNumber),this.templaterState.moveCharacters(t.xmlTagNumber+1,n.length,this.templaterState.matches[t.xmlTagNumber][0].length),-1===e.indexOf(this.templaterState.matches[t.xmlTagNumber][0]))throw i=new a.XTInternalError("Match not found in content"),i.properties.id="xmltemplater_replaced_cant_be_same_as_substring",i.properties.expectedMatch=this.templaterState.matches[t.xmlTagNumber][0],i.properties.content=e,i;return e=this.replaceFirstFrom(e,this.templaterState.matches[t.xmlTagNumber][0],n,o),this.templaterState.matches[t.xmlTagNumber][0]=n,r=e.substr(this.lastStart,o-this.lastStart),"simple"===this.templaterState.loopType()&&(this.compiled.appendText(r),this.lastStart=o+this.templaterState.matches[t.xmlTagNumber][0].length,this.compiled.appendTag(this.currentCompiledTag)),e},e.prototype.replaceTagByValue=function(e,t){var i,r,o,a,s;if(o={xmlTagNumber:this.templaterState.tagStart.numXmlTag,noStartTag:null!=this.templaterState.matches[this.templaterState.tagStart.numXmlTag].first,noEndTag:null!=this.templaterState.matches[this.templaterState.tagStart.numXmlTag].last},this.templaterState.tagEnd.numXmlTag===this.templaterState.tagStart.numXmlTag)return this.currentCompiledTag=new n([this.templaterState.getLeftValue(),{type:"tag",tag:this.templaterState.textInsideTag},this.templaterState.getRightValue()]),o.insideValue=this.templaterState.getLeftValue()+e+this.templaterState.getRightValue(),this.replaceXmlTag(t,o);if(this.templaterState.tagEnd.numXmlTag>this.templaterState.tagStart.numXmlTag){for(o.insideValue=e,this.currentCompiledTag=new n([{type:"tag",tag:this.templaterState.textInsideTag}]),null==this.templaterState.matches[this.templaterState.tagStart.numXmlTag].first&&null==this.templaterState.matches[this.templaterState.tagStart.numXmlTag].last&&(this.currentCompiledTag=new n([this.templaterState.getLeftValue(),{type:"tag",tag:this.templaterState.textInsideTag}]),o.insideValue=this.templaterState.getLeftValue()+e),t=this.replaceXmlTag(t,o),o={insideValue:"",spacePreserve:!1},r=i=a=this.templaterState.tagStart.numXmlTag+1,s=this.templaterState.tagEnd.numXmlTag;s>=a?s>i:i>s;r=s>=a?++i:--i)o.xmlTagNumber=r,this.currentCompiledTag=new n([]),t=this.replaceXmlTag(t,o);return o={insideValue:this.templaterState.getRightValue(),spacePreserve:!0,xmlTagNumber:this.templaterState.tagEnd.numXmlTag,noEndTag:null!=this.templaterState.matches[this.templaterState.tagEnd.numXmlTag].last},this.currentCompiledTag=n["null"](),this.replaceXmlTag(t,o)}},e.prototype.replaceLoopTag=function(){var e,t,i;return"dash"===this.templaterState.loopType()?this.dashLoop(this.templaterState.loopOpen.element):this.intelligentTagging===!0&&(e=this.calcIntellegentlyDashElement(),e!==!1)?this.dashLoop(e,!0):(i=new h(this.content).getOuterLoop(this.templaterState),t=new h(this.content).getInnerLoop(this.templaterState).text,this.forLoop(i,t))},e.prototype.calcSubXmlTemplater=function(e,t){var i;return i=this.toJson(),null!=t&&null!=t.tags&&(i.tags=t.tags,i.scopeList=i.scopeList.concat(t.tags),i.scopePath=i.scopePath.concat(this.templaterState.loopOpen.tag)),new this.currentClass(e,i).render()},e.prototype.forLoop=function(e,t){var i,r,n,o,a,s;return o=e.start,n=this.content.substr(this.lastStart,o-this.lastStart),this.compiled.appendText(n),this.lastStart=e.end,s=this.templaterState.loopOpen.tag,r="",i=function(e){return function(i){var n;return n=e.calcSubXmlTemplater(t,{tags:i}),r+=n.content}}(this),this.scopeManager.loopOver(s,i,this.templaterState.loopIsInverted),a=this.calcSubXmlTemplater(t,{tags:{}}),this.compiled.appendSubTemplate(a.compiled.compiled,s,this.templaterState.loopIsInverted),this.lastStart+=r.length-e.text.length,this.replaceXml(e,r)},e}()},{"./compiledTemplate":5,"./compiledXmlTag":6,"./docUtils":7,"./errors":9,"./moduleManager":10,"./scopeManager":11,"./subContent":12,"./templaterState":13,"./xmlMatcher":14}],16:[function(e,t,i){var r,n;r=e("./docUtils"),n={},n.getListXmlElements=function(e,t,i){var n,o,a,s,l,h,c,d,u,f;for(null==t&&(t=0),null==i&&(i=e.length-1),f=r.pregMatchAll("<(/?[^/> ]+)([^>]*)>",e.substr(t,i)),d=[],n=s=0,c=f.length;c>s;n=++s)u=f[n],"/"===u[1][0]?(l=!1,d.length>0&&(h=d[d.length-1],a=h.tag.substr(1,h.tag.length-2),o=u[1].substr(1),a===o&&(l=!0)),l?d.pop():d.push({tag:"<"+u[1]+">",offset:u.offset})):"/"!==u[2][u[2].length-1]&&d.push({tag:"<"+u[1]+">",offset:u.offset});return d},t.exports=n},{"./docUtils":7}],17:[function(e,t,i){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(e,t){for(var i,n,o,a,s,l,h,c="",d=0;d<e.length;)i=e.charCodeAt(d++),n=e.charCodeAt(d++),o=e.charCodeAt(d++),a=i>>2,s=(3&i)<<4|n>>4,l=(15&n)<<2|o>>6,h=63&o,isNaN(n)?l=h=64:isNaN(o)&&(h=64),c=c+r.charAt(a)+r.charAt(s)+r.charAt(l)+r.charAt(h);return c},i.decode=function(e,t){var i,n,o,a,s,l,h,c="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)a=r.indexOf(e.charAt(d++)),s=r.indexOf(e.charAt(d++)),l=r.indexOf(e.charAt(d++)),h=r.indexOf(e.charAt(d++)),i=a<<2|s>>4,n=(15&s)<<4|l>>2,o=(3&l)<<6|h,c+=String.fromCharCode(i),64!=l&&(c+=String.fromCharCode(n)),64!=h&&(c+=String.fromCharCode(o));return c}},{}],18:[function(e,t,i){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=r},{}],19:[function(e,t,i){"use strict";i.STORE={magic:"\x00\x00",compress:function(e,t){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},i.DEFLATE=e("./flate")},{"./flate":24}],20:[function(e,t,i){"use strict";var r=e("./utils"),n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(e,t){if("undefined"==typeof e||!e.length)return 0;var i="string"!==r.getTypeOf(e);"undefined"==typeof t&&(t=0);var o=0,a=0,s=0;t=-1^t;for(var l=0,h=e.length;h>l;l++)s=i?e[l]:e.charCodeAt(l),a=255&(t^s),o=n[a],t=t>>>8^o;return-1^t}},{"./utils":37}],21:[function(e,t,i){"use strict";function r(e){this.data=null,this.length=0,this.index=0}var n=e("./utils");r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,i=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)i=(i<<8)+this.byteAt(t);return this.index+=e,i},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1)}},t.exports=r},{"./utils":37}],22:[function(e,t,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!1,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],23:[function(e,t,i){"use strict";var r=e("./utils");i.string2binary=function(e){return r.string2binary(e)},i.string2Uint8Array=function(e){return r.transformTo("uint8array",e)},i.uint8Array2String=function(e){return r.transformTo("string",e)},i.string2Blob=function(e){var t=r.transformTo("arraybuffer",e);return r.arrayBuffer2Blob(t)},i.arrayBuffer2Blob=function(e){return r.arrayBuffer2Blob(e)},i.transformTo=function(e,t){return r.transformTo(e,t)},i.getTypeOf=function(e){return r.getTypeOf(e)},i.checkSupport=function(e){return r.checkSupport(e)},i.MAX_VALUE_16BITS=r.MAX_VALUE_16BITS,i.MAX_VALUE_32BITS=r.MAX_VALUE_32BITS,i.pretty=function(e){return r.pretty(e)},i.findCompression=function(e){return r.findCompression(e)},i.isRegExp=function(e){return r.isRegExp(e)}},{"./utils":37}],24:[function(e,t,i){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=e("pako");i.uncompressInputType=r?"uint8array":"array",i.compressInputType=r?"uint8array":"array",i.magic="\b\x00",i.compress=function(e,t){return n.deflateRaw(e,{level:t.level||-1})},i.uncompress=function(e){return n.inflateRaw(e)}},{pako:40}],25:[function(e,t,i){"use strict";function r(e,t){return this instanceof r?(this.files={},this.comment=null,this.root="",e&&this.load(e,t),void(this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e})):new r(e,t)}var n=e("./base64");r.prototype=e("./object"),r.prototype.load=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.utils=e("./deprecatedPublicUtils"),r.base64={encode:function(e){return n.encode(e)},decode:function(e){return n.decode(e)}},r.compressions=e("./compressions"),t.exports=r},{"./base64":17,"./compressions":19,"./defaults":22,"./deprecatedPublicUtils":23,"./load":26,"./object":29,"./support":33}],26:[function(e,t,i){"use strict";var r=e("./base64"),n=e("./zipEntries");t.exports=function(e,t){var i,o,a,s;for(t=t||{},t.base64&&(e=r.decode(e)),o=new n(e,t),i=o.files,a=0;a<i.length;a++)s=i[a],this.file(s.fileName,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileComment.length?s.fileComment:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders});return o.zipComment.length&&(this.comment=o.zipComment),this}},{"./base64":17,"./zipEntries":38}],27:[function(e,t,i){(function(e){"use strict";t.exports=function(t,i){return new e(t,i)},t.exports.test=function(t){return e.isBuffer(t)}}).call(this,e("buffer").Buffer)},{buffer:1}],28:[function(e,t,i){"use strict";function r(e){this.data=e,this.length=this.data.length,this.index=0}var n=e("./uint8ArrayReader");r.prototype=new n,r.prototype.readData=function(e){
this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./uint8ArrayReader":34}],29:[function(e,t,i){"use strict";var r=e("./support"),n=e("./utils"),o=e("./crc32"),a=e("./signature"),s=e("./defaults"),l=e("./base64"),h=e("./compressions"),c=e("./compressedObject"),d=e("./nodeBuffer"),u=e("./utf8"),f=e("./stringWriter"),p=e("./uint8ArrayWriter"),m=function(e){if(e._data instanceof c&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===n.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},g=function(e){var t=m(e),i=n.getTypeOf(t);return"string"===i?!e.options.binary&&r.nodebuffer?d(t,"utf-8"):e.asBinary():t},v=function(e){var t=m(this);return null===t||"undefined"==typeof t?"":(this.options.base64&&(t=l.decode(t)),t=e&&this.options.binary?M.utf8decode(t):n.transformTo("string",t),e||this.options.binary||(t=n.transformTo("string",M.utf8encode(t))),t)},y=function(e,t,i){this.name=e,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this.options=i,this._initialMetadata={dir:i.dir,date:i.date}};y.prototype={asText:function(){return v.call(this,!0)},asBinary:function(){return v.call(this,!1)},asNodeBuffer:function(){var e=g(this);return n.transformTo("nodebuffer",e)},asUint8Array:function(){var e=g(this);return n.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var A=function(e,t){var i,r="";for(i=0;t>i;i++)r+=String.fromCharCode(255&e),e>>>=8;return r},b=function(){var e,t,i={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&"undefined"==typeof i[t]&&(i[t]=arguments[e][t]);return i},E=function(e){return e=e||{},e.base64!==!0||null!==e.binary&&void 0!==e.binary||(e.binary=!0),e=b(e,s),e.date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e},x=function(e,t,i){var r,o=n.getTypeOf(t);if(i=E(i),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(e=T(e)),i.createFolders&&(r=w(e))&&_.call(this,r,!0),i.dir||null===t||"undefined"==typeof t)i.base64=!1,i.binary=!1,t=null,o=null;else if("string"===o)i.binary&&!i.base64&&i.optimizedBinaryString!==!0&&(t=n.string2binary(t));else{if(i.base64=!1,i.binary=!0,!(o||t instanceof c))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===o&&(t=n.transformTo("uint8array",t))}var a=new y(e,t,i);return this.files[e]=a,a},w=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},T=function(e){return"/"!=e.slice(-1)&&(e+="/"),e},_=function(e,t){return t="undefined"!=typeof t?t:!1,e=T(e),this.files[e]||x.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},S=function(e,t,i){var r,a=new c;return e._data instanceof c?(a.uncompressedSize=e._data.uncompressedSize,a.crc32=e._data.crc32,0===a.uncompressedSize||e.dir?(t=h.STORE,a.compressedContent="",a.crc32=0):e._data.compressionMethod===t.magic?a.compressedContent=e._data.getCompressedContent():(r=e._data.getContent(),a.compressedContent=t.compress(n.transformTo(t.compressInputType,r),i))):(r=g(e),r&&0!==r.length&&!e.dir||(t=h.STORE,r=""),a.uncompressedSize=r.length,a.crc32=o(r),a.compressedContent=t.compress(n.transformTo(t.compressInputType,r),i)),a.compressedSize=a.compressedContent.length,a.compressionMethod=t.magic,a},C=function(e,t){var i=e;return e||(i=t?16893:33204),(65535&i)<<16},R=function(e,t){return 63&(e||0)},k=function(e,t,i,r,s){var l,h,c,d,f=(i.compressedContent,n.transformTo("string",u.utf8encode(t.name))),p=t.comment||"",m=n.transformTo("string",u.utf8encode(p)),g=f.length!==t.name.length,v=m.length!==p.length,y=t.options,b="",E="",x="";c=t._initialMetadata.dir!==t.dir?t.dir:y.dir,d=t._initialMetadata.date!==t.date?t.date:y.date;var w=0,T=0;c&&(w|=16),"UNIX"===s?(T=798,w|=C(t.unixPermissions,c)):(T=20,w|=R(t.dosPermissions,c)),l=d.getHours(),l<<=6,l|=d.getMinutes(),l<<=5,l|=d.getSeconds()/2,h=d.getFullYear()-1980,h<<=4,h|=d.getMonth()+1,h<<=5,h|=d.getDate(),g&&(E=A(1,1)+A(o(f),4)+f,b+="up"+A(E.length,2)+E),v&&(x=A(1,1)+A(this.crc32(m),4)+m,b+="uc"+A(x.length,2)+x);var _="";_+="\n\x00",_+=g||v?"\x00\b":"\x00\x00",_+=i.compressionMethod,_+=A(l,2),_+=A(h,2),_+=A(i.crc32,4),_+=A(i.compressedSize,4),_+=A(i.uncompressedSize,4),_+=A(f.length,2),_+=A(b.length,2);var S=a.LOCAL_FILE_HEADER+_+f+b,k=a.CENTRAL_FILE_HEADER+A(T,2)+_+A(m.length,2)+"\x00\x00\x00\x00"+A(w,4)+A(r,4)+f+b+m;return{fileRecord:S,dirRecord:k,compressedObject:i}},M={load:function(e,t){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,i,r,n,o=[];for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],n=new y(r.name,r._data,b(r.options)),i=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(i,n)&&o.push(n));return o},file:function(e,t,i){if(1===arguments.length){if(n.isRegExp(e)){var r=e;return this.filter(function(e,t){return!t.dir&&r.test(e)})}return this.filter(function(t,i){return!i.dir&&t===e})[0]||null}return e=this.root+e,x.call(this,e,t,i),this},folder:function(e){if(!e)return this;if(n.isRegExp(e))return this.filter(function(t,i){return i.dir&&e.test(t)});var t=this.root+e,i=_.call(this,t),r=this.clone();return r.root=i.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var i=this.filter(function(t,i){return i.name.slice(0,e.length)===e}),r=0;r<i.length;r++)delete this.files[i[r].name];return this},generate:function(e){e=b(e||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),n.checkSupport(e.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var t,i,r=[],o=0,s=0,c=n.transformTo("string",this.utf8encode(e.comment||this.comment||""));for(var d in this.files)if(this.files.hasOwnProperty(d)){var u=this.files[d],m=u.options.compression||e.compression.toUpperCase(),g=h[m];if(!g)throw new Error(m+" is not a valid compression method !");var v=u.options.compressionOptions||e.compressionOptions||{},y=S.call(this,u,g,v),E=k.call(this,d,u,y,o,e.platform);o+=E.fileRecord.length+y.compressedSize,s+=E.dirRecord.length,r.push(E)}var x="";x=a.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+A(r.length,2)+A(r.length,2)+A(s,4)+A(o,4)+A(c.length,2)+c;var w=e.type.toLowerCase();for(t="uint8array"===w||"arraybuffer"===w||"blob"===w||"nodebuffer"===w?new p(o+s+x.length):new f(o+s+x.length),i=0;i<r.length;i++)t.append(r[i].fileRecord),t.append(r[i].compressedObject.compressedContent);for(i=0;i<r.length;i++)t.append(r[i].dirRecord);t.append(x);var T=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return n.transformTo(e.type.toLowerCase(),T);case"blob":return n.arrayBuffer2Blob(n.transformTo("arraybuffer",T),e.mimeType);case"base64":return e.base64?l.encode(T):T;default:return T}},crc32:function(e,t){return o(e,t)},utf8encode:function(e){return n.transformTo("string",u.utf8encode(e))},utf8decode:function(e){return u.utf8decode(e)}};t.exports=M},{"./base64":17,"./compressedObject":18,"./compressions":19,"./crc32":20,"./defaults":22,"./nodeBuffer":27,"./signature":30,"./stringWriter":32,"./support":33,"./uint8ArrayWriter":35,"./utf8":36,"./utils":37}],30:[function(e,t,i){"use strict";i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],31:[function(e,t,i){"use strict";function r(e,t){this.data=e,t||(this.data=o.string2binary(this.data)),this.length=this.data.length,this.index=0}var n=e("./dataReader"),o=e("./utils");r.prototype=new n,r.prototype.byteAt=function(e){return this.data.charCodeAt(e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./dataReader":21,"./utils":37}],32:[function(e,t,i){"use strict";var r=e("./utils"),n=function(){this.data=[]};n.prototype={append:function(e){e=r.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},t.exports=n},{"./utils":37}],33:[function(e,t,i){(function(e){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof e,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var t=new ArrayBuffer(0);try{i.blob=0===new Blob([t],{type:"application/zip"}).size}catch(r){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new n;o.append(t),i.blob=0===o.getBlob("application/zip").size}catch(r){i.blob=!1}}}}).call(this,e("buffer").Buffer)},{buffer:1}],34:[function(e,t,i){"use strict";function r(e){e&&(this.data=e,this.length=this.data.length,this.index=0)}var n=e("./dataReader");r.prototype=new n,r.prototype.byteAt=function(e){return this.data[e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),i=e.charCodeAt(1),r=e.charCodeAt(2),n=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===i&&this.data[o+2]===r&&this.data[o+3]===n)return o;return-1},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./dataReader":21}],35:[function(e,t,i){"use strict";var r=e("./utils"),n=function(e){this.data=new Uint8Array(e),this.index=0};n.prototype={append:function(e){0!==e.length&&(e=r.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},t.exports=n},{"./utils":37}],36:[function(e,t,i){"use strict";for(var r=e("./utils"),n=e("./support"),o=e("./nodeBuffer"),a=new Array(256),s=0;256>s;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;a[254]=a[254]=1;var l=function(e){var t,i,r,o,a,s=e.length,l=0;for(o=0;s>o;o++)i=e.charCodeAt(o),55296===(64512&i)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),o++)),l+=128>i?1:2048>i?2:65536>i?3:4;for(t=n.uint8array?new Uint8Array(l):new Array(l),a=0,o=0;l>a;o++)i=e.charCodeAt(o),55296===(64512&i)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),o++)),128>i?t[a++]=i:2048>i?(t[a++]=192|i>>>6,t[a++]=128|63&i):65536>i?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t},h=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;i>=0&&128===(192&e[i]);)i--;return 0>i?t:0===i?t:i+a[e[i]]>t?i:t},c=function(e){var t,i,n,o,s=e.length,l=new Array(2*s);for(i=0,t=0;s>t;)if(n=e[t++],128>n)l[i++]=n;else if(o=a[n],o>4)l[i++]=65533,t+=o-1;else{for(n&=2===o?31:3===o?15:7;o>1&&s>t;)n=n<<6|63&e[t++],o--;o>1?l[i++]=65533:65536>n?l[i++]=n:(n-=65536,l[i++]=55296|n>>10&1023,l[i++]=56320|1023&n)}return l.length!==i&&(l.subarray?l=l.subarray(0,i):l.length=i),r.applyFromCharCode(l)};i.utf8encode=function(e){return n.nodebuffer?o(e,"utf-8"):l(e)},i.utf8decode=function(e){if(n.nodebuffer)return r.transformTo("nodebuffer",e).toString("utf-8");e=r.transformTo(n.uint8array?"uint8array":"array",e);for(var t=[],i=0,o=e.length,a=65536;o>i;){var s=h(e,Math.min(i+a,o));n.uint8array?t.push(c(e.subarray(i,s))):t.push(c(e.slice(i,s))),i=s}return t.join("")}},{"./nodeBuffer":27,"./support":33,"./utils":37}],37:[function(e,t,i){"use strict";function r(e){return e}function n(e,t){for(var i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t}function o(e){var t=65536,r=[],n=e.length,o=i.getTypeOf(e),a=0,s=!0;try{switch(o){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,h(0))}}catch(l){s=!1}if(!s){for(var c="",d=0;d<e.length;d++)c+=String.fromCharCode(e[d]);return c}for(;n>a&&t>1;)try{"array"===o||"nodebuffer"===o?r.push(String.fromCharCode.apply(null,e.slice(a,Math.min(a+t,n)))):r.push(String.fromCharCode.apply(null,e.subarray(a,Math.min(a+t,n)))),a+=t}catch(l){t=Math.floor(t/2)}return r.join("")}function a(e,t){for(var i=0;i<e.length;i++)t[i]=e[i];return t}var s=e("./support"),l=e("./compressions"),h=e("./nodeBuffer");i.string2binary=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(255&e.charCodeAt(i));return t},i.arrayBuffer2Blob=function(e,t){i.checkSupport("blob"),t=t||"application/zip";try{return new Blob([e],{type:t})}catch(r){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new n;return o.append(e),o.getBlob(t)}catch(r){throw new Error("Bug : can't construct the Blob.")}}},i.applyFromCharCode=o;var c={};c.string={string:r,array:function(e){return n(e,new Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return n(e,new Uint8Array(e.length))},nodebuffer:function(e){return n(e,h(e.length))}},c.array={string:o,array:r,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return h(e)}},c.arraybuffer={string:function(e){return o(new Uint8Array(e))},array:function(e){return a(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:r,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return h(new Uint8Array(e))}},c.uint8array={string:o,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:r,nodebuffer:function(e){return h(e)}},c.nodebuffer={string:o,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return a(e,new Uint8Array(e.length))},nodebuffer:r},i.transformTo=function(e,t){if(t||(t=""),!e)return t;i.checkSupport(e);var r=i.getTypeOf(t),n=c[r][e](t);return n},i.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":s.nodebuffer&&h.test(e)?"nodebuffer":s.uint8array&&e instanceof Uint8Array?"uint8array":s.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(e){var t=s[e.toLowerCase()];if(!t)throw new Error(e+" is not supported by this browser")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(e){var t,i,r="";for(i=0;i<(e||"").length;i++)t=e.charCodeAt(i),r+="\\x"+(16>t?"0":"")+t.toString(16).toUpperCase();return r},i.findCompression=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null},i.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{"./compressions":19,"./nodeBuffer":27,"./support":33}],38:[function(e,t,i){"use strict";function r(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}var n=e("./stringReader"),o=e("./nodeBufferReader"),a=e("./uint8ArrayReader"),s=e("./utils"),l=e("./signature"),h=e("./zipEntry"),c=e("./support"),d=e("./object");r.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+s.pretty(t)+", expected "+s.pretty(e)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=d.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,i,r=this.zip64EndOfCentralSize-44,n=0;r>n;)e=this.reader.readInt(2),t=this.reader.readInt(4),i=this.reader.readString(t),this.zip64ExtensibleData[e]={id:e,length:t,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===l.CENTRAL_FILE_HEADER;)e=new h({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(-1===e){var t=!0;try{this.reader.setIndex(0),this.checkSignature(l.LOCAL_FILE_HEADER),t=!1}catch(i){}throw t?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(e),this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===e)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(e),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(e){var t=s.getTypeOf(e);"string"!==t||c.uint8array?"nodebuffer"===t?this.reader=new o(e):this.reader=new a(s.transformTo("uint8array",e)):this.reader=new n(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=r},{"./nodeBufferReader":28,"./object":29,"./signature":30,"./stringReader":31,"./support":33,"./uint8ArrayReader":34,"./utils":37,"./zipEntry":39}],39:[function(e,t,i){"use strict";function r(e,t){this.options=e,this.loadOptions=t}var n=e("./stringReader"),o=e("./utils"),a=e("./compressedObject"),s=e("./object"),l=0,h=3;r.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(e,t,i){return function(){var r=e.index;e.setIndex(t);var n=e.readData(i);return e.setIndex(r),n}},prepareContent:function(e,t,i,r,n){return function(){var e=o.transformTo(r.uncompressInputType,this.getCompressedContent()),t=r.uncompress(e);if(t.length!==n)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,i;if(e.skip(22),this.fileNameLength=e.readInt(2),i=e.readInt(2),this.fileName=e.readString(this.fileNameLength),e.skip(i),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(t=o.findCompression(this.compressionMethod),null===t)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=o.transformTo("string",this.decompressed.getContent()),s.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readInt(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readString(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),e===l&&(this.dosPermissions=63&this.externalFileAttributes),e===h&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=new n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,i,r,n=e.index;for(this.extraFields=this.extraFields||{};e.index<n+this.extraFieldsLength;)t=e.readInt(2),i=e.readInt(2),r=e.readString(i),this.extraFields[t]={id:t,length:i,value:r}},handleUTF8:function(){if(this.useUTF8())this.fileName=s.utf8decode(this.fileName),this.fileComment=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();null!==e&&(this.fileName=e);var t=this.findExtraFieldUnicodeComment();null!==t&&(this.fileComment=t)}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new n(e.value);return 1!==t.readInt(1)?null:s.crc32(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new n(e.value);return 1!==t.readInt(1)?null:s.crc32(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readString(e.length-5))}return null}},t.exports=r},{"./compressedObject":18,"./object":29,"./stringReader":31,"./utils":37}],40:[function(e,t,i){"use strict";var r=e("./lib/utils/common").assign,n=e("./lib/deflate"),o=e("./lib/inflate"),a=e("./lib/zlib/constants"),s={};r(s,n,o,a),t.exports=s},{"./lib/deflate":41,"./lib/inflate":42,"./lib/utils/common":43,"./lib/zlib/constants":46}],41:[function(e,t,i){"use strict";function r(e,t){var i=new b(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}function n(e,t){return t=t||{},t.raw=!0,r(e,t)}function o(e,t){return t=t||{},t.gzip=!0,r(e,t)}var a=e("./zlib/deflate.js"),s=e("./utils/common"),l=e("./utils/strings"),h=e("./zlib/messages"),c=e("./zlib/zstream"),d=Object.prototype.toString,u=0,f=4,p=0,m=1,g=2,v=-1,y=0,A=8,b=function(e){this.options=s.assign({level:v,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==p)throw new Error(h[i]);t.header&&a.deflateSetHeader(this.strm,t.header)};b.prototype.push=function(e,t){var i,r,n=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?f:u,"string"==typeof e?n.input=l.string2buf(e):"[object ArrayBuffer]"===d.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new s.Buf8(o),n.next_out=0,n.avail_out=o),i=a.deflate(n,r),i!==m&&i!==p)return this.onEnd(i),this.ended=!0,!1;0!==n.avail_out&&(0!==n.avail_in||r!==f&&r!==g)||("string"===this.options.to?this.onData(l.buf2binstring(s.shrinkBuf(n.output,n.next_out))):this.onData(s.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||0===n.avail_out)&&i!==m);return r===f?(i=a.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===p):r===g?(this.onEnd(p),n.avail_out=0,!0):!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=b,i.deflate=r,i.deflateRaw=n,i.gzip=o},{"./utils/common":43,"./utils/strings":44,"./zlib/deflate.js":48,"./zlib/messages":53,"./zlib/zstream":55}],42:[function(e,t,i){"use strict";function r(e,t){var i=new f(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}function n(e,t){return t=t||{},t.raw=!0,r(e,t)}var o=e("./zlib/inflate.js"),a=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/constants"),h=e("./zlib/messages"),c=e("./zlib/zstream"),d=e("./zlib/gzheader"),u=Object.prototype.toString,f=function(e){this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=o.inflateInit2(this.strm,t.windowBits);if(i!==l.Z_OK)throw new Error(h[i]);this.header=new d,o.inflateGetHeader(this.strm,this.header)};f.prototype.push=function(e,t){var i,r,n,h,c,d=this.strm,f=this.options.chunkSize,p=!1;if(this.ended)return!1;r=t===~~t?t:t===!0?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?d.input=s.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new a.Buf8(f),d.next_out=0,d.avail_out=f),i=o.inflate(d,l.Z_NO_FLUSH),i===l.Z_BUF_ERROR&&p===!0&&(i=l.Z_OK,p=!1),i!==l.Z_STREAM_END&&i!==l.Z_OK)return this.onEnd(i),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&i!==l.Z_STREAM_END&&(0!==d.avail_in||r!==l.Z_FINISH&&r!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(n=s.utf8border(d.output,d.next_out),h=d.next_out-n,c=s.buf2string(d.output,n),d.next_out=h,d.avail_out=f-h,h&&a.arraySet(d.output,d.output,n,h,0),this.onData(c)):this.onData(a.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(p=!0)}while((d.avail_in>0||0===d.avail_out)&&i!==l.Z_STREAM_END);return i===l.Z_STREAM_END&&(r=l.Z_FINISH),r===l.Z_FINISH?(i=o.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===l.Z_OK):r===l.Z_SYNC_FLUSH?(this.onEnd(l.Z_OK),d.avail_out=0,!0):!0},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=f,i.inflate=r,i.inflateRaw=n,i.ungzip=r},{"./utils/common":43,"./utils/strings":44,"./zlib/constants":46,"./zlib/gzheader":49,"./zlib/inflate.js":51,"./zlib/messages":53,"./zlib/zstream":55}],43:[function(e,t,i){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,i,r,n){if(t.subarray&&e.subarray)return void e.set(t.subarray(i,i+r),n);for(var o=0;r>o;o++)e[n+o]=t[i+o]},flattenChunks:function(e){var t,i,r,n,o,a;for(r=0,t=0,i=e.length;i>t;t++)r+=e[t].length;for(a=new Uint8Array(r),n=0,t=0,i=e.length;i>t;t++)o=e[t],a.set(o,n),n+=o.length;return a}},o={arraySet:function(e,t,i,r,n){for(var o=0;r>o;o++)e[n+o]=t[i+o]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(r)},{}],44:[function(e,t,i){"use strict";function r(e,t){if(65537>t&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var i="",r=0;t>r;r++)i+=String.fromCharCode(e[r]);return i}var n=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(s){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){a=!1}for(var l=new n.Buf8(256),h=0;256>h;h++)l[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;l[254]=l[254]=1,i.string2buf=function(e){var t,i,r,o,a,s=e.length,l=0;for(o=0;s>o;o++)i=e.charCodeAt(o),55296===(64512&i)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),o++)),l+=128>i?1:2048>i?2:65536>i?3:4;for(t=new n.Buf8(l),a=0,o=0;l>a;o++)i=e.charCodeAt(o),55296===(64512&i)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),o++)),128>i?t[a++]=i:2048>i?(t[a++]=192|i>>>6,t[a++]=128|63&i):65536>i?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t},i.buf2binstring=function(e){return r(e,e.length)},i.binstring2buf=function(e){for(var t=new n.Buf8(e.length),i=0,r=t.length;r>i;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,n,o,a,s=t||e.length,h=new Array(2*s);for(n=0,i=0;s>i;)if(o=e[i++],128>o)h[n++]=o;else if(a=l[o],a>4)h[n++]=65533,i+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&s>i;)o=o<<6|63&e[i++],a--;a>1?h[n++]=65533:65536>o?h[n++]=o:(o-=65536,h[n++]=55296|o>>10&1023,h[n++]=56320|1023&o)}return r(h,n)},i.utf8border=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;i>=0&&128===(192&e[i]);)i--;return 0>i?t:0===i?t:i+l[e[i]]>t?i:t}},{"./common":43}],45:[function(e,t,i){"use strict";function r(e,t,i,r){for(var n=65535&e|0,o=e>>>16&65535|0,a=0;0!==i;){a=i>2e3?2e3:i,i-=a;do n=n+t[r++]|0,o=o+n|0;while(--a);n%=65521,o%=65521}return n|o<<16|0}t.exports=r},{}],46:[function(e,t,i){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],47:[function(e,t,i){"use strict";function r(){for(var e,t=[],i=0;256>i;i++){
e=i;for(var r=0;8>r;r++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}function n(e,t,i,r){var n=o,a=r+i;e=-1^e;for(var s=r;a>s;s++)e=e>>>8^n[255&(e^t[s])];return-1^e}var o=r();t.exports=n},{}],48:[function(e,t,i){"use strict";function r(e,t){return e.msg=D[t],t}function n(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(R.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function s(e,t){k._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function h(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,i,r){var n=e.avail_in;return n>r&&(n=r),0===n?0:(e.avail_in-=n,R.arraySet(t,e.input,e.next_in,n,i),1===e.state.wrap?e.adler=M(e.adler,t,n,i):2===e.state.wrap&&(e.adler=P(e.adler,t,n,i)),e.next_in+=n,e.total_in+=n,n)}function d(e,t){var i,r,n=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-he?e.strstart-(e.w_size-he):0,h=e.window,c=e.w_mask,d=e.prev,u=e.strstart+le,f=h[o+a-1],p=h[o+a];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,h[i+a]===p&&h[i+a-1]===f&&h[i]===h[o]&&h[++i]===h[o+1]){o+=2,i++;do;while(h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&u>o);if(r=le-(u-o),o=u-le,r>a){if(e.match_start=t,a=r,r>=s)break;f=h[o+a-1],p=h[o+a]}}while((t=d[t&c])>l&&0!==--n);return a<=e.lookahead?a:e.lookahead}function u(e){var t,i,r,n,o,a=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-he)){R.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,i=e.hash_size,t=i;do r=e.head[--t],e.head[t]=r>=a?r-a:0;while(--i);i=a,t=i;do r=e.prev[--t],e.prev[t]=r>=a?r-a:0;while(--i);n+=a}if(0===e.strm.avail_in)break;if(i=c(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=i,e.lookahead+e.insert>=se)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+se-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<se)););}while(e.lookahead<he&&0!==e.strm.avail_in)}function f(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(u(e),0===e.lookahead&&t===H)return ye;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+i;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return ye;if(e.strstart-e.block_start>=e.w_size-he&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===I?(s(e,!0),0===e.strm.avail_out?be:Ee):e.strstart>e.block_start&&(s(e,!1),0===e.strm.avail_out)?ye:ye}function p(e,t){for(var i,r;;){if(e.lookahead<he){if(u(e),e.lookahead<he&&t===H)return ye;if(0===e.lookahead)break}if(i=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-he&&(e.match_length=d(e,i)),e.match_length>=se)if(r=k._tr_tally(e,e.strstart-e.match_start,e.match_length-se),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=e.strstart<se-1?e.strstart:se-1,t===I?(s(e,!0),0===e.strm.avail_out?be:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:Ae}function m(e,t){for(var i,r,n;;){if(e.lookahead<he){if(u(e),e.lookahead<he&&t===H)return ye;if(0===e.lookahead)break}if(i=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=se-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-he&&(e.match_length=d(e,i),e.match_length<=5&&(e.strategy===G||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),e.prev_length>=se&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-se,r=k._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-se),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=se-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return ye}else if(e.match_available){if(r=k._tr_tally(e,0,e.window[e.strstart-1]),r&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ye}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=k._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===I?(s(e,!0),0===e.strm.avail_out?be:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:Ae}function g(e,t){for(var i,r,n,o,a=e.window;;){if(e.lookahead<=le){if(u(e),e.lookahead<=le&&t===H)return ye;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=se&&e.strstart>0&&(n=e.strstart-1,r=a[n],r===a[++n]&&r===a[++n]&&r===a[++n])){o=e.strstart+le;do;while(r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&o>n);e.match_length=le-(o-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=se?(i=k._tr_tally(e,1,e.match_length-se),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===I?(s(e,!0),0===e.strm.avail_out?be:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:Ae}function v(e,t){for(var i;;){if(0===e.lookahead&&(u(e),0===e.lookahead)){if(t===H)return ye;break}if(e.match_length=0,i=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===I?(s(e,!0),0===e.strm.avail_out?be:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:Ae}function y(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=C[e.level].max_lazy,e.good_match=C[e.level].good_length,e.nice_match=C[e.level].nice_length,e.max_chain_length=C[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,e.match_available=0,e.ins_h=0}function A(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new R.Buf16(2*oe),this.dyn_dtree=new R.Buf16(2*(2*re+1)),this.bl_tree=new R.Buf16(2*(2*ne+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new R.Buf16(ae+1),this.heap=new R.Buf16(2*ie+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new R.Buf16(2*ie+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Q,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?de:ge,e.adler=2===t.wrap?0:1,t.last_flush=H,k._tr_init(t),N):r(e,z)}function E(e){var t=b(e);return t===N&&y(e.state),t}function x(e,t){return e&&e.state?2!==e.state.wrap?z:(e.state.gzhead=t,N):z}function w(e,t,i,n,o,a){if(!e)return z;var s=1;if(t===V&&(t=6),0>n?(s=0,n=-n):n>15&&(s=2,n-=16),1>o||o>K||i!==Z||8>n||n>15||0>t||t>9||0>a||a>q)return r(e,z);8===n&&(n=9);var l=new A;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+se-1)/se),l.window=new R.Buf8(2*l.w_size),l.head=new R.Buf16(l.hash_size),l.prev=new R.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new R.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=i,E(e)}function T(e,t){return w(e,t,Z,J,$,X)}function _(e,t){var i,s,c,d;if(!e||!e.state||t>B||0>t)return e?r(e,z):z;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===ve&&t!==I)return r(e,0===e.avail_out?j:z);if(s.strm=e,i=s.last_flush,s.last_flush=t,s.status===de)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=P(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=ue):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),l(s,xe),s.status=ge);else{var u=Z+(s.w_bits-8<<4)<<8,f=-1;f=s.strategy>=W||s.level<2?0:s.level<6?1:6===s.level?2:3,u|=f<<6,0!==s.strstart&&(u|=ce),u+=31-u%31,s.status=ge,h(s,u),0!==s.strstart&&(h(s,e.adler>>>16),h(s,65535&e.adler)),e.adler=1}if(s.status===ue)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=fe)}else s.status=fe;if(s.status===fe)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),0===d&&(s.gzindex=0,s.status=pe)}else s.status=pe;if(s.status===pe)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),0===d&&(s.status=me)}else s.status=me;if(s.status===me&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=ge)):s.status=ge),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,N}else if(0===e.avail_in&&n(t)<=n(i)&&t!==I)return r(e,j);if(s.status===ve&&0!==e.avail_in)return r(e,j);if(0!==e.avail_in||0!==s.lookahead||t!==H&&s.status!==ve){var p=s.strategy===W?v(s,t):s.strategy===Y?g(s,t):C[s.level].func(s,t);if(p!==be&&p!==Ee||(s.status=ve),p===ye||p===be)return 0===e.avail_out&&(s.last_flush=-1),N;if(p===Ae&&(t===O?k._tr_align(s):t!==B&&(k._tr_stored_block(s,0,0,!1),t===L&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,N}return t!==I?N:s.wrap<=0?F:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(h(s,e.adler>>>16),h(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?N:F)}function S(e){var t;return e&&e.state?(t=e.state.status,t!==de&&t!==ue&&t!==fe&&t!==pe&&t!==me&&t!==ge&&t!==ve?r(e,z):(e.state=null,t===ge?r(e,U):N)):z}var C,R=e("../utils/common"),k=e("./trees"),M=e("./adler32"),P=e("./crc32"),D=e("./messages"),H=0,O=1,L=3,I=4,B=5,N=0,F=1,z=-2,U=-3,j=-5,V=-1,G=1,W=2,Y=3,q=4,X=0,Q=2,Z=8,K=9,J=15,$=8,ee=29,te=256,ie=te+1+ee,re=30,ne=19,oe=2*ie+1,ae=15,se=3,le=258,he=le+se+1,ce=32,de=42,ue=69,fe=73,pe=91,me=103,ge=113,ve=666,ye=1,Ae=2,be=3,Ee=4,xe=3,we=function(e,t,i,r,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=r,this.func=n};C=[new we(0,0,0,0,f),new we(4,4,8,4,p),new we(4,5,16,8,p),new we(4,6,32,32,p),new we(4,4,16,16,m),new we(8,16,32,32,m),new we(8,16,128,128,m),new we(8,32,128,256,m),new we(32,128,258,1024,m),new we(32,258,258,4096,m)],i.deflateInit=T,i.deflateInit2=w,i.deflateReset=E,i.deflateResetKeep=b,i.deflateSetHeader=x,i.deflate=_,i.deflateEnd=S,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":43,"./adler32":45,"./crc32":47,"./messages":53,"./trees":54}],49:[function(e,t,i){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=r},{}],50:[function(e,t,i){"use strict";var r=30,n=12;t.exports=function(e,t){var i,o,a,s,l,h,c,d,u,f,p,m,g,v,y,A,b,E,x,w,T,_,S,C,R;i=e.state,o=e.next_in,C=e.input,a=o+(e.avail_in-5),s=e.next_out,R=e.output,l=s-(t-e.avail_out),h=s+(e.avail_out-257),c=i.dmax,d=i.wsize,u=i.whave,f=i.wnext,p=i.window,m=i.hold,g=i.bits,v=i.lencode,y=i.distcode,A=(1<<i.lenbits)-1,b=(1<<i.distbits)-1;e:do{15>g&&(m+=C[o++]<<g,g+=8,m+=C[o++]<<g,g+=8),E=v[m&A];t:for(;;){if(x=E>>>24,m>>>=x,g-=x,x=E>>>16&255,0===x)R[s++]=65535&E;else{if(!(16&x)){if(0===(64&x)){E=v[(65535&E)+(m&(1<<x)-1)];continue t}if(32&x){i.mode=n;break e}e.msg="invalid literal/length code",i.mode=r;break e}w=65535&E,x&=15,x&&(x>g&&(m+=C[o++]<<g,g+=8),w+=m&(1<<x)-1,m>>>=x,g-=x),15>g&&(m+=C[o++]<<g,g+=8,m+=C[o++]<<g,g+=8),E=y[m&b];i:for(;;){if(x=E>>>24,m>>>=x,g-=x,x=E>>>16&255,!(16&x)){if(0===(64&x)){E=y[(65535&E)+(m&(1<<x)-1)];continue i}e.msg="invalid distance code",i.mode=r;break e}if(T=65535&E,x&=15,x>g&&(m+=C[o++]<<g,g+=8,x>g&&(m+=C[o++]<<g,g+=8)),T+=m&(1<<x)-1,T>c){e.msg="invalid distance too far back",i.mode=r;break e}if(m>>>=x,g-=x,x=s-l,T>x){if(x=T-x,x>u&&i.sane){e.msg="invalid distance too far back",i.mode=r;break e}if(_=0,S=p,0===f){if(_+=d-x,w>x){w-=x;do R[s++]=p[_++];while(--x);_=s-T,S=R}}else if(x>f){if(_+=d+f-x,x-=f,w>x){w-=x;do R[s++]=p[_++];while(--x);if(_=0,w>f){x=f,w-=x;do R[s++]=p[_++];while(--x);_=s-T,S=R}}}else if(_+=f-x,w>x){w-=x;do R[s++]=p[_++];while(--x);_=s-T,S=R}for(;w>2;)R[s++]=S[_++],R[s++]=S[_++],R[s++]=S[_++],w-=3;w&&(R[s++]=S[_++],w>1&&(R[s++]=S[_++]))}else{_=s-T;do R[s++]=R[_++],R[s++]=R[_++],R[s++]=R[_++],w-=3;while(w>2);w&&(R[s++]=R[_++],w>1&&(R[s++]=R[_++]))}break}}break}}while(a>o&&h>s);w=g>>3,o-=w,g-=w<<3,m&=(1<<g)-1,e.next_in=o,e.next_out=s,e.avail_in=a>o?5+(a-o):5-(o-a),e.avail_out=h>s?257+(h-s):257-(s-h),i.hold=m,i.bits=g}},{}],51:[function(e,t,i){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=I,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new v.Buf32(pe),t.distcode=t.distdyn=new v.Buf32(me),t.sane=1,t.back=-1,R):P}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):P}function s(e,t){var i,r;return e&&e.state?(r=e.state,0>t?(i=0,t=-t):(i=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?P:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=i,r.wbits=t,a(e))):P}function l(e,t){var i,r;return e?(r=new n,e.state=r,r.window=null,i=s(e,t),i!==R&&(e.state=null),i):P}function h(e){return l(e,ve)}function c(e){if(ye){var t;for(m=new v.Buf32(512),g=new v.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(E(w,e.lens,0,288,m,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;E(T,e.lens,0,32,g,0,e.work,{bits:5}),ye=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function d(e,t,i,r){var n,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new v.Buf8(o.wsize)),r>=o.wsize?(v.arraySet(o.window,t,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(n=o.wsize-o.wnext,n>r&&(n=r),v.arraySet(o.window,t,i-r,n,o.wnext),r-=n,r?(v.arraySet(o.window,t,i-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=n,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=n))),0}function u(e,t){var i,n,o,a,s,l,h,u,f,p,m,g,pe,me,ge,ve,ye,Ae,be,Ee,xe,we,Te,_e,Se=0,Ce=new v.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return P;i=e.state,i.mode===q&&(i.mode=X),s=e.next_out,o=e.output,h=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,u=i.hold,f=i.bits,p=l,m=h,we=R;e:for(;;)switch(i.mode){case I:if(0===i.wrap){i.mode=X;break}for(;16>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(2&i.wrap&&35615===u){i.check=0,Ce[0]=255&u,Ce[1]=u>>>8&255,i.check=A(i.check,Ce,2,0),u=0,f=0,i.mode=B;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",i.mode=de;break}if((15&u)!==L){e.msg="unknown compression method",i.mode=de;break}if(u>>>=4,f-=4,xe=(15&u)+8,0===i.wbits)i.wbits=xe;else if(xe>i.wbits){e.msg="invalid window size",i.mode=de;break}i.dmax=1<<xe,e.adler=i.check=1,i.mode=512&u?W:q,u=0,f=0;break;case B:for(;16>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(i.flags=u,(255&i.flags)!==L){e.msg="unknown compression method",i.mode=de;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=de;break}i.head&&(i.head.text=u>>8&1),512&i.flags&&(Ce[0]=255&u,Ce[1]=u>>>8&255,i.check=A(i.check,Ce,2,0)),u=0,f=0,i.mode=N;case N:for(;32>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.head&&(i.head.time=u),512&i.flags&&(Ce[0]=255&u,Ce[1]=u>>>8&255,Ce[2]=u>>>16&255,Ce[3]=u>>>24&255,i.check=A(i.check,Ce,4,0)),u=0,f=0,i.mode=F;case F:for(;16>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.head&&(i.head.xflags=255&u,i.head.os=u>>8),512&i.flags&&(Ce[0]=255&u,Ce[1]=u>>>8&255,i.check=A(i.check,Ce,2,0)),u=0,f=0,i.mode=z;case z:if(1024&i.flags){for(;16>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.length=u,i.head&&(i.head.extra_len=u),512&i.flags&&(Ce[0]=255&u,Ce[1]=u>>>8&255,i.check=A(i.check,Ce,2,0)),u=0,f=0}else i.head&&(i.head.extra=null);i.mode=U;case U:if(1024&i.flags&&(g=i.length,g>l&&(g=l),g&&(i.head&&(xe=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),v.arraySet(i.head.extra,n,a,g,xe)),512&i.flags&&(i.check=A(i.check,n,g,a)),l-=g,a+=g,i.length-=g),i.length))break e;i.length=0,i.mode=j;case j:if(2048&i.flags){if(0===l)break e;g=0;do xe=n[a+g++],i.head&&xe&&i.length<65536&&(i.head.name+=String.fromCharCode(xe));while(xe&&l>g);if(512&i.flags&&(i.check=A(i.check,n,g,a)),l-=g,a+=g,xe)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=V;case V:if(4096&i.flags){if(0===l)break e;g=0;do xe=n[a+g++],i.head&&xe&&i.length<65536&&(i.head.comment+=String.fromCharCode(xe));while(xe&&l>g);if(512&i.flags&&(i.check=A(i.check,n,g,a)),l-=g,a+=g,xe)break e}else i.head&&(i.head.comment=null);i.mode=G;case G:if(512&i.flags){for(;16>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(u!==(65535&i.check)){e.msg="header crc mismatch",i.mode=de;break}u=0,f=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=q;break;case W:for(;32>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}e.adler=i.check=r(u),u=0,f=0,i.mode=Y;case Y:if(0===i.havedict)return e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,i.hold=u,i.bits=f,M;e.adler=i.check=1,i.mode=q;case q:if(t===S||t===C)break e;case X:if(i.last){u>>>=7&f,f-=7&f,i.mode=le;break}for(;3>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}switch(i.last=1&u,u>>>=1,f-=1,3&u){case 0:i.mode=Q;break;case 1:if(c(i),i.mode=te,t===C){u>>>=2,f-=2;break e}break;case 2:i.mode=J;break;case 3:e.msg="invalid block type",i.mode=de}u>>>=2,f-=2;break;case Q:for(u>>>=7&f,f-=7&f;32>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if((65535&u)!==(u>>>16^65535)){e.msg="invalid stored block lengths",i.mode=de;break}if(i.length=65535&u,u=0,f=0,i.mode=Z,t===C)break e;case Z:i.mode=K;case K:if(g=i.length){if(g>l&&(g=l),g>h&&(g=h),0===g)break e;v.arraySet(o,n,a,g,s),l-=g,a+=g,h-=g,s+=g,i.length-=g;break}i.mode=q;break;case J:for(;14>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(i.nlen=(31&u)+257,u>>>=5,f-=5,i.ndist=(31&u)+1,u>>>=5,f-=5,i.ncode=(15&u)+4,u>>>=4,f-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=de;break}i.have=0,i.mode=$;case $:for(;i.have<i.ncode;){for(;3>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.lens[Re[i.have++]]=7&u,u>>>=3,f-=3}for(;i.have<19;)i.lens[Re[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Te={bits:i.lenbits},we=E(x,i.lens,0,19,i.lencode,0,i.work,Te),i.lenbits=Te.bits,we){e.msg="invalid code lengths set",i.mode=de;break}i.have=0,i.mode=ee;case ee:for(;i.have<i.nlen+i.ndist;){for(;Se=i.lencode[u&(1<<i.lenbits)-1],ge=Se>>>24,ve=Se>>>16&255,ye=65535&Se,!(f>=ge);){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(16>ye)u>>>=ge,f-=ge,i.lens[i.have++]=ye;else{if(16===ye){for(_e=ge+2;_e>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(u>>>=ge,f-=ge,0===i.have){e.msg="invalid bit length repeat",i.mode=de;break}xe=i.lens[i.have-1],g=3+(3&u),u>>>=2,f-=2}else if(17===ye){for(_e=ge+3;_e>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}u>>>=ge,f-=ge,xe=0,g=3+(7&u),u>>>=3,f-=3}else{for(_e=ge+7;_e>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}u>>>=ge,f-=ge,xe=0,g=11+(127&u),u>>>=7,f-=7}if(i.have+g>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=de;break}for(;g--;)i.lens[i.have++]=xe}}if(i.mode===de)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=de;break}if(i.lenbits=9,Te={bits:i.lenbits},we=E(w,i.lens,0,i.nlen,i.lencode,0,i.work,Te),i.lenbits=Te.bits,we){e.msg="invalid literal/lengths set",i.mode=de;break}if(i.distbits=6,i.distcode=i.distdyn,Te={bits:i.distbits},we=E(T,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Te),i.distbits=Te.bits,we){e.msg="invalid distances set",i.mode=de;break}if(i.mode=te,t===C)break e;case te:i.mode=ie;case ie:if(l>=6&&h>=258){e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,i.hold=u,i.bits=f,b(e,m),s=e.next_out,o=e.output,h=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,u=i.hold,f=i.bits,i.mode===q&&(i.back=-1);break}for(i.back=0;Se=i.lencode[u&(1<<i.lenbits)-1],ge=Se>>>24,ve=Se>>>16&255,ye=65535&Se,!(f>=ge);){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(ve&&0===(240&ve)){for(Ae=ge,be=ve,Ee=ye;Se=i.lencode[Ee+((u&(1<<Ae+be)-1)>>Ae)],ge=Se>>>24,ve=Se>>>16&255,ye=65535&Se,!(f>=Ae+ge);){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}u>>>=Ae,f-=Ae,i.back+=Ae}if(u>>>=ge,f-=ge,i.back+=ge,i.length=ye,0===ve){i.mode=se;break}if(32&ve){i.back=-1,i.mode=q;break}if(64&ve){e.msg="invalid literal/length code",i.mode=de;break}i.extra=15&ve,i.mode=re;case re:if(i.extra){for(_e=i.extra;_e>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.length+=u&(1<<i.extra)-1,u>>>=i.extra,f-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=ne;case ne:for(;Se=i.distcode[u&(1<<i.distbits)-1],ge=Se>>>24,ve=Se>>>16&255,ye=65535&Se,!(f>=ge);){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(0===(240&ve)){for(Ae=ge,be=ve,Ee=ye;Se=i.distcode[Ee+((u&(1<<Ae+be)-1)>>Ae)],ge=Se>>>24,ve=Se>>>16&255,ye=65535&Se,!(f>=Ae+ge);){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}u>>>=Ae,f-=Ae,i.back+=Ae}if(u>>>=ge,f-=ge,i.back+=ge,64&ve){e.msg="invalid distance code",i.mode=de;break}i.offset=ye,i.extra=15&ve,i.mode=oe;case oe:if(i.extra){for(_e=i.extra;_e>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.offset+=u&(1<<i.extra)-1,u>>>=i.extra,f-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=de;break}i.mode=ae;case ae:if(0===h)break e;if(g=m-h,i.offset>g){if(g=i.offset-g,g>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=de;break}g>i.wnext?(g-=i.wnext,pe=i.wsize-g):pe=i.wnext-g,g>i.length&&(g=i.length),me=i.window}else me=o,pe=s-i.offset,g=i.length;g>h&&(g=h),h-=g,i.length-=g;do o[s++]=me[pe++];while(--g);0===i.length&&(i.mode=ie);break;case se:if(0===h)break e;o[s++]=i.length,h--,i.mode=ie;break;case le:if(i.wrap){for(;32>f;){if(0===l)break e;l--,u|=n[a++]<<f,f+=8}if(m-=h,e.total_out+=m,i.total+=m,m&&(e.adler=i.check=i.flags?A(i.check,o,m,s-m):y(i.check,o,m,s-m)),m=h,(i.flags?u:r(u))!==i.check){e.msg="incorrect data check",i.mode=de;break}u=0,f=0}i.mode=he;case he:if(i.wrap&&i.flags){for(;32>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(u!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=de;break}u=0,f=0}i.mode=ce;case ce:we=k;break e;case de:we=D;break e;case ue:return H;case fe:default:return P}return e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,i.hold=u,i.bits=f,(i.wsize||m!==e.avail_out&&i.mode<de&&(i.mode<le||t!==_))&&d(e,e.output,e.next_out,m-e.avail_out)?(i.mode=ue,H):(p-=e.avail_in,m-=e.avail_out,e.total_in+=p,e.total_out+=m,i.total+=m,i.wrap&&m&&(e.adler=i.check=i.flags?A(i.check,o,m,e.next_out-m):y(i.check,o,m,e.next_out-m)),e.data_type=i.bits+(i.last?64:0)+(i.mode===q?128:0)+(i.mode===te||i.mode===Z?256:0),(0===p&&0===m||t===_)&&we===R&&(we=O),we)}function f(e){if(!e||!e.state)return P;var t=e.state;return t.window&&(t.window=null),e.state=null,R}function p(e,t){var i;return e&&e.state?(i=e.state,0===(2&i.wrap)?P:(i.head=t,t.done=!1,R)):P}var m,g,v=e("../utils/common"),y=e("./adler32"),A=e("./crc32"),b=e("./inffast"),E=e("./inftrees"),x=0,w=1,T=2,_=4,S=5,C=6,R=0,k=1,M=2,P=-2,D=-3,H=-4,O=-5,L=8,I=1,B=2,N=3,F=4,z=5,U=6,j=7,V=8,G=9,W=10,Y=11,q=12,X=13,Q=14,Z=15,K=16,J=17,$=18,ee=19,te=20,ie=21,re=22,ne=23,oe=24,ae=25,se=26,le=27,he=28,ce=29,de=30,ue=31,fe=32,pe=852,me=592,ge=15,ve=ge,ye=!0;i.inflateReset=a,i.inflateReset2=s,i.inflateResetKeep=o,i.inflateInit=h,i.inflateInit2=l,i.inflate=u,i.inflateEnd=f,i.inflateGetHeader=p,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":43,"./adler32":45,"./crc32":47,"./inffast":50,"./inftrees":52}],52:[function(e,t,i){"use strict";var r=e("../utils/common"),n=15,o=852,a=592,s=0,l=1,h=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,p,m,g,v,y){var A,b,E,x,w,T,_,S,C,R=y.bits,k=0,M=0,P=0,D=0,H=0,O=0,L=0,I=0,B=0,N=0,F=null,z=0,U=new r.Buf16(n+1),j=new r.Buf16(n+1),V=null,G=0;for(k=0;n>=k;k++)U[k]=0;for(M=0;p>M;M++)U[t[i+M]]++;for(H=R,D=n;D>=1&&0===U[D];D--);if(H>D&&(H=D),0===D)return m[g++]=20971520,m[g++]=20971520,y.bits=1,0;for(P=1;D>P&&0===U[P];P++);for(P>H&&(H=P),I=1,k=1;n>=k;k++)if(I<<=1,I-=U[k],0>I)return-1;if(I>0&&(e===s||1!==D))return-1;for(j[1]=0,k=1;n>k;k++)j[k+1]=j[k]+U[k];for(M=0;p>M;M++)0!==t[i+M]&&(v[j[t[i+M]]++]=M);if(e===s?(F=V=v,T=19):e===l?(F=c,z-=257,V=d,G-=257,T=256):(F=u,V=f,T=-1),N=0,M=0,k=P,w=g,O=H,L=0,E=-1,B=1<<H,x=B-1,e===l&&B>o||e===h&&B>a)return 1;for(var W=0;;){W++,_=k-L,v[M]<T?(S=0,C=v[M]):v[M]>T?(S=V[G+v[M]],C=F[z+v[M]]):(S=96,C=0),A=1<<k-L,b=1<<O,P=b;do b-=A,m[w+(N>>L)+b]=_<<24|S<<16|C|0;while(0!==b);for(A=1<<k-1;N&A;)A>>=1;if(0!==A?(N&=A-1,N+=A):N=0,M++,0===--U[k]){if(k===D)break;k=t[i+v[M]]}if(k>H&&(N&x)!==E){for(0===L&&(L=H),w+=P,O=k-L,I=1<<O;D>O+L&&(I-=U[O+L],!(0>=I));)O++,I<<=1;if(B+=1<<O,e===l&&B>o||e===h&&B>a)return 1;E=N&x,m[E]=H<<24|O<<16|w-g|0}}return 0!==N&&(m[w+N]=k-L<<24|64<<16|0),y.bits=H,0}},{"../utils/common":43}],53:[function(e,t,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],54:[function(e,t,i){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function n(e){return 256>e?ae[e]:ae[256+(e>>>7)]}function o(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function a(e,t,i){e.bi_valid>q-i?(e.bi_buf|=t<<e.bi_valid&65535,o(e,e.bi_buf),e.bi_buf=t>>q-e.bi_valid,e.bi_valid+=i-q):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function s(e,t,i){a(e,i[2*t],i[2*t+1])}function l(e,t){var i=0;do i|=1&e,e>>>=1,i<<=1;while(--t>0);return i>>>1}function h(e){16===e.bi_valid?(o(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function c(e,t){var i,r,n,o,a,s,l=t.dyn_tree,h=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;Y>=o;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;W>i;i++)r=e.heap[i],o=l[2*l[2*r+1]+1]+1,o>p&&(o=p,m++),l[2*r+1]=o,r>h||(e.bl_count[o]++,a=0,r>=f&&(a=u[r-f]),s=l[2*r],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)n=e.heap[--i],n>h||(l[2*n+1]!==o&&(e.opt_len+=(o-l[2*n+1])*l[2*n],l[2*n+1]=o),r--)}}function d(e,t,i){var r,n,o=new Array(Y+1),a=0;for(r=1;Y>=r;r++)o[r]=a=a+i[r-1]<<1;for(n=0;t>=n;n++){var s=e[2*n+1];0!==s&&(e[2*n]=l(o[s]++,s))}}function u(){var e,t,i,r,n,o=new Array(Y+1);for(i=0,r=0;z-1>r;r++)for(le[r]=i,e=0;e<1<<$[r];e++)se[i++]=r;for(se[i-1]=r,n=0,r=0;16>r;r++)for(he[r]=n,e=0;e<1<<ee[r];e++)ae[n++]=r;for(n>>=7;V>r;r++)for(he[r]=n<<7,e=0;e<1<<ee[r]-7;e++)ae[256+n++]=r;for(t=0;Y>=t;t++)o[t]=0;for(e=0;143>=e;)ne[2*e+1]=8,e++,o[8]++;for(;255>=e;)ne[2*e+1]=9,e++,o[9]++;for(;279>=e;)ne[2*e+1]=7,e++,o[7]++;for(;287>=e;)ne[2*e+1]=8,e++,o[8]++;for(d(ne,j+1,o),e=0;V>e;e++)oe[2*e+1]=5,oe[2*e]=l(e,5);ce=new fe(ne,$,U+1,j,Y),de=new fe(oe,ee,0,V,Y),ue=new fe(new Array(0),te,0,G,X)}function f(e){var t;for(t=0;j>t;t++)e.dyn_ltree[2*t]=0;for(t=0;V>t;t++)e.dyn_dtree[2*t]=0;for(t=0;G>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Q]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?o(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function m(e,t,i,r){p(e),r&&(o(e,i),o(e,~i)),M.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function g(e,t,i,r){var n=2*t,o=2*i;return e[n]<e[o]||e[n]===e[o]&&r[t]<=r[i]}function v(e,t,i){for(var r=e.heap[i],n=i<<1;n<=e.heap_len&&(n<e.heap_len&&g(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!g(t,r,e.heap[n],e.depth));)e.heap[i]=e.heap[n],
i=n,n<<=1;e.heap[i]=r}function y(e,t,i){var r,o,l,h,c=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],o=e.pending_buf[e.l_buf+c],c++,0===r?s(e,o,t):(l=se[o],s(e,l+U+1,t),h=$[l],0!==h&&(o-=le[l],a(e,o,h)),r--,l=n(r),s(e,l,i),h=ee[l],0!==h&&(r-=he[l],a(e,r,h)));while(c<e.last_lit);s(e,Q,t)}function A(e,t){var i,r,n,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=W,i=0;l>i;i++)0!==o[2*i]?(e.heap[++e.heap_len]=h=i,e.depth[i]=0):o[2*i+1]=0;for(;e.heap_len<2;)n=e.heap[++e.heap_len]=2>h?++h:0,o[2*n]=1,e.depth[n]=0,e.opt_len--,s&&(e.static_len-=a[2*n+1]);for(t.max_code=h,i=e.heap_len>>1;i>=1;i--)v(e,o,i);n=l;do i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],v(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=r,o[2*n]=o[2*i]+o[2*r],e.depth[n]=(e.depth[i]>=e.depth[r]?e.depth[i]:e.depth[r])+1,o[2*i+1]=o[2*r+1]=n,e.heap[1]=n++,v(e,o,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],c(e,t),d(o,h,e.bl_count)}function b(e,t,i){var r,n,o=-1,a=t[1],s=0,l=7,h=4;for(0===a&&(l=138,h=3),t[2*(i+1)+1]=65535,r=0;i>=r;r++)n=a,a=t[2*(r+1)+1],++s<l&&n===a||(h>s?e.bl_tree[2*n]+=s:0!==n?(n!==o&&e.bl_tree[2*n]++,e.bl_tree[2*Z]++):10>=s?e.bl_tree[2*K]++:e.bl_tree[2*J]++,s=0,o=n,0===a?(l=138,h=3):n===a?(l=6,h=3):(l=7,h=4))}function E(e,t,i){var r,n,o=-1,l=t[1],h=0,c=7,d=4;for(0===l&&(c=138,d=3),r=0;i>=r;r++)if(n=l,l=t[2*(r+1)+1],!(++h<c&&n===l)){if(d>h){do s(e,n,e.bl_tree);while(0!==--h)}else 0!==n?(n!==o&&(s(e,n,e.bl_tree),h--),s(e,Z,e.bl_tree),a(e,h-3,2)):10>=h?(s(e,K,e.bl_tree),a(e,h-3,3)):(s(e,J,e.bl_tree),a(e,h-11,7));h=0,o=n,0===l?(c=138,d=3):n===l?(c=6,d=3):(c=7,d=4)}}function x(e){var t;for(b(e,e.dyn_ltree,e.l_desc.max_code),b(e,e.dyn_dtree,e.d_desc.max_code),A(e,e.bl_desc),t=G-1;t>=3&&0===e.bl_tree[2*ie[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function w(e,t,i,r){var n;for(a(e,t-257,5),a(e,i-1,5),a(e,r-4,4),n=0;r>n;n++)a(e,e.bl_tree[2*ie[n]+1],3);E(e,e.dyn_ltree,t-1),E(e,e.dyn_dtree,i-1)}function T(e){var t,i=4093624447;for(t=0;31>=t;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return D;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return H;for(t=32;U>t;t++)if(0!==e.dyn_ltree[2*t])return H;return D}function _(e){me||(u(),me=!0),e.l_desc=new pe(e.dyn_ltree,ce),e.d_desc=new pe(e.dyn_dtree,de),e.bl_desc=new pe(e.bl_tree,ue),e.bi_buf=0,e.bi_valid=0,f(e)}function S(e,t,i,r){a(e,(L<<1)+(r?1:0),3),m(e,t,i,!0)}function C(e){a(e,I<<1,3),s(e,Q,ne),h(e)}function R(e,t,i,r){var n,o,s=0;e.level>0?(e.strm.data_type===O&&(e.strm.data_type=T(e)),A(e,e.l_desc),A(e,e.d_desc),s=x(e),n=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,n>=o&&(n=o)):n=o=i+5,n>=i+4&&-1!==t?S(e,t,i,r):e.strategy===P||o===n?(a(e,(I<<1)+(r?1:0),3),y(e,ne,oe)):(a(e,(B<<1)+(r?1:0),3),w(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),y(e,e.dyn_ltree,e.dyn_dtree)),f(e),r&&p(e)}function k(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(se[i]+U+1)]++,e.dyn_dtree[2*n(t)]++),e.last_lit===e.lit_bufsize-1}var M=e("../utils/common"),P=4,D=0,H=1,O=2,L=0,I=1,B=2,N=3,F=258,z=29,U=256,j=U+1+z,V=30,G=19,W=2*j+1,Y=15,q=16,X=7,Q=256,Z=16,K=17,J=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=512,ne=new Array(2*(j+2));r(ne);var oe=new Array(2*V);r(oe);var ae=new Array(re);r(ae);var se=new Array(F-N+1);r(se);var le=new Array(z);r(le);var he=new Array(V);r(he);var ce,de,ue,fe=function(e,t,i,r,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=r,this.max_length=n,this.has_stree=e&&e.length},pe=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t},me=!1;i._tr_init=_,i._tr_stored_block=S,i._tr_flush_block=R,i._tr_tally=k,i._tr_align=C},{"../utils/common":43}],55:[function(e,t,i){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}],"/src/js/docxgen.js":[function(e,t,i){var r,n;r=e("./docUtils"),n=n=function(){function e(t,i){this.moduleManager=new e.ModuleManager,this.moduleManager.gen=this,this.templateClass=this.getTemplateClass(),this.setOptions({}),null!=t&&this.load(t,i)}return e.prototype.attachModule=function(e){return this.moduleManager.attachModule(e),this},e.prototype.setOptions=function(e){var t,i,n;this.options=null!=e?e:{},n=r.defaults;for(i in n)t=n[i],this[i]=null!=this.options[i]?this.options[i]:t;return this},e.prototype.getTemplateClass=function(){return e.DocXTemplater},e.prototype.getTemplatedFiles=function(){var e;return e=this.zip.file(/word\/(header|footer)\d+\.xml/).map(function(e){return e.name}),e.concat(["word/document.xml"])},e.prototype.load=function(t,i){return this.moduleManager.sendEvent("loading"),null!=t.file?this.zip=t:this.zip=new e.JSZip(t,i),this.moduleManager.sendEvent("loaded"),this.templatedFiles=this.getTemplatedFiles(),this},e.prototype.renderFile=function(e){var t;return this.moduleManager.sendEvent("rendering-file",e),t=this.createTemplateClass(e),this.zip.file(e,t.render().content),this.moduleManager.sendEvent("rendered-file",e)},e.prototype.render=function(){var e,t,i,r;for(this.moduleManager.sendEvent("rendering"),r=this.templatedFiles,t=0,i=r.length;i>t;t++)e=r[t],null!=this.zip.files[e]&&this.renderFile(e);return this.moduleManager.sendEvent("rendered"),this},e.prototype.getTags=function(){var e,t,i,n,o,a,s;for(a=[],o=this.templatedFiles,i=0,n=o.length;n>i;i++)t=o[i],null!=this.zip.files[t]&&(e=this.createTemplateClass(t),s=e.render().usedTags,r.sizeOfObject(s)&&a.push({fileName:t,vars:s}));return a},e.prototype.setData=function(e){return this.tags=e,this},e.prototype.getZip=function(){return this.zip},e.prototype.createTemplateClass=function(e){var t,i,n,o,a;a=this.zip.files[e].asText(),n={tags:this.tags,moduleManager:this.moduleManager},o=r.defaults;for(i in o)t=o[i],n[i]=this[i];return new this.templateClass(a,n)},e.prototype.getFullText=function(e){return null==e&&(e="word/document.xml"),this.createTemplateClass(e).getFullText()},e}(),n.DocUtils=e("./docUtils"),n.DocXTemplater=e("./docxTemplater"),n.JSZip=e("jszip"),n.Errors=e("./errors"),n.ModuleManager=e("./moduleManager"),n.XmlTemplater=e("./xmlTemplater"),n.XmlMatcher=e("./xmlMatcher"),n.XmlUtil=e("./xmlUtil"),n.SubContent=e("./subContent"),t.exports=n},{"./docUtils":7,"./docxTemplater":8,"./errors":9,"./moduleManager":10,"./subContent":12,"./xmlMatcher":14,"./xmlTemplater":15,"./xmlUtil":16,jszip:25}]},{},[])("/src/js/docxgen.js")});var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,n=function(i){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(r)},o=e.webkitRequestFileSystem,a=e.requestFileSystem||o||e.mozRequestFileSystem,s=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l=0,h=function(t){var i=function(){"string"==typeof t?(e.URL||e.webkitURL||e).revokeObjectURL(t):t.remove()};e.chrome?i():setTimeout(i,10)},c=function(e,t,i){t=[].concat(t);for(var r=t.length;r--;){var n=e["on"+t[r]];if("function"==typeof n)try{n.call(e,i||e)}catch(o){s(o)}}},d=function(t,s){var d,u,f,p=this,m=t.type,g=!1,v=function(){c(p,["writestart","progress","write","writeend"])},y=function(){!g&&d||(d=(e.URL||e.webkitURL||e).createObjectURL(t)),u?u.location.href=d:void 0==e.open(d,"_blank")&&"undefined"!=typeof safari&&(e.location.href=d),p.readyState=p.DONE,v(),h(d)},A=function(e){return function(){return p.readyState!==p.DONE?e.apply(this,arguments):void 0}},b={create:!0,exclusive:!1};p.readyState=p.INIT,s||(s="download"),r?(d=(e.URL||e.webkitURL||e).createObjectURL(t),i.href=d,i.download=s,n(i),p.readyState=p.DONE,v(),h(d)):(e.chrome&&m&&"application/octet-stream"!==m&&(f=t.slice||t.webkitSlice,t=f.call(t,0,t.size,"application/octet-stream"),g=!0),o&&"download"!==s&&(s+=".download"),("application/octet-stream"===m||o)&&(u=e),a?(l+=t.size,a(e.TEMPORARY,l,A(function(e){e.root.getDirectory("saved",b,A(function(e){var i=function(){e.getFile(s,b,A(function(e){e.createWriter(A(function(i){i.onwriteend=function(t){u.location.href=e.toURL(),p.readyState=p.DONE,c(p,"writeend",t),h(e)},i.onerror=function(){var e=i.error;e.code!==e.ABORT_ERR&&y()},["writestart","progress","write","abort"].forEach(function(e){i["on"+e]=p["on"+e]}),i.write(t),p.abort=function(){i.abort(),p.readyState=p.DONE},p.readyState=p.WRITING}),y)}),y)};e.getFile(s,{create:!1},A(function(e){e.remove(),i()}),A(function(e){e.code===e.NOT_FOUND_ERR?i():y()}))}),y)}),y)):y())},u=d.prototype;return u.abort=function(){this.readyState=this.DONE,c(this,"abort")},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(e,t){return new d(e,t)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),function(e){"use strict";var t={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeek:["ن","ث","ع","خ","ج","س","ح"]},ro:{months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],dayOfWeek:["l","ma","mi","j","v","s","d"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeek:["Min","Sen","Sel","Rab","Kam","Jum","Sab"]},is:{months:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],dayOfWeek:["Sun","Mán","Þrið","Mið","Fim","Fös","Lau"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeek:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeek:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeek:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeek:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["日","月","火","水","木","金","土"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeek:["Va","Hé","Ke","Sze","Cs","Pé","Szo"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeek:["B","Be","Ça","Ç","Ca","C","Ş"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeek:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeek:["P","E","T","K","N","R","L"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeek:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeek:["Su","Ma","Ti","Ke","To","Pe","La"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeek:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeek:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeek:["Sv","Pr","Ot","Tr","Ct","Pk","St"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeek:["нед","пон","вто","сре","чет","пет","саб"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeek:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeek:["Ne","Po","Ut","St","Št","Pi","So"]},sq:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sre","čet","Pet","Sub"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeek:["нед","пон","уто","сре","чет","пет","суб"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeek:["א'","ב'","ג'","ד'","ה'","ו'","שבת"]},hy:{months:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],dayOfWeek:["Կի","Երկ","Երք","Չոր","Հնգ","Ուրբ","Շբթ"]},kg:{months:["Үчтүн айы","Бирдин айы","Жалган Куран","Чын Куран","Бугу","Кулжа","Теке","Баш Оона","Аяк Оона","Тогуздун айы","Жетинин айы","Бештин айы"],dayOfWeek:["Жек","Дүй","Шей","Шар","Бей","Жум","Ише"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnTimeSelect:!0,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,disabledMinTime:!1,disabledMaxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,prevButton:!0,nextButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0,showApplyButton:!1};window.getComputedStyle||(window.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var i=/(\-([a-z]){1})/g;return"float"===t&&(t="styleFloat"),i.test(t)&&(t=t.replace(i,function(e,t,i){return i.toUpperCase()})),e.currentStyle[t]||null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var i,r;for(i=t||0,r=this.length;r>i;i+=1)if(this[i]===e)return i;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},e.fn.xdsoftScroller=function(t){return this.each(function(){var i,r,n,o,a,s=e(this),l=function(e){var t,i={x:0,y:0};return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type?(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],i.x=t.clientX,i.y=t.clientY):"mousedown"!==e.type&&"mouseup"!==e.type&&"mousemove"!==e.type&&"mouseover"!==e.type&&"mouseout"!==e.type&&"mouseenter"!==e.type&&"mouseleave"!==e.type||(i.x=e.clientX,i.y=e.clientY),i},h=100,c=!1,d=0,u=0,f=0,p=!1,m=0,g=function(){};return"hide"===t?void s.find(".xdsoft_scrollbar").hide():(e(this).hasClass("xdsoft_scroller_box")||(i=s.children().eq(0),r=s[0].clientHeight,n=i[0].offsetHeight,o=e('<div class="xdsoft_scrollbar"></div>'),a=e('<div class="xdsoft_scroller"></div>'),o.append(a),s.addClass("xdsoft_scroller_box").append(o),g=function(e){var t=l(e).y-d+m;0>t&&(t=0),t+a[0].offsetHeight>f&&(t=f-a[0].offsetHeight),s.trigger("scroll_element.xdsoft_scroller",[h?t/h:0])},a.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(i){r||s.trigger("resize_scroll.xdsoft_scroller",[t]),d=l(i).y,m=parseInt(a.css("margin-top"),10),f=o[0].offsetHeight,"mousedown"===i.type?(document&&e(document.body).addClass("xdsoft_noselect"),e([document.body,window]).on("mouseup.xdsoft_scroller",function n(){e([document.body,window]).off("mouseup.xdsoft_scroller",n).off("mousemove.xdsoft_scroller",g).removeClass("xdsoft_noselect")}),e(document.body).on("mousemove.xdsoft_scroller",g)):(p=!0,i.stopPropagation(),i.preventDefault())}).on("touchmove",function(e){p&&(e.preventDefault(),g(e))}).on("touchend touchcancel",function(e){p=!1,m=0}),s.on("scroll_element.xdsoft_scroller",function(e,t){r||s.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:0>t||isNaN(t)?0:t,a.css("margin-top",h*t),setTimeout(function(){i.css("marginTop",-parseInt((i[0].offsetHeight-r)*t,10))},10)}).on("resize_scroll.xdsoft_scroller",function(e,t,l){var c,d;r=s[0].clientHeight,n=i[0].offsetHeight,c=r/n,d=c*o[0].offsetHeight,c>1?a.hide():(a.show(),a.css("height",parseInt(d>10?d:10,10)),h=o[0].offsetHeight-a[0].offsetHeight,l!==!0&&s.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(i.css("marginTop"),10))/(n-r)]))}),s.on("mousewheel",function(e){var t=Math.abs(parseInt(i.css("marginTop"),10));return t-=20*e.deltaY,0>t&&(t=0),s.trigger("scroll_element.xdsoft_scroller",[t/(n-r)]),e.stopPropagation(),!1}),s.on("touchstart",function(e){c=l(e),u=Math.abs(parseInt(i.css("marginTop"),10))}),s.on("touchmove",function(e){if(c){e.preventDefault();var t=l(e);s.trigger("scroll_element.xdsoft_scroller",[(u-(t.y-c.y))/(n-r)])}}),s.on("touchend touchcancel",function(e){c=!1,u=0})),void s.trigger("resize_scroll.xdsoft_scroller",[t]))})},e.fn.datetimepicker=function(i){var r,n,o=48,a=57,s=96,l=105,h=17,c=46,d=13,u=27,f=8,p=37,m=38,g=39,v=40,y=9,A=116,b=65,E=67,x=86,w=90,T=89,_=!1,S=e.isPlainObject(i)||!i?e.extend(!0,{},t,i):e.extend(!0,{},t),C=0,R=function(e){e.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function t(i){e.is(":disabled")||e.data("xdsoft_datetimepicker")||(clearTimeout(C),C=setTimeout(function(){e.data("xdsoft_datetimepicker")||r(e),e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",t).trigger("open.xdsoft")},100))})};return r=function(t){function r(){var e,i=!1;return S.startDate?i=P.strToDate(S.startDate):(i=S.value||(t&&t.val&&t.val()?t.val():""),i?i=P.strToDateTime(i):S.defaultDate&&(i=P.strToDateTime(S.defaultDate),S.defaultTime&&(e=P.strtotime(S.defaultTime),i.setHours(e.getHours()),i.setMinutes(e.getMinutes())))),i&&P.isValidDate(i)?D.data("changed",!0):i="",i||0}var n,C,R,k,M,P,D=e('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),H=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),O=e('<div class="xdsoft_datepicker active"></div>'),L=e('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),I=e('<div class="xdsoft_calendar"></div>'),B=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),N=B.find(".xdsoft_time_box").eq(0),F=e('<div class="xdsoft_time_variant"></div>'),z=e('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),U=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),j=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),V=!1,G=0,W=0;S.id&&D.attr("id",S.id),S.style&&D.attr("style",S.style),S.weeks&&D.addClass("xdsoft_showweeks"),D.addClass("xdsoft_"+S.theme),D.addClass(S.className),L.find(".xdsoft_month span").after(U),L.find(".xdsoft_year span").after(j),L.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(t){var i,r,n=e(this).find(".xdsoft_select").eq(0),o=0,a=0,s=n.is(":visible");for(L.find(".xdsoft_select").hide(),P.currentTime&&(o=P.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),n[s?"hide":"show"](),i=n.find("div.xdsoft_option"),r=0;r<i.length&&i.eq(r).data("value")!==o;r+=1)a+=i[0].offsetHeight;return n.xdsoftScroller(a/(n.children()[0].offsetHeight-n[0].clientHeight)),t.stopPropagation(),!1}),L.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(t){void 0!==P.currentTime&&null!==P.currentTime||(P.currentTime=P.now());var i=P.currentTime.getFullYear();P&&P.currentTime&&P.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),D.trigger("xchange.xdsoft"),S.onChangeMonth&&e.isFunction(S.onChangeMonth)&&S.onChangeMonth.call(D,P.currentTime,D.data("input")),i!==P.currentTime.getFullYear()&&e.isFunction(S.onChangeYear)&&S.onChangeYear.call(D,P.currentTime,D.data("input"))}),D.setOptions=function(i){var r={},n=function(e){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(e.setSelectionRange)return e.selectionStart}catch(i){return 0}},C=function(e,t){if(e="string"==typeof e||e instanceof String?document.getElementById(e):e,!e)return!1;if(e.createTextRange){var i=e.createTextRange();return i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select(),!0}return e.setSelectionRange?(e.setSelectionRange(t,t),!0):!1},R=function(e,t){var i=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(i).test(t)};S=e.extend(!0,{},S,i),i.allowTimes&&e.isArray(i.allowTimes)&&i.allowTimes.length&&(S.allowTimes=e.extend(!0,[],i.allowTimes)),i.weekends&&e.isArray(i.weekends)&&i.weekends.length&&(S.weekends=e.extend(!0,[],i.weekends)),i.highlightedDates&&e.isArray(i.highlightedDates)&&i.highlightedDates.length&&(e.each(i.highlightedDates,function(t,i){var n,o=e.map(i.split(","),e.trim),a=new HighlightedDate(Date.parseDate(o[0],S.formatDate),o[1],o[2]),s=a.date.dateFormat(S.formatDate);void 0!==r[s]?(n=r[s].desc,n&&n.length&&a.desc&&a.desc.length&&(r[s].desc=n+"\n"+a.desc)):r[s]=a}),S.highlightedDates=e.extend(!0,[],r)),i.highlightedPeriods&&e.isArray(i.highlightedPeriods)&&i.highlightedPeriods.length&&(r=e.extend(!0,[],S.highlightedDates),e.each(i.highlightedPeriods,function(t,i){for(var n,o,a,s=e.map(i.split(","),e.trim),l=Date.parseDate(s[0],S.formatDate),h=Date.parseDate(s[1],S.formatDate),c=s[2],d=s[3];h>=l;)n=new HighlightedDate(l,c,d),o=l.dateFormat(S.formatDate),l.setDate(l.getDate()+1),void 0!==r[o]?(a=r[o].desc,a&&a.length&&n.desc&&n.desc.length&&(r[o].desc=a+"\n"+n.desc)):r[o]=n}),S.highlightedDates=e.extend(!0,[],r)),i.disabledDates&&e.isArray(i.disabledDates)&&i.disabledDates.length&&(S.disabledDates=e.extend(!0,[],i.disabledDates)),i.disabledWeekDays&&e.isArray(i.disabledWeekDays)&&i.disabledWeekDays.length&&(S.disabledWeekDays=e.extend(!0,[],i.disabledWeekDays)),!S.open&&!S.opened||S.inline||t.trigger("open.xdsoft"),S.inline&&(V=!0,D.addClass("xdsoft_inline"),t.after(D).hide()),S.inverseButton&&(S.next="xdsoft_prev",S.prev="xdsoft_next"),S.datepicker?O.addClass("active"):O.removeClass("active"),S.timepicker?B.addClass("active"):B.removeClass("active"),S.value&&(P.setCurrentTime(S.value),t&&t.val&&t.val(P.str)),isNaN(S.dayOfWeekStart)?S.dayOfWeekStart=0:S.dayOfWeekStart=parseInt(S.dayOfWeekStart,10)%7,S.timepickerScrollbar||N.xdsoftScroller("hide"),S.minDate&&/^-(.*)$/.test(S.minDate)&&(S.minDate=P.strToDateTime(S.minDate).dateFormat(S.formatDate)),S.maxDate&&/^\+(.*)$/.test(S.maxDate)&&(S.maxDate=P.strToDateTime(S.maxDate).dateFormat(S.formatDate)),z.toggle(S.showApplyButton),L.find(".xdsoft_today_button").css("visibility",S.todayButton?"visible":"hidden"),L.find("."+S.prev).css("visibility",S.prevButton?"visible":"hidden"),L.find("."+S.next).css("visibility",S.nextButton?"visible":"hidden"),S.mask&&(t.off("keydown.xdsoft"),S.mask===!0&&(S.mask=S.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===e.type(S.mask)&&(R(S.mask,t.val())||t.val(S.mask.replace(/[0-9]/g,"_")),t.on("keydown.xdsoft",function(i){var r,k,M=this.value,P=i.which;if(P>=o&&a>=P||P>=s&&l>=P||P===f||P===c){for(r=n(this),k=P!==f&&P!==c?String.fromCharCode(P>=s&&l>=P?P-o:P):"_",P!==f&&P!==c||!r||(r-=1,k="_");/[^0-9_]/.test(S.mask.substr(r,1))&&r<S.mask.length&&r>0;)r+=P===f||P===c?-1:1;if(M=M.substr(0,r)+k+M.substr(r+1),""===e.trim(M))M=S.mask.replace(/[0-9]/g,"_");else if(r===S.mask.length)return i.preventDefault(),!1;for(r+=P===f||P===c?0:1;/[^0-9_]/.test(S.mask.substr(r,1))&&r<S.mask.length&&r>0;)r+=P===f||P===c?-1:1;R(S.mask,M)?(this.value=M,C(this,r)):""===e.trim(M)?this.value=S.mask.replace(/[0-9]/g,"_"):t.trigger("error_input.xdsoft")}else if(-1!==[b,E,x,w,T].indexOf(P)&&_||-1!==[u,m,v,p,g,A,h,y,d].indexOf(P))return!0;return i.preventDefault(),!1}))),S.validateOnBlur&&t.off("blur.xdsoft").on("blur.xdsoft",function(){if(S.allowBlank&&!e.trim(e(this).val()).length)e(this).val(null),D.data("xdsoft_datetime").empty();else if(Date.parseDate(e(this).val(),S.format))D.data("xdsoft_datetime").setCurrentTime(e(this).val());else{var t=+[e(this).val()[0],e(this).val()[1]].join(""),i=+[e(this).val()[2],e(this).val()[3]].join("");!S.datepicker&&S.timepicker&&t>=0&&24>t&&i>=0&&60>i?e(this).val([t,i].map(function(e){return e>9?e:"0"+e}).join(":")):e(this).val(P.now().dateFormat(S.format)),D.data("xdsoft_datetime").setCurrentTime(e(this).val())}D.trigger("changedatetime.xdsoft")}),S.dayOfWeekStartPrev=0===S.dayOfWeekStart?6:S.dayOfWeekStart-1,D.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},D.data("options",S).on("mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),j.hide(),U.hide(),!1}),N.append(F),N.xdsoftScroller(),D.on("afterOpen.xdsoft",function(){N.xdsoftScroller()}),D.append(O).append(B),S.withoutCopyright!==!0&&D.append(H),O.append(L).append(I).append(z),
e(S.parentID).append(D),n=function(){var t=this;t.now=function(e){var i,r,n=new Date;return!e&&S.defaultDate&&(i=t.strToDateTime(S.defaultDate),n.setFullYear(i.getFullYear()),n.setMonth(i.getMonth()),n.setDate(i.getDate())),S.yearOffset&&n.setFullYear(n.getFullYear()+S.yearOffset),!e&&S.defaultTime&&(r=t.strtotime(S.defaultTime),n.setHours(r.getHours()),n.setMinutes(r.getMinutes())),n},t.isValidDate=function(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())},t.setCurrentTime=function(e){t.currentTime="string"==typeof e?t.strToDateTime(e):t.isValidDate(e)?e:t.now(),D.trigger("xchange.xdsoft")},t.empty=function(){t.currentTime=null},t.getCurrentTime=function(e){return t.currentTime},t.nextMonth=function(){void 0!==t.currentTime&&null!==t.currentTime||(t.currentTime=t.now());var i,r=t.currentTime.getMonth()+1;return 12===r&&(t.currentTime.setFullYear(t.currentTime.getFullYear()+1),r=0),i=t.currentTime.getFullYear(),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),r+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(r),S.onChangeMonth&&e.isFunction(S.onChangeMonth)&&S.onChangeMonth.call(D,P.currentTime,D.data("input")),i!==t.currentTime.getFullYear()&&e.isFunction(S.onChangeYear)&&S.onChangeYear.call(D,P.currentTime,D.data("input")),D.trigger("xchange.xdsoft"),r},t.prevMonth=function(){void 0!==t.currentTime&&null!==t.currentTime||(t.currentTime=t.now());var i=t.currentTime.getMonth()-1;return-1===i&&(t.currentTime.setFullYear(t.currentTime.getFullYear()-1),i=11),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),i+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(i),S.onChangeMonth&&e.isFunction(S.onChangeMonth)&&S.onChangeMonth.call(D,P.currentTime,D.data("input")),D.trigger("xchange.xdsoft"),i},t.getWeekOfYear=function(e){var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+t.getDay()+1)/7)},t.strToDateTime=function(e){var i,r,n=[];return e&&e instanceof Date&&t.isValidDate(e)?e:(n=/^(\+|\-)(.*)$/.exec(e),n&&(n[2]=Date.parseDate(n[2],S.formatDate)),n&&n[2]?(i=n[2].getTime()-6e4*n[2].getTimezoneOffset(),r=new Date(t.now(!0).getTime()+parseInt(n[1]+"1",10)*i)):r=e?Date.parseDate(e,S.format):t.now(),t.isValidDate(r)||(r=t.now()),r)},t.strToDate=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var i=e?Date.parseDate(e,S.formatDate):t.now(!0);return t.isValidDate(i)||(i=t.now(!0)),i},t.strtotime=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var i=e?Date.parseDate(e,S.formatTime):t.now(!0);return t.isValidDate(i)||(i=t.now(!0)),i},t.str=function(){return t.currentTime.dateFormat(S.format)},t.currentTime=this.now()},P=new n,z.on("click",function(e){e.preventDefault(),D.data("changed",!0),P.setCurrentTime(r()),t.val(P.str()),D.trigger("close.xdsoft")}),L.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){D.data("changed",!0),P.setCurrentTime(0),D.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var e,i,r=P.getCurrentTime();r=new Date(r.getFullYear(),r.getMonth(),r.getDate()),e=P.strToDate(S.minDate),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),e>r||(i=P.strToDate(S.maxDate),i=new Date(i.getFullYear(),i.getMonth(),i.getDate()),r>i||(t.val(P.str()),D.trigger("close.xdsoft")))}),L.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),i=0,r=!1;!function n(e){t.hasClass(S.next)?P.nextMonth():t.hasClass(S.prev)&&P.prevMonth(),S.monthChangeSpinner&&(r||(i=setTimeout(n,e||100)))}(500),e([document.body,window]).on("mouseup.xdsoft",function o(){clearTimeout(i),r=!0,e([document.body,window]).off("mouseup.xdsoft",o)})}),B.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),i=0,r=!1,n=110;!function o(e){var a=N[0].clientHeight,s=F[0].offsetHeight,l=Math.abs(parseInt(F.css("marginTop"),10));t.hasClass(S.next)&&s-a-S.timeHeightInTimePicker>=l?F.css("marginTop","-"+(l+S.timeHeightInTimePicker)+"px"):t.hasClass(S.prev)&&l-S.timeHeightInTimePicker>=0&&F.css("marginTop","-"+(l-S.timeHeightInTimePicker)+"px"),N.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(F.css("marginTop"),10)/(s-a))]),n=n>10?10:n-10,r||(i=setTimeout(o,e||n))}(500),e([document.body,window]).on("mouseup.xdsoft",function a(){clearTimeout(i),r=!0,e([document.body,window]).off("mouseup.xdsoft",a)})}),C=0,D.on("xchange.xdsoft",function(t){clearTimeout(C),C=setTimeout(function(){void 0!==P.currentTime&&null!==P.currentTime||(P.currentTime=P.now());for(var t,r,n,o,a,s,l,h,c,d,u="",f=new Date(P.currentTime.getFullYear(),P.currentTime.getMonth(),1,12,0,0),p=0,m=P.now(),g=!1,v=!1,y=[],A=!0,b="",E="";f.getDay()!==S.dayOfWeekStart;)f.setDate(f.getDate()-1);for(u+="<table><thead><tr>",S.weeks&&(u+="<th></th>"),t=0;7>t;t+=1)u+="<th>"+S.i18n[S.lang].dayOfWeek[(t+S.dayOfWeekStart)%7]+"</th>";for(u+="</tr></thead>",u+="<tbody>",S.maxDate!==!1&&(g=P.strToDate(S.maxDate),g=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59,999)),S.minDate!==!1&&(v=P.strToDate(S.minDate),v=new Date(v.getFullYear(),v.getMonth(),v.getDate()));p<P.currentTime.countDaysInMonth()||f.getDay()!==S.dayOfWeekStart||P.currentTime.getMonth()===f.getMonth();)y=[],p+=1,n=f.getDay(),o=f.getDate(),a=f.getFullYear(),s=f.getMonth(),l=P.getWeekOfYear(f),d="",y.push("xdsoft_date"),h=S.beforeShowDay&&e.isFunction(S.beforeShowDay.call)?S.beforeShowDay.call(D,f):null,g!==!1&&f>g||v!==!1&&v>f||h&&h[0]===!1?y.push("xdsoft_disabled"):-1!==S.disabledDates.indexOf(f.dateFormat(S.formatDate))?y.push("xdsoft_disabled"):-1!==S.disabledWeekDays.indexOf(n)&&y.push("xdsoft_disabled"),h&&""!==h[1]&&y.push(h[1]),P.currentTime.getMonth()!==s&&y.push("xdsoft_other_month"),(S.defaultSelect||D.data("changed"))&&P.currentTime.dateFormat(S.formatDate)===f.dateFormat(S.formatDate)&&y.push("xdsoft_current"),m.dateFormat(S.formatDate)===f.dateFormat(S.formatDate)&&y.push("xdsoft_today"),0!==f.getDay()&&6!==f.getDay()&&-1===S.weekends.indexOf(f.dateFormat(S.formatDate))||y.push("xdsoft_weekend"),void 0!==S.highlightedDates[f.dateFormat(S.formatDate)]&&(r=S.highlightedDates[f.dateFormat(S.formatDate)],y.push(void 0===r.style?"xdsoft_highlighted_default":r.style),d=void 0===r.desc?"":r.desc),S.beforeShowDay&&e.isFunction(S.beforeShowDay)&&y.push(S.beforeShowDay(f)),A&&(u+="<tr>",A=!1,S.weeks&&(u+="<th>"+l+"</th>")),u+='<td data-date="'+o+'" data-month="'+s+'" data-year="'+a+'" class="xdsoft_date xdsoft_day_of_week'+f.getDay()+" "+y.join(" ")+'" title="'+d+'"><div>'+o+"</div></td>",f.getDay()===S.dayOfWeekStartPrev&&(u+="</tr>",A=!0),f.setDate(o+1);if(u+="</tbody></table>",I.html(u),L.find(".xdsoft_label span").eq(0).text(S.i18n[S.lang].months[P.currentTime.getMonth()]),L.find(".xdsoft_label span").eq(1).text(P.currentTime.getFullYear()),b="",E="",s="",c=function(e,t){var i,r,n=P.now();n.setHours(e),e=parseInt(n.getHours(),10),n.setMinutes(t),t=parseInt(n.getMinutes(),10),i=new Date(P.currentTime),i.setHours(e),i.setMinutes(t),y=[],(S.minDateTime!==!1&&S.minDateTime>i||S.maxTime!==!1&&P.strtotime(S.maxTime).getTime()<n.getTime()||S.minTime!==!1&&P.strtotime(S.minTime).getTime()>n.getTime())&&y.push("xdsoft_disabled"),(S.minDateTime!==!1&&S.minDateTime>i||S.disabledMinTime!==!1&&n.getTime()>P.strtotime(S.disabledMinTime).getTime()&&S.disabledMaxTime!==!1&&n.getTime()<P.strtotime(S.disabledMaxTime).getTime())&&y.push("xdsoft_disabled"),r=new Date(P.currentTime),r.setHours(parseInt(P.currentTime.getHours(),10)),r.setMinutes(Math[S.roundTime](P.currentTime.getMinutes()/S.step)*S.step),(S.initTime||S.defaultSelect||D.data("changed"))&&r.getHours()===parseInt(e,10)&&(S.step>59||r.getMinutes()===parseInt(t,10))&&(S.defaultSelect||D.data("changed")?y.push("xdsoft_current"):S.initTime&&y.push("xdsoft_init_time")),parseInt(m.getHours(),10)===parseInt(e,10)&&parseInt(m.getMinutes(),10)===parseInt(t,10)&&y.push("xdsoft_today"),b+='<div class="xdsoft_time '+y.join(" ")+'" data-hour="'+e+'" data-minute="'+t+'">'+n.dateFormat(S.formatTime)+"</div>"},S.allowTimes&&e.isArray(S.allowTimes)&&S.allowTimes.length)for(p=0;p<S.allowTimes.length;p+=1)E=P.strtotime(S.allowTimes[p]).getHours(),s=P.strtotime(S.allowTimes[p]).getMinutes(),c(E,s);else for(p=0,t=0;p<(S.hours12?12:24);p+=1)for(t=0;60>t;t+=S.step)E=(10>p?"0":"")+p,s=(10>t?"0":"")+t,c(E,s);for(F.html(b),i="",p=0,p=parseInt(S.yearStart,10)+S.yearOffset;p<=parseInt(S.yearEnd,10)+S.yearOffset;p+=1)i+='<div class="xdsoft_option '+(P.currentTime.getFullYear()===p?"xdsoft_current":"")+'" data-value="'+p+'">'+p+"</div>";for(j.children().eq(0).html(i),p=parseInt(S.monthStart,10),i="";p<=parseInt(S.monthEnd,10);p+=1)i+='<div class="xdsoft_option '+(P.currentTime.getMonth()===p?"xdsoft_current":"")+'" data-value="'+p+'">'+S.i18n[S.lang].months[p]+"</div>";U.children().eq(0).html(i),e(D).trigger("generate.xdsoft")},10),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(S.timepicker){var e,t,i,r;F.find(".xdsoft_current").length?e=".xdsoft_current":F.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time"),e?(t=N[0].clientHeight,i=F[0].offsetHeight,r=F.find(e).index()*S.timeHeightInTimePicker+1,r>i-t&&(r=i-t),N.trigger("scroll_element.xdsoft_scroller",[parseInt(r,10)/(i-t)])):N.trigger("scroll_element.xdsoft_scroller",[0])}}),R=0,I.on("click.xdsoft","td",function(i){i.stopPropagation(),R+=1;var r=e(this),n=P.currentTime;return void 0!==n&&null!==n||(P.currentTime=P.now(),n=P.currentTime),r.hasClass("xdsoft_disabled")?!1:(n.setDate(1),n.setFullYear(r.data("year")),n.setMonth(r.data("month")),n.setDate(r.data("date")),D.trigger("select.xdsoft",[n]),t.val(P.str()),(R>1||S.closeOnDateSelect===!0||S.closeOnDateSelect===!1&&!S.timepicker)&&!S.inline&&D.trigger("close.xdsoft"),S.onSelectDate&&e.isFunction(S.onSelectDate)&&S.onSelectDate.call(D,P.currentTime,D.data("input"),i),D.data("changed",!0),D.trigger("xchange.xdsoft"),D.trigger("changedatetime.xdsoft"),void setTimeout(function(){R=0},200))}),F.on("click.xdsoft","div",function(t){t.stopPropagation();var i=e(this),r=P.currentTime;return void 0!==r&&null!==r||(P.currentTime=P.now(),r=P.currentTime),i.hasClass("xdsoft_disabled")?!1:(r.setHours(i.data("hour")),r.setMinutes(i.data("minute")),D.trigger("select.xdsoft",[r]),D.data("input").val(P.str()),S.inline!==!0&&S.closeOnTimeSelect===!0&&D.trigger("close.xdsoft"),S.onSelectTime&&e.isFunction(S.onSelectTime)&&S.onSelectTime.call(D,P.currentTime,D.data("input"),t),D.data("changed",!0),D.trigger("xchange.xdsoft"),void D.trigger("changedatetime.xdsoft"))}),O.on("mousewheel.xdsoft",function(e){return S.scrollMonth?(e.deltaY<0?P.nextMonth():P.prevMonth(),!1):!0}),t.on("mousewheel.xdsoft",function(e){return S.scrollInput?!S.datepicker&&S.timepicker?(k=F.find(".xdsoft_current").length?F.find(".xdsoft_current").eq(0).index():0,k+e.deltaY>=0&&k+e.deltaY<F.children().length&&(k+=e.deltaY),F.children().eq(k).length&&F.children().eq(k).trigger("mousedown"),!1):S.datepicker&&!S.timepicker?(O.trigger(e,[e.deltaY,e.deltaX,e.deltaY]),t.val&&t.val(P.str()),D.trigger("changedatetime.xdsoft"),!1):void 0:!0}),D.on("changedatetime.xdsoft",function(t){if(S.onChangeDateTime&&e.isFunction(S.onChangeDateTime)){var i=D.data("input");S.onChangeDateTime.call(D,P.currentTime,i,t),delete S.value,i.trigger("change")}}).on("generate.xdsoft",function(){S.onGenerate&&e.isFunction(S.onGenerate)&&S.onGenerate.call(D,P.currentTime,D.data("input")),V&&(D.trigger("afterOpen.xdsoft"),V=!1)}).on("click.xdsoft",function(e){e.stopPropagation()}),k=0,M=function(){var t,i=D.data("input").offset(),r=i.top+D.data("input")[0].offsetHeight-1,n=i.left,o="absolute";S.fixed?(r-=e(window).scrollTop(),n-=e(window).scrollLeft(),o="fixed"):(r+D[0].offsetHeight>e(window).height()+e(window).scrollTop()&&(r=i.top-D[0].offsetHeight+1),0>r&&(r=0),n+D[0].offsetWidth>e(window).width()&&(n=e(window).width()-D[0].offsetWidth)),t=D[0];do if(t=t.parentNode,"relative"===window.getComputedStyle(t).getPropertyValue("position")&&e(window).width()>=t.offsetWidth){n-=(e(window).width()-t.offsetWidth)/2;break}while("HTML"!==t.nodeName);D.css({left:n,top:r,position:o})},D.on("open.xdsoft",function(t){var i=!0;S.onShow&&e.isFunction(S.onShow)&&(i=S.onShow.call(D,P.currentTime,D.data("input"),t)),i!==!1&&(D.show(),M(),e(window).off("resize.xdsoft",M).on("resize.xdsoft",M),S.closeOnWithoutClick&&e([document.body,window]).on("mousedown.xdsoft",function r(){D.trigger("close.xdsoft"),e([document.body,window]).off("mousedown.xdsoft",r)}))}).on("close.xdsoft",function(t){var i=!0;L.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),S.onClose&&e.isFunction(S.onClose)&&(i=S.onClose.call(D,P.currentTime,D.data("input"),t)),i===!1||S.opened||S.inline||D.hide(),t.stopPropagation()}).on("toggle.xdsoft",function(e){D.is(":visible")?D.trigger("close.xdsoft"):D.trigger("open.xdsoft")}).data("input",t),G=0,W=0,D.data("xdsoft_datetime",P),D.setOptions(S),P.setCurrentTime(r()),t.data("xdsoft_datetimepicker",D).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(e){t.is(":disabled")||t.data("xdsoft_datetimepicker").is(":visible")&&S.closeOnInputClick||(clearTimeout(G),G=setTimeout(function(){t.is(":disabled")||(V=!0,P.setCurrentTime(r()),D.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var i,r=(this.value,t.which);return-1!==[d].indexOf(r)&&S.enterLikeTab?(i=e("input:visible,textarea:visible"),D.trigger("close.xdsoft"),i.eq(i.index(this)+1).focus(),!1):-1!==[y].indexOf(r)?(D.trigger("close.xdsoft"),!0):void 0})},n=function(t){var i=t.data("xdsoft_datetimepicker");i&&(i.data("xdsoft_datetime",null),i.remove(),t.data("xdsoft_datetimepicker",null).off(".xdsoft"),e(window).off("resize.xdsoft"),e([window,document.body]).off("mousedown.xdsoft"),t.unmousewheel&&t.unmousewheel())},e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode===h&&(_=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode===h&&(_=!1)}),this.each(function(){var t,o=e(this).data("xdsoft_datetimepicker");if(o){if("string"===e.type(i))switch(i){case"show":e(this).select().focus(),o.trigger("open.xdsoft");break;case"hide":o.trigger("close.xdsoft");break;case"toggle":o.trigger("toggle.xdsoft");break;case"destroy":n(e(this));break;case"reset":this.value=this.defaultValue,this.value&&o.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,S.format))||o.data("changed",!1),o.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":t=o.data("input"),t.trigger("blur.xdsoft")}else o.setOptions(i);return 0}"string"!==e.type(i)&&(!S.lazyInit||S.open||S.inline?r(e(this)):R(e(this)))})},e.fn.datetimepicker.defaults=t}(jQuery),function(){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),h=0,d=0,u=0,f=0,p=0,m=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(u=-1*a.detail),"wheelDelta"in a&&(u=a.wheelDelta),"wheelDeltaY"in a&&(u=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*u,u=0),h=0===u?d:u,"deltaY"in a&&(u=-1*a.deltaY,h=u),"deltaX"in a&&(d=a.deltaX,0===u&&(h=-1*d)),0!==u||0!==d){if(1===a.deltaMode){var g=e.data(this,"mousewheel-line-height");h*=g,u*=g,d*=g}else if(2===a.deltaMode){var v=e.data(this,"mousewheel-page-height");h*=v,u*=v,d*=v}if(f=Math.max(Math.abs(u),Math.abs(d)),(!o||o>f)&&(o=f,r(a,f)&&(o/=40)),r(a,f)&&(h/=40,d/=40,u/=40),h=Math[h>=1?"floor":"ceil"](h/o),d=Math[d>=1?"floor":"ceil"](d/o),u=Math[u>=1?"floor":"ceil"](u/o),c.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=t.clientX-y.left,m=t.clientY-y.top}return t.deltaX=d,t.deltaY=u,t.deltaFactor=o,t.offsetX=p,t.offsetY=m,t.deltaMode=0,s.unshift(t,h,d,u),n&&clearTimeout(n),n=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function i(){o=null}function r(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var n,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var h=a.length;h;)e.event.fixHooks[a[--h]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=s.length;i;)this.addEventListener(s[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=s.length;i;)this.removeEventListener(s[--i],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var i=e(t),r=i["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(e){if("unixtime"==e)return parseInt(this.getTime()/1e3);null==Date.formatFunctions[e]&&Date.createNewFormat(e);var t=Date.formatFunctions[e];return this[t]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var codePrefix="Date.prototype."+funcName+" = function() {return ",code="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;code=0==code.length?'""':code.substring(0,code.length-3),eval(codePrefix+code+";}")},Date.getFormatCode=function(e){switch(e){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(e)+"' + "}},Date.parseDate=function(e,t){if("unixtime"==t)return new Date(isNaN(parseInt(e))?0:1e3*parseInt(e));null==Date.parseFunctions[t]&&Date.createParser(t);var i=Date.parseFunctions[t];return Date[i](e)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$","i"),eval(code)},Date.formatCodeToRegex=function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+t+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(e)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()},Date.prototype.getWeekOfYear=function(){var e=this.getDayOfYear()+(4-this.getDay()),t=new Date(this.getFullYear(),0,1),i=7-t.getDay()+4;return String.leftPad(Math.ceil((e-i)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100||e%400==0&&e)},Date.prototype.getFirstDayOfMonth=function(){var e=(this.getDay()-(this.getDate()-1))%7;return 0>e?e+7:e},Date.prototype.getLastDayOfMonth=function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return 0>e?e+7:e},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(e){return e.replace(/('|\\)/g,"\\$1")},String.leftPad=function(e,t,i){var r=new String(e);for(null==i&&(i=" ");r.length<t;)r=i+r;return r},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}(),!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.JSZipUtils=e():"undefined"!=typeof global?global.JSZipUtils=e():"undefined"!=typeof self&&(self.JSZipUtils=e())}(function(){return function e(t,i,r){function n(a,s){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var h=i[a]={exports:{}};t[a][0].call(h.exports,function(e){var i=t[a][1][e];return n(i?i:e)},h,h.exports,e,t,i,r)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(e,t,i){"use strict";function r(){try{return new window.XMLHttpRequest}catch(e){}}function n(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}var o={};o._getBinaryFromXHR=function(e){return e.response||e.responseText};var a=window.ActiveXObject?function(){return r()||n()}:r;o.getBinaryContent=function(e,t){try{var i=a();i.open("GET",e,!0),"responseType"in i&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.onreadystatechange=function(r){var n,a;if(4===i.readyState)if(200===i.status||0===i.status){n=null,a=null;try{n=o._getBinaryFromXHR(i)}catch(s){a=new Error(s)}t(a,n)}else t(new Error("Ajax error for "+e+" : "+this.status+" "+this.statusText),null)},i.send()}catch(r){t(new Error(r),null)}},t.exports=o},{}]},{},[1])(1)}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.JSZip=e()}}(function(){return function e(t,i,r){function n(a,s){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var h=i[a]={exports:{}};t[a][0].call(h.exports,function(e){var i=t[a][1][e];return n(i?i:e)},h,h.exports,e,t,i,r)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(e,t,i){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(e,t){for(var i,n,o,a,s,l,h,c="",d=0;d<e.length;)i=e.charCodeAt(d++),n=e.charCodeAt(d++),o=e.charCodeAt(d++),a=i>>2,s=(3&i)<<4|n>>4,l=(15&n)<<2|o>>6,h=63&o,isNaN(n)?l=h=64:isNaN(o)&&(h=64),c=c+r.charAt(a)+r.charAt(s)+r.charAt(l)+r.charAt(h);return c},i.decode=function(e,t){var i,n,o,a,s,l,h,c="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)a=r.indexOf(e.charAt(d++)),s=r.indexOf(e.charAt(d++)),l=r.indexOf(e.charAt(d++)),h=r.indexOf(e.charAt(d++)),i=a<<2|s>>4,n=(15&s)<<4|l>>2,o=(3&l)<<6|h,c+=String.fromCharCode(i),64!=l&&(c+=String.fromCharCode(n)),64!=h&&(c+=String.fromCharCode(o));return c}},{}],2:[function(e,t,i){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=r},{}],3:[function(e,t,i){"use strict";i.STORE={magic:"\x00\x00",compress:function(e,t){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},i.DEFLATE=e("./flate")},{"./flate":8}],4:[function(e,t,i){"use strict";var r=e("./utils"),n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(e,t){if("undefined"==typeof e||!e.length)return 0;var i="string"!==r.getTypeOf(e);"undefined"==typeof t&&(t=0);var o=0,a=0,s=0;t=-1^t;for(var l=0,h=e.length;h>l;l++)s=i?e[l]:e.charCodeAt(l),a=255&(t^s),o=n[a],t=t>>>8^o;return-1^t}},{"./utils":21}],5:[function(e,t,i){"use strict";function r(e){this.data=null,this.length=0,this.index=0}var n=e("./utils");r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,i=0;for(this.checkOffset(e),
t=this.index+e-1;t>=this.index;t--)i=(i<<8)+this.byteAt(t);return this.index+=e,i},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1)}},t.exports=r},{"./utils":21}],6:[function(e,t,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!1,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],7:[function(e,t,i){"use strict";var r=e("./utils");i.string2binary=function(e){return r.string2binary(e)},i.string2Uint8Array=function(e){return r.transformTo("uint8array",e)},i.uint8Array2String=function(e){return r.transformTo("string",e)},i.string2Blob=function(e){var t=r.transformTo("arraybuffer",e);return r.arrayBuffer2Blob(t)},i.arrayBuffer2Blob=function(e){return r.arrayBuffer2Blob(e)},i.transformTo=function(e,t){return r.transformTo(e,t)},i.getTypeOf=function(e){return r.getTypeOf(e)},i.checkSupport=function(e){return r.checkSupport(e)},i.MAX_VALUE_16BITS=r.MAX_VALUE_16BITS,i.MAX_VALUE_32BITS=r.MAX_VALUE_32BITS,i.pretty=function(e){return r.pretty(e)},i.findCompression=function(e){return r.findCompression(e)},i.isRegExp=function(e){return r.isRegExp(e)}},{"./utils":21}],8:[function(e,t,i){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=e("pako");i.uncompressInputType=r?"uint8array":"array",i.compressInputType=r?"uint8array":"array",i.magic="\b\x00",i.compress=function(e,t){return n.deflateRaw(e,{level:t.level||-1})},i.uncompress=function(e){return n.inflateRaw(e)}},{pako:24}],9:[function(e,t,i){"use strict";function r(e,t){return this instanceof r?(this.files={},this.comment=null,this.root="",e&&this.load(e,t),void(this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e})):new r(e,t)}var n=e("./base64");r.prototype=e("./object"),r.prototype.load=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.utils=e("./deprecatedPublicUtils"),r.base64={encode:function(e){return n.encode(e)},decode:function(e){return n.decode(e)}},r.compressions=e("./compressions"),t.exports=r},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(e,t,i){"use strict";var r=e("./base64"),n=e("./zipEntries");t.exports=function(e,t){var i,o,a,s;for(t=t||{},t.base64&&(e=r.decode(e)),o=new n(e,t),i=o.files,a=0;a<i.length;a++)s=i[a],this.file(s.fileName,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileComment.length?s.fileComment:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders});return o.zipComment.length&&(this.comment=o.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(e,t,i){(function(e){"use strict";t.exports=function(t,i){return new e(t,i)},t.exports.test=function(t){return e.isBuffer(t)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(e,t,i){"use strict";function r(e){this.data=e,this.length=this.data.length,this.index=0}var n=e("./uint8ArrayReader");r.prototype=new n,r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./uint8ArrayReader":18}],13:[function(e,t,i){"use strict";var r=e("./support"),n=e("./utils"),o=e("./crc32"),a=e("./signature"),s=e("./defaults"),l=e("./base64"),h=e("./compressions"),c=e("./compressedObject"),d=e("./nodeBuffer"),u=e("./utf8"),f=e("./stringWriter"),p=e("./uint8ArrayWriter"),m=function(e){if(e._data instanceof c&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===n.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},g=function(e){var t=m(e),i=n.getTypeOf(t);return"string"===i?!e.options.binary&&r.nodebuffer?d(t,"utf-8"):e.asBinary():t},v=function(e){var t=m(this);return null===t||"undefined"==typeof t?"":(this.options.base64&&(t=l.decode(t)),t=e&&this.options.binary?M.utf8decode(t):n.transformTo("string",t),e||this.options.binary||(t=n.transformTo("string",M.utf8encode(t))),t)},y=function(e,t,i){this.name=e,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this.options=i,this._initialMetadata={dir:i.dir,date:i.date}};y.prototype={asText:function(){return v.call(this,!0)},asBinary:function(){return v.call(this,!1)},asNodeBuffer:function(){var e=g(this);return n.transformTo("nodebuffer",e)},asUint8Array:function(){var e=g(this);return n.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var A=function(e,t){var i,r="";for(i=0;t>i;i++)r+=String.fromCharCode(255&e),e>>>=8;return r},b=function(){var e,t,i={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&"undefined"==typeof i[t]&&(i[t]=arguments[e][t]);return i},E=function(e){return e=e||{},e.base64!==!0||null!==e.binary&&void 0!==e.binary||(e.binary=!0),e=b(e,s),e.date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e},x=function(e,t,i){var r,o=n.getTypeOf(t);if(i=E(i),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(e=T(e)),i.createFolders&&(r=w(e))&&_.call(this,r,!0),i.dir||null===t||"undefined"==typeof t)i.base64=!1,i.binary=!1,t=null,o=null;else if("string"===o)i.binary&&!i.base64&&i.optimizedBinaryString!==!0&&(t=n.string2binary(t));else{if(i.base64=!1,i.binary=!0,!(o||t instanceof c))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===o&&(t=n.transformTo("uint8array",t))}var a=new y(e,t,i);return this.files[e]=a,a},w=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},T=function(e){return"/"!=e.slice(-1)&&(e+="/"),e},_=function(e,t){return t="undefined"!=typeof t?t:!1,e=T(e),this.files[e]||x.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},S=function(e,t,i){var r,a=new c;return e._data instanceof c?(a.uncompressedSize=e._data.uncompressedSize,a.crc32=e._data.crc32,0===a.uncompressedSize||e.dir?(t=h.STORE,a.compressedContent="",a.crc32=0):e._data.compressionMethod===t.magic?a.compressedContent=e._data.getCompressedContent():(r=e._data.getContent(),a.compressedContent=t.compress(n.transformTo(t.compressInputType,r),i))):(r=g(e),r&&0!==r.length&&!e.dir||(t=h.STORE,r=""),a.uncompressedSize=r.length,a.crc32=o(r),a.compressedContent=t.compress(n.transformTo(t.compressInputType,r),i)),a.compressedSize=a.compressedContent.length,a.compressionMethod=t.magic,a},C=function(e,t){var i=e;return e||(i=t?16893:33204),(65535&i)<<16},R=function(e,t){return 63&(e||0)},k=function(e,t,i,r,s){var l,h,c,d,f=(i.compressedContent,n.transformTo("string",u.utf8encode(t.name))),p=t.comment||"",m=n.transformTo("string",u.utf8encode(p)),g=f.length!==t.name.length,v=m.length!==p.length,y=t.options,b="",E="",x="";c=t._initialMetadata.dir!==t.dir?t.dir:y.dir,d=t._initialMetadata.date!==t.date?t.date:y.date;var w=0,T=0;c&&(w|=16),"UNIX"===s?(T=798,w|=C(t.unixPermissions,c)):(T=20,w|=R(t.dosPermissions,c)),l=d.getHours(),l<<=6,l|=d.getMinutes(),l<<=5,l|=d.getSeconds()/2,h=d.getFullYear()-1980,h<<=4,h|=d.getMonth()+1,h<<=5,h|=d.getDate(),g&&(E=A(1,1)+A(o(f),4)+f,b+="up"+A(E.length,2)+E),v&&(x=A(1,1)+A(this.crc32(m),4)+m,b+="uc"+A(x.length,2)+x);var _="";_+="\n\x00",_+=g||v?"\x00\b":"\x00\x00",_+=i.compressionMethod,_+=A(l,2),_+=A(h,2),_+=A(i.crc32,4),_+=A(i.compressedSize,4),_+=A(i.uncompressedSize,4),_+=A(f.length,2),_+=A(b.length,2);var S=a.LOCAL_FILE_HEADER+_+f+b,k=a.CENTRAL_FILE_HEADER+A(T,2)+_+A(m.length,2)+"\x00\x00\x00\x00"+A(w,4)+A(r,4)+f+b+m;return{fileRecord:S,dirRecord:k,compressedObject:i}},M={load:function(e,t){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,i,r,n,o=[];for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],n=new y(r.name,r._data,b(r.options)),i=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(i,n)&&o.push(n));return o},file:function(e,t,i){if(1===arguments.length){if(n.isRegExp(e)){var r=e;return this.filter(function(e,t){return!t.dir&&r.test(e)})}return this.filter(function(t,i){return!i.dir&&t===e})[0]||null}return e=this.root+e,x.call(this,e,t,i),this},folder:function(e){if(!e)return this;if(n.isRegExp(e))return this.filter(function(t,i){return i.dir&&e.test(t)});var t=this.root+e,i=_.call(this,t),r=this.clone();return r.root=i.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var i=this.filter(function(t,i){return i.name.slice(0,e.length)===e}),r=0;r<i.length;r++)delete this.files[i[r].name];return this},generate:function(e){e=b(e||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),n.checkSupport(e.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var t,i,r=[],o=0,s=0,c=n.transformTo("string",this.utf8encode(e.comment||this.comment||""));for(var d in this.files)if(this.files.hasOwnProperty(d)){var u=this.files[d],m=u.options.compression||e.compression.toUpperCase(),g=h[m];if(!g)throw new Error(m+" is not a valid compression method !");var v=u.options.compressionOptions||e.compressionOptions||{},y=S.call(this,u,g,v),E=k.call(this,d,u,y,o,e.platform);o+=E.fileRecord.length+y.compressedSize,s+=E.dirRecord.length,r.push(E)}var x="";x=a.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+A(r.length,2)+A(r.length,2)+A(s,4)+A(o,4)+A(c.length,2)+c;var w=e.type.toLowerCase();for(t="uint8array"===w||"arraybuffer"===w||"blob"===w||"nodebuffer"===w?new p(o+s+x.length):new f(o+s+x.length),i=0;i<r.length;i++)t.append(r[i].fileRecord),t.append(r[i].compressedObject.compressedContent);for(i=0;i<r.length;i++)t.append(r[i].dirRecord);t.append(x);var T=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return n.transformTo(e.type.toLowerCase(),T);case"blob":return n.arrayBuffer2Blob(n.transformTo("arraybuffer",T),e.mimeType);case"base64":return e.base64?l.encode(T):T;default:return T}},crc32:function(e,t){return o(e,t)},utf8encode:function(e){return n.transformTo("string",u.utf8encode(e))},utf8decode:function(e){return u.utf8decode(e)}};t.exports=M},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(e,t,i){"use strict";i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],15:[function(e,t,i){"use strict";function r(e,t){this.data=e,t||(this.data=o.string2binary(this.data)),this.length=this.data.length,this.index=0}var n=e("./dataReader"),o=e("./utils");r.prototype=new n,r.prototype.byteAt=function(e){return this.data.charCodeAt(e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./dataReader":5,"./utils":21}],16:[function(e,t,i){"use strict";var r=e("./utils"),n=function(){this.data=[]};n.prototype={append:function(e){e=r.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},t.exports=n},{"./utils":21}],17:[function(e,t,i){(function(e){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof e,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var t=new ArrayBuffer(0);try{i.blob=0===new Blob([t],{type:"application/zip"}).size}catch(r){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new n;o.append(t),i.blob=0===o.getBlob("application/zip").size}catch(r){i.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(e,t,i){"use strict";function r(e){e&&(this.data=e,this.length=this.data.length,this.index=0)}var n=e("./dataReader");r.prototype=new n,r.prototype.byteAt=function(e){return this.data[e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),i=e.charCodeAt(1),r=e.charCodeAt(2),n=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===i&&this.data[o+2]===r&&this.data[o+3]===n)return o;return-1},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./dataReader":5}],19:[function(e,t,i){"use strict";var r=e("./utils"),n=function(e){this.data=new Uint8Array(e),this.index=0};n.prototype={append:function(e){0!==e.length&&(e=r.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},t.exports=n},{"./utils":21}],20:[function(e,t,i){"use strict";for(var r=e("./utils"),n=e("./support"),o=e("./nodeBuffer"),a=new Array(256),s=0;256>s;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;a[254]=a[254]=1;var l=function(e){var t,i,r,o,a,s=e.length,l=0;for(o=0;s>o;o++)i=e.charCodeAt(o),55296===(64512&i)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),o++)),l+=128>i?1:2048>i?2:65536>i?3:4;for(t=n.uint8array?new Uint8Array(l):new Array(l),a=0,o=0;l>a;o++)i=e.charCodeAt(o),55296===(64512&i)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),o++)),128>i?t[a++]=i:2048>i?(t[a++]=192|i>>>6,t[a++]=128|63&i):65536>i?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t},h=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;i>=0&&128===(192&e[i]);)i--;return 0>i?t:0===i?t:i+a[e[i]]>t?i:t},c=function(e){var t,i,n,o,s=e.length,l=new Array(2*s);for(i=0,t=0;s>t;)if(n=e[t++],128>n)l[i++]=n;else if(o=a[n],o>4)l[i++]=65533,t+=o-1;else{for(n&=2===o?31:3===o?15:7;o>1&&s>t;)n=n<<6|63&e[t++],o--;o>1?l[i++]=65533:65536>n?l[i++]=n:(n-=65536,l[i++]=55296|n>>10&1023,l[i++]=56320|1023&n)}return l.length!==i&&(l.subarray?l=l.subarray(0,i):l.length=i),r.applyFromCharCode(l)};i.utf8encode=function(e){return n.nodebuffer?o(e,"utf-8"):l(e)},i.utf8decode=function(e){if(n.nodebuffer)return r.transformTo("nodebuffer",e).toString("utf-8");e=r.transformTo(n.uint8array?"uint8array":"array",e);for(var t=[],i=0,o=e.length,a=65536;o>i;){var s=h(e,Math.min(i+a,o));n.uint8array?t.push(c(e.subarray(i,s))):t.push(c(e.slice(i,s))),i=s}return t.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(e,t,i){"use strict";function r(e){return e}function n(e,t){for(var i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t}function o(e){var t=65536,r=[],n=e.length,o=i.getTypeOf(e),a=0,s=!0;try{switch(o){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,h(0))}}catch(l){s=!1}if(!s){for(var c="",d=0;d<e.length;d++)c+=String.fromCharCode(e[d]);return c}for(;n>a&&t>1;)try{"array"===o||"nodebuffer"===o?r.push(String.fromCharCode.apply(null,e.slice(a,Math.min(a+t,n)))):r.push(String.fromCharCode.apply(null,e.subarray(a,Math.min(a+t,n)))),a+=t}catch(l){t=Math.floor(t/2)}return r.join("")}function a(e,t){for(var i=0;i<e.length;i++)t[i]=e[i];return t}var s=e("./support"),l=e("./compressions"),h=e("./nodeBuffer");i.string2binary=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(255&e.charCodeAt(i));return t},i.arrayBuffer2Blob=function(e,t){i.checkSupport("blob"),t=t||"application/zip";try{return new Blob([e],{type:t})}catch(r){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new n;return o.append(e),o.getBlob(t)}catch(r){throw new Error("Bug : can't construct the Blob.")}}},i.applyFromCharCode=o;var c={};c.string={string:r,array:function(e){return n(e,new Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return n(e,new Uint8Array(e.length))},nodebuffer:function(e){return n(e,h(e.length))}},c.array={string:o,array:r,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return h(e)}},c.arraybuffer={string:function(e){return o(new Uint8Array(e))},array:function(e){return a(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:r,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return h(new Uint8Array(e))}},c.uint8array={string:o,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:r,nodebuffer:function(e){return h(e)}},c.nodebuffer={string:o,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return a(e,new Uint8Array(e.length))},nodebuffer:r},i.transformTo=function(e,t){if(t||(t=""),!e)return t;i.checkSupport(e);var r=i.getTypeOf(t),n=c[r][e](t);return n},i.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":s.nodebuffer&&h.test(e)?"nodebuffer":s.uint8array&&e instanceof Uint8Array?"uint8array":s.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(e){var t=s[e.toLowerCase()];if(!t)throw new Error(e+" is not supported by this browser")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(e){var t,i,r="";for(i=0;i<(e||"").length;i++)t=e.charCodeAt(i),r+="\\x"+(16>t?"0":"")+t.toString(16).toUpperCase();return r},i.findCompression=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null},i.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(e,t,i){"use strict";function r(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}var n=e("./stringReader"),o=e("./nodeBufferReader"),a=e("./uint8ArrayReader"),s=e("./utils"),l=e("./signature"),h=e("./zipEntry"),c=e("./support"),d=e("./object");r.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+s.pretty(t)+", expected "+s.pretty(e)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=d.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,i,r=this.zip64EndOfCentralSize-44,n=0;r>n;)e=this.reader.readInt(2),t=this.reader.readInt(4),i=this.reader.readString(t),this.zip64ExtensibleData[e]={id:e,length:t,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===l.CENTRAL_FILE_HEADER;)e=new h({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(-1===e){var t=!0;try{this.reader.setIndex(0),this.checkSignature(l.LOCAL_FILE_HEADER),t=!1}catch(i){}throw t?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(e),this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===e)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(e),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(e){var t=s.getTypeOf(e);"string"!==t||c.uint8array?"nodebuffer"===t?this.reader=new o(e):this.reader=new a(s.transformTo("uint8array",e)):this.reader=new n(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=r},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(e,t,i){"use strict";function r(e,t){this.options=e,this.loadOptions=t}var n=e("./stringReader"),o=e("./utils"),a=e("./compressedObject"),s=e("./object"),l=0,h=3;r.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(e,t,i){return function(){var r=e.index;e.setIndex(t);var n=e.readData(i);return e.setIndex(r),n}},prepareContent:function(e,t,i,r,n){return function(){var e=o.transformTo(r.uncompressInputType,this.getCompressedContent()),t=r.uncompress(e);if(t.length!==n)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,i;if(e.skip(22),this.fileNameLength=e.readInt(2),i=e.readInt(2),this.fileName=e.readString(this.fileNameLength),e.skip(i),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(t=o.findCompression(this.compressionMethod),null===t)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=o.transformTo("string",this.decompressed.getContent()),s.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readInt(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readString(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),e===l&&(this.dosPermissions=63&this.externalFileAttributes),e===h&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=new n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,i,r,n=e.index;for(this.extraFields=this.extraFields||{};e.index<n+this.extraFieldsLength;)t=e.readInt(2),i=e.readInt(2),r=e.readString(i),this.extraFields[t]={id:t,length:i,value:r}},handleUTF8:function(){if(this.useUTF8())this.fileName=s.utf8decode(this.fileName),this.fileComment=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();null!==e&&(this.fileName=e);var t=this.findExtraFieldUnicodeComment();null!==t&&(this.fileComment=t)}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new n(e.value);return 1!==t.readInt(1)?null:s.crc32(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new n(e.value);return 1!==t.readInt(1)?null:s.crc32(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readString(e.length-5))}return null}},t.exports=r},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(e,t,i){"use strict";var r=e("./lib/utils/common").assign,n=e("./lib/deflate"),o=e("./lib/inflate"),a=e("./lib/zlib/constants"),s={};r(s,n,o,a),t.exports=s},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(e,t,i){"use strict";function r(e,t){var i=new y(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}function n(e,t){return t=t||{},t.raw=!0,r(e,t)}function o(e,t){return t=t||{},t.gzip=!0,r(e,t)}var a=e("./zlib/deflate.js"),s=e("./utils/common"),l=e("./utils/strings"),h=e("./zlib/messages"),c=e("./zlib/zstream"),d=0,u=4,f=0,p=1,m=-1,g=0,v=8,y=function(e){this.options=s.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==f)throw new Error(h[i]);t.header&&a.deflateSetHeader(this.strm,t.header)};y.prototype.push=function(e,t){var i,r,n=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?u:d,"string"==typeof e?n.input=l.string2buf(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new s.Buf8(o),n.next_out=0,n.avail_out=o),i=a.deflate(n,r),i!==p&&i!==f)return this.onEnd(i),this.ended=!0,!1;(0===n.avail_out||0===n.avail_in&&r===u)&&("string"===this.options.to?this.onData(l.buf2binstring(s.shrinkBuf(n.output,n.next_out))):this.onData(s.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||0===n.avail_out)&&i!==p);return r===u?(i=a.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===f):!0},y.prototype.onData=function(e){this.chunks.push(e)},y.prototype.onEnd=function(e){e===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=y,i.deflate=r,i.deflateRaw=n,i.gzip=o},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(e,t,i){"use strict";function r(e,t){var i=new u(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}function n(e,t){return t=t||{},t.raw=!0,r(e,t)}var o=e("./zlib/inflate.js"),a=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/constants"),h=e("./zlib/messages"),c=e("./zlib/zstream"),d=e("./zlib/gzheader"),u=function(e){this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=o.inflateInit2(this.strm,t.windowBits);if(i!==l.Z_OK)throw new Error(h[i]);this.header=new d,o.inflateGetHeader(this.strm,this.header)};u.prototype.push=function(e,t){var i,r,n,h,c,d=this.strm,u=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?d.input=s.binstring2buf(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new a.Buf8(u),d.next_out=0,d.avail_out=u),i=o.inflate(d,l.Z_NO_FLUSH),i!==l.Z_STREAM_END&&i!==l.Z_OK)return this.onEnd(i),this.ended=!0,!1;d.next_out&&(0===d.avail_out||i===l.Z_STREAM_END||0===d.avail_in&&r===l.Z_FINISH)&&("string"===this.options.to?(n=s.utf8border(d.output,d.next_out),h=d.next_out-n,c=s.buf2string(d.output,n),d.next_out=h,d.avail_out=u-h,h&&a.arraySet(d.output,d.output,n,h,0),this.onData(c)):this.onData(a.shrinkBuf(d.output,d.next_out)))}while(d.avail_in>0&&i!==l.Z_STREAM_END);return i===l.Z_STREAM_END&&(r=l.Z_FINISH),r===l.Z_FINISH?(i=o.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===l.Z_OK):!0},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=u,i.inflate=r,i.inflateRaw=n,i.ungzip=r},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(e,t,i){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,i,r,n){if(t.subarray&&e.subarray)return void e.set(t.subarray(i,i+r),n);
for(var o=0;r>o;o++)e[n+o]=t[i+o]},flattenChunks:function(e){var t,i,r,n,o,a;for(r=0,t=0,i=e.length;i>t;t++)r+=e[t].length;for(a=new Uint8Array(r),n=0,t=0,i=e.length;i>t;t++)o=e[t],a.set(o,n),n+=o.length;return a}},o={arraySet:function(e,t,i,r,n){for(var o=0;r>o;o++)e[n+o]=t[i+o]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(r)},{}],28:[function(e,t,i){"use strict";function r(e,t){if(65537>t&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var i="",r=0;t>r;r++)i+=String.fromCharCode(e[r]);return i}var n=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(s){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){a=!1}for(var l=new n.Buf8(256),h=0;256>h;h++)l[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;l[254]=l[254]=1,i.string2buf=function(e){var t,i,r,o,a,s=e.length,l=0;for(o=0;s>o;o++)i=e.charCodeAt(o),55296===(64512&i)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),o++)),l+=128>i?1:2048>i?2:65536>i?3:4;for(t=new n.Buf8(l),a=0,o=0;l>a;o++)i=e.charCodeAt(o),55296===(64512&i)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),o++)),128>i?t[a++]=i:2048>i?(t[a++]=192|i>>>6,t[a++]=128|63&i):65536>i?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t},i.buf2binstring=function(e){return r(e,e.length)},i.binstring2buf=function(e){for(var t=new n.Buf8(e.length),i=0,r=t.length;r>i;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,n,o,a,s=t||e.length,h=new Array(2*s);for(n=0,i=0;s>i;)if(o=e[i++],128>o)h[n++]=o;else if(a=l[o],a>4)h[n++]=65533,i+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&s>i;)o=o<<6|63&e[i++],a--;a>1?h[n++]=65533:65536>o?h[n++]=o:(o-=65536,h[n++]=55296|o>>10&1023,h[n++]=56320|1023&o)}return r(h,n)},i.utf8border=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;i>=0&&128===(192&e[i]);)i--;return 0>i?t:0===i?t:i+l[e[i]]>t?i:t}},{"./common":27}],29:[function(e,t,i){"use strict";function r(e,t,i,r){for(var n=65535&e|0,o=e>>>16&65535|0,a=0;0!==i;){a=i>2e3?2e3:i,i-=a;do n=n+t[r++]|0,o=o+n|0;while(--a);n%=65521,o%=65521}return n|o<<16|0}t.exports=r},{}],30:[function(e,t,i){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(e,t,i){"use strict";function r(){for(var e,t=[],i=0;256>i;i++){e=i;for(var r=0;8>r;r++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}function n(e,t,i,r){var n=o,a=r+i;e=-1^e;for(var s=r;a>s;s++)e=e>>>8^n[255&(e^t[s])];return-1^e}var o=r();t.exports=n},{}],32:[function(e,t,i){"use strict";function r(e,t){return e.msg=D[t],t}function n(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(R.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function s(e,t){k._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function h(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,i,r){var n=e.avail_in;return n>r&&(n=r),0===n?0:(e.avail_in-=n,R.arraySet(t,e.input,e.next_in,n,i),1===e.state.wrap?e.adler=M(e.adler,t,n,i):2===e.state.wrap&&(e.adler=P(e.adler,t,n,i)),e.next_in+=n,e.total_in+=n,n)}function d(e,t){var i,r,n=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-he?e.strstart-(e.w_size-he):0,h=e.window,c=e.w_mask,d=e.prev,u=e.strstart+le,f=h[o+a-1],p=h[o+a];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,h[i+a]===p&&h[i+a-1]===f&&h[i]===h[o]&&h[++i]===h[o+1]){o+=2,i++;do;while(h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&u>o);if(r=le-(u-o),o=u-le,r>a){if(e.match_start=t,a=r,r>=s)break;f=h[o+a-1],p=h[o+a]}}while((t=d[t&c])>l&&0!==--n);return a<=e.lookahead?a:e.lookahead}function u(e){var t,i,r,n,o,a=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-he)){R.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,i=e.hash_size,t=i;do r=e.head[--t],e.head[t]=r>=a?r-a:0;while(--i);i=a,t=i;do r=e.prev[--t],e.prev[t]=r>=a?r-a:0;while(--i);n+=a}if(0===e.strm.avail_in)break;if(i=c(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=i,e.lookahead+e.insert>=se)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+se-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<se)););}while(e.lookahead<he&&0!==e.strm.avail_in)}function f(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(u(e),0===e.lookahead&&t===H)return ye;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+i;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return ye;if(e.strstart-e.block_start>=e.w_size-he&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===I?(s(e,!0),0===e.strm.avail_out?be:Ee):e.strstart>e.block_start&&(s(e,!1),0===e.strm.avail_out)?ye:ye}function p(e,t){for(var i,r;;){if(e.lookahead<he){if(u(e),e.lookahead<he&&t===H)return ye;if(0===e.lookahead)break}if(i=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-he&&(e.match_length=d(e,i)),e.match_length>=se)if(r=k._tr_tally(e,e.strstart-e.match_start,e.match_length-se),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=e.strstart<se-1?e.strstart:se-1,t===I?(s(e,!0),0===e.strm.avail_out?be:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:Ae}function m(e,t){for(var i,r,n;;){if(e.lookahead<he){if(u(e),e.lookahead<he&&t===H)return ye;if(0===e.lookahead)break}if(i=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=se-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-he&&(e.match_length=d(e,i),e.match_length<=5&&(e.strategy===G||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),e.prev_length>=se&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-se,r=k._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-se),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=se-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return ye}else if(e.match_available){if(r=k._tr_tally(e,0,e.window[e.strstart-1]),r&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ye}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=k._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===I?(s(e,!0),0===e.strm.avail_out?be:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:Ae}function g(e,t){for(var i,r,n,o,a=e.window;;){if(e.lookahead<=le){if(u(e),e.lookahead<=le&&t===H)return ye;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=se&&e.strstart>0&&(n=e.strstart-1,r=a[n],r===a[++n]&&r===a[++n]&&r===a[++n])){o=e.strstart+le;do;while(r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&o>n);e.match_length=le-(o-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=se?(i=k._tr_tally(e,1,e.match_length-se),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===I?(s(e,!0),0===e.strm.avail_out?be:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:Ae}function v(e,t){for(var i;;){if(0===e.lookahead&&(u(e),0===e.lookahead)){if(t===H)return ye;break}if(e.match_length=0,i=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===I?(s(e,!0),0===e.strm.avail_out?be:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:Ae}function y(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=C[e.level].max_lazy,e.good_match=C[e.level].good_length,e.nice_match=C[e.level].nice_length,e.max_chain_length=C[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,e.match_available=0,e.ins_h=0}function A(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new R.Buf16(2*oe),this.dyn_dtree=new R.Buf16(2*(2*re+1)),this.bl_tree=new R.Buf16(2*(2*ne+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new R.Buf16(ae+1),this.heap=new R.Buf16(2*ie+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new R.Buf16(2*ie+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Q,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?de:ge,e.adler=2===t.wrap?0:1,t.last_flush=H,k._tr_init(t),N):r(e,z)}function E(e){var t=b(e);return t===N&&y(e.state),t}function x(e,t){return e&&e.state?2!==e.state.wrap?z:(e.state.gzhead=t,N):z}function w(e,t,i,n,o,a){if(!e)return z;var s=1;if(t===V&&(t=6),0>n?(s=0,n=-n):n>15&&(s=2,n-=16),1>o||o>K||i!==Z||8>n||n>15||0>t||t>9||0>a||a>q)return r(e,z);8===n&&(n=9);var l=new A;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+se-1)/se),l.window=new R.Buf8(2*l.w_size),l.head=new R.Buf16(l.hash_size),l.prev=new R.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new R.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=i,E(e)}function T(e,t){return w(e,t,Z,J,$,X)}function _(e,t){var i,s,c,d;if(!e||!e.state||t>B||0>t)return e?r(e,z):z;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===ve&&t!==I)return r(e,0===e.avail_out?j:z);if(s.strm=e,i=s.last_flush,s.last_flush=t,s.status===de)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=P(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=ue):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),l(s,xe),s.status=ge);else{var u=Z+(s.w_bits-8<<4)<<8,f=-1;f=s.strategy>=W||s.level<2?0:s.level<6?1:6===s.level?2:3,u|=f<<6,0!==s.strstart&&(u|=ce),u+=31-u%31,s.status=ge,h(s,u),0!==s.strstart&&(h(s,e.adler>>>16),h(s,65535&e.adler)),e.adler=1}if(s.status===ue)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=fe)}else s.status=fe;if(s.status===fe)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),0===d&&(s.gzindex=0,s.status=pe)}else s.status=pe;if(s.status===pe)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>c&&(e.adler=P(e.adler,s.pending_buf,s.pending-c,c)),0===d&&(s.status=me)}else s.status=me;if(s.status===me&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=ge)):s.status=ge),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,N}else if(0===e.avail_in&&n(t)<=n(i)&&t!==I)return r(e,j);if(s.status===ve&&0!==e.avail_in)return r(e,j);if(0!==e.avail_in||0!==s.lookahead||t!==H&&s.status!==ve){var p=s.strategy===W?v(s,t):s.strategy===Y?g(s,t):C[s.level].func(s,t);if(p!==be&&p!==Ee||(s.status=ve),p===ye||p===be)return 0===e.avail_out&&(s.last_flush=-1),N;if(p===Ae&&(t===O?k._tr_align(s):t!==B&&(k._tr_stored_block(s,0,0,!1),t===L&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,N}return t!==I?N:s.wrap<=0?F:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(h(s,e.adler>>>16),h(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?N:F)}function S(e){var t;return e&&e.state?(t=e.state.status,t!==de&&t!==ue&&t!==fe&&t!==pe&&t!==me&&t!==ge&&t!==ve?r(e,z):(e.state=null,t===ge?r(e,U):N)):z}var C,R=e("../utils/common"),k=e("./trees"),M=e("./adler32"),P=e("./crc32"),D=e("./messages"),H=0,O=1,L=3,I=4,B=5,N=0,F=1,z=-2,U=-3,j=-5,V=-1,G=1,W=2,Y=3,q=4,X=0,Q=2,Z=8,K=9,J=15,$=8,ee=29,te=256,ie=te+1+ee,re=30,ne=19,oe=2*ie+1,ae=15,se=3,le=258,he=le+se+1,ce=32,de=42,ue=69,fe=73,pe=91,me=103,ge=113,ve=666,ye=1,Ae=2,be=3,Ee=4,xe=3,we=function(e,t,i,r,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=r,this.func=n};C=[new we(0,0,0,0,f),new we(4,4,8,4,p),new we(4,5,16,8,p),new we(4,6,32,32,p),new we(4,4,16,16,m),new we(8,16,32,32,m),new we(8,16,128,128,m),new we(8,32,128,256,m),new we(32,128,258,1024,m),new we(32,258,258,4096,m)],i.deflateInit=T,i.deflateInit2=w,i.deflateReset=E,i.deflateResetKeep=b,i.deflateSetHeader=x,i.deflate=_,i.deflateEnd=S,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(e,t,i){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=r},{}],34:[function(e,t,i){"use strict";var r=30,n=12;t.exports=function(e,t){var i,o,a,s,l,h,c,d,u,f,p,m,g,v,y,A,b,E,x,w,T,_,S,C,R;i=e.state,o=e.next_in,C=e.input,a=o+(e.avail_in-5),s=e.next_out,R=e.output,l=s-(t-e.avail_out),h=s+(e.avail_out-257),c=i.dmax,d=i.wsize,u=i.whave,f=i.wnext,p=i.window,m=i.hold,g=i.bits,v=i.lencode,y=i.distcode,A=(1<<i.lenbits)-1,b=(1<<i.distbits)-1;e:do{15>g&&(m+=C[o++]<<g,g+=8,m+=C[o++]<<g,g+=8),E=v[m&A];t:for(;;){if(x=E>>>24,m>>>=x,g-=x,x=E>>>16&255,0===x)R[s++]=65535&E;else{if(!(16&x)){if(0===(64&x)){E=v[(65535&E)+(m&(1<<x)-1)];continue t}if(32&x){i.mode=n;break e}e.msg="invalid literal/length code",i.mode=r;break e}w=65535&E,x&=15,x&&(x>g&&(m+=C[o++]<<g,g+=8),w+=m&(1<<x)-1,m>>>=x,g-=x),15>g&&(m+=C[o++]<<g,g+=8,m+=C[o++]<<g,g+=8),E=y[m&b];i:for(;;){if(x=E>>>24,m>>>=x,g-=x,x=E>>>16&255,!(16&x)){if(0===(64&x)){E=y[(65535&E)+(m&(1<<x)-1)];continue i}e.msg="invalid distance code",i.mode=r;break e}if(T=65535&E,x&=15,x>g&&(m+=C[o++]<<g,g+=8,x>g&&(m+=C[o++]<<g,g+=8)),T+=m&(1<<x)-1,T>c){e.msg="invalid distance too far back",i.mode=r;break e}if(m>>>=x,g-=x,x=s-l,T>x){if(x=T-x,x>u&&i.sane){e.msg="invalid distance too far back",i.mode=r;break e}if(_=0,S=p,0===f){if(_+=d-x,w>x){w-=x;do R[s++]=p[_++];while(--x);_=s-T,S=R}}else if(x>f){if(_+=d+f-x,x-=f,w>x){w-=x;do R[s++]=p[_++];while(--x);if(_=0,w>f){x=f,w-=x;do R[s++]=p[_++];while(--x);_=s-T,S=R}}}else if(_+=f-x,w>x){w-=x;do R[s++]=p[_++];while(--x);_=s-T,S=R}for(;w>2;)R[s++]=S[_++],R[s++]=S[_++],R[s++]=S[_++],w-=3;w&&(R[s++]=S[_++],w>1&&(R[s++]=S[_++]))}else{_=s-T;do R[s++]=R[_++],R[s++]=R[_++],R[s++]=R[_++],w-=3;while(w>2);w&&(R[s++]=R[_++],w>1&&(R[s++]=R[_++]))}break}}break}}while(a>o&&h>s);w=g>>3,o-=w,g-=w<<3,m&=(1<<g)-1,e.next_in=o,e.next_out=s,e.avail_in=a>o?5+(a-o):5-(o-a),e.avail_out=h>s?257+(h-s):257-(s-h),i.hold=m,i.bits=g}},{}],35:[function(e,t,i){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=I,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new v.Buf32(pe),t.distcode=t.distdyn=new v.Buf32(me),t.sane=1,t.back=-1,R):P}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):P}function s(e,t){var i,r;return e&&e.state?(r=e.state,0>t?(i=0,t=-t):(i=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?P:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=i,r.wbits=t,a(e))):P}function l(e,t){var i,r;return e?(r=new n,e.state=r,r.window=null,i=s(e,t),i!==R&&(e.state=null),i):P}function h(e){return l(e,ve)}function c(e){if(ye){var t;for(m=new v.Buf32(512),g=new v.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(E(w,e.lens,0,288,m,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;E(T,e.lens,0,32,g,0,e.work,{bits:5}),ye=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function d(e,t,i,r){var n,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new v.Buf8(o.wsize)),r>=o.wsize?(v.arraySet(o.window,t,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(n=o.wsize-o.wnext,n>r&&(n=r),v.arraySet(o.window,t,i-r,n,o.wnext),r-=n,r?(v.arraySet(o.window,t,i-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=n,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=n))),0}function u(e,t){var i,n,o,a,s,l,h,u,f,p,m,g,pe,me,ge,ve,ye,Ae,be,Ee,xe,we,Te,_e,Se=0,Ce=new v.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return P;i=e.state,i.mode===q&&(i.mode=X),s=e.next_out,o=e.output,h=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,u=i.hold,f=i.bits,p=l,m=h,we=R;e:for(;;)switch(i.mode){case I:if(0===i.wrap){i.mode=X;break}for(;16>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(2&i.wrap&&35615===u){i.check=0,Ce[0]=255&u,Ce[1]=u>>>8&255,i.check=A(i.check,Ce,2,0),u=0,f=0,i.mode=B;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",i.mode=de;break}if((15&u)!==L){e.msg="unknown compression method",i.mode=de;break}if(u>>>=4,f-=4,xe=(15&u)+8,0===i.wbits)i.wbits=xe;else if(xe>i.wbits){e.msg="invalid window size",i.mode=de;break}i.dmax=1<<xe,e.adler=i.check=1,i.mode=512&u?W:q,u=0,f=0;break;case B:for(;16>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(i.flags=u,(255&i.flags)!==L){e.msg="unknown compression method",i.mode=de;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=de;break}i.head&&(i.head.text=u>>8&1),512&i.flags&&(Ce[0]=255&u,Ce[1]=u>>>8&255,i.check=A(i.check,Ce,2,0)),u=0,f=0,i.mode=N;case N:for(;32>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.head&&(i.head.time=u),512&i.flags&&(Ce[0]=255&u,Ce[1]=u>>>8&255,Ce[2]=u>>>16&255,Ce[3]=u>>>24&255,i.check=A(i.check,Ce,4,0)),u=0,f=0,i.mode=F;case F:for(;16>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.head&&(i.head.xflags=255&u,i.head.os=u>>8),512&i.flags&&(Ce[0]=255&u,Ce[1]=u>>>8&255,i.check=A(i.check,Ce,2,0)),u=0,f=0,i.mode=z;case z:if(1024&i.flags){for(;16>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.length=u,i.head&&(i.head.extra_len=u),512&i.flags&&(Ce[0]=255&u,Ce[1]=u>>>8&255,i.check=A(i.check,Ce,2,0)),u=0,f=0}else i.head&&(i.head.extra=null);i.mode=U;case U:if(1024&i.flags&&(g=i.length,g>l&&(g=l),g&&(i.head&&(xe=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),v.arraySet(i.head.extra,n,a,g,xe)),512&i.flags&&(i.check=A(i.check,n,g,a)),l-=g,a+=g,i.length-=g),i.length))break e;i.length=0,i.mode=j;case j:if(2048&i.flags){if(0===l)break e;g=0;do xe=n[a+g++],i.head&&xe&&i.length<65536&&(i.head.name+=String.fromCharCode(xe));while(xe&&l>g);if(512&i.flags&&(i.check=A(i.check,n,g,a)),l-=g,a+=g,xe)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=V;case V:if(4096&i.flags){if(0===l)break e;g=0;do xe=n[a+g++],i.head&&xe&&i.length<65536&&(i.head.comment+=String.fromCharCode(xe));while(xe&&l>g);if(512&i.flags&&(i.check=A(i.check,n,g,a)),l-=g,a+=g,xe)break e}else i.head&&(i.head.comment=null);i.mode=G;case G:if(512&i.flags){for(;16>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(u!==(65535&i.check)){e.msg="header crc mismatch",i.mode=de;break}u=0,f=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=q;break;case W:for(;32>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}e.adler=i.check=r(u),u=0,f=0,i.mode=Y;case Y:if(0===i.havedict)return e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,i.hold=u,i.bits=f,M;e.adler=i.check=1,i.mode=q;case q:if(t===S||t===C)break e;case X:if(i.last){u>>>=7&f,f-=7&f,i.mode=le;break}for(;3>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}switch(i.last=1&u,u>>>=1,f-=1,3&u){case 0:i.mode=Q;break;case 1:if(c(i),i.mode=te,t===C){u>>>=2,f-=2;break e}break;case 2:i.mode=J;break;case 3:e.msg="invalid block type",i.mode=de}u>>>=2,f-=2;break;case Q:for(u>>>=7&f,f-=7&f;32>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if((65535&u)!==(u>>>16^65535)){e.msg="invalid stored block lengths",i.mode=de;break}if(i.length=65535&u,u=0,f=0,i.mode=Z,t===C)break e;case Z:i.mode=K;case K:if(g=i.length){if(g>l&&(g=l),g>h&&(g=h),0===g)break e;v.arraySet(o,n,a,g,s),l-=g,a+=g,h-=g,s+=g,i.length-=g;break}i.mode=q;break;case J:for(;14>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(i.nlen=(31&u)+257,u>>>=5,f-=5,i.ndist=(31&u)+1,u>>>=5,f-=5,i.ncode=(15&u)+4,u>>>=4,f-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=de;break}i.have=0,i.mode=$;case $:for(;i.have<i.ncode;){for(;3>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.lens[Re[i.have++]]=7&u,u>>>=3,f-=3}for(;i.have<19;)i.lens[Re[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Te={bits:i.lenbits},we=E(x,i.lens,0,19,i.lencode,0,i.work,Te),i.lenbits=Te.bits,we){e.msg="invalid code lengths set",i.mode=de;break}i.have=0,i.mode=ee;case ee:for(;i.have<i.nlen+i.ndist;){for(;Se=i.lencode[u&(1<<i.lenbits)-1],ge=Se>>>24,ve=Se>>>16&255,ye=65535&Se,!(f>=ge);){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(16>ye)u>>>=ge,f-=ge,i.lens[i.have++]=ye;else{if(16===ye){for(_e=ge+2;_e>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(u>>>=ge,f-=ge,0===i.have){e.msg="invalid bit length repeat",i.mode=de;break}xe=i.lens[i.have-1],g=3+(3&u),u>>>=2,f-=2}else if(17===ye){for(_e=ge+3;_e>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}u>>>=ge,f-=ge,xe=0,g=3+(7&u),u>>>=3,f-=3}else{for(_e=ge+7;_e>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}u>>>=ge,f-=ge,xe=0,g=11+(127&u),u>>>=7,f-=7}if(i.have+g>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=de;break}for(;g--;)i.lens[i.have++]=xe}}if(i.mode===de)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=de;break}if(i.lenbits=9,Te={bits:i.lenbits},we=E(w,i.lens,0,i.nlen,i.lencode,0,i.work,Te),i.lenbits=Te.bits,we){e.msg="invalid literal/lengths set",i.mode=de;break}if(i.distbits=6,i.distcode=i.distdyn,Te={bits:i.distbits},we=E(T,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Te),i.distbits=Te.bits,we){e.msg="invalid distances set",i.mode=de;break}if(i.mode=te,t===C)break e;case te:i.mode=ie;case ie:if(l>=6&&h>=258){e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,i.hold=u,i.bits=f,b(e,m),s=e.next_out,o=e.output,h=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,u=i.hold,f=i.bits,i.mode===q&&(i.back=-1);break}for(i.back=0;Se=i.lencode[u&(1<<i.lenbits)-1],ge=Se>>>24,ve=Se>>>16&255,ye=65535&Se,!(f>=ge);){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(ve&&0===(240&ve)){for(Ae=ge,be=ve,Ee=ye;Se=i.lencode[Ee+((u&(1<<Ae+be)-1)>>Ae)],ge=Se>>>24,ve=Se>>>16&255,ye=65535&Se,!(f>=Ae+ge);){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}u>>>=Ae,f-=Ae,i.back+=Ae}if(u>>>=ge,f-=ge,i.back+=ge,i.length=ye,0===ve){i.mode=se;break}if(32&ve){i.back=-1,i.mode=q;break}if(64&ve){e.msg="invalid literal/length code",i.mode=de;break}i.extra=15&ve,i.mode=re;case re:if(i.extra){for(_e=i.extra;_e>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.length+=u&(1<<i.extra)-1,u>>>=i.extra,f-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=ne;case ne:for(;Se=i.distcode[u&(1<<i.distbits)-1],ge=Se>>>24,ve=Se>>>16&255,ye=65535&Se,!(f>=ge);){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(0===(240&ve)){for(Ae=ge,be=ve,Ee=ye;Se=i.distcode[Ee+((u&(1<<Ae+be)-1)>>Ae)],ge=Se>>>24,ve=Se>>>16&255,ye=65535&Se,!(f>=Ae+ge);){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}u>>>=Ae,f-=Ae,i.back+=Ae}if(u>>>=ge,f-=ge,i.back+=ge,64&ve){e.msg="invalid distance code",i.mode=de;break}i.offset=ye,i.extra=15&ve,i.mode=oe;case oe:if(i.extra){for(_e=i.extra;_e>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}i.offset+=u&(1<<i.extra)-1,u>>>=i.extra,f-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=de;break}i.mode=ae;case ae:if(0===h)break e;if(g=m-h,i.offset>g){if(g=i.offset-g,g>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=de;break}g>i.wnext?(g-=i.wnext,pe=i.wsize-g):pe=i.wnext-g,g>i.length&&(g=i.length),me=i.window}else me=o,pe=s-i.offset,g=i.length;g>h&&(g=h),h-=g,i.length-=g;do o[s++]=me[pe++];while(--g);0===i.length&&(i.mode=ie);break;case se:if(0===h)break e;o[s++]=i.length,h--,i.mode=ie;break;case le:if(i.wrap){for(;32>f;){if(0===l)break e;l--,u|=n[a++]<<f,f+=8}if(m-=h,e.total_out+=m,i.total+=m,m&&(e.adler=i.check=i.flags?A(i.check,o,m,s-m):y(i.check,o,m,s-m)),m=h,(i.flags?u:r(u))!==i.check){e.msg="incorrect data check",i.mode=de;break}u=0,f=0}i.mode=he;case he:if(i.wrap&&i.flags){for(;32>f;){if(0===l)break e;l--,u+=n[a++]<<f,f+=8}if(u!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=de;break}u=0,f=0}i.mode=ce;case ce:we=k;break e;case de:we=D;break e;case ue:return H;case fe:default:return P}return e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,i.hold=u,i.bits=f,(i.wsize||m!==e.avail_out&&i.mode<de&&(i.mode<le||t!==_))&&d(e,e.output,e.next_out,m-e.avail_out)?(i.mode=ue,H):(p-=e.avail_in,m-=e.avail_out,e.total_in+=p,e.total_out+=m,i.total+=m,i.wrap&&m&&(e.adler=i.check=i.flags?A(i.check,o,m,e.next_out-m):y(i.check,o,m,e.next_out-m)),e.data_type=i.bits+(i.last?64:0)+(i.mode===q?128:0)+(i.mode===te||i.mode===Z?256:0),(0===p&&0===m||t===_)&&we===R&&(we=O),we)}function f(e){if(!e||!e.state)return P;var t=e.state;return t.window&&(t.window=null),e.state=null,R}function p(e,t){var i;return e&&e.state?(i=e.state,0===(2&i.wrap)?P:(i.head=t,t.done=!1,R)):P}var m,g,v=e("../utils/common"),y=e("./adler32"),A=e("./crc32"),b=e("./inffast"),E=e("./inftrees"),x=0,w=1,T=2,_=4,S=5,C=6,R=0,k=1,M=2,P=-2,D=-3,H=-4,O=-5,L=8,I=1,B=2,N=3,F=4,z=5,U=6,j=7,V=8,G=9,W=10,Y=11,q=12,X=13,Q=14,Z=15,K=16,J=17,$=18,ee=19,te=20,ie=21,re=22,ne=23,oe=24,ae=25,se=26,le=27,he=28,ce=29,de=30,ue=31,fe=32,pe=852,me=592,ge=15,ve=ge,ye=!0;i.inflateReset=a,i.inflateReset2=s,i.inflateResetKeep=o,i.inflateInit=h,i.inflateInit2=l,i.inflate=u,i.inflateEnd=f,i.inflateGetHeader=p,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(e,t,i){"use strict";var r=e("../utils/common"),n=15,o=852,a=592,s=0,l=1,h=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,p,m,g,v,y){var A,b,E,x,w,T,_,S,C,R=y.bits,k=0,M=0,P=0,D=0,H=0,O=0,L=0,I=0,B=0,N=0,F=null,z=0,U=new r.Buf16(n+1),j=new r.Buf16(n+1),V=null,G=0;for(k=0;n>=k;k++)U[k]=0;for(M=0;p>M;M++)U[t[i+M]]++;for(H=R,D=n;D>=1&&0===U[D];D--);if(H>D&&(H=D),0===D)return m[g++]=20971520,m[g++]=20971520,y.bits=1,0;for(P=1;D>P&&0===U[P];P++);for(P>H&&(H=P),I=1,k=1;n>=k;k++)if(I<<=1,I-=U[k],0>I)return-1;if(I>0&&(e===s||1!==D))return-1;for(j[1]=0,k=1;n>k;k++)j[k+1]=j[k]+U[k];for(M=0;p>M;M++)0!==t[i+M]&&(v[j[t[i+M]]++]=M);if(e===s?(F=V=v,T=19):e===l?(F=c,z-=257,V=d,G-=257,T=256):(F=u,V=f,T=-1),N=0,M=0,k=P,w=g,O=H,L=0,E=-1,B=1<<H,x=B-1,e===l&&B>o||e===h&&B>a)return 1;for(var W=0;;){W++,_=k-L,v[M]<T?(S=0,C=v[M]):v[M]>T?(S=V[G+v[M]],C=F[z+v[M]]):(S=96,C=0),A=1<<k-L,b=1<<O,P=b;do b-=A,m[w+(N>>L)+b]=_<<24|S<<16|C|0;while(0!==b);for(A=1<<k-1;N&A;)A>>=1;if(0!==A?(N&=A-1,N+=A):N=0,M++,0===--U[k]){if(k===D)break;k=t[i+v[M]]}if(k>H&&(N&x)!==E){for(0===L&&(L=H),w+=P,O=k-L,I=1<<O;D>O+L&&(I-=U[O+L],!(0>=I));)O++,I<<=1;if(B+=1<<O,e===l&&B>o||e===h&&B>a)return 1;E=N&x,m[E]=H<<24|O<<16|w-g|0}}return 0!==N&&(m[w+N]=k-L<<24|64<<16|0),
y.bits=H,0}},{"../utils/common":27}],37:[function(e,t,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(e,t,i){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function n(e){return 256>e?ae[e]:ae[256+(e>>>7)]}function o(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function a(e,t,i){e.bi_valid>q-i?(e.bi_buf|=t<<e.bi_valid&65535,o(e,e.bi_buf),e.bi_buf=t>>q-e.bi_valid,e.bi_valid+=i-q):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function s(e,t,i){a(e,i[2*t],i[2*t+1])}function l(e,t){var i=0;do i|=1&e,e>>>=1,i<<=1;while(--t>0);return i>>>1}function h(e){16===e.bi_valid?(o(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function c(e,t){var i,r,n,o,a,s,l=t.dyn_tree,h=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;Y>=o;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;W>i;i++)r=e.heap[i],o=l[2*l[2*r+1]+1]+1,o>p&&(o=p,m++),l[2*r+1]=o,r>h||(e.bl_count[o]++,a=0,r>=f&&(a=u[r-f]),s=l[2*r],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)n=e.heap[--i],n>h||(l[2*n+1]!==o&&(e.opt_len+=(o-l[2*n+1])*l[2*n],l[2*n+1]=o),r--)}}function d(e,t,i){var r,n,o=new Array(Y+1),a=0;for(r=1;Y>=r;r++)o[r]=a=a+i[r-1]<<1;for(n=0;t>=n;n++){var s=e[2*n+1];0!==s&&(e[2*n]=l(o[s]++,s))}}function u(){var e,t,i,r,n,o=new Array(Y+1);for(i=0,r=0;z-1>r;r++)for(le[r]=i,e=0;e<1<<$[r];e++)se[i++]=r;for(se[i-1]=r,n=0,r=0;16>r;r++)for(he[r]=n,e=0;e<1<<ee[r];e++)ae[n++]=r;for(n>>=7;V>r;r++)for(he[r]=n<<7,e=0;e<1<<ee[r]-7;e++)ae[256+n++]=r;for(t=0;Y>=t;t++)o[t]=0;for(e=0;143>=e;)ne[2*e+1]=8,e++,o[8]++;for(;255>=e;)ne[2*e+1]=9,e++,o[9]++;for(;279>=e;)ne[2*e+1]=7,e++,o[7]++;for(;287>=e;)ne[2*e+1]=8,e++,o[8]++;for(d(ne,j+1,o),e=0;V>e;e++)oe[2*e+1]=5,oe[2*e]=l(e,5);ce=new fe(ne,$,U+1,j,Y),de=new fe(oe,ee,0,V,Y),ue=new fe(new Array(0),te,0,G,X)}function f(e){var t;for(t=0;j>t;t++)e.dyn_ltree[2*t]=0;for(t=0;V>t;t++)e.dyn_dtree[2*t]=0;for(t=0;G>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Q]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?o(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function m(e,t,i,r){p(e),r&&(o(e,i),o(e,~i)),M.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function g(e,t,i,r){var n=2*t,o=2*i;return e[n]<e[o]||e[n]===e[o]&&r[t]<=r[i]}function v(e,t,i){for(var r=e.heap[i],n=i<<1;n<=e.heap_len&&(n<e.heap_len&&g(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!g(t,r,e.heap[n],e.depth));)e.heap[i]=e.heap[n],i=n,n<<=1;e.heap[i]=r}function y(e,t,i){var r,o,l,h,c=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],o=e.pending_buf[e.l_buf+c],c++,0===r?s(e,o,t):(l=se[o],s(e,l+U+1,t),h=$[l],0!==h&&(o-=le[l],a(e,o,h)),r--,l=n(r),s(e,l,i),h=ee[l],0!==h&&(r-=he[l],a(e,r,h)));while(c<e.last_lit);s(e,Q,t)}function A(e,t){var i,r,n,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=W,i=0;l>i;i++)0!==o[2*i]?(e.heap[++e.heap_len]=h=i,e.depth[i]=0):o[2*i+1]=0;for(;e.heap_len<2;)n=e.heap[++e.heap_len]=2>h?++h:0,o[2*n]=1,e.depth[n]=0,e.opt_len--,s&&(e.static_len-=a[2*n+1]);for(t.max_code=h,i=e.heap_len>>1;i>=1;i--)v(e,o,i);n=l;do i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],v(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=r,o[2*n]=o[2*i]+o[2*r],e.depth[n]=(e.depth[i]>=e.depth[r]?e.depth[i]:e.depth[r])+1,o[2*i+1]=o[2*r+1]=n,e.heap[1]=n++,v(e,o,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],c(e,t),d(o,h,e.bl_count)}function b(e,t,i){var r,n,o=-1,a=t[1],s=0,l=7,h=4;for(0===a&&(l=138,h=3),t[2*(i+1)+1]=65535,r=0;i>=r;r++)n=a,a=t[2*(r+1)+1],++s<l&&n===a||(h>s?e.bl_tree[2*n]+=s:0!==n?(n!==o&&e.bl_tree[2*n]++,e.bl_tree[2*Z]++):10>=s?e.bl_tree[2*K]++:e.bl_tree[2*J]++,s=0,o=n,0===a?(l=138,h=3):n===a?(l=6,h=3):(l=7,h=4))}function E(e,t,i){var r,n,o=-1,l=t[1],h=0,c=7,d=4;for(0===l&&(c=138,d=3),r=0;i>=r;r++)if(n=l,l=t[2*(r+1)+1],!(++h<c&&n===l)){if(d>h){do s(e,n,e.bl_tree);while(0!==--h)}else 0!==n?(n!==o&&(s(e,n,e.bl_tree),h--),s(e,Z,e.bl_tree),a(e,h-3,2)):10>=h?(s(e,K,e.bl_tree),a(e,h-3,3)):(s(e,J,e.bl_tree),a(e,h-11,7));h=0,o=n,0===l?(c=138,d=3):n===l?(c=6,d=3):(c=7,d=4)}}function x(e){var t;for(b(e,e.dyn_ltree,e.l_desc.max_code),b(e,e.dyn_dtree,e.d_desc.max_code),A(e,e.bl_desc),t=G-1;t>=3&&0===e.bl_tree[2*ie[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function w(e,t,i,r){var n;for(a(e,t-257,5),a(e,i-1,5),a(e,r-4,4),n=0;r>n;n++)a(e,e.bl_tree[2*ie[n]+1],3);E(e,e.dyn_ltree,t-1),E(e,e.dyn_dtree,i-1)}function T(e){var t,i=4093624447;for(t=0;31>=t;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return D;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return H;for(t=32;U>t;t++)if(0!==e.dyn_ltree[2*t])return H;return D}function _(e){me||(u(),me=!0),e.l_desc=new pe(e.dyn_ltree,ce),e.d_desc=new pe(e.dyn_dtree,de),e.bl_desc=new pe(e.bl_tree,ue),e.bi_buf=0,e.bi_valid=0,f(e)}function S(e,t,i,r){a(e,(L<<1)+(r?1:0),3),m(e,t,i,!0)}function C(e){a(e,I<<1,3),s(e,Q,ne),h(e)}function R(e,t,i,r){var n,o,s=0;e.level>0?(e.strm.data_type===O&&(e.strm.data_type=T(e)),A(e,e.l_desc),A(e,e.d_desc),s=x(e),n=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,n>=o&&(n=o)):n=o=i+5,n>=i+4&&-1!==t?S(e,t,i,r):e.strategy===P||o===n?(a(e,(I<<1)+(r?1:0),3),y(e,ne,oe)):(a(e,(B<<1)+(r?1:0),3),w(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),y(e,e.dyn_ltree,e.dyn_dtree)),f(e),r&&p(e)}function k(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(se[i]+U+1)]++,e.dyn_dtree[2*n(t)]++),e.last_lit===e.lit_bufsize-1}var M=e("../utils/common"),P=4,D=0,H=1,O=2,L=0,I=1,B=2,N=3,F=258,z=29,U=256,j=U+1+z,V=30,G=19,W=2*j+1,Y=15,q=16,X=7,Q=256,Z=16,K=17,J=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=512,ne=new Array(2*(j+2));r(ne);var oe=new Array(2*V);r(oe);var ae=new Array(re);r(ae);var se=new Array(F-N+1);r(se);var le=new Array(z);r(le);var he=new Array(V);r(he);var ce,de,ue,fe=function(e,t,i,r,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=r,this.max_length=n,this.has_stree=e&&e.length},pe=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t},me=!1;i._tr_init=_,i._tr_stored_block=S,i._tr_flush_block=R,i._tr_tally=k,i._tr_align=C},{"../utils/common":27}],39:[function(e,t,i){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}]},{},[9])(9)}),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(Mustache))}(this,function(e){function t(e){return"function"==typeof e}function i(e){return m(e)?"array":typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e,t){return null!=e&&"object"==typeof e&&t in e}function o(e,t){return g.call(e,t)}function a(e){return!o(v,e)}function s(e){return String(e).replace(/[&<>"'\/]/g,function(e){return y[e]})}function l(t,i){function n(){if(v&&!y)for(;g.length;)delete p[g.pop()];else g=[];v=!1,y=!1}function o(e){if("string"==typeof e&&(e=e.split(b,2)),!m(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(r(e[0])+"\\s*"),l=new RegExp("\\s*"+r(e[1])),u=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var s,l,u,f=[],p=[],g=[],v=!1,y=!1;o(i||e.tags);for(var T,_,S,C,R,k,M=new d(t);!M.eos();){if(T=M.pos,S=M.scanUntil(s))for(var P=0,D=S.length;D>P;++P)C=S.charAt(P),a(C)?g.push(p.length):y=!0,p.push(["text",C,T,T+1]),T+=1,"\n"===C&&n();if(!M.scan(s))break;if(v=!0,_=M.scan(w)||"name",M.scan(A),"="===_?(S=M.scanUntil(E),M.scan(E),M.scanUntil(l)):"{"===_?(S=M.scanUntil(u),M.scan(x),M.scanUntil(l),_="&"):S=M.scanUntil(l),!M.scan(l))throw new Error("Unclosed tag at "+M.pos);if(R=[_,S,T,M.pos],p.push(R),"#"===_||"^"===_)f.push(R);else if("/"===_){if(k=f.pop(),!k)throw new Error('Unopened section "'+S+'" at '+T);if(k[1]!==S)throw new Error('Unclosed section "'+k[1]+'" at '+T)}else"name"===_||"{"===_||"&"===_?y=!0:"="===_&&o(S)}if(k=f.pop())throw new Error('Unclosed section "'+k[1]+'" at '+M.pos);return c(h(p))}function h(e){for(var t,i,r=[],n=0,o=e.length;o>n;++n)t=e[n],t&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(r.push(t),i=t));return r}function c(e){for(var t,i,r=[],n=r,o=[],a=0,s=e.length;s>a;++a)switch(t=e[a],t[0]){case"#":case"^":n.push(t),o.push(t),n=t[4]=[];break;case"/":i=o.pop(),i[5]=t[2],n=o.length>0?o[o.length-1][4]:r;break;default:n.push(t)}return r}function d(e){this.string=e,this.tail=e,this.pos=0}function u(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function f(){this.cache={}}var p=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===p.call(e)},g=RegExp.prototype.test,v=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},A=/\s*/,b=/\s+/,E=/\s*=/,x=/\s*\}/,w=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},d.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},u.prototype.push=function(e){return new u(e,this)},u.prototype.lookup=function(e){var i,r=this.cache;if(r.hasOwnProperty(e))i=r[e];else{for(var o,a,s=this,l=!1;s;){if(e.indexOf(".")>0)for(i=s.view,o=e.split("."),a=0;null!=i&&a<o.length;)a===o.length-1&&(l=n(i,o[a])),i=i[o[a++]];else i=s.view[e],l=n(s.view,e);if(l)break;s=s.parent}r[e]=i}return t(i)&&(i=i.call(this.view)),i},f.prototype.clearCache=function(){this.cache={}},f.prototype.parse=function(e,t){var i=this.cache,r=i[e];return null==r&&(r=i[e]=l(e,t)),r},f.prototype.render=function(e,t,i){var r=this.parse(e),n=t instanceof u?t:new u(t);return this.renderTokens(r,n,i,e)},f.prototype.renderTokens=function(e,t,i,r){for(var n,o,a,s="",l=0,h=e.length;h>l;++l)a=void 0,n=e[l],o=n[0],"#"===o?a=this.renderSection(n,t,i,r):"^"===o?a=this.renderInverted(n,t,i,r):">"===o?a=this.renderPartial(n,t,i,r):"&"===o?a=this.unescapedValue(n,t):"name"===o?a=this.escapedValue(n,t):"text"===o&&(a=this.rawValue(n)),void 0!==a&&(s+=a);return s},f.prototype.renderSection=function(e,i,r,n){function o(e){return a.render(e,i,r)}var a=this,s="",l=i.lookup(e[1]);if(l){if(m(l))for(var h=0,c=l.length;c>h;++h)s+=this.renderTokens(e[4],i.push(l[h]),r,n);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],i.push(l),r,n);else if(t(l)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");l=l.call(i.view,n.slice(e[3],e[5]),o),null!=l&&(s+=l)}else s+=this.renderTokens(e[4],i,r,n);return s}},f.prototype.renderInverted=function(e,t,i,r){var n=t.lookup(e[1]);return!n||m(n)&&0===n.length?this.renderTokens(e[4],t,i,r):void 0},f.prototype.renderPartial=function(e,i,r){if(r){var n=t(r)?r(e[1]):r[e[1]];return null!=n?this.renderTokens(this.parse(n),i,r,n):void 0}},f.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);return null!=i?i:void 0},f.prototype.escapedValue=function(t,i){var r=i.lookup(t[1]);return null!=r?e.escape(r):void 0},f.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.2.0",e.tags=["{{","}}"];var T=new f;e.clearCache=function(){return T.clearCache()},e.parse=function(e,t){return T.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+i(e)+'" was given as the first argument for mustache#render(template, view, partials)');return T.render(e,t,r)},e.to_html=function(i,r,n,o){var a=e.render(i,r,n);return t(o)?void o(a):a},e.escape=s,e.Scanner=d,e.Context=u,e.Writer=f}),function(){"use strict";var e={"@@functional/placeholder":!0},t=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,i){return t.apply(this,arguments)};case 3:return function(e,i,r){return t.apply(this,arguments)};case 4:return function(e,i,r,n){return t.apply(this,arguments)};case 5:return function(e,i,r,n,o){return t.apply(this,arguments)};case 6:return function(e,i,r,n,o,a){return t.apply(this,arguments)};case 7:return function(e,i,r,n,o,a,s){return t.apply(this,arguments)};case 8:return function(e,i,r,n,o,a,s,l){return t.apply(this,arguments)};case 9:return function(e,i,r,n,o,a,s,l,h){return t.apply(this,arguments)};case 10:return function(e,i,r,n,o,a,s,l,h,c){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},i=function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i},r=function(){return Array.prototype.slice.call(arguments)},n=function(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))},o=function(e){return function(){return!e.apply(this,arguments)}},a=function(e,t){e=e||[],t=t||[];var i,r=e.length,n=t.length,o=[];for(i=0;r>i;)o[o.length]=e[i],i+=1;for(i=0;n>i;)o[o.length]=t[i],i+=1;return o},s=function(e,t,i){for(var r=0,n=i.length;n>r;){if(e(t,i[r]))return!0;r+=1}return!1},l=function(e,t){for(var i=0,r=t.length,n=[];r>i;)e(t[i])&&(n[n.length]=t[i]),i+=1;return n},h=function(e){return{"@@transducer/value":e,"@@transducer/reduced":!0}},c=function(e){var t=String(e).match(/^function (\w*)/);return null==t?"":t[1]},d=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)},u=function(e){return e},f=function(){var e=Object.prototype.toString;return"[object Arguments]"===e.call(arguments)?function(t){return"[object Arguments]"===e.call(t)}:function(e){return d("callee",e)}}(),p=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)},m=function(e){return"[object Function]"===Object.prototype.toString.call(e)},g=Number.isInteger||function(e){return e<<0===e},v=function(e){return"[object Number]"===Object.prototype.toString.call(e)},y=function(e){return"[object Object]"===Object.prototype.toString.call(e)},A=function(e){return null!=e&&"object"==typeof e&&e["@@functional/placeholder"]===!0},b=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},E=function(e){return"[object String]"===Object.prototype.toString.call(e)},x=function(e){return"function"==typeof e["@@transducer/step"]},w=function(e,t){for(var i=0,r=t.length,n=Array(r);r>i;)n[i]=e(t[i]),i+=1;return n},T=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1,r=arguments.length;r>i;){var n=arguments[i];if(null!=n)for(var o in n)d(o,n)&&(t[o]=n[o]);i+=1}return t},_=function(e){return[e]},S=function(e,t){return function(){return t.call(this,e.apply(this,arguments))}},C=function(e,t){return function(){var i=this;return e.apply(i,arguments).then(function(e){return t.call(i,e)})}},R=function(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+t.replace(/"/g,'\\"')+'"'},k=function(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}},M=function Nn(e,t,i){switch(arguments.length){case 1:return Nn(e,0,e.length);case 2:return Nn(e,t,e.length);default:for(var r=[],n=0,o=Math.max(0,Math.min(e.length,i)-t);o>n;)r[n]=e[t+n],n+=1;return r}},P=function(){var e=function(e){return(10>e?"0":"")+e};return"function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(t){return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),D={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}},H=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},function(t){return new e(t)}}(),O=function(e,t){for(var i=0,r=t.length-(e-1),n=new Array(r>=0?r:0);r>i;)n[i]=M(t,i,i+e),i+=1;return n},L="function"==typeof Object.assign?Object.assign:T,I=function(e,t){return function(){var i=arguments.length;if(0===i)return t();var r=arguments[i-1];return p(r)||"function"!=typeof r[e]?t.apply(this,arguments):r[e].apply(r,M(arguments,0,i-1))}},B=function(e){return function t(i){return 0===arguments.length||A(i)?t:e.apply(this,arguments)}},N=function(e){return function t(i,r){switch(arguments.length){case 0:return t;case 1:return A(i)?t:B(function(t){return e(i,t)});default:return A(i)&&A(r)?t:A(i)?B(function(t){return e(t,r)}):A(r)?B(function(t){return e(i,t)}):e(i,r)}}},F=function(e){return function t(i,r,n){switch(arguments.length){case 0:return t;case 1:return A(i)?t:N(function(t,r){return e(i,t,r)});case 2:return A(i)&&A(r)?t:A(i)?N(function(t,i){return e(t,r,i)}):A(r)?N(function(t,r){return e(i,t,r)}):B(function(t){return e(i,r,t)});default:return A(i)&&A(r)&&A(n)?t:A(i)&&A(r)?N(function(t,i){return e(t,i,n)}):A(i)&&A(n)?N(function(t,i){return e(t,r,i)}):A(r)&&A(n)?N(function(t,r){return e(i,t,r)}):A(i)?B(function(t){return e(t,r,n)}):A(r)?B(function(t){return e(i,t,n)}):A(n)?B(function(t){return e(i,r,t)}):e(i,r,n)}}},z=function Fn(e,i,r){return function(){for(var n=[],o=0,a=e,s=0;s<i.length||o<arguments.length;){var l;s<i.length&&(!A(i[s])||o>=arguments.length)?l=i[s]:(l=arguments[o],o+=1),n[s]=l,A(l)||(a-=1),s+=1}return 0>=a?r.apply(this,n):t(a,Fn(e,n,r))}},U=function(e,t,i){return function(){var r=arguments.length;if(0===r)return i();var n=arguments[r-1];if(!p(n)){var o=M(arguments,0,r-1);if("function"==typeof n[e])return n[e].apply(n,o);if(x(n)){var a=t.apply(null,o);return a(n)}}return i.apply(this,arguments)}},j=function(e,t){for(var i=t.length-1;i>=0&&e(t[i]);)i-=1;return M(t,0,i+1)},V=function(){function e(e,t){this.xf=t,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=k(this.xf["@@transducer/step"](e,!1))),e},N(function(t,i){return new e(t,i)})}(),G=function(){function e(e,t){this.xf=t,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=k(this.xf["@@transducer/step"](e,!0))),e},N(function(t,i){return new e(t,i)})}(),W=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.store(t),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return a(M(this.acc,this.pos),M(this.acc,0,this.pos))},N(function(t,i){return new e(t,i)})}(),Y=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=D.result,e.prototype["@@transducer/step"]=function(e,t){return this.n>0?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},N(function(t,i){return new e(t,i)})}(),q=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},N(function(t,i){return new e(t,i)})}(),X=function(){function e(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=function(){return this.xf["@@transducer/init"]()},e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var i=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(i=!0):this.seenFirstValue=!0,this.lastValue=t,i?e:this.xf["@@transducer/step"](e,t)},N(function(t,i){return new e(t,i)})}(),Q=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=D.result,e.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},N(function(t,i){return new e(t,i)})}(),Z=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=D.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},N(function(t,i){return new e(t,i)})}(),K=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=k(this.xf["@@transducer/step"](e,t))),e},N(function(t,i){return new e(t,i)})}(),J=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=k(this.xf["@@transducer/step"](e,this.idx))),e},N(function(t,i){return new e(t,i)})}(),$=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},N(function(t,i){return new e(t,i)})}(),ee=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},N(function(t,i){return new e(t,i)})}(),te=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=D.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},N(function(t,i){return new e(t,i)})}(),ie=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=D.result,e.prototype["@@transducer/step"]=function(e,t){return 0===this.n?k(e):(this.n-=1,this.xf["@@transducer/step"](e,t))},N(function(t,i){return new e(t,i)})}(),re=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=D.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):k(e)},N(function(t,i){return new e(t,i)})}(),ne=N(function(e,t){return Number(e)+Number(t)}),oe=F(function(e,t,i){if(t>=i.length||t<-i.length)return i;var r=0>t?i.length:0,n=r+t,o=a(i);return o[n]=e(i[n]),o}),ae=N(U("all",V,function(e,t){for(var i=0;i<t.length;){if(!e(t[i]))return!1;i+=1}return!0})),se=B(function(e){return function(){return e}}),le=N(function(e,t){return e&&t}),he=N(U("any",G,function(e,t){for(var i=0;i<t.length;){if(e(t[i]))return!0;i+=1}return!1})),ce=N(U("aperture",W,O)),de=N(function(e,t){return a(t,[e])}),ue=N(function(e,t){return e.apply(this,t)}),fe=F(function(e,t,i){var r={};for(var n in i)r[n]=i[n];return r[e]=t,r}),pe=F(function zn(e,t,i){switch(e.length){case 0:return t;case 1:return fe(e[0],t,i);default:return fe(e[0],zn(M(e,1),t,Object(i[e[0]])),i)}}),me=N(function(e,i){return t(e.length,function(){return e.apply(i,arguments)})}),ge=F(function(e,t,i){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");return e>i?e:i>t?t:i}),ve=B(function(e){return function(t,i){return e(t,i)?-1:e(i,t)?1:0}}),ye=N(function(e,t){for(var i={},r=t.length,n=0;r>n;){var o=e(t[n]);i[o]=(d(o,i)?i[o]:0)+1,n+=1}return i}),Ae=N(function(e,i){return 1===e?B(i):t(e,z(e,[],i))}),be=ne(-1),Ee=N(function(e,t){return null==t||t!==t?e:t}),xe=F(function(e,t,i){for(var r=[],n=0,o=t.length;o>n;)s(e,t[n],i)||s(e,t[n],r)||r.push(t[n]),n+=1;return r}),we=N(function(e,t){var i={};for(var r in t)r!==e&&(i[r]=t[r]);return i}),Te=N(function Un(e,t){switch(e.length){case 0:return t;case 1:return we(e[0],t);default:var i=e[0],r=M(e,1);return null==t[i]?t:fe(i,Un(r,t[i]),t)}}),_e=N(function(e,t){return e/t}),Se=N(U("dropWhile",Q,function(e,t){for(var i=0,r=t.length;r>i&&e(t[i]);)i+=1;return M(t,i)})),Ce=B(function(e){return null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():p(e)?[]:E(e)?"":y(e)?{}:f(e)?function(){return arguments}():void 0}),Re=N(function jn(e,t){var i,r,n,o={};for(r in t)i=e[r],n=typeof i,o[r]="function"===n?i(t[r]):"object"===n?jn(e[r],t[r]):t[r];return o}),ke=N(U("find",K,function(e,t){for(var i=0,r=t.length;r>i;){if(e(t[i]))return t[i];i+=1}})),Me=N(U("findIndex",J,function(e,t){for(var i=0,r=t.length;r>i;){if(e(t[i]))return i;i+=1}return-1})),Pe=N(U("findLast",$,function(e,t){for(var i=t.length-1;i>=0;){if(e(t[i]))return t[i];i-=1}})),De=N(U("findLastIndex",ee,function(e,t){for(var i=t.length-1;i>=0;){if(e(t[i]))return i;i-=1}return-1})),He=N(I("forEach",function(e,t){for(var i=t.length,r=0;i>r;)e(t[r]),r+=1;return t})),Oe=B(function(e){for(var t=0,i=e.length,r={};i>t;)p(e[t])&&e[t].length&&(r[e[t][0]]=e[t][1]),t+=1;return r}),Le=N(function(e,t){return e>t}),Ie=N(function(e,t){return e>=t}),Be=N(d),Ne=N(function(e,t){return e in t}),Fe=N(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}),ze=B(u),Ue=F(function(e,t,i){return Ae(Math.max(e.length,t.length,i.length),function(){return e.apply(this,arguments)?t.apply(this,arguments):i.apply(this,arguments)})}),je=ne(1),Ve=F(function(e,t,i){e=e<i.length&&e>=0?e:i.length;var r=M(i);return r.splice(e,0,t),r}),Ge=F(function(e,t,i){return e=e<i.length&&e>=0?e:i.length,a(a(M(i,0,e),t),M(i,e))}),We=N(I("intersperse",function(e,t){for(var i=[],r=0,n=t.length;n>r;)r===n-1?i.push(t[r]):i.push(t[r],e),r+=1;return i})),Ye=N(function(e,t){return null!=t&&t.constructor===e||t instanceof e}),qe=B(function(e){return p(e)?!0:e?"object"!=typeof e?!1:e instanceof String?!1:1===e.nodeType?!!e.length:0===e.length?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1:!1}),Xe=B(function(e){return null==e}),Qe=function(){var e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],i=function(){return arguments.propertyIsEnumerable("length")}(),r=function(e,t){for(var i=0;i<e.length;){if(e[i]===t)return!0;i+=1}return!1};return B("function"!=typeof Object.keys||i?function(n){if(Object(n)!==n)return[];var o,a,s=[],l=i&&f(n);for(o in n)!d(o,n)||l&&"length"===o||(s[s.length]=o);if(e)for(a=t.length-1;a>=0;)o=t[a],d(o,n)&&!r(s,o)&&(s[s.length]=o),a-=1;return s}:function(e){return Object(e)!==e?[]:Object.keys(e)})}(),Ze=B(function(e){var t,i=[];for(t in e)i[i.length]=t;return i}),Ke=B(function(e){return null!=e&&Ye(Number,e.length)?e.length:NaN}),Je=N(function(e,t){return t>e}),$e=N(function(e,t){return t>=e}),et=F(function(e,t,i){for(var r=0,n=i.length,o=[],a=[t];n>r;)a=e(a[0],i[r]),o[r]=a[1],r+=1;return[a[0],o]}),tt=F(function(e,t,i){for(var r=i.length-1,n=[],o=[t];r>=0;)o=e(o[0],i[r]),n[r]=o[1],r-=1;return[o[0],n]}),it=N(function(e,t){return t.match(e)||[]}),rt=N(function(e,t){return g(e)?!g(t)||1>t?NaN:(e%t+t)%t:NaN}),nt=N(function(e,t){return t>e?t:e}),ot=F(function(e,t,i){return e(i)>e(t)?i:t}),at=N(function(e,t){return L({},e,t)}),st=B(function(e){return L.apply(null,[{}].concat(e))}),lt=F(function(e,t,i){var r,n={};for(r in t)d(r,t)&&(n[r]=d(r,i)?e(r,t[r],i[r]):t[r]);for(r in i)d(r,i)&&!d(r,n)&&(n[r]=i[r]);return n}),ht=N(function(e,t){return e>t?t:e}),ct=F(function(e,t,i){return e(i)<e(t)?i:t}),dt=N(function(e,t){return e%t}),ut=N(function(e,t){return e*t}),ft=N(function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,i){return t.call(this,e,i)};case 3:return function(e,i,r){return t.call(this,e,i,r)};case 4:return function(e,i,r,n){return t.call(this,e,i,r,n)};case 5:return function(e,i,r,n,o){return t.call(this,e,i,r,n,o)};case 6:return function(e,i,r,n,o,a){return t.call(this,e,i,r,n,o,a)};case 7:return function(e,i,r,n,o,a,s){return t.call(this,e,i,r,n,o,a,s)};case 8:return function(e,i,r,n,o,a,s,l){return t.call(this,e,i,r,n,o,a,s,l)};case 9:return function(e,i,r,n,o,a,s,l,h){return t.call(this,e,i,r,n,o,a,s,l,h)};case 10:return function(e,i,r,n,o,a,s,l,h,c){return t.call(this,e,i,r,n,o,a,s,l,h,c)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),pt=B(function(e){return-e}),mt=N(o(U("any",G,he))),gt=B(function(e){return!e}),vt=N(function(e,t){var i=0>e?t.length+e:e;return E(t)?t.charAt(i):t[i]}),yt=B(function(e){return function(){return vt(e,arguments)}}),At=N(function(e,t){var i={};return i[e]=t,i}),bt=B(_),Et=B(function(e){var i,r=!1;return t(e.length,function(){return r?i:(r=!0,i=e.apply(this,arguments))})}),xt=N(function(e,t){return e||t}),wt=function(){var e=function(t){return{value:t,map:function(i){return e(i(t))}}};return F(function(t,i,r){return t(function(t){return e(i(t))})(r).value})}(),Tt=N(function(e,t){return[e,t]}),_t=N(function(e,t){for(var i=t,r=0;r<e.length;){if(null==i)return;i=i[e[r]],r+=1}return i}),St=F(function(e,t,i){return Ee(e,_t(t,i))}),Ct=F(function(e,t,i){return t.length>0&&e(_t(t,i))}),Rt=N(function(e,t){for(var i={},r=0;r<e.length;)e[r]in t&&(i[e[r]]=t[e[r]]),r+=1;return i}),kt=N(function(e,t){for(var i={},r=0,n=e.length;n>r;){var o=e[r];i[o]=t[o],r+=1}return i}),Mt=N(function(e,t){var i={};for(var r in t)e(t[r],r,t)&&(i[r]=t[r]);return i}),Pt=N(function(e,t){return a([e],t)}),Dt=N(function(e,t){return t[e]}),Ht=F(function(e,t,i){return null!=i&&d(t,i)?i[t]:e;
}),Ot=F(function(e,t,i){return e(i[t])}),Lt=N(function(e,t){for(var i=e.length,r=[],n=0;i>n;)r[n]=t[e[n]],n+=1;return r}),It=N(function(e,t){if(!v(e)||!v(t))throw new TypeError("Both arguments to range must be numbers");for(var i=[],r=e;t>r;)i.push(r),r+=1;return i}),Bt=F(function(e,t,i){for(var r=i.length-1;r>=0;)t=e(t,i[r]),r-=1;return t}),Nt=B(k),Ft=F(function(e,t,i){return a(M(i,0,Math.min(e,i.length)),M(i,Math.min(i.length,e+t)))}),zt=F(function(e,t,i){return i.replace(e,t)}),Ut=B(function(e){return E(e)?e.split("").reverse().join(""):M(e).reverse()}),jt=F(function(e,t,i){for(var r=0,n=i.length,o=[t];n>r;)t=e(t,i[r]),o[r+1]=t,r+=1;return o}),Vt=F(function(e,t,i){return wt(e,se(t),i)}),Gt=F(I("slice",function(e,t,i){return Array.prototype.slice.call(i,e,t)})),Wt=N(function(e,t){return M(t).sort(e)}),Yt=N(function(e,t){return M(t).sort(function(t,i){var r=e(t),n=e(i);return n>r?-1:r>n?1:0})}),qt=N(function(e,t){return[Gt(0,e,t),Gt(e,Ke(t),t)]}),Xt=N(function(e,t){if(0>=e)throw new Error("First argument to splitEvery must be a positive integer");for(var i=[],r=0;r<t.length;)i.push(Gt(r,r+=e,t));return i}),Qt=N(function(e,t){for(var i=0,r=t.length,n=[];r>i&&!e(t[i]);)n.push(t[i]),i+=1;return[n,M(t,i)]}),Zt=N(function(e,t){return Number(e)-Number(t)}),Kt=I("tail",Gt(1,1/0)),Jt=N(U("take",ie,function(e,t){return Gt(0,0>e?1/0:e,t)})),$t=N(function(e,t){for(var i=t.length-1;i>=0&&e(t[i]);)i-=1;return M(t,i+1,1/0)}),ei=N(U("takeWhile",re,function(e,t){for(var i=0,r=t.length;r>i&&e(t[i]);)i+=1;return M(t,0,i)})),ti=N(function(e,t){return e(t),t}),ii=N(function(e,t){var i,r=Number(t),n=0;if(0>r||isNaN(r))throw new RangeError("n must be a non-negative number");for(i=new Array(r);r>n;)i[n]=e(n),n+=1;return i}),ri=B(function(e){var t=[];for(var i in e)d(i,e)&&(t[t.length]=[i,e[i]]);return t}),ni=B(function(e){var t=[];for(var i in e)t[t.length]=[i,e[i]];return t}),oi=B(function(e){for(var t=0,i=[];t<e.length;){for(var r=e[t],n=0;n<r.length;)"undefined"==typeof i[n]&&(i[n]=[]),i[n].push(r[n]),n+=1;t+=1}return i}),ai=function(){var e="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",t="​",i="function"==typeof String.prototype.trim;return B(i&&!e.trim()&&t.trim()?function(e){return e.trim()}:function(t){var i=new RegExp("^["+e+"]["+e+"]*"),r=new RegExp("["+e+"]["+e+"]*$");return t.replace(i,"").replace(r,"")})}(),si=N(function(e,i){return t(e.length,function(){try{return e.apply(this,arguments)}catch(t){return i.apply(this,a([t],arguments))}})}),li=B(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),hi=B(function(e){return function(){return e(M(arguments))}}),ci=B(function(e){return ft(1,e)}),di=N(function(e,t){return Ae(e,function(){for(var i,r=1,n=t,o=0;e>=r&&"function"==typeof n;)i=r===e?arguments.length:o+n.length,n=n.apply(this,M(arguments,o,i)),r+=1,o=i;return n})}),ui=N(function(e,t){for(var i=e(t),r=[];i&&i.length;)r[r.length]=i[0],i=e(i[1]);return r}),fi=N(function(e,t){for(var i,r=0,n=t.length,o=[];n>r;)i=t[r],s(e,i,o)||(o[o.length]=i),r+=1;return o}),pi=F(function(e,t,i){return e(i)?i:t(i)}),mi=F(function(e,t,i){for(var r=i;!e(r);)r=t(r);return r}),gi=F(function(e,t,i){return oe(se(t),e,i)}),vi=N(function(e,t){return Ae(t.length,function(){for(var i=[],r=0;r<t.length;)i.push(t[r].call(this,arguments[r])),r+=1;return e.apply(this,i.concat(M(arguments,t.length)))})}),yi=B(function(e){for(var t=Qe(e),i=t.length,r=[],n=0;i>n;)r[n]=e[t[n]],n+=1;return r}),Ai=B(function(e){var t,i=[];for(t in e)i[i.length]=e[t];return i}),bi=function(){var e=function(e){return{value:e,map:function(){return this}}};return N(function(t,i){return t(e)(i).value})}(),Ei=F(function(e,t,i){return e(i)?t(i):i}),xi=N(function(e,t){for(var i in e)if(d(i,e)&&!e[i](t[i]))return!1;return!0}),wi=N(function(e,t){return Ae(e.length,function(){return t.apply(this,a([e],arguments))})}),Ti=N(function(e,t){for(var i,r=0,n=e.length,o=t.length,a=[];n>r;){for(i=0;o>i;)a[a.length]=[e[r],t[i]],i+=1;r+=1}return a}),_i=N(function(e,t){for(var i=[],r=0,n=Math.min(e.length,t.length);n>r;)i[r]=[e[r],t[r]],r+=1;return i}),Si=N(function(e,t){for(var i=0,r=Math.min(e.length,t.length),n={};r>i;)n[e[i]]=t[i],i+=1;return n}),Ci=F(function(e,t,i){for(var r=[],n=0,o=Math.min(t.length,i.length);o>n;)r[n]=e(t[n],i[n]),n+=1;return r}),Ri=se(!1),ki=se(!0),Mi=function Vn(e,t,i,r){var o=function(n){for(var o=t.length,a=0;o>a;){if(e===t[a])return i[a];a+=1}t[a+1]=e,i[a+1]=n;for(var s in e)n[s]=r?Vn(e[s],t,i,!0):e[s];return n};switch(li(e)){case"Object":return o({});case"Array":return o([]);case"Date":return new Date(e.valueOf());case"RegExp":return n(e);default:return e}},Pi=function(e){return N(function(i,r){return t(Math.max(0,i.length-r.length),function(){return i.apply(this,e(r,arguments))})})},Di=function(e,t){return Jt(e<t.length?t.length-e:0,t)},Hi=function Gn(e,t,r,n){if(Fe(e,t))return!0;if(li(e)!==li(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(li(e)){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===c(e.constructor))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!Fe(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!Fe(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1;break;case"Map":case"Set":if(!Gn(i(e.entries()),i(t.entries()),r,n))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":break;case"ArrayBuffer":break;default:return!1}var o=Qe(e);if(o.length!==Qe(t).length)return!1;for(var a=r.length-1;a>=0;){if(r[a]===e)return n[a]===t;a-=1}for(r.push(e),n.push(t),a=o.length-1;a>=0;){var s=o[a];if(!d(s,t)||!Gn(t[s],e[s],r,n))return!1;a-=1}return r.pop(),n.pop(),!0},Oi=function(e){return function t(i){for(var r,n,o,a=[],s=0,l=i.length;l>s;){if(qe(i[s]))for(r=e?t(i[s]):i[s],o=0,n=r.length;n>o;)a[a.length]=r[o],o+=1;else a[a.length]=i[s];s+=1}return a}},Li=function(){function e(e,t,i){for(var r=0,n=i.length;n>r;){if(t=e["@@transducer/step"](t,i[r]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}function t(e,t,i){for(var r=i.next();!r.done;){if(t=e["@@transducer/step"](t,r.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=i.next()}return e["@@transducer/result"](t)}function i(e,t,i){return e["@@transducer/result"](i.reduce(me(e["@@transducer/step"],e),t))}var r="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(n,o,a){if("function"==typeof n&&(n=H(n)),qe(a))return e(n,o,a);if("function"==typeof a.reduce)return i(n,o,a);if(null!=a[r])return t(n,o,a[r]());if("function"==typeof a.next)return t(n,o,a);throw new TypeError("reduce: list must be array or iterable")}}(),Ii=function(){var e={"@@transducer/init":Array,"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":u},t={"@@transducer/init":String,"@@transducer/step":function(e,t){return e+t},"@@transducer/result":u},i={"@@transducer/init":Object,"@@transducer/step":function(e,t){return L(e,qe(t)?At(t[0],t[1]):t)},"@@transducer/result":u};return function(r){if(x(r))return r;if(qe(r))return e;if("string"==typeof r)return t;if("object"==typeof r)return i;throw new Error("Cannot create transformer for "+r)}}(),Bi=function(){function e(e,t){this.f=e,this.retained=[],this.xf=t}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.retain(e,t):this.flush(e,t)},e.prototype.flush=function(e,t){return e=Li(this.xf["@@transducer/step"],e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,t)},e.prototype.retain=function(e,t){return this.retained.push(t),e},N(function(t,i){return new e(t,i)})}(),Ni=function(){function e(e,t){this.xf=t,this.f=e,this.inputs={}}return e.prototype["@@transducer/init"]=D.init,e.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if(d(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]),e["@@transducer/reduced"])){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var i=this.f(t);return this.inputs[i]=this.inputs[i]||[i,[]],this.inputs[i][1]=de(t,this.inputs[i][1]),e},N(function(t,i){return new e(t,i)})}(),Fi=B(function(e){return Ae(e.length,function(){var t=0,i=arguments[0],r=arguments[arguments.length-1],n=M(arguments);return n[0]=function(){var e=i.apply(this,a(arguments,[t,r]));return t+=1,e},e.apply(this,n)})}),zi=B(function(e){return ft(2,e)}),Ui=B(function(e){return null!=e&&"function"==typeof e.clone?e.clone():Mi(e,[],[],!0)}),ji=B(function(e){return Ae(e.length,e)}),Vi=N(U("drop",Y,function(e,t){return Gt(Math.max(0,e),1/0,t)})),Gi=N(U("dropLast",q,Di)),Wi=N(U("dropLastWhile",Bi,j)),Yi=N(function(e,t){return Hi(e,t,[],[])}),qi=N(U("filter",Z,function(e,t){return y(t)?Li(function(i,r){return e(t[r])&&(i[r]=t[r]),i},{},Qe(t)):l(e,t)})),Xi=B(Oi(!0)),Qi=B(function(e){return ji(function(t,i){var r=M(arguments);return r[0]=i,r[1]=t,e.apply(this,r)})}),Zi=N(U("groupBy",Ni,function(e,t){return Li(function(t,i){var r=e(i);return t[r]=de(i,t[r]||(t[r]=[])),t},{},t)})),Ki=vt(0),Ji=N(function(e,t){return Li(function(t,i){var r=e(i);return t[r]=i,t},{},t)}),$i=Gt(0,-1),er=F(function(e,t,i){var r,n;t.length>i.length?(r=t,n=i):(r=i,n=t);for(var o=[],a=0;a<n.length;)s(e,n[a],r)&&(o[o.length]=n[a]),a+=1;return fi(e,o)}),tr=F(function(e,t,i){return x(e)?Li(t(e),e["@@transducer/init"](),i):Li(t(Ii(e)),Mi(e,[],[],!1),i)}),ir=B(function(e){for(var t=Qe(e),i=t.length,r=0,n={};i>r;){var o=t[r],a=e[o],s=d(a,n)?n[a]:n[a]=[];s[s.length]=o,r+=1}return n}),rr=B(function(e){for(var t=Qe(e),i=t.length,r=0,n={};i>r;){var o=t[r];n[e[o]]=o,r+=1}return n}),nr=B(function(e){return null!=e&&Yi(e,Ce(e))}),or=vt(-1),ar=N(function(e,t){if("function"!=typeof t.lastIndexOf||p(t)){for(var i=t.length-1;i>=0;){if(Yi(t[i],e))return i;i-=1}return-1}return t.lastIndexOf(e)}),sr=N(U("map",te,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return Ae(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return Li(function(i,r){return i[r]=e(t[r]),i},{},Qe(t));default:return w(e,t)}})),lr=N(function(e,t){return Li(function(i,r){return i[r]=e(t[r],r,t),i},{},Qe(t))}),hr=F(function(e,t,i){return lt(function(t,i,r){return e(i,r)},t,i)}),cr=Pi(a),dr=Pi(Qi(a)),ur=F(function(e,t,i){return Yi(_t(e,i),t)}),fr=N(function(e,t){return sr(Dt(e),t)}),pr=vi(w,[kt,ze]),mr=F(function(e,t,i){return Ot(Yi(t),e,i)}),gr=F(function(e,t,i){return Ot(Ye(e),t,i)}),vr=F(Li),yr=z(4,[],function(e,t,i,r){return Li(function(r,n){var o=e(n);return r[o]=t(d(o,r)?r[o]:i,n),r},{},r)}),Ar=N(function(e,t){return qi(o(e),t)}),br=N(function(e,t){return ii(se(e),t)}),Er=vr(ne,0),xr=N(function(e,t){return Vi(e>=0?t.length-e:0,t)}),wr=Ae(4,function(e,t,i,r){return Li(e("function"==typeof t?H(t):t),i,r)}),Tr=F(function(e,t,i){return fi(e,a(t,i))}),_r=N(function(e,t){return xi(sr(Yi,e),t)}),Sr=function(){var e=function(e){return{"@@transducer/init":D.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,i){var r=e["@@transducer/step"](t,i);return r["@@transducer/reduced"]?h(r):r}}};return function(t){var i=e(t);return{"@@transducer/init":D.init,"@@transducer/result":function(e){return i["@@transducer/result"](e)},"@@transducer/step":function(e,t){return qe(t)?Li(i,e,t):Li(i,e,[t])}}}}(),Cr=function(e,t,i){var r,n;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(r=1/t;i<e.length;){if(n=e[i],0===n&&1/n===r)return i;i+=1}return-1}if(t!==t){for(;i<e.length;){if(n=e[i],"number"==typeof n&&n!==n)return i;i+=1}return-1}return e.indexOf(t,i);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,i);case"object":if(null===t)return e.indexOf(t,i)}for(;i<e.length;){if(Yi(e[i],t))return i;i+=1}return-1},Rr=N(function(e,t){return sr(e,Sr(t))}),kr=B(function(e){return Ae(vr(nt,0,fr("length",e)),function(){for(var t=0,i=e.length;i>t;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0})}),Mr=B(function(e){for(var t=e.length,i=0;t>i;){if(Cr(e,e[i],i+1)>=0)return!1;i+=1}return!0}),Pr=B(function(e){return Ae(vr(nt,0,fr("length",e)),function(){for(var t=0,i=e.length;i>t;){if(e[t].apply(this,arguments))return!0;t+=1}return!1})}),Dr=N(function(e,t){return"function"==typeof e.ap?e.ap(t):"function"==typeof e?Ae(Math.max(e.length,t.length),function(){return e.apply(this,arguments)(t.apply(this,arguments))}):Li(function(e,i){return a(e,sr(i,t))},[],e)}),Hr=B(function Wn(e){return e=sr(function(e){return"function"==typeof e?e:Wn(e)},e),Ae(vr(nt,0,fr("length",yi(e))),function(){var t=arguments;return sr(function(e){return ue(e,t)},e)})}),Or=ji(function(e){return e.apply(this,M(arguments,1))}),Lr=N(U("chain",Rr,function(e,t){return"function"==typeof t?function(){return t.call(this,e.apply(this,arguments)).apply(this,arguments)}:Oi(!1)(sr(e,t))})),Ir=B(function(e){var i=vr(nt,0,sr(function(e){return e[0].length},e));return t(i,function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}})}),Br=N(function(e,t){if(e>10)throw new Error("Constructor with greater than ten arguments");return 0===e?function(){return new t}:ji(ft(e,function(e,i,r,n,o,a,s,l,h,c){switch(arguments.length){case 1:return new t(e);case 2:return new t(e,i);case 3:return new t(e,i,r);case 4:return new t(e,i,r,n);case 5:return new t(e,i,r,n,o);case 6:return new t(e,i,r,n,o,a);case 7:return new t(e,i,r,n,o,a,s);case 8:return new t(e,i,r,n,o,a,s,l);case 9:return new t(e,i,r,n,o,a,s,l,h);case 10:return new t(e,i,r,n,o,a,s,l,h,c)}}))}),Nr=N(function(e,t){return Ae(vr(nt,0,fr("length",t)),function(){var i=arguments,r=this;return e.apply(r,w(function(e){return e.apply(r,i)},t))})}),Fr=N(U("dropRepeatsWith",X,function(e,t){var i=[],r=1,n=t.length;if(0!==n)for(i[0]=t[0];n>r;)e(or(i),t[r])||(i[i.length]=t[r]),r+=1;return i})),zr=F(function(e,t,i){return Yi(e(t),e(i))}),Ur=F(function(e,t,i){return Yi(t[e],i[e])}),jr=N(function(e,t){return"function"!=typeof t.indexOf||p(t)?Cr(t,e,0):t.indexOf(e)}),Vr=B(function(e){return Nr(r,e)}),Gr=N(function(e,t){return function(i){return function(r){return sr(function(e){return t(e,r)},i(e(r)))}}}),Wr=B(function(e){return Gr(vt(e),gi(e))}),Yr=B(function(e){return Gr(_t(e),pe(e))}),qr=B(function(e){return Gr(Dt(e),fe(e))}),Xr=N(function(e,t){var i=Ae(e,t);return Ae(e,function(){return Li(Dr,sr(i,arguments[0]),M(arguments,1))})}),Qr=B(function(e){return Er(e)/e.length}),Zr=B(function(e){var t=e.length;if(0===t)return NaN;var i=2-t%2,r=(t-i)/2;return Qr(M(e).sort(function(e,t){return t>e?-1:e>t?1:0}).slice(r,r+i))}),Kr=Vr([qi,Ar]),Jr=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return t(arguments[0].length,vr(S,arguments[0],Kt(arguments)))},$r=function(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return t(arguments[0].length,vr(C,arguments[0],Kt(arguments)))},en=vr(ut,1),tn=N(function(e,t){return"function"==typeof t.sequence?t.sequence(e):Bt(function(e,t){return Dr(sr(Pt,t),e)},e([]),t)}),rn=F(function(e,t,i){return tn(e,sr(t,i))}),nn=Lr(u),on=function(e,t){return Cr(t,e,0)>=0},an=function Yn(e,t){var i=function(i){var r=t.concat([e]);return on(i,r)?"<Circular>":Yn(i,r)},r=function(e,t){return w(function(t){return R(t)+": "+i(e[t])},t.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+w(i,e).join(", ")+"))";case"[object Array]":return"["+w(i,e).concat(r(e,Ar(function(e){return/^\d+$/.test(e)},Qe(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+i(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?i(NaN):R(P(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+i(e.valueOf())+")":1/e===-(1/0)?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+i(e.valueOf())+")":R(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var n=e.toString();if("[object Object]"!==n)return n}return"{"+r(e,Qe(e)).join(", ")+"}"}},sn=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Jr.apply(this,Ut(arguments))},ln=function(){return sn.apply(this,Pt(ze,sr(Lr,arguments)))},hn=function(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return $r.apply(this,Ut(arguments))},cn=B(function(e){return Br(e.length,e)}),dn=N(on),un=N(function(e,t){for(var i=[],r=0,n=e.length;n>r;)on(e[r],t)||on(e[r],i)||(i[i.length]=e[r]),r+=1;return i}),fn=B(U("dropRepeats",X(Yi),Fr(Yi))),pn=B(function(e){return Xr(e.length,e)}),mn=N(function(e,t){var i={};for(var r in t)on(r,e)||(i[r]=t[r]);return i}),gn=function(){return ln.apply(this,Ut(arguments))},vn=B(function(e){return an(e,[])}),yn=N(function(e,t){return Ar(Qi(on)(e),t)}),An=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}function t(e,t,i){var r,n,o=typeof e;switch(o){case"string":case"number":return 0!==e||i._items["-0"]||1/e!==-(1/0)?null!==i._nativeSet?t?(r=i._nativeSet.size,i._nativeSet.add(e),n=i._nativeSet.size,n>r):i._nativeSet.has(e):o in i._items?e in i._items[o]?!t:(t&&(i._items[o][e]=!0),t):(t&&(i._items[o]={},i._items[o][e]=!0),t):(t&&(i._items["-0"]=!0),t);case"boolean":if(o in i._items){var a=e?1:0;return i._items[o][a]?!t:(t&&(i._items[o][a]=!0),t)}return t&&(i._items[o]=e?[!1,!0]:[!0,!1]),t;case"function":return null!==i._nativeSet?t?(r=i._nativeSet.size,i._nativeSet.add(e),n=i._nativeSet.size,n>r):i._nativeSet.has(e):o in i._items?on(e,i._items[o])?!t:(t&&i._items[o].push(e),t):(t&&(i._items[o]=[e]),t);case"undefined":return i._items[o]?!t:(t&&(i._items[o]=!0),t);case"object":if(null===e)return i._items["null"]?!t:(t&&(i._items["null"]=!0),t);default:return o=Object.prototype.toString.call(e),o in i._items?on(e,i._items[o])?!t:(t&&i._items[o].push(e),t):(t&&(i._items[o]=[e]),t)}}return e.prototype.add=function(e){return t(e,!0,this)},e.prototype.has=function(e){return t(e,!1,this)},e}(),bn=N(function(e,t){return m(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:pn(le)(e,t)}),En=pn(gt),xn=N(function(e,t){return m(e)?function(){return e.apply(this,arguments)||t.apply(this,arguments)}:pn(xt)(e,t)}),wn=N(function(e,t){return Ae(e+1,function(){var i=arguments[e];if(null!=i&&Ye(Function,i[t]))return i[t].apply(i,M(arguments,0,e));throw new TypeError(vn(i)+' does not have a method named "'+t+'"')})}),Tn=wn(1,"join"),_n=B(function(e){var i={};return t(e.length,function(){var t=vn(arguments);return d(t,i)||(i[t]=e.apply(this,arguments)),i[t]})}),Sn=wn(1,"split"),Cn=N(function(e,t){if(!b(e))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+vn(e));return n(e).test(t)}),Rn=wn(0,"toLowerCase"),kn=wn(0,"toUpperCase"),Mn=N(function(e,t){for(var i,r,n=new An,o=[],a=0;a<t.length;)r=t[a],i=e(r),n.add(i)&&o.push(r),a+=1;return o}),Pn=Qi(wn(1,"concat")),Dn=N(function(e,t){return Pn(un(e,t),un(t,e))}),Hn=F(function(e,t,i){return Pn(xe(e,t,i),xe(e,i,t))}),On=Mn(ze),Ln=N(function(e,t){var i,r;return e.length>t.length?(i=e,r=t):(i=t,r=e),On(l(Qi(on)(i),r))}),In=N(sn(On,a)),Bn={F:Ri,T:ki,__:e,add:ne,addIndex:Fi,adjust:oe,all:ae,allPass:kr,allUniq:Mr,always:se,and:le,any:he,anyPass:Pr,ap:Dr,aperture:ce,append:de,apply:ue,applySpec:Hr,assoc:fe,assocPath:pe,binary:zi,bind:me,both:bn,call:Or,chain:Lr,clamp:ge,clone:Ui,comparator:ve,complement:En,compose:sn,composeK:ln,composeP:hn,concat:Pn,cond:Ir,construct:cn,constructN:Br,contains:dn,converge:Nr,countBy:ye,curry:ji,curryN:Ae,dec:be,defaultTo:Ee,difference:un,differenceWith:xe,dissoc:we,dissocPath:Te,divide:_e,drop:Vi,dropLast:Gi,dropLastWhile:Wi,dropRepeats:fn,dropRepeatsWith:Fr,dropWhile:Se,either:xn,empty:Ce,eqBy:zr,eqProps:Ur,equals:Yi,evolve:Re,filter:qi,find:ke,findIndex:Me,findLast:Pe,findLastIndex:De,flatten:Xi,flip:Qi,forEach:He,fromPairs:Oe,groupBy:Zi,gt:Le,gte:Ie,has:Be,hasIn:Ne,head:Ki,identical:Fe,identity:ze,ifElse:Ue,inc:je,indexBy:Ji,indexOf:jr,init:$i,insert:Ve,insertAll:Ge,intersection:Ln,intersectionWith:er,intersperse:We,into:tr,invert:ir,invertObj:rr,invoker:wn,is:Ye,isArrayLike:qe,isEmpty:nr,isNil:Xe,join:Tn,juxt:Vr,keys:Qe,keysIn:Ze,last:or,lastIndexOf:ar,length:Ke,lens:Gr,lensIndex:Wr,lensPath:Yr,lensProp:qr,lift:pn,liftN:Xr,lt:Je,lte:$e,map:sr,mapAccum:et,mapAccumRight:tt,mapObjIndexed:lr,match:it,mathMod:rt,max:nt,maxBy:ot,mean:Qr,median:Zr,memoize:_n,merge:at,mergeAll:st,mergeWith:hr,mergeWithKey:lt,min:ht,minBy:ct,modulo:dt,multiply:ut,nAry:ft,negate:pt,none:mt,not:gt,nth:vt,nthArg:yt,objOf:At,of:bt,omit:mn,once:Et,or:xt,over:wt,pair:Tt,partial:cr,partialRight:dr,partition:Kr,path:_t,pathEq:ur,pathOr:St,pathSatisfies:Ct,pick:Rt,pickAll:kt,pickBy:Mt,pipe:Jr,pipeK:gn,pipeP:$r,pluck:fr,prepend:Pt,product:en,project:pr,prop:Dt,propEq:mr,propIs:gr,propOr:Ht,propSatisfies:Ot,props:Lt,range:It,reduce:vr,reduceBy:yr,reduceRight:Bt,reduced:Nt,reject:Ar,remove:Ft,repeat:br,replace:zt,reverse:Ut,scan:jt,sequence:tn,set:Vt,slice:Gt,sort:Wt,sortBy:Yt,split:Sn,splitAt:qt,splitEvery:Xt,splitWhen:Qt,subtract:Zt,sum:Er,symmetricDifference:Dn,symmetricDifferenceWith:Hn,tail:Kt,take:Jt,takeLast:xr,takeLastWhile:$t,takeWhile:ei,tap:ti,test:Cn,times:ii,toLower:Rn,toPairs:ri,toPairsIn:ni,toString:vn,toUpper:kn,transduce:wr,transpose:oi,traverse:rn,trim:ai,tryCatch:si,type:li,unapply:hi,unary:ci,uncurryN:di,unfold:ui,union:In,unionWith:Tr,uniq:On,uniqBy:Mn,uniqWith:fi,unless:pi,unnest:nn,until:mi,update:gi,useWith:vi,values:yi,valuesIn:Ai,view:bi,when:Ei,where:xi,whereEq:_r,without:yn,wrap:wi,xprod:Ti,zip:_i,zipObj:Si,zipWith:Ci};"object"==typeof exports?module.exports=Bn:"function"==typeof define&&define.amd?define(function(){return Bn}):this.R=Bn}.call(this),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?i=t:t={};var e,i,r;!function(t){function n(e,t){return b.call(e,t)}function o(e,t){var i,r,n,o,a,s,l,h,c,d,u,f=t&&t.split("/"),p=y.map,m=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),a=e.length-1,y.nodeIdCompat&&x.test(e[a])&&(e[a]=e[a].replace(x,"")),e=f.slice(0,f.length-1).concat(e),c=0;c<e.length;c+=1)if(u=e[c],"."===u)e.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||m)&&p){for(i=e.split("/"),c=i.length;c>0;c-=1){if(r=i.slice(0,c).join("/"),f)for(d=f.length;d>0;d-=1)if(n=p[f.slice(0,d).join("/")],n&&(n=n[r])){o=n,s=c;break}if(o)break;!l&&m&&m[r]&&(l=m[r],h=c)}!o&&l&&(o=l,s=h),o&&(i.splice(0,s,o),e=i.join("/"))}return e}function a(e,i){return function(){var r=E.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),f.apply(t,r.concat([e,i]))}}function s(e){return function(t){return o(t,e)}}function l(e){return function(t){g[e]=t}}function h(e){if(n(v,e)){var i=v[e];delete v[e],A[e]=!0,u.apply(t,i)}if(!n(g,e)&&!n(A,e))throw new Error("No "+e);return g[e]}function c(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function d(e){return function(){return y&&y.config&&y.config[e]||{}}}var u,f,p,m,g={},v={},y={},A={},b=Object.prototype.hasOwnProperty,E=[].slice,x=/\.js$/;p=function(e,t){var i,r=c(e),n=r[0];return e=r[1],n&&(n=o(n,t),i=h(n)),n?e=i&&i.normalize?i.normalize(e,s(t)):o(e,t):(e=o(e,t),r=c(e),n=r[0],e=r[1],n&&(i=h(n))),{f:n?n+"!"+e:e,n:e,pr:n,p:i}},m={require:function(e){return a(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:d(e)}}},u=function(e,i,r,o){var s,c,d,u,f,y,b=[],E=typeof r;if(o=o||e,"undefined"===E||"function"===E){for(i=!i.length&&r.length?["require","exports","module"]:i,f=0;f<i.length;f+=1)if(u=p(i[f],o),c=u.f,"require"===c)b[f]=m.require(e);else if("exports"===c)b[f]=m.exports(e),y=!0;else if("module"===c)s=b[f]=m.module(e);else if(n(g,c)||n(v,c)||n(A,c))b[f]=h(c);else{if(!u.p)throw new Error(e+" missing "+c);u.p.load(u.n,a(o,!0),l(c),{}),b[f]=g[c]}d=r?r.apply(g[e],b):void 0,e&&(s&&s.exports!==t&&s.exports!==g[e]?g[e]=s.exports:d===t&&y||(g[e]=d))}else e&&(g[e]=r)},e=i=f=function(e,i,r,n,o){if("string"==typeof e)return m[e]?m[e](i):h(p(e,i).f);if(!e.splice){if(y=e,y.deps&&f(y.deps,y.callback),!i)return;i.splice?(e=i,i=r,r=null):e=t}return i=i||function(){},"function"==typeof r&&(r=n,n=o),n?u(t,e,i,r):setTimeout(function(){u(t,e,i,r)},4),f},f.config=function(e){return f(e)},e._defined=g,r=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),n(g,e)||n(v,e)||(v[e]=[e,t,i])},r.amd={jQuery:!0}}(),t.requirejs=e,t.require=i,t.define=r}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,i=[];for(var r in t){var n=t[r];"function"==typeof n&&"constructor"!==r&&i.push(r)}return i}var i={};i.Extend=function(e,t){function i(){this.constructor=e}var r={}.hasOwnProperty;for(var n in t)r.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},i.Decorate=function(e,i){function r(){var t=Array.prototype.unshift,r=i.prototype.constructor.length,n=e.prototype.constructor;r>0&&(t.call(arguments,e.prototype.constructor),n=i.prototype.constructor),n.apply(this,arguments)}function n(){this.constructor=r}var o=t(i),a=t(e);i.displayName=e.displayName,r.prototype=new n;for(var s=0;s<a.length;s++){var l=a[s];r.prototype[l]=e.prototype[l]}for(var h=(function(e){var t=function(){};e in r.prototype&&(t=r.prototype[e]);var n=i.prototype[e];return function(){var e=Array.prototype.unshift;return e.call(arguments,t),n.apply(this,arguments)}}),c=0;c<o.length;c++){var d=o[c];r.prototype[d]=h(d)}return r};var r=function(){this.listeners={}};return r.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},r.prototype.trigger=function(e){var t=Array.prototype.slice;this.listeners=this.listeners||{},e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},r.prototype.invoke=function(e,t){for(var i=0,r=e.length;r>i;i++)e[i].apply(this,t)},i.Observable=r,i.generateChars=function(e){for(var t="",i=0;e>i;i++){var r=Math.floor(36*Math.random());t+=r.toString(36)}return t},i.bind=function(e,t){return function(){e.apply(t,arguments)}},i._convertData=function(e){for(var t in e){var i=t.split("-"),r=e;if(1!==i.length){for(var n=0;n<i.length;n++){var o=i[n];o=o.substring(0,1).toLowerCase()+o.substring(1),o in r||(r[o]={}),n==i.length-1&&(r[o]=e[t]),r=r[o]}delete e[t]}}return e},i.hasScroll=function(t,i){var r=e(i),n=i.style.overflowX,o=i.style.overflowY;return n!==o||"hidden"!==o&&"visible"!==o?"scroll"===n||"scroll"===o?!0:r.innerHeight()<i.scrollHeight||r.innerWidth()<i.scrollWidth:!1},i.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},i.appendMany=function(t,i){if("1.7"===e.fn.jquery.substr(0,3)){var r=e();e.map(i,function(e){r=r.add(e)}),i=r}t.append(i)},i}),t.define("select2/results",["jquery","./utils"],function(e,t){function i(e,t,r){this.$element=e,this.data=r,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(t){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var r=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),n=this.options.get("translations").get(t.message);r.append(i(n(t.args))),r[0].className+=" select2-results__message",this.$results.append(r)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));e.results=this.sort(e.results);for(var i=0;i<e.results.length;i++){var r=e.results[i],n=this.option(r);t.push(n)}this.$results.append(t)},i.prototype.position=function(e,t){var i=t.find(".select2-results");i.append(e)},i.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)},i.prototype.setClasses=function(){var t=this;this.data.current(function(i){var r=e.map(i,function(e){return e.id.toString()}),n=t.$results.find(".select2-results__option[aria-selected]");n.each(function(){var t=e(this),i=e.data(this,"data"),n=""+i.id;null!=i.element&&i.element.selected||null==i.element&&e.inArray(n,r)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")});var o=n.filter("[aria-selected=true]");o.length>0?o.first().trigger("mouseenter"):n.first().trigger("mouseenter")})},i.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching"),i={disabled:!0,loading:!0,text:t(e)},r=this.option(i);r.className+=" loading-results",this.$results.prepend(r)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(t){var i=document.createElement("li");i.className="select2-results__option";var r={role:"treeitem","aria-selected":"false"};t.disabled&&(delete r["aria-selected"],r["aria-disabled"]="true"),null==t.id&&delete r["aria-selected"],null!=t._resultId&&(i.id=t._resultId),t.title&&(i.title=t.title),t.children&&(r.role="group",r["aria-label"]=t.text,delete r["aria-selected"]);for(var n in r){var o=r[n];i.setAttribute(n,o)}if(t.children){var a=e(i),s=document.createElement("strong");s.className="select2-results__group",e(s),this.template(t,s);for(var l=[],h=0;h<t.children.length;h++){var c=t.children[h],d=this.option(c);l.push(d)}var u=e("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});u.append(l),a.append(s),a.append(u)}else this.template(t,i);return e.data(i,"data",t),i},i.prototype.bind=function(t,i){var r=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",function(e){r.clear(),r.append(e.data),t.isOpen()&&r.setClasses()}),t.on("results:append",function(e){r.append(e.data),t.isOpen()&&r.setClasses()}),t.on("query",function(e){r.hideMessages(),r.showLoading(e)}),t.on("select",function(){t.isOpen()&&r.setClasses()}),t.on("unselect",function(){t.isOpen()&&r.setClasses()}),t.on("open",function(){r.$results.attr("aria-expanded","true"),r.$results.attr("aria-hidden","false"),r.setClasses(),r.ensureHighlightVisible();
}),t.on("close",function(){r.$results.attr("aria-expanded","false"),r.$results.attr("aria-hidden","true"),r.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=r.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=r.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?r.trigger("close",{}):r.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=r.getHighlightedResults(),t=r.$results.find("[aria-selected]"),i=t.index(e);if(0!==i){var n=i-1;0===e.length&&(n=0);var o=t.eq(n);o.trigger("mouseenter");var a=r.$results.offset().top,s=o.offset().top,l=r.$results.scrollTop()+(s-a);0===n?r.$results.scrollTop(0):0>s-a&&r.$results.scrollTop(l)}}),t.on("results:next",function(){var e=r.getHighlightedResults(),t=r.$results.find("[aria-selected]"),i=t.index(e),n=i+1;if(!(n>=t.length)){var o=t.eq(n);o.trigger("mouseenter");var a=r.$results.offset().top+r.$results.outerHeight(!1),s=o.offset().top+o.outerHeight(!1),l=r.$results.scrollTop()+s-a;0===n?r.$results.scrollTop(0):s>a&&r.$results.scrollTop(l)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){r.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=r.$results.scrollTop(),i=r.$results.get(0).scrollHeight-t+e.deltaY,n=e.deltaY>0&&t-e.deltaY<=0,o=e.deltaY<0&&i<=r.$results.height();n?(r.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):o&&(r.$results.scrollTop(r.$results.get(0).scrollHeight-r.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var i=e(this),n=i.data("data");return"true"===i.attr("aria-selected")?void(r.options.get("multiple")?r.trigger("unselect",{originalEvent:t,data:n}):r.trigger("close",{})):void r.trigger("select",{originalEvent:t,data:n})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var i=e(this).data("data");r.getHighlightedResults().removeClass("select2-results__option--highlighted"),r.trigger("results:focus",{data:i,element:e(this)})})},i.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]"),i=t.index(e),r=this.$results.offset().top,n=e.offset().top,o=this.$results.scrollTop()+(n-r),a=n-r;o-=2*e.outerHeight(!1),2>=i?this.$results.scrollTop(0):(a>this.$results.outerHeight()||0>a)&&this.$results.scrollTop(o)}},i.prototype.template=function(t,i){var r=this.options.get("templateResult"),n=this.options.get("escapeMarkup"),o=r(t,i);null==o?i.style.display="none":"string"==typeof o?i.innerHTML=n(o):e(i).append(o)},i}),t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,i){function r(e,t){this.$element=e,this.options=t,r.__super__.constructor.call(this)}return t.Extend(r,t.Observable),r.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},r.prototype.bind=function(e,t){var r=this,n=(e.id+"-container",e.id+"-results");this.container=e,this.$selection.on("focus",function(e){r.trigger("focus",e)}),this.$selection.on("blur",function(e){r._handleBlur(e)}),this.$selection.on("keydown",function(e){r.trigger("keypress",e),e.which===i.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){r.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){r.update(e.data)}),e.on("open",function(){r.$selection.attr("aria-expanded","true"),r.$selection.attr("aria-owns",n),r._attachCloseHandler(e)}),e.on("close",function(){r.$selection.attr("aria-expanded","false"),r.$selection.removeAttr("aria-activedescendant"),r.$selection.removeAttr("aria-owns"),r.$selection.focus(),r._detachCloseHandler(e)}),e.on("enable",function(){r.$selection.attr("tabindex",r._tabindex)}),e.on("disable",function(){r.$selection.attr("tabindex","-1")})},r.prototype._handleBlur=function(t){var i=this;window.setTimeout(function(){document.activeElement==i.$selection[0]||e.contains(i.$selection[0],document.activeElement)||i.trigger("blur",t)},1)},r.prototype._attachCloseHandler=function(t){e(document.body).on("mousedown.select2."+t.id,function(t){var i=e(t.target),r=i.closest(".select2"),n=e(".select2.select2-container--open");n.each(function(){var t=e(this);if(this!=r[0]){var i=t.data("element");i.select2("close")}})})},r.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},r.prototype.position=function(e,t){var i=t.find(".selection");i.append(e)},r.prototype.destroy=function(){this._detachCloseHandler(this.container)},r.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},r}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,i,r){function n(){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,t),n.prototype.render=function(){var e=n.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},n.prototype.bind=function(e,t){var i=this;n.__super__.bind.apply(this,arguments);var r=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r),this.$selection.attr("aria-labelledby",r),this.$selection.on("mousedown",function(e){1===e.which&&i.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("selection:update",function(e){i.update(e.data)})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(e,t){var i=this.options.get("templateSelection"),r=this.options.get("escapeMarkup");return r(i(e,t))},n.prototype.selectionContainer=function(){return e("<span></span>")},n.prototype.update=function(e){if(0===e.length)return void this.clear();var t=e[0],i=this.$selection.find(".select2-selection__rendered"),r=this.display(t,i);i.empty().append(r),i.prop("title",t.title||t.text)},n}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,i){function r(e,t){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var e=r.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},r.prototype.bind=function(t,i){var n=this;r.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){n.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!n.options.get("disabled")){var i=e(this),r=i.parent(),o=r.data("data");n.trigger("unselect",{originalEvent:t,data:o})}})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(e,t){var i=this.options.get("templateSelection"),r=this.options.get("escapeMarkup");return r(i(e,t))},r.prototype.selectionContainer=function(){var t=e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return t},r.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],r=0;r<e.length;r++){var n=e[r],o=this.selectionContainer(),a=this.display(n,o);o.append(a),o.prop("title",n.title||n.text),o.data("data",n),t.push(o)}var s=this.$selection.find(".select2-selection__rendered");i.appendMany(s,t)}},r}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var i=this.selectionContainer();return i.html(this.display(t)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},t.prototype.update=function(e,t){var i=1==t.length&&t[0].id!=this.placeholder.id,r=t.length>1;if(r||i)return e.call(this,t);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},t}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function i(){}return i.prototype.bind=function(e,t,i){var r=this;e.call(this,t,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){r._handleClear(e)}),t.on("keypress",function(e){r._handleKeyboardClear(e,t)})},i.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){t.stopPropagation();for(var r=i.data("data"),n=0;n<r.length;n++){var o={data:r[n]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},i.prototype._handleKeyboardClear=function(e,i,r){r.isOpen()||(i.which==t.DELETE||i.which==t.BACKSPACE)&&this._handleClear(i)},i.prototype.update=function(t,i){if(t.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var r=e('<span class="select2-selection__clear">&times;</span>');r.data("data",i),this.$selection.find(".select2-selection__rendered").prepend(r)}},i}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,i){function r(e,t,i){e.call(this,t,i)}return r.prototype.render=function(t){var i=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=i,this.$search=i.find("input");var r=t.call(this);return this._transferTabIndex(),r},r.prototype.bind=function(e,t,r){var n=this;e.call(this,t,r),t.on("open",function(){n.$search.trigger("focus")}),t.on("close",function(){n.$search.val(""),n.$search.removeAttr("aria-activedescendant"),n.$search.trigger("focus")}),t.on("enable",function(){n.$search.prop("disabled",!1),n._transferTabIndex()}),t.on("disable",function(){n.$search.prop("disabled",!0)}),t.on("focus",function(e){n.$search.trigger("focus")}),t.on("results:focus",function(e){n.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){n.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){n._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation(),n.trigger("keypress",e),n._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===i.BACKSPACE&&""===n.$search.val()){var r=n.$searchContainer.prev(".select2-selection__choice");if(r.length>0){var o=r.data("data");n.searchRemoveChoice(o),e.preventDefault()}}});var o=document.documentMode,a=o&&11>=o;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){return a?void n.$selection.off("input.search input.searchcheck"):void n.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(a&&"input"===e.type)return void n.$selection.off("input.search input.searchcheck");var t=e.which;t!=i.SHIFT&&t!=i.CTRL&&t!=i.ALT&&t!=i.TAB&&n.handleSearch(e)})},r.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},r.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},r.prototype.update=function(e,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.focus()},r.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},r.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},r.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(""!==this.$search.attr("placeholder"))e=this.$selection.find(".select2-selection__rendered").innerWidth();else{var t=this.$search.val().length+1;e=.75*t+"em"}this.$search.css("width",e)},r}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,i,r){var n=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],a=["opening","closing","selecting","unselecting"];t.call(this,i,r),i.on("*",function(t,i){if(-1!==e.inArray(t,o)){i=i||{};var r=e.Event("select2:"+t,{params:i});n.$element.trigger(r),-1!==e.inArray(t,a)&&(i.prevented=r.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function i(e){this.dict=e||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(e){return this.dict[e]},i.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},i._cache={},i.loadPath=function(e){if(!(e in i._cache)){var r=t(e);i._cache[e]=r}return new i(i._cache[e])},i}),t.define("select2/diacritics",[],function(){var e={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};return e}),t.define("select2/data/base",["../utils"],function(e){function t(e,i){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,i){var r=t.id+"-result-";return r+=e.generateChars(4),r+=null!=i.id?"-"+i.id.toString():"-"+e.generateChars(4)},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,i){function r(e,t){this.$element=e,this.options=t,r.__super__.constructor.call(this)}return t.Extend(r,e),r.prototype.current=function(e){var t=[],r=this;this.$element.find(":selected").each(function(){var e=i(this),n=r.item(e);t.push(n)}),e(t)},r.prototype.select=function(e){var t=this;if(e.selected=!0,i(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(r){var n=[];e=[e],e.push.apply(e,r);for(var o=0;o<e.length;o++){var a=e[o].id;-1===i.inArray(a,n)&&n.push(a)}t.$element.val(n),t.$element.trigger("change")});else{var r=e.id;this.$element.val(r),this.$element.trigger("change")}},r.prototype.unselect=function(e){var t=this;return this.$element.prop("multiple")?(e.selected=!1,i(e.element).is("option")?(e.element.selected=!1,void this.$element.trigger("change")):void this.current(function(r){for(var n=[],o=0;o<r.length;o++){var a=r[o].id;a!==e.id&&-1===i.inArray(a,n)&&n.push(a)}t.$element.val(n),t.$element.trigger("change")})):void 0},r.prototype.bind=function(e,t){var i=this;this.container=e,e.on("select",function(e){i.select(e.data)}),e.on("unselect",function(e){i.unselect(e.data)})},r.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})},r.prototype.query=function(e,t){var r=[],n=this,o=this.$element.children();o.each(function(){var t=i(this);if(t.is("option")||t.is("optgroup")){var o=n.item(t),a=n.matches(e,o);null!==a&&r.push(a)}}),t({results:r})},r.prototype.addOptions=function(e){t.appendMany(this.$element,e)},r.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):(t=document.createElement("option"),void 0!==t.textContent?t.textContent=e.text:t.innerText=e.text),e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var r=i(t),n=this._normalizeItem(e);return n.element=t,i.data(t,"data",n),r},r.prototype.item=function(e){var t={};if(t=i.data(e[0],"data"),null!=t)return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var r=e.children("option"),n=[],o=0;o<r.length;o++){var a=i(r[o]),s=this.item(a);n.push(s)}t.children=n}return t=this._normalizeItem(t),t.element=e[0],i.data(e[0],"data",t),t},r.prototype._normalizeItem=function(e){i.isPlainObject(e)||(e={id:e,text:e}),e=i.extend({},{text:""},e);var t={selected:!1,disabled:!1};return null!=e.id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),i.extend({},t,e)},r.prototype.matches=function(e,t){var i=this.options.get("matcher");return i(e,t)},r}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,i){function r(e,t){var i=t.get("data")||[];r.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(i))}return t.Extend(r,e),r.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,i){return i.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),r.__super__.select.call(this,e)},r.prototype.convertToOptions=function(e){function r(e){return function(){return i(this).val()==e.id}}for(var n=this,o=this.$element.find("option"),a=o.map(function(){return n.item(i(this)).id}).get(),s=[],l=0;l<e.length;l++){var h=this._normalizeItem(e[l]);if(i.inArray(h.id,a)>=0){var c=o.filter(r(h)),d=this.item(c),u=i.extend(!0,{},h,d),f=this.option(u);c.replaceWith(f)}else{var p=this.option(h);if(h.children){var m=this.convertToOptions(h.children);t.appendMany(p,m)}s.push(p)}}return s},r}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,i){function r(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),r.__super__.constructor.call(this,e,t)}return t.Extend(r,e),r.prototype._applyDefaults=function(e){var t={data:function(e){return i.extend({},e,{q:e.term})},transport:function(e,t,r){var n=i.ajax(e);return n.then(t),n.fail(r),n}};return i.extend({},t,e,!0)},r.prototype.processResults=function(e){return e},r.prototype.query=function(e,t){function r(){var r=o.transport(o,function(r){var o=n.processResults(r,e);n.options.get("debug")&&window.console&&console.error&&(o&&o.results&&i.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(o)},function(){n.trigger("results:message",{message:"errorLoading"})});n._request=r}var n=this;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof o.url&&(o.url=o.url.call(this.$element,e)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,e)),this.ajaxOptions.delay&&""!==e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(r,this.ajaxOptions.delay)):r()},r}),t.define("select2/data/tags",["jquery"],function(e){function t(t,i,r){var n=r.get("tags"),o=r.get("createTag");void 0!==o&&(this.createTag=o);var a=r.get("insertTag");if(void 0!==a&&(this.insertTag=a),t.call(this,i,r),e.isArray(n))for(var s=0;s<n.length;s++){var l=n[s],h=this._normalizeItem(l),c=this.option(h);this.$element.append(c)}}return t.prototype.query=function(e,t,i){function r(e,o){for(var a=e.results,s=0;s<a.length;s++){var l=a[s],h=null!=l.children&&!r({results:l.children},!0),c=l.text===t.term;if(c||h)return o?!1:(e.data=a,void i(e))}if(o)return!0;var d=n.createTag(t);if(null!=d){var u=n.option(d);u.attr("data-select2-tag",!0),n.addOptions([u]),n.insertTag(a,d)}e.results=a,i(e)}var n=this;return this._removeOldTags(),null==t.term||null!=t.page?void e.call(this,t,i):void e.call(this,t,r)},t.prototype.createTag=function(t,i){var r=e.trim(i.term);return""===r?null:{id:r,text:r}},t.prototype.insertTag=function(e,t,i){t.unshift(i)},t.prototype._removeOldTags=function(t){var i=(this._lastTag,this.$element.find("option[data-select2-tag]"));i.each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,i){var r=i.get("tokenizer");void 0!==r&&(this.tokenizer=r),e.call(this,t,i)}return t.prototype.bind=function(e,t,i){e.call(this,t,i),this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(e,t,i){function r(e){n.trigger("select",{data:e})}var n=this;t.term=t.term||"";var o=this.tokenizer(t,this.options,r);o.term!==t.term&&(this.$search.length&&(this.$search.val(o.term),this.$search.focus()),t.term=o.term),e.call(this,t,i)},t.prototype.tokenizer=function(t,i,r,n){for(var o=r.get("tokenSeparators")||[],a=i.term,s=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};s<a.length;){var h=a[s];if(-1!==e.inArray(h,o)){var c=a.substr(0,s),d=e.extend({},i,{term:c}),u=l(d);null!=u?(n(u),a=a.substr(s+1)||"",s=0):s++}else s++}return{term:a}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,i){this.minimumInputLength=i.get("minimumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void e.call(this,t,i)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,i){this.maximumInputLength=i.get("maximumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){return t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void e.call(this,t,i)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){var r=this;this.current(function(n){var o=null!=n?n.length:0;return r.maximumSelectionLength>0&&o>=r.maximumSelectionLength?void r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}}):void e.call(r,t,i)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},i.prototype.bind=function(){},i.prototype.position=function(e,t){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function i(){}return i.prototype.render=function(t){var i=t.call(this),r=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=r,this.$search=r.find("input"),i.prepend(r),i},i.prototype.bind=function(t,i,r){var n=this;t.call(this,i,r),this.$search.on("keydown",function(e){n.trigger("keypress",e),n._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){n.handleSearch(e)}),i.on("open",function(){n.$search.attr("tabindex",0),n.$search.focus(),window.setTimeout(function(){n.$search.focus()},0)}),i.on("close",function(){n.$search.attr("tabindex",-1),n.$search.val("")}),i.on("results:all",function(e){if(null==e.query.term||""===e.query.term){var t=n.showSearch(e);t?n.$searchContainer.removeClass("select2-search--hide"):n.$searchContainer.addClass("select2-search--hide")}})},i.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},i.prototype.showSearch=function(e,t){return!0},
i}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,i,r){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i,r)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var i=t.slice(0),r=t.length-1;r>=0;r--){var n=t[r];this.placeholder.id===n.id&&i.splice(r,1)}return i},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,i,r){this.lastParams={},e.call(this,t,i,r),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,i,r){var n=this;t.call(this,i,r),i.on("query",function(e){n.lastParams=e,n.loading=!0}),i.on("query:append",function(e){n.lastParams=e,n.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,n.$loadingMore[0]);if(!n.loading&&t){var i=n.$results.offset().top+n.$results.outerHeight(!1),r=n.$loadingMore.offset().top+n.$loadingMore.outerHeight(!1);i+50>=r&&n.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),i=this.options.get("translations").get("loadingMore");return t.html(i(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function i(t,i,r){this.$dropdownParent=r.get("dropdownParent")||e(document.body),t.call(this,i,r)}return i.prototype.bind=function(e,t,i){var r=this,n=!1;e.call(this,t,i),t.on("open",function(){r._showDropdown(),r._attachPositioningHandler(t),n||(n=!0,t.on("results:all",function(){r._positionDropdown(),r._resizeDropdown()}),t.on("results:append",function(){r._positionDropdown(),r._resizeDropdown()}))}),t.on("close",function(){r._hideDropdown(),r._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},i.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},i.prototype.position=function(e,t,i){t.attr("class",i.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(t){var i=e("<span></span>"),r=t.call(this);return i.append(r),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},i.prototype._attachPositioningHandler=function(i,r){var n=this,o="scroll.select2."+r.id,a="resize.select2."+r.id,s="orientationchange.select2."+r.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(o,function(t){var i=e(this).data("select2-scroll-position");e(this).scrollTop(i.y)}),e(window).on(o+" "+a+" "+s,function(e){n._positionDropdown(),n._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i,r){var n="scroll.select2."+r.id,o="resize.select2."+r.id,a="orientationchange.select2."+r.id,s=this.$container.parents().filter(t.hasScroll);s.off(n),e(window).off(n+" "+o+" "+a)},i.prototype._positionDropdown=function(){var t=e(window),i=this.$dropdown.hasClass("select2-dropdown--above"),r=this.$dropdown.hasClass("select2-dropdown--below"),n=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=o.top,a.bottom=o.top+a.height;var s={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},h=l.top<o.top-s.height,c=l.bottom>o.bottom+s.height,d={left:o.left,top:a.bottom},u=this.$dropdownParent;"static"===u.css("position")&&(u=u.offsetParent());var f=u.offset();d.top-=f.top,d.left-=f.left,i||r||(n="below"),c||!h||i?!h&&c&&i&&(n="below"):n="above",("above"==n||i&&"below"!==n)&&(d.top=a.top-s.height),null!=n&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+n),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+n)),this.$dropdownContainer.css(d)},i.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.width="auto"),this.$dropdown.css(e)},i.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var i=0,r=0;r<t.length;r++){var n=t[r];n.children?i+=e(n.children):i++}return i}function t(e,t,i,r){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,i,r)}return t.prototype.showSearch=function(t,i){return e(i.data.results)<this.minimumResultsForSearch?!1:t.call(this,i)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,i){var r=this;e.call(this,t,i),t.on("close",function(){r._handleSelectOnClose()})},e.prototype._handleSelectOnClose=function(){var e=this.getHighlightedResults();if(!(e.length<1)){var t=e.data("data");null!=t.element&&t.element.selected||null==t.element&&t.selected||this.trigger("select",{data:t})}},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,i){var r=this;e.call(this,t,i),t.on("select",function(e){r._selectTriggered(e)}),t.on("unselect",function(e){r._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var i=t.originalEvent;i&&i.ctrlKey||this.trigger("close",{})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(e){var t=e.minimum-e.input.length,i="Please enter "+t+" or more characters";return i},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,i,r,n,o,a,s,l,h,c,d,u,f,p,m,g,v,y,A,b,E,x,w,T,_,S,C,R){function k(){this.reset()}k.prototype.apply=function(d){if(d=e.extend(!0,{},this.defaults,d),null==d.dataAdapter){if(null!=d.ajax?d.dataAdapter=p:null!=d.data?d.dataAdapter=f:d.dataAdapter=u,d.minimumInputLength>0&&(d.dataAdapter=h.Decorate(d.dataAdapter,v)),d.maximumInputLength>0&&(d.dataAdapter=h.Decorate(d.dataAdapter,y)),d.maximumSelectionLength>0&&(d.dataAdapter=h.Decorate(d.dataAdapter,A)),d.tags&&(d.dataAdapter=h.Decorate(d.dataAdapter,m)),(null!=d.tokenSeparators||null!=d.tokenizer)&&(d.dataAdapter=h.Decorate(d.dataAdapter,g)),null!=d.query){var R=t(d.amdBase+"compat/query");d.dataAdapter=h.Decorate(d.dataAdapter,R)}if(null!=d.initSelection){var k=t(d.amdBase+"compat/initSelection");d.dataAdapter=h.Decorate(d.dataAdapter,k)}}if(null==d.resultsAdapter&&(d.resultsAdapter=i,null!=d.ajax&&(d.resultsAdapter=h.Decorate(d.resultsAdapter,w)),null!=d.placeholder&&(d.resultsAdapter=h.Decorate(d.resultsAdapter,x)),d.selectOnClose&&(d.resultsAdapter=h.Decorate(d.resultsAdapter,S))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=b;else{var M=h.Decorate(b,E);d.dropdownAdapter=M}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=h.Decorate(d.dropdownAdapter,_)),d.closeOnSelect&&(d.dropdownAdapter=h.Decorate(d.dropdownAdapter,C)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var P=t(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=h.Decorate(d.dropdownAdapter,P)}d.dropdownAdapter=h.Decorate(d.dropdownAdapter,T)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=n:d.selectionAdapter=r,null!=d.placeholder&&(d.selectionAdapter=h.Decorate(d.selectionAdapter,o)),d.allowClear&&(d.selectionAdapter=h.Decorate(d.selectionAdapter,a)),d.multiple&&(d.selectionAdapter=h.Decorate(d.selectionAdapter,s)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var D=t(d.amdBase+"compat/containerCss");d.selectionAdapter=h.Decorate(d.selectionAdapter,D)}d.selectionAdapter=h.Decorate(d.selectionAdapter,l)}if("string"==typeof d.language)if(d.language.indexOf("-")>0){var H=d.language.split("-"),O=H[0];d.language=[d.language,O]}else d.language=[d.language];if(e.isArray(d.language)){var L=new c;d.language.push("en");for(var I=d.language,B=0;B<I.length;B++){var N=I[B],F={};try{F=c.loadPath(N)}catch(z){try{N=this.defaults.amdLanguageBase+N,F=c.loadPath(N)}catch(U){d.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+N+'" could not be automatically loaded. A fallback will be used instead.');continue}}L.extend(F)}d.translations=L}else{var j=c.loadPath(this.defaults.amdLanguageBase+"en"),V=new c(d.language);V.extend(j),d.translations=V}return d},k.prototype.reset=function(){function t(e){function t(e){return d[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function i(r,n){if(""===e.trim(r.term))return n;if(n.children&&n.children.length>0){for(var o=e.extend(!0,{},n),a=n.children.length-1;a>=0;a--){var s=n.children[a],l=i(r,s);null==l&&o.children.splice(a,1)}return o.children.length>0?o:i(r,o)}var h=t(n.text).toUpperCase(),c=t(r.term).toUpperCase();return h.indexOf(c)>-1?n:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:R,matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},k.prototype.set=function(t,i){var r=e.camelCase(t),n={};n[r]=i;var o=h._convertData(n);e.extend(this.defaults,o)};var M=new k;return M}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,i,r){function n(t,n){if(this.options=t,null!=n&&this.fromElement(n),this.options=i.apply(this.options),n&&n.is("input")){var o=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=r.Decorate(this.options.dataAdapter,o)}}return n.prototype.fromElement=function(e){var i=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var n={};n=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var o=t.extend(!0,{},n);o=r._convertData(o);for(var a in o)t.inArray(a,i)>-1||(t.isPlainObject(this.options[a])?t.extend(this.options[a],o[a]):this.options[a]=o[a]);return this},n.prototype.get=function(e){return this.options[e]},n.prototype.set=function(e,t){this.options[e]=t},n}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,i,r){var n=function(e,i){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),i=i||{},this.options=new t(i,e),n.__super__.constructor.call(this);var r=e.attr("tabindex")||0;e.data("old-tabindex",r),e.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(e,this.options);var a=this.render();this._placeContainer(a);var s=this.options.get("selectionAdapter");this.selection=new s(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var h=this.options.get("resultsAdapter");this.results=new h(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var c=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){c.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return i.Extend(n,i.Observable),n.prototype._generateId=function(e){var t="";return t=null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+i.generateChars(2):i.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t},n.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},n.prototype._resolveWidth=function(e,t){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var r=this._resolveWidth(e,"style");return null!=r?r:this._resolveWidth(e,"element")}if("element"==t){var n=e.outerWidth(!1);return 0>=n?"auto":n+"px"}if("style"==t){var o=e.attr("style");if("string"!=typeof o)return null;for(var a=o.split(";"),s=0,l=a.length;l>s;s+=1){var h=a[s].replace(/\s/g,""),c=h.match(i);if(null!==c&&c.length>=1)return c[1]}return null}return t},n.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},n.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this._sync=i.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=r?(this._observer=new r(function(i){e.each(i,t._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",t._sync,!1)},n.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,i){e.trigger(t,i)})},n.prototype._registerSelectionEvents=function(){var t=this,i=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(r,n){-1===e.inArray(r,i)&&t.trigger(r,n)})},n.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,i){e.trigger(t,i)})},n.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,i){e.trigger(t,i)})},n.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(i){e.trigger("results:all",{data:i,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(i){e.trigger("results:append",{data:i,query:t})})}),this.on("keypress",function(t){var i=t.which;e.isOpen()?i===r.ESC||i===r.TAB||i===r.UP&&t.altKey?(e.close(),t.preventDefault()):i===r.ENTER?(e.trigger("results:select",{}),t.preventDefault()):i===r.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):i===r.UP?(e.trigger("results:previous",{}),t.preventDefault()):i===r.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(i===r.ENTER||i===r.SPACE||i===r.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},n.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},n.prototype.trigger=function(e,t){var i=n.__super__.trigger,r={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in r){var o=r[e],a={prevented:!1,name:e,args:t};if(i.call(this,o,a),a.prevented)return void(t.prevented=!0)}i.call(this,e,t)},n.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},n.prototype.open=function(){this.isOpen()||this.trigger("query",{})},n.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},n.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},n.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},n.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},n.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==e||0===e.length)&&(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},n.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},n.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var i=t[0];e.isArray(i)&&(i=e.map(i,function(e){return e.toString()})),this.$element.val(i).trigger("change")},n.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},n.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},n}),t.define("jquery-mousewheel",["jquery"],function(e){return e}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,i,r){if(null==e.fn.select2){var n=["open","close","destroy"];e.fn.select2=function(t){if(t=t||{},"object"==typeof t)return this.each(function(){var r=e.extend(!0,{},t);new i(e(this),r)}),this;if("string"==typeof t){var r;return this.each(function(){var i=e(this).data("select2");null==i&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2.");var n=Array.prototype.slice.call(arguments,1);r=i[t].apply(i,n)}),e.inArray(t,n)>-1?this:r}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=r),i}),{define:t.define,require:t.require}}(),i=t.require("jquery.select2");return e.fn.select2.amd=t,i}),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vis=t():e.vis=t()}(this,function(){return function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){var r=i(1);r.extend(t,i(7)),r.extend(t,i(24)),r.extend(t,i(60))},function(e,t,i){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n=i(2),o=i(6);t.isNumber=function(e){return e instanceof Number||"number"==typeof e},t.recursiveDOMDelete=function(e){if(e)for(;e.hasChildNodes()===!0;)t.recursiveDOMDelete(e.firstChild),e.removeChild(e.firstChild)},t.giveRange=function(e,t,i,r){if(t==e)return.5;var n=1/(t-e);return Math.max(0,(r-e)*n)},t.isString=function(e){return e instanceof String||"string"==typeof e},t.isDate=function(e){if(e instanceof Date)return!0;if(t.isString(e)){var i=a.exec(e);if(i)return!0;if(!isNaN(Date.parse(e)))return!0}return!1},t.randomUUID=function(){return o.v4()},t.assignAllKeys=function(e,t){for(var i in e)e.hasOwnProperty(i)&&"object"!==r(e[i])&&(e[i]=t)},t.fillIfDefined=function(e,i){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];for(var o in e)void 0!==i[o]&&("object"!==r(i[o])?void 0!==i[o]&&null!==i[o]||void 0===e[o]||n!==!0?e[o]=i[o]:delete e[o]:"object"===r(e[o])&&t.fillIfDefined(e[o],i[o],n))},t.protoExtend=function(e,t){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)e[n]=r[n]}return e},t.extend=function(e,t){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e},t.selectiveExtend=function(e,t,i){if(!Array.isArray(e))throw new Error("Array with property names expected as first argument");for(var r=2;r<arguments.length;r++)for(var n=arguments[r],o=0;o<e.length;o++){var a=e[o];n.hasOwnProperty(a)&&(t[a]=n[a])}return t},t.selectiveDeepExtend=function(e,i,r){var n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(Array.isArray(r))throw new TypeError("Arrays are not supported by deepExtend");for(var o=2;o<arguments.length;o++)for(var a=arguments[o],s=0;s<e.length;s++){var l=e[s];if(a.hasOwnProperty(l))if(r[l]&&r[l].constructor===Object)void 0===i[l]&&(i[l]={}),i[l].constructor===Object?t.deepExtend(i[l],r[l],!1,n):null===r[l]&&void 0!==i[l]&&n===!0?delete i[l]:i[l]=r[l];else{if(Array.isArray(r[l]))throw new TypeError("Arrays are not supported by deepExtend");null===r[l]&&void 0!==i[l]&&n===!0?delete i[l]:i[l]=r[l]}}return i},t.selectiveNotDeepExtend=function(e,i,r){var n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(Array.isArray(r))throw new TypeError("Arrays are not supported by deepExtend");for(var o in r)if(r.hasOwnProperty(o)&&-1==e.indexOf(o))if(r[o]&&r[o].constructor===Object)void 0===i[o]&&(i[o]={}),i[o].constructor===Object?t.deepExtend(i[o],r[o]):null===r[o]&&void 0!==i[o]&&n===!0?delete i[o]:i[o]=r[o];else if(Array.isArray(r[o])){i[o]=[];for(var a=0;a<r[o].length;a++)i[o].push(r[o][a])}else null===r[o]&&void 0!==i[o]&&n===!0?delete i[o]:i[o]=r[o];return i},t.deepExtend=function(e,i,r,n){for(var o in i)if(i.hasOwnProperty(o)||r===!0)if(i[o]&&i[o].constructor===Object)void 0===e[o]&&(e[o]={}),e[o].constructor===Object?t.deepExtend(e[o],i[o],r):null===i[o]&&void 0!==e[o]&&n===!0?delete e[o]:e[o]=i[o];else if(Array.isArray(i[o])){e[o]=[];for(var a=0;a<i[o].length;a++)e[o].push(i[o][a])}else null===i[o]&&void 0!==e[o]&&n===!0?delete e[o]:e[o]=i[o];return e},t.equalArray=function(e,t){if(e.length!=t.length)return!1;for(var i=0,r=e.length;r>i;i++)if(e[i]!=t[i])return!1;return!0},t.convert=function(e,i){var r;if(void 0!==e){if(null===e)return null;if(!i)return e;if("string"!=typeof i&&!(i instanceof String))throw new Error("Type must be a string");switch(i){case"boolean":case"Boolean":return Boolean(e);case"number":case"Number":return Number(e.valueOf());case"string":case"String":return String(e);case"Date":if(t.isNumber(e))return new Date(e);if(e instanceof Date)return new Date(e.valueOf());if(n.isMoment(e))return new Date(e.valueOf());if(t.isString(e))return r=a.exec(e),r?new Date(Number(r[1])):n(e).toDate();throw new Error("Cannot convert object of type "+t.getType(e)+" to type Date");case"Moment":if(t.isNumber(e))return n(e);if(e instanceof Date)return n(e.valueOf());if(n.isMoment(e))return n(e);if(t.isString(e))return r=a.exec(e),n(r?Number(r[1]):e);throw new Error("Cannot convert object of type "+t.getType(e)+" to type Date");case"ISODate":if(t.isNumber(e))return new Date(e);if(e instanceof Date)return e.toISOString();if(n.isMoment(e))return e.toDate().toISOString();if(t.isString(e))return r=a.exec(e),r?new Date(Number(r[1])).toISOString():new Date(e).toISOString();throw new Error("Cannot convert object of type "+t.getType(e)+" to type ISODate");case"ASPDate":if(t.isNumber(e))return"/Date("+e+")/";if(e instanceof Date)return"/Date("+e.valueOf()+")/";if(t.isString(e)){r=a.exec(e);var o;return o=r?new Date(Number(r[1])).valueOf():new Date(e).valueOf(),"/Date("+o+")/"}throw new Error("Cannot convert object of type "+t.getType(e)+" to type ASPDate");default:throw new Error('Unknown type "'+i+'"')}}};var a=/^\/?Date\((\-?\d+)/i;t.getType=function(e){var t="undefined"==typeof e?"undefined":r(e);return"object"==t?null===e?"null":e instanceof Boolean?"Boolean":e instanceof Number?"Number":e instanceof String?"String":Array.isArray(e)?"Array":e instanceof Date?"Date":"Object":"number"==t?"Number":"boolean"==t?"Boolean":"string"==t?"String":void 0===t?"undefined":t},t.copyAndExtendArray=function(e,t){for(var i=[],r=0;r<e.length;r++)i.push(e[r]);return i.push(t),i},t.copyArray=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},t.getAbsoluteLeft=function(e){return e.getBoundingClientRect().left},t.getAbsoluteRight=function(e){return e.getBoundingClientRect().right},t.getAbsoluteTop=function(e){return e.getBoundingClientRect().top},t.addClassName=function(e,t){var i=e.className.split(" ");-1==i.indexOf(t)&&(i.push(t),e.className=i.join(" "))},t.removeClassName=function(e,t){var i=e.className.split(" "),r=i.indexOf(t);-1!=r&&(i.splice(r,1),e.className=i.join(" "))},t.forEach=function(e,t){var i,r;if(Array.isArray(e))for(i=0,r=e.length;r>i;i++)t(e[i],i,e);else for(i in e)e.hasOwnProperty(i)&&t(e[i],i,e)},t.toArray=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},t.updateProperty=function(e,t,i){return e[t]!==i?(e[t]=i,!0):!1},t.throttle=function(e,t){var i=null,r=!1;return function n(){i?r=!0:(r=!1,e(),i=setTimeout(function(){i=null,r&&n()},t))}},t.addEventListener=function(e,t,i,r){e.addEventListener?(void 0===r&&(r=!1),"mousewheel"===t&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.addEventListener(t,i,r)):e.attachEvent("on"+t,i)},t.removeEventListener=function(e,t,i,r){e.removeEventListener?(void 0===r&&(r=!1),"mousewheel"===t&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.removeEventListener(t,i,r)):e.detachEvent("on"+t,i)},t.preventDefault=function(e){e||(e=window.event),e.preventDefault?e.preventDefault():e.returnValue=!1},t.getTarget=function(e){e||(e=window.event);var t;return e.target?t=e.target:e.srcElement&&(t=e.srcElement),void 0!=t.nodeType&&3==t.nodeType&&(t=t.parentNode),t},t.hasParent=function(e,t){for(var i=e;i;){if(i===t)return!0;i=i.parentNode}return!1},t.option={},t.option.asBoolean=function(e,t){return"function"==typeof e&&(e=e()),null!=e?0!=e:t||null},t.option.asNumber=function(e,t){return"function"==typeof e&&(e=e()),null!=e?Number(e)||t||null:t||null},t.option.asString=function(e,t){return"function"==typeof e&&(e=e()),null!=e?String(e):t||null},t.option.asSize=function(e,i){return"function"==typeof e&&(e=e()),t.isString(e)?e:t.isNumber(e)?e+"px":i||null},t.option.asElement=function(e,t){return"function"==typeof e&&(e=e()),e||t||null},t.hexToRGB=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,r){return t+t+i+i+r+r});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},t.overrideOpacity=function(e,i){if(-1!=e.indexOf("rgba"))return e;if(-1!=e.indexOf("rgb")){var r=e.substr(e.indexOf("(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+i+")"}var r=t.hexToRGB(e);return null==r?e:"rgba("+r.r+","+r.g+","+r.b+","+i+")"},t.RGBToHex=function(e,t,i){return"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)},t.parseColor=function(e){var i;if(t.isString(e)===!0){if(t.isValidRGB(e)===!0){var r=e.substr(4).substr(0,e.length-5).split(",").map(function(e){return parseInt(e)});e=t.RGBToHex(r[0],r[1],r[2])}if(t.isValidHex(e)===!0){var n=t.hexToHSV(e),o={h:n.h,s:.8*n.s,v:Math.min(1,1.02*n.v)},a={h:n.h,s:Math.min(1,1.25*n.s),v:.8*n.v},s=t.HSVToHex(a.h,a.s,a.v),l=t.HSVToHex(o.h,o.s,o.v);i={background:e,border:s,highlight:{background:l,border:s},hover:{background:l,border:s}}}else i={background:e,border:e,highlight:{background:e,border:e},hover:{background:e,border:e}}}else i={},i.background=e.background||void 0,i.border=e.border||void 0,t.isString(e.highlight)?i.highlight={border:e.highlight,background:e.highlight}:(i.highlight={},i.highlight.background=e.highlight&&e.highlight.background||void 0,i.highlight.border=e.highlight&&e.highlight.border||void 0),t.isString(e.hover)?i.hover={border:e.hover,background:e.hover}:(i.hover={},i.hover.background=e.hover&&e.hover.background||void 0,i.hover.border=e.hover&&e.hover.border||void 0);return i},t.RGBToHSV=function(e,t,i){e/=255,t/=255,i/=255;var r=Math.min(e,Math.min(t,i)),n=Math.max(e,Math.max(t,i));if(r==n)return{h:0,s:0,v:r};var o=e==r?t-i:i==r?e-t:i-e,a=e==r?3:i==r?1:5,s=60*(a-o/(n-r))/360,l=(n-r)/n,h=n;
return{h:s,s:l,v:h}};var s={split:function(e){var t={};return e.split(";").forEach(function(e){if(""!=e.trim()){var i=e.split(":"),r=i[0].trim(),n=i[1].trim();t[r]=n}}),t},join:function(e){return Object.keys(e).map(function(t){return t+": "+e[t]}).join("; ")}};t.addCssText=function(e,i){var r=s.split(e.style.cssText),n=s.split(i),o=t.extend(r,n);e.style.cssText=s.join(o)},t.removeCssText=function(e,t){var i=s.split(e.style.cssText),r=s.split(t);for(var n in r)r.hasOwnProperty(n)&&delete i[n];e.style.cssText=s.join(i)},t.HSVToRGB=function(e,t,i){var r,n,o,a=Math.floor(6*e),s=6*e-a,l=i*(1-t),h=i*(1-s*t),c=i*(1-(1-s)*t);switch(a%6){case 0:r=i,n=c,o=l;break;case 1:r=h,n=i,o=l;break;case 2:r=l,n=i,o=c;break;case 3:r=l,n=h,o=i;break;case 4:r=c,n=l,o=i;break;case 5:r=i,n=l,o=h}return{r:Math.floor(255*r),g:Math.floor(255*n),b:Math.floor(255*o)}},t.HSVToHex=function(e,i,r){var n=t.HSVToRGB(e,i,r);return t.RGBToHex(n.r,n.g,n.b)},t.hexToHSV=function(e){var i=t.hexToRGB(e);return t.RGBToHSV(i.r,i.g,i.b)},t.isValidHex=function(e){var t=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return t},t.isValidRGB=function(e){e=e.replace(" ","");var t=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(e);return t},t.isValidRGBA=function(e){e=e.replace(" ","");var t=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(e);return t},t.selectiveBridgeObject=function(e,i){if("object"==("undefined"==typeof i?"undefined":r(i))){for(var n=Object.create(i),o=0;o<e.length;o++)i.hasOwnProperty(e[o])&&"object"==r(i[e[o]])&&(n[e[o]]=t.bridgeObject(i[e[o]]));return n}return null},t.bridgeObject=function(e){if("object"==("undefined"==typeof e?"undefined":r(e))){var i=Object.create(e);for(var n in e)e.hasOwnProperty(n)&&"object"==r(e[n])&&(i[n]=t.bridgeObject(e[n]));return i}return null},t.insertSort=function(e,t){for(var i=0;i<e.length;i++){for(var r=e[i],n=i;n>0&&t(r,e[n-1])<0;n--)e[n]=e[n-1];e[n]=r}return e},t.mergeOptions=function(e,t,i){var r=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],arguments.length<=4||void 0===arguments[4]?{}:arguments[4]);if(null===t[i])e[i]=Object.create(r[i]);else if(void 0!==t[i])if("boolean"==typeof t[i])e[i].enabled=t[i];else{void 0===t[i].enabled&&(e[i].enabled=!0);for(var n in t[i])t[i].hasOwnProperty(n)&&(e[i][n]=t[i][n])}},t.binarySearchCustom=function(e,t,i,r){for(var n=1e4,o=0,a=0,s=e.length-1;s>=a&&n>o;){var l=Math.floor((a+s)/2),h=e[l],c=void 0===r?h[i]:h[i][r],d=t(c);if(0==d)return l;-1==d?a=l+1:s=l-1,o++}return-1},t.binarySearchValue=function(e,t,i,r,n){for(var o,a,s,l,h=1e4,c=0,d=0,u=e.length-1,n=void 0!=n?n:function(e,t){return e==t?0:t>e?-1:1};u>=d&&h>c;){if(l=Math.floor(.5*(u+d)),o=e[Math.max(0,l-1)][i],a=e[l][i],s=e[Math.min(e.length-1,l+1)][i],0==n(a,t))return l;if(n(o,t)<0&&n(a,t)>0)return"before"==r?Math.max(0,l-1):l;if(n(a,t)<0&&n(s,t)>0)return"before"==r?l:Math.min(e.length-1,l+1);n(a,t)<0?d=l+1:u=l-1,c++}return-1},t.easingFunctions={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return.5>e?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return.5>e?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return.5>e?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},function(e,t,i){e.exports="undefined"!=typeof window&&window.moment||i(3)},function(e,t,i){(function(e){!function(t,i){e.exports=i()}(this,function(){function t(){return ar.apply(null,arguments)}function i(e){ar=e}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function n(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function o(e,t){var i,r=[];for(i=0;i<e.length;++i)r.push(t(e[i],i));return r}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e,t){for(var i in t)a(t,i)&&(e[i]=t[i]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function l(e,t,i,r){return Ie(e,t,i,r,!0).utc()}function h(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function c(e){return null==e._pf&&(e._pf=h()),e._pf}function d(e){if(null==e._isValid){var t=c(e),i=sr.call(t.parsedDateParts,function(e){return null!=e});e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function u(e){var t=l(NaN);return null!=e?s(c(t),e):c(t).userInvalidated=!0,t}function f(e){return void 0===e}function p(e,t){var i,r,n;if(f(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),f(t._i)||(e._i=t._i),f(t._f)||(e._f=t._f),f(t._l)||(e._l=t._l),f(t._strict)||(e._strict=t._strict),f(t._tzm)||(e._tzm=t._tzm),f(t._isUTC)||(e._isUTC=t._isUTC),f(t._offset)||(e._offset=t._offset),f(t._pf)||(e._pf=c(t)),f(t._locale)||(e._locale=t._locale),lr.length>0)for(i in lr)r=lr[i],n=t[r],f(n)||(e[r]=n);return e}function m(e){p(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),hr===!1&&(hr=!0,t.updateOffset(this),hr=!1)}function g(e){return e instanceof m||null!=e&&null!=e._isAMomentObject}function v(e){return 0>e?Math.ceil(e):Math.floor(e)}function y(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=v(t)),i}function A(e,t,i){var r,n=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;n>r;r++)(i&&e[r]!==t[r]||!i&&y(e[r])!==y(t[r]))&&a++;return a+o}function b(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function E(e,i){var r=!0;return s(function(){return null!=t.deprecationHandler&&t.deprecationHandler(null,e),r&&(b(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),r=!1),i.apply(this,arguments)},i)}function x(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),cr[e]||(b(i),cr[e]=!0)}function w(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e){return"[object Object]"===Object.prototype.toString.call(e)}function _(e){var t,i;for(i in e)t=e[i],w(t)?this[i]=t:this["_"+i]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function S(e,t){var i,r=s({},e);for(i in t)a(t,i)&&(T(e[i])&&T(t[i])?(r[i]={},s(r[i],e[i]),s(r[i],t[i])):null!=t[i]?r[i]=t[i]:delete r[i]);return r}function C(e){null!=e&&this.set(e)}function R(e){return e?e.toLowerCase().replace("_","-"):e}function k(e){for(var t,i,r,n,o=0;o<e.length;){for(n=R(e[o]).split("-"),t=n.length,i=R(e[o+1]),i=i?i.split("-"):null;t>0;){if(r=M(n.slice(0,t).join("-")))return r;if(i&&i.length>=t&&A(n,i,!0)>=t-1)break;t--}o++}return null}function M(t){var i=null;if(!pr[t]&&"undefined"!=typeof e&&e&&e.exports)try{i=ur._abbr,!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),P(i)}catch(r){}return pr[t]}function P(e,t){var i;return e&&(i=f(t)?O(e):D(e,t),i&&(ur=i)),ur._abbr}function D(e,t){return null!==t?(t.abbr=e,null!=pr[e]?(x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),t=S(pr[e]._config,t)):null!=t.parentLocale&&(null!=pr[t.parentLocale]?t=S(pr[t.parentLocale]._config,t):x("parentLocaleUndefined","specified parentLocale is not defined yet")),pr[e]=new C(t),P(e),pr[e]):(delete pr[e],null)}function H(e,t){if(null!=t){var i;null!=pr[e]&&(t=S(pr[e]._config,t)),i=new C(t),i.parentLocale=pr[e],pr[e]=i,P(e)}else null!=pr[e]&&(null!=pr[e].parentLocale?pr[e]=pr[e].parentLocale:null!=pr[e]&&delete pr[e]);return pr[e]}function O(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ur;if(!r(e)){if(t=M(e))return t;e=[e]}return k(e)}function L(){return dr(pr)}function I(e,t){var i=e.toLowerCase();mr[i]=mr[i+"s"]=mr[t]=e}function B(e){return"string"==typeof e?mr[e]||mr[e.toLowerCase()]:void 0}function N(e){var t,i,r={};for(i in e)a(e,i)&&(t=B(i),t&&(r[t]=e[i]));return r}function F(e,i){return function(r){return null!=r?(U(this,e,r),t.updateOffset(this,i),this):z(this,e)}}function z(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function U(e,t,i){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](i)}function j(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else if(e=B(e),w(this[e]))return this[e](t);return this}function V(e,t,i){var r=""+Math.abs(e),n=t-r.length,o=e>=0;return(o?i?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+r}function G(e,t,i,r){var n=r;"string"==typeof r&&(n=function(){return this[r]()}),e&&(Ar[e]=n),t&&(Ar[t[0]]=function(){return V(n.apply(this,arguments),t[1],t[2])}),i&&(Ar[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function W(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Y(e){var t,i,r=e.match(gr);for(t=0,i=r.length;i>t;t++)Ar[r[t]]?r[t]=Ar[r[t]]:r[t]=W(r[t]);return function(t){var n,o="";for(n=0;i>n;n++)o+=r[n]instanceof Function?r[n].call(t,e):r[n];return o}}function q(e,t){return e.isValid()?(t=X(t,e.localeData()),yr[t]=yr[t]||Y(t),yr[t](e)):e.localeData().invalidDate()}function X(e,t){function i(e){return t.longDateFormat(e)||e}var r=5;for(vr.lastIndex=0;r>=0&&vr.test(e);)e=e.replace(vr,i),vr.lastIndex=0,r-=1;return e}function Q(e,t,i){Br[e]=w(t)?t:function(e,r){return e&&i?i:t}}function Z(e,t){return a(Br,e)?Br[e](t._strict,t._locale):new RegExp(K(e))}function K(e){return J(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,r,n){return t||i||r||n}))}function J(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $(e,t){var i,r=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(r=function(e,i){i[t]=y(e)}),i=0;i<e.length;i++)Nr[e[i]]=r}function ee(e,t){$(e,function(e,i,r,n){r._w=r._w||{},t(e,r._w,r,n)})}function te(e,t,i){null!=t&&a(Nr,e)&&Nr[e](t,i._a,i,e)}function ie(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function re(e,t){return r(this._months)?this._months[e.month()]:this._months[Xr.test(t)?"format":"standalone"][e.month()]}function ne(e,t){return r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Xr.test(t)?"format":"standalone"][e.month()]}function oe(e,t,i){var r,n,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;12>r;++r)o=l([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===t?(n=fr.call(this._shortMonthsParse,a),-1!==n?n:null):(n=fr.call(this._longMonthsParse,a),-1!==n?n:null):"MMM"===t?(n=fr.call(this._shortMonthsParse,a),-1!==n?n:(n=fr.call(this._longMonthsParse,a),-1!==n?n:null)):(n=fr.call(this._longMonthsParse,a),-1!==n?n:(n=fr.call(this._shortMonthsParse,a),-1!==n?n:null))}function ae(e,t,i){var r,n,o;if(this._monthsParseExact)return oe.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(n=l([2e3,r]),i&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),i||this._monthsParse[r]||(o="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(i&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!i&&this._monthsParse[r].test(e))return r}}function se(e,t){var i;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=y(t);else if(t=e.localeData().monthsParse(t),"number"!=typeof t)return e;return i=Math.min(e.date(),ie(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function le(e){return null!=e?(se(this,e),t.updateOffset(this,!0),this):z(this,"Month")}function he(){return ie(this.year(),this.month())}function ce(e){return this._monthsParseExact?(a(this,"_monthsRegex")||ue.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}function de(e){return this._monthsParseExact?(a(this,"_monthsRegex")||ue.call(this),e?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}function ue(){function e(e,t){return t.length-e.length}var t,i,r=[],n=[],o=[];for(t=0;12>t;t++)i=l([2e3,t]),r.push(this.monthsShort(i,"")),n.push(this.months(i,"")),o.push(this.months(i,"")),o.push(this.monthsShort(i,""));for(r.sort(e),n.sort(e),o.sort(e),t=0;12>t;t++)r[t]=J(r[t]),n[t]=J(n[t]),o[t]=J(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function fe(e){var t,i=e._a;return i&&-2===c(e).overflow&&(t=i[zr]<0||i[zr]>11?zr:i[Ur]<1||i[Ur]>ie(i[Fr],i[zr])?Ur:i[jr]<0||i[jr]>24||24===i[jr]&&(0!==i[Vr]||0!==i[Gr]||0!==i[Wr])?jr:i[Vr]<0||i[Vr]>59?Vr:i[Gr]<0||i[Gr]>59?Gr:i[Wr]<0||i[Wr]>999?Wr:-1,c(e)._overflowDayOfYear&&(Fr>t||t>Ur)&&(t=Ur),c(e)._overflowWeeks&&-1===t&&(t=Yr),c(e)._overflowWeekday&&-1===t&&(t=qr),c(e).overflow=t),e}function pe(e){var t,i,r,n,o,a,s=e._i,l=$r.exec(s)||en.exec(s);if(l){for(c(e).iso=!0,t=0,i=rn.length;i>t;t++)if(rn[t][1].exec(l[1])){n=rn[t][0],r=rn[t][2]!==!1;break}if(null==n)return void(e._isValid=!1);if(l[3]){for(t=0,i=nn.length;i>t;t++)if(nn[t][1].exec(l[3])){o=(l[2]||" ")+nn[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(l[4]){if(!tn.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=n+(o||"")+(a||""),ke(e)}else e._isValid=!1}function me(e){var i=on.exec(e._i);return null!==i?void(e._d=new Date(+i[1])):(pe(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function ge(e,t,i,r,n,o,a){var s=new Date(e,t,i,r,n,o,a);return 100>e&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function ve(e){var t=new Date(Date.UTC.apply(null,arguments));return 100>e&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function ye(e){return Ae(e)?366:365}function Ae(e){return e%4===0&&e%100!==0||e%400===0}function be(){return Ae(this.year())}function Ee(e,t,i){var r=7+t-i,n=(7+ve(e,0,r).getUTCDay()-t)%7;return-n+r-1}function xe(e,t,i,r,n){var o,a,s=(7+i-r)%7,l=Ee(e,r,n),h=1+7*(t-1)+s+l;return 0>=h?(o=e-1,a=ye(o)+h):h>ye(e)?(o=e+1,a=h-ye(e)):(o=e,a=h),{year:o,dayOfYear:a}}function we(e,t,i){var r,n,o=Ee(e.year(),t,i),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return 1>a?(n=e.year()-1,r=a+Te(n,t,i)):a>Te(e.year(),t,i)?(r=a-Te(e.year(),t,i),n=e.year()+1):(n=e.year(),r=a),{week:r,year:n}}function Te(e,t,i){var r=Ee(e,t,i),n=Ee(e+1,t,i);return(ye(e)-r+n)/7}function _e(e,t,i){return null!=e?e:null!=t?t:i}function Se(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function Ce(e){var t,i,r,n,o=[];if(!e._d){for(r=Se(e),e._w&&null==e._a[Ur]&&null==e._a[zr]&&Re(e),e._dayOfYear&&(n=_e(e._a[Fr],r[Fr]),e._dayOfYear>ye(n)&&(c(e)._overflowDayOfYear=!0),i=ve(n,0,e._dayOfYear),e._a[zr]=i.getUTCMonth(),e._a[Ur]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;7>t;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[jr]&&0===e._a[Vr]&&0===e._a[Gr]&&0===e._a[Wr]&&(e._nextDay=!0,e._a[jr]=0),e._d=(e._useUTC?ve:ge).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[jr]=24)}}function Re(e){var t,i,r,n,o,a,s,l;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,a=4,i=_e(t.GG,e._a[Fr],we(Be(),1,4).year),r=_e(t.W,1),n=_e(t.E,1),(1>n||n>7)&&(l=!0)):(o=e._locale._week.dow,a=e._locale._week.doy,i=_e(t.gg,e._a[Fr],we(Be(),o,a).year),r=_e(t.w,1),null!=t.d?(n=t.d,(0>n||n>6)&&(l=!0)):null!=t.e?(n=t.e+o,(t.e<0||t.e>6)&&(l=!0)):n=o),1>r||r>Te(i,o,a)?c(e)._overflowWeeks=!0:null!=l?c(e)._overflowWeekday=!0:(s=xe(i,r,n,o,a),e._a[Fr]=s.year,e._dayOfYear=s.dayOfYear)}function ke(e){if(e._f===t.ISO_8601)return void pe(e);e._a=[],c(e).empty=!0;var i,r,n,o,a,s=""+e._i,l=s.length,h=0;for(n=X(e._f,e._locale).match(gr)||[],i=0;i<n.length;i++)o=n[i],r=(s.match(Z(o,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&c(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),h+=r.length),Ar[o]?(r?c(e).empty=!1:c(e).unusedTokens.push(o),te(o,r,e)):e._strict&&!r&&c(e).unusedTokens.push(o);c(e).charsLeftOver=l-h,s.length>0&&c(e).unusedInput.push(s),c(e).bigHour===!0&&e._a[jr]<=12&&e._a[jr]>0&&(c(e).bigHour=void 0),c(e).parsedDateParts=e._a.slice(0),c(e).meridiem=e._meridiem,e._a[jr]=Me(e._locale,e._a[jr],e._meridiem),Ce(e),fe(e)}function Me(e,t,i){var r;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(r=e.isPM(i),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function Pe(e){var t,i,r,n,o;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(NaN));for(n=0;n<e._f.length;n++)o=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[n],ke(t),d(t)&&(o+=c(t).charsLeftOver,o+=10*c(t).unusedTokens.length,c(t).score=o,(null==r||r>o)&&(r=o,i=t));s(e,i||t)}function De(e){if(!e._d){var t=N(e._i);e._a=o([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Ce(e)}}function He(e){var t=new m(fe(Oe(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Oe(e){var t=e._i,i=e._f;return e._locale=e._locale||O(e._l),null===t||void 0===i&&""===t?u({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),g(t)?new m(fe(t)):(r(i)?Pe(e):i?ke(e):n(t)?e._d=t:Le(e),d(e)||(e._d=null),e))}function Le(e){var i=e._i;void 0===i?e._d=new Date(t.now()):n(i)?e._d=new Date(i.valueOf()):"string"==typeof i?me(e):r(i)?(e._a=o(i.slice(0),function(e){return parseInt(e,10)}),Ce(e)):"object"==typeof i?De(e):"number"==typeof i?e._d=new Date(i):t.createFromInputFallback(e)}function Ie(e,t,i,r,n){var o={};return"boolean"==typeof i&&(r=i,i=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=n,o._l=i,o._i=e,o._f=t,o._strict=r,He(o)}function Be(e,t,i,r){return Ie(e,t,i,r,!1)}function Ne(e,t){var i,n;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return Be();for(i=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](i)||(i=t[n]);return i}function Fe(){var e=[].slice.call(arguments,0);return Ne("isBefore",e)}function ze(){var e=[].slice.call(arguments,0);return Ne("isAfter",e)}function Ue(e){var t=N(e),i=t.year||0,r=t.quarter||0,n=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,l=t.minute||0,h=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*h+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+n+3*r+12*i,this._data={},this._locale=O(),this._bubble()}function je(e){return e instanceof Ue}function Ve(e,t){G(e,0,0,function(){var e=this.utcOffset(),i="+";return 0>e&&(e=-e,i="-"),i+V(~~(e/60),2)+t+V(~~e%60,2)})}function Ge(e,t){var i=(t||"").match(e)||[],r=i[i.length-1]||[],n=(r+"").match(cn)||["-",0,0],o=+(60*n[1])+y(n[2]);return"+"===n[0]?o:-o}function We(e,i){var r,o;return i._isUTC?(r=i.clone(),o=(g(e)||n(e)?e.valueOf():Be(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+o),t.updateOffset(r,!1),r):Be(e).local()}function Ye(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function qe(e,i){var r,n=this._offset||0;return this.isValid()?null!=e?("string"==typeof e?e=Ge(Or,e):Math.abs(e)<16&&(e=60*e),!this._isUTC&&i&&(r=Ye(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),n!==e&&(!i||this._changeInProgress?ct(this,nt(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:Ye(this):null!=e?this:NaN}function Xe(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Qe(e){return this.utcOffset(0,e)}function Ze(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ye(this),"m")),this}function Ke(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ge(Hr,this._i)),this}function Je(e){return this.isValid()?(e=e?Be(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function $e(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function et(){if(!f(this._isDSTShifted))return this._isDSTShifted;var e={};if(p(e,this),e=Oe(e),e._a){var t=e._isUTC?l(e._a):Be(e._a);this._isDSTShifted=this.isValid()&&A(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function tt(){return this.isValid()?!this._isUTC:!1}function it(){return this.isValid()?this._isUTC:!1}function rt(){return this.isValid()?this._isUTC&&0===this._offset:!1}function nt(e,t){var i,r,n,o=e,s=null;return je(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(s=dn.exec(e))?(i="-"===s[1]?-1:1,o={y:0,d:y(s[Ur])*i,h:y(s[jr])*i,m:y(s[Vr])*i,s:y(s[Gr])*i,ms:y(s[Wr])*i}):(s=un.exec(e))?(i="-"===s[1]?-1:1,o={y:ot(s[2],i),M:ot(s[3],i),w:ot(s[4],i),d:ot(s[5],i),h:ot(s[6],i),m:ot(s[7],i),s:ot(s[8],i)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(n=st(Be(o.from),Be(o.to)),o={},o.ms=n.milliseconds,o.M=n.months),r=new Ue(o),je(e)&&a(e,"_locale")&&(r._locale=e._locale),r}function ot(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function at(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function st(e,t){var i;return e.isValid()&&t.isValid()?(t=We(t,e),e.isBefore(t)?i=at(e,t):(i=at(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function lt(e){return 0>e?-1*Math.round(-1*e):Math.round(e)}function ht(e,t){return function(i,r){var n,o;return null===r||isNaN(+r)||(x(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=i,i=r,r=o),i="string"==typeof i?+i:i,n=nt(i,r),ct(this,n,e),this}}function ct(e,i,r,n){var o=i._milliseconds,a=lt(i._days),s=lt(i._months);e.isValid()&&(n=null==n?!0:n,o&&e._d.setTime(e._d.valueOf()+o*r),a&&U(e,"Date",z(e,"Date")+a*r),s&&se(e,z(e,"Month")+s*r),n&&t.updateOffset(e,a||s))}function dt(e,t){var i=e||Be(),r=We(i,this).startOf("day"),n=this.diff(r,"days",!0),o=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse",a=t&&(w(t[o])?t[o]():t[o]);return this.format(a||this.localeData().calendar(o,this,Be(i)))}function ut(){return new m(this)}function ft(e,t){var i=g(e)?e:Be(e);return this.isValid()&&i.isValid()?(t=B(f(t)?"millisecond":t),"millisecond"===t?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf()):!1}function pt(e,t){var i=g(e)?e:Be(e);return this.isValid()&&i.isValid()?(t=B(f(t)?"millisecond":t),"millisecond"===t?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf()):!1}function mt(e,t,i,r){return r=r||"()",("("===r[0]?this.isAfter(e,i):!this.isBefore(e,i))&&(")"===r[1]?this.isBefore(t,i):!this.isAfter(t,i))}function gt(e,t){var i,r=g(e)?e:Be(e);return this.isValid()&&r.isValid()?(t=B(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(i=r.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf())):!1}function vt(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function yt(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function At(e,t,i){var r,n,o,a;return this.isValid()?(r=We(e,this),r.isValid()?(n=6e4*(r.utcOffset()-this.utcOffset()),t=B(t),"year"===t||"month"===t||"quarter"===t?(a=bt(this,r),"quarter"===t?a/=3:"year"===t&&(a/=12)):(o=this-r,a="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-n)/864e5:"week"===t?(o-n)/6048e5:o),i?a:v(a)):NaN):NaN}function bt(e,t){var i,r,n=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(n,"months");return 0>t-o?(i=e.clone().add(n-1,"months"),r=(t-o)/(o-i)):(i=e.clone().add(n+1,"months"),r=(t-o)/(i-o)),-(n+r)||0}function Et(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function xt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?w(Date.prototype.toISOString)?this.toDate().toISOString():q(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):q(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function wt(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=q(this,e);return this.localeData().postformat(i)}function Tt(e,t){return this.isValid()&&(g(e)&&e.isValid()||Be(e).isValid())?nt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function _t(e){return this.from(Be(),e)}function St(e,t){return this.isValid()&&(g(e)&&e.isValid()||Be(e).isValid())?nt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Ct(e){return this.to(Be(),e)}function Rt(e){var t;return void 0===e?this._locale._abbr:(t=O(e),null!=t&&(this._locale=t),this)}function kt(){return this._locale}function Mt(e){switch(e=B(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function Pt(e){return e=B(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function Dt(){return this._d.valueOf()-6e4*(this._offset||0)}function Ht(){return Math.floor(this.valueOf()/1e3)}function Ot(){return this._offset?new Date(this.valueOf()):this._d}function Lt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function It(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Bt(){return this.isValid()?this.toISOString():null}function Nt(){return d(this)}function Ft(){return s({},c(this))}function zt(){return c(this).overflow}function Ut(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function jt(e,t){G(0,[e,e.length],0,t)}function Vt(e){return qt.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Gt(e){return qt.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Wt(){return Te(this.year(),1,4)}function Yt(){var e=this.localeData()._week;return Te(this.year(),e.dow,e.doy)}function qt(e,t,i,r,n){var o;return null==e?we(this,r,n).year:(o=Te(e,r,n),t>o&&(t=o),Xt.call(this,e,t,i,r,n))}function Xt(e,t,i,r,n){var o=xe(e,t,i,r,n),a=ve(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Qt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Zt(e){return we(e,this._week.dow,this._week.doy).week}function Kt(){return this._week.dow}function Jt(){return this._week.doy}function $t(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function ei(e){var t=we(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function ti(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function ii(e,t){return r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}function ri(e){return this._weekdaysShort[e.day()]}function ni(e){return this._weekdaysMin[e.day()]}function oi(e,t,i){var r,n,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;7>r;++r)o=l([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===t?(n=fr.call(this._weekdaysParse,a),-1!==n?n:null):"ddd"===t?(n=fr.call(this._shortWeekdaysParse,a),-1!==n?n:null):(n=fr.call(this._minWeekdaysParse,a),-1!==n?n:null):"dddd"===t?(n=fr.call(this._weekdaysParse,a),-1!==n?n:(n=fr.call(this._shortWeekdaysParse,a),-1!==n?n:(n=fr.call(this._minWeekdaysParse,a),-1!==n?n:null))):"ddd"===t?(n=fr.call(this._shortWeekdaysParse,a),-1!==n?n:(n=fr.call(this._weekdaysParse,a),-1!==n?n:(n=fr.call(this._minWeekdaysParse,a),-1!==n?n:null))):(n=fr.call(this._minWeekdaysParse,a),-1!==n?n:(n=fr.call(this._weekdaysParse,a),-1!==n?n:(n=fr.call(this._shortWeekdaysParse,a),-1!==n?n:null)))}function ai(e,t,i){var r,n,o;if(this._weekdaysParseExact)return oi.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;7>r;r++){if(n=l([2e3,1]).day(r),i&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(n,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(n,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(n,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(i&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(i&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!i&&this._weekdaysParse[r].test(e))return r}}function si(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ti(e,this.localeData()),this.add(e-t,"d")):t}function li(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function hi(e){return this.isValid()?null==e?this.day()||7:this.day(this.day()%7?e:e-7):null!=e?this:NaN}function ci(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||fi.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}function di(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||fi.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}function ui(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||fi.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}function fi(){function e(e,t){return t.length-e.length}var t,i,r,n,o,a=[],s=[],h=[],c=[];for(t=0;7>t;t++)i=l([2e3,1]).day(t),r=this.weekdaysMin(i,""),n=this.weekdaysShort(i,""),o=this.weekdays(i,""),a.push(r),s.push(n),h.push(o),c.push(r),c.push(n),c.push(o);for(a.sort(e),s.sort(e),h.sort(e),c.sort(e),t=0;7>t;t++)s[t]=J(s[t]),h[t]=J(h[t]),c[t]=J(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function pi(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;
return null==e?t:this.add(e-t,"d")}function mi(){return this.hours()%12||12}function gi(){return this.hours()||24}function vi(e,t){G(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function yi(e,t){return t._meridiemParse}function Ai(e){return"p"===(e+"").toLowerCase().charAt(0)}function bi(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}function Ei(e,t){t[Wr]=y(1e3*("0."+e))}function xi(){return this._isUTC?"UTC":""}function wi(){return this._isUTC?"Coordinated Universal Time":""}function Ti(e){return Be(1e3*e)}function _i(){return Be.apply(null,arguments).parseZone()}function Si(e,t,i){var r=this._calendar[e];return w(r)?r.call(t,i):r}function Ci(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function Ri(){return this._invalidDate}function ki(e){return this._ordinal.replace("%d",e)}function Mi(e){return e}function Pi(e,t,i,r){var n=this._relativeTime[i];return w(n)?n(e,t,i,r):n.replace(/%d/i,e)}function Di(e,t){var i=this._relativeTime[e>0?"future":"past"];return w(i)?i(t):i.replace(/%s/i,t)}function Hi(e,t,i,r){var n=O(),o=l().set(r,t);return n[i](o,e)}function Oi(e,t,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return Hi(e,t,i,"month");var r,n=[];for(r=0;12>r;r++)n[r]=Hi(e,r,i,"month");return n}function Li(e,t,i,r){"boolean"==typeof e?("number"==typeof t&&(i=t,t=void 0),t=t||""):(t=e,i=t,e=!1,"number"==typeof t&&(i=t,t=void 0),t=t||"");var n=O(),o=e?n._week.dow:0;if(null!=i)return Hi(t,(i+o)%7,r,"day");var a,s=[];for(a=0;7>a;a++)s[a]=Hi(t,(a+o)%7,r,"day");return s}function Ii(e,t){return Oi(e,t,"months")}function Bi(e,t){return Oi(e,t,"monthsShort")}function Ni(e,t,i){return Li(e,t,i,"weekdays")}function Fi(e,t,i){return Li(e,t,i,"weekdaysShort")}function zi(e,t,i){return Li(e,t,i,"weekdaysMin")}function Ui(){var e=this._data;return this._milliseconds=Fn(this._milliseconds),this._days=Fn(this._days),this._months=Fn(this._months),e.milliseconds=Fn(e.milliseconds),e.seconds=Fn(e.seconds),e.minutes=Fn(e.minutes),e.hours=Fn(e.hours),e.months=Fn(e.months),e.years=Fn(e.years),this}function ji(e,t,i,r){var n=nt(t,i);return e._milliseconds+=r*n._milliseconds,e._days+=r*n._days,e._months+=r*n._months,e._bubble()}function Vi(e,t){return ji(this,e,t,1)}function Gi(e,t){return ji(this,e,t,-1)}function Wi(e){return 0>e?Math.floor(e):Math.ceil(e)}function Yi(){var e,t,i,r,n,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||0>=o&&0>=a&&0>=s||(o+=864e5*Wi(Xi(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=v(o/1e3),l.seconds=e%60,t=v(e/60),l.minutes=t%60,i=v(t/60),l.hours=i%24,a+=v(i/24),n=v(qi(a)),s+=n,a-=Wi(Xi(n)),r=v(s/12),s%=12,l.days=a,l.months=s,l.years=r,this}function qi(e){return 4800*e/146097}function Xi(e){return 146097*e/4800}function Qi(e){var t,i,r=this._milliseconds;if(e=B(e),"month"===e||"year"===e)return t=this._days+r/864e5,i=this._months+qi(t),"month"===e?i:i/12;switch(t=this._days+Math.round(Xi(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Zi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)}function Ki(e){return function(){return this.as(e)}}function Ji(e){return e=B(e),this[e+"s"]()}function $i(e){return function(){return this._data[e]}}function er(){return v(this.days()/7)}function tr(e,t,i,r,n){return n.relativeTime(t||1,!!i,e,r)}function ir(e,t,i){var r=nt(e).abs(),n=to(r.as("s")),o=to(r.as("m")),a=to(r.as("h")),s=to(r.as("d")),l=to(r.as("M")),h=to(r.as("y")),c=n<io.s&&["s",n]||1>=o&&["m"]||o<io.m&&["mm",o]||1>=a&&["h"]||a<io.h&&["hh",a]||1>=s&&["d"]||s<io.d&&["dd",s]||1>=l&&["M"]||l<io.M&&["MM",l]||1>=h&&["y"]||["yy",h];return c[2]=t,c[3]=+e>0,c[4]=i,tr.apply(null,c)}function rr(e,t){return void 0===io[e]?!1:void 0===t?io[e]:(io[e]=t,!0)}function nr(e){var t=this.localeData(),i=ir(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)}function or(){var e,t,i,r=ro(this._milliseconds)/1e3,n=ro(this._days),o=ro(this._months);e=v(r/60),t=v(e/60),r%=60,e%=60,i=v(o/12),o%=12;var a=i,s=o,l=n,h=t,c=e,d=r,u=this.asSeconds();return u?(0>u?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(h||c||d?"T":"")+(h?h+"H":"")+(c?c+"M":"")+(d?d+"S":""):"P0D"}var ar,sr;sr=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),i=t.length>>>0,r=0;i>r;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var lr=t.momentProperties=[],hr=!1,cr={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var dr;dr=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)a(e,t)&&i.push(t);return i};var ur,fr,pr={},mr={},gr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,vr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,yr={},Ar={},br=/\d/,Er=/\d\d/,xr=/\d{3}/,wr=/\d{4}/,Tr=/[+-]?\d{6}/,_r=/\d\d?/,Sr=/\d\d\d\d?/,Cr=/\d\d\d\d\d\d?/,Rr=/\d{1,3}/,kr=/\d{1,4}/,Mr=/[+-]?\d{1,6}/,Pr=/\d+/,Dr=/[+-]?\d+/,Hr=/Z|[+-]\d\d:?\d\d/gi,Or=/Z|[+-]\d\d(?::?\d\d)?/gi,Lr=/[+-]?\d+(\.\d{1,3})?/,Ir=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Br={},Nr={},Fr=0,zr=1,Ur=2,jr=3,Vr=4,Gr=5,Wr=6,Yr=7,qr=8;fr=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),G("MMMM",0,0,function(e){return this.localeData().months(this,e)}),I("month","M"),Q("M",_r),Q("MM",_r,Er),Q("MMM",function(e,t){return t.monthsShortRegex(e)}),Q("MMMM",function(e,t){return t.monthsRegex(e)}),$(["M","MM"],function(e,t){t[zr]=y(e)-1}),$(["MMM","MMMM"],function(e,t,i,r){var n=i._locale.monthsParse(e,r,i._strict);null!=n?t[zr]=n:c(i).invalidMonth=e});var Xr=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Qr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Zr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Kr=Ir,Jr=Ir,$r=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,en=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,tn=/Z|[+-]\d\d(?::?\d\d)?/,rn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],nn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],on=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=E("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),G("Y",0,0,function(){var e=this.year();return 9999>=e?""+e:"+"+e}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),I("year","y"),Q("Y",Dr),Q("YY",_r,Er),Q("YYYY",kr,wr),Q("YYYYY",Mr,Tr),Q("YYYYYY",Mr,Tr),$(["YYYYY","YYYYYY"],Fr),$("YYYY",function(e,i){i[Fr]=2===e.length?t.parseTwoDigitYear(e):y(e)}),$("YY",function(e,i){i[Fr]=t.parseTwoDigitYear(e)}),$("Y",function(e,t){t[Fr]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return y(e)+(y(e)>68?1900:2e3)};var an=F("FullYear",!0);t.ISO_8601=function(){};var sn=E("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Be.apply(null,arguments);return this.isValid()&&e.isValid()?this>e?this:e:u()}),ln=E("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Be.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:u()}),hn=function(){return Date.now?Date.now():+new Date};Ve("Z",":"),Ve("ZZ",""),Q("Z",Or),Q("ZZ",Or),$(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Ge(Or,e)});var cn=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var dn=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,un=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;nt.fn=Ue.prototype;var fn=ht(1,"add"),pn=ht(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var mn=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),jt("gggg","weekYear"),jt("ggggg","weekYear"),jt("GGGG","isoWeekYear"),jt("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),Q("G",Dr),Q("g",Dr),Q("GG",_r,Er),Q("gg",_r,Er),Q("GGGG",kr,wr),Q("gggg",kr,wr),Q("GGGGG",Mr,Tr),Q("ggggg",Mr,Tr),ee(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,r){t[r.substr(0,2)]=y(e)}),ee(["gg","GG"],function(e,i,r,n){i[n]=t.parseTwoDigitYear(e)}),G("Q",0,"Qo","quarter"),I("quarter","Q"),Q("Q",br),$("Q",function(e,t){t[zr]=3*(y(e)-1)}),G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),Q("w",_r),Q("ww",_r,Er),Q("W",_r),Q("WW",_r,Er),ee(["w","ww","W","WW"],function(e,t,i,r){t[r.substr(0,1)]=y(e)});var gn={dow:0,doy:6};G("D",["DD",2],"Do","date"),I("date","D"),Q("D",_r),Q("DD",_r,Er),Q("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),$(["D","DD"],Ur),$("Do",function(e,t){t[Ur]=y(e.match(_r)[0],10)});var vn=F("Date",!0);G("d",0,"do","day"),G("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),G("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),G("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),Q("d",_r),Q("e",_r),Q("E",_r),Q("dd",function(e,t){return t.weekdaysMinRegex(e)}),Q("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Q("dddd",function(e,t){return t.weekdaysRegex(e)}),ee(["dd","ddd","dddd"],function(e,t,i,r){var n=i._locale.weekdaysParse(e,r,i._strict);null!=n?t.d=n:c(i).invalidWeekday=e}),ee(["d","e","E"],function(e,t,i,r){t[r]=y(e)});var yn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),An="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),bn="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),En=Ir,xn=Ir,wn=Ir;G("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),Q("DDD",Rr),Q("DDDD",xr),$(["DDD","DDDD"],function(e,t,i){i._dayOfYear=y(e)}),G("H",["HH",2],0,"hour"),G("h",["hh",2],0,mi),G("k",["kk",2],0,gi),G("hmm",0,0,function(){return""+mi.apply(this)+V(this.minutes(),2)}),G("hmmss",0,0,function(){return""+mi.apply(this)+V(this.minutes(),2)+V(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+V(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)}),vi("a",!0),vi("A",!1),I("hour","h"),Q("a",yi),Q("A",yi),Q("H",_r),Q("h",_r),Q("HH",_r,Er),Q("hh",_r,Er),Q("hmm",Sr),Q("hmmss",Cr),Q("Hmm",Sr),Q("Hmmss",Cr),$(["H","HH"],jr),$(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),$(["h","hh"],function(e,t,i){t[jr]=y(e),c(i).bigHour=!0}),$("hmm",function(e,t,i){var r=e.length-2;t[jr]=y(e.substr(0,r)),t[Vr]=y(e.substr(r)),c(i).bigHour=!0}),$("hmmss",function(e,t,i){var r=e.length-4,n=e.length-2;t[jr]=y(e.substr(0,r)),t[Vr]=y(e.substr(r,2)),t[Gr]=y(e.substr(n)),c(i).bigHour=!0}),$("Hmm",function(e,t,i){var r=e.length-2;t[jr]=y(e.substr(0,r)),t[Vr]=y(e.substr(r))}),$("Hmmss",function(e,t,i){var r=e.length-4,n=e.length-2;t[jr]=y(e.substr(0,r)),t[Vr]=y(e.substr(r,2)),t[Gr]=y(e.substr(n))});var Tn=/[ap]\.?m?\.?/i,_n=F("Hours",!0);G("m",["mm",2],0,"minute"),I("minute","m"),Q("m",_r),Q("mm",_r,Er),$(["m","mm"],Vr);var Sn=F("Minutes",!1);G("s",["ss",2],0,"second"),I("second","s"),Q("s",_r),Q("ss",_r,Er),$(["s","ss"],Gr);var Cn=F("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),Q("S",Rr,br),Q("SS",Rr,Er),Q("SSS",Rr,xr);var Rn;for(Rn="SSSS";Rn.length<=9;Rn+="S")Q(Rn,Pr);for(Rn="S";Rn.length<=9;Rn+="S")$(Rn,Ei);var kn=F("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var Mn=m.prototype;Mn.add=fn,Mn.calendar=dt,Mn.clone=ut,Mn.diff=At,Mn.endOf=Pt,Mn.format=wt,Mn.from=Tt,Mn.fromNow=_t,Mn.to=St,Mn.toNow=Ct,Mn.get=j,Mn.invalidAt=zt,Mn.isAfter=ft,Mn.isBefore=pt,Mn.isBetween=mt,Mn.isSame=gt,Mn.isSameOrAfter=vt,Mn.isSameOrBefore=yt,Mn.isValid=Nt,Mn.lang=mn,Mn.locale=Rt,Mn.localeData=kt,Mn.max=ln,Mn.min=sn,Mn.parsingFlags=Ft,Mn.set=j,Mn.startOf=Mt,Mn.subtract=pn,Mn.toArray=Lt,Mn.toObject=It,Mn.toDate=Ot,Mn.toISOString=xt,Mn.toJSON=Bt,Mn.toString=Et,Mn.unix=Ht,Mn.valueOf=Dt,Mn.creationData=Ut,Mn.year=an,Mn.isLeapYear=be,Mn.weekYear=Vt,Mn.isoWeekYear=Gt,Mn.quarter=Mn.quarters=Qt,Mn.month=le,Mn.daysInMonth=he,Mn.week=Mn.weeks=$t,Mn.isoWeek=Mn.isoWeeks=ei,Mn.weeksInYear=Yt,Mn.isoWeeksInYear=Wt,Mn.date=vn,Mn.day=Mn.days=si,Mn.weekday=li,Mn.isoWeekday=hi,Mn.dayOfYear=pi,Mn.hour=Mn.hours=_n,Mn.minute=Mn.minutes=Sn,Mn.second=Mn.seconds=Cn,Mn.millisecond=Mn.milliseconds=kn,Mn.utcOffset=qe,Mn.utc=Qe,Mn.local=Ze,Mn.parseZone=Ke,Mn.hasAlignedHourOffset=Je,Mn.isDST=$e,Mn.isDSTShifted=et,Mn.isLocal=tt,Mn.isUtcOffset=it,Mn.isUtc=rt,Mn.isUTC=rt,Mn.zoneAbbr=xi,Mn.zoneName=wi,Mn.dates=E("dates accessor is deprecated. Use date instead.",vn),Mn.months=E("months accessor is deprecated. Use month instead",le),Mn.years=E("years accessor is deprecated. Use year instead",an),Mn.zone=E("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Xe);var Pn=Mn,Dn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Hn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},On="Invalid date",Ln="%d",In=/\d{1,2}/,Bn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Nn=C.prototype;Nn._calendar=Dn,Nn.calendar=Si,Nn._longDateFormat=Hn,Nn.longDateFormat=Ci,Nn._invalidDate=On,Nn.invalidDate=Ri,Nn._ordinal=Ln,Nn.ordinal=ki,Nn._ordinalParse=In,Nn.preparse=Mi,Nn.postformat=Mi,Nn._relativeTime=Bn,Nn.relativeTime=Pi,Nn.pastFuture=Di,Nn.set=_,Nn.months=re,Nn._months=Qr,Nn.monthsShort=ne,Nn._monthsShort=Zr,Nn.monthsParse=ae,Nn._monthsRegex=Jr,Nn.monthsRegex=de,Nn._monthsShortRegex=Kr,Nn.monthsShortRegex=ce,Nn.week=Zt,Nn._week=gn,Nn.firstDayOfYear=Jt,Nn.firstDayOfWeek=Kt,Nn.weekdays=ii,Nn._weekdays=yn,Nn.weekdaysMin=ni,Nn._weekdaysMin=bn,Nn.weekdaysShort=ri,Nn._weekdaysShort=An,Nn.weekdaysParse=ai,Nn._weekdaysRegex=En,Nn.weekdaysRegex=ci,Nn._weekdaysShortRegex=xn,Nn.weekdaysShortRegex=di,Nn._weekdaysMinRegex=wn,Nn.weekdaysMinRegex=ui,Nn.isPM=Ai,Nn._meridiemParse=Tn,Nn.meridiem=bi,P("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),t.lang=E("moment.lang is deprecated. Use moment.locale instead.",P),t.langData=E("moment.langData is deprecated. Use moment.localeData instead.",O);var Fn=Math.abs,zn=Ki("ms"),Un=Ki("s"),jn=Ki("m"),Vn=Ki("h"),Gn=Ki("d"),Wn=Ki("w"),Yn=Ki("M"),qn=Ki("y"),Xn=$i("milliseconds"),Qn=$i("seconds"),Zn=$i("minutes"),Kn=$i("hours"),Jn=$i("days"),$n=$i("months"),eo=$i("years"),to=Math.round,io={s:45,m:45,h:22,d:26,M:11},ro=Math.abs,no=Ue.prototype;no.abs=Ui,no.add=Vi,no.subtract=Gi,no.as=Qi,no.asMilliseconds=zn,no.asSeconds=Un,no.asMinutes=jn,no.asHours=Vn,no.asDays=Gn,no.asWeeks=Wn,no.asMonths=Yn,no.asYears=qn,no.valueOf=Zi,no._bubble=Yi,no.get=Ji,no.milliseconds=Xn,no.seconds=Qn,no.minutes=Zn,no.hours=Kn,no.days=Jn,no.weeks=er,no.months=$n,no.years=eo,no.humanize=nr,no.toISOString=or,no.toString=or,no.toJSON=or,no.locale=Rt,no.localeData=kt,no.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",or),no.lang=mn,G("X",0,0,"unix"),G("x",0,0,"valueOf"),Q("x",Dr),Q("X",Lr),$("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),$("x",function(e,t,i){i._d=new Date(y(e))}),t.version="2.13.0",i(Be),t.fn=Pn,t.min=Fe,t.max=ze,t.now=hn,t.utc=l,t.unix=Ti,t.months=Ii,t.isDate=n,t.locale=P,t.invalid=u,t.duration=nt,t.isMoment=g,t.weekdays=Ni,t.parseZone=_i,t.localeData=O,t.isDuration=je,t.monthsShort=Bi,t.weekdaysMin=zi,t.defineLocale=D,t.updateLocale=H,t.locales=L,t.weekdaysShort=Fi,t.normalizeUnits=B,t.relativeTimeThreshold=rr,t.prototype=Pn;var oo=t;return oo})}).call(t,i(4)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function i(e){throw new Error("Cannot find module '"+e+"'.")}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id=5},function(e,t){(function(t){function i(e,t,i){var r=t&&i||0,n=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>n&&(t[r+n++]=d[e])});16>n;)t[r+n++]=0;return t}function r(e,t){var i=t||0,r=c;return r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]}function n(e,t,i){var n=t&&i||0,o=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:m,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),l=void 0!==e.nsecs?e.nsecs:v+1,h=s-g+(l-v)/1e4;if(0>h&&void 0===e.clockseq&&(a=a+1&16383),(0>h||s>g)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=s,v=l,m=a,s+=122192928e5;var c=(1e4*(268435455&s)+l)%4294967296;o[n++]=c>>>24&255,o[n++]=c>>>16&255,o[n++]=c>>>8&255,o[n++]=255&c;var d=s/4294967296*1e4&268435455;o[n++]=d>>>8&255,o[n++]=255&d,o[n++]=d>>>24&15|16,o[n++]=d>>>16&255,o[n++]=a>>>8|128,o[n++]=255&a;for(var u=e.node||p,f=0;6>f;f++)o[n+f]=u[f];return t?t:r(o)}function o(e,t,i){var n=t&&i||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;16>s;s++)t[n+s]=o[s];return t||r(o)}var a,s="undefined"!=typeof window?window:"undefined"!=typeof t?t:null;if(s&&s.crypto&&crypto.getRandomValues){var l=new Uint8Array(16);a=function(){return crypto.getRandomValues(l),l}}if(!a){var h=new Array(16);a=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),h[t]=e>>>((3&t)<<3)&255;return h}}for(var c=[],d={},u=0;256>u;u++)c[u]=(u+256).toString(16).substr(1),d[c[u]]=u;var f=a(),p=[1|f[0],f[1],f[2],f[3],f[4],f[5]],m=16383&(f[6]<<8|f[7]),g=0,v=0,y=o;y.v1=n,y.v4=o,y.parse=i,y.unparse=r,e.exports=y}).call(t,function(){return this}())},function(e,t,i){t.util=i(1),t.DOMutil=i(8),t.DataSet=i(9),t.DataView=i(11),t.Queue=i(10),t.Graph3d=i(12),t.graph3d={Camera:i(16),Filter:i(17),Point2d:i(15),Point3d:i(14),Slider:i(18),StepNumber:i(19)},t.moment=i(2),t.Hammer=i(20),t.keycharm=i(23)},function(e,t){t.prepareElements=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t].redundant=e[t].used,e[t].used=[])},t.cleanupElements=function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t].redundant){for(var i=0;i<e[t].redundant.length;i++)e[t].redundant[i].parentNode.removeChild(e[t].redundant[i]);e[t].redundant=[]}},t.resetElements=function(e){t.prepareElements(e),t.cleanupElements(e),t.prepareElements(e)},t.getSVGElement=function(e,t,i){var r;return t.hasOwnProperty(e)?t[e].redundant.length>0?(r=t[e].redundant[0],t[e].redundant.shift()):(r=document.createElementNS("http://www.w3.org/2000/svg",e),i.appendChild(r)):(r=document.createElementNS("http://www.w3.org/2000/svg",e),t[e]={used:[],redundant:[]},i.appendChild(r)),t[e].used.push(r),r},t.getDOMElement=function(e,t,i,r){var n;return t.hasOwnProperty(e)?t[e].redundant.length>0?(n=t[e].redundant[0],t[e].redundant.shift()):(n=document.createElement(e),void 0!==r?i.insertBefore(n,r):i.appendChild(n)):(n=document.createElement(e),t[e]={used:[],redundant:[]},void 0!==r?i.insertBefore(n,r):i.appendChild(n)),t[e].used.push(n),n},t.drawPoint=function(e,i,r,n,o,a){var s;if("circle"==r.style?(s=t.getSVGElement("circle",n,o),s.setAttributeNS(null,"cx",e),s.setAttributeNS(null,"cy",i),s.setAttributeNS(null,"r",.5*r.size)):(s=t.getSVGElement("rect",n,o),s.setAttributeNS(null,"x",e-.5*r.size),s.setAttributeNS(null,"y",i-.5*r.size),s.setAttributeNS(null,"width",r.size),s.setAttributeNS(null,"height",r.size)),void 0!==r.styles&&s.setAttributeNS(null,"style",r.styles),s.setAttributeNS(null,"class",r.className+" vis-point"),a){var l=t.getSVGElement("text",n,o);a.xOffset&&(e+=a.xOffset),a.yOffset&&(i+=a.yOffset),a.content&&(l.textContent=a.content),a.className&&l.setAttributeNS(null,"class",a.className+" vis-label"),l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",i)}return s},t.drawBar=function(e,i,r,n,o,a,s,l){if(0!=n){0>n&&(n*=-1,i-=n);var h=t.getSVGElement("rect",a,s);h.setAttributeNS(null,"x",e-.5*r),h.setAttributeNS(null,"y",i),h.setAttributeNS(null,"width",r),h.setAttributeNS(null,"height",n),h.setAttributeNS(null,"class",o),l&&h.setAttributeNS(null,"style",l)}}},function(e,t,i){function r(e,t){if(e&&!Array.isArray(e)&&(t=e,e=null),this._options=t||{},this._data={},this.length=0,this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(var i=Object.keys(this._options.type),r=0,n=i.length;n>r;r++){var o=i[r],a=this._options.type[o];"Date"==a||"ISODate"==a||"ASPDate"==a?this._type[o]="Date":this._type[o]=a}if(this._options.convert)throw new Error('Option "convert" is deprecated. Use "type" instead.');this._subscribers={},e&&this.add(e),this.setOptions(t)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=i(1),a=i(10);r.prototype.setOptions=function(e){e&&void 0!==e.queue&&(e.queue===!1?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=a.extend(this,{replace:["add","update","remove"]})),"object"===n(e.queue)&&this._queue.setOptions(e.queue)))},r.prototype.on=function(e,t){var i=this._subscribers[e];i||(i=[],this._subscribers[e]=i),i.push({callback:t})},r.prototype.subscribe=function(){throw new Error("DataSet.subscribe is deprecated. Use DataSet.on instead.")},r.prototype.off=function(e,t){var i=this._subscribers[e];i&&(this._subscribers[e]=i.filter(function(e){return e.callback!=t}))},r.prototype.unsubscribe=function(){throw new Error("DataSet.unsubscribe is deprecated. Use DataSet.off instead.")},r.prototype._trigger=function(e,t,i){if("*"==e)throw new Error("Cannot trigger event *");var r=[];e in this._subscribers&&(r=r.concat(this._subscribers[e])),"*"in this._subscribers&&(r=r.concat(this._subscribers["*"]));for(var n=0,o=r.length;o>n;n++){var a=r[n];a.callback&&a.callback(e,t,i||null)}},r.prototype.add=function(e,t){var i,r=[],n=this;if(Array.isArray(e))for(var o=0,a=e.length;a>o;o++)i=n._addItem(e[o]),r.push(i);else{if(!(e instanceof Object))throw new Error("Unknown dataType");i=n._addItem(e),r.push(i)}return r.length&&this._trigger("add",{items:r},t),r},r.prototype.update=function(e,t){var i=[],r=[],n=[],a=[],s=this,l=s._fieldId,h=function(e){var t=e[l];if(s._data[t]){var h=o.extend({},s._data[t]);t=s._updateItem(e),r.push(t),a.push(e),n.push(h)}else t=s._addItem(e),i.push(t)};if(Array.isArray(e))for(var c=0,d=e.length;d>c;c++)e[c]instanceof Object?h(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else{if(!(e instanceof Object))throw new Error("Unknown dataType");h(e)}if(i.length&&this._trigger("add",{items:i},t),r.length){var u={items:r,oldData:n,data:a};this._trigger("update",u,t)}return i.concat(r)},r.prototype.get=function(e){var t,i,r,n=this,a=o.getType(arguments[0]);"String"==a||"Number"==a?(t=arguments[0],r=arguments[1]):"Array"==a?(i=arguments[0],r=arguments[1]):r=arguments[0];var s;if(r&&r.returnType){var l=["Array","Object"];s=-1==l.indexOf(r.returnType)?"Array":r.returnType}else s="Array";var h,c,d,u,f,p=r&&r.type||this._options.type,m=r&&r.filter,g=[];if(void 0!=t)h=n._getItem(t,p),h&&m&&!m(h)&&(h=null);else if(void 0!=i)for(u=0,f=i.length;f>u;u++)h=n._getItem(i[u],p),m&&!m(h)||g.push(h);else for(c=Object.keys(this._data),u=0,f=c.length;f>u;u++)d=c[u],h=n._getItem(d,p),m&&!m(h)||g.push(h);if(r&&r.order&&void 0==t&&this._sort(g,r.order),r&&r.fields){var v=r.fields;if(void 0!=t)h=this._filterFields(h,v);else for(u=0,f=g.length;f>u;u++)g[u]=this._filterFields(g[u],v)}if("Object"==s){var y,A={};for(u=0,f=g.length;f>u;u++)y=g[u],A[y.id]=y;return A}return void 0!=t?h:g},r.prototype.getIds=function(e){var t,i,r,n,o,a=this._data,s=e&&e.filter,l=e&&e.order,h=e&&e.type||this._options.type,c=Object.keys(a),d=[];if(s)if(l){for(o=[],t=0,i=c.length;i>t;t++)r=c[t],n=this._getItem(r,h),s(n)&&o.push(n);for(this._sort(o,l),t=0,i=o.length;i>t;t++)d.push(o[t][this._fieldId])}else for(t=0,i=c.length;i>t;t++)r=c[t],n=this._getItem(r,h),s(n)&&d.push(n[this._fieldId]);else if(l){for(o=[],t=0,i=c.length;i>t;t++)r=c[t],o.push(a[r]);for(this._sort(o,l),t=0,i=o.length;i>t;t++)d.push(o[t][this._fieldId])}else for(t=0,i=c.length;i>t;t++)r=c[t],n=a[r],d.push(n[this._fieldId]);return d},r.prototype.getDataSet=function(){return this},r.prototype.forEach=function(e,t){var i,r,n,o,a=t&&t.filter,s=t&&t.type||this._options.type,l=this._data,h=Object.keys(l);if(t&&t.order){var c=this.get(t);for(i=0,r=c.length;r>i;i++)n=c[i],o=n[this._fieldId],e(n,o)}else for(i=0,r=h.length;r>i;i++)o=h[i],n=this._getItem(o,s),a&&!a(n)||e(n,o)},r.prototype.map=function(e,t){var i,r,n,o,a=t&&t.filter,s=t&&t.type||this._options.type,l=[],h=this._data,c=Object.keys(h);for(i=0,r=c.length;r>i;i++)n=c[i],o=this._getItem(n,s),a&&!a(o)||l.push(e(o,n));return t&&t.order&&this._sort(l,t.order),l},r.prototype._filterFields=function(e,t){if(!e)return e;var i,r,n={},o=Object.keys(e),a=o.length;if(Array.isArray(t))for(i=0;a>i;i++)r=o[i],-1!=t.indexOf(r)&&(n[r]=e[r]);else for(i=0;a>i;i++)r=o[i],t.hasOwnProperty(r)&&(n[t[r]]=e[r]);return n},r.prototype._sort=function(e,t){if(o.isString(t)){var i=t;e.sort(function(e,t){var r=e[i],n=t[i];return r>n?1:n>r?-1:0})}else{if("function"!=typeof t)throw new TypeError("Order must be a function or a string");e.sort(t)}},r.prototype.remove=function(e,t){var i,r,n,o=[];if(Array.isArray(e))for(i=0,r=e.length;r>i;i++)n=this._remove(e[i]),null!=n&&o.push(n);else n=this._remove(e),null!=n&&o.push(n);return o.length&&this._trigger("remove",{items:o},t),o},r.prototype._remove=function(e){if(o.isNumber(e)||o.isString(e)){if(this._data[e])return delete this._data[e],this.length--,e}else if(e instanceof Object){var t=e[this._fieldId];if(void 0!==t&&this._data[t])return delete this._data[t],this.length--,t}return null},r.prototype.clear=function(e){var t=Object.keys(this._data);return this._data={},this.length=0,this._trigger("remove",{items:t},e),t},r.prototype.max=function(e){var t,i,r=this._data,n=Object.keys(r),o=null,a=null;for(t=0,i=n.length;i>t;t++){var s=n[t],l=r[s],h=l[e];null!=h&&(!o||h>a)&&(o=l,a=h)}return o},r.prototype.min=function(e){var t,i,r=this._data,n=Object.keys(r),o=null,a=null;for(t=0,i=n.length;i>t;t++){var s=n[t],l=r[s],h=l[e];null!=h&&(!o||a>h)&&(o=l,a=h)}return o},r.prototype.distinct=function(e){var t,i,r,n=this._data,a=Object.keys(n),s=[],l=this._options.type&&this._options.type[e]||null,h=0;for(t=0,r=a.length;r>t;t++){var c=a[t],d=n[c],u=d[e],f=!1;for(i=0;h>i;i++)if(s[i]==u){f=!0;break}f||void 0===u||(s[h]=u,h++)}if(l)for(t=0,r=s.length;r>t;t++)s[t]=o.convert(s[t],l);return s},r.prototype._addItem=function(e){var t=e[this._fieldId];if(void 0!=t){if(this._data[t])throw new Error("Cannot add item: item with id "+t+" already exists")}else t=o.randomUUID(),e[this._fieldId]=t;var i,r,n={},a=Object.keys(e);for(i=0,r=a.length;r>i;i++){var s=a[i],l=this._type[s];n[s]=o.convert(e[s],l)}return this._data[t]=n,this.length++,t},r.prototype._getItem=function(e,t){var i,r,n,a,s=this._data[e];if(!s)return null;var l={},h=Object.keys(s);if(t)for(n=0,a=h.length;a>n;n++)i=h[n],r=s[i],l[i]=o.convert(r,t[i]);else for(n=0,a=h.length;a>n;n++)i=h[n],r=s[i],l[i]=r;return l},r.prototype._updateItem=function(e){var t=e[this._fieldId];if(void 0==t)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(e)+")");var i=this._data[t];if(!i)throw new Error("Cannot update item: no item with id "+t+" found");for(var r=Object.keys(e),n=0,a=r.length;a>n;n++){var s=r[n],l=this._type[s];i[s]=o.convert(e[s],l)}return t},e.exports=r},function(e,t){function i(e){this.delay=null,this.max=1/0,this._queue=[],this._timeout=null,this._extended=null,this.setOptions(e)}i.prototype.setOptions=function(e){e&&"undefined"!=typeof e.delay&&(this.delay=e.delay),e&&"undefined"!=typeof e.max&&(this.max=e.max),this._flushIfNeeded()},i.extend=function(e,t){var r=new i(t);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){r.flush()};var n=[{name:"flush",original:void 0}];if(t&&t.replace)for(var o=0;o<t.replace.length;o++){var a=t.replace[o];n.push({name:a,original:e[a]}),r.replace(e,a)}return r._extended={object:e,methods:n},r},i.prototype.destroy=function(){if(this.flush(),this._extended){for(var e=this._extended.object,t=this._extended.methods,i=0;i<t.length;i++){var r=t[i];r.original?e[r.name]=r.original:delete e[r.name]}this._extended=null}},i.prototype.replace=function(e,t){var i=this,r=e[t];if(!r)throw new Error("Method "+t+" undefined");e[t]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.queue({args:e,fn:r,context:this})}},i.prototype.queue=function(e){"function"==typeof e?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()},i.prototype._flushIfNeeded=function(){if(this._queue.length>this.max&&this.flush(),clearTimeout(this._timeout),this.queue.length>0&&"number"==typeof this.delay){var e=this;this._timeout=setTimeout(function(){e.flush()},this.delay)}},i.prototype.flush=function(){for(;this._queue.length>0;){var e=this._queue.shift();e.fn.apply(e.context||e.fn,e.args||[])}},e.exports=i},function(e,t,i){function r(e,t){this._data=null,this._ids={},this.length=0,this._options=t||{},this._fieldId="id",this._subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)},this.setData(e)}var n=i(1),o=i(9);r.prototype.setData=function(e){var t,i,r,n;if(this._data&&(this._data.off&&this._data.off("*",this.listener),t=Object.keys(this._ids),this._ids={},this.length=0,this._trigger("remove",{items:t})),this._data=e,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",
t=this._data.getIds({filter:this._options&&this._options.filter}),r=0,n=t.length;n>r;r++)i=t[r],this._ids[i]=!0;this.length=t.length,this._trigger("add",{items:t}),this._data.on&&this._data.on("*",this.listener)}},r.prototype.refresh=function(){var e,t,i,r=this._data.getIds({filter:this._options&&this._options.filter}),n=Object.keys(this._ids),o={},a=[],s=[];for(t=0,i=r.length;i>t;t++)e=r[t],o[e]=!0,this._ids[e]||(a.push(e),this._ids[e]=!0);for(t=0,i=n.length;i>t;t++)e=n[t],o[e]||(s.push(e),delete this._ids[e]);this.length+=a.length-s.length,a.length&&this._trigger("add",{items:a}),s.length&&this._trigger("remove",{items:s})},r.prototype.get=function(e){var t,i,r,o=this,a=n.getType(arguments[0]);"String"==a||"Number"==a||"Array"==a?(t=arguments[0],i=arguments[1],r=arguments[2]):(i=arguments[0],r=arguments[1]);var s=n.extend({},this._options,i);this._options.filter&&i&&i.filter&&(s.filter=function(e){return o._options.filter(e)&&i.filter(e)});var l=[];return void 0!=t&&l.push(t),l.push(s),l.push(r),this._data&&this._data.get.apply(this._data,l)},r.prototype.getIds=function(e){var t;if(this._data){var i,r=this._options.filter;i=e&&e.filter?r?function(t){return r(t)&&e.filter(t)}:e.filter:r,t=this._data.getIds({filter:i,order:e&&e.order})}else t=[];return t},r.prototype.map=function(e,t){var i=[];if(this._data){var r,n=this._options.filter;r=t&&t.filter?n?function(e){return n(e)&&t.filter(e)}:t.filter:n,i=this._data.map(e,{filter:r,order:t&&t.order})}else i=[];return i},r.prototype.getDataSet=function(){for(var e=this;e instanceof r;)e=e._data;return e||null},r.prototype._onEvent=function(e,t,i){var r,n,o,a,s=t&&t.items,l=this._data,h=[],c=[],d=[],u=[];if(s&&l){switch(e){case"add":for(r=0,n=s.length;n>r;r++)o=s[r],a=this.get(o),a&&(this._ids[o]=!0,c.push(o));break;case"update":for(r=0,n=s.length;n>r;r++)o=s[r],a=this.get(o),a?this._ids[o]?(d.push(o),h.push(t.data[r])):(this._ids[o]=!0,c.push(o)):this._ids[o]&&(delete this._ids[o],u.push(o));break;case"remove":for(r=0,n=s.length;n>r;r++)o=s[r],this._ids[o]&&(delete this._ids[o],u.push(o))}this.length+=c.length-u.length,c.length&&this._trigger("add",{items:c},i),d.length&&this._trigger("update",{items:d,data:h},i),u.length&&this._trigger("remove",{items:u},i)}},r.prototype.on=o.prototype.on,r.prototype.off=o.prototype.off,r.prototype._trigger=o.prototype._trigger,r.prototype.subscribe=r.prototype.on,r.prototype.unsubscribe=r.prototype.off,e.exports=r},function(e,t,i){function r(e,t,i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=e,this.width="400px",this.height="400px",this.margin=10,this.defaultXCenter="55%",this.defaultYCenter="50%",this.xLabel="x",this.yLabel="y",this.zLabel="z";var n=function(e){return e};this.xValueLabel=n,this.yValueLabel=n,this.zValueLabel=n,this.filterLabel="time",this.legendLabel="value",this.style=r.STYLE.DOT,this.showPerspective=!0,this.showGrid=!0,this.keepAspectRatio=!0,this.showShadow=!1,this.showGrayBottom=!1,this.showTooltip=!1,this.verticalRatio=.5,this.animationInterval=1e3,this.animationPreload=!1,this.camera=new f,this.camera.setArmRotation(1,.5),this.camera.setArmLength(1.7),this.eye=new d(0,0,-1),this.dataTable=null,this.dataPoints=null,this.colX=void 0,this.colY=void 0,this.colZ=void 0,this.colValue=void 0,this.colFilter=void 0,this.xMin=0,this.xStep=void 0,this.xMax=1,this.yMin=0,this.yStep=void 0,this.yMax=1,this.zMin=0,this.zStep=void 0,this.zMax=1,this.valueMin=0,this.valueMax=1,this.xBarWidth=1,this.yBarWidth=1,this.axisColor="#4D4D4D",this.gridColor="#D3D3D3",this.dataColor={fill:"#7DC1FF",stroke:"#3267D2",strokeWidth:1},this.dotSizeRatio=.02,this.create(),this.setOptions(i),t&&this.setData(t)}function n(e){return"clientX"in e?e.clientX:e.targetTouches[0]&&e.targetTouches[0].clientX||0}function o(e){return"clientY"in e?e.clientY:e.targetTouches[0]&&e.targetTouches[0].clientY||0}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=i(13),l=i(9),h=i(11),c=i(1),d=i(14),u=i(15),f=i(16),p=i(17),m=i(18),g=i(19);s(r.prototype),r.prototype._setScale=function(){this.scale=new d(1/(this.xMax-this.xMin),1/(this.yMax-this.yMin),1/(this.zMax-this.zMin)),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,this.scale.value=1/(this.valueMax-this.valueMin);var e=(this.xMax+this.xMin)/2*this.scale.x,t=(this.yMax+this.yMin)/2*this.scale.y,i=(this.zMax+this.zMin)/2*this.scale.z;this.camera.setArmLocation(e,t,i)},r.prototype._convert3Dto2D=function(e){var t=this._convertPointToTranslation(e);return this._convertTranslationToScreen(t)},r.prototype._convertPointToTranslation=function(e){var t=e.x*this.scale.x,i=e.y*this.scale.y,r=e.z*this.scale.z,n=this.camera.getCameraLocation().x,o=this.camera.getCameraLocation().y,a=this.camera.getCameraLocation().z,s=Math.sin(this.camera.getCameraRotation().x),l=Math.cos(this.camera.getCameraRotation().x),h=Math.sin(this.camera.getCameraRotation().y),c=Math.cos(this.camera.getCameraRotation().y),u=Math.sin(this.camera.getCameraRotation().z),f=Math.cos(this.camera.getCameraRotation().z),p=c*(u*(i-o)+f*(t-n))-h*(r-a),m=s*(c*(r-a)+h*(u*(i-o)+f*(t-n)))+l*(f*(i-o)-u*(t-n)),g=l*(c*(r-a)+h*(u*(i-o)+f*(t-n)))-s*(f*(i-o)-u*(t-n));return new d(p,m,g)},r.prototype._convertTranslationToScreen=function(e){var t,i,r=this.eye.x,n=this.eye.y,o=this.eye.z,a=e.x,s=e.y,l=e.z;return this.showPerspective?(t=(a-r)*(o/l),i=(s-n)*(o/l)):(t=a*-(o/this.camera.getArmLength()),i=s*-(o/this.camera.getArmLength())),new u(this.xcenter+t*this.frame.canvas.clientWidth,this.ycenter-i*this.frame.canvas.clientWidth)},r.prototype._setBackgroundColor=function(e){var t="white",i="gray",r=1;if("string"==typeof e)t=e,i="none",r=0;else if("object"===("undefined"==typeof e?"undefined":a(e)))void 0!==e.fill&&(t=e.fill),void 0!==e.stroke&&(i=e.stroke),void 0!==e.strokeWidth&&(r=e.strokeWidth);else if(void 0!==e)throw"Unsupported type of backgroundColor";this.frame.style.backgroundColor=t,this.frame.style.borderColor=i,this.frame.style.borderWidth=r+"px",this.frame.style.borderStyle="solid"},r.STYLE={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},r.prototype._getStyleNumber=function(e){switch(e){case"dot":return r.STYLE.DOT;case"dot-line":return r.STYLE.DOTLINE;case"dot-color":return r.STYLE.DOTCOLOR;case"dot-size":return r.STYLE.DOTSIZE;case"line":return r.STYLE.LINE;case"grid":return r.STYLE.GRID;case"surface":return r.STYLE.SURFACE;case"bar":return r.STYLE.BAR;case"bar-color":return r.STYLE.BARCOLOR;case"bar-size":return r.STYLE.BARSIZE}return-1},r.prototype._determineColumnIndexes=function(e,t){if(this.style===r.STYLE.DOT||this.style===r.STYLE.DOTLINE||this.style===r.STYLE.LINE||this.style===r.STYLE.GRID||this.style===r.STYLE.SURFACE||this.style===r.STYLE.BAR)this.colX=0,this.colY=1,this.colZ=2,this.colValue=void 0,e.getNumberOfColumns()>3&&(this.colFilter=3);else{if(this.style!==r.STYLE.DOTCOLOR&&this.style!==r.STYLE.DOTSIZE&&this.style!==r.STYLE.BARCOLOR&&this.style!==r.STYLE.BARSIZE)throw'Unknown style "'+this.style+'"';this.colX=0,this.colY=1,this.colZ=2,this.colValue=3,e.getNumberOfColumns()>4&&(this.colFilter=4)}},r.prototype.getNumberOfRows=function(e){return e.length},r.prototype.getNumberOfColumns=function(e){var t=0;for(var i in e[0])e[0].hasOwnProperty(i)&&t++;return t},r.prototype.getDistinctValues=function(e,t){for(var i=[],r=0;r<e.length;r++)-1==i.indexOf(e[r][t])&&i.push(e[r][t]);return i},r.prototype.getColumnRange=function(e,t){for(var i={min:e[0][t],max:e[0][t]},r=0;r<e.length;r++)i.min>e[r][t]&&(i.min=e[r][t]),i.max<e[r][t]&&(i.max=e[r][t]);return i},r.prototype._dataInitialize=function(e,t){var i=this;if(this.dataSet&&this.dataSet.off("*",this._onChange),void 0!==e){Array.isArray(e)&&(e=new l(e));var n;if(!(e instanceof l||e instanceof h))throw new Error("Array, DataSet, or DataView expected");if(n=e.get(),0!=n.length){this.dataSet=e,this.dataTable=n,this._onChange=function(){i.setData(i.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z",this.colValue="style",this.colFilter="filter",n[0].hasOwnProperty("filter")&&void 0===this.dataFilter&&(this.dataFilter=new p(e,this.colFilter,this),this.dataFilter.setOnLoadCallback(function(){i.redraw()}));var o=this.style==r.STYLE.BAR||this.style==r.STYLE.BARCOLOR||this.style==r.STYLE.BARSIZE;if(o){if(void 0!==this.defaultXBarWidth)this.xBarWidth=this.defaultXBarWidth;else{var a=this.getDistinctValues(n,this.colX);this.xBarWidth=a[1]-a[0]||1}if(void 0!==this.defaultYBarWidth)this.yBarWidth=this.defaultYBarWidth;else{var s=this.getDistinctValues(n,this.colY);this.yBarWidth=s[1]-s[0]||1}}var c=this.getColumnRange(n,this.colX);o&&(c.min-=this.xBarWidth/2,c.max+=this.xBarWidth/2),this.xMin=void 0!==this.defaultXMin?this.defaultXMin:c.min,this.xMax=void 0!==this.defaultXMax?this.defaultXMax:c.max,this.xMax<=this.xMin&&(this.xMax=this.xMin+1),this.xStep=void 0!==this.defaultXStep?this.defaultXStep:(this.xMax-this.xMin)/5;var d=this.getColumnRange(n,this.colY);o&&(d.min-=this.yBarWidth/2,d.max+=this.yBarWidth/2),this.yMin=void 0!==this.defaultYMin?this.defaultYMin:d.min,this.yMax=void 0!==this.defaultYMax?this.defaultYMax:d.max,this.yMax<=this.yMin&&(this.yMax=this.yMin+1),this.yStep=void 0!==this.defaultYStep?this.defaultYStep:(this.yMax-this.yMin)/5;var u=this.getColumnRange(n,this.colZ);if(this.zMin=void 0!==this.defaultZMin?this.defaultZMin:u.min,this.zMax=void 0!==this.defaultZMax?this.defaultZMax:u.max,this.zMax<=this.zMin&&(this.zMax=this.zMin+1),this.zStep=void 0!==this.defaultZStep?this.defaultZStep:(this.zMax-this.zMin)/5,void 0!==this.colValue){var f=this.getColumnRange(n,this.colValue);this.valueMin=void 0!==this.defaultValueMin?this.defaultValueMin:f.min,this.valueMax=void 0!==this.defaultValueMax?this.defaultValueMax:f.max,this.valueMax<=this.valueMin&&(this.valueMax=this.valueMin+1)}this._setScale()}}},r.prototype._getDataPoints=function(e){var t,i,n,o,a,s,l=[];if(this.style===r.STYLE.GRID||this.style===r.STYLE.SURFACE){var h=[],c=[];for(n=0;n<this.getNumberOfRows(e);n++)t=e[n][this.colX]||0,i=e[n][this.colY]||0,-1===h.indexOf(t)&&h.push(t),-1===c.indexOf(i)&&c.push(i);var u=function(e,t){return e-t};h.sort(u),c.sort(u);var f=[];for(n=0;n<e.length;n++){t=e[n][this.colX]||0,i=e[n][this.colY]||0,o=e[n][this.colZ]||0;var p=h.indexOf(t),m=c.indexOf(i);void 0===f[p]&&(f[p]=[]);var g=new d;g.x=t,g.y=i,g.z=o,a={},a.point=g,a.trans=void 0,a.screen=void 0,a.bottom=new d(t,i,this.zMin),f[p][m]=a,l.push(a)}for(t=0;t<f.length;t++)for(i=0;i<f[t].length;i++)f[t][i]&&(f[t][i].pointRight=t<f.length-1?f[t+1][i]:void 0,f[t][i].pointTop=i<f[t].length-1?f[t][i+1]:void 0,f[t][i].pointCross=t<f.length-1&&i<f[t].length-1?f[t+1][i+1]:void 0)}else for(n=0;n<e.length;n++)s=new d,s.x=e[n][this.colX]||0,s.y=e[n][this.colY]||0,s.z=e[n][this.colZ]||0,void 0!==this.colValue&&(s.value=e[n][this.colValue]||0),a={},a.point=s,a.bottom=new d(s.x,s.y,this.zMin),a.trans=void 0,a.screen=void 0,l.push(a);return l},r.prototype.create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e),this.frame.filter=document.createElement("div"),this.frame.filter.style.position="absolute",this.frame.filter.style.bottom="0px",this.frame.filter.style.left="0px",this.frame.filter.style.width="100%",this.frame.appendChild(this.frame.filter);var t=this,i=function(e){t._onMouseDown(e)},r=function(e){t._onTouchStart(e)},n=function(e){t._onWheel(e)},o=function(e){t._onTooltip(e)};c.addEventListener(this.frame.canvas,"keydown",onkeydown),c.addEventListener(this.frame.canvas,"mousedown",i),c.addEventListener(this.frame.canvas,"touchstart",r),c.addEventListener(this.frame.canvas,"mousewheel",n),c.addEventListener(this.frame.canvas,"mousemove",o),this.containerElement.appendChild(this.frame)},r.prototype.setSize=function(e,t){this.frame.style.width=e,this.frame.style.height=t,this._resizeCanvas()},r.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"},r.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw"No animation available";this.frame.filter.slider.play()},r.prototype.animationStop=function(){this.frame.filter&&this.frame.filter.slider&&this.frame.filter.slider.stop()},r.prototype._resizeCenter=function(){"%"===this.defaultXCenter.charAt(this.defaultXCenter.length-1)?this.xcenter=parseFloat(this.defaultXCenter)/100*this.frame.canvas.clientWidth:this.xcenter=parseFloat(this.defaultXCenter),"%"===this.defaultYCenter.charAt(this.defaultYCenter.length-1)?this.ycenter=parseFloat(this.defaultYCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):this.ycenter=parseFloat(this.defaultYCenter)},r.prototype.setCameraPosition=function(e){void 0!==e&&(void 0!==e.horizontal&&void 0!==e.vertical&&this.camera.setArmRotation(e.horizontal,e.vertical),void 0!==e.distance&&this.camera.setArmLength(e.distance),this.redraw())},r.prototype.getCameraPosition=function(){var e=this.camera.getArmRotation();return e.distance=this.camera.getArmLength(),e},r.prototype._readData=function(e){this._dataInitialize(e,this.style),this.dataFilter?this.dataPoints=this.dataFilter._getDataPoints():this.dataPoints=this._getDataPoints(this.dataTable),this._redrawFilter()},r.prototype.setData=function(e){this._readData(e),this.redraw(),this.animationAutoStart&&this.dataFilter&&this.animationStart()},r.prototype.setOptions=function(e){var t=void 0;if(this.animationStop(),void 0!==e){if(void 0!==e.width&&(this.width=e.width),void 0!==e.height&&(this.height=e.height),void 0!==e.xCenter&&(this.defaultXCenter=e.xCenter),void 0!==e.yCenter&&(this.defaultYCenter=e.yCenter),void 0!==e.filterLabel&&(this.filterLabel=e.filterLabel),void 0!==e.legendLabel&&(this.legendLabel=e.legendLabel),void 0!==e.xLabel&&(this.xLabel=e.xLabel),void 0!==e.yLabel&&(this.yLabel=e.yLabel),void 0!==e.zLabel&&(this.zLabel=e.zLabel),void 0!==e.xValueLabel&&(this.xValueLabel=e.xValueLabel),void 0!==e.yValueLabel&&(this.yValueLabel=e.yValueLabel),void 0!==e.zValueLabel&&(this.zValueLabel=e.zValueLabel),void 0!==e.dotSizeRatio&&(this.dotSizeRatio=e.dotSizeRatio),void 0!==e.style){var i=this._getStyleNumber(e.style);-1!==i&&(this.style=i)}void 0!==e.showGrid&&(this.showGrid=e.showGrid),void 0!==e.showPerspective&&(this.showPerspective=e.showPerspective),void 0!==e.showShadow&&(this.showShadow=e.showShadow),void 0!==e.tooltip&&(this.showTooltip=e.tooltip),void 0!==e.showAnimationControls&&(this.showAnimationControls=e.showAnimationControls),void 0!==e.keepAspectRatio&&(this.keepAspectRatio=e.keepAspectRatio),void 0!==e.verticalRatio&&(this.verticalRatio=e.verticalRatio),void 0!==e.animationInterval&&(this.animationInterval=e.animationInterval),void 0!==e.animationPreload&&(this.animationPreload=e.animationPreload),void 0!==e.animationAutoStart&&(this.animationAutoStart=e.animationAutoStart),void 0!==e.xBarWidth&&(this.defaultXBarWidth=e.xBarWidth),void 0!==e.yBarWidth&&(this.defaultYBarWidth=e.yBarWidth),void 0!==e.xMin&&(this.defaultXMin=e.xMin),void 0!==e.xStep&&(this.defaultXStep=e.xStep),void 0!==e.xMax&&(this.defaultXMax=e.xMax),void 0!==e.yMin&&(this.defaultYMin=e.yMin),void 0!==e.yStep&&(this.defaultYStep=e.yStep),void 0!==e.yMax&&(this.defaultYMax=e.yMax),void 0!==e.zMin&&(this.defaultZMin=e.zMin),void 0!==e.zStep&&(this.defaultZStep=e.zStep),void 0!==e.zMax&&(this.defaultZMax=e.zMax),void 0!==e.valueMin&&(this.defaultValueMin=e.valueMin),void 0!==e.valueMax&&(this.defaultValueMax=e.valueMax),void 0!==e.backgroundColor&&this._setBackgroundColor(e.backgroundColor),void 0!==e.cameraPosition&&(t=e.cameraPosition),void 0!==t&&(this.camera.setArmRotation(t.horizontal,t.vertical),this.camera.setArmLength(t.distance)),void 0!==e.axisColor&&(this.axisColor=e.axisColor),void 0!==e.gridColor&&(this.gridColor=e.gridColor),e.dataColor&&("string"==typeof e.dataColor?(this.dataColor.fill=e.dataColor,this.dataColor.stroke=e.dataColor):(e.dataColor.fill&&(this.dataColor.fill=e.dataColor.fill),e.dataColor.stroke&&(this.dataColor.stroke=e.dataColor.stroke),void 0!==e.dataColor.strokeWidth&&(this.dataColor.strokeWidth=e.dataColor.strokeWidth)))}this.setSize(this.width,this.height),this.dataTable&&this.setData(this.dataTable),this.animationAutoStart&&this.dataFilter&&this.animationStart()},r.prototype.redraw=function(){if(void 0===this.dataPoints)throw"Error: graph data not initialized";this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this.style===r.STYLE.GRID||this.style===r.STYLE.SURFACE?this._redrawDataGrid():this.style===r.STYLE.LINE?this._redrawDataLine():this.style===r.STYLE.BAR||this.style===r.STYLE.BARCOLOR||this.style===r.STYLE.BARSIZE?this._redrawDataBar():this._redrawDataDot(),this._redrawInfo(),this._redrawLegend()},r.prototype._redrawClear=function(){var e=this.frame.canvas,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height)},r.prototype._redrawLegend=function(){var e;if(this.style===r.STYLE.DOTCOLOR||this.style===r.STYLE.DOTSIZE){var t,i,n=this.frame.clientWidth*this.dotSizeRatio;this.style===r.STYLE.DOTSIZE?(t=n/2,i=n/2+2*n):(t=20,i=20);var o=Math.max(.25*this.frame.clientHeight,100),a=this.margin,s=this.frame.clientWidth-this.margin,l=s-i,h=a+o}var c=this.frame.canvas,d=c.getContext("2d");if(d.lineWidth=1,d.font="14px arial",this.style===r.STYLE.DOTCOLOR){var u=0,f=o;for(e=u;f>e;e++){var p=(e-u)/(f-u),m=240*p,v=this._hsv2rgb(m,1,1);d.strokeStyle=v,d.beginPath(),d.moveTo(l,a+e),d.lineTo(s,a+e),d.stroke()}d.strokeStyle=this.axisColor,d.strokeRect(l,a,i,o)}if(this.style===r.STYLE.DOTSIZE&&(d.strokeStyle=this.axisColor,d.fillStyle=this.dataColor.fill,d.beginPath(),d.moveTo(l,a),d.lineTo(s,a),d.lineTo(s-i+t,h),d.lineTo(l,h),d.closePath(),d.fill(),d.stroke()),this.style===r.STYLE.DOTCOLOR||this.style===r.STYLE.DOTSIZE){var y=5,A=new g(this.valueMin,this.valueMax,(this.valueMax-this.valueMin)/5,!0);for(A.start(),A.getCurrent()<this.valueMin&&A.next();!A.end();)e=h-(A.getCurrent()-this.valueMin)/(this.valueMax-this.valueMin)*o,d.beginPath(),d.moveTo(l-y,e),d.lineTo(l,e),d.stroke(),d.textAlign="right",d.textBaseline="middle",d.fillStyle=this.axisColor,d.fillText(A.getCurrent(),l-2*y,e),A.next();d.textAlign="right",d.textBaseline="top";var b=this.legendLabel;d.fillText(b,s,h+this.margin)}},r.prototype._redrawFilter=function(){if(this.frame.filter.innerHTML="",this.dataFilter){var e={visible:this.showAnimationControls},t=new m(this.frame.filter,e);this.frame.filter.slider=t,this.frame.filter.style.padding="10px",t.setValues(this.dataFilter.values),t.setPlayInterval(this.animationInterval);var i=this,r=function(){var e=t.getIndex();i.dataFilter.selectValue(e),i.dataPoints=i.dataFilter._getDataPoints(),i.redraw()};t.setOnChangeCallback(r)}else this.frame.filter.slider=void 0},r.prototype._redrawSlider=function(){void 0!==this.frame.filter.slider&&this.frame.filter.slider.redraw()},r.prototype._redrawInfo=function(){if(this.dataFilter){var e=this.frame.canvas,t=e.getContext("2d");t.font="14px arial",t.lineStyle="gray",t.fillStyle="gray",t.textAlign="left",t.textBaseline="top";var i=this.margin,r=this.margin;t.fillText(this.dataFilter.getLabel()+": "+this.dataFilter.getSelectedValue(),i,r)}},r.prototype._redrawAxis=function(){var e,t,i,r,n,o,a,s,l,h,c,u,f,p=this.frame.canvas,m=p.getContext("2d");m.font=24/this.camera.getArmLength()+"px arial";var v=.025/this.scale.x,y=.025/this.scale.y,A=5/this.camera.getArmLength(),b=this.camera.getArmRotation().horizontal;for(m.lineWidth=1,r=void 0===this.defaultXStep,i=new g(this.xMin,this.xMax,this.xStep,r),i.start(),i.getCurrent()<this.xMin&&i.next();!i.end();){var E=i.getCurrent();this.showGrid?(e=this._convert3Dto2D(new d(E,this.yMin,this.zMin)),t=this._convert3Dto2D(new d(E,this.yMax,this.zMin)),m.strokeStyle=this.gridColor,m.beginPath(),m.moveTo(e.x,e.y),m.lineTo(t.x,t.y),m.stroke()):(e=this._convert3Dto2D(new d(E,this.yMin,this.zMin)),t=this._convert3Dto2D(new d(E,this.yMin+v,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(e.x,e.y),m.lineTo(t.x,t.y),m.stroke(),e=this._convert3Dto2D(new d(E,this.yMax,this.zMin)),t=this._convert3Dto2D(new d(E,this.yMax-v,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(e.x,e.y),m.lineTo(t.x,t.y),m.stroke()),a=Math.cos(b)>0?this.yMin:this.yMax,n=this._convert3Dto2D(new d(E,a,this.zMin)),Math.cos(2*b)>0?(m.textAlign="center",m.textBaseline="top",n.y+=A):Math.sin(2*b)<0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.axisColor,m.fillText("  "+this.xValueLabel(i.getCurrent())+"  ",n.x,n.y),i.next()}for(m.lineWidth=1,r=void 0===this.defaultYStep,i=new g(this.yMin,this.yMax,this.yStep,r),i.start(),i.getCurrent()<this.yMin&&i.next();!i.end();)this.showGrid?(e=this._convert3Dto2D(new d(this.xMin,i.getCurrent(),this.zMin)),t=this._convert3Dto2D(new d(this.xMax,i.getCurrent(),this.zMin)),m.strokeStyle=this.gridColor,m.beginPath(),m.moveTo(e.x,e.y),m.lineTo(t.x,t.y),m.stroke()):(e=this._convert3Dto2D(new d(this.xMin,i.getCurrent(),this.zMin)),t=this._convert3Dto2D(new d(this.xMin+y,i.getCurrent(),this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(e.x,e.y),m.lineTo(t.x,t.y),m.stroke(),e=this._convert3Dto2D(new d(this.xMax,i.getCurrent(),this.zMin)),t=this._convert3Dto2D(new d(this.xMax-y,i.getCurrent(),this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(e.x,e.y),m.lineTo(t.x,t.y),m.stroke()),o=Math.sin(b)>0?this.xMin:this.xMax,n=this._convert3Dto2D(new d(o,i.getCurrent(),this.zMin)),Math.cos(2*b)<0?(m.textAlign="center",m.textBaseline="top",n.y+=A):Math.sin(2*b)>0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.axisColor,m.fillText("  "+this.yValueLabel(i.getCurrent())+"  ",n.x,n.y),i.next();for(m.lineWidth=1,r=void 0===this.defaultZStep,i=new g(this.zMin,this.zMax,this.zStep,r),i.start(),i.getCurrent()<this.zMin&&i.next(),o=Math.cos(b)>0?this.xMin:this.xMax,a=Math.sin(b)<0?this.yMin:this.yMax;!i.end();)e=this._convert3Dto2D(new d(o,a,i.getCurrent())),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(e.x,e.y),m.lineTo(e.x-A,e.y),m.stroke(),m.textAlign="right",m.textBaseline="middle",m.fillStyle=this.axisColor,m.fillText(this.zValueLabel(i.getCurrent())+" ",e.x-5,e.y),i.next();m.lineWidth=1,e=this._convert3Dto2D(new d(o,a,this.zMin)),t=this._convert3Dto2D(new d(o,a,this.zMax)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(e.x,e.y),m.lineTo(t.x,t.y),m.stroke(),m.lineWidth=1,u=this._convert3Dto2D(new d(this.xMin,this.yMin,this.zMin)),f=this._convert3Dto2D(new d(this.xMax,this.yMin,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(u.x,u.y),m.lineTo(f.x,f.y),m.stroke(),u=this._convert3Dto2D(new d(this.xMin,this.yMax,this.zMin)),f=this._convert3Dto2D(new d(this.xMax,this.yMax,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(u.x,u.y),m.lineTo(f.x,f.y),m.stroke(),m.lineWidth=1,e=this._convert3Dto2D(new d(this.xMin,this.yMin,this.zMin)),t=this._convert3Dto2D(new d(this.xMin,this.yMax,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(e.x,e.y),m.lineTo(t.x,t.y),m.stroke(),e=this._convert3Dto2D(new d(this.xMax,this.yMin,this.zMin)),t=this._convert3Dto2D(new d(this.xMax,this.yMax,this.zMin)),m.strokeStyle=this.axisColor,m.beginPath(),m.moveTo(e.x,e.y),m.lineTo(t.x,t.y),m.stroke();var x=this.xLabel;x.length>0&&(c=.1/this.scale.y,o=(this.xMin+this.xMax)/2,a=Math.cos(b)>0?this.yMin-c:this.yMax+c,n=this._convert3Dto2D(new d(o,a,this.zMin)),Math.cos(2*b)>0?(m.textAlign="center",m.textBaseline="top"):Math.sin(2*b)<0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.axisColor,m.fillText(x,n.x,n.y));var w=this.yLabel;w.length>0&&(h=.1/this.scale.x,o=Math.sin(b)>0?this.xMin-h:this.xMax+h,a=(this.yMin+this.yMax)/2,n=this._convert3Dto2D(new d(o,a,this.zMin)),Math.cos(2*b)<0?(m.textAlign="center",m.textBaseline="top"):Math.sin(2*b)>0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.axisColor,m.fillText(w,n.x,n.y));var T=this.zLabel;T.length>0&&(l=30,o=Math.cos(b)>0?this.xMin:this.xMax,a=Math.sin(b)<0?this.yMin:this.yMax,s=(this.zMin+this.zMax)/2,n=this._convert3Dto2D(new d(o,a,s)),m.textAlign="right",m.textBaseline="middle",m.fillStyle=this.axisColor,m.fillText(T,n.x-l,n.y))},r.prototype._hsv2rgb=function(e,t,i){var r,n,o,a,s,l;switch(a=i*t,s=Math.floor(e/60),l=a*(1-Math.abs(e/60%2-1)),s){case 0:r=a,n=l,o=0;break;case 1:r=l,n=a,o=0;break;case 2:r=0,n=a,o=l;break;case 3:r=0,n=l,o=a;break;case 4:r=l,n=0,o=a;break;case 5:r=a,n=0,o=l;break;default:r=0,n=0,o=0}return"RGB("+parseInt(255*r)+","+parseInt(255*n)+","+parseInt(255*o)+")"},r.prototype._redrawDataGrid=function(){var e,t,i,n,o,a,s,l,h,c,u,f,p=this.frame.canvas,m=p.getContext("2d");if(m.lineJoin="round",m.lineCap="round",!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(o=0;o<this.dataPoints.length;o++){var g=this._convertPointToTranslation(this.dataPoints[o].point),v=this._convertTranslationToScreen(g);this.dataPoints[o].trans=g,this.dataPoints[o].screen=v;var y=this._convertPointToTranslation(this.dataPoints[o].bottom);this.dataPoints[o].dist=this.showPerspective?y.length():-y.z}var A=function(e,t){return t.dist-e.dist};if(this.dataPoints.sort(A),this.style===r.STYLE.SURFACE){for(o=0;o<this.dataPoints.length;o++)if(e=this.dataPoints[o],t=this.dataPoints[o].pointRight,i=this.dataPoints[o].pointTop,n=this.dataPoints[o].pointCross,void 0!==e&&void 0!==t&&void 0!==i&&void 0!==n){if(this.showGrayBottom||this.showShadow){var b=d.subtract(n.trans,e.trans),E=d.subtract(i.trans,t.trans),x=d.crossProduct(b,E),w=x.length();a=x.z>0}else a=!0;a?(f=(e.point.z+t.point.z+i.point.z+n.point.z)/4,h=240*(1-(f-this.zMin)*this.scale.z/this.verticalRatio),c=1,this.showShadow?(u=Math.min(1+x.x/w/2,1),s=this._hsv2rgb(h,c,u),l=s):(u=1,s=this._hsv2rgb(h,c,u),l=this.axisColor)):(s="gray",l=this.axisColor),m.lineWidth=this._getStrokeWidth(e),m.fillStyle=s,m.strokeStyle=l,m.beginPath(),m.moveTo(e.screen.x,e.screen.y),m.lineTo(t.screen.x,t.screen.y),m.lineTo(n.screen.x,n.screen.y),m.lineTo(i.screen.x,i.screen.y),m.closePath(),m.fill(),m.stroke()}}else for(o=0;o<this.dataPoints.length;o++)e=this.dataPoints[o],t=this.dataPoints[o].pointRight,i=this.dataPoints[o].pointTop,void 0!==e&&void 0!==t&&(f=(e.point.z+t.point.z)/2,h=240*(1-(f-this.zMin)*this.scale.z/this.verticalRatio),m.lineWidth=2*this._getStrokeWidth(e),m.strokeStyle=this._hsv2rgb(h,1,1),m.beginPath(),m.moveTo(e.screen.x,e.screen.y),m.lineTo(t.screen.x,t.screen.y),m.stroke()),void 0!==e&&void 0!==i&&(f=(e.point.z+i.point.z)/2,h=240*(1-(f-this.zMin)*this.scale.z/this.verticalRatio),m.lineWidth=2*this._getStrokeWidth(e),m.strokeStyle=this._hsv2rgb(h,1,1),m.beginPath(),m.moveTo(e.screen.x,e.screen.y),m.lineTo(i.screen.x,i.screen.y),m.stroke())}},r.prototype._getStrokeWidth=function(e){return void 0!==e?this.showPerspective?1/-e.trans.z*this.dataColor.strokeWidth:-(this.eye.z/this.camera.getArmLength())*this.dataColor.strokeWidth:this.dataColor.strokeWidth},r.prototype._redrawDataDot=function(){var e,t=this.frame.canvas,i=t.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(e=0;e<this.dataPoints.length;e++){var n=this._convertPointToTranslation(this.dataPoints[e].point),o=this._convertTranslationToScreen(n);this.dataPoints[e].trans=n,this.dataPoints[e].screen=o;var a=this._convertPointToTranslation(this.dataPoints[e].bottom);this.dataPoints[e].dist=this.showPerspective?a.length():-a.z}var s=function(e,t){return t.dist-e.dist};this.dataPoints.sort(s);var l=this.frame.clientWidth*this.dotSizeRatio;for(e=0;e<this.dataPoints.length;e++){var h=this.dataPoints[e];if(this.style===r.STYLE.DOTLINE){var c=this._convert3Dto2D(h.bottom);i.lineWidth=1,i.strokeStyle=this.gridColor,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(h.screen.x,h.screen.y),i.stroke()}var d;d=this.style===r.STYLE.DOTSIZE?l/2+2*l*(h.point.value-this.valueMin)/(this.valueMax-this.valueMin):l;var u;u=this.showPerspective?d/-h.trans.z:d*-(this.eye.z/this.camera.getArmLength()),0>u&&(u=0);var f,p,m;this.style===r.STYLE.DOTCOLOR?(f=240*(1-(h.point.value-this.valueMin)*this.scale.value),p=this._hsv2rgb(f,1,1),m=this._hsv2rgb(f,1,.8)):this.style===r.STYLE.DOTSIZE?(p=this.dataColor.fill,m=this.dataColor.stroke):(f=240*(1-(h.point.z-this.zMin)*this.scale.z/this.verticalRatio),p=this._hsv2rgb(f,1,1),m=this._hsv2rgb(f,1,.8)),i.lineWidth=this._getStrokeWidth(h),i.strokeStyle=m,i.fillStyle=p,i.beginPath(),i.arc(h.screen.x,h.screen.y,u,0,2*Math.PI,!0),i.fill(),i.stroke()}}},r.prototype._redrawDataBar=function(){var e,t,i,n,o=this.frame.canvas,a=o.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(e=0;e<this.dataPoints.length;e++){var s=this._convertPointToTranslation(this.dataPoints[e].point),l=this._convertTranslationToScreen(s);this.dataPoints[e].trans=s,this.dataPoints[e].screen=l;var h=this._convertPointToTranslation(this.dataPoints[e].bottom);this.dataPoints[e].dist=this.showPerspective?h.length():-h.z}var c=function(e,t){return t.dist-e.dist};this.dataPoints.sort(c),a.lineJoin="round",a.lineCap="round";var u=this.xBarWidth/2,f=this.yBarWidth/2;for(e=0;e<this.dataPoints.length;e++){var p,m,g,v=this.dataPoints[e];this.style===r.STYLE.BARCOLOR?(p=240*(1-(v.point.value-this.valueMin)*this.scale.value),m=this._hsv2rgb(p,1,1),g=this._hsv2rgb(p,1,.8)):this.style===r.STYLE.BARSIZE?(m=this.dataColor.fill,g=this.dataColor.stroke):(p=240*(1-(v.point.z-this.zMin)*this.scale.z/this.verticalRatio),m=this._hsv2rgb(p,1,1),g=this._hsv2rgb(p,1,.8)),this.style===r.STYLE.BARSIZE&&(u=this.xBarWidth/2*((v.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2),f=this.yBarWidth/2*((v.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2));var y=this,A=v.point,b=[{point:new d(A.x-u,A.y-f,A.z)},{point:new d(A.x+u,A.y-f,A.z)},{point:new d(A.x+u,A.y+f,A.z)},{point:new d(A.x-u,A.y+f,A.z)}],E=[{point:new d(A.x-u,A.y-f,this.zMin)},{point:new d(A.x+u,A.y-f,this.zMin)},{point:new d(A.x+u,A.y+f,this.zMin)},{point:new d(A.x-u,A.y+f,this.zMin)}];b.forEach(function(e){e.screen=y._convert3Dto2D(e.point)}),E.forEach(function(e){e.screen=y._convert3Dto2D(e.point)});var x=[{corners:b,center:d.avg(E[0].point,E[2].point)},{corners:[b[0],b[1],E[1],E[0]],center:d.avg(E[1].point,E[0].point)},{corners:[b[1],b[2],E[2],E[1]],center:d.avg(E[2].point,E[1].point)},{corners:[b[2],b[3],E[3],E[2]],center:d.avg(E[3].point,E[2].point)},{corners:[b[3],b[0],E[0],E[3]],center:d.avg(E[0].point,E[3].point)}];for(v.surfaces=x,t=0;t<x.length;t++){i=x[t];var w=this._convertPointToTranslation(i.center);i.dist=this.showPerspective?w.length():-w.z}for(x.sort(function(e,t){var i=t.dist-e.dist;return i?i:e.corners===b?1:t.corners===b?-1:0}),a.lineWidth=this._getStrokeWidth(v),a.strokeStyle=g,a.fillStyle=m,t=2;t<x.length;t++)i=x[t],n=i.corners,a.beginPath(),a.moveTo(n[3].screen.x,n[3].screen.y),a.lineTo(n[0].screen.x,n[0].screen.y),a.lineTo(n[1].screen.x,n[1].screen.y),a.lineTo(n[2].screen.x,n[2].screen.y),a.lineTo(n[3].screen.x,n[3].screen.y),a.fill(),a.stroke()}}},
r.prototype._redrawDataLine=function(){var e,t,i=this.frame.canvas,r=i.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(t=0;t<this.dataPoints.length;t++){var n=this._convertPointToTranslation(this.dataPoints[t].point),o=this._convertTranslationToScreen(n);this.dataPoints[t].trans=n,this.dataPoints[t].screen=o}if(this.dataPoints.length>0){for(e=this.dataPoints[0],r.lineWidth=this._getStrokeWidth(e),r.lineJoin="round",r.lineCap="round",r.strokeStyle=this.dataColor.stroke,r.beginPath(),r.moveTo(e.screen.x,e.screen.y),t=1;t<this.dataPoints.length;t++)e=this.dataPoints[t],r.lineTo(e.screen.x,e.screen.y);r.stroke()}}},r.prototype._onMouseDown=function(e){if(e=e||window.event,this.leftButtonDown&&this._onMouseUp(e),this.leftButtonDown=e.which?1===e.which:1===e.button,this.leftButtonDown||this.touchDown){this.startMouseX=n(e),this.startMouseY=o(e),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";var t=this;this.onmousemove=function(e){t._onMouseMove(e)},this.onmouseup=function(e){t._onMouseUp(e)},c.addEventListener(document,"mousemove",t.onmousemove),c.addEventListener(document,"mouseup",t.onmouseup),c.preventDefault(e)}},r.prototype._onMouseMove=function(e){e=e||window.event;var t=parseFloat(n(e))-this.startMouseX,i=parseFloat(o(e))-this.startMouseY,r=this.startArmRotation.horizontal+t/200,a=this.startArmRotation.vertical+i/200,s=4,l=Math.sin(s/360*2*Math.PI);Math.abs(Math.sin(r))<l&&(r=Math.round(r/Math.PI)*Math.PI-.001),Math.abs(Math.cos(r))<l&&(r=(Math.round(r/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(a))<l&&(a=Math.round(a/Math.PI)*Math.PI),Math.abs(Math.cos(a))<l&&(a=(Math.round(a/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(r,a),this.redraw();var h=this.getCameraPosition();this.emit("cameraPositionChange",h),c.preventDefault(e)},r.prototype._onMouseUp=function(e){this.frame.style.cursor="auto",this.leftButtonDown=!1,c.removeEventListener(document,"mousemove",this.onmousemove),c.removeEventListener(document,"mouseup",this.onmouseup),c.preventDefault(e)},r.prototype._onTooltip=function(e){var t=300,i=this.frame.getBoundingClientRect(),r=n(e)-i.left,a=o(e)-i.top;if(this.showTooltip){if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown)return void this._hideTooltip();if(this.tooltip&&this.tooltip.dataPoint){var s=this._dataPointFromXY(r,a);s!==this.tooltip.dataPoint&&(s?this._showTooltip(s):this._hideTooltip())}else{var l=this;this.tooltipTimeout=setTimeout(function(){l.tooltipTimeout=null;var e=l._dataPointFromXY(r,a);e&&l._showTooltip(e)},t)}}},r.prototype._onTouchStart=function(e){this.touchDown=!0;var t=this;this.ontouchmove=function(e){t._onTouchMove(e)},this.ontouchend=function(e){t._onTouchEnd(e)},c.addEventListener(document,"touchmove",t.ontouchmove),c.addEventListener(document,"touchend",t.ontouchend),this._onMouseDown(e)},r.prototype._onTouchMove=function(e){this._onMouseMove(e)},r.prototype._onTouchEnd=function(e){this.touchDown=!1,c.removeEventListener(document,"touchmove",this.ontouchmove),c.removeEventListener(document,"touchend",this.ontouchend),this._onMouseUp(e)},r.prototype._onWheel=function(e){e||(e=window.event);var t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t){var i=this.camera.getArmLength(),r=i*(1-t/10);this.camera.setArmLength(r),this.redraw(),this._hideTooltip()}var n=this.getCameraPosition();this.emit("cameraPositionChange",n),c.preventDefault(e)},r.prototype._insideTriangle=function(e,t){function i(e){return e>0?1:0>e?-1:0}var r=t[0],n=t[1],o=t[2],a=i((n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x)),s=i((o.x-n.x)*(e.y-n.y)-(o.y-n.y)*(e.x-n.x)),l=i((r.x-o.x)*(e.y-o.y)-(r.y-o.y)*(e.x-o.x));return!(0!=a&&0!=s&&a!=s||0!=s&&0!=l&&s!=l||0!=a&&0!=l&&a!=l)},r.prototype._dataPointFromXY=function(e,t){var i,n=100,o=null,a=null,s=null,l=new u(e,t);if(this.style===r.STYLE.BAR||this.style===r.STYLE.BARCOLOR||this.style===r.STYLE.BARSIZE)for(i=this.dataPoints.length-1;i>=0;i--){o=this.dataPoints[i];var h=o.surfaces;if(h)for(var c=h.length-1;c>=0;c--){var d=h[c],f=d.corners,p=[f[0].screen,f[1].screen,f[2].screen],m=[f[2].screen,f[3].screen,f[0].screen];if(this._insideTriangle(l,p)||this._insideTriangle(l,m))return o}}else for(i=0;i<this.dataPoints.length;i++){o=this.dataPoints[i];var g=o.screen;if(g){var v=Math.abs(e-g.x),y=Math.abs(t-g.y),A=Math.sqrt(v*v+y*y);(null===s||s>A)&&n>A&&(s=A,a=o)}}return a},r.prototype._showTooltip=function(e){var t,i,r;this.tooltip?(t=this.tooltip.dom.content,i=this.tooltip.dom.line,r=this.tooltip.dom.dot):(t=document.createElement("div"),t.style.position="absolute",t.style.padding="10px",t.style.border="1px solid #4d4d4d",t.style.color="#1a1a1a",t.style.background="rgba(255,255,255,0.7)",t.style.borderRadius="2px",t.style.boxShadow="5px 5px 10px rgba(128,128,128,0.5)",i=document.createElement("div"),i.style.position="absolute",i.style.height="40px",i.style.width="0",i.style.borderLeft="1px solid #4d4d4d",r=document.createElement("div"),r.style.position="absolute",r.style.height="0",r.style.width="0",r.style.border="5px solid #4d4d4d",r.style.borderRadius="5px",this.tooltip={dataPoint:null,dom:{content:t,line:i,dot:r}}),this._hideTooltip(),this.tooltip.dataPoint=e,"function"==typeof this.showTooltip?t.innerHTML=this.showTooltip(e.point):t.innerHTML="<table><tr><td>"+this.xLabel+":</td><td>"+e.point.x+"</td></tr><tr><td>"+this.yLabel+":</td><td>"+e.point.y+"</td></tr><tr><td>"+this.zLabel+":</td><td>"+e.point.z+"</td></tr></table>",t.style.left="0",t.style.top="0",this.frame.appendChild(t),this.frame.appendChild(i),this.frame.appendChild(r);var n=t.offsetWidth,o=t.offsetHeight,a=i.offsetHeight,s=r.offsetWidth,l=r.offsetHeight,h=e.screen.x-n/2;h=Math.min(Math.max(h,10),this.frame.clientWidth-10-n),i.style.left=e.screen.x+"px",i.style.top=e.screen.y-a+"px",t.style.left=h+"px",t.style.top=e.screen.y-a-o+"px",r.style.left=e.screen.x-s/2+"px",r.style.top=e.screen.y-l/2+"px"},r.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(var e in this.tooltip.dom)if(this.tooltip.dom.hasOwnProperty(e)){var t=this.tooltip.dom[e];t&&t.parentNode&&t.parentNode.removeChild(t)}}},e.exports=r},function(e,t){function i(e){return e?r(e):void 0}function r(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function i(){r.off(e,i),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},i.fn=t,this.on(e,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[e];if(!i)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,n=0;n<i.length;n++)if(r=i[n],r===t||r.fn===t){i.splice(n,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks[e];if(i){i=i.slice(0);for(var r=0,n=i.length;n>r;++r)i[r].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){function i(e,t,i){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0,this.z=void 0!==i?i:0}i.subtract=function(e,t){var r=new i;return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r},i.add=function(e,t){var r=new i;return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r},i.avg=function(e,t){return new i((e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2)},i.crossProduct=function(e,t){var r=new i;return r.x=e.y*t.z-e.z*t.y,r.y=e.z*t.x-e.x*t.z,r.z=e.x*t.y-e.y*t.x,r},i.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.exports=i},function(e,t){function i(e,t){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0}e.exports=i},function(e,t,i){function r(){this.armLocation=new n,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraLocation=new n,this.cameraRotation=new n(.5*Math.PI,0,0),this.calculateCameraOrientation()}var n=i(14);r.prototype.setArmLocation=function(e,t,i){this.armLocation.x=e,this.armLocation.y=t,this.armLocation.z=i,this.calculateCameraOrientation()},r.prototype.setArmRotation=function(e,t){void 0!==e&&(this.armRotation.horizontal=e),void 0!==t&&(this.armRotation.vertical=t,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),void 0===e&&void 0===t||this.calculateCameraOrientation()},r.prototype.getArmRotation=function(){var e={};return e.horizontal=this.armRotation.horizontal,e.vertical=this.armRotation.vertical,e},r.prototype.setArmLength=function(e){void 0!==e&&(this.armLength=e,this.armLength<.71&&(this.armLength=.71),this.armLength>5&&(this.armLength=5),this.calculateCameraOrientation())},r.prototype.getArmLength=function(){return this.armLength},r.prototype.getCameraLocation=function(){return this.cameraLocation},r.prototype.getCameraRotation=function(){return this.cameraRotation},r.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal},e.exports=r},function(e,t,i){function r(e,t,i){this.data=e,this.column=t,this.graph=i,this.index=void 0,this.value=void 0,this.values=i.getDistinctValues(e.get(),this.column),this.values.sort(function(e,t){return e>t?1:t>e?-1:0}),this.values.length>0&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=void 0,i.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}var n=i(11);r.prototype.isLoaded=function(){return this.loaded},r.prototype.getLoadedProgress=function(){for(var e=this.values.length,t=0;this.dataPoints[t];)t++;return Math.round(t/e*100)},r.prototype.getLabel=function(){return this.graph.filterLabel},r.prototype.getColumn=function(){return this.column},r.prototype.getSelectedValue=function(){return void 0!==this.index?this.values[this.index]:void 0},r.prototype.getValues=function(){return this.values},r.prototype.getValue=function(e){if(e>=this.values.length)throw"Error: index out of range";return this.values[e]},r.prototype._getDataPoints=function(e){if(void 0===e&&(e=this.index),void 0===e)return[];var t;if(this.dataPoints[e])t=this.dataPoints[e];else{var i={};i.column=this.column,i.value=this.values[e];var r=new n(this.data,{filter:function(e){return e[i.column]==i.value}}).get();t=this.graph._getDataPoints(r),this.dataPoints[e]=t}return t},r.prototype.setOnLoadCallback=function(e){this.onLoadCallback=e},r.prototype.selectValue=function(e){if(e>=this.values.length)throw"Error: index out of range";this.index=e,this.value=this.values[e]},r.prototype.loadInBackground=function(e){void 0===e&&(e=0);var t=this.graph.frame;if(e<this.values.length){this._getDataPoints(e),void 0===t.progress&&(t.progress=document.createElement("DIV"),t.progress.style.position="absolute",t.progress.style.color="gray",t.appendChild(t.progress));var i=this.getLoadedProgress();t.progress.innerHTML="Loading animation... "+i+"%",t.progress.style.bottom="60px",t.progress.style.left="10px";var r=this;setTimeout(function(){r.loadInBackground(e+1)},10),this.loaded=!1}else this.loaded=!0,void 0!==t.progress&&(t.removeChild(t.progress),t.progress=void 0),this.onLoadCallback&&this.onLoadCallback()},e.exports=r},function(e,t,i){function r(e,t){if(void 0===e)throw"Error: No container element defined";if(this.container=e,this.visible=t&&void 0!=t.visible?t.visible:!0,this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var i=this;this.frame.slide.onmousedown=function(e){i._onMouseDown(e)},this.frame.prev.onclick=function(e){i.prev(e)},this.frame.play.onclick=function(e){i.togglePlay(e)},this.frame.next.onclick=function(e){i.next(e)}}this.onChangeCallback=void 0,this.values=[],this.index=void 0,this.playTimeout=void 0,this.playInterval=1e3,this.playLoop=!0}var n=i(1);r.prototype.prev=function(){var e=this.getIndex();e>0&&(e--,this.setIndex(e))},r.prototype.next=function(){var e=this.getIndex();e<this.values.length-1&&(e++,this.setIndex(e))},r.prototype.playNext=function(){var e=new Date,t=this.getIndex();t<this.values.length-1?(t++,this.setIndex(t)):this.playLoop&&(t=0,this.setIndex(t));var i=new Date,r=i-e,n=Math.max(this.playInterval-r,0),o=this;this.playTimeout=setTimeout(function(){o.playNext()},n)},r.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},r.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))},r.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=void 0,this.frame&&(this.frame.play.value="Play")},r.prototype.setOnChangeCallback=function(e){this.onChangeCallback=e},r.prototype.setPlayInterval=function(e){this.playInterval=e},r.prototype.getPlayInterval=function(e){return this.playInterval},r.prototype.setPlayLoop=function(e){this.playLoop=e},r.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},r.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var e=this.indexToLeft(this.index);this.frame.slide.style.left=e+"px"}},r.prototype.setValues=function(e){this.values=e,this.values.length>0?this.setIndex(0):this.index=void 0},r.prototype.setIndex=function(e){if(!(e<this.values.length))throw"Error: index out of range";this.index=e,this.redraw(),this.onChange()},r.prototype.getIndex=function(){return this.index},r.prototype.get=function(){return this.values[this.index]},r.prototype._onMouseDown=function(e){var t=e.which?1===e.which:1===e.button;if(t){this.startClientX=e.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var i=this;this.onmousemove=function(e){i._onMouseMove(e)},this.onmouseup=function(e){i._onMouseUp(e)},n.addEventListener(document,"mousemove",this.onmousemove),n.addEventListener(document,"mouseup",this.onmouseup),n.preventDefault(e)}},r.prototype.leftToIndex=function(e){var t=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=e-3,r=Math.round(i/t*(this.values.length-1));return 0>r&&(r=0),r>this.values.length-1&&(r=this.values.length-1),r},r.prototype.indexToLeft=function(e){var t=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=e/(this.values.length-1)*t,r=i+3;return r},r.prototype._onMouseMove=function(e){var t=e.clientX-this.startClientX,i=this.startSlideX+t,r=this.leftToIndex(i);this.setIndex(r),n.preventDefault()},r.prototype._onMouseUp=function(e){this.frame.style.cursor="auto",n.removeEventListener(document,"mousemove",this.onmousemove),n.removeEventListener(document,"mouseup",this.onmouseup),n.preventDefault()},e.exports=r},function(e,t){function i(e,t,i,r){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(e,t,i,r)}i.prototype.setRange=function(e,t,i,r){this._start=e?e:0,this._end=t?t:0,this.setStep(i,r)},i.prototype.setStep=function(e,t){void 0===e||0>=e||(void 0!==t&&(this.prettyStep=t),this.prettyStep===!0?this._step=i.calculatePrettyStep(e):this._step=e)},i.calculatePrettyStep=function(e){var t=function(e){return Math.log(e)/Math.LN10},i=Math.pow(10,Math.round(t(e))),r=2*Math.pow(10,Math.round(t(e/2))),n=5*Math.pow(10,Math.round(t(e/5))),o=i;return Math.abs(r-e)<=Math.abs(o-e)&&(o=r),Math.abs(n-e)<=Math.abs(o-e)&&(o=n),0>=o&&(o=1),o},i.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))},i.prototype.getStep=function(){return this._step},i.prototype.start=function(){this._current=this._start-this._start%this._step},i.prototype.next=function(){this._current+=this._step},i.prototype.end=function(){return this._current>this._end},e.exports=i},function(e,t,i){if("undefined"!=typeof window){var r=i(21),n=window.Hammer||i(22);e.exports=r(n,{preventDefault:"mouse"})}else e.exports=function(){throw Error("hammer.js is only available in a browser, not in node.js.")}},function(e,t,i){var r,n,o;!function(i){n=[],r=i,o="function"==typeof r?r.apply(t,n):r,!(void 0!==o&&(e.exports=o))}(function(){var e=null;return function t(i,r){function n(e){return e.match(/[^ ]+/g)}function o(t){if("hammer.input"!==t.type){if(t.srcEvent._handled||(t.srcEvent._handled={}),t.srcEvent._handled[t.type])return;t.srcEvent._handled[t.type]=!0}var i=!1;t.stopPropagation=function(){i=!0};var r=t.srcEvent.stopPropagation.bind(t.srcEvent);"function"==typeof r&&(t.srcEvent.stopPropagation=function(){r(),t.stopPropagation()}),t.firstTarget=e;for(var n=e;n&&!i;){var o=n.hammer;if(o)for(var a,s=0;s<o.length;s++)if(a=o[s]._handlers[t.type])for(var l=0;l<a.length&&!i;l++)a[l](t);n=n.parentNode}}var a=r||{preventDefault:!1};if(i.Manager){var s=i,l=function(e,i){var r=Object.create(a);return i&&s.assign(r,i),t(new s(e,r),r)};return s.assign(l,s),l.Manager=function(e,i){var r=Object.create(a);return i&&s.assign(r,i),t(new s.Manager(e,r),r)},l}var h=Object.create(i),c=i.element;return c.hammer||(c.hammer=[]),c.hammer.push(h),i.on("hammer.input",function(t){a.preventDefault!==!0&&a.preventDefault!==t.pointerType||t.preventDefault(),t.isFirst&&(e=t.target)}),h._handlers={},h.on=function(e,t){return n(e).forEach(function(e){var r=h._handlers[e];r||(h._handlers[e]=r=[],i.on(e,o)),r.push(t)}),h},h.off=function(e,t){return n(e).forEach(function(e){var r=h._handlers[e];r&&(r=t?r.filter(function(e){return e!==t}):[],r.length>0?h._handlers[e]=r:(i.off(e,o),delete h._handlers[e]))}),h},h.emit=function(t,r){e=r.target,i.emit(t,r)},h.destroy=function(){var e=i.element.hammer,t=e.indexOf(h);-1!==t&&e.splice(t,1),e.length||delete i.element.hammer,h._handlers={},i.destroy()},h}})},function(e,t,i){var r;!function(n,o,a,s){function l(e,t,i){return setTimeout(f(e,i),t)}function h(e,t,i){return Array.isArray(e)?(c(e,i[t],i),!0):!1}function c(e,t,i){var r;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==s)for(r=0;r<e.length;)t.call(i,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(i,e[r],r,e)}function d(e,t,i){var r="DEPRECATED METHOD: "+t+"\n"+i+" AT \n";return function(){var t=new Error("get-stack-trace"),i=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=n.console&&(n.console.warn||n.console.log);return o&&o.call(n.console,r,i),e.apply(this,arguments)}}function u(e,t,i){var r,n=t.prototype;r=e.prototype=Object.create(n),r.constructor=e,r._super=n,i&&de(r,i)}function f(e,t){return function(){return e.apply(t,arguments)}}function p(e,t){return typeof e==pe?e.apply(t?t[0]||s:s,t):e}function m(e,t){return e===s?t:e}function g(e,t,i){c(b(t),function(t){e.addEventListener(t,i,!1)})}function v(e,t,i){c(b(t),function(t){e.removeEventListener(t,i,!1)})}function y(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function A(e,t){return e.indexOf(t)>-1}function b(e){return e.trim().split(/\s+/g)}function E(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var r=0;r<e.length;){if(i&&e[r][i]==t||!i&&e[r]===t)return r;r++}return-1}function x(e){return Array.prototype.slice.call(e,0)}function w(e,t,i){for(var r=[],n=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];E(n,a)<0&&r.push(e[o]),n[o]=a,o++}return i&&(r=t?r.sort(function(e,i){return e[t]>i[t]}):r.sort()),r}function T(e,t){for(var i,r,n=t[0].toUpperCase()+t.slice(1),o=0;o<ue.length;){if(i=ue[o],r=i?i+n:t,r in e)return r;o++}return s}function _(){return be++}function S(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||n}function C(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){p(e.options.enable,[e])&&i.handler(t)},this.init()}function R(e){var t,i=e.options.inputClass;return new(t=i?i:we?j:Te?W:xe?q:U)(e,k)}function k(e,t,i){var r=i.pointers.length,n=i.changedPointers.length,o=t&Me&&r-n===0,a=t&(De|He)&&r-n===0;i.isFirst=!!o,i.isFinal=!!a,o&&(e.session={}),i.eventType=t,M(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function M(e,t){var i=e.session,r=t.pointers,n=r.length;i.firstInput||(i.firstInput=H(t)),n>1&&!i.firstMultiple?i.firstMultiple=H(t):1===n&&(i.firstMultiple=!1);var o=i.firstInput,a=i.firstMultiple,s=a?a.center:o.center,l=t.center=O(r);t.timeStamp=ve(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=N(s,l),t.distance=B(s,l),P(i,t),t.offsetDirection=I(t.deltaX,t.deltaY);var h=L(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=h.x,t.overallVelocityY=h.y,t.overallVelocity=ge(h.x)>ge(h.y)?h.x:h.y,t.scale=a?z(a.pointers,r):1,t.rotation=a?F(a.pointers,r):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,D(i,t);var c=e.element;y(t.srcEvent.target,c)&&(c=t.srcEvent.target),t.target=c}function P(e,t){var i=t.center,r=e.offsetDelta||{},n=e.prevDelta||{},o=e.prevInput||{};t.eventType!==Me&&o.eventType!==De||(n=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=n.x+(i.x-r.x),t.deltaY=n.y+(i.y-r.y)}function D(e,t){var i,r,n,o,a=e.lastInterval||t,l=t.timeStamp-a.timeStamp;if(t.eventType!=He&&(l>ke||a.velocity===s)){var h=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,d=L(l,h,c);r=d.x,n=d.y,i=ge(d.x)>ge(d.y)?d.x:d.y,o=I(h,c),e.lastInterval=t}else i=a.velocity,r=a.velocityX,n=a.velocityY,o=a.direction;t.velocity=i,t.velocityX=r,t.velocityY=n,t.direction=o}function H(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:me(e.pointers[i].clientX),clientY:me(e.pointers[i].clientY)},i++;return{timeStamp:ve(),pointers:t,center:O(t),deltaX:e.deltaX,deltaY:e.deltaY}}function O(e){var t=e.length;if(1===t)return{x:me(e[0].clientX),y:me(e[0].clientY)};for(var i=0,r=0,n=0;t>n;)i+=e[n].clientX,r+=e[n].clientY,n++;return{x:me(i/t),y:me(r/t)}}function L(e,t,i){return{x:t/e||0,y:i/e||0}}function I(e,t){return e===t?Oe:ge(e)>=ge(t)?0>e?Le:Ie:0>t?Be:Ne}function B(e,t,i){i||(i=je);var r=t[i[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return Math.sqrt(r*r+n*n)}function N(e,t,i){i||(i=je);var r=t[i[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return 180*Math.atan2(n,r)/Math.PI}function F(e,t){return N(t[1],t[0],Ve)+N(e[1],e[0],Ve)}function z(e,t){return B(t[0],t[1],Ve)/B(e[0],e[1],Ve)}function U(){this.evEl=We,this.evWin=Ye,this.allow=!0,this.pressed=!1,C.apply(this,arguments)}function j(){this.evEl=Qe,this.evWin=Ze,C.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=Je,this.evWin=$e,this.started=!1,C.apply(this,arguments)}function G(e,t){var i=x(e.touches),r=x(e.changedTouches);return t&(De|He)&&(i=w(i.concat(r),"identifier",!0)),[i,r]}function W(){this.evTarget=tt,this.targetIds={},C.apply(this,arguments)}function Y(e,t){var i=x(e.touches),r=this.targetIds;if(t&(Me|Pe)&&1===i.length)return r[i[0].identifier]=!0,[i,i];var n,o,a=x(e.changedTouches),s=[],l=this.target;if(o=i.filter(function(e){return y(e.target,l)}),t===Me)for(n=0;n<o.length;)r[o[n].identifier]=!0,n++;for(n=0;n<a.length;)r[a[n].identifier]&&s.push(a[n]),t&(De|He)&&delete r[a[n].identifier],n++;return s.length?[w(o.concat(s),"identifier",!0),s]:void 0}function q(){C.apply(this,arguments);var e=f(this.handler,this);this.touch=new W(this.manager,e),this.mouse=new U(this.manager,e)}function X(e,t){this.manager=e,this.set(t)}function Q(e){if(A(e,st))return st;var t=A(e,lt),i=A(e,ht);return t&&i?st:t||i?t?lt:ht:A(e,at)?at:ot}function Z(e){this.options=de({},this.defaults,e||{}),this.id=_(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=ct,this.simultaneous={},this.requireFail=[]}function K(e){return e&mt?"cancel":e&ft?"end":e&ut?"move":e&dt?"start":""}function J(e){return e==Ne?"down":e==Be?"up":e==Le?"left":e==Ie?"right":""}function $(e,t){var i=t.manager;return i?i.get(e):e}function ee(){Z.apply(this,arguments)}function te(){ee.apply(this,arguments),this.pX=null,this.pY=null}function ie(){ee.apply(this,arguments)}function re(){Z.apply(this,arguments),this._timer=null,this._input=null}function ne(){ee.apply(this,arguments)}function oe(){ee.apply(this,arguments)}function ae(){Z.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function se(e,t){return t=t||{},t.recognizers=m(t.recognizers,se.defaults.preset),new le(e,t)}function le(e,t){this.options=de({},se.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=R(this),this.touchAction=new X(this,this.options.touchAction),he(this,!0),c(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function he(e,t){var i=e.element;i.style&&c(e.options.cssProps,function(e,r){i.style[T(i.style,r)]=t?e:""})}function ce(e,t){var i=o.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=t,t.target.dispatchEvent(i)}var de,ue=["","webkit","Moz","MS","ms","o"],fe=o.createElement("div"),pe="function",me=Math.round,ge=Math.abs,ve=Date.now;de="function"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(r!==s&&null!==r)for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}return t}:Object.assign;var ye=d(function(e,t,i){for(var r=Object.keys(t),n=0;n<r.length;)(!i||i&&e[r[n]]===s)&&(e[r[n]]=t[r[n]]),n++;return e},"extend","Use `assign`."),Ae=d(function(e,t){return ye(e,t,!0)},"merge","Use `assign`."),be=1,Ee=/mobile|tablet|ip(ad|hone|od)|android/i,xe="ontouchstart"in n,we=T(n,"PointerEvent")!==s,Te=xe&&Ee.test(navigator.userAgent),_e="touch",Se="pen",Ce="mouse",Re="kinect",ke=25,Me=1,Pe=2,De=4,He=8,Oe=1,Le=2,Ie=4,Be=8,Ne=16,Fe=Le|Ie,ze=Be|Ne,Ue=Fe|ze,je=["x","y"],Ve=["clientX","clientY"];C.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(S(this.element),this.evWin,this.domHandler)}};var Ge={mousedown:Me,mousemove:Pe,mouseup:De},We="mousedown",Ye="mousemove mouseup";u(U,C,{handler:function(e){var t=Ge[e.type];t&Me&&0===e.button&&(this.pressed=!0),t&Pe&&1!==e.which&&(t=De),this.pressed&&this.allow&&(t&De&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Ce,srcEvent:e}))}});var qe={pointerdown:Me,pointermove:Pe,pointerup:De,pointercancel:He,pointerout:He},Xe={2:_e,3:Se,4:Ce,5:Re},Qe="pointerdown",Ze="pointermove pointerup pointercancel";n.MSPointerEvent&&!n.PointerEvent&&(Qe="MSPointerDown",Ze="MSPointerMove MSPointerUp MSPointerCancel"),u(j,C,{handler:function(e){var t=this.store,i=!1,r=e.type.toLowerCase().replace("ms",""),n=qe[r],o=Xe[e.pointerType]||e.pointerType,a=o==_e,s=E(t,e.pointerId,"pointerId");n&Me&&(0===e.button||a)?0>s&&(t.push(e),s=t.length-1):n&(De|He)&&(i=!0),0>s||(t[s]=e,this.callback(this.manager,n,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),i&&t.splice(s,1))}});var Ke={touchstart:Me,touchmove:Pe,touchend:De,touchcancel:He},Je="touchstart",$e="touchstart touchmove touchend touchcancel";u(V,C,{handler:function(e){var t=Ke[e.type];if(t===Me&&(this.started=!0),this.started){var i=G.call(this,e,t);t&(De|He)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:_e,srcEvent:e})}}});var et={touchstart:Me,touchmove:Pe,touchend:De,touchcancel:He},tt="touchstart touchmove touchend touchcancel";u(W,C,{handler:function(e){var t=et[e.type],i=Y.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:_e,srcEvent:e})}}),u(q,C,{handler:function(e,t,i){var r=i.pointerType==_e,n=i.pointerType==Ce;if(r)this.mouse.allow=!1;else if(n&&!this.mouse.allow)return;t&(De|He)&&(this.mouse.allow=!0),this.callback(e,t,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var it=T(fe.style,"touchAction"),rt=it!==s,nt="compute",ot="auto",at="manipulation",st="none",lt="pan-x",ht="pan-y";X.prototype={set:function(e){e==nt&&(e=this.compute()),rt&&this.manager.element.style&&(this.manager.element.style[it]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return c(this.manager.recognizers,function(t){p(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Q(e.join(" "))},preventDefaults:function(e){if(!rt){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var r=this.actions,n=A(r,st),o=A(r,ht),a=A(r,lt);if(n){var s=1===e.pointers.length,l=e.distance<2,h=e.deltaTime<250;if(s&&l&&h)return}if(!a||!o)return n||o&&i&Fe||a&&i&ze?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ct=1,dt=2,ut=4,ft=8,pt=ft,mt=16,gt=32;Z.prototype={defaults:{},set:function(e){return de(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(h(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=$(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return h(e,"dropRecognizeWith",this)?this:(e=$(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(h(e,"requireFailure",this))return this;var t=this.requireFail;return e=$(e,this),-1===E(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(h(e,"dropRequireFailure",this))return this;e=$(e,this);var t=E(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){
function t(t){i.manager.emit(t,e)}var i=this,r=this.state;ft>r&&t(i.options.event+K(r)),t(i.options.event),e.additionalEvent&&t(e.additionalEvent),r>=ft&&t(i.options.event+K(r))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=gt)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(gt|ct)))return!1;e++}return!0},recognize:function(e){var t=de({},e);return p(this.options.enable,[this,t])?(this.state&(pt|mt|gt)&&(this.state=ct),this.state=this.process(t),void(this.state&(dt|ut|ft|mt)&&this.tryEmit(t))):(this.reset(),void(this.state=gt))},process:function(e){},getTouchAction:function(){},reset:function(){}},u(ee,Z,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,r=t&(dt|ut),n=this.attrTest(e);return r&&(i&He||!n)?t|mt:r||n?i&De?t|ft:t&dt?t|ut:dt:gt}}),u(te,ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ue},getTouchAction:function(){var e=this.options.direction,t=[];return e&Fe&&t.push(ht),e&ze&&t.push(lt),t},directionTest:function(e){var t=this.options,i=!0,r=e.distance,n=e.direction,o=e.deltaX,a=e.deltaY;return n&t.direction||(t.direction&Fe?(n=0===o?Oe:0>o?Le:Ie,i=o!=this.pX,r=Math.abs(e.deltaX)):(n=0===a?Oe:0>a?Be:Ne,i=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=n,i&&r>t.threshold&&n&t.direction},attrTest:function(e){return ee.prototype.attrTest.call(this,e)&&(this.state&dt||!(this.state&dt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=J(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),u(ie,ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[st]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&dt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),u(re,Z,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ot]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,r=e.distance<t.threshold,n=e.deltaTime>t.time;if(this._input=e,!r||!i||e.eventType&(De|He)&&!n)this.reset();else if(e.eventType&Me)this.reset(),this._timer=l(function(){this.state=pt,this.tryEmit()},t.time,this);else if(e.eventType&De)return pt;return gt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===pt&&(e&&e.eventType&De?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ve(),this.manager.emit(this.options.event,this._input)))}}),u(ne,ee,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[st]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&dt)}}),u(oe,ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Fe|ze,pointers:1},getTouchAction:function(){return te.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(Fe|ze)?t=e.overallVelocity:i&Fe?t=e.overallVelocityX:i&ze&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&ge(t)>this.options.velocity&&e.eventType&De},emit:function(e){var t=J(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),u(ae,Z,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[at]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,r=e.distance<t.threshold,n=e.deltaTime<t.time;if(this.reset(),e.eventType&Me&&0===this.count)return this.failTimeout();if(r&&n&&i){if(e.eventType!=De)return this.failTimeout();var o=this.pTime?e.timeStamp-this.pTime<t.interval:!0,a=!this.pCenter||B(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e;var s=this.count%t.taps;if(0===s)return this.hasRequireFailures()?(this._timer=l(function(){this.state=pt,this.tryEmit()},t.interval,this),dt):pt}return gt},failTimeout:function(){return this._timer=l(function(){this.state=gt},this.options.interval,this),gt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==pt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),se.VERSION="2.0.6",se.defaults={domEvents:!1,touchAction:nt,enable:!0,inputTarget:null,inputClass:null,preset:[[ne,{enable:!1}],[ie,{enable:!1},["rotate"]],[oe,{direction:Fe}],[te,{direction:Fe},["swipe"]],[ae],[ae,{event:"doubletap",taps:2},["tap"]],[re]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var vt=1,yt=2;le.prototype={set:function(e){return de(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?yt:vt},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var i,r=this.recognizers,n=t.curRecognizer;(!n||n&&n.state&pt)&&(n=t.curRecognizer=null);for(var o=0;o<r.length;)i=r[o],t.stopped===yt||n&&i!=n&&!i.canRecognizeWith(n)?i.reset():i.recognize(e),!n&&i.state&(dt|ut|ft)&&(n=t.curRecognizer=i),o++}},get:function(e){if(e instanceof Z)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(h(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(h(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,i=E(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){var i=this.handlers;return c(b(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this},off:function(e,t){var i=this.handlers;return c(b(e),function(e){t?i[e]&&i[e].splice(E(i[e],t),1):delete i[e]}),this},emit:function(e,t){this.options.domEvents&&ce(e,t);var i=this.handlers[e]&&this.handlers[e].slice();if(i&&i.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<i.length;)i[r](t),r++}},destroy:function(){this.element&&he(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},de(se,{INPUT_START:Me,INPUT_MOVE:Pe,INPUT_END:De,INPUT_CANCEL:He,STATE_POSSIBLE:ct,STATE_BEGAN:dt,STATE_CHANGED:ut,STATE_ENDED:ft,STATE_RECOGNIZED:pt,STATE_CANCELLED:mt,STATE_FAILED:gt,DIRECTION_NONE:Oe,DIRECTION_LEFT:Le,DIRECTION_RIGHT:Ie,DIRECTION_UP:Be,DIRECTION_DOWN:Ne,DIRECTION_HORIZONTAL:Fe,DIRECTION_VERTICAL:ze,DIRECTION_ALL:Ue,Manager:le,Input:C,TouchAction:X,TouchInput:W,MouseInput:U,PointerEventInput:j,TouchMouseInput:q,SingleTouchInput:V,Recognizer:Z,AttrRecognizer:ee,Tap:ae,Pan:te,Swipe:oe,Pinch:ie,Rotate:ne,Press:re,on:g,off:v,each:c,merge:Ae,extend:ye,assign:de,inherit:u,bindFn:f,prefixed:T});var At="undefined"!=typeof n?n:"undefined"!=typeof self?self:{};At.Hammer=se,r=function(){return se}.call(t,i,t,e),!(r!==s&&(e.exports=r))}(window,document,"Hammer")},function(e,t,i){var r,n,o;!function(i,a){n=[],r=a,o="function"==typeof r?r.apply(t,n):r,!(void 0!==o&&(e.exports=o))}(this,function(){function e(e){var t,i=e&&e.preventDefault||!1,r=e&&e.container||window,n={},o={keydown:{},keyup:{}},a={};for(t=97;122>=t;t++)a[String.fromCharCode(t)]={code:65+(t-97),shift:!1};for(t=65;90>=t;t++)a[String.fromCharCode(t)]={code:t,shift:!0};for(t=0;9>=t;t++)a[""+t]={code:48+t,shift:!1};for(t=1;12>=t;t++)a["F"+t]={code:111+t,shift:!1};for(t=0;9>=t;t++)a["num"+t]={code:96+t,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a["delete"]={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var s=function(e){h(e,"keydown")},l=function(e){h(e,"keyup")},h=function(e,t){if(void 0!==o[t][e.keyCode]){for(var r=o[t][e.keyCode],n=0;n<r.length;n++)void 0===r[n].shift?r[n].fn(e):1==r[n].shift&&1==e.shiftKey?r[n].fn(e):0==r[n].shift&&0==e.shiftKey&&r[n].fn(e);1==i&&e.preventDefault()}};return n.bind=function(e,t,i){if(void 0===i&&(i="keydown"),void 0===a[e])throw new Error("unsupported key: "+e);void 0===o[i][a[e].code]&&(o[i][a[e].code]=[]),o[i][a[e].code].push({fn:t,shift:a[e].shift})},n.bindAll=function(e,t){void 0===t&&(t="keydown");for(var i in a)a.hasOwnProperty(i)&&n.bind(i,e,t)},n.getKey=function(e){for(var t in a)if(a.hasOwnProperty(t)){if(1==e.shiftKey&&1==a[t].shift&&e.keyCode==a[t].code)return t;if(0==e.shiftKey&&0==a[t].shift&&e.keyCode==a[t].code)return t;if(e.keyCode==a[t].code&&"shift"==t)return t}return"unknown key, currently not supported"},n.unbind=function(e,t,i){if(void 0===i&&(i="keydown"),void 0===a[e])throw new Error("unsupported key: "+e);if(void 0!==t){var r=[],n=o[i][a[e].code];if(void 0!==n)for(var s=0;s<n.length;s++)n[s].fn==t&&n[s].shift==a[e].shift||r.push(o[i][a[e].code][s]);o[i][a[e].code]=r}else o[i][a[e].code]=[]},n.reset=function(){o={keydown:{},keyup:{}}},n.destroy=function(){o={keydown:{},keyup:{}},r.removeEventListener("keydown",s,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",s,!0),r.addEventListener("keyup",l,!0),n}return e})},function(e,t,i){t.util=i(1),t.DOMutil=i(8),t.DataSet=i(9),t.DataView=i(11),t.Queue=i(10),t.Timeline=i(25),t.Graph2d=i(50),t.timeline={Core:i(33),DateUtil:i(32),Range:i(30),stack:i(37),TimeStep:i(35),components:{items:{Item:i(39),BackgroundItem:i(43),BoxItem:i(41),PointItem:i(42),RangeItem:i(38)},BackgroundGroup:i(40),Component:i(31),CurrentTime:i(48),CustomTime:i(46),DataAxis:i(52),DataScale:i(53),GraphGroup:i(54),Group:i(36),ItemSet:i(34),Legend:i(58),LineGraph:i(51),TimeAxis:i(44)}},t.moment=i(2),t.Hammer=i(20),t.keycharm=i(23)},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,i,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(i)||i instanceof d||i instanceof u)&&i instanceof Object){var o=r;r=i,i=o}var a=this;this.defaultOptions={start:null,end:null,autoResize:!0,throttleRedraw:0,orientation:{axis:"bottom",item:"bottom"},rtl:!1,moment:h,width:null,height:null,maxHeight:null,minHeight:null},this.options=c.deepExtend({},this.defaultOptions),this._create(e),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function(){return a.timeAxis.step.scale},getStep:function(){return a.timeAxis.step.step},toScreen:a._toScreen.bind(a),toGlobalScreen:a._toGlobalScreen.bind(a),toTime:a._toTime.bind(a),toGlobalTime:a._toGlobalTime.bind(a)}},this.range=new f(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new m(this.body),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new g(this.body),this.components.push(this.currentTime),this.itemSet=new y(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,this.on("tap",function(e){a.emit("click",a.getEventProperties(e))}),this.on("doubletap",function(e){a.emit("doubleClick",a.getEventProperties(e))}),this.dom.root.oncontextmenu=function(e){a.emit("contextmenu",a.getEventProperties(e))},this.fitDone=!1,this.on("changed",function(){if(null!=this.itemsData&&!a.fitDone)if(a.fitDone=!0,void 0!=a.options.start||void 0!=a.options.end){if(void 0==a.options.start||void 0==a.options.end)var e=a.getItemRange();var t=void 0!=a.options.start?a.options.start:e.min,i=void 0!=a.options.end?a.options.end:e.max;a.setWindow(t,i,{animation:!1})}else a.fit({animation:!1})}),r&&this.setOptions(r),i&&this.setGroups(i),t&&this.setItems(t),this._redraw()}var o=i(26),a=r(o),s=i(29),l=r(s),h=(i(13),i(20),i(2)),c=i(1),d=i(9),u=i(11),f=i(30),p=i(33),m=i(44),g=i(48),v=i(46),y=i(34),A=i(29).printStyle,b=i(49).allOptions,E=i(49).configureOptions;n.prototype=new p,n.prototype._createConfigurator=function(){return new a["default"](this,this.dom.container,E)},n.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()},n.prototype.setOptions=function(e){var t=l["default"].validate(e,b);if(t===!0&&console.log("%cErrors have been found in the supplied options object.",A),p.prototype.setOptions.call(this,e),"type"in e&&e.type!==this.options.type){this.options.type=e.type;var i=this.itemsData;if(i){var r=this.getSelection();this.setItems(null),this.setItems(i),this.setSelection(r)}}},n.prototype.setItems=function(e){var t;t=e?e instanceof d||e instanceof u?e:new d(e,{type:{start:"Date",end:"Date"}}):null,this.itemsData=t,this.itemSet&&this.itemSet.setItems(t)},n.prototype.setGroups=function(e){var t;t=e?e instanceof d||e instanceof u?e:new d(e):null,this.groupsData=t,this.itemSet.setGroups(t)},n.prototype.setData=function(e){e&&e.groups&&this.setGroups(e.groups),e&&e.items&&this.setItems(e.items)},n.prototype.setSelection=function(e,t){this.itemSet&&this.itemSet.setSelection(e),t&&t.focus&&this.focus(e,t)},n.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},n.prototype.focus=function(e,t){if(this.itemsData&&void 0!=e){var i=Array.isArray(e)?e:[e],r=this.itemsData.getDataSet().get(i,{type:{start:"Date",end:"Date"}}),n=null,o=null;if(r.forEach(function(e){var t=e.start.valueOf(),i="end"in e?e.end.valueOf():e.start.valueOf();(null===n||n>t)&&(n=t),(null===o||i>o)&&(o=i)}),null!==n&&null!==o){var a=(n+o)/2,s=Math.max(this.range.end-this.range.start,1.1*(o-n)),l=t&&void 0!==t.animation?t.animation:!0;this.range.setRange(a-s/2,a+s/2,l)}}},n.prototype.fit=function(e){var t,i=e&&void 0!==e.animation?e.animation:!0,r=this.itemsData&&this.itemsData.getDataSet();1===r.length&&void 0===r.get()[0].end?(t=this.getDataRange(),this.moveTo(t.min.valueOf(),{animation:i})):(t=this.getItemRange(),this.range.setRange(t.min,t.max,i))},n.prototype.getItemRange=function(){var e=this,t=this.getDataRange(),i=null!==t.min?t.min.valueOf():null,r=null!==t.max?t.max.valueOf():null,n=null,o=null;if(null!=i&&null!=r){var a,s,l,h,d;!function(){var t=function(e){return c.convert(e.data.start,"Date").valueOf()},u=function(e){var t=void 0!=e.data.end?e.data.end:e.data.start;return c.convert(t,"Date").valueOf()};a=r-i,0>=a&&(a=10),s=a/e.props.center.width,c.forEach(e.itemSet.items,function(e){e.show(),e.repositionX();var a=t(e),l=u(e);if(this.options.rtl)var h=a-(e.getWidthRight()+10)*s,c=l+(e.getWidthLeft()+10)*s;else var h=a-(e.getWidthLeft()+10)*s,c=l+(e.getWidthRight()+10)*s;i>h&&(i=h,n=e),c>r&&(r=c,o=e)}.bind(e)),n&&o&&(l=n.getWidthLeft()+10,h=o.getWidthRight()+10,d=e.props.center.width-l-h,d>0&&(e.options.rtl?(i=t(n)-h*a/d,r=u(o)+l*a/d):(i=t(n)-l*a/d,r=u(o)+h*a/d)))}()}return{min:null!=i?new Date(i):null,max:null!=r?new Date(r):null}},n.prototype.getDataRange=function(){var e=null,t=null,i=this.itemsData&&this.itemsData.getDataSet();return i&&i.forEach(function(i){var r=c.convert(i.start,"Date").valueOf(),n=c.convert(void 0!=i.end?i.end:i.start,"Date").valueOf();(null===e||e>r)&&(e=r),(null===t||n>t)&&(t=n)}),{min:null!=e?new Date(e):null,max:null!=t?new Date(t):null}},n.prototype.getEventProperties=function(e){var t=e.center?e.center.x:e.clientX,i=e.center?e.center.y:e.clientY;if(this.options.rtl)var r=c.getAbsoluteRight(this.dom.centerContainer)-t;else var r=t-c.getAbsoluteLeft(this.dom.centerContainer);var n=i-c.getAbsoluteTop(this.dom.centerContainer),o=this.itemSet.itemFromTarget(e),a=this.itemSet.groupFromTarget(e),s=v.customTimeFromTarget(e),l=this.itemSet.options.snap||null,h=this.body.util.getScale(),d=this.body.util.getStep(),u=this._toTime(r),f=l?l(u,h,d):u,p=c.getTarget(e),m=null;return null!=o?m="item":null!=s?m="custom-time":c.hasParent(p,this.timeAxis.dom.foreground)?m="axis":this.timeAxis2&&c.hasParent(p,this.timeAxis2.dom.foreground)?m="axis":c.hasParent(p,this.itemSet.dom.labelSet)?m="group-label":c.hasParent(p,this.currentTime.bar)?m="current-time":c.hasParent(p,this.dom.center)&&(m="background"),{event:e,item:o?o.id:null,group:a?a.groupId:null,what:m,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:r,y:n,time:u,snappedTime:f}},e.exports=n},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(27),l=r(s),h=i(1),c=function(){function e(t,i,r){var o=arguments.length<=3||void 0===arguments[3]?1:arguments[3];n(this,e),this.parent=t,this.changedOptions=[],this.container=i,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},h.extend(this.options,this.defaultOptions),this.configureOptions=r,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new l["default"](o),this.wrapper=void 0}return a(e,[{key:"setOptions",value:function(e){if(void 0!==e){this.popupHistory={},this._removePopup();var t=!0;"string"==typeof e?this.options.filter=e:e instanceof Array?this.options.filter=e.join():"object"===("undefined"==typeof e?"undefined":o(e))?(void 0!==e.container&&(this.options.container=e.container),void 0!==e.filter&&(this.options.filter=e.filter),void 0!==e.showButton&&(this.options.showButton=e.showButton),void 0!==e.enabled&&(t=e.enabled)):"boolean"==typeof e?(this.options.filter=!0,t=e):"function"==typeof e&&(this.options.filter=e,t=!0),this.options.filter===!1&&(t=!1),this.options.enabled=t}this._clean()}},{key:"setModuleOptions",value:function(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){var e=this;this._clean(),this.changedOptions=[];var t=this.options.filter,i=0,r=!1;for(var n in this.configureOptions)this.configureOptions.hasOwnProperty(n)&&(this.allowCreation=!1,r=!1,"function"==typeof t?(r=t(n,[]),r=r||this._handleObject(this.configureOptions[n],[n],!0)):t!==!0&&-1===t.indexOf(n)||(r=!0),r!==!1&&(this.allowCreation=!0,i>0&&this._makeItem([]),this._makeHeader(n),this._handleObject(this.configureOptions[n],[n])),i++);this.options.showButton===!0&&!function(){var t=document.createElement("div");t.className="vis-configuration vis-config-button",t.innerHTML="generate options",t.onclick=function(){e._printOptions()},t.onmouseover=function(){t.className="vis-configuration vis-config-button hover"},t.onmouseout=function(){t.className="vis-configuration vis-config-button"},e.optionsContainer=document.createElement("div"),e.optionsContainer.className="vis-configuration vis-config-option-container",e.domElements.push(e.optionsContainer),e.domElements.push(t)}(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(e){for(var t=this.moduleOptions,i=0;i<e.length;i++){if(void 0===t[e[i]]){t=void 0;break}t=t[e[i]]}return t}},{key:"_makeItem",value:function(e){var t=arguments,i=this;if(this.allowCreation===!0){var r,n,a,s=function(){var o=document.createElement("div");for(o.className="vis-configuration vis-config-item vis-config-s"+e.length,r=t.length,n=Array(r>1?r-1:0),a=1;r>a;a++)n[a-1]=t[a];return n.forEach(function(e){o.appendChild(e)}),i.domElements.push(o),{v:i.domElements.length}}();if("object"===("undefined"==typeof s?"undefined":o(s)))return s.v}return 0}},{key:"_makeHeader",value:function(e){var t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerHTML=e,this._makeItem([],t)}},{key:"_makeLabel",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=document.createElement("div");return r.className="vis-configuration vis-config-label vis-config-s"+t.length,i===!0?r.innerHTML="<i><b>"+e+":</b></i>":r.innerHTML=e+":",r}},{key:"_makeDropdown",value:function(e,t,i){var r=document.createElement("select");r.className="vis-configuration vis-config-select";var n=0;void 0!==t&&-1!==e.indexOf(t)&&(n=e.indexOf(t));for(var o=0;o<e.length;o++){var a=document.createElement("option");a.value=e[o],o===n&&(a.selected="selected"),a.innerHTML=e[o],r.appendChild(a)}var s=this;r.onchange=function(){s._update(this.value,i)};var l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,r)}},{key:"_makeRange",value:function(e,t,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=document.createElement("input");s.className="vis-configuration vis-config-range";try{s.type="range",s.min=n,s.max=o}catch(l){}s.step=a;var h="",c=0;if(void 0!==t){var d=1.2;0>t&&n>t*d?(s.min=Math.ceil(t*d),c=s.min,h="range increased"):n>t/d&&(s.min=Math.ceil(t/d),c=s.min,h="range increased"),t*d>o&&1!==o&&(s.max=Math.ceil(t*d),c=s.max,h="range increased"),s.value=t}else s.value=r;var u=document.createElement("input");u.className="vis-configuration vis-config-rangeinput",u.value=s.value;var f=this;s.onchange=function(){u.value=this.value,f._update(Number(this.value),i)},s.oninput=function(){u.value=this.value};var p=this._makeLabel(i[i.length-1],i),m=this._makeItem(i,p,s,u);""!==h&&this.popupHistory[m]!==c&&(this.popupHistory[m]=c,this._setupPopup(h,m))}},{key:"_setupPopup",value:function(e,t){var i=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var r=document.createElement("div");r.id="vis-configuration-popup",r.className="vis-configuration-popup",r.innerHTML=e,r.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:r,index:t}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var e=this;if(void 0!==this.popupDiv.html){var t=this.domElements[this.popupDiv.index],i=t.getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(function(){e.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(function(){e._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(e,t,i){var r=document.createElement("input");r.type="checkbox",r.className="vis-configuration vis-config-checkbox",r.checked=e,void 0!==t&&(r.checked=t,t!==e&&("object"===("undefined"==typeof e?"undefined":o(e))?t!==e.enabled&&this.changedOptions.push({path:i,value:t}):this.changedOptions.push({path:i,value:t})));var n=this;r.onchange=function(){n._update(this.checked,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,r)}},{key:"_makeTextInput",value:function(e,t,i){var r=document.createElement("input");r.type="text",r.className="vis-configuration vis-config-text",r.value=t,t!==e&&this.changedOptions.push({path:i,value:t});var n=this;r.onchange=function(){n._update(this.value,i)};var o=this._makeLabel(i[i.length-1],i);this._makeItem(i,o,r)}},{key:"_makeColorField",value:function(e,t,i){var r=this,n=e[1],o=document.createElement("div");t=void 0===t?n:t,"none"!==t?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=t):o.className="vis-configuration vis-config-colorBlock none",t=void 0===t?n:t,o.onclick=function(){r._showColorPicker(t,o,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,o)}},{key:"_showColorPicker",value:function(e,t,i){var r=this;t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(function(e){var n="rgba("+e.r+","+e.g+","+e.b+","+e.a+")";t.style.backgroundColor=n,r._update(n,i)}),this.colorPicker.setCloseCallback(function(){t.onclick=function(){r._showColorPicker(e,t,i)}})}},{key:"_handleObject",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=!1,n=this.options.filter,o=!1;for(var a in e)if(e.hasOwnProperty(a)){r=!0;var s=e[a],l=h.copyAndExtendArray(t,a);if("function"==typeof n&&(r=n(a,t),r===!1&&!(s instanceof Array)&&"string"!=typeof s&&"boolean"!=typeof s&&s instanceof Object&&(this.allowCreation=!1,r=this._handleObject(s,l,!0),this.allowCreation=i===!1)),r!==!1){o=!0;var c=this._getValue(l);if(s instanceof Array)this._handleArray(s,c,l);else if("string"==typeof s)this._makeTextInput(s,c,l);else if("boolean"==typeof s)this._makeCheckbox(s,c,l);else if(s instanceof Object){var d=!0;if(-1!==t.indexOf("physics")&&this.moduleOptions.physics.solver!==a&&(d=!1),d===!0)if(void 0!==s.enabled){var u=h.copyAndExtendArray(l,"enabled"),f=this._getValue(u);if(f===!0){var p=this._makeLabel(a,l,!0);this._makeItem(l,p),o=this._handleObject(s,l)||o}else this._makeCheckbox(s,f,l)}else{var m=this._makeLabel(a,l,!0);this._makeItem(l,m),o=this._handleObject(s,l)||o}}else console.error("dont know how to handle",s,a,l)}}return o}},{key:"_handleArray",value:function(e,t,i){"string"==typeof e[0]&&"color"===e[0]?(this._makeColorField(e,t,i),e[1]!==t&&this.changedOptions.push({path:i,value:t})):"string"==typeof e[0]?(this._makeDropdown(e,t,i),e[0]!==t&&this.changedOptions.push({path:i,value:t})):"number"==typeof e[0]&&(this._makeRange(e,t,i),e[0]!==t&&this.changedOptions.push({path:i,value:Number(t)}))}},{key:"_update",value:function(e,t){var i=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=i;e="true"===e?!0:e,e="false"===e?!1:e;for(var n=0;n<t.length;n++)"global"!==t[n]&&(void 0===r[t[n]]&&(r[t[n]]={}),n!==t.length-1?r=r[t[n]]:r[t[n]]=e);return i}},{key:"_printOptions",value:function(){var e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(e,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var e={},t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}}]),e}();t["default"]=c},function(e,t,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(20),a=i(28),s=i(1),l=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];r(this,e),this.pixelRatio=t,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return n(e,[{key:"insertTo",value:function(e){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(e){if("function"!=typeof e)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=e}},{key:"setCloseCallback",value:function(e){if("function"!=typeof e)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=e}},{key:"_isColorString",value:function(e){var t={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",
snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};return"string"==typeof e?t[e]:void 0}},{key:"setColor",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if("none"!==e){var i=void 0,r=this._isColorString(e);if(void 0!==r&&(e=r),s.isString(e)===!0){if(s.isValidRGB(e)===!0){var n=e.substr(4).substr(0,e.length-5).split(",");i={r:n[0],g:n[1],b:n[2],a:1}}else if(s.isValidRGBA(e)===!0){var o=e.substr(5).substr(0,e.length-6).split(",");i={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(s.isValidHex(e)===!0){var a=s.hexToRGB(e);i={r:a.r,g:a.g,b:a.b,a:1}}}else if(e instanceof Object&&void 0!==e.r&&void 0!==e.g&&void 0!==e.b){var l=void 0!==e.a?e.a:"1.0";i={r:e.r,g:e.g,b:e.b,a:l}}if(void 0===i)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(e));this._setColor(i,t)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];t===!0&&(this.previousColor=s.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(function(){void 0!==e.closeCallback&&(e.closeCallback(),e.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];t===!0&&(this.initialColor=s.extend({},e)),this.color=e;var i=s.RGBToHSV(e.r,e.g,e.b),r=2*Math.PI,n=this.r*i.s,o=this.centerCoordinates.x+n*Math.sin(r*i.h),a=this.centerCoordinates.y+n*Math.cos(r*i.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}},{key:"_setOpacity",value:function(e){this.color.a=e/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(e){var t=s.RGBToHSV(this.color.r,this.color.g,this.color.b);t.v=e/100;var i=s.HSVToRGB(t.h,t.s,t.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.color:arguments[0],t=s.RGBToHSV(e.r,e.g,e.b),i=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,r,n),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-t.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),i.fill(),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var e=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(i){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(i){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var r=this;this.opacityRange.onchange=function(){r._setOpacity(this.value)},this.opacityRange.oninput=function(){r._setOpacity(this.value)},this.brightnessRange.onchange=function(){r._setBrightness(this.value)},this.brightnessRange.oninput=function(){r._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var e=this;this.drag={},this.pinch={},this.hammer=new o(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),a.onTouch(this.hammer,function(t){e._moveSelector(t)}),this.hammer.on("tap",function(t){e._moveSelector(t)}),this.hammer.on("panstart",function(t){e._moveSelector(t)}),this.hammer.on("panmove",function(t){e._moveSelector(t)}),this.hammer.on("panend",function(t){e._moveSelector(t)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var e=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var t=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,i);var r=void 0,n=void 0,o=void 0,a=void 0;this.centerCoordinates={x:.5*t,y:.5*i},this.r=.49*t;var l=2*Math.PI/360,h=1/360,c=1/this.r,d=void 0;for(o=0;360>o;o++)for(a=0;a<this.r;a++)r=this.centerCoordinates.x+a*Math.sin(l*o),n=this.centerCoordinates.y+a*Math.cos(l*o),d=s.HSVToRGB(o*h,a*c,1),e.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",e.fillRect(r-.5,n-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,i)}this.generated=!0}},{key:"_moveSelector",value:function(e){var t=this.colorPickerDiv.getBoundingClientRect(),i=e.center.x-t.left,r=e.center.y-t.top,n=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=i-o,l=r-n,h=Math.atan2(a,l),c=.98*Math.min(Math.sqrt(a*a+l*l),o),d=Math.cos(h)*c+n,u=Math.sin(h)*c+o;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=u-.5*this.colorPickerSelector.clientWidth+"px";var f=h/(2*Math.PI);f=0>f?f+1:f;var p=c/this.r,m=s.RGBToHSV(this.color.r,this.color.g,this.color.b);m.h=f,m.s=p;var g=s.HSVToRGB(m.h,m.s,m.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();t["default"]=l},function(e,t,i){i(20),t.onTouch=function(e,t){t.inputHandler=function(e){e.isFirst&&t(e)},e.on("hammer.input",t.inputHandler)},t.onRelease=function(e,t){return t.inputHandler=function(e){e.isFinal&&t(e)},e.on("hammer.input",t.inputHandler)},t.offTouch=function(e,t){e.off("hammer.input",t.inputHandler)},t.offRelease=t.offTouch,t.disablePreventDefaultVertically=function(e){var t="pan-y";return e.getTouchAction=function(){return[t]},e}},function(e,t,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(1),s=!1,l=void 0,h="background: #FFeeee; color: #dd0000",c=function(){function e(){r(this,e)}return o(e,null,[{key:"validate",value:function(t,i,r){s=!1,l=i;var n=i;return void 0!==r&&(n=i[r]),e.parse(t,n,[]),s}},{key:"parse",value:function(t,i,r){for(var n in t)t.hasOwnProperty(n)&&e.check(n,t,i,r)}},{key:"check",value:function(t,i,r,n){void 0===r[t]&&void 0===r.__any__?e.getSuggestion(t,r,n):void 0===r[t]&&void 0!==r.__any__?"object"===e.getType(i[t])&&void 0!==r.__any__.__type__?e.checkFields(t,i,r,"__any__",r.__any__.__type__,n):e.checkFields(t,i,r,"__any__",r.__any__,n):void 0!==r[t].__type__?e.checkFields(t,i,r,t,r[t].__type__,n):e.checkFields(t,i,r,t,r[t],n)}},{key:"checkFields",value:function(t,i,r,n,o,l){var c=e.getType(i[t]),d=o[c];void 0!==d?"array"===e.getType(d)&&-1===d.indexOf(i[t])?(console.log('%cInvalid option detected in "'+t+'". Allowed values are:'+e.print(d)+' not "'+i[t]+'". '+e.printLocation(l,t),h),s=!0):"object"===c&&"__any__"!==n&&(l=a.copyAndExtendArray(l,t),e.parse(i[t],r[n],l)):void 0===o.any&&(console.log('%cInvalid type received for "'+t+'". Expected: '+e.print(Object.keys(o))+". Received ["+c+'] "'+i[t]+'"'+e.printLocation(l,t),h),s=!0)}},{key:"getType",value:function(e){var t="undefined"==typeof e?"undefined":n(e);return"object"===t?null===e?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"array":e instanceof Date?"date":void 0!==e.nodeType?"dom":e._isAMomentObject===!0?"moment":"object":"number"===t?"number":"boolean"===t?"boolean":"string"===t?"string":void 0===t?"undefined":t}},{key:"getSuggestion",value:function(t,i,r){var n=e.findInOptions(t,i,r,!1),o=e.findInOptions(t,l,[],!0),a=8,c=4;void 0!==n.indexMatch?console.log('%cUnknown option detected: "'+t+'" in '+e.printLocation(n.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+n.indexMatch+'"?\n\n',h):o.distance<=c&&n.distance>o.distance?console.log('%cUnknown option detected: "'+t+'" in '+e.printLocation(n.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""),h):n.distance<=a?console.log('%cUnknown option detected: "'+t+'". Did you mean "'+n.closestMatch+'"?'+e.printLocation(n.path,t),h):console.log('%cUnknown option detected: "'+t+'". Did you mean one of these: '+e.print(Object.keys(i))+e.printLocation(r,t),h),s=!0}},{key:"findInOptions",value:function(t,i,r){var n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],o=1e9,s="",l=[],h=t.toLowerCase(),c=void 0;for(var d in i){var u=void 0;if(void 0!==i[d].__type__&&n===!0){var f=e.findInOptions(t,i[d],a.copyAndExtendArray(r,d));o>f.distance&&(s=f.closestMatch,l=f.path,o=f.distance,c=f.indexMatch)}else-1!==d.toLowerCase().indexOf(h)&&(c=d),u=e.levenshteinDistance(t,d),o>u&&(s=d,l=a.copyArray(r),o=u)}return{closestMatch:s,path:l,distance:o,indexMatch:c}}},{key:"printLocation",value:function(e,t){for(var i=arguments.length<=2||void 0===arguments[2]?"Problem value found at: \n":arguments[2],r="\n\n"+i+"options = {\n",n=0;n<e.length;n++){for(var o=0;n+1>o;o++)r+="  ";r+=e[n]+": {\n"}for(var a=0;a<e.length+1;a++)r+="  ";r+=t+"\n";for(var s=0;s<e.length+1;s++){for(var l=0;l<e.length-s;l++)r+="  ";r+="}\n"}return r+"\n\n"}},{key:"print",value:function(e){return JSON.stringify(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;var i,r=[];for(i=0;i<=t.length;i++)r[i]=[i];var n;for(n=0;n<=e.length;n++)r[0][n]=n;for(i=1;i<=t.length;i++)for(n=1;n<=e.length;n++)t.charAt(i-1)==e.charAt(n-1)?r[i][n]=r[i-1][n-1]:r[i][n]=Math.min(r[i-1][n-1]+1,Math.min(r[i][n-1]+1,r[i-1][n]+1));return r[t.length][e.length]}}]),e}();t["default"]=c,t.printStyle=h},function(e,t,i){function r(e,t){var i=s().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=i.clone().add(-3,"days").valueOf(),this.end=i.clone().add(4,"days").valueOf(),this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:s,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10},this.options=a.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.setOptions(t)}function n(e){if("horizontal"!=e&&"vertical"!=e)throw new TypeError('Unknown direction "'+e+'". Choose "horizontal" or "vertical".')}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=i(1),s=(i(28),i(2)),l=i(31),h=i(32);r.prototype=new l,r.prototype.setOptions=function(e){if(e){var t=["direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","rtl"];a.selectiveExtend(t,this.options,e),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}},r.prototype.setRange=function(e,t,i,r){r!==!0&&(r=!1);var n=void 0!=e?a.convert(e,"Date").valueOf():null,s=void 0!=t?a.convert(t,"Date").valueOf():null;if(this._cancelAnimation(),i){var l=this,c=this.start,d=this.end,u="object"===("undefined"==typeof i?"undefined":o(i))&&"duration"in i?i.duration:500,f="object"===("undefined"==typeof i?"undefined":o(i))&&"easingFunction"in i?i.easingFunction:"easeInOutQuad",p=a.easingFunctions[f];if(!p)throw new Error("Unknown easing function "+JSON.stringify(f)+". Choose from: "+Object.keys(a.easingFunctions).join(", "));var m=(new Date).valueOf(),g=!1,v=function b(){if(!l.props.touch.dragging){var e=(new Date).valueOf(),t=e-m,i=p(t/u),o=t>u,a=o||null===n?n:c+(n-c)*i,f=o||null===s?s:d+(s-d)*i;y=l._applyRange(a,f),h.updateHiddenDates(l.options.moment,l.body,l.options.hiddenDates),g=g||y,y&&l.body.emitter.emit("rangechange",{start:new Date(l.start),end:new Date(l.end),byUser:r}),o?g&&l.body.emitter.emit("rangechanged",{start:new Date(l.start),end:new Date(l.end),byUser:r}):l.animationTimer=setTimeout(b,20)}};return v()}var y=this._applyRange(n,s);if(h.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),y){var A={start:new Date(this.start),end:new Date(this.end),byUser:r};this.body.emitter.emit("rangechange",A),this.body.emitter.emit("rangechanged",A)}},r.prototype._cancelAnimation=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)},r.prototype._applyRange=function(e,t){var i,r=null!=e?a.convert(e,"Date").valueOf():this.start,n=null!=t?a.convert(t,"Date").valueOf():this.end,o=null!=this.options.max?a.convert(this.options.max,"Date").valueOf():null,s=null!=this.options.min?a.convert(this.options.min,"Date").valueOf():null;if(isNaN(r)||null===r)throw new Error('Invalid start "'+e+'"');if(isNaN(n)||null===n)throw new Error('Invalid end "'+t+'"');if(r>n&&(n=r),null!==s&&s>r&&(i=s-r,r+=i,n+=i,null!=o&&n>o&&(n=o)),null!==o&&n>o&&(i=n-o,r-=i,n-=i,null!=s&&s>r&&(r=s)),null!==this.options.zoomMin){var l=parseFloat(this.options.zoomMin);0>l&&(l=0),l>n-r&&(this.end-this.start===l&&r>this.start&&n<this.end?(r=this.start,n=this.end):(i=l-(n-r),r-=i/2,n+=i/2))}if(null!==this.options.zoomMax){var h=parseFloat(this.options.zoomMax);0>h&&(h=0),n-r>h&&(this.end-this.start===h&&r<this.start&&n>this.end?(r=this.start,n=this.end):(i=n-r-h,r+=i/2,n-=i/2))}var c=this.start!=r||this.end!=n;return r>=this.start&&r<=this.end||n>=this.start&&n<=this.end||this.start>=r&&this.start<=n||this.end>=r&&this.end<=n||this.body.emitter.emit("checkRangedItems"),this.start=r,this.end=n,c},r.prototype.getRange=function(){return{start:this.start,end:this.end}},r.prototype.conversion=function(e,t){return r.conversion(this.start,this.end,e,t)},r.conversion=function(e,t,i,r){return void 0===r&&(r=0),0!=i&&t-e!=0?{offset:e,scale:i/(t-e-r)}:{offset:0,scale:1}},r.prototype._onDragStart=function(e){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(e)&&this.props.touch.allowDragging&&(this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))},r.prototype._onDrag=function(e){if(this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var t=this.options.direction;n(t);var i="horizontal"==t?e.deltaX:e.deltaY;i-=this.deltaDifference;var r=this.props.touch.end-this.props.touch.start,o=h.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);r-=o;var a="horizontal"==t?this.body.domProps.center.width:this.body.domProps.center.height;if(this.options.rtl)var s=i/a*r;else var s=-i/a*r;var l=this.props.touch.start+s,c=this.props.touch.end+s,d=h.snapAwayFromHidden(this.body.hiddenDates,l,this.previousDelta-i,!0),u=h.snapAwayFromHidden(this.body.hiddenDates,c,this.previousDelta-i,!0);if(d!=l||u!=c)return this.deltaDifference+=i,this.props.touch.start=d,this.props.touch.end=u,void this._onDrag(e);this.previousDelta=i,this._applyRange(l,c);var f=new Date(this.start),p=new Date(this.end);this.body.emitter.emit("rangechange",{start:f,end:p,byUser:!0})}},r.prototype._onDragEnd=function(e){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0}))},r.prototype._onMouseWheel=function(e){if(this.options.zoomable&&this.options.moveable&&this._isInsideRange(e)&&(!this.options.zoomKey||e[this.options.zoomKey])){var t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t){var i;i=0>t?1-t/5:1/(1+t/5);var r=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center),n=this._pointerToDate(r);this.zoom(i,n,t)}e.preventDefault()}},r.prototype._onTouch=function(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.scaleOffset=0,this.deltaDifference=0},r.prototype._onPinch=function(e){if(this.options.zoomable&&this.options.moveable){this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(e.center,this.body.dom.center));var t=1/(e.scale+this.scaleOffset),i=this._pointerToDate(this.props.touch.center),r=h.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),n=h.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,i),o=r-n,a=i-n+(this.props.touch.start-(i-n))*t,s=i+o+(this.props.touch.end-(i+o))*t;this.startToFront=0>=1-t,this.endToFront=0>=t-1;var l=h.snapAwayFromHidden(this.body.hiddenDates,a,1-t,!0),c=h.snapAwayFromHidden(this.body.hiddenDates,s,t-1,!0);l==a&&c==s||(this.props.touch.start=l,this.props.touch.end=c,this.scaleOffset=1-e.scale,a=l,s=c),this.setRange(a,s,!1,!0),this.startToFront=!1,this.endToFront=!0}},r.prototype._isInsideRange=function(e){var t=e.center?e.center.x:e.clientX;if(this.options.rtl)var i=t-a.getAbsoluteLeft(this.body.dom.centerContainer);else var i=a.getAbsoluteRight(this.body.dom.centerContainer)-t;var r=this.body.util.toTime(i);return r>=this.start&&r<=this.end},r.prototype._pointerToDate=function(e){var t,i=this.options.direction;if(n(i),"horizontal"==i)return this.body.util.toTime(e.x).valueOf();var r=this.body.domProps.center.height;return t=this.conversion(r),e.y/t.scale+t.offset},r.prototype.getPointer=function(e,t){return this.options.rtl?{x:a.getAbsoluteRight(t)-e.x,y:e.y-a.getAbsoluteTop(t)}:{x:e.x-a.getAbsoluteLeft(t),y:e.y-a.getAbsoluteTop(t)}},r.prototype.zoom=function(e,t,i){null==t&&(t=(this.start+this.end)/2);var r=h.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),n=h.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,t),o=r-n,a=t-n+(this.start-(t-n))*e,s=t+o+(this.end-(t+o))*e;this.startToFront=!(i>0),this.endToFront=!(-i>0);var l=h.snapAwayFromHidden(this.body.hiddenDates,a,i,!0),c=h.snapAwayFromHidden(this.body.hiddenDates,s,-i,!0);l==a&&c==s||(a=l,s=c),this.setRange(a,s,!1,!0),this.startToFront=!1,this.endToFront=!0},r.prototype.move=function(e){var t=this.end-this.start,i=this.start+t*e,r=this.end+t*e;this.start=i,this.end=r},r.prototype.moveTo=function(e){var t=(this.start+this.end)/2,i=t-e,r=this.start-i,n=this.end-i;this.setRange(r,n)},e.exports=r},function(e,t){function i(e,t){this.options=null,this.props=null}i.prototype.setOptions=function(e){e&&util.extend(this.options,e)},i.prototype.redraw=function(){return!1},i.prototype.destroy=function(){},i.prototype._isResized=function(){var e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e},e.exports=i},function(e,t){t.convertHiddenOptions=function(e,i,r){if(r&&!Array.isArray(r))return t.convertHiddenOptions(e,i,[r]);if(i.hiddenDates=[],r&&1==Array.isArray(r)){for(var n=0;n<r.length;n++)if(void 0===r[n].repeat){var o={};o.start=e(r[n].start).toDate().valueOf(),o.end=e(r[n].end).toDate().valueOf(),i.hiddenDates.push(o)}i.hiddenDates.sort(function(e,t){return e.start-t.start})}},t.updateHiddenDates=function(e,i,r){if(r&&!Array.isArray(r))return t.updateHiddenDates(e,i,[r]);if(r&&void 0!==i.domProps.centerContainer.width){t.convertHiddenOptions(e,i,r);for(var n=e(i.range.start),o=e(i.range.end),a=i.range.end-i.range.start,s=a/i.domProps.centerContainer.width,l=0;l<r.length;l++)if(void 0!==r[l].repeat){var h=e(r[l].start),c=e(r[l].end);if("Invalid Date"==h._d)throw new Error("Supplied start date is not valid: "+r[l].start);if("Invalid Date"==c._d)throw new Error("Supplied end date is not valid: "+r[l].end);var d=c-h;if(d>=4*s){var u=0,f=o.clone();switch(r[l].repeat){case"daily":h.day()!=c.day()&&(u=1),h.dayOfYear(n.dayOfYear()),h.year(n.year()),h.subtract(7,"days"),c.dayOfYear(n.dayOfYear()),c.year(n.year()),c.subtract(7-u,"days"),f.add(1,"weeks");break;case"weekly":var p=c.diff(h,"days"),m=h.day();h.date(n.date()),h.month(n.month()),h.year(n.year()),c=h.clone(),h.day(m),c.day(m),c.add(p,"days"),h.subtract(1,"weeks"),c.subtract(1,"weeks"),f.add(1,"weeks");break;case"monthly":h.month()!=c.month()&&(u=1),h.month(n.month()),h.year(n.year()),h.subtract(1,"months"),c.month(n.month()),c.year(n.year()),c.subtract(1,"months"),c.add(u,"months"),f.add(1,"months");break;case"yearly":h.year()!=c.year()&&(u=1),h.year(n.year()),h.subtract(1,"years"),c.year(n.year()),c.subtract(1,"years"),c.add(u,"years"),f.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",r[l].repeat)}for(;f>h;)switch(i.hiddenDates.push({start:h.valueOf(),end:c.valueOf()}),r[l].repeat){case"daily":h.add(1,"days"),c.add(1,"days");break;case"weekly":h.add(1,"weeks"),c.add(1,"weeks");break;case"monthly":h.add(1,"months"),c.add(1,"months");break;case"yearly":h.add(1,"y"),c.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",r[l].repeat)}i.hiddenDates.push({start:h.valueOf(),end:c.valueOf()})}}t.removeDuplicates(i);var g=t.isHidden(i.range.start,i.hiddenDates),v=t.isHidden(i.range.end,i.hiddenDates),y=i.range.start,A=i.range.end;1==g.hidden&&(y=1==i.range.startToFront?g.startDate-1:g.endDate+1),1==v.hidden&&(A=1==i.range.endToFront?v.startDate-1:v.endDate+1),1!=g.hidden&&1!=v.hidden||i.range._applyRange(y,A)}},t.removeDuplicates=function(e){for(var t=e.hiddenDates,i=[],r=0;r<t.length;r++)for(var n=0;n<t.length;n++)r!=n&&1!=t[n].remove&&1!=t[r].remove&&(t[n].start>=t[r].start&&t[n].end<=t[r].end?t[n].remove=!0:t[n].start>=t[r].start&&t[n].start<=t[r].end?(t[r].end=t[n].end,t[n].remove=!0):t[n].end>=t[r].start&&t[n].end<=t[r].end&&(t[r].start=t[n].start,t[n].remove=!0));for(var r=0;r<t.length;r++)t[r].remove!==!0&&i.push(t[r]);e.hiddenDates=i,e.hiddenDates.sort(function(e,t){return e.start-t.start})},t.printDates=function(e){for(var t=0;t<e.length;t++)console.log(t,new Date(e[t].start),new Date(e[t].end),e[t].start,e[t].end,e[t].remove)},t.stepOverHiddenDates=function(e,t,i){for(var r=!1,n=t.current.valueOf(),o=0;o<t.hiddenDates.length;o++){var a=t.hiddenDates[o].start,s=t.hiddenDates[o].end;if(n>=a&&s>n){r=!0;break}}if(1==r&&n<t._end.valueOf()&&n!=i){var l=e(i),h=e(s);l.year()!=h.year()?t.switchedYear=!0:l.month()!=h.month()?t.switchedMonth=!0:l.dayOfYear()!=h.dayOfYear()&&(t.switchedDay=!0),t.current=h}},t.toScreen=function(e,i,r){if(0==e.body.hiddenDates.length){var n=e.range.conversion(r);return(i.valueOf()-n.offset)*n.scale}var o=t.isHidden(i,e.body.hiddenDates);1==o.hidden&&(i=o.startDate);var a=t.getHiddenDurationBetween(e.body.hiddenDates,e.range.start,e.range.end);i=t.correctTimeForHidden(e.options.moment,e.body.hiddenDates,e.range,i);var n=e.range.conversion(r,a);return(i.valueOf()-n.offset)*n.scale},t.toTime=function(e,i,r){if(0==e.body.hiddenDates.length){var n=e.range.conversion(r);return new Date(i/n.scale+n.offset)}var o=t.getHiddenDurationBetween(e.body.hiddenDates,e.range.start,e.range.end),a=e.range.end-e.range.start-o,s=a*i/r,l=t.getAccumulatedHiddenDuration(e.body.hiddenDates,e.range,s),h=new Date(l+s+e.range.start);return h},t.getHiddenDurationBetween=function(e,t,i){for(var r=0,n=0;n<e.length;n++){var o=e[n].start,a=e[n].end;o>=t&&i>a&&(r+=a-o)}return r},t.correctTimeForHidden=function(e,i,r,n){return n=e(n).toDate().valueOf(),n-=t.getHiddenDurationBefore(e,i,r,n)},t.getHiddenDurationBefore=function(e,t,i,r){var n=0;r=e(r).toDate().valueOf();for(var o=0;o<t.length;o++){var a=t[o].start,s=t[o].end;a>=i.start&&s<i.end&&r>=s&&(n+=s-a)}return n},t.getAccumulatedHiddenDuration=function(e,t,i){for(var r=0,n=0,o=t.start,a=0;a<e.length;a++){var s=e[a].start,l=e[a].end;if(s>=t.start&&l<t.end){if(n+=s-o,o=l,n>=i)break;r+=l-s}}return r},t.snapAwayFromHidden=function(e,i,r,n){var o=t.isHidden(i,e);return 1==o.hidden?0>r?1==n?o.startDate-(o.endDate-i)-1:o.startDate-1:1==n?o.endDate+(i-o.startDate)+1:o.endDate+1:i},t.isHidden=function(e,t){for(var i=0;i<t.length;i++){var r=t[i].start,n=t[i].end;if(e>=r&&n>e)return{hidden:!0,startDate:r,endDate:n}}return{hidden:!1,startDate:r,endDate:n}}},function(e,t,i){function r(){}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=i(13),a=i(20),s=i(28),l=i(1),h=(i(9),i(11),i(30),i(34),i(44)),c=i(45),d=i(32),u=i(46);o(r.prototype),r.prototype._create=function(e){function t(e){i.isActive()&&i.emit("mousewheel",e)}this.dom={},this.dom.container=e,this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",
this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.on("rangechange",function(){this.initialDrawDone===!0&&this._redraw()}.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("pan",this._onDrag.bind(this));var i=this;this.on("_change",function(e){e&&1==e.queue?i._redrawTimer||(i._redrawTimer=setTimeout(function(){i._redrawTimer=null,i._redraw()},0)):i._redraw()}),this.hammer=new a(this.dom.root);var r=this.hammer.get("pinch").set({enable:!0});s.disablePreventDefaultVertically(r),this.hammer.get("pan").set({threshold:5,direction:a.DIRECTION_HORIZONTAL}),this.listeners={};var n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];if(n.forEach(function(e){var t=function(t){i.isActive()&&i.emit(e,t)};i.hammer.on(e,t),i.listeners[e]=t}),s.onTouch(this.hammer,function(e){i.emit("touch",e)}.bind(this)),s.onRelease(this.hammer,function(e){i.emit("release",e)}.bind(this)),this.dom.root.addEventListener("mousewheel",t),this.dom.root.addEventListener("DOMMouseScroll",t),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root)},r.prototype.setOptions=function(e){if(e){var t=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","rtl","throttleRedraw"];if(l.selectiveExtend(t,this.options,e),this.options.rtl){var i=this.dom.leftContainer;this.dom.leftContainer=this.dom.rightContainer,this.dom.rightContainer=i,this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"}if(this.options.orientation={item:void 0,axis:void 0},"orientation"in e&&("string"==typeof e.orientation?this.options.orientation={item:e.orientation,axis:e.orientation}:"object"===n(e.orientation)&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),"both"===this.options.orientation.axis){if(!this.timeAxis2){var r=this.timeAxis2=new h(this.body);r.setOptions=function(e){var t=e?l.extend({},e):{};t.orientation="top",h.prototype.setOptions.call(r,t)},this.components.push(r)}}else if(this.timeAxis2){var o=this.components.indexOf(this.timeAxis2);-1!==o&&this.components.splice(o,1),this.timeAxis2.destroy(),this.timeAxis2=null}if("function"==typeof e.drawPoints&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&d.convertHiddenOptions(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new c(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),"showCustomTime"in e)throw new Error("Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])");this._initAutoResize()}if(this.components.forEach(function(t){return t.setOptions(e)}),"configure"in e){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);var a=l.deepExtend({},this.options);this.components.forEach(function(e){l.deepExtend(a,e.options)}),this.configurator.setModuleOptions({global:a})}this._origRedraw?this._redraw():(this._origRedraw=this._redraw.bind(this),this._redraw=l.throttle(this._origRedraw,this.options.throttleRedraw))},r.prototype.isActive=function(){return!this.activator||this.activator.active},r.prototype.destroy=function(){this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var e in this.listeners)this.listeners.hasOwnProperty(e)&&delete this.listeners[e];this.listeners=null,this.hammer=null,this.components.forEach(function(e){return e.destroy()}),this.body=null},r.prototype.setCustomTime=function(e,t){var i=this.customTimes.filter(function(e){return t===e.options.id});if(0===i.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));i.length>0&&i[0].setCustomTime(e)},r.prototype.getCustomTime=function(e){var t=this.customTimes.filter(function(t){return t.options.id===e});if(0===t.length)throw new Error("No custom time bar found with id "+JSON.stringify(e));return t[0].getCustomTime()},r.prototype.setCustomTimeTitle=function(e,t){var i=this.customTimes.filter(function(e){return e.options.id===t});if(0===i.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));return i.length>0?i[0].setCustomTitle(e):void 0},r.prototype.getEventProperties=function(e){return{event:e}},r.prototype.addCustomTime=function(e,t){var i=void 0!==e?l.convert(e,"Date").valueOf():new Date,r=this.customTimes.some(function(e){return e.options.id===t});if(r)throw new Error("A custom time with id "+JSON.stringify(t)+" already exists");var n=new u(this.body,l.extend({},this.options,{time:i,id:t}));return this.customTimes.push(n),this.components.push(n),this._redraw(),t},r.prototype.removeCustomTime=function(e){var t=this.customTimes.filter(function(t){return t.options.id===e});if(0===t.length)throw new Error("No custom time bar found with id "+JSON.stringify(e));t.forEach(function(e){this.customTimes.splice(this.customTimes.indexOf(e),1),this.components.splice(this.components.indexOf(e),1),e.destroy()}.bind(this))},r.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},r.prototype.fit=function(e){var t=this.getDataRange();if(null!==t.min||null!==t.max){var i=t.max-t.min,r=new Date(t.min.valueOf()-.01*i),n=new Date(t.max.valueOf()+.01*i),o=e&&void 0!==e.animation?e.animation:!0;this.range.setRange(r,n,o)}},r.prototype.getDataRange=function(){throw new Error("Cannot invoke abstract method getDataRange")},r.prototype.setWindow=function(e,t,i){var r;if(1==arguments.length){var n=arguments[0];r=void 0!==n.animation?n.animation:!0,this.range.setRange(n.start,n.end,r)}else r=i&&void 0!==i.animation?i.animation:!0,this.range.setRange(e,t,r)},r.prototype.moveTo=function(e,t){var i=this.range.end-this.range.start,r=l.convert(e,"Date").valueOf(),n=r-i/2,o=r+i/2,a=t&&void 0!==t.animation?t.animation:!0;this.range.setRange(n,o,a)},r.prototype.getWindow=function(){var e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}},r.prototype.redraw=function(){this._redraw()},r.prototype._redraw=function(){this.redrawCount++;var e=!1,t=this.options,i=this.props,r=this.dom;if(r&&r.container&&0!=r.root.offsetWidth){d.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),"top"==t.orientation?(l.addClassName(r.root,"vis-top"),l.removeClassName(r.root,"vis-bottom")):(l.removeClassName(r.root,"vis-top"),l.addClassName(r.root,"vis-bottom")),r.root.style.maxHeight=l.option.asSize(t.maxHeight,""),r.root.style.minHeight=l.option.asSize(t.minHeight,""),r.root.style.width=l.option.asSize(t.width,""),i.border.left=(r.centerContainer.offsetWidth-r.centerContainer.clientWidth)/2,i.border.right=i.border.left,i.border.top=(r.centerContainer.offsetHeight-r.centerContainer.clientHeight)/2,i.border.bottom=i.border.top;var n=r.root.offsetHeight-r.root.clientHeight,o=r.root.offsetWidth-r.root.clientWidth;0===r.centerContainer.clientHeight&&(i.border.left=i.border.top,i.border.right=i.border.left),0===r.root.clientHeight&&(o=n),i.center.height=r.center.offsetHeight,i.left.height=r.left.offsetHeight,i.right.height=r.right.offsetHeight,i.top.height=r.top.clientHeight||-i.border.top,i.bottom.height=r.bottom.clientHeight||-i.border.bottom;var s=Math.max(i.left.height,i.center.height,i.right.height),h=i.top.height+s+i.bottom.height+n+i.border.top+i.border.bottom;r.root.style.height=l.option.asSize(t.height,h+"px"),i.root.height=r.root.offsetHeight,i.background.height=i.root.height-n;var c=i.root.height-i.top.height-i.bottom.height-n;i.centerContainer.height=c,i.leftContainer.height=c,i.rightContainer.height=i.leftContainer.height,i.root.width=r.root.offsetWidth,i.background.width=i.root.width-o,i.left.width=r.leftContainer.clientWidth||-i.border.left,i.leftContainer.width=i.left.width,i.right.width=r.rightContainer.clientWidth||-i.border.right,i.rightContainer.width=i.right.width;var u=i.root.width-i.left.width-i.right.width-o;i.center.width=u,i.centerContainer.width=u,i.top.width=u,i.bottom.width=u,r.background.style.height=i.background.height+"px",r.backgroundVertical.style.height=i.background.height+"px",r.backgroundHorizontal.style.height=i.centerContainer.height+"px",r.centerContainer.style.height=i.centerContainer.height+"px",r.leftContainer.style.height=i.leftContainer.height+"px",r.rightContainer.style.height=i.rightContainer.height+"px",r.background.style.width=i.background.width+"px",r.backgroundVertical.style.width=i.centerContainer.width+"px",r.backgroundHorizontal.style.width=i.background.width+"px",r.centerContainer.style.width=i.center.width+"px",r.top.style.width=i.top.width+"px",r.bottom.style.width=i.bottom.width+"px",r.background.style.left="0",r.background.style.top="0",r.backgroundVertical.style.left=i.left.width+i.border.left+"px",r.backgroundVertical.style.top="0",r.backgroundHorizontal.style.left="0",r.backgroundHorizontal.style.top=i.top.height+"px",r.centerContainer.style.left=i.left.width+"px",r.centerContainer.style.top=i.top.height+"px",r.leftContainer.style.left="0",r.leftContainer.style.top=i.top.height+"px",r.rightContainer.style.left=i.left.width+i.center.width+"px",r.rightContainer.style.top=i.top.height+"px",r.top.style.left=i.left.width+"px",r.top.style.top="0",r.bottom.style.left=i.left.width+"px",r.bottom.style.top=i.top.height+i.centerContainer.height+"px",this._updateScrollTop();var f=this.props.scrollTop;"top"!=t.orientation.item&&(f+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)),r.center.style.left="0",r.center.style.top=f+"px",r.left.style.left="0",r.left.style.top=f+"px",r.right.style.left="0",r.right.style.top=f+"px";var p=0==this.props.scrollTop?"hidden":"",m=this.props.scrollTop==this.props.scrollTopMin?"hidden":"";r.shadowTop.style.visibility=p,r.shadowBottom.style.visibility=m,r.shadowTopLeft.style.visibility=p,r.shadowBottomLeft.style.visibility=m,r.shadowTopRight.style.visibility=p,r.shadowBottomRight.style.visibility=m;var g=this.props.center.height>this.props.centerContainer.height;this.hammer.get("pan").set({direction:g?a.DIRECTION_ALL:a.DIRECTION_HORIZONTAL}),this.components.forEach(function(t){e=t.redraw()||e});var v=5;if(e){if(this.redrawCount<v)return void this.body.emitter.emit("_change");console.log("WARNING: infinite loop in redraw?")}else this.redrawCount=0;this.initialDrawDone=!0,this.body.emitter.emit("changed")}},r.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},r.prototype.setCurrentTime=function(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)},r.prototype.getCurrentTime=function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()},r.prototype._toTime=function(e){return d.toTime(this,e,this.props.center.width)},r.prototype._toGlobalTime=function(e){return d.toTime(this,e,this.props.root.width)},r.prototype._toScreen=function(e){return d.toScreen(this,e,this.props.center.width)},r.prototype._toGlobalScreen=function(e){return d.toScreen(this,e,this.props.root.width)},r.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},r.prototype._startAutoResize=function(){var e=this;this._stopAutoResize(),this._onResize=function(){return 1!=e.options.autoResize?void e._stopAutoResize():void(e.dom.root&&(e.dom.root.offsetWidth==e.props.lastWidth&&e.dom.root.offsetHeight==e.props.lastHeight||(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight,e.body.emitter.emit("_change"))))},l.addEventListener(window,"resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)},r.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(l.removeEventListener(window,"resize",this._onResize),this._onResize=null)},r.prototype._onTouch=function(e){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop},r.prototype._onPinch=function(e){this.touch.allowDragging=!1},r.prototype._onDrag=function(e){if(this.touch.allowDragging){var t=e.deltaY,i=this._getScrollTop(),r=this._setScrollTop(this.touch.initialScrollTop+t);r!=i&&this.emit("verticalDrag")}},r.prototype._setScrollTop=function(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop},r.prototype._updateScrollTop=function(){var e=Math.min(this.props.centerContainer.height-this.props.center.height,0);return e!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.props.scrollTop},r.prototype._getScrollTop=function(){return this.props.scrollTop},r.prototype._createConfigurator=function(){throw new Error("Cannot invoke abstract method _createConfigurator")},e.exports=r},function(e,t,i){function r(e,t){this.body=e,this.defaultOptions={rtl:!1,type:null,orientation:{item:"bottom"},align:"auto",stack:!0,groupOrderSwap:function(e,t,i){var r=t.order;t.order=e.order,e.order=r},groupOrder:"order",selectable:!0,multiselect:!1,itemsAlwaysDraggable:!1,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:h.snap,onAdd:function(e,t){t(e)},onUpdate:function(e,t){t(e)},onMove:function(e,t){t(e)},onRemove:function(e,t){t(e)},onMoving:function(e,t){t(e)},onAddGroup:function(e,t){t(e)},onMoveGroup:function(e,t){t(e)},onRemoveGroup:function(e,t){t(e)},margin:{item:{horizontal:10,vertical:10},axis:20}},this.options=a.extend({},this.defaultOptions),this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(e,t,r){i._onAdd(t.items)},update:function(e,t,r){i._onUpdate(t.items)},remove:function(e,t,r){i._onRemove(t.items)}},this.groupListeners={add:function(e,t,r){i._onAddGroups(t.items)},update:function(e,t,r){i._onUpdateGroups(t.items)},remove:function(e,t,r){i._onRemoveGroups(t.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.stackDirty=!0,this.touchParams={},this.groupTouchParams={},this._create(),this.setOptions(t)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=i(20),a=i(1),s=i(9),l=i(11),h=i(35),c=i(31),d=i(36),u=i(40),f=i(41),p=i(42),m=i(38),g=i(43),v="__ungrouped__",y="__background__";r.prototype=new c,r.types={background:g,box:f,range:m,point:p},r.prototype._create=function(){var e=document.createElement("div");e.className="vis-itemset",e["timeline-itemset"]=this,this.dom.frame=e;var t=document.createElement("div");t.className="vis-background",e.appendChild(t),this.dom.background=t;var i=document.createElement("div");i.className="vis-foreground",e.appendChild(i),this.dom.foreground=i;var r=document.createElement("div");r.className="vis-axis",this.dom.axis=r;var n=document.createElement("div");n.className="vis-labelset",this.dom.labelSet=n,this._updateUngrouped();var a=new u(y,null,this);a.show(),this.groups[y]=a,this.hammer=new o(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(e){e.isFirst&&this._onTouch(e)}.bind(this)),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:o.DIRECTION_HORIZONTAL}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.groupHammer=new o(this.body.dom.leftContainer),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:o.DIRECTION_HORIZONTAL}),this.show()},r.prototype.setOptions=function(e){if(e){var t=["type","rtl","align","order","stack","selectable","multiselect","itemsAlwaysDraggable","multiselectPerGroup","groupOrder","dataAttributes","template","groupTemplate","hide","snap","groupOrderSwap"];a.selectiveExtend(t,this.options,e),"orientation"in e&&("string"==typeof e.orientation?this.options.orientation.item="top"===e.orientation?"top":"bottom":"object"===n(e.orientation)&&"item"in e.orientation&&(this.options.orientation.item=e.orientation.item)),"margin"in e&&("number"==typeof e.margin?(this.options.margin.axis=e.margin,this.options.margin.item.horizontal=e.margin,this.options.margin.item.vertical=e.margin):"object"===n(e.margin)&&(a.selectiveExtend(["axis"],this.options.margin,e.margin),"item"in e.margin&&("number"==typeof e.margin.item?(this.options.margin.item.horizontal=e.margin.item,this.options.margin.item.vertical=e.margin.item):"object"===n(e.margin.item)&&a.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)))),"editable"in e&&("boolean"==typeof e.editable?(this.options.editable.updateTime=e.editable,this.options.editable.updateGroup=e.editable,this.options.editable.add=e.editable,this.options.editable.remove=e.editable):"object"===n(e.editable)&&a.selectiveExtend(["updateTime","updateGroup","add","remove"],this.options.editable,e.editable)),"groupEditable"in e&&("boolean"==typeof e.groupEditable?(this.options.groupEditable.order=e.groupEditable,this.options.groupEditable.add=e.groupEditable,this.options.groupEditable.remove=e.groupEditable):"object"===n(e.groupEditable)&&a.selectiveExtend(["order","add","remove"],this.options.groupEditable,e.groupEditable));var i=function(t){var i=e[t];if(i){if(!(i instanceof Function))throw new Error("option "+t+" must be a function "+t+"(item, callback)");this.options[t]=i}}.bind(this);["onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(i),this.markDirty()}},r.prototype.markDirty=function(e){this.groupIds=[],this.stackDirty=!0,e&&e.refreshItems&&a.forEach(this.items,function(e){e.dirty=!0,e.displayed&&e.redraw()})},r.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},r.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},r.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||this.body.dom.left.appendChild(this.dom.labelSet)},r.prototype.setSelection=function(e){var t,i,r,n;for(void 0==e&&(e=[]),Array.isArray(e)||(e=[e]),t=0,i=this.selection.length;i>t;t++)r=this.selection[t],n=this.items[r],n&&n.unselect();for(this.selection=[],t=0,i=e.length;i>t;t++)r=e[t],n=this.items[r],n&&(this.selection.push(r),n.select())},r.prototype.getSelection=function(){return this.selection.concat([])},r.prototype.getVisibleItems=function(){var e=this.body.range.getRange();if(this.options.rtl)var t=this.body.util.toScreen(e.start),i=this.body.util.toScreen(e.end);else var i=this.body.util.toScreen(e.start),t=this.body.util.toScreen(e.end);var r=[];for(var n in this.groups)if(this.groups.hasOwnProperty(n))for(var o=this.groups[n],a=o.visibleItems,s=0;s<a.length;s++){var l=a[s];this.options.rtl?l.right<i&&l.right+l.width>t&&r.push(l.id):l.left<t&&l.left+l.width>i&&r.push(l.id)}return r},r.prototype._deselect=function(e){for(var t=this.selection,i=0,r=t.length;r>i;i++)if(t[i]==e){t.splice(i,1);break}},r.prototype.redraw=function(){var e=this.options.margin,t=this.body.range,i=a.option.asSize,r=this.options,n=r.orientation.item,o=!1,s=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,s.className="vis-itemset",o=this._orderGroups()||o;var l=t.end-t.start,h=l!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth;h&&(this.stackDirty=!0),this.lastVisibleInterval=l,this.props.lastWidth=this.props.width;var c=this.stackDirty,d=this._firstGroup(),u={item:e.item,axis:e.axis},f={item:e.item,axis:e.item.vertical/2},p=0,m=e.axis+e.item.vertical;return this.groups[y].redraw(t,f,c),a.forEach(this.groups,function(e){var i=e==d?u:f,r=e.redraw(t,i,c);o=r||o,p+=e.height}),p=Math.max(p,m),this.stackDirty=!1,s.style.height=i(p),this.props.width=s.offsetWidth,this.props.height=p,this.dom.axis.style.top=i("top"==n?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",o=this._isResized()||o},r.prototype._firstGroup=function(){var e="top"==this.options.orientation.item?0:this.groupIds.length-1,t=this.groupIds[e],i=this.groups[t]||this.groups[v];return i||null},r.prototype._updateUngrouped=function(){var e,t,i=this.groups[v];if(this.groups[y],this.groupsData){if(i){i.hide(),delete this.groups[v];for(t in this.items)if(this.items.hasOwnProperty(t)){e=this.items[t],e.parent&&e.parent.remove(e);var r=this._getGroupId(e.data),n=this.groups[r];n&&n.add(e)||e.hide()}}}else if(!i){var o=null,a=null;i=new d(o,a,this),this.groups[v]=i;for(t in this.items)this.items.hasOwnProperty(t)&&(e=this.items[t],i.add(e));i.show()}},r.prototype.getLabelSet=function(){return this.dom.labelSet},r.prototype.setItems=function(e){var t,i=this,r=this.itemsData;if(e){if(!(e instanceof s||e instanceof l))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=e}else this.itemsData=null;if(r&&(a.forEach(this.itemListeners,function(e,t){r.off(t,e)}),t=r.getIds(),this._onRemove(t)),this.itemsData){var n=this.id;a.forEach(this.itemListeners,function(e,t){i.itemsData.on(t,e,n)}),t=this.itemsData.getIds(),this._onAdd(t),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})},r.prototype.getItems=function(){return this.itemsData},r.prototype.setGroups=function(e){var t,i=this;if(this.groupsData&&(a.forEach(this.groupListeners,function(e,t){i.groupsData.off(t,e)}),t=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(t)),e){if(!(e instanceof s||e instanceof l))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=e}else this.groupsData=null;if(this.groupsData){var r=this.id;a.forEach(this.groupListeners,function(e,t){i.groupsData.on(t,e,r)}),t=this.groupsData.getIds(),this._onAddGroups(t)}this._updateUngrouped(),this._order(),this.body.emitter.emit("_change",{queue:!0})},r.prototype.getGroups=function(){return this.groupsData},r.prototype.removeItem=function(e){var t=this.itemsData.get(e),i=this.itemsData.getDataSet();t&&this.options.onRemove(t,function(t){t&&i.remove(e)})},r.prototype._getType=function(e){return e.type||this.options.type||(e.end?"range":"box")},r.prototype._getGroupId=function(e){var t=this._getType(e);return"background"==t&&void 0==e.group?y:this.groupsData?e.group:v},r.prototype._onUpdate=function(e){var t=this;e.forEach(function(e){var i,n=t.itemsData.get(e,t.itemOptions),o=t.items[e],a=t._getType(n),s=r.types[a];if(o&&(s&&o instanceof s?t._updateItem(o,n):(i=o.selected,t._removeItem(o),o=null)),!o){if(!s)throw"rangeoverflow"==a?new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: .vis-item.vis-range .vis-item-content {overflow: visible;}'):new TypeError('Unknown item type "'+a+'"');o=new s(n,t.conversion,t.options),o.id=e,t._addItem(o),i&&(this.selection.push(e),o.select())}}.bind(this)),this._order(),this.stackDirty=!0,this.body.emitter.emit("_change",{queue:!0})},r.prototype._onAdd=r.prototype._onUpdate,r.prototype._onRemove=function(e){var t=0,i=this;e.forEach(function(e){var r=i.items[e];r&&(t++,i._removeItem(r))}),t&&(this._order(),this.stackDirty=!0,this.body.emitter.emit("_change",{queue:!0}))},r.prototype._order=function(){a.forEach(this.groups,function(e){e.order()})},r.prototype._onUpdateGroups=function(e){this._onAddGroups(e)},r.prototype._onAddGroups=function(e){var t=this;e.forEach(function(e){var i=t.groupsData.get(e),r=t.groups[e];if(r)r.setData(i);else{if(e==v||e==y)throw new Error("Illegal group id. "+e+" is a reserved id.");var n=Object.create(t.options);a.extend(n,{height:null}),r=new d(e,i,t),t.groups[e]=r;for(var o in t.items)if(t.items.hasOwnProperty(o)){var s=t.items[o];s.data.group==e&&r.add(s)}r.order(),r.show()}}),this.body.emitter.emit("_change",{queue:!0})},r.prototype._onRemoveGroups=function(e){var t=this.groups;e.forEach(function(e){var i=t[e];i&&(i.hide(),delete t[e])}),this.markDirty(),this.body.emitter.emit("_change",{queue:!0})},r.prototype._orderGroups=function(){if(this.groupsData){var e=this.groupsData.getIds({order:this.options.groupOrder}),t=!a.equalArray(e,this.groupIds);if(t){var i=this.groups;e.forEach(function(e){i[e].hide()}),e.forEach(function(e){i[e].show()}),this.groupIds=e}return t}return!1},r.prototype._addItem=function(e){this.items[e.id]=e;var t=this._getGroupId(e.data),i=this.groups[t];i&&i.add(e)},r.prototype._updateItem=function(e,t){var i=e.data.group,r=e.data.subgroup;if(e.setData(t),i!=e.data.group||r!=e.data.subgroup){var n=this.groups[i];n&&n.remove(e);var o=this._getGroupId(e.data),a=this.groups[o];a&&a.add(e)}},r.prototype._removeItem=function(e){e.hide(),delete this.items[e.id];var t=this.selection.indexOf(e.id);-1!=t&&this.selection.splice(t,1),e.parent&&e.parent.remove(e)},r.prototype._constructByEndArray=function(e){for(var t=[],i=0;i<e.length;i++)e[i]instanceof m&&t.push(e[i]);return t},r.prototype._onTouch=function(e){this.touchParams.item=this.itemFromTarget(e),this.touchParams.dragLeftItem=e.target.dragLeftItem||!1,this.touchParams.dragRightItem=e.target.dragRightItem||!1,this.touchParams.itemProps=null},r.prototype._getGroupIndex=function(e){for(var t=0;t<this.groupIds.length;t++)if(e==this.groupIds[t])return t},r.prototype._onDragStart=function(e){var t,i=this.touchParams.item||null,r=this;if(i&&(i.selected||this.options.itemsAlwaysDraggable)){if(!this.options.editable.updateTime&&!this.options.editable.updateGroup&&!i.editable)return;if(i.editable===!1)return;var n=this.touchParams.dragLeftItem,o=this.touchParams.dragRightItem;if(n)t={item:n,initialX:e.center.x,dragLeft:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[t];else if(o)t={item:o,initialX:e.center.x,dragRight:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[t];else{this.touchParams.selectedItem=i;var a=this._getGroupIndex(i.data.group),s=this.options.itemsAlwaysDraggable&&!i.selected?[i.id]:this.getSelection();this.touchParams.itemProps=s.map(function(t){var i=r.items[t],n=r._getGroupIndex(i.data.group);return{item:i,initialX:e.center.x,groupOffset:a-n,data:this._cloneItemData(i.data)}}.bind(this))}e.stopPropagation()}else this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey)&&this._onDragStartAddItem(e)},r.prototype._onDragStartAddItem=function(e){var t=this.options.snap||null;if(this.options.rtl)var i=a.getAbsoluteRight(this.dom.frame),r=i-e.center.x+10;else var i=a.getAbsoluteLeft(this.dom.frame),r=e.center.x-i-10;var n=this.body.util.toTime(r),o=this.body.util.getScale(),s=this.body.util.getStep(),l=t?t(n,o,s):n,h=l,c={type:"range",start:l,end:h,content:"new item"},d=a.randomUUID();c[this.itemsData._fieldId]=d;var u=this.groupFromTarget(e);u&&(c.group=u.groupId);var f=new m(c,this.conversion,this.options);f.id=d,f.data=this._cloneItemData(c),this._addItem(f);var p={item:f,initialX:e.center.x,data:f.data};this.options.rtl?p.dragLeft=!0:p.dragRight=!0,this.touchParams.itemProps=[p],e.stopPropagation()},r.prototype._onDrag=function(e){if(this.touchParams.itemProps){e.stopPropagation();var t=this,i=this.options.snap||null;if(this.options.rtl)var r=this.body.dom.root.offsetLeft+this.body.domProps.right.width;else var r=this.body.dom.root.offsetLeft+this.body.domProps.left.width;var n=this.body.util.getScale(),o=this.body.util.getStep(),s=this.touchParams.selectedItem,l=t.options.editable.updateGroup,h=null;if(l&&s&&void 0!=s.data.group){var c=t.groupFromTarget(e);c&&(h=this._getGroupIndex(c.groupId))}this.touchParams.itemProps.forEach(function(s){var l=t.body.util.toTime(e.center.x-r),c=t.body.util.toTime(s.initialX-r);if(this.options.rtl)var d=-(l-c);else var d=l-c;var u=this._cloneItemData(s.item.data);if(s.item.editable!==!1){var f=t.options.editable.updateTime||s.item.editable===!0;if(f)if(s.dragLeft){if(this.options.rtl){if(void 0!=u.end){var p=a.convert(s.data.end,"Date"),m=new Date(p.valueOf()+d);u.end=i?i(m,n,o):m}}else if(void 0!=u.start){var g=a.convert(s.data.start,"Date"),v=new Date(g.valueOf()+d);u.start=i?i(v,n,o):v}}else if(s.dragRight){if(this.options.rtl){if(void 0!=u.start){var g=a.convert(s.data.start,"Date"),v=new Date(g.valueOf()+d);u.start=i?i(v,n,o):v}}else if(void 0!=u.end){var p=a.convert(s.data.end,"Date"),m=new Date(p.valueOf()+d);u.end=i?i(m,n,o):m}}else if(void 0!=u.start){var g=a.convert(s.data.start,"Date").valueOf(),v=new Date(g+d);if(void 0!=u.end){var p=a.convert(s.data.end,"Date"),y=p.valueOf()-g.valueOf();u.start=i?i(v,n,o):v,u.end=new Date(u.start.valueOf()+y)}else u.start=i?i(v,n,o):v}var A=t.options.editable.updateGroup||s.item.editable===!0;if(A&&!s.dragLeft&&!s.dragRight&&null!=h&&void 0!=u.group){var b=h-s.groupOffset;b=Math.max(0,b),b=Math.min(t.groupIds.length-1,b),u.group=t.groupIds[b]}u=this._cloneItemData(u),t.options.onMoving(u,function(e){e&&s.item.setData(this._cloneItemData(e,"Date"))}.bind(this))}}.bind(this)),this.stackDirty=!0,this.body.emitter.emit("_change")}},r.prototype._moveToGroup=function(e,t){var i=this.groups[t];if(i&&i.groupId!=e.data.group){var r=e.parent;r.remove(e),r.order(),i.add(e),i.order(),e.data.group=i.groupId}},r.prototype._onDragEnd=function(e){if(this.touchParams.itemProps){e.stopPropagation();var t=this,i=this.itemsData.getDataSet(),r=this.touchParams.itemProps;this.touchParams.itemProps=null,
r.forEach(function(e){var r=e.item.id,n=null!=t.itemsData.get(r,t.itemOptions);if(n){var o=this._cloneItemData(e.item.data);t.options.onMove(o,function(n){n?(n[i._fieldId]=r,i.update(n)):(e.item.setData(e.data),t.stackDirty=!0,t.body.emitter.emit("_change"))})}else t.options.onAdd(e.item.data,function(i){t._removeItem(e.item),i&&t.itemsData.getDataSet().add(i),t.stackDirty=!0,t.body.emitter.emit("_change")})}.bind(this))}},r.prototype._onGroupDragStart=function(e){this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(e),this.groupTouchParams.group&&(e.stopPropagation(),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))},r.prototype._onGroupDrag=function(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();var t=this.groupFromTarget(e);if(t&&t.height!=this.groupTouchParams.group.height){var i=t.top<this.groupTouchParams.group.top,r=e.center?e.center.y:e.clientY,n=a.getAbsoluteTop(t.dom.foreground),o=this.groupTouchParams.group.height;if(i){if(r>n+o)return}else{var s=t.height;if(n+s-o>r)return}}if(t&&t!=this.groupTouchParams.group){var l=this.groupsData,h=l.get(t.groupId),c=l.get(this.groupTouchParams.group.groupId);c&&h&&(this.options.groupOrderSwap(c,h,this.groupsData),this.groupsData.update(c),this.groupsData.update(h));var d=this.groupsData.getIds({order:this.options.groupOrder});if(!a.equalArray(d,this.groupTouchParams.originalOrder))for(var l=this.groupsData,u=this.groupTouchParams.originalOrder,f=this.groupTouchParams.group.groupId,p=Math.min(u.length,d.length),m=0,g=0,v=0;p>m;){for(;p>m+g&&p>m+v&&d[m+g]==u[m+v];)m++;if(m+g>=p)break;if(d[m+g]!=f)if(u[m+v]!=f){var y=d.indexOf(u[m+v]),A=l.get(d[m+g]),b=l.get(u[m+v]);this.options.groupOrderSwap(A,b,l),l.update(A),l.update(b);var E=d[m+g];d[m+g]=u[m+v],d[y]=E,m++}else v=1;else g=1}}}},r.prototype._onGroupDragEnd=function(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();var t=this,i=t.groupTouchParams.group.groupId,r=t.groupsData.getDataSet(),n=a.extend({},r.get(i));t.options.onMoveGroup(n,function(e){if(e)e[r._fieldId]=i,r.update(e);else{var n=r.getIds({order:t.options.groupOrder});if(!a.equalArray(n,t.groupTouchParams.originalOrder))for(var o=t.groupTouchParams.originalOrder,s=Math.min(o.length,n.length),l=0;s>l;){for(;s>l&&n[l]==o[l];)l++;if(l>=s)break;var h=n.indexOf(o[l]),c=r.get(n[l]),d=r.get(o[l]);t.options.groupOrderSwap(c,d,r),groupsData.update(c),groupsData.update(d);var u=n[l];n[l]=o[l],n[h]=u,l++}}}),t.body.emitter.emit("groupDragged",{groupId:i})}},r.prototype._onSelectItem=function(e){if(this.options.selectable){var t=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey),i=e.srcEvent&&e.srcEvent.shiftKey;if(t||i)return void this._onMultiSelectItem(e);var r=this.getSelection(),n=this.itemFromTarget(e),o=n?[n.id]:[];this.setSelection(o);var a=this.getSelection();(a.length>0||r.length>0)&&this.body.emitter.emit("select",{items:a,event:e})}},r.prototype._onAddItem=function(e){if(this.options.selectable&&this.options.editable.add){var t=this,i=this.options.snap||null,r=this.itemFromTarget(e);if(r){var n=t.itemsData.get(r.id);this.options.onUpdate(n,function(e){e&&t.itemsData.getDataSet().update(e)})}else{if(this.options.rtl)var o=a.getAbsoluteRight(this.dom.frame),s=o-e.center.x;else var o=a.getAbsoluteLeft(this.dom.frame),s=e.center.x-o;var l=this.body.util.toTime(s),h=this.body.util.getScale(),c=this.body.util.getStep(),d={start:i?i(l,h,c):l,content:"new item"};if("range"===this.options.type){var u=this.body.util.toTime(s+this.props.width/5);d.end=i?i(u,h,c):u}d[this.itemsData._fieldId]=a.randomUUID();var f=this.groupFromTarget(e);f&&(d.group=f.groupId),d=this._cloneItemData(d),this.options.onAdd(d,function(e){e&&t.itemsData.getDataSet().add(e)})}}},r.prototype._onMultiSelectItem=function(e){if(this.options.selectable){var t=this.itemFromTarget(e);if(t){var i=this.options.multiselect?this.getSelection():[],n=e.srcEvent&&e.srcEvent.shiftKey||!1;if(n&&this.options.multiselect){var o=this.itemsData.get(t.id).group,a=void 0;this.options.multiselectPerGroup&&i.length>0&&(a=this.itemsData.get(i[0]).group),this.options.multiselectPerGroup&&void 0!=a&&a!=o||i.push(t.id);var s=r._getItemRange(this.itemsData.get(i,this.itemOptions));if(!this.options.multiselectPerGroup||a==o){i=[];for(var l in this.items)if(this.items.hasOwnProperty(l)){var h=this.items[l],c=h.data.start,d=void 0!==h.data.end?h.data.end:c;!(c>=s.min&&d<=s.max)||this.options.multiselectPerGroup&&a!=this.itemsData.get(h.id).group||h instanceof g||i.push(h.id)}}}else{var u=i.indexOf(t.id);-1==u?i.push(t.id):i.splice(u,1)}this.setSelection(i),this.body.emitter.emit("select",{items:this.getSelection(),event:e})}}},r._getItemRange=function(e){var t=null,i=null;return e.forEach(function(e){(null==i||e.start<i)&&(i=e.start),void 0!=e.end?(null==t||e.end>t)&&(t=e.end):(null==t||e.start>t)&&(t=e.start)}),{min:i,max:t}},r.prototype.itemFromTarget=function(e){for(var t=e.target;t;){if(t.hasOwnProperty("timeline-item"))return t["timeline-item"];t=t.parentNode}return null},r.prototype.groupFromTarget=function(e){for(var t=e.center?e.center.y:e.clientY,i=0;i<this.groupIds.length;i++){var r=this.groupIds[i],n=this.groups[r],o=n.dom.foreground,s=a.getAbsoluteTop(o);if(t>s&&t<s+o.offsetHeight)return n;if("top"===this.options.orientation.item){if(i===this.groupIds.length-1&&t>s)return n}else if(0===i&&t<s+o.offset)return n}return null},r.itemSetFromTarget=function(e){for(var t=e.target;t;){if(t.hasOwnProperty("timeline-itemset"))return t["timeline-itemset"];t=t.parentNode}return null},r.prototype._cloneItemData=function(e,t){var i=a.extend({},e);return t||(t=this.itemsData.getDataSet()._options.type),void 0!=i.start&&(i.start=a.convert(i.start,t&&t.start||"Date")),void 0!=i.end&&(i.end=a.convert(i.end,t&&t.end||"Date")),i},e.exports=r},function(e,t,i){function r(e,t,i,o){this.moment=n,this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(e,t,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(o)?this.hiddenDates=o:void 0!=o?this.hiddenDates=[o]:this.hiddenDates=[],this.format=r.FORMAT}var n=i(2),o=i(32),a=i(1);r.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},r.prototype.setMoment=function(e){this.moment=e,this.current=this.moment(this.current),this._start=this.moment(this._start),this._end=this.moment(this._end)},r.prototype.setFormat=function(e){var t=a.deepExtend({},r.FORMAT);this.format=a.deepExtend(t,e)},r.prototype.setRange=function(e,t,i){if(!(e instanceof Date&&t instanceof Date))throw"No legal start or end date in method setRange";this._start=void 0!=e?this.moment(e.valueOf()):new Date,this._end=void 0!=t?this.moment(t.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i)},r.prototype.start=function(){this.current=this._start.clone(),this.roundToMinor()},r.prototype.roundToMinor=function(){switch(this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(1!=this.step)switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year")}},r.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},r.prototype.next=function(){var e=this.current.valueOf();if(this.current.month()<6)switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.subtract(this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}else switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}if(1!=this.step)switch(this.scale){case"millisecond":this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"month":this.current.month()<this.step&&this.current.month(0);break;case"year":}this.current.valueOf()==e&&(this.current=this._end.clone()),o.stepOverHiddenDates(this.moment,this,e)},r.prototype.getCurrent=function(){return this.current},r.prototype.setScale=function(e){e&&"string"==typeof e.scale&&(this.scale=e.scale,this.step=e.step>0?e.step:1,this.autoScale=!1)},r.prototype.setAutoScale=function(e){this.autoScale=e},r.prototype.setMinimumStep=function(e){if(void 0!=e){var t=31104e6,i=2592e6,r=864e5,n=36e5,o=6e4,a=1e3,s=1;1e3*t>e&&(this.scale="year",this.step=1e3),500*t>e&&(this.scale="year",this.step=500),100*t>e&&(this.scale="year",this.step=100),50*t>e&&(this.scale="year",this.step=50),10*t>e&&(this.scale="year",this.step=10),5*t>e&&(this.scale="year",this.step=5),t>e&&(this.scale="year",this.step=1),3*i>e&&(this.scale="month",this.step=3),i>e&&(this.scale="month",this.step=1),5*r>e&&(this.scale="day",this.step=5),2*r>e&&(this.scale="day",this.step=2),r>e&&(this.scale="day",this.step=1),r/2>e&&(this.scale="weekday",this.step=1),4*n>e&&(this.scale="hour",this.step=4),n>e&&(this.scale="hour",this.step=1),15*o>e&&(this.scale="minute",this.step=15),10*o>e&&(this.scale="minute",this.step=10),5*o>e&&(this.scale="minute",this.step=5),o>e&&(this.scale="minute",this.step=1),15*a>e&&(this.scale="second",this.step=15),10*a>e&&(this.scale="second",this.step=10),5*a>e&&(this.scale="second",this.step=5),a>e&&(this.scale="second",this.step=1),200*s>e&&(this.scale="millisecond",this.step=200),100*s>e&&(this.scale="millisecond",this.step=100),50*s>e&&(this.scale="millisecond",this.step=50),10*s>e&&(this.scale="millisecond",this.step=10),5*s>e&&(this.scale="millisecond",this.step=5),s>e&&(this.scale="millisecond",this.step=1)}},r.snap=function(e,t,i){var r=n(e);if("year"==t){var o=r.year()+Math.round(r.month()/12);r.year(Math.round(o/i)*i),r.month(0),r.date(0),r.hours(0),r.minutes(0),r.seconds(0),r.milliseconds(0)}else if("month"==t)r.date()>15?(r.date(1),r.add(1,"month")):r.date(1),r.hours(0),r.minutes(0),r.seconds(0),r.milliseconds(0);else if("day"==t){switch(i){case 5:case 2:r.hours(24*Math.round(r.hours()/24));break;default:r.hours(12*Math.round(r.hours()/12))}r.minutes(0),r.seconds(0),r.milliseconds(0)}else if("weekday"==t){switch(i){case 5:case 2:r.hours(12*Math.round(r.hours()/12));break;default:r.hours(6*Math.round(r.hours()/6))}r.minutes(0),r.seconds(0),r.milliseconds(0)}else if("hour"==t){switch(i){case 4:r.minutes(60*Math.round(r.minutes()/60));break;default:r.minutes(30*Math.round(r.minutes()/30))}r.seconds(0),r.milliseconds(0)}else if("minute"==t){switch(i){case 15:case 10:r.minutes(5*Math.round(r.minutes()/5)),r.seconds(0);break;case 5:r.seconds(60*Math.round(r.seconds()/60));break;default:r.seconds(30*Math.round(r.seconds()/30))}r.milliseconds(0)}else if("second"==t)switch(i){case 15:case 10:r.seconds(5*Math.round(r.seconds()/5)),r.milliseconds(0);break;case 5:r.milliseconds(1e3*Math.round(r.milliseconds()/1e3));break;default:r.milliseconds(500*Math.round(r.milliseconds()/500))}else if("millisecond"==t){var a=i>5?i/2:1;r.milliseconds(Math.round(r.milliseconds()/a)*a)}return r},r.prototype.isMajor=function(){if(1==this.switchedYear)switch(this.switchedYear=!1,this.scale){case"year":case"month":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.switchedMonth=!1,this.scale){case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.switchedDay=!1,this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var e=this.moment(this.current);switch(this.scale){case"millisecond":return 0==e.milliseconds();case"second":return 0==e.seconds();case"minute":return 0==e.hours()&&0==e.minutes();case"hour":return 0==e.hours();case"weekday":case"day":return 1==e.date();case"month":return 0==e.month();case"year":return!1;default:return!1}},r.prototype.getLabelMinor=function(e){void 0==e&&(e=this.current);var t=this.format.minorLabels[this.scale];return t&&t.length>0?this.moment(e).format(t):""},r.prototype.getLabelMajor=function(e){void 0==e&&(e=this.current);var t=this.format.majorLabels[this.scale];return t&&t.length>0?this.moment(e).format(t):""},r.prototype.getClassName=function(){function e(e){return e/l%2==0?" vis-even":" vis-odd"}function t(e){return e.isSame(new Date,"day")?" vis-today":e.isSame(o().add(1,"day"),"day")?" vis-tomorrow":e.isSame(o().add(-1,"day"),"day")?" vis-yesterday":""}function i(e){return e.isSame(new Date,"week")?" vis-current-week":""}function r(e){return e.isSame(new Date,"month")?" vis-current-month":""}function n(e){return e.isSame(new Date,"year")?" vis-current-year":""}var o=this.moment,a=this.moment(this.current),s=a.locale?a.locale("en"):a.lang("en"),l=this.step;switch(this.scale){case"millisecond":return e(s.milliseconds()).trim();case"second":return e(s.seconds()).trim();case"minute":return e(s.minutes()).trim();case"hour":var h=s.hours();return 4==this.step&&(h=h+"-h"+(h+4)),"vis-h"+h+t(s)+e(s.hours());case"weekday":return"vis-"+s.format("dddd").toLowerCase()+t(s)+i(s)+e(s.date());case"day":var c=s.date(),d=s.format("MMMM").toLowerCase();return"vis-day"+c+" vis-"+d+r(s)+e(c-1);case"month":return"vis-"+s.format("MMMM").toLowerCase()+r(s)+e(s.month());case"year":var u=s.year();return"vis-year"+u+n(s)+e(u);default:return""}},e.exports=r},function(e,t,i){function r(e,t,i){this.groupId=e,this.subgroups={},this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=i,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var r=this;this.itemSet.body.emitter.on("checkRangedItems",function(){r.checkRangedItems=!0}),this._create(),this.setData(t)}var n=i(1),o=i(37);i(38),r.prototype._create=function(){var e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;var t=document.createElement("div");t.className="vis-inner",e.appendChild(t),this.dom.inner=t;var i=document.createElement("div");i.className="vis-group",i["timeline-group"]=this,this.dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.innerHTML="?",this.dom.background.appendChild(this.dom.marker)},r.prototype.setData=function(e){var t;if(t=this.itemSet.options&&this.itemSet.options.groupTemplate?this.itemSet.options.groupTemplate(e):e&&e.content,t instanceof Element){for(this.dom.inner.appendChild(t);this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(t)}else void 0!==t&&null!==t?this.dom.inner.innerHTML=t:this.dom.inner.innerHTML=this.groupId||"";this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?n.removeClassName(this.dom.inner,"vis-hidden"):n.addClassName(this.dom.inner,"vis-hidden");var i=e&&e.className||null;i!=this.className&&(this.className&&(n.removeClassName(this.dom.label,this.className),n.removeClassName(this.dom.foreground,this.className),n.removeClassName(this.dom.background,this.className),n.removeClassName(this.dom.axis,this.className)),n.addClassName(this.dom.label,i),n.addClassName(this.dom.foreground,i),n.addClassName(this.dom.background,i),n.addClassName(this.dom.axis,i),this.className=i),this.style&&(n.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(n.addCssText(this.dom.label,e.style),this.style=e.style)},r.prototype.getLabelWidth=function(){return this.props.label.width},r.prototype.redraw=function(e,t,i){var r=!1,a=this.dom.marker.clientHeight;if(a!=this.lastMarkerHeight&&(this.lastMarkerHeight=a,n.forEach(this.items,function(e){e.dirty=!0,e.displayed&&e.redraw()}),i=!0),this._calculateSubGroupHeights(),"function"==typeof this.itemSet.options.order){if(i){var s=this,l=!1;n.forEach(this.items,function(e){e.displayed||(e.redraw(),s.visibleItems.push(e)),e.repositionX(l)});var h=this.orderedItems.byStart.slice().sort(function(e,t){return s.itemSet.options.order(e.data,t.data)});o.stack(h,t,!0)}this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,e)}else this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,e),this.itemSet.options.stack?o.stack(this.visibleItems,t,i):o.nostack(this.visibleItems,t,this.subgroups);var c=this._calculateHeight(t),d=this.dom.foreground;this.top=d.offsetTop,this.right=d.offsetLeft,this.width=d.offsetWidth,r=n.updateProperty(this,"height",c)||r,r=n.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||r,r=n.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||r,this.dom.background.style.height=c+"px",this.dom.foreground.style.height=c+"px",this.dom.label.style.height=c+"px";for(var u=0,f=this.visibleItems.length;f>u;u++){var p=this.visibleItems[u];p.repositionY(t)}return r},r.prototype._calculateSubGroupHeights=function(){if(Object.keys(this.subgroups).length>0){var e=this;this.resetSubgroups(),n.forEach(this.visibleItems,function(t){void 0!==t.data.subgroup&&(e.subgroups[t.data.subgroup].height=Math.max(e.subgroups[t.data.subgroup].height,t.height),e.subgroups[t.data.subgroup].visible=!0)})}},r.prototype._calculateHeight=function(e){var t,i=this.visibleItems;if(i.length>0){var r=i[0].top,o=i[0].top+i[0].height;if(n.forEach(i,function(e){r=Math.min(r,e.top),o=Math.max(o,e.top+e.height)}),r>e.axis){var a=r-e.axis;o-=a,n.forEach(i,function(e){e.top-=a})}t=o+e.item.vertical/2}else t=0;return t=Math.max(t,this.props.label.height)},r.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},r.prototype.hide=function(){var e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);var t=this.dom.foreground;t.parentNode&&t.parentNode.removeChild(t);var i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);var r=this.dom.axis;r.parentNode&&r.parentNode.removeChild(r)},r.prototype.add=function(e){if(this.items[e.id]=e,e.setParent(this),void 0!==e.data.subgroup&&(void 0===this.subgroups[e.data.subgroup]&&(this.subgroups[e.data.subgroup]={height:0,visible:!1,index:this.subgroupIndex,items:[]},this.subgroupIndex++),this.subgroups[e.data.subgroup].items.push(e)),this.orderSubgroups(),-1==this.visibleItems.indexOf(e)){var t=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,t)}},r.prototype.orderSubgroups=function(){if(void 0!==this.subgroupOrderer){var e=[];if("string"==typeof this.subgroupOrderer){for(var t in this.subgroups)e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});e.sort(function(e,t){return e.sortField-t.sortField})}else if("function"==typeof this.subgroupOrderer){for(var t in this.subgroups)e.push(this.subgroups[t].items[0].data);e.sort(this.subgroupOrderer)}if(e.length>0)for(var i=0;i<e.length;i++)this.subgroups[e[i].subgroup].index=i}},r.prototype.resetSubgroups=function(){for(var e in this.subgroups)this.subgroups.hasOwnProperty(e)&&(this.subgroups[e].visible=!1)},r.prototype.remove=function(e){delete this.items[e.id],e.setParent(null);var t=this.visibleItems.indexOf(e);if(-1!=t&&this.visibleItems.splice(t,1),void 0!==e.data.subgroup){var i=this.subgroups[e.data.subgroup];if(i){var r=i.items.indexOf(e);i.items.splice(r,1),i.items.length||(delete this.subgroups[e.data.subgroup],this.subgroupIndex--),this.orderSubgroups()}}},r.prototype.removeFromDataSet=function(e){this.itemSet.removeItem(e.id)},r.prototype.order=function(){for(var e=n.toArray(this.items),t=[],i=[],r=0;r<e.length;r++)void 0!==e[r].data.end&&i.push(e[r]),t.push(e[r]);this.orderedItems={byStart:t,byEnd:i},o.orderByStart(this.orderedItems.byStart),o.orderByEnd(this.orderedItems.byEnd)},r.prototype._updateVisibleItems=function(e,t,i){var r,o,a=[],s={},l=(i.end-i.start)/4,h=i.start-l,c=i.end+l,d=function(e){return h>e?-1:c>=e?0:1};if(t.length>0)for(o=0;o<t.length;o++)this._checkIfVisibleWithReference(t[o],a,s,i);var u=n.binarySearchCustom(e.byStart,d,"data","start");if(this._traceVisible(u,e.byStart,a,s,function(e){return e.data.start<h||e.data.start>c}),1==this.checkRangedItems)for(this.checkRangedItems=!1,o=0;o<e.byEnd.length;o++)this._checkIfVisibleWithReference(e.byEnd[o],a,s,i);else{var f=n.binarySearchCustom(e.byEnd,d,"data","end");this._traceVisible(f,e.byEnd,a,s,function(e){return e.data.end<h||e.data.end>c})}for(o=0;o<a.length;o++)r=a[o],r.displayed||r.show(),r.repositionX();return a},r.prototype._traceVisible=function(e,t,i,r,n){var o,a;if(-1!=e){for(a=e;a>=0&&(o=t[a],!n(o));a--)void 0===r[o.id]&&(r[o.id]=!0,i.push(o));for(a=e+1;a<t.length&&(o=t[a],!n(o));a++)void 0===r[o.id]&&(r[o.id]=!0,i.push(o))}},r.prototype._checkIfVisible=function(e,t,i){e.isVisible(i)?(e.displayed||e.show(),e.repositionX(),t.push(e)):e.displayed&&e.hide()},r.prototype._checkIfVisibleWithReference=function(e,t,i,r){e.isVisible(r)?void 0===i[e.id]&&(i[e.id]=!0,t.push(e)):e.displayed&&e.hide()},e.exports=r},function(e,t){var i=.001;t.orderByStart=function(e){e.sort(function(e,t){return e.data.start-t.data.start})},t.orderByEnd=function(e){e.sort(function(e,t){var i="end"in e.data?e.data.end:e.data.start,r="end"in t.data?t.data.end:t.data.start;return i-r})},t.stack=function(e,i,r){var n,o;if(r)for(n=0,o=e.length;o>n;n++)e[n].top=null;for(n=0,o=e.length;o>n;n++){var a=e[n];if(a.stack&&null===a.top){a.top=i.axis;do{for(var s=null,l=0,h=e.length;h>l;l++){var c=e[l];if(null!==c.top&&c!==a&&c.stack&&t.collision(a,c,i.item,c.options.rtl)){s=c;break}}null!=s&&(a.top=s.top+s.height+i.item.vertical)}while(s)}}},t.nostack=function(e,t,i){var r,n,o;for(r=0,n=e.length;n>r;r++)if(void 0!==e[r].data.subgroup){o=t.axis;for(var a in i)i.hasOwnProperty(a)&&1==i[a].visible&&i[a].index<i[e[r].data.subgroup].index&&(o+=i[a].height+t.item.vertical);e[r].top=o}else e[r].top=t.axis},t.collision=function(e,t,r,n){return n?e.right-r.horizontal+i<t.right+t.width&&e.right+e.width+r.horizontal-i>t.right&&e.top-r.vertical+i<t.top+t.height&&e.top+e.height+r.vertical-i>t.top:e.left-r.horizontal+i<t.left+t.width&&e.left+e.width+r.horizontal-i>t.left&&e.top-r.vertical+i<t.top+t.height&&e.top+e.height+r.vertical-i>t.top}},function(e,t,i){function r(e,t,i){if(this.props={content:{width:0}},this.overflow=!1,this.options=i,e){if(void 0==e.start)throw new Error('Property "start" missing in item '+e.id);if(void 0==e.end)throw new Error('Property "end" missing in item '+e.id)}n.call(this,e,t,i)}var n=(i(20),i(39));r.prototype=new n(null,null,null),r.prototype.baseClassName="vis-item vis-range",r.prototype.isVisible=function(e){return this.data.start<e.end&&this.data.end>e.start},r.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},e=this.dom,e.box=document.createElement("div"),e.frame=document.createElement("div"),e.frame.className="vis-item-overflow",e.box.appendChild(e.frame),e.content=document.createElement("div"),e.content.className="vis-item-content",e.frame.appendChild(e.content),e.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var i=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,r=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");e.box.className=this.baseClassName+r,this.overflow="hidden"!==window.getComputedStyle(e.frame).overflow,this.dom.content.style.maxWidth="none",this.props.content.width=this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dom.content.style.maxWidth="",this.dirty=!1}this._repaintDeleteButton(e.box),this._repaintDragLeft(),this._repaintDragRight()},r.prototype.show=function(){this.displayed||this.redraw()},r.prototype.hide=function(){if(this.displayed){var e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.displayed=!1}},r.prototype.repositionX=function(e){var t,i,r=this.parent.width,n=this.conversion.toScreen(this.data.start),o=this.conversion.toScreen(this.data.end);void 0!==e&&e!==!0||(-r>n&&(n=-r),o>2*r&&(o=2*r));var a=Math.max(o-n,1);switch(this.overflow?(this.options.rtl?this.right=n:this.left=n,this.width=a+this.props.content.width,i=this.props.content.width):(this.options.rtl?this.right=n:this.left=n,this.width=a,i=Math.min(o-n,this.props.content.width)),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=a+"px",this.options.align){case"left":this.options.rtl?this.dom.content.style.right="0":this.dom.content.style.left="0";break;case"right":this.options.rtl?this.dom.content.style.right=Math.max(a-i,0)+"px":this.dom.content.style.left=Math.max(a-i,0)+"px";break;case"center":this.options.rtl?this.dom.content.style.right=Math.max((a-i)/2,0)+"px":this.dom.content.style.left=Math.max((a-i)/2,0)+"px";break;default:t=this.overflow?o>0?Math.max(-n,0):-i:0>n?-n:0,this.options.rtl?this.dom.content.style.right=t+"px":this.dom.content.style.left=t+"px"}},r.prototype.repositionY=function(){var e=this.options.orientation.item,t=this.dom.box;"top"==e?t.style.top=this.top+"px":t.style.top=this.parent.height-this.top-this.height+"px"},r.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var e=document.createElement("div");e.className="vis-drag-left",e.dragLeftItem=this,this.dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},r.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var e=document.createElement("div");e.className="vis-drag-right",e.dragRightItem=this,this.dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},e.exports=r},function(e,t,i){function r(e,t,i){this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=t||{},this.options=i||{},this.selected=!1,this.displayed=!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.editable=null,this.data&&this.data.hasOwnProperty("editable")&&"boolean"==typeof this.data.editable&&(this.editable=e.editable)}var n=i(20),o=i(1);r.prototype.stack=!0,r.prototype.select=function(){this.selected=!0,this.dirty=!0,this.displayed&&this.redraw()},r.prototype.unselect=function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()},r.prototype.setData=function(e){var t=void 0!=e.group&&this.data.group!=e.group;t&&this.parent.itemSet._moveToGroup(this,e.group),e.hasOwnProperty("editable")&&"boolean"==typeof e.editable&&(this.editable=e.editable),this.data=e,this.dirty=!0,this.displayed&&this.redraw()},r.prototype.setParent=function(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e},r.prototype.isVisible=function(e){return!1},r.prototype.show=function(){return!1},r.prototype.hide=function(){return!1},r.prototype.redraw=function(){},r.prototype.repositionX=function(){},r.prototype.repositionY=function(){},r.prototype._repaintDeleteButton=function(e){var t=(this.options.editable.remove||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&t&&!this.dom.deleteButton){var i=this,r=document.createElement("div");this.options.rtl?r.className="vis-delete-rtl":r.className="vis-delete",r.title="Delete this item",new n(r).on("tap",function(e){e.stopPropagation(),i.parent.removeFromDataSet(i)}),e.appendChild(r),this.dom.deleteButton=r}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},r.prototype._updateContents=function(e){var t;if(this.options.template){var i=this.parent.itemSet.itemsData.get(this.id);t=this.options.template(i)}else t=this.data.content;var r=this._contentToString(this.content)!==this._contentToString(t);if(r){if(t instanceof Element)e.innerHTML="",e.appendChild(t);else if(void 0!=t)e.innerHTML=t;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.content=t}},r.prototype._updateTitle=function(e){null!=this.data.title?e.title=this.data.title||"":e.removeAttribute("vis-title")},r.prototype._updateDataAttributes=function(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var t=[];if(Array.isArray(this.options.dataAttributes))t=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;t=Object.keys(this.data)}for(var i=0;i<t.length;i++){var r=t[i],n=this.data[r];null!=n?e.setAttribute("data-"+r,n):e.removeAttribute("data-"+r)}}},r.prototype._updateStyle=function(e){this.style&&(o.removeCssText(e,this.style),this.style=null),this.data.style&&(o.addCssText(e,this.data.style),this.style=this.data.style)},r.prototype._contentToString=function(e){return"string"==typeof e?e:e&&"outerHTML"in e?e.outerHTML:e},r.prototype.getWidthLeft=function(){return 0},r.prototype.getWidthRight=function(){return 0},e.exports=r},function(e,t,i){function r(e,t,i){n.call(this,e,t,i),this.width=0,this.height=0,this.top=0,this.left=0}var n=(i(1),i(36));r.prototype=Object.create(n.prototype),r.prototype.redraw=function(e,t,i){var r=!1;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,e),
this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var n=0,o=this.visibleItems.length;o>n;n++){var a=this.visibleItems[n];a.repositionY(t)}return r},r.prototype.show=function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)},e.exports=r},function(e,t,i){function r(e,t,i){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},this.options=i,e&&void 0==e.start)throw new Error('Property "start" missing in item '+e);n.call(this,e,t,i)}var n=i(39);i(1),r.prototype=new n(null,null,null),r.prototype.isVisible=function(e){var t=(e.end-e.start)/4;return this.data.start>e.start-t&&this.data.start<e.end+t},r.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},e=this.dom,e.box=document.createElement("DIV"),e.content=document.createElement("DIV"),e.content.className="vis-item-content",e.box.appendChild(e.content),e.line=document.createElement("DIV"),e.line.className="vis-line",e.dot=document.createElement("DIV"),e.dot.className="vis-dot",e.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.box)}if(!e.line.parentNode){var i=this.parent.dom.background;if(!i)throw new Error("Cannot redraw item: parent has no background container element");i.appendChild(e.line)}if(!e.dot.parentNode){var r=this.parent.dom.axis;if(!i)throw new Error("Cannot redraw item: parent has no axis container element");r.appendChild(e.dot)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,o=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");e.box.className="vis-item vis-box"+o,e.line.className="vis-item vis-line"+o,e.dot.className="vis-item vis-dot"+o,this.props.dot.height=e.dot.offsetHeight,this.props.dot.width=e.dot.offsetWidth,this.props.line.width=e.line.offsetWidth,this.width=e.box.offsetWidth,this.height=e.box.offsetHeight,this.dirty=!1}this._repaintDeleteButton(e.box)},r.prototype.show=function(){this.displayed||this.redraw()},r.prototype.hide=function(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.displayed=!1}},r.prototype.repositionX=function(){var e=this.conversion.toScreen(this.data.start),t=this.options.align;"right"==t?this.options.rtl?(this.right=e-this.width,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=e-this.props.line.width+"px",this.dom.dot.style.right=e-this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=e-this.width,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=e-this.props.line.width+"px",this.dom.dot.style.left=e-this.props.line.width/2-this.props.dot.width/2+"px"):"left"==t?this.options.rtl?(this.right=e,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=e+"px",this.dom.dot.style.right=e+this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=e,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=e+"px",this.dom.dot.style.left=e+this.props.line.width/2-this.props.dot.width/2+"px"):this.options.rtl?(this.right=e-this.width/2,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=e-this.props.line.width+"px",this.dom.dot.style.right=e-this.props.dot.width/2+"px"):(this.left=e-this.width/2,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=e-this.props.line.width/2+"px",this.dom.dot.style.left=e-this.props.dot.width/2+"px")},r.prototype.repositionY=function(){var e=this.options.orientation.item,t=this.dom.box,i=this.dom.line,r=this.dom.dot;if("top"==e)t.style.top=(this.top||0)+"px",i.style.top="0",i.style.height=this.parent.top+this.top+1+"px",i.style.bottom="";else{var n=this.parent.itemSet.props.height,o=n-this.parent.top-this.parent.height+this.top;t.style.top=(this.parent.height-this.top-this.height||0)+"px",i.style.top=n-o+"px",i.style.bottom="0"}r.style.top=-this.props.dot.height/2+"px"},r.prototype.getWidthLeft=function(){return this.width/2},r.prototype.getWidthRight=function(){return this.width/2},e.exports=r},function(e,t,i){function r(e,t,i){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},this.options=i,e&&void 0==e.start)throw new Error('Property "start" missing in item '+e);n.call(this,e,t,i)}var n=i(39);r.prototype=new n(null,null,null),r.prototype.isVisible=function(e){var t=(e.end-e.start)/4;return this.data.start>e.start-t&&this.data.start<e.end+t},r.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},e=this.dom,e.point=document.createElement("div"),e.content=document.createElement("div"),e.content.className="vis-item-content",e.point.appendChild(e.content),e.dot=document.createElement("div"),e.point.appendChild(e.dot),e.point["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.point.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.point)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.point),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var i=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,r=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");e.point.className="vis-item vis-point"+r,e.dot.className="vis-item vis-dot"+r,this.props.dot.width=e.dot.offsetWidth,this.props.dot.height=e.dot.offsetHeight,this.props.content.height=e.content.offsetHeight,this.options.rtl?e.content.style.marginRight=2*this.props.dot.width+"px":e.content.style.marginLeft=2*this.props.dot.width+"px",this.width=e.point.offsetWidth,this.height=e.point.offsetHeight,e.dot.style.top=(this.height-this.props.dot.height)/2+"px",this.options.rtl?e.dot.style.right=this.props.dot.width/2+"px":e.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1}this._repaintDeleteButton(e.point)},r.prototype.show=function(){this.displayed||this.redraw()},r.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)},r.prototype.repositionX=function(){var e=this.conversion.toScreen(this.data.start);this.options.rtl?(this.right=e-this.props.dot.width,this.dom.point.style.right=this.right+"px"):(this.left=e-this.props.dot.width,this.dom.point.style.left=this.left+"px")},r.prototype.repositionY=function(){var e=this.options.orientation.item,t=this.dom.point;"top"==e?t.style.top=this.top+"px":t.style.top=this.parent.height-this.top-this.height+"px"},r.prototype.getWidthLeft=function(){return this.props.dot.width},r.prototype.getWidthRight=function(){return this.props.dot.width},e.exports=r},function(e,t,i){function r(e,t,i){if(this.props={content:{width:0}},this.overflow=!1,e){if(void 0==e.start)throw new Error('Property "start" missing in item '+e.id);if(void 0==e.end)throw new Error('Property "end" missing in item '+e.id)}n.call(this,e,t,i)}var n=(i(20),i(39)),o=i(40),a=i(38);r.prototype=new n(null,null,null),r.prototype.baseClassName="vis-item vis-background",r.prototype.stack=!1,r.prototype.isVisible=function(e){return this.data.start<e.end&&this.data.end>e.start},r.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},e=this.dom,e.box=document.createElement("div"),e.frame=document.createElement("div"),e.frame.className="vis-item-overflow",e.box.appendChild(e.frame),e.content=document.createElement("div"),e.content.className="vis-item-content",e.frame.appendChild(e.content),this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.background;if(!t)throw new Error("Cannot redraw item: parent has no background container element");t.appendChild(e.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var i=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");e.box.className=this.baseClassName+i,this.overflow="hidden"!==window.getComputedStyle(e.content).overflow,this.props.content.width=this.dom.content.offsetWidth,this.height=0,this.dirty=!1}},r.prototype.show=a.prototype.show,r.prototype.hide=a.prototype.hide,r.prototype.repositionX=a.prototype.repositionX,r.prototype.repositionY=function(e){var t="top"===this.options.orientation.item;this.dom.content.style.top=t?"":"0",this.dom.content.style.bottom=t?"0":"";var i;if(void 0!==this.data.subgroup){var r=this.data.subgroup,n=this.parent.subgroups,a=n[r].index;if(1==t){i=this.parent.subgroups[r].height+e.item.vertical,i+=0==a?e.axis-.5*e.item.vertical:0;var s=this.parent.top;for(var l in n)n.hasOwnProperty(l)&&1==n[l].visible&&n[l].index<a&&(s+=n[l].height+e.item.vertical);s+=0!=a?e.axis-.5*e.item.vertical:0,this.dom.box.style.top=s+"px",this.dom.box.style.bottom=""}else{var s=this.parent.top,h=0;for(var l in n)if(n.hasOwnProperty(l)&&1==n[l].visible){var c=n[l].height+e.item.vertical;h+=c,n[l].index>a&&(s+=c)}i=this.parent.subgroups[r].height+e.item.vertical,this.dom.box.style.top=this.parent.height-h+s+"px",this.dom.box.style.bottom=""}}else this.parent instanceof o?(i=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.top=t?"0":"",this.dom.box.style.bottom=t?"":"0"):(i=this.parent.height,this.dom.box.style.top=this.parent.top+"px",this.dom.box.style.bottom="");this.dom.box.style.height=i+"px"},e.exports=r},function(e,t,i){function r(e,t){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,maxMinorChars:7,format:s.FORMAT,moment:h,timeAxis:null},this.options=o.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(t)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=i(1),a=i(31),s=i(35),l=i(32),h=i(2);r.prototype=new a,r.prototype.setOptions=function(e){e&&(o.selectiveExtend(["showMinorLabels","showMajorLabels","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e),o.selectiveDeepExtend(["format"],this.options,e),"orientation"in e&&("string"==typeof e.orientation?this.options.orientation.axis=e.orientation:"object"===n(e.orientation)&&"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis)),"locale"in e&&("function"==typeof h.locale?h.locale(e.locale):h.lang(e.locale)))},r.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"},r.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},r.prototype.redraw=function(){var e=this.props,t=this.dom.foreground,i=this.dom.background,r="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,n=t.parentNode!==r;this._calculateCharSize();var o=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,a=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;e.minorLabelHeight=o?e.minorCharHeight:0,e.majorLabelHeight=a?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=t.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;var s=t.nextSibling,l=i.nextSibling;return t.parentNode&&t.parentNode.removeChild(t),i.parentNode&&i.parentNode.removeChild(i),t.style.height=this.props.height+"px",this._repaintLabels(),s?r.insertBefore(t,s):r.appendChild(t),l?this.body.dom.backgroundVertical.insertBefore(i,l):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||n},r.prototype._repaintLabels=function(){var e=this.options.orientation.axis,t=o.convert(this.body.range.start,"Number"),i=o.convert(this.body.range.end,"Number"),r=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),n=r-l.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this.body.range,r);n-=this.body.util.toTime(0).valueOf();var a=new s(new Date(t),new Date(i),n,this.body.hiddenDates);a.setMoment(this.options.moment),this.options.format&&a.setFormat(this.options.format),this.options.timeAxis&&a.setScale(this.options.timeAxis),this.step=a;var h=this.dom;h.redundant.lines=h.lines,h.redundant.majorTexts=h.majorTexts,h.redundant.minorTexts=h.minorTexts,h.lines=[],h.majorTexts=[],h.minorTexts=[];var d,u,f,p,m,g,v,y,A,b,E=0,x=void 0,w=0,T=1e3;for(a.start(),u=a.getCurrent(),p=this.body.util.toScreen(u);a.hasNext()&&T>w;){w++,m=a.isMajor(),b=a.getClassName(),A=a.getLabelMinor(),d=u,f=p,a.next(),u=a.getCurrent(),g=a.isMajor(),p=this.body.util.toScreen(u),v=E,E=p-f;var _=E>=.4*v;if(this.options.showMinorLabels&&_){var S=this._repaintMinorText(f,A,e,b);S.style.width=E+"px"}m&&this.options.showMajorLabels?(f>0&&(void 0==x&&(x=f),S=this._repaintMajorText(f,a.getLabelMajor(),e,b)),y=this._repaintMajorLine(f,E,e,b)):_?y=this._repaintMinorLine(f,E,e,b):y&&(y.style.width=parseInt(y.style.width)+E+"px")}if(w!==T||c||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to "+T+" lines."),c=!0),this.options.showMajorLabels){var C=this.body.util.toTime(0),R=a.getLabelMajor(C),k=R.length*(this.props.majorCharWidth||10)+10;(void 0==x||x>k)&&this._repaintMajorText(0,R,e,b)}o.forEach(this.dom.redundant,function(e){for(;e.length;){var t=e.pop();t&&t.parentNode&&t.parentNode.removeChild(t)}})},r.prototype._repaintMinorText=function(e,t,i,r){var n=this.dom.redundant.minorTexts.shift();if(!n){var o=document.createTextNode("");n=document.createElement("div"),n.appendChild(o),this.dom.foreground.appendChild(n)}return this.dom.minorTexts.push(n),n.childNodes[0].nodeValue=t,n.style.top="top"==i?this.props.majorLabelHeight+"px":"0",this.options.rtl?(n.style.left="",n.style.right=e+"px"):n.style.left=e+"px",n.className="vis-text vis-minor "+r,n},r.prototype._repaintMajorText=function(e,t,i,r){var n=this.dom.redundant.majorTexts.shift();if(!n){var o=document.createTextNode(t);n=document.createElement("div"),n.appendChild(o),this.dom.foreground.appendChild(n)}return this.dom.majorTexts.push(n),n.childNodes[0].nodeValue=t,n.className="vis-text vis-major "+r,n.style.top="top"==i?"0":this.props.minorLabelHeight+"px",this.options.rtl?(n.style.left="",n.style.right=e+"px"):n.style.left=e+"px",n},r.prototype._repaintMinorLine=function(e,t,i,r){var n=this.dom.redundant.lines.shift();n||(n=document.createElement("div"),this.dom.background.appendChild(n)),this.dom.lines.push(n);var o=this.props;return"top"==i?n.style.top=o.majorLabelHeight+"px":n.style.top=this.body.domProps.top.height+"px",n.style.height=o.minorLineHeight+"px",this.options.rtl?(n.style.left="",n.style.right=e-o.minorLineWidth/2+"px",n.className="vis-grid vis-vertical-rtl vis-minor "+r):(n.style.left=e-o.minorLineWidth/2+"px",n.className="vis-grid vis-vertical vis-minor "+r),n.style.width=t+"px",n},r.prototype._repaintMajorLine=function(e,t,i,r){var n=this.dom.redundant.lines.shift();n||(n=document.createElement("div"),this.dom.background.appendChild(n)),this.dom.lines.push(n);var o=this.props;return"top"==i?n.style.top="0":n.style.top=this.body.domProps.top.height+"px",this.options.rtl?(n.style.left="",n.style.right=e-o.majorLineWidth/2+"px",n.className="vis-grid vis-vertical-rtl vis-major "+r):(n.style.left=e-o.majorLineWidth/2+"px",n.className="vis-grid vis-vertical vis-major "+r),n.style.height=o.majorLineHeight+"px",n.style.width=t+"px",n},r.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth};var c=!1;e.exports=r},function(e,t,i){function r(e){this.active=!1,this.dom={container:e},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=s(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var t=this,i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];i.forEach(function(e){t.hammer.on(e,function(e){e.stopPropagation()})}),document&&document.body&&(this.onClick=function(i){n(i.target,e)||t.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=o(),this.escListener=this.deactivate.bind(this)}function n(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}var o=i(23),a=i(13),s=i(20),l=i(1);a(r.prototype),r.current=null,r.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.hammer.destroy(),this.hammer=null},r.prototype.activate=function(){r.current&&r.current.deactivate(),r.current=this,this.active=!0,this.dom.overlay.style.display="none",l.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},r.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",l.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},r.prototype._onTapOverlay=function(e){this.activate(),e.stopPropagation()},e.exports=r},function(e,t,i){function r(e,t){this.body=e,this.defaultOptions={moment:s,locales:l,locale:"en",id:void 0,title:void 0},this.options=o.extend({},this.defaultOptions),t&&t.time?this.customTime=t.time:this.customTime=new Date,this.eventParams={},this.setOptions(t),this._create()}var n=i(20),o=i(1),a=i(31),s=i(2),l=i(47);r.prototype=new a,r.prototype.setOptions=function(e){e&&o.selectiveExtend(["moment","locale","locales","id"],this.options,e)},r.prototype._create=function(){var e=document.createElement("div");e["custom-time"]=this,e.className="vis-custom-time "+(this.options.id||""),e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e;var t=document.createElement("div");t.style.position="relative",t.style.top="0px",t.style.left="-10px",t.style.height="100%",t.style.width="20px",e.appendChild(t),this.hammer=new n(t),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:n.DIRECTION_HORIZONTAL})},r.prototype.destroy=function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null},r.prototype.redraw=function(){var e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));var t=this.body.util.toScreen(this.customTime),i=this.options.locales[this.options.locale];i||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline.html#Localization"),this.warned=!0),i=this.options.locales.en);var r=this.options.title;return void 0===r&&(r=i.time+": "+this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss"),r=r.charAt(0).toUpperCase()+r.substring(1)),this.bar.style.left=t+"px",this.bar.title=r,!1},r.prototype.hide=function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)},r.prototype.setCustomTime=function(e){this.customTime=o.convert(e,"Date"),this.redraw()},r.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},r.prototype.setCustomTitle=function(e){this.options.title=e},r.prototype._onDragStart=function(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation()},r.prototype._onDrag=function(e){if(this.eventParams.dragging){var t=this.body.util.toScreen(this.eventParams.customTime)+e.deltaX,i=this.body.util.toTime(t);this.setCustomTime(i),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf())}),e.stopPropagation()}},r.prototype._onDragEnd=function(e){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf())}),e.stopPropagation())},r.customTimeFromTarget=function(e){for(var t=e.target;t;){if(t.hasOwnProperty("custom-time"))return t["custom-time"];t=t.parentNode}return null},e.exports=r},function(e,t){t.en={current:"current",time:"time"},t.en_EN=t.en,t.en_US=t.en,t.nl={current:"huidige",time:"tijd"},t.nl_NL=t.nl,t.nl_BE=t.nl},function(e,t,i){function r(e,t){this.body=e,this.defaultOptions={rtl:!1,showCurrentTime:!0,moment:a,locales:s,locale:"en"},this.options=n.extend({},this.defaultOptions),this.offset=0,this._create(),this.setOptions(t)}var n=i(1),o=i(31),a=i(2),s=i(47);r.prototype=new o,r.prototype._create=function(){var e=document.createElement("div");e.className="vis-current-time",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e},r.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},r.prototype.setOptions=function(e){e&&n.selectiveExtend(["rtl","showCurrentTime","moment","locale","locales"],this.options,e)},r.prototype.redraw=function(){if(this.options.showCurrentTime){var e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar),this.start());var t=this.options.moment((new Date).valueOf()+this.offset),i=this.body.util.toScreen(t),r=this.options.locales[this.options.locale];r||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization"),this.warned=!0),r=this.options.locales.en);var n=r.current+" "+r.time+": "+t.format("dddd, MMMM Do YYYY, H:mm:ss");n=n.charAt(0).toUpperCase()+n.substring(1),this.options.rtl?this.bar.style.right=i+"px":this.bar.style.left=i+"px",this.bar.title=n}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},r.prototype.start=function(){function e(){t.stop();var i=t.body.range.conversion(t.body.domProps.center.width).scale,r=1/i/10;30>r&&(r=30),r>1e3&&(r=1e3),t.redraw(),t.body.emitter.emit("currentTimeTick"),t.currentTimeTimer=setTimeout(e,r)}var t=this;e()},r.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},r.prototype.setCurrentTime=function(e){var t=n.convert(e,"Date").valueOf(),i=(new Date).valueOf();this.offset=t-i,this.redraw()},r.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)},e.exports=r},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i="string",r="boolean",n="number",o="array",a="date",s="object",l="dom",h="moment",c="any",d={configure:{enabled:{"boolean":r},filter:{"boolean":r,"function":"function"},container:{dom:l},__type__:{object:s,"boolean":r,"function":"function"}},align:{string:i},rtl:{"boolean":r,undefined:"undefined"},autoResize:{"boolean":r},throttleRedraw:{number:n},clickToUse:{"boolean":r},dataAttributes:{string:i,array:o},editable:{add:{"boolean":r,undefined:"undefined"},remove:{"boolean":r,undefined:"undefined"},updateGroup:{"boolean":r,undefined:"undefined"},updateTime:{"boolean":r,undefined:"undefined"},__type__:{"boolean":r,object:s}},end:{number:n,date:a,string:i,moment:h},format:{minorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:s}},majorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:s}},__type__:{object:s}},moment:{"function":"function"},groupOrder:{string:i,"function":"function"},groupEditable:{add:{"boolean":r,undefined:"undefined"},remove:{"boolean":r,undefined:"undefined"},order:{"boolean":r,undefined:"undefined"},__type__:{"boolean":r,object:s}},groupOrderSwap:{"function":"function"},height:{string:i,number:n},hiddenDates:{start:{date:a,number:n,string:i,moment:h},end:{date:a,number:n,string:i,moment:h},repeat:{string:i},__type__:{object:s,array:o}},itemsAlwaysDraggable:{"boolean":r},locale:{string:i},locales:{__any__:{any:c},__type__:{object:s}},margin:{axis:{number:n},item:{horizontal:{number:n,undefined:"undefined"},vertical:{number:n,undefined:"undefined"},__type__:{object:s,number:n}},__type__:{object:s,number:n}},max:{date:a,number:n,string:i,moment:h},maxHeight:{number:n,string:i},maxMinorChars:{number:n},min:{date:a,number:n,string:i,moment:h},minHeight:{number:n,string:i},moveable:{"boolean":r},multiselect:{"boolean":r},multiselectPerGroup:{"boolean":r},onAdd:{"function":"function"},onUpdate:{"function":"function"},onMove:{"function":"function"},onMoving:{"function":"function"},onRemove:{"function":"function"},onAddGroup:{"function":"function"},onMoveGroup:{"function":"function"},onRemoveGroup:{"function":"function"},order:{"function":"function"},orientation:{axis:{string:i,undefined:"undefined"},item:{string:i,undefined:"undefined"},__type__:{string:i,object:s}},selectable:{"boolean":r},showCurrentTime:{"boolean":r},showMajorLabels:{"boolean":r},showMinorLabels:{"boolean":r},stack:{"boolean":r},snap:{"function":"function","null":"null"},start:{date:a,number:n,string:i,moment:h},template:{"function":"function"},groupTemplate:{"function":"function"},timeAxis:{scale:{string:i,undefined:"undefined"},step:{number:n,undefined:"undefined"},__type__:{object:s}},type:{string:i},width:{string:i,number:n},zoomable:{"boolean":r},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:n},zoomMin:{number:n},__type__:{object:s}},u={global:{align:["center","left","right"],direction:!1,autoResize:!0,throttleRedraw:[10,0,1e3,10],clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},groupsDraggable:!1,height:"",locale:"",margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,start:"",type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1]}};t.allOptions=d,t.configureOptions=u},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,i,r){if(!(Array.isArray(i)||i instanceof d||i instanceof u)&&i instanceof Object){var n=r;r=i,i=n}var o=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:h,width:null,height:null,maxHeight:null,minHeight:null},this.options=c.deepExtend({},this.defaultOptions),this._create(e),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:o._toScreen.bind(o),toGlobalScreen:o._toGlobalScreen.bind(o),toTime:o._toTime.bind(o),toGlobalTime:o._toGlobalTime.bind(o)}},this.range=new f(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new m(this.body),this.components.push(this.timeAxis),this.currentTime=new g(this.body),this.components.push(this.currentTime),this.linegraph=new y(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(e){o.emit("click",o.getEventProperties(e))}),this.on("doubletap",function(e){o.emit("doubleClick",o.getEventProperties(e))}),this.dom.root.oncontextmenu=function(e){o.emit("contextmenu",o.getEventProperties(e))},r&&this.setOptions(r),i&&this.setGroups(i),t&&this.setItems(t),this._redraw()}var o=i(26),a=r(o),s=i(29),l=r(s),h=(i(13),i(20),i(2)),c=i(1),d=i(9),u=i(11),f=i(30),p=i(33),m=i(44),g=i(48),v=i(46),y=i(51),A=i(29).printStyle,b=i(59).allOptions,E=i(59).configureOptions;n.prototype=new p,n.prototype.setOptions=function(e){var t=l["default"].validate(e,b);t===!0&&console.log("%cErrors have been found in the supplied options object.",A),p.prototype.setOptions.call(this,e)},n.prototype.setItems=function(e){var t,i=null==this.itemsData;if(t=e?e instanceof d||e instanceof u?e:new d(e,{type:{start:"Date",end:"Date"}}):null,this.itemsData=t,this.linegraph&&this.linegraph.setItems(t),i)if(void 0!=this.options.start||void 0!=this.options.end){var r=void 0!=this.options.start?this.options.start:null,n=void 0!=this.options.end?this.options.end:null;this.setWindow(r,n,{animation:!1})}else this.fit({animation:!1})},n.prototype.setGroups=function(e){var t;t=e?e instanceof d||e instanceof u?e:new d(e):null,this.groupsData=t,this.linegraph.setGroups(t)},n.prototype.getLegend=function(e,t,i){return void 0===t&&(t=15),void 0===i&&(i=15),void 0!==this.linegraph.groups[e]?this.linegraph.groups[e].getLegend(t,i):"cannot find group:'"+e+"'"},n.prototype.isGroupVisible=function(e){return void 0!==this.linegraph.groups[e]?this.linegraph.groups[e].visible&&(void 0===this.linegraph.options.groups.visibility[e]||1==this.linegraph.options.groups.visibility[e]):!1},n.prototype.getDataRange=function(){var e=null,t=null;for(var i in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(i)&&1==this.linegraph.groups[i].visible)for(var r=0;r<this.linegraph.groups[i].itemsData.length;r++){
var n=this.linegraph.groups[i].itemsData[r],o=c.convert(n.x,"Date").valueOf();e=null==e?o:e>o?o:e,t=null==t?o:o>t?o:t}return{min:null!=e?new Date(e):null,max:null!=t?new Date(t):null}},n.prototype.getEventProperties=function(e){var t=e.center?e.center.x:e.clientX,i=e.center?e.center.y:e.clientY,r=t-c.getAbsoluteLeft(this.dom.centerContainer),n=i-c.getAbsoluteTop(this.dom.centerContainer),o=this._toTime(r),a=v.customTimeFromTarget(e),s=c.getTarget(e),l=null;c.hasParent(s,this.timeAxis.dom.foreground)?l="axis":this.timeAxis2&&c.hasParent(s,this.timeAxis2.dom.foreground)?l="axis":c.hasParent(s,this.linegraph.yAxisLeft.dom.frame)?l="data-axis":c.hasParent(s,this.linegraph.yAxisRight.dom.frame)?l="data-axis":c.hasParent(s,this.linegraph.legendLeft.dom.frame)?l="legend":c.hasParent(s,this.linegraph.legendRight.dom.frame)?l="legend":null!=a?l="custom-time":c.hasParent(s,this.currentTime.bar)?l="current-time":c.hasParent(s,this.dom.center)&&(l="background");var h=[],d=this.linegraph.yAxisLeft,u=this.linegraph.yAxisRight;return d.hidden||h.push(d.screenToValue(n)),u.hidden||h.push(u.screenToValue(n)),{event:e,what:l,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:r,y:n,time:o,value:h}},n.prototype._createConfigurator=function(){return new a["default"](this,this.dom.container,E)},e.exports=n},function(e,t,i){function r(e,t){this.id=o.randomUUID(),this.body=e,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=o.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(e,t,r){i._onAdd(t.items)},update:function(e,t,r){i._onUpdate(t.items)},remove:function(e,t,r){i._onRemove(t.items)}},this.groupListeners={add:function(e,t,r){i._onAddGroups(t.items)},update:function(e,t,r){i._onUpdateGroups(t.items)},remove:function(e,t,r){i._onRemoveGroups(t.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(t),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){i.lastStart=i.body.range.start,i.svg.style.left=o.option.asSize(-i.props.width),i.forceGraphUpdate=!0,i.redraw.call(i)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=i(1),a=i(8),s=i(9),l=i(11),h=i(31),c=i(52),d=i(54),u=i(58),f=i(55),p=i(57),m=i(56),g="__ungrouped__";r.prototype=new h,r.prototype._create=function(){var e=document.createElement("div");e.className="vis-line-graph",this.dom.frame=e,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",e.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new c(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new c(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new u(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new u(this.body,this.options.legend,"right",this.options.groups),this.show()},r.prototype.setOptions=function(e){if(e){var t=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];void 0===e.graphHeight&&void 0!==e.height?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):void 0!==this.body.domProps.centerContainer.height&&void 0!==e.graphHeight&&parseInt((e.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),o.selectiveDeepExtend(t,this.options,e),o.mergeOptions(this.options,e,"interpolation"),o.mergeOptions(this.options,e,"drawPoints"),o.mergeOptions(this.options,e,"shaded"),o.mergeOptions(this.options,e,"legend"),e.interpolation&&"object"==n(e.interpolation)&&e.interpolation.parametrization&&("uniform"==e.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==e.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&void 0!==e.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==e.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(g)&&this.groups[g].setOptions(e)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))},r.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},r.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},r.prototype.setItems=function(e){var t,i=this,r=this.itemsData;if(e){if(!(e instanceof s||e instanceof l))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=e}else this.itemsData=null;if(r&&(o.forEach(this.itemListeners,function(e,t){r.off(t,e)}),t=r.getIds(),this._onRemove(t)),this.itemsData){var n=this.id;o.forEach(this.itemListeners,function(e,t){i.itemsData.on(t,e,n)}),t=this.itemsData.getIds(),this._onAdd(t)}},r.prototype.setGroups=function(e){var t,i=this;if(this.groupsData){o.forEach(this.groupListeners,function(e,t){i.groupsData.off(t,e)}),t=this.groupsData.getIds(),this.groupsData=null;for(var r=0;r<t.length;r++)this._removeGroup(t[r])}if(e){if(!(e instanceof s||e instanceof l))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=e}else this.groupsData=null;if(this.groupsData){var n=this.id;o.forEach(this.groupListeners,function(e,t){i.groupsData.on(t,e,n)}),t=this.groupsData.getIds(),this._onAddGroups(t)}},r.prototype._onUpdate=function(e){this._updateAllGroupData()},r.prototype._onAdd=function(e){this._onUpdate(e)},r.prototype._onRemove=function(e){this._onUpdate(e)},r.prototype._onUpdateGroups=function(e){this._updateAllGroupData()},r.prototype._onAddGroups=function(e){this._onUpdateGroups(e)},r.prototype._onRemoveGroups=function(e){for(var t=0;t<e.length;t++)this._removeGroup(e[t]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})},r.prototype._removeGroup=function(e){this.groups.hasOwnProperty(e)&&("right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e),this.legendLeft.redraw()),delete this.groups[e])},r.prototype._updateGroup=function(e,t){this.groups.hasOwnProperty(t)?(this.groups[t].update(e),"right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.updateGroup(t,this.groups[t]),this.legendRight.updateGroup(t,this.groups[t]),this.yAxisLeft.removeGroup(t),this.legendLeft.removeGroup(t)):(this.yAxisLeft.updateGroup(t,this.groups[t]),this.legendLeft.updateGroup(t,this.groups[t]),this.yAxisRight.removeGroup(t),this.legendRight.removeGroup(t))):(this.groups[t]=new d(e,t,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.addGroup(t,this.groups[t]),this.legendRight.addGroup(t,this.groups[t])):(this.yAxisLeft.addGroup(t,this.groups[t]),this.legendLeft.addGroup(t,this.groups[t]))),this.legendLeft.redraw(),this.legendRight.redraw()},r.prototype._updateAllGroupData=function(){if(null!=this.itemsData){for(var e={},t=this.itemsData.get(),i={},r=0;r<t.length;r++){var n=t[r],a=n.group;null!==a&&void 0!==a||(a=g),i.hasOwnProperty(a)?i[a]++:i[a]=1}for(var r=0;r<t.length;r++){var n=t[r],a=n.group;null!==a&&void 0!==a||(a=g),e.hasOwnProperty(a)||(e[a]=new Array(i[a]));var s=o.bridgeObject(n);s.x=o.convert(n.x,"Date"),s.orginalY=n.y,s.y=Number(n.y);var l=e[a].length-i[a]--;e[a][l]=s}for(var a in this.groups)this.groups.hasOwnProperty(a)&&(e.hasOwnProperty(a)||(e[a]=new Array(0)));for(var a in e)if(e.hasOwnProperty(a))if(0==e[a].length)this.groups.hasOwnProperty(a)&&this._removeGroup(a);else{var h=void 0;void 0!=this.groupsData&&(h=this.groupsData.get(a)),void 0==h&&(h={id:a,content:this.options.defaultGroup+a}),this._updateGroup(h,a),this.groups[a].setItems(e[a])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}},r.prototype.redraw=function(){var e=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,e=this._isResized()||e;var t=this.body.range.end-this.body.range.start,i=t!=this.lastVisibleInterval;if(this.lastVisibleInterval=t,1==e&&(this.svg.style.width=o.option.asSize(3*this.props.width),this.svg.style.left=o.option.asSize(-this.props.width),-1==(this.options.height+"").indexOf("%")&&1!=this.updateSVGheightOnResize||(this.updateSVGheight=!0)),1==this.updateSVGheight?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",1==e||1==i||1==this.abortedGraphUpdate||1==this.forceGraphUpdate)e=this._updateGraph()||e,this.forceGraphUpdate=!1;else if(0!=this.lastStart){var r=this.body.range.start-this.lastStart,n=this.body.range.end-this.body.range.start;if(0!=this.props.width){var a=this.props.width/n,s=r*a;this.svg.style.left=-this.props.width-s+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),e},r.prototype._getSortedGroupIds=function(){var e=[];for(var t in this.groups)if(this.groups.hasOwnProperty(t)){var i=this.groups[t];1!=i.visible||void 0!==this.options.groups.visibility[t]&&1!=this.options.groups.visibility[t]||e.push({id:t,zIndex:i.options.zIndex})}o.insertSort(e,function(e,t){var i=e.zIndex,r=t.zIndex;return void 0===i&&(i=0),void 0===r&&(r=0),i==r?0:r>i?-1:1});for(var r=new Array(e.length),n=0;n<e.length;n++)r[n]=e[n].id;return r},r.prototype._updateGraph=function(){if(a.prepareElements(this.svgElements),0!=this.props.width&&null!=this.itemsData){var e,t,i={},r=!1,n=this.body.util.toGlobalTime(-this.body.domProps.root.width),o=this.body.util.toGlobalTime(2*this.body.domProps.root.width),s=this._getSortedGroupIds();if(s.length>0){var l={};for(this._getRelevantData(s,l,n,o),this._applySampling(s,l),t=0;t<s.length;t++)this._convertXcoordinates(l[s[t]]);if(this._getYRanges(s,l,i),r=this._updateYAxis(s,i),1==r)return a.cleanupElements(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var h=void 0;for(t=0;t<s.length;t++)e=this.groups[s[t]],this.options.stack===!0&&"line"===this.options.style&&(void 0!=e.options.excludeFromStacking&&e.options.excludeFromStacking||(void 0!=h&&(this._stack(l[e.id],l[h.id]),1==e.options.shaded.enabled&&"group"!==e.options.shaded.orientation&&("top"==e.options.shaded.orientation&&"group"!==h.options.shaded.orientation?(h.options.shaded.orientation="group",h.options.shaded.groupId=e.id):(e.options.shaded.orientation="group",e.options.shaded.groupId=h.id))),h=e)),this._convertYcoordinates(l[s[t]],e);var c={};for(t=0;t<s.length;t++)if(e=this.groups[s[t]],"line"===e.options.style&&1==e.options.shaded.enabled){var d=l[s[t]];if(null==d||0==d.length)continue;if(c.hasOwnProperty(s[t])||(c[s[t]]=p.calcPath(d,e)),"group"===e.options.shaded.orientation){var u=e.options.shaded.groupId;if(-1===s.indexOf(u)){console.log(e.id+": Unknown shading group target given:"+u);continue}c.hasOwnProperty(u)||(c[u]=p.calcPath(l[u],this.groups[u])),p.drawShading(c[s[t]],e,c[u],this.framework)}else p.drawShading(c[s[t]],e,void 0,this.framework)}for(f.draw(s,l,this.framework),t=0;t<s.length;t++)if(e=this.groups[s[t]],l[s[t]].length>0)switch(e.options.style){case"line":c.hasOwnProperty(s[t])||(c[s[t]]=p.calcPath(l[s[t]],e)),p.draw(c[s[t]],e,this.framework);case"point":case"points":"point"!=e.options.style&&"points"!=e.options.style&&1!=e.options.drawPoints.enabled||m.draw(l[s[t]],e,this.framework);break;case"bar":}}}return a.cleanupElements(this.svgElements),!1},r.prototype._stack=function(e,t){var i,r,n,o,a;i=0;for(var s=0;s<e.length;s++){o=void 0,a=void 0;for(var l=i;l<t.length;l++){if(t[l].x===e[s].x){o=t[l],a=t[l],i=l;break}if(t[l].x>e[s].x){a=t[l],o=0==l?a:t[l-1],i=l;break}}void 0===a&&(o=t[t.length-1],a=t[t.length-1]),r=a.x-o.x,n=a.y-o.y,0==r?e[s].y=e[s].orginalY+a.y:e[s].y=e[s].orginalY+n/r*(e[s].x-o.x)+o.y}},r.prototype._getRelevantData=function(e,t,i,r){var n,a,s,l;if(e.length>0)for(a=0;a<e.length;a++){n=this.groups[e[a]];var h=n.getItems();if(1==n.options.sort){var c=function(e,t){return e.getTime()==t.getTime()?0:t>e?-1:1},d=Math.max(0,o.binarySearchValue(h,i,"x","before",c)),u=Math.min(h.length,o.binarySearchValue(h,r,"x","after",c)+1);0>=u&&(u=h.length);var f=new Array(u-d);for(s=d;u>s;s++)l=n.itemsData[s],f[s-d]=l;t[e[a]]=f}else t[e[a]]=n.itemsData}},r.prototype._applySampling=function(e,t){var i;if(e.length>0)for(var r=0;r<e.length;r++)if(i=this.groups[e[r]],1==i.options.sampling){var n=t[e[r]];if(n.length>0){var o=1,a=n.length,s=this.body.util.toGlobalScreen(n[n.length-1].x)-this.body.util.toGlobalScreen(n[0].x),l=a/s;o=Math.min(Math.ceil(.2*a),Math.max(1,Math.round(l)));for(var h=new Array(a),c=0;a>c;c+=o){var d=Math.round(c/o);h[d]=n[c]}t[e[r]]=h.splice(0,Math.round(a/o))}}},r.prototype._getYRanges=function(e,t,i){var r,n,o,a,s=[],l=[];if(e.length>0){for(o=0;o<e.length;o++)r=t[e[o]],a=this.groups[e[o]].options,r.length>0&&(n=this.groups[e[o]],a.stack===!0&&"bar"===a.style?"left"===a.yAxisOrientation?s=s.concat(n.getItems()):l=l.concat(n.getItems()):i[e[o]]=n.getYRange(r,e[o]));f.getStackedYRange(s,i,e,"__barStackLeft","left"),f.getStackedYRange(l,i,e,"__barStackRight","right")}},r.prototype._updateYAxis=function(e,t){var i,r,n=!1,o=!1,a=!1,s=1e9,l=1e9,h=-1e9,c=-1e9;if(e.length>0){for(var d=0;d<e.length;d++){var u=this.groups[e[d]];u&&"right"!=u.options.yAxisOrientation?(o=!0,s=1e9,h=-1e9):u&&u.options.yAxisOrientation&&(a=!0,l=1e9,c=-1e9)}for(var d=0;d<e.length;d++)t.hasOwnProperty(e[d])&&t[e[d]].ignore!==!0&&(i=t[e[d]].min,r=t[e[d]].max,"right"!=t[e[d]].yAxisOrientation?(o=!0,s=s>i?i:s,h=r>h?r:h):(a=!0,l=l>i?i:l,c=r>c?r:c));1==o&&this.yAxisLeft.setRange(s,h),1==a&&this.yAxisRight.setRange(l,c)}n=this._toggleAxisVisiblity(o,this.yAxisLeft)||n,n=this._toggleAxisVisiblity(a,this.yAxisRight)||n,1==a&&1==o?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!o,this.yAxisRight.masterAxis=this.yAxisLeft,0==this.yAxisRight.master?(1==a?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,n=this.yAxisLeft.redraw()||n,n=this.yAxisRight.redraw()||n):n=this.yAxisRight.redraw()||n;for(var f=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"],d=0;d<f.length;d++)-1!=e.indexOf(f[d])&&e.splice(e.indexOf(f[d]),1);return n},r.prototype._toggleAxisVisiblity=function(e,t){var i=!1;return 0==e?t.dom.frame.parentNode&&0==t.hidden&&(t.hide(),i=!0):t.dom.frame.parentNode||1!=t.hidden||(t.show(),i=!0),i},r.prototype._convertXcoordinates=function(e){for(var t=this.body.util.toScreen,i=0;i<e.length;i++)e[i].screen_x=t(e[i].x)+this.props.width,e[i].screen_y=e[i].y},r.prototype._convertYcoordinates=function(e,t){var i=this.yAxisLeft,r=Number(this.svg.style.height.replace("px",""));"right"==t.options.yAxisOrientation&&(i=this.yAxisRight);for(var n=0;n<e.length;n++)e[n].screen_y=Math.round(i.convertValue(e[n].y));t.setZeroPosition(Math.min(r,i.convertValue(0)))},e.exports=r},function(e,t,i){function r(e,t,i,r){this.id=n.randomUUID(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(e){return""+parseFloat(e.toPrecision(3))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(e){return""+parseFloat(e.toPrecision(3))},title:{text:void 0,style:void 0}}},this.linegraphOptions=r,this.linegraphSVG=i,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=n.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(t),this.width=Number((""+this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};var o=this;this.body.emitter.on("verticalDrag",function(){o.dom.lineContainer.style.top=o.body.domProps.scrollTop+"px"})}var n=i(1),o=i(8),a=i(31),s=i(53);r.prototype=new a,r.prototype.addGroup=function(e,t){this.groups.hasOwnProperty(e)||(this.groups[e]=t),this.amountOfGroups+=1},r.prototype.updateGroup=function(e,t){this.groups.hasOwnProperty(e)||(this.amountOfGroups+=1),this.groups[e]=t},r.prototype.removeGroup=function(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],this.amountOfGroups-=1)},r.prototype.setOptions=function(e){if(e){var t=!1;this.options.orientation!=e.orientation&&void 0!==e.orientation&&(t=!0);var i=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];n.selectiveDeepExtend(i,this.options,e),this.minWidth=Number((""+this.options.width).replace("px","")),t===!0&&this.dom.frame&&(this.hide(),this.show())}},r.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)},r.prototype._redrawGroupIcons=function(){o.prepareElements(this.svgElements);var e,t=this.options.iconWidth,i=15,r=4,n=r+.5*i;e="left"===this.options.orientation?r:this.width-t-r;var a=Object.keys(this.groups);a.sort(function(e,t){return t>e?-1:1});for(var s=0;s<a.length;s++){var l=a[s];this.groups[l].visible!==!0||void 0!==this.linegraphOptions.visibility[l]&&this.linegraphOptions.visibility[l]!==!0||(this.groups[l].getLegend(t,i,this.framework,e,n),n+=i+r)}o.cleanupElements(this.svgElements),this.iconsRemoved=!1},r.prototype._cleanupIcons=function(){this.iconsRemoved===!1&&(o.prepareElements(this.svgElements),o.cleanupElements(this.svgElements),this.iconsRemoved=!0)},r.prototype.show=function(){this.hidden=!1,this.dom.frame.parentNode||(this.options.rtl?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.left.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)},r.prototype.hide=function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)},r.prototype.setRange=function(e,t){this.range.start=e,this.range.end=t},r.prototype.redraw=function(){var e=!1,t=0;this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px";for(var i in this.groups)this.groups.hasOwnProperty(i)&&(this.groups[i].visible!==!0||void 0!==this.linegraphOptions.visibility[i]&&this.linegraphOptions.visibility[i]!==!0||t++);if(0===this.amountOfGroups||0===t)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=this.height+"px",this.width=this.options.visible===!0?Number((""+this.options.width).replace("px","")):0;var r=this.props,n=this.dom.frame;n.className="vis-data-axis",this._calculateCharSize();var o=this.options.orientation,a=this.options.showMinorLabels,s=this.options.showMajorLabels;r.minorLabelHeight=a?r.minorCharHeight:0,r.majorLabelHeight=s?r.majorCharHeight:0,r.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset,r.minorLineHeight=1,r.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset,r.majorLineHeight=1,"left"===o?(n.style.top="0",n.style.left="0",n.style.bottom="",n.style.width=this.width+"px",n.style.height=this.height+"px",this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(n.style.top="",n.style.bottom="0",n.style.left="0",n.style.width=this.width+"px",n.style.height=this.height+"px",this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),e=this._redrawLabels(),e=this._isResized()||e,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(o)}return e},r.prototype._redrawLabels=function(){var e=this,t=!1;o.prepareElements(this.DOMelements.lines),o.prepareElements(this.DOMelements.labels);var i=this.options.orientation,r=void 0!=this.options[i].range?this.options[i].range:{},n=!0;void 0!=r.max&&(this.range.end=r.max,n=!1);var a=!0;void 0!=r.min&&(this.range.start=r.min,a=!1),this.scale=new s(this.range.start,this.range.end,a,n,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[i].format),this.master===!1&&void 0!=this.masterAxis&&this.scale.followScale(this.masterAxis.scale),this.maxLabelSize=0;var l=this.scale.getLines();l.forEach(function(t){var r=t.y,n=t.major;e.options.showMinorLabels&&n===!1&&e._redrawLabel(r-2,t.val,i,"vis-y-axis vis-minor",e.props.minorCharHeight),n&&r>=0&&e._redrawLabel(r-2,t.val,i,"vis-y-axis vis-major",e.props.majorCharHeight),e.master===!0&&(n?e._redrawLine(r,i,"vis-grid vis-horizontal vis-major",e.options.majorLinesOffset,e.props.majorLineWidth):e._redrawLine(r,i,"vis-grid vis-horizontal vis-minor",e.options.minorLinesOffset,e.props.minorLineWidth))});var h=0;void 0!==this.options[i].title&&void 0!==this.options[i].title.text&&(h=this.props.titleCharHeight);var c=this.options.icons===!0?Math.max(this.options.iconWidth,h)+this.options.labelOffsetX+15:h+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-c&&this.options.visible===!0?(this.width=this.maxLabelSize+c,this.options.width=this.width+"px",o.cleanupElements(this.DOMelements.lines),o.cleanupElements(this.DOMelements.labels),this.redraw(),t=!0):this.maxLabelSize<this.width-c&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+c),this.options.width=this.width+"px",o.cleanupElements(this.DOMelements.lines),o.cleanupElements(this.DOMelements.labels),this.redraw(),t=!0):(o.cleanupElements(this.DOMelements.lines),o.cleanupElements(this.DOMelements.labels),t=!1),t},r.prototype.convertValue=function(e){return this.scale.convertValue(e)},r.prototype.screenToValue=function(e){return this.scale.screenToValue(e)},r.prototype._redrawLabel=function(e,t,i,r,n){var a=o.getDOMElement("div",this.DOMelements.labels,this.dom.frame);a.className=r,a.innerHTML=t,"left"===i?(a.style.left="-"+this.options.labelOffsetX+"px",a.style.textAlign="right"):(a.style.right="-"+this.options.labelOffsetX+"px",a.style.textAlign="left"),a.style.top=e-.5*n+this.options.labelOffsetY+"px",t+="";var s=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<t.length*s&&(this.maxLabelSize=t.length*s)},r.prototype._redrawLine=function(e,t,i,r,n){if(this.master===!0){var a=o.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);a.className=i,a.innerHTML="","left"===t?a.style.left=this.width-r+"px":a.style.right=this.width-r+"px",a.style.width=n+"px",a.style.top=e+"px"}},r.prototype._redrawTitle=function(e){if(o.prepareElements(this.DOMelements.title),void 0!==this.options[e].title&&void 0!==this.options[e].title.text){var t=o.getDOMElement("div",this.DOMelements.title,this.dom.frame);t.className="vis-y-axis vis-title vis-"+e,t.innerHTML=this.options[e].title.text,void 0!==this.options[e].title.style&&n.addCssText(t,this.options[e].title.style),"left"===e?t.style.left=this.props.titleCharHeight+"px":t.style.right=this.props.titleCharHeight+"px",t.style.width=this.height+"px"}o.cleanupElements(this.DOMelements.title)},r.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-minor vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.minorCharHeight=t.clientHeight,this.props.minorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("majorCharHeight"in this.props)){var i=document.createTextNode("0"),r=document.createElement("div");r.className="vis-y-axis vis-major vis-measure",r.appendChild(i),this.dom.frame.appendChild(r),this.props.majorCharHeight=r.clientHeight,this.props.majorCharWidth=r.clientWidth,this.dom.frame.removeChild(r)}if(!("titleCharHeight"in this.props)){var n=document.createTextNode("0"),o=document.createElement("div");o.className="vis-y-axis vis-title vis-measure",o.appendChild(n),this.dom.frame.appendChild(o),this.props.titleCharHeight=o.clientHeight,this.props.titleCharWidth=o.clientWidth,this.dom.frame.removeChild(o)}},e.exports=r},function(e,t){function i(e,t,i,r,n,o){var a=arguments.length<=6||void 0===arguments[6]?!1:arguments[6],s=arguments.length<=7||void 0===arguments[7]?!1:arguments[7];if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=n,this.majorCharHeight=o,this._start=e,this._end=t,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=a,this.autoScaleStart=i,this.autoScaleEnd=r,this.formattingFunction=s,i||r){var l=this,h=function(e){var t=e-e%(l.magnitudefactor*l.minorSteps[l.minorStepIdx]);return e%(l.magnitudefactor*l.minorSteps[l.minorStepIdx])>.5*(l.magnitudefactor*l.minorSteps[l.minorStepIdx])?t+l.magnitudefactor*l.minorSteps[l.minorStepIdx]:t};i&&(this._start-=2*this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._start=h(this._start)),r&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=h(this._end)),this.determineScale()}}i.prototype.setCharHeight=function(e){this.majorCharHeight=e},i.prototype.setHeight=function(e){this.containerHeight=e},i.prototype.determineScale=function(){var e=this._end-this._start;this.scale=this.containerHeight/e;var t=this.majorCharHeight/this.scale,i=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,i);var r=0;0>i&&(r=i);for(var n=!1,o=r;Math.abs(o)<=Math.abs(i);o++){this.magnitudefactor=Math.pow(10,o);for(var a=0;a<this.minorSteps.length;a++){var s=this.magnitudefactor*this.minorSteps[a];if(s>=t){n=!0,this.minorStepIdx=a;break}}if(n===!0)break}},i.prototype.is_major=function(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0},i.prototype.getStep=function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]},i.prototype.getFirstMajor=function(){var e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)},i.prototype.formatValue=function(e){var t=e.toPrecision(5);return"function"==typeof this.formattingFunction&&(t=this.formattingFunction(e)),"number"==typeof t?""+t:"string"==typeof t?t:e.toPrecision(5)},i.prototype.getLines=function(){for(var e=[],t=this.getStep(),i=(t-this._start%t)%t,r=this._start+i;this._end-r>1e-5;r+=t)r!=this._start&&e.push({major:this.is_major(r),y:this.convertValue(r),val:this.formatValue(r)});return e},i.prototype.followScale=function(e){var t=this.minorStepIdx,i=this._start,r=this._end,n=this,o=function(){n.magnitudefactor*=2},a=function(){n.magnitudefactor/=2};e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,2==t?o():(o(),o())):(this.minorStepIdx=2,1==t?a():(a(),a())));for(var s=(e.getLines(),e.convertValue(0)),l=e.getStep()*e.scale,h=!1,c=0;!h&&c++<5;){this.scale=l/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var d=this.containerHeight/this.scale;this._start=i,this._end=this._start+d;var u=this._end*this.scale,f=this.magnitudefactor*this.majorSteps[this.minorStepIdx],p=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){var m=s-u;this._end+=m/this.scale,this._start=this._end-d}else this.autoScaleStart?(this._start-=p/this.scale,this._end=this._start+d):(this._start+=f-p/this.scale,this._end=this._start+d);if(!this.autoScaleEnd&&this._end>r+1e-5)a(),h=!1;else{if(!this.autoScaleStart&&this._start<i-1e-5){if(!(this.zeroAlign&&i>=0)){a(),h=!1;continue}console.warn("Can't adhere to given 'min' range, due to zeroalign")}this.autoScaleStart&&this.autoScaleEnd&&r-i>d?(o(),h=!1):h=!0}}},i.prototype.convertValue=function(e){return this.containerHeight-(e-this._start)*this.scale},i.prototype.screenToValue=function(e){return(this.containerHeight-e)/this.scale+this._start},e.exports=i},function(e,t,i){function r(e,t,i,r){this.id=t;var n=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=o.selectiveBridgeObject(n,i),this.usingDefaultStyle=void 0===e.className,this.groupsUsingDefaultStyles=r,this.zeroPosition=0,this.update(e),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=void 0===e.visible?!0:e.visible}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=i(1),a=(i(8),i(55)),s=i(57),l=i(56);r.prototype.setItems=function(e){null!=e?(this.itemsData=e,1==this.options.sort&&o.insertSort(this.itemsData,function(e,t){return e.x>t.x?1:-1})):this.itemsData=[]},r.prototype.getItems=function(){return this.itemsData},r.prototype.setZeroPosition=function(e){this.zeroPosition=e},r.prototype.setOptions=function(e){if(void 0!==e){var t=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];o.selectiveDeepExtend(t,this.options,e),"function"==typeof e.drawPoints&&(e.drawPoints={onRender:e.drawPoints}),o.mergeOptions(this.options,e,"interpolation"),o.mergeOptions(this.options,e,"drawPoints"),o.mergeOptions(this.options,e,"shaded"),e.interpolation&&"object"==n(e.interpolation)&&e.interpolation.parametrization&&("uniform"==e.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==e.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5));
}},r.prototype.update=function(e){this.group=e,this.content=e.content||"graph",this.className=e.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=void 0===e.visible?!0:e.visible,this.style=e.style,this.setOptions(e.options)},r.prototype.getLegend=function(e,t,i,r,n){if(void 0==i||null==i){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");i={svg:o,svgElements:{},options:this.options,groups:[this]}}switch(void 0!=r&&null!=r||(r=0),void 0!=n&&null!=n||(n=.5*t),this.options.style){case"line":s.drawIcon(this,r,n,e,t,i);break;case"points":case"point":l.drawIcon(this,r,n,e,t,i);break;case"bar":a.drawIcon(this,r,n,e,t,i)}return{icon:i.svg,label:this.content,orientation:this.options.yAxisOrientation}},r.prototype.getYRange=function(e){for(var t=e[0].y,i=e[0].y,r=0;r<e.length;r++)t=t>e[r].y?e[r].y:t,i=i<e[r].y?e[r].y:i;return{min:t,max:i,yAxisOrientation:this.options.yAxisOrientation}},e.exports=r},function(e,t,i){function r(e,t){}var n=i(8),o=i(56);r.drawIcon=function(e,t,i,r,o,a){var s=.5*o,l=n.getSVGElement("rect",a.svgElements,a.svg);l.setAttributeNS(null,"x",t),l.setAttributeNS(null,"y",i-s),l.setAttributeNS(null,"width",r),l.setAttributeNS(null,"height",2*s),l.setAttributeNS(null,"class","vis-outline");var h=Math.round(.3*r),c=e.options.barChart.width,d=c/h,u=Math.round(.4*o),f=Math.round(.75*o),p=Math.round((r-2*h)/3);if(n.drawBar(t+.5*h+p,i+s-u-1,h,u,e.className+" vis-bar",a.svgElements,a.svg,e.style),n.drawBar(t+1.5*h+p+2,i+s-f-1,h,f,e.className+" vis-bar",a.svgElements,a.svg,e.style),1==e.options.drawPoints.enabled){var m={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size/d,className:e.className};n.drawPoint(t+.5*h+p,i+s-u-1,m,a.svgElements,a.svg),n.drawPoint(t+1.5*h+p+2,i+s-f-1,m,a.svgElements,a.svg)}},r.draw=function(e,t,i){var a,s,l,h,c,d,u=[],f={},p=0;for(c=0;c<e.length;c++)if(h=i.groups[e[c]],"bar"===h.options.style&&h.visible===!0&&(void 0===i.options.groups.visibility[e[c]]||i.options.groups.visibility[e[c]]===!0))for(d=0;d<t[e[c]].length;d++)u.push({screen_x:t[e[c]][d].screen_x,screen_y:t[e[c]][d].screen_y,x:t[e[c]][d].x,y:t[e[c]][d].y,groupId:e[c],label:t[e[c]][d].label}),p+=1;if(0!==p)for(u.sort(function(e,t){return e.screen_x===t.screen_x?e.groupId<t.groupId?-1:1:e.screen_x-t.screen_x}),r._getDataIntersections(f,u),c=0;c<u.length;c++){h=i.groups[u[c].groupId];var m=void 0!=h.options.barChart.minWidth?h.options.barChart.minWidth:.1*h.options.barChart.width;s=u[c].screen_x;var g=0;if(void 0===f[s])c+1<u.length&&(a=Math.abs(u[c+1].screen_x-s)),l=r._getSafeDrawData(a,h,m);else{var v=c+(f[s].amount-f[s].resolved);c-(f[s].resolved+1),v<u.length&&(a=Math.abs(u[v].screen_x-s)),l=r._getSafeDrawData(a,h,m),f[s].resolved+=1,h.options.stack===!0&&h.options.excludeFromStacking!==!0?u[c].screen_y<h.zeroPosition?(g=f[s].accumulatedNegative,f[s].accumulatedNegative+=h.zeroPosition-u[c].screen_y):(g=f[s].accumulatedPositive,f[s].accumulatedPositive+=h.zeroPosition-u[c].screen_y):h.options.barChart.sideBySide===!0&&(l.width=l.width/f[s].amount,l.offset+=f[s].resolved*l.width-.5*l.width*(f[s].amount+1))}if(n.drawBar(u[c].screen_x+l.offset,u[c].screen_y-g,l.width,h.zeroPosition-u[c].screen_y,h.className+" vis-bar",i.svgElements,i.svg,h.style),h.options.drawPoints.enabled===!0){var y={screen_x:u[c].screen_x,screen_y:u[c].screen_y-g,x:u[c].x,y:u[c].y,groupId:u[c].groupId,label:u[c].label};o.draw([y],h,i,l.offset)}}},r._getDataIntersections=function(e,t){for(var i,r=0;r<t.length;r++)r+1<t.length&&(i=Math.abs(t[r+1].screen_x-t[r].screen_x)),r>0&&(i=Math.min(i,Math.abs(t[r-1].screen_x-t[r].screen_x))),0===i&&(void 0===e[t[r].screen_x]&&(e[t[r].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),e[t[r].screen_x].amount+=1)},r._getSafeDrawData=function(e,t,i){var r,n;return e<t.options.barChart.width&&e>0?(r=i>e?i:e,n=0,"left"===t.options.barChart.align?n-=.5*e:"right"===t.options.barChart.align&&(n+=.5*e)):(r=t.options.barChart.width,n=0,"left"===t.options.barChart.align?n-=.5*t.options.barChart.width:"right"===t.options.barChart.align&&(n+=.5*t.options.barChart.width)),{width:r,offset:n}},r.getStackedYRange=function(e,t,i,n,o){if(e.length>0){e.sort(function(e,t){return e.screen_x===t.screen_x?e.groupId<t.groupId?-1:1:e.screen_x-t.screen_x});var a={};r._getDataIntersections(a,e),t[n]=r._getStackedYRange(a,e),t[n].yAxisOrientation=o,i.push(n)}},r._getStackedYRange=function(e,t){for(var i,r=t[0].screen_y,n=t[0].screen_y,o=0;o<t.length;o++)i=t[o].screen_x,void 0===e[i]?(r=r>t[o].screen_y?t[o].screen_y:r,n=n<t[o].screen_y?t[o].screen_y:n):t[o].screen_y<0?e[i].accumulatedNegative+=t[o].screen_y:e[i].accumulatedPositive+=t[o].screen_y;for(var a in e)e.hasOwnProperty(a)&&(r=r>e[a].accumulatedNegative?e[a].accumulatedNegative:r,r=r>e[a].accumulatedPositive?e[a].accumulatedPositive:r,n=n<e[a].accumulatedNegative?e[a].accumulatedNegative:n,n=n<e[a].accumulatedPositive?e[a].accumulatedPositive:n);return{min:r,max:n}},e.exports=r},function(e,t,i){function r(e,t){}function n(e,t){return t="undefined"==typeof t?{}:t,{style:t.style||e.options.drawPoints.style,styles:t.styles||e.options.drawPoints.styles,size:t.size||e.options.drawPoints.size,className:t.className||e.className}}function o(e,t){var i=void 0;return e.options&&e.options.drawPoints&&e.options.drawPoints.onRender&&"function"==typeof e.options.drawPoints.onRender&&(i=e.options.drawPoints.onRender),t.group.options&&t.group.options.drawPoints&&t.group.options.drawPoints.onRender&&"function"==typeof t.group.options.drawPoints.onRender&&(i=t.group.options.drawPoints.onRender),i}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=i(8);r.draw=function(e,t,i,r){r=r||0;for(var l=o(i,t),h=0;h<e.length;h++)if(l){var c=l(e[h],t);c!==!0&&"object"!==("undefined"==typeof c?"undefined":a(c))||s.drawPoint(e[h].screen_x+r,e[h].screen_y,n(t,c),i.svgElements,i.svg,e[h].label)}else s.drawPoint(e[h].screen_x+r,e[h].screen_y,n(t),i.svgElements,i.svg,e[h].label)},r.drawIcon=function(e,t,i,r,o,a){var l=.5*o,h=s.getSVGElement("rect",a.svgElements,a.svg);h.setAttributeNS(null,"x",t),h.setAttributeNS(null,"y",i-l),h.setAttributeNS(null,"width",r),h.setAttributeNS(null,"height",2*l),h.setAttributeNS(null,"class","vis-outline"),s.drawPoint(t+.5*r,i,n(e),a.svgElements,a.svg)},e.exports=r},function(e,t,i){function r(e,t){}var n=i(8);r.calcPath=function(e,t){if(null!=e&&e.length>0){var i=[];return i=1==t.options.interpolation.enabled?r._catmullRom(e,t):r._linear(e)}},r.drawIcon=function(e,t,i,r,o,a){var s,l,h=.5*o,c=n.getSVGElement("rect",a.svgElements,a.svg);if(c.setAttributeNS(null,"x",t),c.setAttributeNS(null,"y",i-h),c.setAttributeNS(null,"width",r),c.setAttributeNS(null,"height",2*h),c.setAttributeNS(null,"class","vis-outline"),s=n.getSVGElement("path",a.svgElements,a.svg),s.setAttributeNS(null,"class",e.className),void 0!==e.style&&s.setAttributeNS(null,"style",e.style),s.setAttributeNS(null,"d","M"+t+","+i+" L"+(t+r)+","+i),1==e.options.shaded.enabled&&(l=n.getSVGElement("path",a.svgElements,a.svg),"top"==e.options.shaded.orientation?l.setAttributeNS(null,"d","M"+t+", "+(i-h)+"L"+t+","+i+" L"+(t+r)+","+i+" L"+(t+r)+","+(i-h)):l.setAttributeNS(null,"d","M"+t+","+i+" L"+t+","+(i+h)+" L"+(t+r)+","+(i+h)+"L"+(t+r)+","+i),l.setAttributeNS(null,"class",e.className+" vis-icon-fill"),void 0!==e.options.shaded.style&&""!==e.options.shaded.style&&l.setAttributeNS(null,"style",e.options.shaded.style)),1==e.options.drawPoints.enabled){var d={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size,className:e.className};n.drawPoint(t+.5*r,i,d,a.svgElements,a.svg)}},r.drawShading=function(e,t,i,r){if(1==t.options.shaded.enabled){var o=Number(r.svg.style.height.replace("px","")),a=n.getSVGElement("path",r.svgElements,r.svg),s="L";1==t.options.interpolation.enabled&&(s="C");var l,h=0;h="top"==t.options.shaded.orientation?0:"bottom"==t.options.shaded.orientation?o:Math.min(Math.max(0,t.zeroPosition),o),l="group"==t.options.shaded.orientation&&null!=i&&void 0!=i?"M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,s,!1)+" L"+i[i.length-1][0]+","+i[i.length-1][1]+" "+this.serializePath(i,s,!0)+i[0][0]+","+i[0][1]+" Z":"M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,s,!1)+" V"+h+" H"+e[0][0]+" Z",a.setAttributeNS(null,"class",t.className+" vis-fill"),void 0!==t.options.shaded.style&&a.setAttributeNS(null,"style",t.options.shaded.style),a.setAttributeNS(null,"d",l)}},r.draw=function(e,t,i){if(null!=e&&void 0!=e){var r=n.getSVGElement("path",i.svgElements,i.svg);r.setAttributeNS(null,"class",t.className),void 0!==t.style&&r.setAttributeNS(null,"style",t.style);var o="L";1==t.options.interpolation.enabled&&(o="C"),r.setAttributeNS(null,"d","M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,o,!1))}},r.serializePath=function(e,t,i){if(e.length<2)return"";var r=t;if(i)for(var n=e.length-2;n>0;n--)r+=e[n][0]+","+e[n][1]+" ";else for(var n=1;n<e.length;n++)r+=e[n][0]+","+e[n][1]+" ";return r},r._catmullRomUniform=function(e){var t,i,r,n,o,a,s=[];s.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var l=1/6,h=e.length,c=0;h-1>c;c++)t=0==c?e[0]:e[c-1],i=e[c],r=e[c+1],n=h>c+2?e[c+2]:r,o={screen_x:(-t.screen_x+6*i.screen_x+r.screen_x)*l,screen_y:(-t.screen_y+6*i.screen_y+r.screen_y)*l},a={screen_x:(i.screen_x+6*r.screen_x-n.screen_x)*l,screen_y:(i.screen_y+6*r.screen_y-n.screen_y)*l},s.push([o.screen_x,o.screen_y]),s.push([a.screen_x,a.screen_y]),s.push([r.screen_x,r.screen_y]);return s},r._catmullRom=function(e,t){var i=t.options.interpolation.alpha;if(0==i||void 0===i)return this._catmullRomUniform(e);var r,n,o,a,s,l,h,c,d,u,f,p,m,g,v,y,A,b,E,x=[];x.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var w=e.length,T=0;w-1>T;T++)r=0==T?e[0]:e[T-1],n=e[T],o=e[T+1],a=w>T+2?e[T+2]:o,h=Math.sqrt(Math.pow(r.screen_x-n.screen_x,2)+Math.pow(r.screen_y-n.screen_y,2)),c=Math.sqrt(Math.pow(n.screen_x-o.screen_x,2)+Math.pow(n.screen_y-o.screen_y,2)),d=Math.sqrt(Math.pow(o.screen_x-a.screen_x,2)+Math.pow(o.screen_y-a.screen_y,2)),g=Math.pow(d,i),y=Math.pow(d,2*i),v=Math.pow(c,i),A=Math.pow(c,2*i),E=Math.pow(h,i),b=Math.pow(h,2*i),u=2*b+3*E*v+A,f=2*y+3*g*v+A,p=3*E*(E+v),p>0&&(p=1/p),m=3*g*(g+v),m>0&&(m=1/m),s={screen_x:(-A*r.screen_x+u*n.screen_x+b*o.screen_x)*p,screen_y:(-A*r.screen_y+u*n.screen_y+b*o.screen_y)*p},l={screen_x:(y*n.screen_x+f*o.screen_x-A*a.screen_x)*m,screen_y:(y*n.screen_y+f*o.screen_y-A*a.screen_y)*m},0==s.screen_x&&0==s.screen_y&&(s=n),0==l.screen_x&&0==l.screen_y&&(l=o),x.push([s.screen_x,s.screen_y]),x.push([l.screen_x,l.screen_y]),x.push([o.screen_x,o.screen_y]);return x},r._linear=function(e){for(var t=[],i=0;i<e.length;i++)t.push([e[i].screen_x,e[i].screen_y]);return t},e.exports=r},function(e,t,i){function r(e,t,i,r){this.body=e,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=i,this.options=n.extend({},this.defaultOptions),this.linegraphOptions=r,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(t)}var n=i(1),o=i(8),a=i(31);r.prototype=new a,r.prototype.clear=function(){this.groups={},this.amountOfGroups=0},r.prototype.addGroup=function(e,t){1!=t.options.excludeFromLegend&&(this.groups.hasOwnProperty(e)||(this.groups[e]=t),this.amountOfGroups+=1)},r.prototype.updateGroup=function(e,t){this.groups[e]=t},r.prototype.removeGroup=function(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],this.amountOfGroups-=1)},r.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},r.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},r.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},r.prototype.setOptions=function(e){var t=["enabled","orientation","icons","left","right"];n.selectiveDeepExtend(t,this.options,e)},r.prototype.redraw=function(){var e=0,t=Object.keys(this.groups);t.sort(function(e,t){return t>e?-1:1});for(var i=0;i<t.length;i++){var r=t[i];1!=this.groups[r].visible||void 0!==this.linegraphOptions.visibility[r]&&1!=this.linegraphOptions.visibility[r]||e++}if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==e)this.hide();else{if(this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position)this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var n=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+n+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());for(var o="",i=0;i<t.length;i++){var r=t[i];1!=this.groups[r].visible||void 0!==this.linegraphOptions.visibility[r]&&1!=this.linegraphOptions.visibility[r]||(o+=this.groups[r].content+"<br />")}this.dom.textArea.innerHTML=o,this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},r.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var e=Object.keys(this.groups);e.sort(function(e,t){return t>e?-1:1}),o.resetElements(this.svgElements);var t=window.getComputedStyle(this.dom.frame).paddingTop,i=Number(t.replace("px","")),r=i,n=this.options.iconSize,a=.75*this.options.iconSize,s=i+.5*a+3;this.svg.style.width=n+5+i+"px";for(var l=0;l<e.length;l++){var h=e[l];1!=this.groups[h].visible||void 0!==this.linegraphOptions.visibility[h]&&1!=this.linegraphOptions.visibility[h]||(this.groups[h].getLegend(n,a,this.framework,r,s),s+=a+this.options.iconSpacing)}}},e.exports=r},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i="string",r="boolean",n="number",o="array",a="date",s="object",l="dom",h="moment",c="any",d={configure:{enabled:{"boolean":r},filter:{"boolean":r,"function":"function"},container:{dom:l},__type__:{object:s,"boolean":r,"function":"function"}},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:i},sort:{"boolean":r},sampling:{"boolean":r},stack:{"boolean":r},graphHeight:{string:i,number:n},shaded:{enabled:{"boolean":r},orientation:{string:["bottom","top","zero","group"]},groupId:{object:s},__type__:{"boolean":r,object:s}},style:{string:["line","bar","points"]},barChart:{width:{number:n},minWidth:{number:n},sideBySide:{"boolean":r},align:{string:["left","center","right"]},__type__:{object:s}},interpolation:{enabled:{"boolean":r},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:n},__type__:{object:s,"boolean":r}},drawPoints:{enabled:{"boolean":r},onRender:{"function":"function"},size:{number:n},style:{string:["square","circle"]},__type__:{object:s,"boolean":r,"function":"function"}},dataAxis:{showMinorLabels:{"boolean":r},showMajorLabels:{"boolean":r},icons:{"boolean":r},width:{string:i,number:n},visible:{"boolean":r},alignZeros:{"boolean":r},left:{range:{min:{number:n},max:{number:n},__type__:{object:s}},format:{"function":"function"},title:{text:{string:i,number:n},style:{string:i},__type__:{object:s}},__type__:{object:s}},right:{range:{min:{number:n},max:{number:n},__type__:{object:s}},format:{"function":"function"},title:{text:{string:i,number:n},style:{string:i},__type__:{object:s}},__type__:{object:s}},__type__:{object:s}},legend:{enabled:{"boolean":r},icons:{"boolean":r},left:{visible:{"boolean":r},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:s}},right:{visible:{"boolean":r},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:s}},__type__:{object:s,"boolean":r}},groups:{visibility:{any:c},__type__:{object:s}},autoResize:{"boolean":r},throttleRedraw:{number:n},clickToUse:{"boolean":r},end:{number:n,date:a,string:i,moment:h},format:{minorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:s}},majorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:s}},__type__:{object:s}},moment:{"function":"function"},height:{string:i,number:n},hiddenDates:{start:{date:a,number:n,string:i,moment:h},end:{date:a,number:n,string:i,moment:h},repeat:{string:i},__type__:{object:s,array:o}},locale:{string:i},locales:{__any__:{any:c},__type__:{object:s}},max:{date:a,number:n,string:i,moment:h},maxHeight:{number:n,string:i},maxMinorChars:{number:n},min:{date:a,number:n,string:i,moment:h},minHeight:{number:n,string:i},moveable:{"boolean":r},multiselect:{"boolean":r},orientation:{string:i},showCurrentTime:{"boolean":r},showMajorLabels:{"boolean":r},showMinorLabels:{"boolean":r},start:{date:a,number:n,string:i,moment:h},timeAxis:{scale:{string:i,undefined:"undefined"},step:{number:n,undefined:"undefined"},__type__:{object:s}},width:{string:i,number:n},zoomable:{"boolean":r},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:n},zoomMin:{number:n},zIndex:{number:n},__type__:{object:s}},u={global:{sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,throttleRedraw:[10,0,1e3,10],clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};t.allOptions=d,t.configureOptions=u},function(e,t,i){t.util=i(1),t.DOMutil=i(8),t.DataSet=i(9),t.DataView=i(11),t.Queue=i(10),t.Network=i(61),t.network={Images:i(62),dotparser:i(118),gephiParser:i(119),allOptions:i(114)},t.network.convertDot=function(e){return t.network.dotparser.DOTToGraph(e)},t.network.convertGephi=function(e,i){return t.network.gephiParser.parseGephi(e,i)},t.moment=i(2),t.Hammer=i(20),t.keycharm=i(23)},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,i){var r=this;if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:V,clickToUse:!1},F.extend(this.options,this.defaultOptions),this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new a["default"](function(){return r.body.emitter.emit("_requestRedraw")}),this.groups=new l["default"],this.canvas=new b["default"](this.body),this.selectionHandler=new S["default"](this.body,this.canvas),this.interactionHandler=new T["default"](this.body,this.canvas,this.selectionHandler),this.view=new x["default"](this.body,this.canvas),this.renderer=new y["default"](this.body,this.canvas),this.physics=new p["default"](this.body),this.layoutEngine=new R["default"](this.body),this.clustering=new g["default"](this.body),this.manipulation=new M["default"](this.body,this.canvas,this.selectionHandler),this.nodesHandler=new c["default"](this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new u["default"](this.body,this.images,this.groups),this.body.modules.kamadaKawai=new B["default"](this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(t)}var o=i(62),a=r(o),s=i(63),l=r(s),h=i(64),c=r(h),d=i(84),u=r(d),f=i(93),p=r(f),m=i(102),g=r(m),v=i(105),y=r(v),A=i(106),b=r(A),E=i(107),x=r(E),w=i(108),T=r(w),_=i(111),S=r(_),C=i(112),R=r(C),k=i(113),M=r(k),P=i(26),D=r(P),H=i(29),O=r(H),L=i(114),I=i(115),B=r(I);i(117);var N=i(13),F=i(1),z=(i(9),i(11),i(118)),U=i(119),j=i(45),V=i(120);N(n.prototype),n.prototype.setOptions=function(e){var t=this;if(void 0!==e){var i=O["default"].validate(e,L.allOptions);i===!0&&console.log("%cErrors have been found in the supplied options object.",H.printStyle);var r=["locale","locales","clickToUse"];if(F.selectiveDeepExtend(r,this.options,e),e=this.layoutEngine.setOptions(e.layout,e),this.canvas.setOptions(e),this.groups.setOptions(e.groups),this.nodesHandler.setOptions(e.nodes),this.edgesHandler.setOptions(e.edges),this.physics.setOptions(e.physics),this.manipulation.setOptions(e.manipulation,e,this.options),this.interactionHandler.setOptions(e.interaction),this.renderer.setOptions(e.interaction),this.selectionHandler.setOptions(e.interaction),void 0!==e.groups&&this.body.emitter.emit("refreshNodes"),"configure"in e&&(this.configurator||(this.configurator=new D["default"](this,this.body.container,L.configureOptions,this.canvas.pixelRatio)),this.configurator.setOptions(e.configure)),this.configurator&&this.configurator.options.enabled===!0){var n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};F.deepExtend(n.nodes,this.nodesHandler.options),F.deepExtend(n.edges,this.edgesHandler.options),F.deepExtend(n.layout,this.layoutEngine.options),F.deepExtend(n.interaction,this.selectionHandler.options),F.deepExtend(n.interaction,this.renderer.options),F.deepExtend(n.interaction,this.interactionHandler.options),F.deepExtend(n.manipulation,this.manipulation.options),F.deepExtend(n.physics,this.physics.options),F.deepExtend(n.global,this.canvas.options),F.deepExtend(n.global,this.options),this.configurator.setModuleOptions(n)}void 0!==e.clickToUse?e.clickToUse===!0?void 0===this.activator&&(this.activator=new j(this.canvas.frame),this.activator.on("change",function(){t.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},n.prototype._updateVisibleIndices=function(){var e=this.body.nodes,t=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var i in e)e.hasOwnProperty(i)&&e[i].options.hidden===!1&&this.body.nodeIndices.push(e[i].id);for(var r in t)t.hasOwnProperty(r)&&t[r].options.hidden===!1&&this.body.edgeIndices.push(t[r].id)},n.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",function(){e._updateVisibleIndices(),e.body.emitter.emit("_requestRedraw"),e.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){e._updateValueRange(e.body.nodes),e._updateValueRange(e.body.edges),e.body.emitter.emit("startSimulation"),e.body.emitter.emit("_requestRedraw")})},n.prototype.setData=function(e){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(e&&e.options),e&&e.dot){console.log("The dot property has been depricated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var t=z.DOTToGraph(e.dot);return void this.setData(t)}if(e&&e.gephi){console.log("The gephi property has been depricated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=U.parseGephi(e.gephi);return void this.setData(i)}this.nodesHandler.setData(e&&e.nodes,!0),this.edgesHandler.setData(e&&e.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},n.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var e in this.body.nodes)delete this.body.nodes[e];for(var t in this.body.edges)delete this.body.edges[t];F.recursiveDOMDelete(this.body.container)},n.prototype._updateValueRange=function(e){var t,i=void 0,r=void 0,n=0;for(t in e)if(e.hasOwnProperty(t)){var o=e[t].getValue();void 0!==o&&(i=void 0===i?o:Math.min(o,i),r=void 0===r?o:Math.max(o,r),n+=o)}if(void 0!==i&&void 0!==r)for(t in e)e.hasOwnProperty(t)&&e[t].setValueRange(i,r,n)},n.prototype.isActive=function(){return!this.activator||this.activator.active},n.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},n.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},n.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},n.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},n.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},n.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},n.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},n.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},n.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},n.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},n.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},n.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},n.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},n.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},n.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},n.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},n.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},n.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},n.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},n.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},n.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},n.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},n.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},n.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},n.prototype.getConnectedNodes=function(e){return void 0!==this.body.nodes[e]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},n.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},n.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},n.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},n.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},n.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},n.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},n.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},n.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments);
},n.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==e&&void 0!==e.id?e.id:e},n.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==e&&void 0!==e.id?e.id:e},n.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},n.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},n.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},n.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},n.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},n.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},n.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},n.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},n.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},n.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},n.prototype.getOptionsFromConfigurator=function(){var e={};return this.configurator&&(e=this.configurator.getOptions.apply(this.configurator)),e},e.exports=n},function(e,t){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(){function e(t){i(this,e),this.images={},this.imageBroken={},this.callback=t}return r(e,[{key:"_addImageToCache",value:function(e,t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t)),this.images[e]=t}},{key:"_tryloadBrokenUrl",value:function(e,t,i){var r=this;void 0!==e&&void 0!==t&&void 0!==i&&(i.onerror=function(){console.error("Could not load brokenImage:",t),r._addImageToCache(e,new Image)},i.src=t)}},{key:"_redrawWithImage",value:function(e){this.callback&&this.callback(e)}},{key:"load",value:function(e,t,i){var r=this,n=this.images[e];if(n)return n;var o=new Image;return o.onload=function(){r._addImageToCache(e,o),r._redrawWithImage(o)},o.onerror=function(){console.error("Could not load image:",e),r._tryloadBrokenUrl(e,t,o)},o.src=e,o}}]),e}();t["default"]=n},function(e,t,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(1),a=function(){function e(){r(this,e),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},o.extend(this.options,this.defaultOptions)}return n(e,[{key:"setOptions",value:function(e){var t=["useDefaultGroups"];if(void 0!==e)for(var i in e)if(e.hasOwnProperty(i)&&-1===t.indexOf(i)){var r=e[i];this.add(i,r)}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(e){var t=this.groups[e];if(void 0===t)if(this.options.useDefaultGroups===!1&&this.groupsArray.length>0){var i=this.groupIndex%this.groupsArray.length;this.groupIndex++,t={},t.color=this.groups[this.groupsArray[i]],this.groups[e]=t}else{var r=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,t={},t.color=this.defaultGroups[r],this.groups[e]=t}return t}},{key:"add",value:function(e,t){return this.groups[e]=t,this.groupsArray.push(e),t}}]),e}();t["default"]=a},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(65),s=r(a),l=i(66),h=r(l),c=i(1),d=i(9),u=i(11),f=function(){function e(t,i,r,o){var a=this;n(this,e),this.body=t,this.images=i,this.groups=r,this.layoutEngine=o,this.body.functions.createNode=this.create.bind(this),this.nodesListeners={add:function(e,t){a.add(t.items)},update:function(e,t){a.update(t.items,t.data)},remove:function(e,t){a.remove(t.items)}},this.options={},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center"},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,label:void 0,labelHighlightBold:!0,level:void 0,mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(e,t,i,r){if(t===e)return.5;var n=1/(t-e);return Math.max(0,(r-e)*n)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},c.extend(this.options,this.defaultOptions),this.bindEventListeners()}return o(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){c.forEach(e.nodesListeners,function(t,i){e.body.data.nodes&&e.body.data.nodes.off(i,t)}),delete e.body.functions.createNode,delete e.nodesListeners.add,delete e.nodesListeners.update,delete e.nodesListeners.remove,delete e.nodesListeners})}},{key:"setOptions",value:function(e){if(void 0!==e){if(s["default"].parseOptions(this.options,e),void 0!==e.shape)for(var t in this.body.nodes)this.body.nodes.hasOwnProperty(t)&&this.body.nodes[t].updateShape();if(void 0!==e.font){h["default"].parseOptions(this.options.font,e);for(var i in this.body.nodes)this.body.nodes.hasOwnProperty(i)&&(this.body.nodes[i].updateLabelModule(),this.body.nodes[i]._reset())}if(void 0!==e.size)for(var r in this.body.nodes)this.body.nodes.hasOwnProperty(r)&&this.body.nodes[r]._reset();void 0===e.hidden&&void 0===e.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var t=this,i=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=this.body.data.nodes;if(e instanceof d||e instanceof u)this.body.data.nodes=e;else if(Array.isArray(e))this.body.data.nodes=new d,this.body.data.nodes.add(e);else{if(e)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new d}r&&c.forEach(this.nodesListeners,function(e,t){r.off(t,e)}),this.body.nodes={},this.body.data.nodes&&!function(){var e=t;c.forEach(t.nodesListeners,function(t,i){e.body.data.nodes.on(i,t)});var i=t.body.data.nodes.getIds();t.add(i,!0)}(),i===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=void 0,r=[],n=0;n<e.length;n++){i=e[n];var o=this.body.data.nodes.get(i),a=this.create(o);r.push(a),this.body.nodes[i]=a}this.layoutEngine.positionInitially(r),t===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e,t){for(var i=this.body.nodes,r=!1,n=0;n<e.length;n++){var o=e[n],a=i[o],s=t[n];void 0!==a?r=a.setOptions(s):(r=!0,a=this.create(s),i[o]=a)}r===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){for(var t=this.body.nodes,i=0;i<e.length;i++){var r=e[i];delete t[r]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?s["default"]:arguments[1];return new t(e,this.body,this.images,this.groups,this.options)}},{key:"refresh",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=this.body.nodes;for(var i in t){var r=void 0;t.hasOwnProperty(i)&&(r=t[i]);var n=this.body.data.nodes._data[i];void 0!==r&&void 0!==n&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(n))}}},{key:"getPositions",value:function(e){var t={};if(void 0!==e){if(Array.isArray(e)===!0){for(var i=0;i<e.length;i++)if(void 0!==this.body.nodes[e[i]]){var r=this.body.nodes[e[i]];t[e[i]]={x:Math.round(r.x),y:Math.round(r.y)}}}else if(void 0!==this.body.nodes[e]){var n=this.body.nodes[e];t[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(var o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];t[this.body.nodeIndices[o]]={x:Math.round(a.x),y:Math.round(a.y)}}return t}},{key:"storePositions",value:function(){var e=[],t=this.body.data.nodes.getDataSet();for(var i in t._data)if(t._data.hasOwnProperty(i)){var r=this.body.nodes[i];t._data[i].x==Math.round(r.x)&&t._data[i].y==Math.round(r.y)||e.push({id:r.id,x:Math.round(r.x),y:Math.round(r.y)})}t.update(e)}},{key:"getBoundingBox",value:function(e){return void 0!==this.body.nodes[e]?this.body.nodes[e].shape.boundingBox:void 0}},{key:"getConnectedNodes",value:function(e){var t=[];if(void 0!==this.body.nodes[e])for(var i=this.body.nodes[e],r={},n=0;n<i.edges.length;n++){var o=i.edges[n];o.toId==i.id?void 0===r[o.fromId]&&(t.push(o.fromId),r[o.fromId]=!0):o.fromId==i.id&&void 0===r[o.toId]&&(t.push(o.toId),r[o.toId]=!0)}return t}},{key:"getConnectedEdges",value:function(e){var t=[];if(void 0!==this.body.nodes[e])for(var i=this.body.nodes[e],r=0;r<i.edges.length;r++)t.push(i.edges[r].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return t}},{key:"moveNode",value:function(e,t,i){var r=this;void 0!==this.body.nodes[e]?(this.body.nodes[e].x=Number(t),this.body.nodes[e].y=Number(i),setTimeout(function(){r.body.emitter.emit("startSimulation")},0)):console.log("Node id supplied to moveNode does not exist. Provided: ",e)}}]),e}();t["default"]=f},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(66),s=r(a),l=i(67),h=r(l),c=i(69),d=r(c),u=i(71),f=r(u),p=i(72),m=r(p),g=i(73),v=r(g),y=i(75),A=r(y),b=i(76),E=r(b),x=i(77),w=r(x),T=i(78),_=r(T),S=i(79),C=r(S),R=i(80),k=r(R),M=i(81),P=r(M),D=i(82),H=r(D),O=i(83),L=r(O),I=i(29),B=(r(I),i(1)),N=function(){function e(t,i,r,o,a){n(this,e),this.options=B.bridgeObject(a),this.globalOptions=a,this.body=i,this.edges=[],this.id=void 0,this.imagelist=r,this.grouplist=o,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new s["default"](this.body,this.options,!1),this.setOptions(t)}return o(e,[{key:"attachEdge",value:function(e){-1===this.edges.indexOf(e)&&this.edges.push(e)}},{key:"detachEdge",value:function(e){var t=this.edges.indexOf(e);-1!=t&&this.edges.splice(t,1)}},{key:"setOptions",value:function(t){var i=this.options.shape;if(t){if(void 0!==t.id&&(this.id=t.id),void 0===this.id)throw"Node must have an id";if(void 0!==t.x&&(null===t.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=parseInt(t.x),this.predefinedPosition=!0)),void 0!==t.y&&(null===t.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=parseInt(t.y),this.predefinedPosition=!0)),void 0!==t.size&&(this.baseSize=t.size),void 0!==t.value&&(t.value=parseFloat(t.value)),"number"==typeof t.group||"string"==typeof t.group&&""!=t.group){var r=this.grouplist.get(t.group);B.deepExtend(this.options,r),this.options.color=B.parseColor(this.options.color)}if(e.parseOptions(this.options,t,!0,this.globalOptions),void 0!==this.options.image){if(!this.imagelist)throw"No imagelist provided";this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id)}return this.updateLabelModule(),this.updateShape(i),void 0!==t.hidden||void 0!==t.physics}}},{key:"updateLabelModule",value:function(){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),this.labelModule.setOptions(this.options,!0),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj);else switch(this.options.shape){case"box":this.shape=new h["default"](this.options,this.body,this.labelModule);break;case"circle":this.shape=new d["default"](this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new f["default"](this.options,this.body,this.labelModule,this.imageObj);break;case"database":this.shape=new m["default"](this.options,this.body,this.labelModule);break;case"diamond":this.shape=new v["default"](this.options,this.body,this.labelModule);break;case"dot":this.shape=new A["default"](this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new E["default"](this.options,this.body,this.labelModule);break;case"icon":this.shape=new w["default"](this.options,this.body,this.labelModule);break;case"image":this.shape=new _["default"](this.options,this.body,this.labelModule,this.imageObj);break;case"square":this.shape=new C["default"](this.options,this.body,this.labelModule);break;case"star":this.shape=new k["default"](this.options,this.body,this.labelModule);break;case"text":this.shape=new P["default"](this.options,this.body,this.labelModule);break;case"triangle":this.shape=new H["default"](this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new L["default"](this.options,this.body,this.labelModule);break;default:this.shape=new E["default"](this.options,this.body,this.labelModule)}this._reset()}},{key:"select",value:function(){this.selected=!0,this._reset()}},{key:"unselect",value:function(){this.selected=!1,this._reset()}},{key:"_reset",value:function(){this.shape.width=void 0,this.shape.height=void 0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(e,t){return this.shape.distanceToBorder(e,t)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(e,t,i){if(void 0!==this.options.value){var r=this.options.scaling.customScalingFunction(e,t,i,this.options.value),n=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+r*o}this.options.size=this.options.scaling.min+r*n}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(e){this.shape.draw(e,this.x,this.y,this.selected,this.hover)}},{key:"updateBoundingBox",value:function(e){this.shape.updateBoundingBox(this.x,this.y,e)}},{key:"resize",value:function(e){this.shape.resize(e,this.selected)}},{key:"isOverlappingWith",value:function(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}},{key:"isBoundingBoxOverlappingWith",value:function(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}}],[{key:"parseOptions",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],n=["color","font","fixed","shadow"];if(B.selectiveNotDeepExtend(n,e,t,i),B.mergeOptions(e,t,"shadow",i,r),void 0!==t.color&&null!==t.color){var o=B.parseColor(t.color);B.fillIfDefined(e.color,o)}else i===!0&&null===t.color&&(e.color=B.bridgeObject(r.color));void 0!==t.fixed&&null!==t.fixed&&("boolean"==typeof t.fixed?(e.fixed.x=t.fixed,e.fixed.y=t.fixed):(void 0!==t.fixed.x&&"boolean"==typeof t.fixed.x&&(e.fixed.x=t.fixed.x),void 0!==t.fixed.y&&"boolean"==typeof t.fixed.y&&(e.fixed.y=t.fixed.y))),void 0!==t.font&&null!==t.font?s["default"].parseOptions(e.font,t):i===!0&&null===t.font&&(e.font=B.bridgeObject(r.font)),void 0!==t.scaling&&B.mergeOptions(e.scaling,t.scaling,"label",i,r.scaling)}}]),e}();t["default"]=N},function(e,t,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){n=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(1),l=function(){function e(t,i){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];r(this,e),this.body=t,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(i),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return a(e,[{key:"setOptions",value:function(t){var i=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];this.nodeOptions=t,this.fontOptions=s.deepExtend({},t.font,!0),void 0!==t.label&&(this.labelDirty=!0),void 0!==t.font&&(e.parseOptions(this.fontOptions,t,i),"string"==typeof t.font?this.baseSize=this.fontOptions.size:"object"===o(t.font)&&void 0!==t.font.size&&(this.baseSize=t.font.size))}},{key:"draw",value:function(e,t,i,r){var n=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4];if(void 0!==this.nodeOptions.label){var o=this.fontOptions.size*this.body.view.scale;this.nodeOptions.label&&o<this.nodeOptions.scaling.label.drawThreshold-1||(this.calculateLabelSize(e,r,t,i,n),this._drawBackground(e),this._drawText(e,r,t,i,n))}}},{key:"_drawBackground",value:function(e){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){e.fillStyle=this.fontOptions.background;var t=2;if(this.isEdgeLabel)switch(this.fontOptions.align){case"middle":e.fillRect(.5*-this.size.width,.5*-this.size.height,this.size.width,this.size.height);break;case"top":e.fillRect(.5*-this.size.width,-(this.size.height+t),this.size.width,this.size.height);break;case"bottom":e.fillRect(.5*-this.size.width,t,this.size.width,this.size.height);break;default:e.fillRect(this.size.left,this.size.top-.5*t,this.size.width,this.size.height)}else e.fillRect(this.size.left,this.size.top-.5*t,this.size.width,this.size.height)}}},{key:"_drawText",value:function(e,t,i,r){var o=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4],a=this.fontOptions.size,s=a*this.body.view.scale;s>=this.nodeOptions.scaling.label.maxVisible&&(a=Number(this.nodeOptions.scaling.label.maxVisible)/this.body.view.scale);var l=this.size.yLine,h=this._getColor(s),c=n(h,2),d=c[0],u=c[1],f=this._setAlignment(e,i,l,o),p=n(f,2);i=p[0],l=p[1],e.font=(t&&this.nodeOptions.labelHighlightBold?"bold ":"")+a+"px "+this.fontOptions.face,e.fillStyle=d,this.isEdgeLabel||"left"!==this.fontOptions.align?e.textAlign="center":(e.textAlign=this.fontOptions.align,i-=.5*this.size.width),this.fontOptions.strokeWidth>0&&(e.lineWidth=this.fontOptions.strokeWidth,e.strokeStyle=u,e.lineJoin="round");for(var m=0;m<this.lineCount;m++)this.fontOptions.strokeWidth>0&&e.strokeText(this.lines[m],i,l),e.fillText(this.lines[m],i,l),l+=a}},{key:"_setAlignment",value:function(e,t,i,r){if(this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&this.pointToSelf===!1){t=0,i=0;var n=2;"top"===this.fontOptions.align?(e.textBaseline="alphabetic",i-=2*n):"bottom"===this.fontOptions.align?(e.textBaseline="hanging",i+=2*n):e.textBaseline="middle"}else e.textBaseline=r;return[t,i]}},{key:"_getColor",value:function(e){var t=this.fontOptions.color||"#000000",i=this.fontOptions.strokeColor||"#ffffff";if(e<=this.nodeOptions.scaling.label.drawThreshold){var r=Math.max(0,Math.min(1,1-(this.nodeOptions.scaling.label.drawThreshold-e)));t=s.overrideOpacity(t,r),i=s.overrideOpacity(i,r)}return[t,i]}},{key:"getTextSize",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i={width:this._processLabel(e,t),height:this.fontOptions.size*this.lineCount,lineCount:this.lineCount};return i}},{key:"calculateLabelSize",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=arguments.length<=3||void 0===arguments[3]?0:arguments[3],n=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4];this.labelDirty===!0&&(this.size.width=this._processLabel(e,t)),this.size.height=this.fontOptions.size*this.lineCount,this.size.left=i-.5*this.size.width,this.size.top=r-.5*this.size.height,this.size.yLine=r+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===n&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4),this.labelDirty=!1}},{key:"_processLabel",value:function(e,t){var i=0,r=[""],n=0;if(void 0!==this.nodeOptions.label){r=String(this.nodeOptions.label).split("\n"),n=r.length,e.font=(t&&this.nodeOptions.labelHighlightBold?"bold ":"")+this.fontOptions.size+"px "+this.fontOptions.face,i=e.measureText(r[0]).width;for(var o=1;n>o;o++){var a=e.measureText(r[o]).width;i=a>i?a:i}}return this.lines=r,this.lineCount=n,i}}],[{key:"parseOptions",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if("string"==typeof t.font){var r=t.font.split(" ");e.size=r[0].replace("px",""),e.face=r[1],e.color=r[2]}else"object"===o(t.font)&&s.fillIfDefined(e,t.font,i);e.size=Number(e.size)}}]),e}();t["default"]=l},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(68),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=5,r=this.labelModule.getTextSize(e,t);this.width=r.width+2*i,this.height=r.height+2*i,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,r,n){this.resize(e,r),this.left=t-this.width/2,this.top=i-this.height/2;var o=this.options.borderWidth,a=this.options.borderWidthSelected||2*this.options.borderWidth;e.strokeStyle=r?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.lineWidth=r?a:o,e.lineWidth/=this.body.view.scale,e.lineWidth=Math.min(this.width,e.lineWidth),e.fillStyle=r?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background;var s=this.options.shapeProperties.borderRadius;e.roundRect(this.left,this.top,this.width,this.height,s),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),o>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),this.updateBoundingBox(t,i,e,r),this.labelModule.draw(e,t,i,r)}},{key:"updateBoundingBox",value:function(e,t,i,r){this.resize(i,r),this.left=e-.5*this.width,this.top=t-.5*this.height;var n=this.options.shapeProperties.borderRadius;this.boundingBox.left=this.left-n,this.boundingBox.top=this.top-n,this.boundingBox.bottom=this.top+this.height+n,this.boundingBox.right=this.left+this.width+n}},{key:"distanceToBorder",value:function(e,t){this.resize(e);var i=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+i}}]),t}(h["default"]);t["default"]=c},function(e,t){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(){function e(t,r,n){i(this,e),this.body=r,this.labelModule=n,this.setOptions(t),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return r(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"_distanceToBorder",value:function(e,t){var i=this.options.borderWidth;return this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+i}},{key:"enableShadow",value:function(e){this.options.shadow.enabled===!0&&(e.shadowColor=this.options.shadow.color,e.shadowBlur=this.options.shadow.size,e.shadowOffsetX=this.options.shadow.x,e.shadowOffsetY=this.options.shadow.y)}},{key:"disableShadow",value:function(e){this.options.shadow.enabled===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(e){if(this.options.shapeProperties.borderDashes!==!1)if(void 0!==e.setLineDash){var t=this.options.shapeProperties.borderDashes;t===!0&&(t=[5,15]),e.setLineDash(t)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1}},{key:"disableBorderDashes",value:function(e){this.options.shapeProperties.borderDashes!==!1&&(void 0!==e.setLineDash?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1))}}]),e}();t["default"]=n},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(70),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=5,r=this.labelModule.getTextSize(e,t),n=Math.max(r.width,r.height)+2*i;this.options.size=n/2,this.width=n,this.height=n,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,r,n){this.resize(e,r),this.left=t-this.width/2,this.top=i-this.height/2,this._drawRawCircle(e,t,i,r,n,this.options.size),this.boundingBox.top=i-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=i+this.options.size,this.updateBoundingBox(t,i),
this.labelModule.draw(e,t,i,r)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size}},{key:"distanceToBorder",value:function(e,t){return this.resize(e),.5*this.width}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(68),h=r(l),c=function(e){function t(e,i,r){n(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e,i,r));return a.labelOffset=0,a.imageLoaded=!1,a}return a(t,e),s(t,[{key:"setOptions",value:function(e,t){this.options=e,t&&(this.imageObj=t)}},{key:"_resizeImage",value:function(){var e=!1;if(this.imageObj.width&&this.imageObj.height?this.imageLoaded===!1&&(this.imageLoaded=!0,e=!0):this.imageLoaded=!1,!this.width||!this.height||e===!0){var t,i,r;this.imageObj.width&&this.imageObj.height&&(t=0,i=0),this.options.shapeProperties.useImageSize===!1?this.imageObj.width>this.imageObj.height?(r=this.imageObj.width/this.imageObj.height,t=2*this.options.size*r||this.imageObj.width,i=2*this.options.size||this.imageObj.height):(r=this.imageObj.width&&this.imageObj.height?this.imageObj.height/this.imageObj.width:1,t=2*this.options.size,i=2*this.options.size*r):(t=this.imageObj.width,i=this.imageObj.height),this.width=t,this.height=i,this.radius=.5*this.width}}},{key:"_drawRawCircle",value:function(e,t,i,r,n,o){var a=this.options.borderWidth,s=this.options.borderWidthSelected||2*this.options.borderWidth,l=(r?s:a)/this.body.view.scale;e.lineWidth=Math.min(this.width,l),e.strokeStyle=r?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=r?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.circle(t,i,o),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),l>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore()}},{key:"_drawImageAtPosition",value:function(e){if(0!=this.imageObj.width){e.globalAlpha=1,this.enableShadow(e);var t=this.imageObj.width/this.width/this.body.view.scale;if(t>2&&this.options.shapeProperties.interpolation===!0){var i=this.imageObj.width,r=this.imageObj.height,n=document.createElement("canvas");n.width=i,n.height=i;var o=n.getContext("2d");t*=.5,i*=.5,r*=.5,o.drawImage(this.imageObj,0,0,i,r);for(var a=0,s=1;t>2&&4>s;)o.drawImage(n,a,0,i,r,a+i,0,i/2,r/2),a+=i,t*=.5,i*=.5,r*=.5,s+=1;e.drawImage(n,a,0,i,r,this.left,this.top,this.width,this.height)}else e.drawImage(this.imageObj,this.left,this.top,this.width,this.height);this.disableShadow(e)}}},{key:"_drawImageLabel",value:function(e,t,i,r){var n,o=0;if(void 0!==this.height){o=.5*this.height;var a=this.labelModule.getTextSize(e);a.lineCount>=1&&(o+=a.height/2)}n=i+o,this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,t,n,r,"hanging")}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(70),h=r(l),c=function(e){function t(e,i,r,a){n(this,t);var s=o(this,Object.getPrototypeOf(t).call(this,e,i,r));return s.imageObj=a,s._swapToImageResizeWhenImageLoaded=!0,s}return a(t,e),s(t,[{key:"resize",value:function(){if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){if(!this.width){var e=2*this.options.size;this.width=e,this.height=e,this._swapToImageResizeWhenImageLoaded=!0,this.radius=.5*this.width}}else this._swapToImageResizeWhenImageLoaded&&(this.width=void 0,this.height=void 0,this._swapToImageResizeWhenImageLoaded=!1),this._resizeImage()}},{key:"draw",value:function(e,t,i,r,n){this.resize(),this.left=t-this.width/2,this.top=i-this.height/2;var o=Math.min(.5*this.height,.5*this.width);this._drawRawCircle(e,t,i,r,n,o),e.save(),e.clip(),this._drawImageAtPosition(e),e.restore(),this._drawImageLabel(e,t,i,r),this.updateBoundingBox(t,i)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size,this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(e,t){return this.resize(e),.5*this.width}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(68),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=5,r=this.labelModule.getTextSize(e,t),n=r.width+2*i;this.width=n,this.height=n,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,r,n){this.resize(e,r),this.left=t-this.width/2,this.top=i-this.height/2;var o=this.options.borderWidth,a=this.options.borderWidthSelected||2*this.options.borderWidth,s=(r?a:o)/this.body.view.scale;e.lineWidth=Math.min(this.width,s),e.strokeStyle=r?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=r?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.database(t-this.width/2,i-.5*this.height,this.width,this.height),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),s>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),this.updateBoundingBox(t,i,e,r),this.labelModule.draw(e,t,i,r)}},{key:"updateBoundingBox",value:function(e,t,i,r){this.resize(i,r),this.left=e-.5*this.width,this.top=t-.5*this.height,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(74),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,r,n){this._drawShape(e,"diamond",4,t,i,r,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(68),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"_resizeShape",value:function(){if(void 0===this.width){var e=2*this.options.size;this.width=e,this.height=e,this.radius=.5*this.width}}},{key:"_drawShape",value:function(e,t,i,r,n,o,a){this._resizeShape(),this.left=r-this.width/2,this.top=n-this.height/2;var s=this.options.borderWidth,l=this.options.borderWidthSelected||2*this.options.borderWidth,h=(o?l:s)/this.body.view.scale;if(e.lineWidth=Math.min(this.width,h),e.strokeStyle=o?this.options.color.highlight.border:a?this.options.color.hover.border:this.options.color.border,e.fillStyle=o?this.options.color.highlight.background:a?this.options.color.hover.background:this.options.color.background,e[t](r,n,this.options.size),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),h>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),void 0!==this.options.label){var c=n+.5*this.height+3;this.labelModule.draw(e,r,c,o,"hanging")}this.updateBoundingBox(r,n)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+3))}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(74),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,r,n){this._drawShape(e,"circle",2,t,i,r,n)}},{key:"distanceToBorder",value:function(e,t){return this.resize(e),this.options.size}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(68),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=this.labelModule.getTextSize(e,t);this.width=1.5*i.width,this.height=2*i.height,this.width<this.height&&(this.width=this.height),this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,r,n){this.resize(e,r),this.left=t-.5*this.width,this.top=i-.5*this.height;var o=this.options.borderWidth,a=this.options.borderWidthSelected||2*this.options.borderWidth,s=(r?a:o)/this.body.view.scale;e.lineWidth=Math.min(this.width,s),e.strokeStyle=r?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=r?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.ellipse(this.left,this.top,this.width,this.height),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),s>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),this.updateBoundingBox(t,i,e,r),this.labelModule.draw(e,t,i,r)}},{key:"updateBoundingBox",value:function(e,t,i,r){this.resize(i,r),this.left=e-.5*this.width,this.top=t-.5*this.height,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function(e,t){this.resize(e);var i=.5*this.width,r=.5*this.height,n=Math.sin(t)*i,o=Math.cos(t)*r;return i*r/Math.sqrt(n*n+o*o)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(68),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(e){if(void 0===this.width){var t=5,i={width:Number(this.options.icon.size),height:Number(this.options.icon.size)};this.width=i.width+2*t,this.height=i.height+2*t,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,r,n){if(this.resize(e),this.options.icon.size=this.options.icon.size||50,this.left=t-.5*this.width,this.top=i-.5*this.height,this._icon(e,t,i,r),void 0!==this.options.label){var o=5;this.labelModule.draw(e,t,i+.5*this.height+o,r)}this.updateBoundingBox(t,i)}},{key:"updateBoundingBox",value:function(e,t){if(this.boundingBox.top=t-.5*this.options.icon.size,this.boundingBox.left=e-.5*this.options.icon.size,this.boundingBox.right=e+.5*this.options.icon.size,this.boundingBox.bottom=t+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0){var i=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+i)}}},{key:"_icon",value:function(e,t,i,r){var n=Number(this.options.icon.size);void 0!==this.options.icon.code?(e.font=(r?"bold ":"")+n+"px "+this.options.icon.face,e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e),e.fillText(this.options.icon.code,t,i),this.disableShadow(e)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(70),h=r(l),c=function(e){function t(e,i,r,a){n(this,t);var s=o(this,Object.getPrototypeOf(t).call(this,e,i,r));return s.imageObj=a,s}return a(t,e),s(t,[{key:"resize",value:function(){this._resizeImage()}},{key:"draw",value:function(e,t,i,r,n){if(this.resize(),this.left=t-this.width/2,this.top=i-this.height/2,this.options.shapeProperties.useBorderWithImage===!0){var o=this.options.borderWidth,a=this.options.borderWidthSelected||2*this.options.borderWidth,s=(r?a:o)/this.body.view.scale;e.lineWidth=Math.min(this.width,s),e.beginPath(),e.strokeStyle=r?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=r?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),e.fill(),e.save(),s>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),e.closePath()}this._drawImageAtPosition(e),this._drawImageLabel(e,t,i,r||n),this.updateBoundingBox(t,i)}},{key:"updateBoundingBox",value:function(e,t){this.resize(),this.left=e-this.width/2,this.top=t-this.height/2,this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(74),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(){this._resizeShape()}},{key:"draw",value:function(e,t,i,r,n){this._drawShape(e,"square",2,t,i,r,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(74),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,r,n){this._drawShape(e,"star",4,t,i,r,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(68),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=5,r=this.labelModule.getTextSize(e,t);this.width=r.width+2*i,this.height=r.height+2*i,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,r,n){this.resize(e,r||n),this.left=t-this.width/2,this.top=i-this.height/2,this.enableShadow(e),this.labelModule.draw(e,t,i,r||n),this.disableShadow(e),this.updateBoundingBox(t,i,e,r)}},{key:"updateBoundingBox",value:function(e,t,i,r){this.resize(i,r),this.left=e-this.width/2,this.top=t-this.height/2,this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(74),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,r,n){this._drawShape(e,"triangle",3,t,i,r,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(74),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,r,n){this._drawShape(e,"triangleDown",3,t,i,r,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(85),s=r(a),l=i(66),h=r(l),c=i(1),d=i(9),u=i(11),f=function(){function e(t,i,r){var o=this;n(this,e),this.body=t,this.images=i,this.groups=r,this.body.functions.createEdge=this.create.bind(this),this.edgesListeners={add:function(e,t){o.add(t.items)},update:function(e,t){o.update(t.items)},remove:function(e,t){o.remove(t.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1},middle:{enabled:!1,scaleFactor:1},from:{enabled:!1,scaleFactor:1}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal"},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(e,t,i,r){if(t===e)return.5;var n=1/(t-e);return Math.max(0,(r-e)*n)}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},c.extend(this.options,this.defaultOptions),this.bindEventListeners()}return o(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("_forceDisableDynamicCurves",function(t){"dynamic"===t&&(t="continuous");var i=!1;for(var r in e.body.edges)if(e.body.edges.hasOwnProperty(r)){var n=e.body.edges[r],o=e.body.data.edges._data[r];if(void 0!==o){var a=o.smooth;void 0!==a&&a.enabled===!0&&"dynamic"===a.type&&(void 0===t?n.setOptions({smooth:!1}):n.setOptions({smooth:{type:t}}),i=!0)}}i===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){e.reconnectEdges(),e.markAllEdgesAsDirty()}),this.body.emitter.on("refreshEdges",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){c.forEach(e.edgesListeners,function(t,i){e.body.data.edges&&e.body.data.edges.off(i,t)}),delete e.body.functions.createEdge,delete e.edgesListeners.add,delete e.edgesListeners.update,delete e.edgesListeners.remove,delete e.edgesListeners})}},{key:"setOptions",value:function(e){if(void 0!==e){s["default"].parseOptions(this.options,e),
void 0!==e.color&&this.markAllEdgesAsDirty();var t=!1;if(void 0!==e.smooth)for(var i in this.body.edges)this.body.edges.hasOwnProperty(i)&&(t=this.body.edges[i].updateEdgeType()||t);if(void 0!==e.font){h["default"].parseOptions(this.options.font,e);for(var r in this.body.edges)this.body.edges.hasOwnProperty(r)&&this.body.edges[r].updateLabelModule()}void 0===e.hidden&&void 0===e.physics&&t!==!0||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var t=this,i=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=this.body.data.edges;if(e instanceof d||e instanceof u)this.body.data.edges=e;else if(Array.isArray(e))this.body.data.edges=new d,this.body.data.edges.add(e);else{if(e)throw new TypeError("Array or DataSet expected");this.body.data.edges=new d}if(r&&c.forEach(this.edgesListeners,function(e,t){r.off(t,e)}),this.body.edges={},this.body.data.edges){c.forEach(this.edgesListeners,function(e,i){t.body.data.edges.on(i,e)});var n=this.body.data.edges.getIds();this.add(n,!0)}i===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=this.body.edges,r=this.body.data.edges,n=0;n<e.length;n++){var o=e[n],a=i[o];a&&a.disconnect();var s=r.get(o,{showInternalIds:!0});i[o]=this.create(s)}t===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e){for(var t=this.body.edges,i=this.body.data.edges,r=!1,n=0;n<e.length;n++){var o=e[n],a=i.get(o),s=t[o];void 0!==s?(s.disconnect(),r=s.setOptions(a)||r,s.connect()):(this.body.edges[o]=this.create(a),r=!0)}r===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){for(var t=this.body.edges,i=0;i<e.length;i++){var r=e[i],n=t[r];void 0!==n&&(n.cleanup(),n.disconnect(),delete t[r])}this.body.emitter.emit("_dataChanged")}},{key:"refresh",value:function(){var e=this.body.edges;for(var t in e){var i=void 0;e.hasOwnProperty(t)&&(i=e[t]);var r=this.body.data.edges._data[t];void 0!==i&&void 0!==r&&i.setOptions(r)}}},{key:"create",value:function(e){return new s["default"](e,this.body,this.options)}},{key:"markAllEdgesAsDirty",value:function(){for(var e in this.body.edges)this.body.edges[e].edgeType.colorDirty=!0}},{key:"reconnectEdges",value:function(){var e,t=this.body.nodes,i=this.body.edges;for(e in t)t.hasOwnProperty(e)&&(t[e].edges=[]);for(e in i)if(i.hasOwnProperty(e)){var r=i[e];r.from=null,r.to=null,r.connect()}}},{key:"getConnectedNodes",value:function(e){var t=[];if(void 0!==this.body.edges[e]){var i=this.body.edges[e];i.fromId&&t.push(i.fromId),i.toId&&t.push(i.toId)}return t}}]),e}();t["default"]=f},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(66),l=r(s),h=i(86),c=r(h),d=i(90),u=r(d),f=i(91),p=r(f),m=i(92),g=r(m),v=i(1),y=function(){function e(t,i,r){if(n(this,e),void 0===i)throw"No body provided";this.options=v.bridgeObject(r),this.globalOptions=r,this.body=i,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.colorDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new l["default"](this.body,this.options,!0),this.setOptions(t)}return a(e,[{key:"setOptions",value:function(t){if(t){this.colorDirty=!0,e.parseOptions(this.options,t,!0,this.globalOptions),void 0!==t.id&&(this.id=t.id),void 0!==t.from&&(this.fromId=t.from),void 0!==t.to&&(this.toId=t.to),void 0!==t.title&&(this.title=t.title),void 0!==t.value&&(t.value=parseFloat(t.value)),this.updateLabelModule();var i=this.updateEdgeType();return this._setInteractionWidths(),this.connect(),void 0===t.hidden&&void 0===t.physics||(i=!0),i}}},{key:"updateLabelModule",value:function(){this.labelModule.setOptions(this.options,!0),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var e=!1,t=!0,i=this.options.smooth;return void 0!==this.edgeType&&(this.edgeType instanceof u["default"]&&i.enabled===!0&&"dynamic"===i.type&&(t=!1),this.edgeType instanceof c["default"]&&i.enabled===!0&&"cubicBezier"===i.type&&(t=!1),this.edgeType instanceof p["default"]&&i.enabled===!0&&"dynamic"!==i.type&&"cubicBezier"!==i.type&&(t=!1),this.edgeType instanceof g["default"]&&i.enabled===!1&&(t=!1),t===!0&&(e=this.cleanup())),t===!0?this.options.smooth.enabled===!0?"dynamic"===this.options.smooth.type?(e=!0,this.edgeType=new u["default"](this.options,this.body,this.labelModule)):"cubicBezier"===this.options.smooth.type?this.edgeType=new c["default"](this.options,this.body,this.labelModule):this.edgeType=new p["default"](this.options,this.body,this.labelModule):this.edgeType=new g["default"](this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(e,t,i){if(void 0!==this.options.value){var r=this.options.scaling.customScalingFunction(e,t,i,this.options.value),n=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+r*o}this.options.width=this.options.scaling.min+r*n}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(e){var t=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,this.options.arrows.from.enabled===!0&&(i.from=this.edgeType.getArrowData(e,"from",t,this.selected,this.hover),this.options.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core)),this.options.arrows.to.enabled===!0&&(i.to=this.edgeType.getArrowData(e,"to",t,this.selected,this.hover),this.options.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core)),this.options.arrows.middle.enabled===!0&&(i.middle=this.edgeType.getArrowData(e,"middle",t,this.selected,this.hover)),this.edgeType.drawLine(e,this.selected,this.hover,t),this.drawArrows(e,i),this.drawLabel(e,t)}},{key:"drawArrows",value:function(e,t){this.options.arrows.from.enabled===!0&&this.edgeType.drawArrowHead(e,this.selected,this.hover,t.from),this.options.arrows.middle.enabled===!0&&this.edgeType.drawArrowHead(e,this.selected,this.hover,t.middle),this.options.arrows.to.enabled===!0&&this.edgeType.drawArrowHead(e,this.selected,this.hover,t.to)}},{key:"drawLabel",value:function(e,t){if(void 0!==this.options.label){var i=this.from,r=this.to,n=this.from.selected||this.to.selected||this.selected;if(i.id!=r.id){this.labelModule.pointToSelf=!1;var o=this.edgeType.getPoint(.5,t);e.save(),"horizontal"!==this.options.font.align&&(this.labelModule.calculateLabelSize(e,n,o.x,o.y),e.translate(o.x,this.labelModule.size.yLine),this._rotateForLabelAlignment(e)),this.labelModule.draw(e,o.x,o.y,n),e.restore()}else{this.labelModule.pointToSelf=!0;var a,s,l=this.options.selfReferenceSize;i.shape.width>i.shape.height?(a=i.x+.5*i.shape.width,s=i.y-l):(a=i.x+l,s=i.y-.5*i.shape.height),o=this._pointOnCircle(a,s,l,.125),this.labelModule.draw(e,o.x,o.y,n)}}}},{key:"isOverlappingWith",value:function(e){if(this.connected){var t=10,i=this.from.x,r=this.from.y,n=this.to.x,o=this.to.y,a=e.left,s=e.top,l=this.edgeType.getDistanceToEdge(i,r,n,o,a,s);return t>l}return!1}},{key:"_rotateForLabelAlignment",value:function(e){var t=this.from.y-this.to.y,i=this.from.x-this.to.x,r=Math.atan2(t,i);(-1>r&&0>i||r>0&&0>i)&&(r+=Math.PI),e.rotate(r)}},{key:"_pointOnCircle",value:function(e,t,i,r){var n=2*r*Math.PI;return{x:e+i*Math.cos(n),y:t-i*Math.sin(n)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}}],[{key:"parseOptions",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],n=["arrowStrikethrough","id","from","hidden","hoverWidth","label","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","to","title","value","width"];if(v.selectiveDeepExtend(n,e,t,i),v.mergeOptions(e,t,"smooth",i,r),v.mergeOptions(e,t,"shadow",i,r),void 0!==t.dashes&&null!==t.dashes?e.dashes=t.dashes:i===!0&&null===t.dashes&&(e.dashes=Object.create(r.dashes)),void 0!==t.scaling&&null!==t.scaling?(void 0!==t.scaling.min&&(e.scaling.min=t.scaling.min),void 0!==t.scaling.max&&(e.scaling.max=t.scaling.max),v.mergeOptions(e.scaling,t.scaling,"label",i,r.scaling)):i===!0&&null===t.scaling&&(e.scaling=Object.create(r.scaling)),void 0!==t.arrows&&null!==t.arrows)if("string"==typeof t.arrows){var a=t.arrows.toLowerCase();e.arrows.to.enabled=-1!=a.indexOf("to"),e.arrows.middle.enabled=-1!=a.indexOf("middle"),e.arrows.from.enabled=-1!=a.indexOf("from")}else{if("object"!==o(t.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+JSON.stringify(t.arrows));v.mergeOptions(e.arrows,t.arrows,"to",i,r.arrows),v.mergeOptions(e.arrows,t.arrows,"middle",i,r.arrows),v.mergeOptions(e.arrows,t.arrows,"from",i,r.arrows)}else i===!0&&null===t.arrows&&(e.arrows=Object.create(r.arrows));if(void 0!==t.color&&null!==t.color)if(e.color=v.deepExtend({},e.color,!0),v.isString(t.color))e.color.color=t.color,e.color.highlight=t.color,e.color.hover=t.color,e.color.inherit=!1;else{var s=!1;void 0!==t.color.color&&(e.color.color=t.color.color,s=!0),void 0!==t.color.highlight&&(e.color.highlight=t.color.highlight,s=!0),void 0!==t.color.hover&&(e.color.hover=t.color.hover,s=!0),void 0!==t.color.inherit&&(e.color.inherit=t.color.inherit),void 0!==t.color.opacity&&(e.color.opacity=Math.min(1,Math.max(0,t.color.opacity))),void 0===t.color.inherit&&s===!0&&(e.color.inherit=!1)}else i===!0&&null===t.color&&(e.color=v.bridgeObject(r.color));void 0!==t.font&&null!==t.font?l["default"].parseOptions(e.font,t):i===!0&&null===t.font&&(e.font=v.bridgeObject(r.font))}}]),e}();t["default"]=y},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){n=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),h=i(87),c=r(h),d=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),l(t,[{key:"_line",value:function(e,t){var i=t[0],r=t[1];e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===t||void 0===i.x?e.lineTo(this.toPoint.x,this.toPoint.y):e.bezierCurveTo(i.x,i.y,r.x,r.y,this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"_getViaCoordinates",value:function(){var e=this.from.x-this.to.x,t=this.from.y-this.to.y,i=void 0,r=void 0,n=void 0,o=void 0,a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(t)||this.options.smooth.forceDirection===!0||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(r=this.from.y,o=this.to.y,i=this.from.x-a*e,n=this.to.x+a*e):(r=this.from.y-a*t,o=this.to.y+a*t,i=this.from.x,n=this.to.x),[{x:i,y:r},{x:n,y:o}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(e,t){return this._findBorderPositionBezier(e,t)}},{key:"_getDistanceToEdge",value:function(e,t,i,r,n,o){var a=arguments.length<=6||void 0===arguments[6]?this._getViaCoordinates():arguments[6],l=s(a,2),h=l[0],c=l[1];return this._getDistanceToBezierEdge(e,t,i,r,n,o,h,c)}},{key:"getPoint",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this._getViaCoordinates():arguments[1],i=s(t,2),r=i[0],n=i[1],o=e,a=[];a[0]=Math.pow(1-o,3),a[1]=3*o*Math.pow(1-o,2),a[2]=3*Math.pow(o,2)*(1-o),a[3]=Math.pow(o,3);var l=a[0]*this.fromPoint.x+a[1]*r.x+a[2]*n.x+a[3]*this.toPoint.x,h=a[0]*this.fromPoint.y+a[1]*r.y+a[2]*n.y+a[3]*this.toPoint.y;return{x:l,y:h}}}]),t}(c["default"]);t["default"]=d},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(88),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"_getDistanceToBezierEdge",value:function(e,t,i,r,n,o,a,s){var l=1e9,h=void 0,c=void 0,d=void 0,u=void 0,f=void 0,p=e,m=t,g=[0,0,0,0];for(c=1;10>c;c++)d=.1*c,g[0]=Math.pow(1-d,3),g[1]=3*d*Math.pow(1-d,2),g[2]=3*Math.pow(d,2)*(1-d),g[3]=Math.pow(d,3),u=g[0]*e+g[1]*a.x+g[2]*s.x+g[3]*i,f=g[0]*t+g[1]*a.y+g[2]*s.y+g[3]*r,c>0&&(h=this._getDistanceToLine(p,m,u,f,n,o),l=l>h?h:l),p=u,m=f;return l}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(89),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"_findBorderPositionBezier",value:function(e,t){var i,r,n,o,a,s=arguments.length<=2||void 0===arguments[2]?this._getViaCoordinates():arguments[2],l=10,h=0,c=0,d=1,u=.2,f=this.to,p=!1;for(e.id===this.from.id&&(f=this.from,p=!0);d>=c&&l>h;){var m=.5*(c+d);if(i=this.getPoint(m,s),r=Math.atan2(f.y-i.y,f.x-i.x),n=f.distanceToBorder(t,r),o=Math.sqrt(Math.pow(i.x-f.x,2)+Math.pow(i.y-f.y,2)),a=n-o,Math.abs(a)<u)break;0>a?p===!1?c=m:d=m:p===!1?d=m:c=m,h++}return i.t=m,i}},{key:"_getDistanceToBezierEdge",value:function(e,t,i,r,n,o,a){var s=1e9,l=void 0,h=void 0,c=void 0,d=void 0,u=void 0,f=e,p=t;for(h=1;10>h;h++)c=.1*h,d=Math.pow(1-c,2)*e+2*c*(1-c)*a.x+Math.pow(c,2)*i,u=Math.pow(1-c,2)*t+2*c*(1-c)*a.y+Math.pow(c,2)*r,h>0&&(l=this._getDistanceToLine(f,p,d,u,n,o),s=s>l?l:s),f=d,p=u;return s}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){n=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(1),s=function(){function e(t,i,n){r(this,e),this.body=i,this.labelModule=n,this.options={},this.setOptions(t),this.colorDirty=!0,this.color={},this.selectionWidth=2,this.hoverWidth=1.5,this.fromPoint=this.from,this.toPoint=this.to}return o(e,[{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(e){this.options=e,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(e,t,i,r){e.strokeStyle=this.getColor(e,t,i),e.lineWidth=this.getLineWidth(t,i),this.options.dashes!==!1?this._drawDashedLine(e,r):this._drawLine(e,r)}},{key:"_drawLine",value:function(e,t,i,r){if(this.from!=this.to)this._line(e,t,i,r);else{var o=this._getCircleData(e),a=n(o,3),s=a[0],l=a[1],h=a[2];this._circle(e,s,l,h)}}},{key:"_drawDashedLine",value:function(e,t,i,r){e.lineCap="round";var o=[5,5];if(Array.isArray(this.options.dashes)===!0&&(o=this.options.dashes),void 0!==e.setLineDash){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,t);else{var a=this._getCircleData(e),s=n(a,3),l=s[0],h=s[1],c=s[2];this._circle(e,l,h,c)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)e.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,o);else{var d=this._getCircleData(e),u=n(d,3),f=u[0],p=u[1],m=u[2];this._circle(e,f,p,m)}this.enableShadow(e),e.stroke(),this.disableShadow(e)}}},{key:"findBorderPosition",value:function(e,t,i){return this.from!=this.to?this._findBorderPosition(e,t,i):this._findBorderPositionCircle(e,t,i)}},{key:"findBorderPositions",value:function(e){var t={},i={};if(this.from!=this.to)t=this._findBorderPosition(this.from,e),i=this._findBorderPosition(this.to,e);else{var r=this._getCircleData(e),o=n(r,3),a=o[0],s=o[1];o[2],t=this._findBorderPositionCircle(this.from,e,{x:a,y:s,low:.25,high:.6,direction:-1}),i=this._findBorderPositionCircle(this.from,e,{x:a,y:s,low:.6,high:.8,direction:1})}return{from:t,to:i}}},{key:"_getCircleData",value:function(e){var t=void 0,i=void 0,r=this.from,n=this.options.selfReferenceSize;return void 0!==e&&void 0===r.shape.width&&r.shape.resize(e),r.shape.width>r.shape.height?(t=r.x+.5*r.shape.width,i=r.y-n):(t=r.x+n,i=r.y-.5*r.shape.height),[t,i,n]}},{key:"_pointOnCircle",value:function(e,t,i,r){var n=2*r*Math.PI;return{x:e+i*Math.cos(n),y:t-i*Math.sin(n)}}},{key:"_findBorderPositionCircle",value:function(e,t,i){for(var r=i.x,n=i.y,o=i.low,a=i.high,s=i.direction,l=10,h=0,c=this.options.selfReferenceSize,d=void 0,u=void 0,f=void 0,p=void 0,m=void 0,g=.05,v=.5*(o+a);a>=o&&l>h&&(v=.5*(o+a),d=this._pointOnCircle(r,n,c,v),u=Math.atan2(e.y-d.y,e.x-d.x),f=e.distanceToBorder(t,u),p=Math.sqrt(Math.pow(d.x-e.x,2)+Math.pow(d.y-e.y,2)),m=f-p,!(Math.abs(m)<g));)m>0?s>0?o=v:a=v:s>0?a=v:o=v,h++;return d.t=v,d}},{key:"getLineWidth",value:function(e,t){return e===!0?Math.max(this.selectionWidth,.3/this.body.view.scale):t===!0?Math.max(this.hoverWidth,.3/this.body.view.scale):Math.max(this.options.width,.3/this.body.view.scale)}},{key:"getColor",value:function(e,t,i){var r=this.options.color;if(r.inherit!==!1){if("both"===r.inherit&&this.from.id!==this.to.id){var n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),o=void 0,s=void 0;return o=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border,this.from.selected===!1&&this.to.selected===!1?(o=a.overrideOpacity(this.from.options.color.border,this.options.color.opacity),s=a.overrideOpacity(this.to.options.color.border,this.options.color.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(o=this.from.options.color.border),n.addColorStop(0,o),n.addColorStop(1,s),n}this.colorDirty===!0&&("to"===r.inherit?(this.color.highlight=this.to.options.color.highlight.border,this.color.hover=this.to.options.color.hover.border,this.color.color=a.overrideOpacity(this.to.options.color.border,r.opacity)):(this.color.highlight=this.from.options.color.highlight.border,this.color.hover=this.from.options.color.hover.border,this.color.color=a.overrideOpacity(this.from.options.color.border,r.opacity)))}else this.colorDirty===!0&&(this.color.highlight=r.highlight,this.color.hover=r.hover,this.color.color=a.overrideOpacity(r.color,r.opacity));return this.colorDirty=!1,t===!0?this.color.highlight:i===!0?this.color.hover:this.color.color}},{key:"_circle",value:function(e,t,i,r){this.enableShadow(e),e.beginPath(),e.arc(t,i,r,0,2*Math.PI,!1),e.stroke(),this.disableShadow(e)}},{key:"getDistanceToEdge",value:function(e,t,i,r,o,a,s){var l=0;if(this.from!=this.to)l=this._getDistanceToEdge(e,t,i,r,o,a,s);else{var h=this._getCircleData(),c=n(h,3),d=c[0],u=c[1],f=c[2],p=d-o,m=u-a;l=Math.abs(Math.sqrt(p*p+m*m)-f)}return this.labelModule.size.left<o&&this.labelModule.size.left+this.labelModule.size.width>o&&this.labelModule.size.top<a&&this.labelModule.size.top+this.labelModule.size.height>a?0:l}},{key:"_getDistanceToLine",value:function(e,t,i,r,n,o){var a=i-e,s=r-t,l=a*a+s*s,h=((n-e)*a+(o-t)*s)/l;h>1?h=1:0>h&&(h=0);var c=e+h*a,d=t+h*s,u=c-n,f=d-o;return Math.sqrt(u*u+f*f)}},{key:"getArrowData",value:function(e,t,i,r,o){var a=void 0,s=void 0,l=void 0,h=void 0,c=void 0,d=void 0,u=this.getLineWidth(r,o);if("from"===t?(l=this.from,h=this.to,c=.1,d=this.options.arrows.from.scaleFactor):"to"===t?(l=this.to,h=this.from,c=-.1,d=this.options.arrows.to.scaleFactor):(l=this.to,h=this.from,d=this.options.arrows.middle.scaleFactor),l!=h)if("middle"!==t)if(this.options.smooth.enabled===!0){s=this.findBorderPosition(l,e,{via:i});var f=this.getPoint(Math.max(0,Math.min(1,s.t+c)),i);a=Math.atan2(s.y-f.y,s.x-f.x)}else a=Math.atan2(l.y-h.y,l.x-h.x),s=this.findBorderPosition(l,e);else a=Math.atan2(l.y-h.y,l.x-h.x),s=this.getPoint(.5,i);else{var p=this._getCircleData(e),m=n(p,3),g=m[0],v=m[1],y=m[2];"from"===t?(s=this.findBorderPosition(this.from,e,{x:g,y:v,low:.25,high:.6,direction:-1}),a=-2*s.t*Math.PI+1.5*Math.PI+.1*Math.PI):"to"===t?(s=this.findBorderPosition(this.from,e,{x:g,y:v,low:.6,high:1,direction:1}),a=-2*s.t*Math.PI+1.5*Math.PI-1.1*Math.PI):(s=this._pointOnCircle(g,v,y,.175),a=3.9269908169872414)}var A=15*d+3*u,b=s.x-.9*A*Math.cos(a),E=s.y-.9*A*Math.sin(a),x={x:b,y:E};return{point:s,core:x,angle:a,length:A}}},{key:"drawArrowHead",value:function(e,t,i,r){e.strokeStyle=this.getColor(e,t,i),e.fillStyle=e.strokeStyle,e.lineWidth=this.getLineWidth(t,i),e.arrow(r.point.x,r.point.y,r.angle,r.length),this.enableShadow(e),e.fill(),this.disableShadow(e)}},{key:"enableShadow",value:function(e){this.options.shadow.enabled===!0&&(e.shadowColor=this.options.shadow.color,e.shadowBlur=this.options.shadow.size,e.shadowOffsetX=this.options.shadow.x,e.shadowOffsetY=this.options.shadow.y)}},{key:"disableShadow",value:function(e){this.options.shadow.enabled===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}]),e}();t["default"]=s},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(88),h=r(l),c=function(e){function t(e,i,r){n(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e,i,r));return a._boundFunction=function(){a.positionBezierNode()},a.body.emitter.on("_repositionBezierNodes",a._boundFunction),a}return a(t,e),s(t,[{key:"setOptions",value:function(e){var t=!1;this.options.physics!==e.physics&&(t=!0),this.options=e,this.id=this.options.id,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.setupSupportNode(),this.connect(),t===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],void 0===this.from||void 0===this.to||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this.body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via?(delete this.body.nodes[this.via.id],this.via=void 0,!0):!1}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var e="edgeId:"+this.id,t=this.body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this.body.nodes[e]=t,this.via=t,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(e,t){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===t.x?e.lineTo(this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(t.x,t.y,this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.via:arguments[1],i=e,r=Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*t.x+Math.pow(i,2)*this.toPoint.x,n=Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*t.y+Math.pow(i,2)*this.toPoint.y;return{x:r,y:n}}},{key:"_findBorderPosition",value:function(e,t){return this._findBorderPositionBezier(e,t,this.via)}},{key:"_getDistanceToEdge",value:function(e,t,i,r,n,o){return this._getDistanceToBezierEdge(e,t,i,r,n,o,this.via)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(88),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"_line",value:function(e,t){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===t.x?e.lineTo(this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(t.x,t.y,this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var e=void 0,t=void 0,i=this.options.smooth.roundness,r=this.options.smooth.type,n=Math.abs(this.from.x-this.to.x),o=Math.abs(this.from.y-this.to.y);if("discrete"===r||"diagonalCross"===r)Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?(this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*o,t=this.from.y-i*o):this.from.x>this.to.x&&(e=this.from.x-i*o,t=this.from.y-i*o):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*o,t=this.from.y+i*o):this.from.x>this.to.x&&(e=this.from.x-i*o,t=this.from.y+i*o)),"discrete"===r&&(e=i*o>n?this.from.x:e)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y-i*n):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y-i*n):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y+i*n):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y+i*n)),"discrete"===r&&(t=i*n>o?this.from.y:t));else if("straightCross"===r)Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?(e=this.from.x,
t=this.from.y<this.to.y?this.to.y-(1-i)*o:this.to.y+(1-i)*o):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(e=this.from.x<this.to.x?this.to.x-(1-i)*n:this.to.x+(1-i)*n,t=this.from.y);else if("horizontal"===r)e=this.from.x<this.to.x?this.to.x-(1-i)*n:this.to.x+(1-i)*n,t=this.from.y;else if("vertical"===r)e=this.from.x,t=this.from.y<this.to.y?this.to.y-(1-i)*o:this.to.y+(1-i)*o;else if("curvedCW"===r){n=this.to.x-this.from.x,o=this.from.y-this.to.y;var a=Math.sqrt(n*n+o*o),s=Math.PI,l=Math.atan2(o,n),h=(l+(.5*i+.5)*s)%(2*s);e=this.from.x+(.5*i+.5)*a*Math.sin(h),t=this.from.y+(.5*i+.5)*a*Math.cos(h)}else if("curvedCCW"===r){n=this.to.x-this.from.x,o=this.from.y-this.to.y;var c=Math.sqrt(n*n+o*o),d=Math.PI,u=Math.atan2(o,n),f=(u+(.5*-i+.5)*d)%(2*d);e=this.from.x+(.5*i+.5)*c*Math.sin(f),t=this.from.y+(.5*i+.5)*c*Math.cos(f)}else Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*o,t=this.from.y-i*o,e=this.to.x<e?this.to.x:e):this.from.x>this.to.x&&(e=this.from.x-i*o,t=this.from.y-i*o,e=this.to.x>e?this.to.x:e):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*o,t=this.from.y+i*o,e=this.to.x<e?this.to.x:e):this.from.x>this.to.x&&(e=this.from.x-i*o,t=this.from.y+i*o,e=this.to.x>e?this.to.x:e)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y-i*n,t=this.to.y>t?this.to.y:t):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y-i*n,t=this.to.y>t?this.to.y:t):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y+i*n,t=this.to.y<t?this.to.y:t):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y+i*n,t=this.to.y<t?this.to.y:t)));return{x:e,y:t}}},{key:"_findBorderPosition",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this._findBorderPositionBezier(e,t,i.via)}},{key:"_getDistanceToEdge",value:function(e,t,i,r,n,o){var a=arguments.length<=6||void 0===arguments[6]?this._getViaCoordinates():arguments[6];return this._getDistanceToBezierEdge(e,t,i,r,n,o,a)}},{key:"getPoint",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this._getViaCoordinates():arguments[1],i=e,r=Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*t.x+Math.pow(i,2)*this.toPoint.x,n=Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*t.y+Math.pow(i,2)*this.toPoint.y;return{x:r,y:n}}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(89),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"_line",value:function(e){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}},{key:"_findBorderPosition",value:function(e,t){var i=this.to,r=this.from;e.id===this.from.id&&(i=this.from,r=this.to);var n=Math.atan2(i.y-r.y,i.x-r.x),o=i.x-r.x,a=i.y-r.y,s=Math.sqrt(o*o+a*a),l=e.distanceToBorder(t,n),h=(s-l)/s,c={};return c.x=(1-h)*r.x+h*i.x,c.y=(1-h)*r.y+h*i.y,c}},{key:"_getDistanceToEdge",value:function(e,t,i,r,n,o){return this._getDistanceToLine(e,t,i,r,n,o)}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(94),s=r(a),l=i(95),h=r(l),c=i(96),d=r(c),u=i(97),f=r(u),p=i(98),m=r(p),g=i(99),v=r(g),y=i(100),A=r(y),b=i(101),E=r(b),x=i(1),w=function(){function e(t){n(this,e),this.body=t,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0},x.extend(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return o(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("initPhysics",function(){e.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){e.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){e.stopSimulation(),e.ready=!1}),this.body.emitter.on("disablePhysics",function(){e.physicsEnabled=!1,e.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){e.setOptions(e.options),e.ready===!0&&e.startSimulation()}),this.body.emitter.on("startSimulation",function(){e.ready===!0&&e.startSimulation()}),this.body.emitter.on("stopSimulation",function(){e.stopSimulation()}),this.body.emitter.on("destroy",function(){e.stopSimulation(!1),e.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){e.updatePhysicsData()})}},{key:"setOptions",value:function(e){void 0!==e&&(e===!1?(this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation()):(this.physicsEnabled=!0,x.selectiveNotDeepExtend(["stabilization"],this.options,e),x.mergeOptions(this.options,e,"stabilization"),void 0===e.enabled&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation()),this.timestep=this.options.timestep)),this.init()}},{key:"init",value:function(){var e;"forceAtlas2Based"===this.options.solver?(e=this.options.forceAtlas2Based,this.nodesSolver=new A["default"](this.body,this.physicsBody,e),this.edgesSolver=new f["default"](this.body,this.physicsBody,e),this.gravitySolver=new E["default"](this.body,this.physicsBody,e)):"repulsion"===this.options.solver?(e=this.options.repulsion,this.nodesSolver=new h["default"](this.body,this.physicsBody,e),this.edgesSolver=new f["default"](this.body,this.physicsBody,e),this.gravitySolver=new v["default"](this.body,this.physicsBody,e)):"hierarchicalRepulsion"===this.options.solver?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new d["default"](this.body,this.physicsBody,e),this.edgesSolver=new m["default"](this.body,this.physicsBody,e),this.gravitySolver=new v["default"](this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new s["default"](this.body,this.physicsBody,e),this.edgesSolver=new f["default"](this.body,this.physicsBody,e),this.gravitySolver=new v["default"](this.body,this.physicsBody,e)),this.modelOptions=e}},{key:"initPhysics",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=this.simulationStep.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this.stabilized=!0,e===!0&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var e=Date.now();this.physicsTick();var t=Date.now()-e;(t<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?this.stabilizationIterations:arguments[0];(this.stabilizationIterations>1||this.startedStabilization===!0)&&setTimeout(function(){e.body.emitter.emit("stabilized",{iterations:t}),e.startedStabilization=!1,e.stabilizationIterations=0},0)}},{key:"physicsTick",value:function(){if(this.startedStabilization===!1&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0),this.stabilized===!1){if(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0){var e=1.2;this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.calculateForces(),this.moveNodes(),this.revert(),this.timestep=.5*this.timestep,this.calculateForces(),this.moveNodes(),this.calculateForces(),this.moveNodes(),this._evaluateStepQuality()===!0?this.timestep=e*this.timestep:this.timestep/e<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/e))):(this.calculateForces(),this.moveNodes()),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.calculateForces(),this.moveNodes();this.stabilized===!0&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var e=this.body.nodes,t=this.body.edges;for(var i in e)e.hasOwnProperty(i)&&e[i].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[i].id);for(var r in t)t.hasOwnProperty(r)&&t[r].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(t[r].id);for(var n=0;n<this.physicsBody.physicsNodeIndices.length;n++){var o=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[o]={x:0,y:0},void 0===this.physicsBody.velocities[o]&&(this.physicsBody.velocities[o]={x:0,y:0})}for(var a in this.physicsBody.velocities)void 0===e[a]&&delete this.physicsBody.velocities[a]}},{key:"revert",value:function(){var e=Object.keys(this.previousStates),t=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var r=0;r<e.length;r++){var n=e[r];void 0!==t[n]?t[n].options.physics===!0&&(this.referenceState[n]={positions:{x:t[n].x,y:t[n].y}},i[n].x=this.previousStates[n].vx,i[n].y=this.previousStates[n].vy,t[n].x=this.previousStates[n].x,t[n].y=this.previousStates[n].y):delete this.previousStates[n]}}},{key:"_evaluateStepQuality",value:function(){var e=void 0,t=void 0,i=void 0,r=this.body.nodes,n=this.referenceState,o=.3;for(var a in this.referenceState)if(this.referenceState.hasOwnProperty(a)&&void 0!==r[a]&&(e=r[a].x-n[a].positions.x,t=r[a].y-n[a].positions.y,i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),i>o))return!1;return!0}},{key:"moveNodes",value:function(){for(var e=this.physicsBody.physicsNodeIndices,t=this.options.maxVelocity?this.options.maxVelocity:1e9,i=0,r=0,n=5,o=0;o<e.length;o++){var a=e[o],s=this._performStep(a,t);i=Math.max(i,s),r+=s}this.adaptiveTimestepEnabled=r/e.length<n,this.stabilized=i<this.options.minVelocity}},{key:"_performStep",value:function(e,t){var i=this.body.nodes[e],r=this.timestep,n=this.physicsBody.forces,o=this.physicsBody.velocities;if(this.previousStates[e]={x:i.x,y:i.y,vx:o[e].x,vy:o[e].y},i.options.fixed.x===!1){var a=this.modelOptions.damping*o[e].x,s=(n[e].x-a)/i.options.mass;o[e].x+=s*r,o[e].x=Math.abs(o[e].x)>t?o[e].x>0?t:-t:o[e].x,i.x+=o[e].x*r}else n[e].x=0,o[e].x=0;if(i.options.fixed.y===!1){var l=this.modelOptions.damping*o[e].y,h=(n[e].y-l)/i.options.mass;o[e].y+=h*r,o[e].y=Math.abs(o[e].y)>t?o[e].y>0?t:-t:o[e].y,i.y+=o[e].y*r}else n[e].y=0,o[e].y=0;var c=Math.sqrt(Math.pow(o[e].x,2)+Math.pow(o[e].y,2));return c}},{key:"calculateForces",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve()}},{key:"_freezeNodes",value:function(){var e=this.body.nodes;for(var t in e)e.hasOwnProperty(t)&&e[t].x&&e[t].y&&(this.freezeCache[t]={x:e[t].options.fixed.x,y:e[t].options.fixed.y},e[t].options.fixed.x=!0,e[t].options.fixed.y=!0)}},{key:"_restoreFrozenNodes",value:function(){var e=this.body.nodes;for(var t in e)e.hasOwnProperty(t)&&void 0!==this.freezeCache[t]&&(e[t].options.fixed.x=this.freezeCache[t].x,e[t].options.fixed.y=this.freezeCache[t].y);this.freezeCache={}}},{key:"stabilize",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?this.options.stabilization.iterations:arguments[0];return"number"!=typeof t&&(console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",this.options.stabilization.iterations),t=this.options.stabilization.iterations),0===this.physicsBody.physicsNodeIndices.length?void(this.ready=!0):(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=t,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,void setTimeout(function(){return e._stabilizationBatch()},0))}},{key:"_stabilizationBatch",value:function(){this.startedStabilization===!1&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0);for(var e=0;this.stabilized===!1&&e<this.options.stabilization.updateInterval&&this.stabilizationIterations<this.targetIterations;)this.physicsTick(),e++;this.stabilized===!1&&this.stabilizationIterations<this.targetIterations?(this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations}),setTimeout(this._stabilizationBatch.bind(this),0)):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(e){for(var t=0;t<this.physicsBody.physicsNodeIndices.length;t++){var i=this.body.nodes[this.physicsBody.physicsNodeIndices[t]],r=this.physicsBody.forces[this.physicsBody.physicsNodeIndices[t]],n=20,o=.03,a=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.x,2)),s=Math.min(Math.max(5,a),15),l=3*s,h=x.HSVToHex((180-180*Math.min(1,Math.max(0,o*a)))/360,1,1);e.lineWidth=s,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(i.x+n*r.x,i.y+n*r.y),e.stroke();var c=Math.atan2(r.y,r.x);e.fillStyle=h,e.arrow(i.x+n*r.x+Math.cos(c)*l,i.y+n*r.y+Math.sin(c)*l,c,l),e.fill()}}}]),e}();t["default"]=w},function(e,t){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(){function e(t,r,n){i(this,e),this.body=t,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this.randomSeed=5}return r(e,[{key:"setOptions",value:function(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"seededRandom",value:function(){var e=1e4*Math.sin(this.randomSeed++);return e-Math.floor(e)}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var e=void 0,t=this.body.nodes,i=this.physicsBody.physicsNodeIndices,r=i.length,n=this._formBarnesHutTree(t,i);this.barnesHutTree=n;for(var o=0;r>o;o++)e=t[i[o]],e.options.mass>0&&(this._getForceContribution(n.root.children.NW,e),this._getForceContribution(n.root.children.NE,e),this._getForceContribution(n.root.children.SW,e),this._getForceContribution(n.root.children.SE,e))}}},{key:"_getForceContribution",value:function(e,t){if(e.childrenCount>0){var i=void 0,r=void 0,n=void 0;i=e.centerOfMass.x-t.x,r=e.centerOfMass.y-t.y,n=Math.sqrt(i*i+r*r),n*e.calcSize>this.thetaInversed?this._calculateForces(n,i,r,t,e):4===e.childrenCount?(this._getForceContribution(e.children.NW,t),this._getForceContribution(e.children.NE,t),this._getForceContribution(e.children.SW,t),this._getForceContribution(e.children.SE,t)):e.children.data.id!=t.id&&this._calculateForces(n,i,r,t,e)}}},{key:"_calculateForces",value:function(e,t,i,r,n){0===e&&(e=.1,t=e),this.overlapAvoidanceFactor<1&&(e=Math.max(.1+this.overlapAvoidanceFactor*r.shape.radius,e-r.shape.radius));var o=this.options.gravitationalConstant*n.mass*r.options.mass/Math.pow(e,3),a=t*o,s=i*o;this.physicsBody.forces[r.id].x+=a,this.physicsBody.forces[r.id].y+=s}},{key:"_formBarnesHutTree",value:function(e,t){for(var i=void 0,r=t.length,n=e[t[0]].x,o=e[t[0]].y,a=e[t[0]].x,s=e[t[0]].y,l=1;r>l;l++){var h=e[t[l]].x,c=e[t[l]].y;e[t[l]].options.mass>0&&(n>h&&(n=h),h>a&&(a=h),o>c&&(o=c),c>s&&(s=c))}var d=Math.abs(a-n)-Math.abs(s-o);d>0?(o-=.5*d,s+=.5*d):(n+=.5*d,a-=.5*d);var u=1e-5,f=Math.max(u,Math.abs(a-n)),p=.5*f,m=.5*(n+a),g=.5*(o+s),v={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:m-p,maxX:m+p,minY:g-p,maxY:g+p},size:f,calcSize:1/f,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(v.root);for(var y=0;r>y;y++)i=e[t[y]],i.options.mass>0&&this._placeInTree(v.root,i);return v}},{key:"_updateBranchMass",value:function(e,t){var i=e.mass+t.options.mass,r=1/i;e.centerOfMass.x=e.centerOfMass.x*e.mass+t.x*t.options.mass,e.centerOfMass.x*=r,e.centerOfMass.y=e.centerOfMass.y*e.mass+t.y*t.options.mass,e.centerOfMass.y*=r,e.mass=i;var n=Math.max(Math.max(t.height,t.radius),t.width);e.maxWidth=e.maxWidth<n?n:e.maxWidth}},{key:"_placeInTree",value:function(e,t,i){1==i&&void 0!==i||this._updateBranchMass(e,t),e.children.NW.range.maxX>t.x?e.children.NW.range.maxY>t.y?this._placeInRegion(e,t,"NW"):this._placeInRegion(e,t,"SW"):e.children.NW.range.maxY>t.y?this._placeInRegion(e,t,"NE"):this._placeInRegion(e,t,"SE")}},{key:"_placeInRegion",value:function(e,t,i){switch(e.children[i].childrenCount){case 0:e.children[i].children.data=t,e.children[i].childrenCount=1,this._updateBranchMass(e.children[i],t);break;case 1:e.children[i].children.data.x===t.x&&e.children[i].children.data.y===t.y?(t.x+=this.seededRandom(),t.y+=this.seededRandom()):(this._splitBranch(e.children[i]),this._placeInTree(e.children[i],t));break;case 4:this._placeInTree(e.children[i],t)}}},{key:"_splitBranch",value:function(e){var t=null;1===e.childrenCount&&(t=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),null!=t&&this._placeInTree(e,t)}},{key:"_insertRegion",value:function(e,t){var i=void 0,r=void 0,n=void 0,o=void 0,a=.5*e.size;switch(t){case"NW":i=e.range.minX,r=e.range.minX+a,n=e.range.minY,o=e.range.minY+a;break;case"NE":i=e.range.minX+a,r=e.range.maxX,n=e.range.minY,o=e.range.minY+a;break;case"SW":i=e.range.minX,r=e.range.minX+a,n=e.range.minY+a,o=e.range.maxY;break;case"SE":i=e.range.minX+a,r=e.range.maxX,n=e.range.minY+a,o=e.range.maxY}e.children[t]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:r,minY:n,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}},{key:"_debug",value:function(e,t){void 0!==this.barnesHutTree&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,t))}},{key:"_drawBranch",value:function(e,t,i){void 0===i&&(i="#FF0000"),4===e.childrenCount&&(this._drawBranch(e.children.NW,t),this._drawBranch(e.children.NE,t),this._drawBranch(e.children.SE,t),this._drawBranch(e.children.SW,t)),t.strokeStyle=i,t.beginPath(),t.moveTo(e.range.minX,e.range.minY),t.lineTo(e.range.maxX,e.range.minY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.minY),t.lineTo(e.range.maxX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.maxY),t.lineTo(e.range.minX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.minX,e.range.maxY),t.lineTo(e.range.minX,e.range.minY),t.stroke()}}]),e}();t["default"]=n},function(e,t){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(){function e(t,r,n){i(this,e),this.body=t,this.physicsBody=r,this.setOptions(n)}return r(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,i,r,n,o,a,s,l=this.body.nodes,h=this.physicsBody.physicsNodeIndices,c=this.physicsBody.forces,d=this.options.nodeDistance,u=-2/3/d,f=4/3,p=0;p<h.length-1;p++){a=l[h[p]];for(var m=p+1;m<h.length;m++)s=l[h[m]],e=s.x-a.x,t=s.y-a.y,i=Math.sqrt(e*e+t*t),0===i&&(i=.1*Math.random(),e=i),2*d>i&&(o=.5*d>i?1:u*i+f,o/=i,r=e*o,n=t*o,c[a.id].x-=r,c[a.id].y-=n,c[s.id].x+=r,c[s.id].y+=n)}}}]),e}();t["default"]=n},function(e,t){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(){function e(t,r,n){i(this,e),this.body=t,this.physicsBody=r,this.setOptions(n)}return r(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){var e,t,i,r,n,o,a,s,l,h,c=this.body.nodes,d=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,f=this.options.nodeDistance;for(l=0;l<d.length-1;l++)for(a=c[d[l]],h=l+1;h<d.length;h++)if(s=c[d[h]],a.level===s.level){e=s.x-a.x,t=s.y-a.y,i=Math.sqrt(e*e+t*t);var p=.05;o=f>i?-Math.pow(p*i,2)+Math.pow(p*f,2):0,0===i?i=.01:o/=i,r=e*o,n=t*o,u[a.id].x-=r,u[a.id].y-=n,u[s.id].x+=r,u[s.id].y+=n}}}]),e}();t["default"]=n},function(e,t){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(){function e(t,r,n){i(this,e),this.body=t,this.physicsBody=r,this.setOptions(n)}return r(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e=void 0,t=void 0,i=this.physicsBody.physicsEdgeIndices,r=this.body.edges,n=void 0,o=void 0,a=void 0,s=0;s<i.length;s++)t=r[i[s]],t.connected===!0&&t.toId!==t.fromId&&void 0!==this.body.nodes[t.toId]&&void 0!==this.body.nodes[t.fromId]&&(void 0!==t.edgeType.via?(e=void 0===t.options.length?this.options.springLength:t.options.length,n=t.to,o=t.edgeType.via,a=t.from,this._calculateSpringForce(n,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=void 0===t.options.length?1.5*this.options.springLength:t.options.length,this._calculateSpringForce(t.from,t.to,e)))}},{key:"_calculateSpringForce",value:function(e,t,i){var r=e.x-t.x,n=e.y-t.y,o=Math.max(Math.sqrt(r*r+n*n),.01),a=this.options.springConstant*(i-o)/o,s=r*a,l=n*a;void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x+=s,this.physicsBody.forces[e.id].y+=l),void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x-=s,this.physicsBody.forces[t.id].y-=l)}}]),e}();t["default"]=n},function(e,t){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(){function e(t,r,n){i(this,e),this.body=t,this.physicsBody=r,this.setOptions(n)}return r(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,i,r,n,o,a,s,l=this.body.edges,h=.5,c=this.physicsBody.physicsEdgeIndices,d=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,f=0;f<d.length;f++){var p=d[f];u[p].springFx=0,u[p].springFy=0}for(var m=0;m<c.length;m++)t=l[c[m]],t.connected===!0&&(e=void 0===t.options.length?this.options.springLength:t.options.length,i=t.from.x-t.to.x,r=t.from.y-t.to.y,s=Math.sqrt(i*i+r*r),s=0===s?.01:s,a=this.options.springConstant*(e-s)/s,n=i*a,o=r*a,t.to.level!=t.from.level?(void 0!==u[t.toId]&&(u[t.toId].springFx-=n,u[t.toId].springFy-=o),void 0!==u[t.fromId]&&(u[t.fromId].springFx+=n,u[t.fromId].springFy+=o)):(void 0!==u[t.toId]&&(u[t.toId].x-=h*n,u[t.toId].y-=h*o),void 0!==u[t.fromId]&&(u[t.fromId].x+=h*n,u[t.fromId].y+=h*o)));for(var g,v,a=1,y=0;y<d.length;y++){var A=d[y];g=Math.min(a,Math.max(-a,u[A].springFx)),v=Math.min(a,Math.max(-a,u[A].springFy)),u[A].x+=g,u[A].y+=v}for(var b=0,E=0,x=0;x<d.length;x++){var w=d[x];b+=u[w].x,E+=u[w].y}for(var T=b/d.length,_=E/d.length,S=0;S<d.length;S++){var C=d[S];u[C].x-=T,u[C].y-=_}}}]),e}();t["default"]=n},function(e,t){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(){function e(t,r,n){i(this,e),this.body=t,this.physicsBody=r,this.setOptions(n)}return r(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e=void 0,t=void 0,i=void 0,r=void 0,n=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces,s=0;s<o.length;s++){var l=o[s];r=n[l],e=-r.x,t=-r.y,i=Math.sqrt(e*e+t*t),this._calculateForces(i,e,t,a,r)}}},{key:"_calculateForces",value:function(e,t,i,r,n){var o=0===e?0:this.options.centralGravity/e;r[n.id].x=t*o,r[n.id].y=i*o}}]),e}();t["default"]=n},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(94),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"_calculateForces",value:function(e,t,i,r,n){0===e&&(e=.1*Math.random(),t=e),this.overlapAvoidanceFactor<1&&(e=Math.max(.1+this.overlapAvoidanceFactor*r.shape.radius,e-r.shape.radius));var o=r.edges.length+1,a=this.options.gravitationalConstant*n.mass*r.options.mass*o/Math.pow(e,2),s=t*a,l=i*a;this.physicsBody.forces[r.id].x+=s,this.physicsBody.forces[r.id].y+=l}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(99),h=r(l),c=function(e){function t(e,i,r){return n(this,t),o(this,Object.getPrototypeOf(t).call(this,e,i,r))}return a(t,e),s(t,[{key:"_calculateForces",value:function(e,t,i,r,n){if(e>0){var o=n.edges.length+1,a=this.options.centralGravity*o*n.options.mass;r[n.id].x=t*a,r[n.id].y=i*a}}}]),t}(h["default"]);t["default"]=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(103),l=r(s),h=i(104),c=r(h),d=i(1),u=function(){function e(t){var i=this;n(this,e),this.body=t,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},d.extend(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){i.clusteredNodes={},i.clusteredEdges={};
})}return a(e,[{key:"setOptions",value:function(e){}},{key:"clusterByHubsize",value:function(e,t){void 0===e?e=this._getHubSize():"object"===("undefined"==typeof e?"undefined":o(e))&&(t=this._checkOptions(e),e=this._getHubSize());for(var i=[],r=0;r<this.body.nodeIndices.length;r++){var n=this.body.nodes[this.body.nodeIndices[r]];n.edges.length>=e&&i.push(n.id)}for(var a=0;a<i.length;a++)this.clusterByConnection(i[a],t,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(void 0===e.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);for(var i={},r={},n=0;n<this.body.nodeIndices.length;n++){var o=this.body.nodeIndices[n],a=this.body.nodes[o],s=l["default"].cloneOptions(a);if(e.joinCondition(s)===!0){i[o]=this.body.nodes[o];for(var h=0;h<a.edges.length;h++){var c=a.edges[h];void 0===this.clusteredEdges[c.id]&&(r[c.id]=c)}}}this._cluster(i,r,e,t)}},{key:"clusterByEdgeCount",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];t=this._checkOptions(t);for(var r=[],n={},o=void 0,a=void 0,s=void 0,h=void 0,c=void 0,d=0;d<this.body.nodeIndices.length;d++){var u={},f={};if(h=this.body.nodeIndices[d],void 0===n[h]){c=0,s=this.body.nodes[h],a=[];for(var p=0;p<s.edges.length;p++)o=s.edges[p],void 0===this.clusteredEdges[o.id]&&(o.toId!==o.fromId&&c++,a.push(o));if(c===e){for(var m=!0,g=0;g<a.length;g++){o=a[g];var v=this._getConnectedId(o,h);if(void 0===t.joinCondition)f[o.id]=o,u[h]=this.body.nodes[h],u[v]=this.body.nodes[v],n[h]=!0;else{var y=l["default"].cloneOptions(this.body.nodes[h]);if(t.joinCondition(y)!==!0){m=!1;break}f[o.id]=o,u[h]=this.body.nodes[h],n[h]=!0}}Object.keys(u).length>0&&Object.keys(f).length>0&&m===!0&&r.push({nodes:u,edges:f})}}}for(var A=0;A<r.length;A++)this._cluster(r[A].nodes,r[A].edges,t,!1);i===!0&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];this.clusterByEdgeCount(1,e,t)}},{key:"clusterBridges",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];this.clusterByEdgeCount(2,e,t)}},{key:"clusterByConnection",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];if(void 0===e)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[e])throw new Error("The nodeId given to clusterByConnection does not exist!");var r=this.body.nodes[e];t=this._checkOptions(t,r),void 0===t.clusterNodeProperties.x&&(t.clusterNodeProperties.x=r.x),void 0===t.clusterNodeProperties.y&&(t.clusterNodeProperties.y=r.y),void 0===t.clusterNodeProperties.fixed&&(t.clusterNodeProperties.fixed={},t.clusterNodeProperties.fixed.x=r.options.fixed.x,t.clusterNodeProperties.fixed.y=r.options.fixed.y);var n={},o={},a=r.id,s=l["default"].cloneOptions(r);n[a]=r;for(var h=0;h<r.edges.length;h++){var c=r.edges[h];if(void 0===this.clusteredEdges[c.id]){var d=this._getConnectedId(c,a);if(void 0===this.clusteredNodes[d])if(d!==a)if(void 0===t.joinCondition)o[c.id]=c,n[d]=this.body.nodes[d];else{var u=l["default"].cloneOptions(this.body.nodes[d]);t.joinCondition(s,u)===!0&&(o[c.id]=c,n[d]=this.body.nodes[d])}else o[c.id]=c}}this._cluster(n,o,t,i)}},{key:"_createClusterEdges",value:function(e,t,i,r){for(var n=void 0,o=void 0,a=void 0,s=void 0,h=void 0,c=void 0,u=Object.keys(e),f=[],p=0;p<u.length;p++){o=u[p],a=e[o];for(var m=0;m<a.edges.length;m++)n=a.edges[m],void 0===this.clusteredEdges[n.id]&&(n.toId==n.fromId?t[n.id]=n:n.toId==o?(s=i.id,h=n.fromId,c=h):(s=n.toId,h=i.id,c=s),void 0===e[c]&&f.push({edge:n,fromId:h,toId:s}))}for(var g=0;g<f.length;g++){var v=f[g].edge,y=l["default"].cloneOptions(v,"edge");d.deepExtend(y,r),y.from=f[g].fromId,y.to=f[g].toId,y.id="clusterEdge:"+d.randomUUID();var A=this.body.functions.createEdge(y);A.clusteringEdgeReplacingId=v.id,this.body.edges[A.id]=A,A.connect(),this._backupEdgeOptions(v),v.setOptions({physics:!1,hidden:!0})}}},{key:"_checkOptions",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return void 0===e.clusterEdgeProperties&&(e.clusterEdgeProperties={}),void 0===e.clusterNodeProperties&&(e.clusterNodeProperties={}),e}},{key:"_cluster",value:function(e,t,i){var r=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];if(!(Object.keys(e).length<2)){for(var n in e)if(e.hasOwnProperty(n)&&void 0!==this.clusteredNodes[n])return;var o=d.deepExtend({},i.clusterNodeProperties);if(void 0!==i.processProperties){var a=[];for(var s in e)if(e.hasOwnProperty(s)){var h=l["default"].cloneOptions(e[s]);a.push(h)}var u=[];for(var f in t)if(t.hasOwnProperty(f)&&"clusterEdge:"!==f.substr(0,12)){var p=l["default"].cloneOptions(t[f],"edge");u.push(p)}if(o=i.processProperties(o,a,u),!o)throw new Error("The processProperties function does not return properties!")}void 0===o.id&&(o.id="cluster:"+d.randomUUID());var m=o.id;void 0===o.label&&(o.label="cluster");var g=void 0;void 0===o.x&&(g=this._getClusterPosition(e),o.x=g.x),void 0===o.y&&(void 0===g&&(g=this._getClusterPosition(e)),o.y=g.y),o.id=m;var v=this.body.functions.createNode(o,c["default"]);v.isCluster=!0,v.containedNodes=e,v.containedEdges=t,v.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[o.id]=v,this._createClusterEdges(e,t,o,i.clusterEdgeProperties);for(var y in t)if(t.hasOwnProperty(y)&&void 0!==this.body.edges[y]){var A=this.body.edges[y];this._backupEdgeOptions(A),A.setOptions({physics:!1,hidden:!0})}for(var b in e)e.hasOwnProperty(b)&&(this.clusteredNodes[b]={clusterId:o.id,node:this.body.nodes[b]},this.body.nodes[b].setOptions({hidden:!0,physics:!1}));o.id=void 0,r===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(e){void 0===this.clusteredEdges[e.id]&&(this.clusteredEdges[e.id]={physics:e.options.physics,hidden:e.options.hidden})}},{key:"_restoreEdge",value:function(e){var t=this.clusteredEdges[e.id];void 0!==t&&(e.setOptions({physics:t.physics,hidden:t.hidden}),delete this.clusteredEdges[e.id])}},{key:"isCluster",value:function(e){return void 0!==this.body.nodes[e]?this.body.nodes[e].isCluster===!0:(console.log("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(e){for(var t=Object.keys(e),i=e[t[0]].x,r=e[t[0]].x,n=e[t[0]].y,o=e[t[0]].y,a=void 0,s=1;s<t.length;s++)a=e[t[s]],i=a.x<i?a.x:i,r=a.x>r?a.x:r,n=a.y<n?a.y:n,o=a.y>o?a.y:o;return{x:.5*(i+r),y:.5*(n+o)}}},{key:"openCluster",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];if(void 0===e)throw new Error("No clusterNodeId supplied to openCluster.");if(void 0===this.body.nodes[e])throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(void 0===this.body.nodes[e].containedNodes)return void console.log("The node:"+e+" is not a cluster.");var r=this.body.nodes[e],n=r.containedNodes,o=r.containedEdges;if(void 0!==t&&void 0!==t.releaseFunction&&"function"==typeof t.releaseFunction){var a={},s={x:r.x,y:r.y};for(var h in n)if(n.hasOwnProperty(h)){var c=this.body.nodes[h];a[h]={x:c.x,y:c.y}}var u=t.releaseFunction(s,a);for(var f in n)if(n.hasOwnProperty(f)){var p=this.body.nodes[f];void 0!==u[f]&&(p.x=void 0===u[f].x?r.x:u[f].x,p.y=void 0===u[f].y?r.y:u[f].y)}}else for(var m in n)if(n.hasOwnProperty(m)){var g=this.body.nodes[m];g=n[m],g.options.fixed.x===!1&&(g.x=r.x),g.options.fixed.y===!1&&(g.y=r.y)}for(var v in n)if(n.hasOwnProperty(v)){var y=this.body.nodes[v];y.vx=r.vx,y.vy=r.vy,y.setOptions({hidden:!1,physics:!0}),delete this.clusteredNodes[v]}for(var A=[],b=0;b<r.edges.length;b++)A.push(r.edges[b]);for(var E=0;E<A.length;E++){var x=A[E],w=this._getConnectedId(x,e);if(void 0!==this.clusteredNodes[w]){var T=this.body.nodes[this.clusteredNodes[w].clusterId],_=this.body.edges[x.clusteringEdgeReplacingId];if(void 0!==_){T.containedEdges[_.id]=_,delete o[_.id];var S=_.fromId,C=_.toId;_.toId==w?C=this.clusteredNodes[w].clusterId:S=this.clusteredNodes[w].clusterId;var R=l["default"].cloneOptions(_,"edge");d.deepExtend(R,T.clusterEdgeProperties);var k="clusterEdge:"+d.randomUUID();d.deepExtend(R,{from:S,to:C,hidden:!1,physics:!0,id:k});var M=this.body.functions.createEdge(R);M.clusteringEdgeReplacingId=_.id,this.body.edges[k]=M,this.body.edges[k].connect()}}else{var P=this.body.edges[x.clusteringEdgeReplacingId];void 0!==P&&this._restoreEdge(P)}x.cleanup(),x.disconnect(),delete this.body.edges[x.id]}for(var D in o)o.hasOwnProperty(D)&&this._restoreEdge(o[D]);delete this.body.nodes[e],i===!0&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(e){var t=[];if(this.isCluster(e)===!0){var i=this.body.nodes[e].containedNodes;for(var r in i)i.hasOwnProperty(r)&&t.push(this.body.nodes[r].id)}return t}},{key:"findNode",value:function(e){for(var t=[],i=100,r=0;void 0!==this.clusteredNodes[e]&&i>r;)t.push(this.body.nodes[e].id),e=this.clusteredNodes[e].clusterId,r++;return t.push(this.body.nodes[e].id),t.reverse(),t}},{key:"_getConnectedId",value:function(e,t){return e.toId!=t?e.toId:e.fromId!=t?e.fromId:e.fromId}},{key:"_getHubSize",value:function(){for(var e=0,t=0,i=0,r=0,n=0;n<this.body.nodeIndices.length;n++){var o=this.body.nodes[this.body.nodeIndices[n]];o.edges.length>r&&(r=o.edges.length),e+=o.edges.length,t+=Math.pow(o.edges.length,2),i+=1}e/=i,t/=i;var a=t-Math.pow(e,2),s=Math.sqrt(a),l=Math.floor(e+2*s);return l>r&&(l=r),l}}]),e}();t["default"]=u},function(e,t,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(1),a=function(){function e(){r(this,e)}return n(e,null,[{key:"getRange",value:function(e){var t,i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],r=1e9,n=-1e9,o=1e9,a=-1e9;if(i.length>0)for(var s=0;s<i.length;s++)t=e[i[s]],o>t.shape.boundingBox.left&&(o=t.shape.boundingBox.left),a<t.shape.boundingBox.right&&(a=t.shape.boundingBox.right),r>t.shape.boundingBox.top&&(r=t.shape.boundingBox.top),n<t.shape.boundingBox.bottom&&(n=t.shape.boundingBox.bottom);return 1e9===o&&-1e9===a&&1e9===r&&-1e9===n&&(r=0,n=0,o=0,a=0),{minX:o,maxX:a,minY:r,maxY:n}}},{key:"getRangeCore",value:function(e){var t,i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],r=1e9,n=-1e9,o=1e9,a=-1e9;if(i.length>0)for(var s=0;s<i.length;s++)t=e[i[s]],o>t.x&&(o=t.x),a<t.x&&(a=t.x),r>t.y&&(r=t.y),n<t.y&&(n=t.y);return 1e9===o&&-1e9===a&&1e9===r&&-1e9===n&&(r=0,n=0,o=0,a=0),{minX:o,maxX:a,minY:r,maxY:n}}},{key:"findCenter",value:function(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}},{key:"cloneOptions",value:function(e,t){var i={};return void 0===t||"node"===t?(o.deepExtend(i,e.options,!0),i.x=e.x,i.y=e.y,i.amountOfConnections=e.edges.length):o.deepExtend(i,e.options,!0),i}}]),e}();t["default"]=a},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=i(65),l=r(s),h=function(e){function t(e,i,r,a,s){n(this,t);var l=o(this,Object.getPrototypeOf(t).call(this,e,i,r,a,s));return l.isCluster=!0,l.containedNodes={},l.containedEdges={},l}return a(t,e),t}(l["default"]);t["default"]=h},function(e,t,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);var o=i(1),a=function(){function e(t,i){r(this,e),this.body=t,this.canvas=i,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.pixelRatio=void 0,this.allowRedraw=!0,this.dragging=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideNodesOnDrag:!1},o.extend(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return n(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("dragStart",function(){e.dragging=!0}),this.body.emitter.on("dragEnd",function(){return e.dragging=!1}),this.body.emitter.on("_resizeNodes",function(){return e._resizeNodes()}),this.body.emitter.on("_redraw",function(){e.renderingActive===!1&&e._redraw()}),this.body.emitter.on("_blockRedraw",function(){e.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){e.allowRedraw=!0,e.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this)),this.body.emitter.on("_startRendering",function(){e.renderRequests+=1,e.renderingActive=!0,e._startRendering()}),this.body.emitter.on("_stopRendering",function(){e.renderRequests-=1,e.renderingActive=e.renderRequests>0,e.renderTimer=void 0}),this.body.emitter.on("destroy",function(){e.renderRequests=0,e.allowRedraw=!1,e.renderingActive=!1,e.requiresTimeout===!0?clearTimeout(e.renderTimer):cancelAnimationFrame(e.renderTimer),e.body.emitter.off()})}},{key:"setOptions",value:function(e){if(void 0!==e){var t=["hideEdgesOnDrag","hideNodesOnDrag"];o.selectiveDeepExtend(t,this.options,e)}}},{key:"_startRendering",value:function(){this.renderingActive===!0&&void 0===this.renderTimer&&(this.requiresTimeout===!0?this.renderTimer=window.setTimeout(this._renderStep.bind(this),this.simulationInterval):this.renderTimer=window.requestAnimationFrame(this._renderStep.bind(this)))}},{key:"_renderStep",value:function(){this.renderingActive===!0&&(this.renderTimer=void 0,this.requiresTimeout===!0&&this._startRendering(),this._redraw(),this.requiresTimeout===!1&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var e=this;this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,this.requiresTimeout===!0?window.setTimeout(function(){e._redraw(!1)},0):window.requestAnimationFrame(function(){e._redraw(!1)}))}},{key:"_redraw",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var t=this.canvas.frame.canvas.getContext("2d");0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.canvas.frame.canvas.clientWidth,r=this.canvas.frame.canvas.clientHeight;if(t.clearRect(0,0,i,r),0===this.canvas.frame.clientWidth)return;t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale),t.beginPath(),this.body.emitter.emit("beforeDrawing",t),t.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&this._drawEdges(t),(this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1)&&this._drawNodes(t,e),t.beginPath(),this.body.emitter.emit("afterDrawing",t),t.closePath(),t.restore(),e===!0&&t.clearRect(0,0,i,r)}}},{key:"_resizeNodes",value:function(){var e=this.canvas.frame.canvas.getContext("2d");void 0===this.pixelRatio&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);var t=this.body.nodes,i=void 0;for(var r in t)t.hasOwnProperty(r)&&(i=t[r],i.resize(e),i.updateBoundingBox(e,i.selected));e.restore()}},{key:"_drawNodes",value:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=this.body.nodes,r=this.body.nodeIndices,n=void 0,o=[],a=20,s=this.canvas.DOMtoCanvas({x:-a,y:-a}),l=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+a,y:this.canvas.frame.canvas.clientHeight+a}),h={top:s.y,left:s.x,bottom:l.y,right:l.x},c=0;c<r.length;c++)n=i[r[c]],n.isSelected()?o.push(r[c]):t===!0?n.draw(e):n.isBoundingBoxOverlappingWith(h)===!0?n.draw(e):n.updateBoundingBox(e,n.selected);for(var d=0;d<o.length;d++)n=i[o[d]],n.draw(e)}},{key:"_drawEdges",value:function(e){for(var t=this.body.edges,i=this.body.edgeIndices,r=void 0,n=0;n<i.length;n++)r=t[i[n]],r.connected===!0&&r.draw(e)}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var e=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,-1!=e.indexOf("msie 9.0")?this.requiresTimeout=!0:-1!=e.indexOf("safari")&&e.indexOf("chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}}]),e}();t["default"]=a},function(e,t,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(20),a=i(28),s=i(1),l=function(){function e(t){r(this,e),this.body=t,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=this._onResize.bind(this),this.cameraState={},this.initialized=!1,this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},s.extend(this.options,this.defaultOptions),this.bindEventListeners()}return n(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.once("resize",function(t){0!==t.width&&(e.body.view.translation.x=.5*t.width),0!==t.height&&(e.body.view.translation.y=.5*t.height)}),this.body.emitter.on("setSize",this.setSize.bind(this)),this.body.emitter.on("destroy",function(){e.hammerFrame.destroy(),e.hammer.destroy(),e._cleanUp()})}},{key:"setOptions",value:function(e){var t=this;if(void 0!==e){var i=["width","height","autoResize"];s.selectiveDeepExtend(i,this.options,e)}this.options.autoResize===!0&&(this._cleanUp(),this.resizeTimer=setInterval(function(){var e=t.setSize();e===!0&&t.body.emitter.emit("_requestRedraw")},1e3),this.resizeFunction=this._onResize.bind(this),s.addEventListener(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer),s.removeEventListener(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.pixelRatio:arguments[0];this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0){var e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,t=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;1!=e&&1!=t?i=.5*this.cameraState.scale*(e+t):1!=e?i=this.cameraState.scale*e:1!=t&&(i=this.cameraState.scale*t),this.body.view.scale=i;var r=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),n={x:r.x-this.cameraState.position.x,y:r.y-this.cameraState.position.y};this.body.view.translation.x+=n.x*this.body.view.scale,this.body.view.translation.y+=n.y*this.body.view.scale}}},{key:"_prepareValue",value:function(e){if("number"==typeof e)return e+"px";if("string"==typeof e){if(-1!==e.indexOf("%")||-1!==e.indexOf("px"))return e;if(-1===e.indexOf("%"))return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext){var e=this.frame.canvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),this.frame.canvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var e=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new o(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:o.DIRECTION_ALL}),a.onTouch(this.hammer,function(t){e.body.eventListeners.onTouch(t)}),this.hammer.on("tap",function(t){e.body.eventListeners.onTap(t)}),this.hammer.on("doubletap",function(t){e.body.eventListeners.onDoubleTap(t)}),this.hammer.on("press",function(t){e.body.eventListeners.onHold(t)}),this.hammer.on("panstart",function(t){e.body.eventListeners.onDragStart(t)}),this.hammer.on("panmove",function(t){e.body.eventListeners.onDrag(t)}),this.hammer.on("panend",function(t){e.body.eventListeners.onDragEnd(t)}),this.hammer.on("pinch",function(t){e.body.eventListeners.onPinch(t)}),this.frame.canvas.addEventListener("mousewheel",function(t){e.body.eventListeners.onMouseWheel(t)}),this.frame.canvas.addEventListener("DOMMouseScroll",function(t){e.body.eventListeners.onMouseWheel(t)}),this.frame.canvas.addEventListener("mousemove",function(t){e.body.eventListeners.onMouseMove(t)}),this.frame.canvas.addEventListener("contextmenu",function(t){e.body.eventListeners.onContext(t)}),this.hammerFrame=new o(this.frame),a.onRelease(this.hammerFrame,function(t){e.body.eventListeners.onRelease(t)})}},{key:"setSize",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.options.width:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.options.height:arguments[1];e=this._prepareValue(e),t=this._prepareValue(t);var i=!1,r=this.frame.canvas.width,n=this.frame.canvas.height,o=this.frame.canvas.getContext("2d"),a=this.pixelRatio;return this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),e!=this.options.width||t!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=t?(this._getCameraState(a),this.frame.style.width=e,this.frame.style.height=t,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=t,i=!0):(this.frame.canvas.width==Math.round(this.frame.canvas.clientWidth*this.pixelRatio)&&this.frame.canvas.height==Math.round(this.frame.canvas.clientHeight*this.pixelRatio)||this._getCameraState(a),this.frame.canvas.width!=Math.round(this.frame.canvas.clientWidth*this.pixelRatio)&&(this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),i=!0),this.frame.canvas.height!=Math.round(this.frame.canvas.clientHeight*this.pixelRatio)&&(this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),i=!0)),i===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(r/this.pixelRatio),oldHeight:Math.round(n/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"_XconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}},{key:"DOMtoCanvas",value:function(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}]),e}();t["default"]=l},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(103),s=r(a),l=i(1),h=function(){function e(t,i){var r=this;n(this,e),this.body=t,this.canvas=i,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",this.fit.bind(this)),this.body.emitter.on("animationFinished",function(){r.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}return o(e,[{key:"setOptions",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}},{key:"fit",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{nodes:[]}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=void 0,r=void 0;if(void 0!==e.nodes&&0!==e.nodes.length||(e.nodes=this.body.nodeIndices),t===!0){var n=0;for(var o in this.body.nodes)if(this.body.nodes.hasOwnProperty(o)){var a=this.body.nodes[o];a.predefinedPosition===!0&&(n+=1)}if(n>.5*this.body.nodeIndices.length)return void this.fit(e,!1);i=s["default"].getRange(this.body.nodes,e.nodes);var l=this.body.nodeIndices.length;r=12.662/(l+7.4147)+.0964822;var h=Math.min(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600);r*=h}else{this.body.emitter.emit("_resizeNodes"),i=s["default"].getRange(this.body.nodes,e.nodes);var c=1.1*Math.abs(i.maxX-i.minX),d=1.1*Math.abs(i.maxY-i.minY),u=this.canvas.frame.canvas.clientWidth/c,f=this.canvas.frame.canvas.clientHeight/d;r=f>=u?u:f}r>1?r=1:0===r&&(r=1);var p=s["default"].findCenter(i),m={position:p,scale:r,animation:e.animation};this.moveTo(m)}},{key:"focus",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(void 0!==this.body.nodes[e]){var i={x:this.body.nodes[e].x,y:this.body.nodes[e].y};t.position=i,t.lockedOnNode=e,this.moveTo(t)}else console.log("Node: "+e+" cannot be found.")}},{key:"moveTo",value:function(e){return void 0===e?void(e={}):(void 0===e.offset&&(e.offset={x:0,y:0}),void 0===e.offset.x&&(e.offset.x=0),void 0===e.offset.y&&(e.offset.y=0),void 0===e.scale&&(e.scale=this.body.view.scale),void 0===e.position&&(e.position=this.getViewPosition()),void 0===e.animation&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),void 0===e.animation.duration&&(e.animation.duration=1e3),void 0===e.animation.easingFunction&&(e.animation.easingFunction="easeInOutQuad"),void this.animateView(e))}},{key:"animateView",value:function(e){if(void 0!==e){this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;var t=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:t.x-e.position.x,y:t.y-e.position.y};this.targetTranslation={x:this.sourceTranslation.x+i.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+i.y*this.targetScale+e.offset.y},0===e.animation.duration?void 0!=this.lockedOnNodeId?(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=this._transitionRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},t=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:t.x-e.x,y:t.y-e.y},r=this.body.view.translation,n={x:r.x+i.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:r.y+i.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=n}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;var t=l.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*t,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*t,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*t},this.easingTime>=1&&(this.body.emitter.off("initRedraw",this.viewFunction),
this.easingTime=0,void 0!=this.lockedOnNodeId&&(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),e}();t["default"]=h},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(109),s=r(a),l=i(110),h=r(l),c=i(1),d=function(){function e(t,i,r){n(this,e),this.body=t,this.canvas=i,this.selectionHandler=r,this.navigationHandler=new s["default"](t,i),this.body.eventListeners.onTap=this.onTap.bind(this),this.body.eventListeners.onTouch=this.onTouch.bind(this),this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this),this.body.eventListeners.onHold=this.onHold.bind(this),this.body.eventListeners.onDragStart=this.onDragStart.bind(this),this.body.eventListeners.onDrag=this.onDrag.bind(this),this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this),this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this),this.body.eventListeners.onPinch=this.onPinch.bind(this),this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this),this.body.eventListeners.onRelease=this.onRelease.bind(this),this.body.eventListeners.onContext=this.onContext.bind(this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=this.getPointer.bind(this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0},c.extend(this.options,this.defaultOptions),this.bindEventListeners()}return o(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("destroy",function(){clearTimeout(e.popupTimer),delete e.body.functions.getPointer})}},{key:"setOptions",value:function(e){if(void 0!==e){var t=["hideEdgesOnDrag","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];c.selectiveNotDeepExtend(t,this.options,e),c.mergeOptions(this.options,e,"keyboard"),e.tooltip&&(c.extend(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=c.parseColor(e.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(e){return{x:e.x-c.getAbsoluteLeft(this.canvas.frame.canvas),y:e.y-c.getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(e){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(e){var t=this.getPointer(e.center),i=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(t,e,i),this.selectionHandler._generateClickEvent("click",e,t)}},{key:"onDoubleTap",value:function(e){var t=this.getPointer(e.center);this.selectionHandler._generateClickEvent("doubleClick",e,t)}},{key:"onHold",value:function(e){var t=this.getPointer(e.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(t,e,i),this.selectionHandler._generateClickEvent("click",e,t),this.selectionHandler._generateClickEvent("hold",e,t)}},{key:"onRelease",value:function(e){if((new Date).valueOf()-this.touchTime>10){var t=this.getPointer(e.center);this.selectionHandler._generateClickEvent("release",e,t),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(e){var t=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler._generateClickEvent("oncontext",e,t)}},{key:"checkSelectionChanges",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.selectionHandler._getSelectedEdgeCount(),n=this.selectionHandler._getSelectedNodeCount(),o=this.selectionHandler.getSelection(),a=void 0;a=i===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e);var s=this.selectionHandler._getSelectedEdgeCount(),l=this.selectionHandler._getSelectedNodeCount(),h=this.selectionHandler.getSelection(),c=this._determineIfDifferent(o,h),d=c.nodesChanged,u=c.edgesChanged,f=!1;l-n>0?(this.selectionHandler._generateClickEvent("selectNode",t,e),a=!0,f=!0):d===!0&&l>0?(this.selectionHandler._generateClickEvent("deselectNode",t,e,o),this.selectionHandler._generateClickEvent("selectNode",t,e),f=!0,a=!0):0>l-n&&(this.selectionHandler._generateClickEvent("deselectNode",t,e,o),a=!0),s-r>0&&f===!1?(this.selectionHandler._generateClickEvent("selectEdge",t,e),a=!0):s>0&&u===!0?(this.selectionHandler._generateClickEvent("deselectEdge",t,e,o),this.selectionHandler._generateClickEvent("selectEdge",t,e),a=!0):0>s-r&&(this.selectionHandler._generateClickEvent("deselectEdge",t,e,o),a=!0),a===!0&&this.selectionHandler._generateClickEvent("select",t,e)}},{key:"_determineIfDifferent",value:function(e,t){for(var i=!1,r=!1,n=0;n<e.nodes.length;n++)-1===t.nodes.indexOf(e.nodes[n])&&(i=!0);for(var o=0;o<t.nodes.length;o++)-1===e.nodes.indexOf(e.nodes[o])&&(i=!0);for(var a=0;a<e.edges.length;a++)-1===t.edges.indexOf(e.edges[a])&&(r=!0);for(var s=0;s<t.edges.length;s++)-1===e.edges.indexOf(e.edges[s])&&(r=!0);return{nodesChanged:i,edgesChanged:r}}},{key:"onDragStart",value:function(e){void 0===this.drag.pointer&&this.onTouch(e);var t=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=c.extend({},this.body.view.translation),this.drag.nodeId=void 0,void 0!==t&&this.options.dragNodes===!0){this.drag.nodeId=t.id,t.isSelected()===!1&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(t)),this.selectionHandler._generateClickEvent("dragStart",e,this.drag.pointer);var i=this.selectionHandler.selectionObj.nodes;for(var r in i)if(i.hasOwnProperty(r)){var n=i[r],o={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(o)}}else this.selectionHandler._generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(e){var t=this;if(this.drag.pinched!==!0){this.body.emitter.emit("unlockNode");var i=this.getPointer(e.center),r=this.drag.selection;if(r&&r.length&&this.options.dragNodes===!0)!function(){t.selectionHandler._generateClickEvent("dragging",e,i);var n=i.x-t.drag.pointer.x,o=i.y-t.drag.pointer.y;r.forEach(function(e){var i=e.node;e.xFixed===!1&&(i.x=t.canvas._XconvertDOMtoCanvas(t.canvas._XconvertCanvasToDOM(e.x)+n)),e.yFixed===!1&&(i.y=t.canvas._YconvertDOMtoCanvas(t.canvas._YconvertCanvasToDOM(e.y)+o))}),t.body.emitter.emit("startSimulation")}();else if(this.options.dragView===!0){if(this.selectionHandler._generateClickEvent("dragging",e,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(e);var n=i.x-this.drag.pointer.x,o=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+n,y:this.drag.translation.y+o},this.body.emitter.emit("_redraw")}}}},{key:"onDragEnd",value:function(e){this.drag.dragging=!1;var t=this.drag.selection;t&&t.length?(t.forEach(function(e){e.node.options.fixed.x=e.xFixed,e.node.options.fixed.y=e.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(e){var t=this.getPointer(e.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var i=this.pinch.scale*e.scale;this.zoom(i,t)}},{key:"zoom",value:function(e,t){if(this.options.zoomView===!0){var i=this.body.view.scale;1e-5>e&&(e=1e-5),e>10&&(e=10);var r=void 0;void 0!==this.drag&&this.drag.dragging===!0&&(r=this.canvas.DOMtoCanvas(this.drag.pointer));var n=this.body.view.translation,o=e/i,a=(1-o)*t.x+n.x*o,s=(1-o)*t.y+n.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:s},void 0!=r){var l=this.canvas.canvasToDOM(r);this.drag.pointer.x=l.x,this.drag.pointer.y=l.y}this.body.emitter.emit("_requestRedraw"),e>i?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale})}}},{key:"onMouseWheel",value:function(e){if(this.options.zoomView===!0){var t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),0!==t){var i=this.body.view.scale,r=t/10;0>t&&(r/=1-r),i*=1+r;var n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(i,n)}e.preventDefault()}}},{key:"onMouseMove",value:function(e){var t=this,i=this.getPointer({x:e.clientX,y:e.clientY}),r=!1;if(void 0!==this.popup&&(this.popup.hidden===!1&&this._checkHidePopup(i),this.popup.hidden===!1&&(r=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),r===!1&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=setTimeout(function(){return t._checkShowPopup(i)},this.options.tooltipDelay))),this.options.hover===!0){var n=this.selectionHandler.getNodeAt(i);void 0===n&&(n=this.selectionHandler.getEdgeAt(i)),this.selectionHandler.hoverObject(n)}}},{key:"_checkShowPopup",value:function(e){var t=this.canvas._XconvertDOMtoCanvas(e.x),i=this.canvas._YconvertDOMtoCanvas(e.y),r={left:t,top:i,right:t,bottom:i},n=void 0===this.popupObj?void 0:this.popupObj.id,o=!1,a="node";if(void 0===this.popupObj){for(var s=this.body.nodeIndices,l=this.body.nodes,c=void 0,d=[],u=0;u<s.length;u++)c=l[s[u]],c.isOverlappingWith(r)===!0&&void 0!==c.getTitle()&&d.push(s[u]);d.length>0&&(this.popupObj=l[d[d.length-1]],o=!0)}if(void 0===this.popupObj&&o===!1){for(var f=this.body.edgeIndices,p=this.body.edges,m=void 0,g=[],v=0;v<f.length;v++)m=p[f[v]],m.isOverlappingWith(r)===!0&&m.connected===!0&&void 0!==m.getTitle()&&g.push(f[v]);g.length>0&&(this.popupObj=p[g[g.length-1]],a="edge")}void 0!==this.popupObj?this.popupObj.id!==n&&(void 0===this.popup&&(this.popup=new h["default"](this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(e){var t=this.selectionHandler._pointerToPositionObject(e),i=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(t),i===!0)){var r=this.selectionHandler.getNodeAt(e);i=r.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(e)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(t));i===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),e}();t["default"]=d},function(e,t,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=(i(1),i(20)),a=i(28),s=i(23),l=function(){function e(t,i){var n=this;r(this,e),this.body=t,this.canvas=i,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){void 0!==n.keycharm&&n.keycharm.destroy()}),this.options={}}return n(e,[{key:"setOptions",value:function(e){void 0!==e&&(this.options=e,this.create())}},{key:"create",value:function(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var e=this;this.cleanNavigation(),this.navigationDOM={};var t=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var r=0;r<t.length;r++){this.navigationDOM[t[r]]=document.createElement("div"),this.navigationDOM[t[r]].className="vis-button vis-"+t[r],this.navigationDOM.wrapper.appendChild(this.navigationDOM[t[r]]);var n=new o(this.navigationDOM[t[r]]);"_fit"===i[r]?a.onTouch(n,this._fit.bind(this)):a.onTouch(n,this.bindToRedraw.bind(this,i[r])),this.navigationHammers.push(n)}var s=new o(this.canvas.frame);a.onRelease(s,function(){e._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(e){void 0===this.boundFunctions[e]&&(this.boundFunctions[e]=this[e].bind(this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(e){void 0!==this.boundFunctions[e]&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var e in this.boundFunctions)this.boundFunctions.hasOwnProperty(e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){this.body.view.scale*=1+this.options.keyboard.speed.zoom,this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale})}},{key:"_zoomOut",value:function(){this.body.view.scale/=1+this.options.keyboard.speed.zoom,this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale})}},{key:"configureKeyboardBindings",value:function(){var e=this;void 0!==this.keycharm&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=s({container:window,preventDefault:!0}):this.keycharm=s({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0&&(this.keycharm.bind("up",function(){e.bindToRedraw("_moveUp")},"keydown"),this.keycharm.bind("down",function(){e.bindToRedraw("_moveDown")},"keydown"),this.keycharm.bind("left",function(){e.bindToRedraw("_moveLeft")},"keydown"),this.keycharm.bind("right",function(){e.bindToRedraw("_moveRight")},"keydown"),this.keycharm.bind("=",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num+",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num-",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("-",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("[",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("]",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pageup",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pagedown",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("up",function(){e.unbindFromRedraw("_moveUp")},"keyup"),this.keycharm.bind("down",function(){e.unbindFromRedraw("_moveDown")},"keyup"),this.keycharm.bind("left",function(){e.unbindFromRedraw("_moveLeft")},"keyup"),this.keycharm.bind("right",function(){e.unbindFromRedraw("_moveRight")},"keyup"),this.keycharm.bind("=",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num+",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num-",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("-",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("[",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("]",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pageup",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pagedown",function(){e.unbindFromRedraw("_zoomOut")},"keyup")))}}]),e}();t["default"]=l},function(e,t){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(){function e(t){i(this,e),this.container=t,this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-network-tooltip",this.container.appendChild(this.frame)}return r(e,[{key:"setPosition",value:function(e,t){this.x=parseInt(e),this.y=parseInt(t)}},{key:"setText",value:function(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=e}},{key:"show",value:function(e){if(void 0===e&&(e=!0),e===!0){var t=this.frame.clientHeight,i=this.frame.clientWidth,r=this.frame.parentNode.clientHeight,n=this.frame.parentNode.clientWidth,o=this.y-t;o+t+this.padding>r&&(o=r-t-this.padding),o<this.padding&&(o=this.padding);var a=this.x;a+i+this.padding>n&&(a=n-i-this.padding),a<this.padding&&(a=this.padding),this.frame.style.left=a+"px",this.frame.style.top=o+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.visibility="hidden"}}]),e}();t["default"]=n},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(65),s=r(a),l=i(85),h=r(l),c=i(1),d=function(){function e(t,i){var r=this;n(this,e),this.body=t,this.canvas=i,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},c.extend(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){r.updateSelection()})}return o(e,[{key:"setOptions",value:function(e){if(void 0!==e){var t=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];c.selectiveDeepExtend(t,this.options,e)}}},{key:"selectOnPoint",value:function(e){var t=!1;if(this.options.selectable===!0){var i=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),void 0!==i&&(t=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return t}},{key:"selectAdditionalOnPoint",value:function(e){var t=!1;if(this.options.selectable===!0){var i=this.getNodeAt(e)||this.getEdgeAt(e);void 0!==i&&(t=!0,i.isSelected()===!0?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return t}},{key:"_generateClickEvent",value:function(e,t,i,r){var n=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],o=void 0;o=n===!0?{nodes:[],edges:[]}:this.getSelection(),o.pointer={DOM:{x:i.x,y:i.y},canvas:this.canvas.DOMtoCanvas(i)},o.event=t,void 0!==r&&(o.previousSelection=r),this.body.emitter.emit(e,o)}},{key:"selectObject",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.options.selectConnectedEdges:arguments[1];return void 0!==e?(e instanceof s["default"]&&t===!0&&this._selectConnectedEdges(e),e.select(),this._addToSelection(e),!0):!1}},{key:"deselectObject",value:function(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}},{key:"_getAllNodesOverlappingWith",value:function(e){for(var t=[],i=this.body.nodes,r=0;r<this.body.nodeIndices.length;r++){var n=this.body.nodeIndices[r];i[n].isOverlappingWith(e)&&t.push(n)}return t}},{key:"_pointerToPositionObject",value:function(e){var t=this.canvas.DOMtoCanvas(e);return{left:t.x-1,top:t.y+1,right:t.x+1,bottom:t.y-1}}},{key:"getNodeAt",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],i=this._pointerToPositionObject(e),r=this._getAllNodesOverlappingWith(i);return r.length>0?t===!0?this.body.nodes[r[r.length-1]]:r[r.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(e,t){for(var i=this.body.edges,r=0;r<this.body.edgeIndices.length;r++){var n=this.body.edgeIndices[r];i[n].isOverlappingWith(e)&&t.push(n)}}},{key:"_getAllEdgesOverlappingWith",value:function(e){var t=[];return this._getEdgesOverlappingWith(e,t),t}},{key:"getEdgeAt",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],i=this._pointerToPositionObject(e),r=this._getAllEdgesOverlappingWith(i);return r.length>0?t===!0?this.body.edges[r[r.length-1]]:r[r.length-1]:void 0}},{key:"_addToSelection",value:function(e){e instanceof s["default"]?this.selectionObj.nodes[e.id]=e:this.selectionObj.edges[e.id]=e}},{key:"_addToHover",value:function(e){e instanceof s["default"]?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}},{key:"_removeFromSelection",value:function(e){e instanceof s["default"]?(delete this.selectionObj.nodes[e.id],this._unselectConnectedEdges(e)):delete this.selectionObj.edges[e.id]}},{key:"unselectAll",value:function(){for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&this.selectionObj.nodes[e].unselect();for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&this.selectionObj.edges[t].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var e=0;for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(e+=1);return e}},{key:"_getSelectedNode",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return this.selectionObj.nodes[e]}},{key:"_getSelectedEdge",value:function(){for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return this.selectionObj.edges[e]}},{key:"_getSelectedEdgeCount",value:function(){var e=0;for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(e+=1);return e}},{key:"_getSelectedObjectCount",value:function(){var e=0;for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(e+=1);for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(e+=1);return e}},{key:"_selectionIsEmpty",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return!1;for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e)&&this.selectionObj.nodes[e].clusterSize>1)return!0;return!1}},{key:"_selectConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var i=e.edges[t];i.select(),this._addToSelection(i)}}},{key:"_hoverConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var i=e.edges[t];i.hover=!0,this._addToHover(i)}}},{key:"_unselectConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var i=e.edges[t];i.unselect(),this._removeFromSelection(i)}}},{key:"blurObject",value:function(e){e.hover===!0&&(e.hover=!1,e instanceof s["default"]?this.body.emitter.emit("blurNode",{node:e.id}):this.body.emitter.emit("blurEdge",{edge:e.id}))}},{key:"hoverObject",value:function(e){var t=!1;for(var i in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(i)&&(void 0===e||e instanceof s["default"]&&e.id!=i||e instanceof h["default"])&&(this.blurObject(this.hoverObj.nodes[i]),delete this.hoverObj.nodes[i],t=!0);for(var r in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(r)&&(t===!0?(this.hoverObj.edges[r].hover=!1,delete this.hoverObj.edges[r]):void 0===e&&(this.blurObject(this.hoverObj.edges[r]),delete this.hoverObj.edges[r],t=!0));void 0!==e&&(e.hover===!1&&(e.hover=!0,this._addToHover(e),t=!0,e instanceof s["default"]?this.body.emitter.emit("hoverNode",{node:e.id}):this.body.emitter.emit("hoverEdge",{edge:e.id})),e instanceof s["default"]&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(e)),t===!0&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){var e=this.getSelectedNodes(),t=this.getSelectedEdges();return{nodes:e,edges:t}}},{key:"getSelectedNodes",value:function(){var e=[];if(this.options.selectable===!0)for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&e.push(this.selectionObj.nodes[t].id);return e}},{key:"getSelectedEdges",value:function(){var e=[];if(this.options.selectable===!0)for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&e.push(this.selectionObj.edges[t].id);return e}},{key:"setSelection",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=void 0,r=void 0;if(!e||!e.nodes&&!e.edges)throw"Selection must be an object with nodes and/or edges properties";if((t.unselectAll||void 0===t.unselectAll)&&this.unselectAll(),e.nodes)for(i=0;i<e.nodes.length;i++){r=e.nodes[i];var n=this.body.nodes[r];if(!n)throw new RangeError('Node with id "'+r+'" not found');this.selectObject(n,t.highlightEdges)}if(e.edges)for(i=0;i<e.edges.length;i++){r=e.edges[i];var o=this.body.edges[r];if(!o)throw new RangeError('Edge with id "'+r+'" not found');this.selectObject(o)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(!e||void 0===e.length)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:t})}},{key:"selectEdges",value:function(e){if(!e||void 0===e.length)throw"Selection must be an array with ids";this.setSelection({edges:e})}},{key:"updateSelection",value:function(){for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(this.body.nodes.hasOwnProperty(e)||delete this.selectionObj.nodes[e]);for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(this.body.edges.hasOwnProperty(t)||delete this.selectionObj.edges[t])}}]),e}();t["default"]=d},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){n=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(103),h=r(l),c=i(1),d=function(){function e(t){n(this,e),this.body=t,this.initialRandomSeed=Math.round(1e6*Math.random()),this.randomSeed=this.initialRandomSeed,this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},c.extend(this.options,this.defaultOptions),this.bindEventListeners()}return s(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){e.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){e.setupHierarchicalLayout()})}},{key:"setOptions",value:function(e,t){if(void 0!==e){var i=this.options.hierarchical.enabled;if(c.selectiveDeepExtend(["randomSeed","improvedLayout"],this.options,e),c.mergeOptions(this.options,e,"hierarchical"),void 0!==e.randomSeed&&(this.initialRandomSeed=e.randomSeed),this.options.hierarchical.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),"RL"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?this.options.hierarchical.levelSeparation>0&&(this.options.hierarchical.levelSeparation*=-1):this.options.hierarchical.levelSeparation<0&&(this.options.hierarchical.levelSeparation*=-1),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(t);if(i===!0)return this.body.emitter.emit("refresh"),c.deepExtend(t,this.optionsBackup)}return t}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(e){if(this.options.hierarchical.enabled===!0){void 0===e.physics||e.physics===!0?(e.physics={enabled:void 0===this.optionsBackup.physics.enabled?!0:this.optionsBackup.physics.enabled,solver:"hierarchicalRepulsion"},this.optionsBackup.physics.enabled=void 0===this.optionsBackup.physics.enabled?!0:this.optionsBackup.physics.enabled,this.optionsBackup.physics.solver=this.optionsBackup.physics.solver||"barnesHut"):"object"===a(e.physics)?(this.optionsBackup.physics.enabled=void 0===e.physics.enabled?!0:e.physics.enabled,this.optionsBackup.physics.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(this.optionsBackup.physics.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});var t="horizontal";"RL"!==this.options.hierarchical.direction&&"LR"!==this.options.hierarchical.direction||(t="vertical"),void 0===e.edges?(this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1}):void 0===e.edges.smooth?(this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1):"boolean"==typeof e.edges.smooth?(this.optionsBackup.edges={
smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:t}):(void 0!==e.edges.smooth.type&&"dynamic"!==e.edges.smooth.type&&(t=e.edges.smooth.type),this.optionsBackup.edges={smooth:void 0===e.edges.smooth.enabled?!0:e.edges.smooth.enabled,type:void 0===e.edges.smooth.type?"dynamic":e.edges.smooth.type,roundness:void 0===e.edges.smooth.roundness?.5:e.edges.smooth.roundness,forceDirection:void 0===e.edges.smooth.forceDirection?!1:e.edges.smooth.forceDirection},e.edges.smooth={enabled:void 0===e.edges.smooth.enabled?!0:e.edges.smooth.enabled,type:t,roundness:void 0===e.edges.smooth.roundness?.5:e.edges.smooth.roundness,forceDirection:void 0===e.edges.smooth.forceDirection?!1:e.edges.smooth.forceDirection}),this.body.emitter.emit("_forceDisableDynamicCurves",t)}return e}},{key:"seededRandom",value:function(){var e=1e4*Math.sin(this.randomSeed++);return e-Math.floor(e)}},{key:"positionInitially",value:function(e){if(this.options.hierarchical.enabled!==!0){this.randomSeed=this.initialRandomSeed;for(var t=0;t<e.length;t++){var i=e[t],r=1*e.length+10,n=2*Math.PI*this.seededRandom();void 0===i.x&&(i.x=r*Math.cos(n)),void 0===i.y&&(i.y=r*Math.sin(n))}}}},{key:"layoutNetwork",value:function(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){for(var e=0,t=0;t<this.body.nodeIndices.length;t++){var i=this.body.nodes[this.body.nodeIndices[t]];i.predefinedPosition===!0&&(e+=1)}if(e<.5*this.body.nodeIndices.length){var r=10,n=0,o=100;if(this.body.nodeIndices.length>o){for(var a=this.body.nodeIndices.length;this.body.nodeIndices.length>o;){n+=1;var s=this.body.nodeIndices.length;n%3===0?this.body.modules.clustering.clusterBridges():this.body.modules.clustering.clusterOutliers();var l=this.body.nodeIndices.length;if(s==l&&n%3!==0||n>r)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*a)})}this.body.modules.kamadaKawai.solve(this.body.nodeIndices,this.body.edgeIndices,!0),this._shiftToCenter();for(var h=70,c=0;c<this.body.nodeIndices.length;c++)this.body.nodes[this.body.nodeIndices[c]].x+=(.5-this.seededRandom())*h,this.body.nodes[this.body.nodeIndices[c]].y+=(.5-this.seededRandom())*h;this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var e=h["default"].getRangeCore(this.body.nodes,this.body.nodeIndices),t=h["default"].findCenter(e),i=0;i<this.body.nodeIndices.length;i++)this.body.nodes[this.body.nodeIndices[i]].x-=t.x,this.body.nodes[this.body.nodeIndices[i]].y-=t.y}},{key:"_declusterAll",value:function(){for(var e=!0;e===!0;){e=!1;for(var t=0;t<this.body.nodeIndices.length;t++)this.body.nodes[this.body.nodeIndices[t]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[t],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){var e=void 0,t=void 0,i=!1,r=!0,n=!1;this.hierarchicalLevels={},this.lastNodeOnLevel={},this.hierarchicalChildrenReference={},this.hierarchicalParentReference={},this.hierarchicalTrees={},this.treeIndex=-1,this.distributionOrdering={},this.distributionIndex={},this.distributionOrderingPresence={};for(t in this.body.nodes)this.body.nodes.hasOwnProperty(t)&&(e=this.body.nodes[t],void 0===e.options.x&&void 0===e.options.y&&(r=!1),void 0!==e.options.level?(i=!0,this.hierarchicalLevels[t]=e.options.level):n=!0);if(n===!0&&i===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");n===!0&&("hubsize"===this.options.hierarchical.sortMethod?this._determineLevelsByHubsize():"directed"===this.options.hierarchical.sortMethod?this._determineLevelsDirected():"custom"===this.options.hierarchical.sortMethod&&this._determineLevelsCustomCallback());for(var o in this.body.nodes)this.body.nodes.hasOwnProperty(o)&&void 0===this.hierarchicalLevels[o]&&(this.hierarchicalLevels[o]=0);var a=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(a),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var e=this,t=!1,i={},r=function(){for(var t=s(),i=0;i<t.length-1;i++){var r=t[i].max-t[i+1].min;n(i+1,r+e.options.hierarchical.treeSpacing)}},n=function(t,i){for(var r in e.hierarchicalTrees)if(e.hierarchicalTrees.hasOwnProperty(r)&&e.hierarchicalTrees[r]===t){var n=e.body.nodes[r],o=e._getPositionForHierarchy(n);e._setPositionForHierarchy(n,o+i,void 0,!0)}},a=function(t){var i=1e9,r=-1e9;for(var n in e.hierarchicalTrees)if(e.hierarchicalTrees.hasOwnProperty(n)&&e.hierarchicalTrees[n]===t){var o=e._getPositionForHierarchy(e.body.nodes[n]);i=Math.min(o,i),r=Math.max(o,r)}return{min:i,max:r}},s=function(){for(var t=[],i=0;i<=e.treeIndex;i++)t.push(a(i));return t},l=function b(t,i){if(i[t.id]=!0,e.hierarchicalChildrenReference[t.id]){var r=e.hierarchicalChildrenReference[t.id];if(r.length>0)for(var n=0;n<r.length;n++)b(e.body.nodes[r[n]],i)}},h=function(t){var i=arguments.length<=1||void 0===arguments[1]?1e9:arguments[1],r=1e9,n=1e9,a=1e9,s=-1e9;for(var l in t)if(t.hasOwnProperty(l)){var h=e.body.nodes[l],c=e.hierarchicalLevels[h.id],d=e._getPositionForHierarchy(h),u=e._getSpaceAroundNode(h,t),f=o(u,2),p=f[0],m=f[1];r=Math.min(p,r),n=Math.min(m,n),i>=c&&(a=Math.min(d,a),s=Math.max(d,s))}return[a,s,r,n]},c=function E(t){var i=e.hierarchicalLevels[t];if(e.hierarchicalChildrenReference[t]){var r=e.hierarchicalChildrenReference[t];if(r.length>0)for(var n=0;n<r.length;n++)i=Math.max(i,E(r[n]))}return i},d=function(e,t){var i=c(e.id),r=c(t.id);return Math.min(i,r)},u=function(t,i){var r=e.hierarchicalParentReference[t.id],n=e.hierarchicalParentReference[i.id];if(void 0===r||void 0===n)return!1;for(var o=0;o<r.length;o++)for(var a=0;a<n.length;a++)if(r[o]==n[a])return!0;return!1},f=function(t,i,r){for(var n=0;n<i.length;n++){var o=i[n],a=e.distributionOrdering[o];if(a.length>1)for(var s=0;s<a.length-1;s++)u(a[s],a[s+1])===!0&&e.hierarchicalTrees[a[s].id]===e.hierarchicalTrees[a[s+1].id]&&t(a[s],a[s+1],r)}},p=function(i,r){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],a=e._getPositionForHierarchy(i),s=e._getPositionForHierarchy(r),c=Math.abs(s-a);if(c>e.options.hierarchical.nodeSpacing){var u={};u[i.id]=!0;var f={};f[r.id]=!0,l(i,u),l(r,f);var p=d(i,r),m=h(u,p),g=o(m,4),v=(g[0],g[1]),y=(g[2],g[3],h(f,p)),A=o(y,4),b=A[0],E=(A[1],A[2]),x=(A[3],Math.abs(v-b));if(x>e.options.hierarchical.nodeSpacing){var w=v-b+e.options.hierarchical.nodeSpacing;w<-E+e.options.hierarchical.nodeSpacing&&(w=-E+e.options.hierarchical.nodeSpacing),0>w&&(e._shiftBlock(r.id,w),t=!0,n===!0&&e._centerParent(r))}}},m=function(r,n){for(var a=n.id,s=n.edges,c=e.hierarchicalLevels[n.id],d=e.options.hierarchical.levelSeparation*e.options.hierarchical.levelSeparation,u={},f=[],p=0;p<s.length;p++){var m=s[p];if(m.toId!=m.fromId){var g=m.toId==a?m.from:m.to;u[s[p].id]=g,e.hierarchicalLevels[g.id]<c&&f.push(m)}}var v=function(t,i){for(var r=0,n=0;n<i.length;n++)if(void 0!==u[i[n].id]){var o=e._getPositionForHierarchy(u[i[n].id])-t;r+=o/Math.sqrt(o*o+d)}return r},y=function(t,i){for(var r=0,n=0;n<i.length;n++)if(void 0!==u[i[n].id]){var o=e._getPositionForHierarchy(u[i[n].id])-t;r-=d*Math.pow(o*o+d,-1.5)}return r},A=function(t,i){for(var r=e._getPositionForHierarchy(n),o={},a=0;t>a;a++){var s=v(r,i),l=y(r,i),h=40,c=Math.max(-h,Math.min(h,Math.round(s/l)));if(r-=c,void 0!==o[r])break;o[r]=a}return r},b=function(r){var a=e._getPositionForHierarchy(n);if(void 0===i[n.id]){var s={};s[n.id]=!0,l(n,s),i[n.id]=s}var c=h(i[n.id]),d=o(c,4),u=(d[0],d[1],d[2]),f=d[3],p=r-a,m=0;p>0?m=Math.min(p,f-e.options.hierarchical.nodeSpacing):0>p&&(m=-Math.min(-p,u-e.options.hierarchical.nodeSpacing)),0!=m&&(e._shiftBlock(n.id,m),t=!0)},E=function(i){var r=e._getPositionForHierarchy(n),a=e._getSpaceAroundNode(n),s=o(a,2),l=s[0],h=s[1],c=i-r,d=r;c>0?d=Math.min(r+(h-e.options.hierarchical.nodeSpacing),i):0>c&&(d=Math.max(r-(l-e.options.hierarchical.nodeSpacing),i)),d!==r&&(e._setPositionForHierarchy(n,d,void 0,!0),t=!0)},x=A(r,f);b(x),x=A(r,s),E(x)},g=function(i){var r=Object.keys(e.distributionOrdering);r=r.reverse();for(var n=0;i>n;n++){t=!1;for(var o=0;o<r.length;o++)for(var a=r[o],s=e.distributionOrdering[a],l=0;l<s.length;l++)m(1e3,s[l]);if(t!==!0)break}},v=function(i){var r=Object.keys(e.distributionOrdering);r=r.reverse();for(var n=0;i>n&&(t=!1,f(p,r,!0),t===!0);n++);},y=function(){for(var t in e.body.nodes)e.body.nodes.hasOwnProperty(t)&&e._centerParent(e.body.nodes[t])},A=function(){var t=Object.keys(e.distributionOrdering);t=t.reverse();for(var i=0;i<t.length;i++)for(var r=t[i],n=e.distributionOrdering[r],o=0;o<n.length;o++)e._centerParent(n[o])};this.options.hierarchical.blockShifting===!0&&(v(5),y()),this.options.hierarchical.edgeMinimization===!0&&g(20),this.options.hierarchical.parentCentralization===!0&&A(),r()}},{key:"_getSpaceAroundNode",value:function(e,t){var i=!0;void 0===t&&(i=!1);var r=this.hierarchicalLevels[e.id];if(void 0!==r){var n=this.distributionIndex[e.id],o=this._getPositionForHierarchy(e),a=1e9,s=1e9;if(0!==n){var l=this.distributionOrdering[r][n-1];if(i===!0&&void 0===t[l.id]||i===!1){var h=this._getPositionForHierarchy(l);a=o-h}}if(n!=this.distributionOrdering[r].length-1){var c=this.distributionOrdering[r][n+1];if(i===!0&&void 0===t[c.id]||i===!1){var d=this._getPositionForHierarchy(c);s=Math.min(s,d-o)}}return[a,s]}return[0,0]}},{key:"_centerParent",value:function(e){if(this.hierarchicalParentReference[e.id])for(var t=this.hierarchicalParentReference[e.id],i=0;i<t.length;i++){var r=t[i],n=this.body.nodes[r];if(this.hierarchicalChildrenReference[r]){var a=1e9,s=-1e9,l=this.hierarchicalChildrenReference[r];if(l.length>0)for(var h=0;h<l.length;h++){var c=this.body.nodes[l[h]];a=Math.min(a,this._getPositionForHierarchy(c)),s=Math.max(s,this._getPositionForHierarchy(c))}var d=this._getPositionForHierarchy(n),u=this._getSpaceAroundNode(n),f=o(u,2),p=f[0],m=f[1],g=.5*(a+s),v=d-g;(0>v&&Math.abs(v)<m-this.options.hierarchical.nodeSpacing||v>0&&Math.abs(v)<p-this.options.hierarchical.nodeSpacing)&&this._setPositionForHierarchy(n,g,void 0,!0)}}}},{key:"_placeNodesByHierarchy",value:function(e){this.positionedNodes={};for(var t in e)if(e.hasOwnProperty(t)){var i=Object.keys(e[t]);i=this._indexArrayToNodes(i),this._sortNodeArray(i);for(var r=0,n=0;n<i.length;n++){var o=i[n];if(void 0===this.positionedNodes[o.id]){var a=this.options.hierarchical.nodeSpacing*r;r>0&&(a=this._getPositionForHierarchy(i[n-1])+this.options.hierarchical.nodeSpacing),this._setPositionForHierarchy(o,a,t),this._validataPositionAndContinue(o,t,a),r++}}}}},{key:"_placeBranchNodes",value:function(e,t){if(void 0!==this.hierarchicalChildrenReference[e]){for(var i=[],r=0;r<this.hierarchicalChildrenReference[e].length;r++)i.push(this.body.nodes[this.hierarchicalChildrenReference[e][r]]);this._sortNodeArray(i);for(var n=0;n<i.length;n++){var o=i[n],a=this.hierarchicalLevels[o.id];if(!(a>t&&void 0===this.positionedNodes[o.id]))return;var s=void 0;s=0===n?this._getPositionForHierarchy(this.body.nodes[e]):this._getPositionForHierarchy(i[n-1])+this.options.hierarchical.nodeSpacing,this._setPositionForHierarchy(o,s,a),this._validataPositionAndContinue(o,a,s)}for(var l=1e9,h=-1e9,c=0;c<i.length;c++){var d=i[c].id;l=Math.min(l,this._getPositionForHierarchy(this.body.nodes[d])),h=Math.max(h,this._getPositionForHierarchy(this.body.nodes[d]))}this._setPositionForHierarchy(this.body.nodes[e],.5*(l+h),t)}}},{key:"_validataPositionAndContinue",value:function(e,t,i){if(void 0!==this.lastNodeOnLevel[t]){var r=this._getPositionForHierarchy(this.body.nodes[this.lastNodeOnLevel[t]]);if(i-r<this.options.hierarchical.nodeSpacing){var n=r+this.options.hierarchical.nodeSpacing-i,o=this._findCommonParent(this.lastNodeOnLevel[t],e.id);this._shiftBlock(o.withChild,n)}}this.lastNodeOnLevel[t]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,t)}},{key:"_indexArrayToNodes",value:function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.body.nodes[e[i]]);return t}},{key:"_getDistribution",value:function(){var e={},t=void 0,i=void 0;for(t in this.body.nodes)if(this.body.nodes.hasOwnProperty(t)){i=this.body.nodes[t];var r=void 0===this.hierarchicalLevels[t]?0:this.hierarchicalLevels[t];"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?(i.y=this.options.hierarchical.levelSeparation*r,i.options.fixed.y=!0):(i.x=this.options.hierarchical.levelSeparation*r,i.options.fixed.x=!0),void 0===e[r]&&(e[r]={}),e[r][t]=i}return e}},{key:"_getHubSize",value:function(){var e=0;for(var t in this.body.nodes)if(this.body.nodes.hasOwnProperty(t)){var i=this.body.nodes[t];void 0===this.hierarchicalLevels[t]&&(e=i.edges.length<e?e:i.edges.length)}return e}},{key:"_determineLevelsByHubsize",value:function(){for(var e=this,t=1,i=function(t,i){void 0===e.hierarchicalLevels[i.id]&&(void 0===e.hierarchicalLevels[t.id]&&(e.hierarchicalLevels[t.id]=0),e.hierarchicalLevels[i.id]=e.hierarchicalLevels[t.id]+1)};t>0&&(t=this._getHubSize(),0!==t);)for(var r in this.body.nodes)if(this.body.nodes.hasOwnProperty(r)){var n=this.body.nodes[r];n.edges.length===t&&this._crawlNetwork(i,r)}}},{key:"_determineLevelsCustomCallback",value:function(){var e=this,t=1e5,i=function(e,t,i){},r=function(r,n,o){var a=e.hierarchicalLevels[r.id];void 0===a&&(e.hierarchicalLevels[r.id]=t);var s=i(h["default"].cloneOptions(r,"node"),h["default"].cloneOptions(n,"node"),h["default"].cloneOptions(o,"edge"));e.hierarchicalLevels[n.id]=e.hierarchicalLevels[r.id]+s};this._crawlNetwork(r),this._setMinLevelToZero()}},{key:"_determineLevelsDirected",value:function(){var e=this,t=1e4,i=function(i,r,n){var o=e.hierarchicalLevels[i.id];void 0===o&&(e.hierarchicalLevels[i.id]=t),n.toId==r.id?e.hierarchicalLevels[r.id]=e.hierarchicalLevels[i.id]+1:e.hierarchicalLevels[r.id]=e.hierarchicalLevels[i.id]-1};this._crawlNetwork(i),this._setMinLevelToZero()}},{key:"_setMinLevelToZero",value:function(){var e=1e9;for(var t in this.body.nodes)this.body.nodes.hasOwnProperty(t)&&void 0!==this.hierarchicalLevels[t]&&(e=Math.min(this.hierarchicalLevels[t],e));for(var i in this.body.nodes)this.body.nodes.hasOwnProperty(i)&&void 0!==this.hierarchicalLevels[i]&&(this.hierarchicalLevels[i]-=e)}},{key:"_generateMap",value:function(){var e=this,t=function(t,i){if(e.hierarchicalLevels[i.id]>e.hierarchicalLevels[t.id]){var r=t.id,n=i.id;void 0===e.hierarchicalChildrenReference[r]&&(e.hierarchicalChildrenReference[r]=[]),e.hierarchicalChildrenReference[r].push(n),void 0===e.hierarchicalParentReference[n]&&(e.hierarchicalParentReference[n]=[]),e.hierarchicalParentReference[n].push(r)}};this._crawlNetwork(t)}},{key:"_crawlNetwork",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],i=arguments[1],r={},n=0,o=function h(i,n){if(void 0===r[i.id]){void 0===e.hierarchicalTrees[i.id]&&(e.hierarchicalTrees[i.id]=n,e.treeIndex=Math.max(n,e.treeIndex)),r[i.id]=!0;for(var o=void 0,a=0;a<i.edges.length;a++)i.edges[a].connected===!0&&(o=i.edges[a].toId===i.id?i.edges[a].from:i.edges[a].to,i.id!==o.id&&(t(i,o,i.edges[a]),h(o,n)))}};if(void 0===i)for(var a=0;a<this.body.nodeIndices.length;a++){var s=this.body.nodes[this.body.nodeIndices[a]];void 0===r[s.id]&&(o(s,n),n+=1)}else{var l=this.body.nodes[i];if(void 0===l)return void console.error("Node not found:",i);o(l)}}},{key:"_shiftBlock",value:function(e,t){if("UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?this.body.nodes[e].x+=t:this.body.nodes[e].y+=t,void 0!==this.hierarchicalChildrenReference[e])for(var i=0;i<this.hierarchicalChildrenReference[e].length;i++)this._shiftBlock(this.hierarchicalChildrenReference[e][i],t)}},{key:"_findCommonParent",value:function(e,t){var i=this,r={},n=function a(e,t){if(void 0!==i.hierarchicalParentReference[t])for(var r=0;r<i.hierarchicalParentReference[t].length;r++){var n=i.hierarchicalParentReference[t][r];e[n]=!0,a(e,n)}},o=function s(e,t){if(void 0!==i.hierarchicalParentReference[t])for(var r=0;r<i.hierarchicalParentReference[t].length;r++){var n=i.hierarchicalParentReference[t][r];if(void 0!==e[n])return{foundParent:n,withChild:t};var o=s(e,n);if(null!==o.foundParent)return o}return{foundParent:null,withChild:t}};return n(r,e),o(r,t)}},{key:"_setPositionForHierarchy",value:function(e,t,i){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];r!==!0&&(void 0===this.distributionOrdering[i]&&(this.distributionOrdering[i]=[],this.distributionOrderingPresence[i]={}),void 0===this.distributionOrderingPresence[i][e.id]&&(this.distributionOrdering[i].push(e),this.distributionIndex[e.id]=this.distributionOrdering[i].length-1),this.distributionOrderingPresence[i][e.id]=!0),"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?e.x=t:e.y=t}},{key:"_getPositionForHierarchy",value:function(e){return"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?e.x:e.y}},{key:"_sortNodeArray",value:function(e){e.length>1&&("UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?e.sort(function(e,t){return e.x-t.x}):e.sort(function(e,t){return e.y-t.y}))}}]),e}();t["default"]=d},function(e,t,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(1),a=i(20),s=i(28),l=function(){function e(t,i,n){var a=this;r(this,e),this.body=t,this.canvas=i,this.selectionHandler=n,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},o.extend(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){a._clean()}),this.body.emitter.on("_dataChanged",this._restore.bind(this)),this.body.emitter.on("_resetData",this._restore.bind(this))}return n(e,[{key:"_restore",value:function(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(e,t,i){void 0!==t&&(void 0!==t.locale?this.options.locale=t.locale:this.options.locale=i.locale,void 0!==t.locales?this.options.locales=t.locales:this.options.locales=i.locales),void 0!==e&&("boolean"==typeof e?this.options.enabled=e:(this.options.enabled=!0,o.deepExtend(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var e=this.selectionHandler._getSelectedNodeCount(),t=this.selectionHandler._getSelectedEdgeCount(),i=e+t,r=this.options.locales[this.options.locale],n=!1;this.options.addNode!==!1&&(this._createAddNodeButton(r),n=!0),this.options.addEdge!==!1&&(n===!0?this._createSeperator(1):n=!0,this._createAddEdgeButton(r)),1===e&&"function"==typeof this.options.editNode?(n===!0?this._createSeperator(2):n=!0,this._createEditNodeButton(r)):1===t&&0===e&&this.options.editEdge!==!1&&(n===!0?this._createSeperator(3):n=!0,this._createEditEdgeButton(r)),0!==i&&(e>0&&this.options.deleteNode!==!1?(n===!0&&this._createSeperator(4),this._createDeleteButton(r)):0===e&&this.options.deleteEdge!==!1&&(n===!0&&this._createSeperator(4),this._createDeleteButton(r))),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this)),this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function(){var e=this;this.editMode!==!0&&this.enableEditMode(),this._clean();var t=this.selectionHandler._getSelectedNode();if(void 0!==t){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(t.isCluster!==!0){var i=o.deepExtend({},t.options,!1);if(i.x=t.x,i.y=t.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(i,function(t){null!==t&&void 0!==t&&"editNode"===e.inMode&&e.body.data.nodes.getDataSet().update(t),e.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this)),this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this)),this._temporaryBindUI("onDrag",this._dragControlNode.bind(this)),this._temporaryBindUI("onRelease",this._finishConnect.bind(this)),this._temporaryBindUI("onDragStart",function(){}),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){var e=this;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",this.guiEnabled===!0){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId?!function(){var t=e.body.edges[e.edgeBeingEditedId],i=e._getNewTargetNode(t.from.x,t.from.y),r=e._getNewTargetNode(t.to.x,t.to.y);e.temporaryIds.nodes.push(i.id),e.temporaryIds.nodes.push(r.id),e.body.nodes[i.id]=i,e.body.nodeIndices.push(i.id),e.body.nodes[r.id]=r,e.body.nodeIndices.push(r.id),e._temporaryBindUI("onTouch",e._controlNodeTouch.bind(e)),e._temporaryBindUI("onTap",function(){}),e._temporaryBindUI("onHold",function(){}),e._temporaryBindUI("onDragStart",e._controlNodeDragStart.bind(e)),e._temporaryBindUI("onDrag",e._controlNodeDrag.bind(e)),e._temporaryBindUI("onDragEnd",e._controlNodeDragEnd.bind(e)),e._temporaryBindUI("onMouseMove",function(){}),e._temporaryBindEvent("beforeDrawing",function(e){var n=t.edgeType.findBorderPositions(e);i.selected===!1&&(i.x=n.from.x,i.y=n.from.y),r.selected===!1&&(r.x=n.to.x,r.y=n.to.y)}),e.body.emitter.emit("_redraw")}():this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var e=this;this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";var t=this.selectionHandler.getSelectedNodes(),i=this.selectionHandler.getSelectedEdges(),r=void 0;if(t.length>0){for(var n=0;n<t.length;n++)if(this.body.nodes[t[n]].isCluster===!0)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(r=this.options.deleteNode)}else i.length>0&&"function"==typeof this.options.deleteEdge&&(r=this.options.deleteEdge);if("function"==typeof r){var o={nodes:t,edges:i};if(2!==r.length)throw new Error("The function for delete does not support two arguments (data, callback)");r(o,function(t){null!==t&&void 0!==t&&"delete"===e.inMode?(e.body.data.edges.getDataSet().remove(t.edges),e.body.data.nodes.getDataSet().remove(t.nodes),e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar()):(e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(t),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(e,t){var i=o.deepExtend({},this.options.controlNodeStyle);i.id="targetNode"+o.randomUUID(),i.hidden=!1,i.physics=!1,i.x=e,i.y=t;var r=this.body.functions.createNode(i);return r.shape.boundingBox={left:e,right:e,top:t,bottom:t},r}},{key:"_createEditButton",value:function(){this._clean(),this.manipulationDOM={},o.recursiveDOMDelete(this.editModeDiv);var e=this.options.locales[this.options.locale],t=this._createButton("editMode","vis-button vis-edit vis-edit-mode",e.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(t),this._bindHammerToDiv(t,this.toggleEditMode.bind(this))}},{key:"_clean",value:function(){this.inMode=!1,this.guiEnabled===!0&&(o.recursiveDOMDelete(this.editModeDiv),o.recursiveDOMDelete(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var e=0;e<this.manipulationHammers.length;e++)this.manipulationHammers[e].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),o.recursiveDOMDelete(this.manipulationDiv),o.recursiveDOMDelete(this.editModeDiv),o.recursiveDOMDelete(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}},{key:"_createAddNodeButton",value:function(e){var t=this._createButton("addNode","vis-button vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function(e){var t=this._createButton("addEdge","vis-button vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function(e){var t=this._createButton("editNode","vis-button vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function(e){var t=this._createButton("editEdge","vis-button vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function(e){if(this.options.rtl)var t="vis-button vis-delete-rtl";else var t="vis-button vis-delete";var i=this._createButton("delete",t,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function(e){var t=this._createButton("back","vis-button vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function(e,t,i){var r=arguments.length<=3||void 0===arguments[3]?"vis-label":arguments[3];return this.manipulationDOM[e+"Div"]=document.createElement("div"),this.manipulationDOM[e+"Div"].className=t,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=r,this.manipulationDOM[e+"Label"].innerHTML=i,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}},{key:"_createDescription",value:function(e){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",e))}},{key:"_temporaryBindEvent",value:function(e,t){this.temporaryEventFunctions.push({event:e,boundFunction:t}),this.body.emitter.on(e,t)}},{key:"_temporaryBindUI",value:function(e,t){if(void 0===this.body.eventListeners[e])throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+JSON.stringify(Object.keys(this.body.eventListeners)));this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=t}},{key:"_unbindTemporaryUIs",value:function(){for(var e in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var e=0;e<this.temporaryEventFunctions.length;e++){var t=this.temporaryEventFunctions[e].event,i=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(t,i)}this.temporaryEventFunctions=[]}},{
key:"_bindHammerToDiv",value:function(e,t){var i=new a(e,{});s.onTouch(i,t),this.manipulationHammers.push(i)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var e=0;e<this.temporaryIds.edges.length;e++){this.body.edges[this.temporaryIds.edges[e]].disconnect(),delete this.body.edges[this.temporaryIds.edges[e]];var t=this.body.edgeIndices.indexOf(this.temporaryIds.edges[e]);-1!==t&&this.body.edgeIndices.splice(t,1)}for(var i=0;i<this.temporaryIds.nodes.length;i++){delete this.body.nodes[this.temporaryIds.nodes[i]];var r=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[i]);-1!==r&&this.body.nodeIndices.splice(r,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=o.extend({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(e){var t=this.lastTouch,i=this.selectionHandler._pointerToPositionObject(t),r=this.body.nodes[this.temporaryIds.nodes[0]],n=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var a=r.isOverlappingWith(i),s=n.isOverlappingWith(i);a===!0?(this.selectedControlNode=r,o.edgeType.from=r):s===!0&&(this.selectedControlNode=n,o.edgeType.to=n),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(e){this.body.emitter.emit("disablePhysics");var t=this.body.functions.getPointer(e.center),i=this.canvas.DOMtoCanvas(t);if(void 0!==this.selectedControlNode)this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y;else{var r=t.x-this.lastTouch.x,n=t.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+r,y:this.lastTouch.translation.y+n}}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(e){var t=this.body.functions.getPointer(e.center),i=this.selectionHandler._pointerToPositionObject(t),r=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,a=n.length-1;a>=0;a--)if(n[a]!==this.selectedControlNode.id){o=this.body.nodes[n[a]];break}if(void 0!==o&&void 0!==this.selectedControlNode)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===s.id?this._performEditEdge(o.id,r.to.id):this._performEditEdge(r.from.id,o.id)}else r.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(e){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=o.extend({},this.body.view.translation);var t=this.lastTouch,i=this.selectionHandler.getNodeAt(t);if(void 0!==i)if(i.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var r=this._getNewTargetNode(i.x,i.y);this.body.nodes[r.id]=r,this.body.nodeIndices.push(r.id);var n=this.body.functions.createEdge({id:"connectionEdge"+o.randomUUID(),from:i.id,to:r.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[n.id]=n,this.body.edgeIndices.push(n.id),this.temporaryIds.nodes.push(r.id),this.temporaryIds.edges.push(n.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(e){var t=this.body.functions.getPointer(e.center);if(void 0!==this.temporaryIds.nodes[0]){var i=this.body.nodes[this.temporaryIds.nodes[0]];i.x=this.canvas._XconvertDOMtoCanvas(t.x),i.y=this.canvas._YconvertDOMtoCanvas(t.y),this.body.emitter.emit("_redraw")}else{var r=t.x-this.lastTouch.x,n=t.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+r,y:this.lastTouch.translation.y+n}}}},{key:"_finishConnect",value:function(e){var t=this.body.functions.getPointer(e.center),i=this.selectionHandler._pointerToPositionObject(t),r=void 0;void 0!==this.temporaryIds.edges[0]&&(r=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,a=n.length-1;a>=0;a--)if(-1===this.temporaryIds.nodes.indexOf(n[a])){o=this.body.nodes[n[a]];break}this._cleanupTemporaryNodesAndEdges(),void 0!==o&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[r]&&void 0!==this.body.nodes[o.id]&&this._performAddEdge(r,o.id)),this.body.emitter.emit("_redraw")}},{key:"_performAddNode",value:function(e){var t=this,i={id:o.randomUUID(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(i,function(e){null!==e&&void 0!==e&&"addNode"===t.inMode&&(t.body.data.nodes.getDataSet().add(e),t.showManipulatorToolbar())})}else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(e,t){var i=this,r={from:e,to:t};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(r,function(e){null!==e&&void 0!==e&&"addEdge"===i.inMode&&(i.body.data.edges.getDataSet().add(e),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().add(r),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(e,t){var i=this,r={id:this.edgeBeingEditedId,from:e,to:t};if("function"==typeof this.options.editEdge){if(2!==this.options.editEdge.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editEdge(r,function(e){null===e||void 0===e||"editEdge"!==i.inMode?(i.body.edges[r.id].updateEdgeType(),i.body.emitter.emit("_redraw")):(i.body.data.edges.getDataSet().update(e),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().update(r),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),e}();t["default"]=l},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i="string",r="boolean",n="number",o="array",a="object",s="dom",l="any",h={configure:{enabled:{"boolean":r},filter:{"boolean":r,string:i,array:o,"function":"function"},container:{dom:s},showButton:{"boolean":r},__type__:{object:a,"boolean":r,string:i,array:o,"function":"function"}},edges:{arrows:{to:{enabled:{"boolean":r},scaleFactor:{number:n},__type__:{object:a,"boolean":r}},middle:{enabled:{"boolean":r},scaleFactor:{number:n},__type__:{object:a,"boolean":r}},from:{enabled:{"boolean":r},scaleFactor:{number:n},__type__:{object:a,"boolean":r}},__type__:{string:["from","to","middle"],object:a}},arrowStrikethrough:{"boolean":r},color:{color:{string:i},highlight:{string:i},hover:{string:i},inherit:{string:["from","to","both"],"boolean":r},opacity:{number:n},__type__:{object:a,string:i}},dashes:{"boolean":r,array:o},font:{color:{string:i},size:{number:n},face:{string:i},background:{string:i},strokeWidth:{number:n},strokeColor:{string:i},align:{string:["horizontal","top","middle","bottom"]},__type__:{object:a,string:i}},hidden:{"boolean":r},hoverWidth:{"function":"function",number:n},label:{string:i,undefined:"undefined"},labelHighlightBold:{"boolean":r},length:{number:n,undefined:"undefined"},physics:{"boolean":r},scaling:{min:{number:n},max:{number:n},label:{enabled:{"boolean":r},min:{number:n},max:{number:n},maxVisible:{number:n},drawThreshold:{number:n},__type__:{object:a,"boolean":r}},customScalingFunction:{"function":"function"},__type__:{object:a}},selectionWidth:{"function":"function",number:n},selfReferenceSize:{number:n},shadow:{enabled:{"boolean":r},color:{string:i},size:{number:n},x:{number:n},y:{number:n},__type__:{object:a,"boolean":r}},smooth:{enabled:{"boolean":r},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:n},forceDirection:{string:["horizontal","vertical","none"],"boolean":r},__type__:{object:a,"boolean":r}},title:{string:i,undefined:"undefined"},width:{number:n},value:{number:n,undefined:"undefined"},__type__:{object:a}},groups:{useDefaultGroups:{"boolean":r},__any__:"get from nodes, will be overwritten below",__type__:{object:a}},interaction:{dragNodes:{"boolean":r},dragView:{"boolean":r},hideEdgesOnDrag:{"boolean":r},hideNodesOnDrag:{"boolean":r},hover:{"boolean":r},keyboard:{enabled:{"boolean":r},speed:{x:{number:n},y:{number:n},zoom:{number:n},__type__:{object:a}},bindToWindow:{"boolean":r},__type__:{object:a,"boolean":r}},multiselect:{"boolean":r},navigationButtons:{"boolean":r},selectable:{"boolean":r},selectConnectedEdges:{"boolean":r},hoverConnectedEdges:{"boolean":r},tooltipDelay:{number:n},zoomView:{"boolean":r},__type__:{object:a}},layout:{randomSeed:{undefined:"undefined",number:n},improvedLayout:{"boolean":r},hierarchical:{enabled:{"boolean":r},levelSeparation:{number:n},nodeSpacing:{number:n},treeSpacing:{number:n},blockShifting:{"boolean":r},edgeMinimization:{"boolean":r},parentCentralization:{"boolean":r},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},__type__:{object:a,"boolean":r}},__type__:{object:a}},manipulation:{enabled:{"boolean":r},initiallyActive:{"boolean":r},addNode:{"boolean":r,"function":"function"},addEdge:{"boolean":r,"function":"function"},editNode:{"function":"function"},editEdge:{"boolean":r,"function":"function"},deleteNode:{"boolean":r,"function":"function"},deleteEdge:{"boolean":r,"function":"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:a,"boolean":r}},nodes:{borderWidth:{number:n},borderWidthSelected:{number:n,undefined:"undefined"},brokenImage:{string:i,undefined:"undefined"},color:{border:{string:i},background:{string:i},highlight:{border:{string:i},background:{string:i},__type__:{object:a,string:i}},hover:{border:{string:i},background:{string:i},__type__:{object:a,string:i}},__type__:{object:a,string:i}},fixed:{x:{"boolean":r},y:{"boolean":r},__type__:{object:a,"boolean":r}},font:{align:{string:i},color:{string:i},size:{number:n},face:{string:i},background:{string:i},strokeWidth:{number:n},strokeColor:{string:i},__type__:{object:a,string:i}},group:{string:i,number:n,undefined:"undefined"},hidden:{"boolean":r},icon:{face:{string:i},code:{string:i},size:{number:n},color:{string:i},__type__:{object:a}},id:{string:i,number:n},image:{string:i,undefined:"undefined"},label:{string:i,undefined:"undefined"},labelHighlightBold:{"boolean":r},level:{number:n,undefined:"undefined"},mass:{number:n},physics:{"boolean":r},scaling:{min:{number:n},max:{number:n},label:{enabled:{"boolean":r},min:{number:n},max:{number:n},maxVisible:{number:n},drawThreshold:{number:n},__type__:{object:a,"boolean":r}},customScalingFunction:{"function":"function"},__type__:{object:a}},shadow:{enabled:{"boolean":r},color:{string:i},size:{number:n},x:{number:n},y:{number:n},__type__:{object:a,"boolean":r}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon"]},shapeProperties:{borderDashes:{"boolean":r,array:o},borderRadius:{number:n},interpolation:{"boolean":r},useImageSize:{"boolean":r},useBorderWithImage:{"boolean":r},__type__:{object:a}},size:{number:n},title:{string:i,undefined:"undefined"},value:{number:n,undefined:"undefined"},x:{number:n},y:{number:n},__type__:{object:a}},physics:{enabled:{"boolean":r},barnesHut:{gravitationalConstant:{number:n},centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},damping:{number:n},avoidOverlap:{number:n},__type__:{object:a}},forceAtlas2Based:{gravitationalConstant:{number:n},centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},damping:{number:n},avoidOverlap:{number:n},__type__:{object:a}},repulsion:{centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},nodeDistance:{number:n},damping:{number:n},__type__:{object:a}},hierarchicalRepulsion:{centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},nodeDistance:{number:n},damping:{number:n},__type__:{object:a}},maxVelocity:{number:n},minVelocity:{number:n},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{"boolean":r},iterations:{number:n},updateInterval:{number:n},onlyDynamicEdges:{"boolean":r},fit:{"boolean":r},__type__:{object:a,"boolean":r}},timestep:{number:n},adaptiveTimestep:{"boolean":r},__type__:{object:a,"boolean":r}},autoResize:{"boolean":r},clickToUse:{"boolean":r},locale:{string:i},locales:{__any__:{any:l},__type__:{object:a}},height:{string:i},width:{string:i},__type__:{object:a}};h.groups.__any__=h.nodes,h.manipulation.controlNodeStyle=h.nodes;var c={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05]},middle:{enabled:!1,scaleFactor:[1,0,3,.05]},from:{enabled:!1,scaleFactor:[1,0,3,.05]}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01]},global:{locale:["en","nl"]}};t.allOptions=h,t.configureOptions=c},function(e,t,i){function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){n=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(116),l=r(s),h=function(){function e(t,i,r){n(this,e),this.body=t,this.springLength=i,this.springConstant=r,this.distanceSolver=new l["default"]}return a(e,[{key:"setOptions",value:function(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}},{key:"solve",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.distanceSolver.getDistances(this.body,e,t);this._createL_matrix(r),this._createK_matrix(r);for(var n=.01,a=1,s=0,l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),h=5,c=1e9,d=0,u=0,f=0,p=0,m=0;c>n&&l>s;){s+=1;var g=this._getHighestEnergyNode(i),v=o(g,4);for(d=v[0],c=v[1],u=v[2],f=v[3],p=c,m=0;p>a&&h>m;){m+=1,this._moveNode(d,u,f);var y=this._getEnergy(d),A=o(y,3);p=A[0],u=A[1],f=A[2]}}}},{key:"_getHighestEnergyNode",value:function(e){for(var t=this.body.nodeIndices,i=this.body.nodes,r=0,n=t[0],a=0,s=0,l=0;l<t.length;l++){var h=t[l];if(i[h].predefinedPosition===!1||i[h].isCluster===!0&&e===!0||i[h].options.fixed.x===!0||i[h].options.fixed.y===!0){var c=this._getEnergy(h),d=o(c,3),u=d[0],f=d[1],p=d[2];u>r&&(r=u,n=h,a=f,s=p)}}return[n,r,a,s]}},{key:"_getEnergy",value:function(e){for(var t=this.body.nodeIndices,i=this.body.nodes,r=i[e].x,n=i[e].y,o=0,a=0,s=0;s<t.length;s++){var l=t[s];if(l!==e){var h=i[l].x,c=i[l].y,d=1/Math.sqrt(Math.pow(r-h,2)+Math.pow(n-c,2));o+=this.K_matrix[e][l]*(r-h-this.L_matrix[e][l]*(r-h)*d),a+=this.K_matrix[e][l]*(n-c-this.L_matrix[e][l]*(n-c)*d)}}var u=Math.sqrt(Math.pow(o,2)+Math.pow(a,2));return[u,o,a]}},{key:"_moveNode",value:function(e,t,i){for(var r=this.body.nodeIndices,n=this.body.nodes,o=0,a=0,s=0,l=n[e].x,h=n[e].y,c=0;c<r.length;c++){var d=r[c];if(d!==e){var u=n[d].x,f=n[d].y,p=1/Math.pow(Math.pow(l-u,2)+Math.pow(h-f,2),1.5);o+=this.K_matrix[e][d]*(1-this.L_matrix[e][d]*Math.pow(h-f,2)*p),a+=this.K_matrix[e][d]*(this.L_matrix[e][d]*(l-u)*(h-f)*p),s+=this.K_matrix[e][d]*(1-this.L_matrix[e][d]*Math.pow(l-u,2)*p)}}var m=o,g=a,v=t,y=s,A=i,b=(v/m+A/g)/(g/m-y/g),E=-(g*b+v)/m;n[e].x+=E,n[e].y+=b}},{key:"_createL_matrix",value:function(e){var t=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var r=0;r<t.length;r++){this.L_matrix[t[r]]={};for(var n=0;n<t.length;n++)this.L_matrix[t[r]][t[n]]=i*e[t[r]][t[n]]}}},{key:"_createK_matrix",value:function(e){var t=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var r=0;r<t.length;r++){this.K_matrix[t[r]]={};for(var n=0;n<t.length;n++)this.K_matrix[t[r]][t[n]]=i*Math.pow(e[t[r]][t[n]],-2)}}}]),e}();t["default"]=h},function(e,t){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(){function e(){i(this,e)}return r(e,[{key:"getDistances",value:function(e,t,i){for(var r={},n=e.edges,o=0;o<t.length;o++){r[t[o]]={},r[t[o]]={};for(var a=0;a<t.length;a++)r[t[o]][t[a]]=o==a?0:1e9,r[t[o]][t[a]]=o==a?0:1e9}for(var s=0;s<i.length;s++){var l=n[i[s]];l.connected===!0&&void 0!==r[l.fromId]&&void 0!==r[l.toId]&&(r[l.fromId][l.toId]=1,r[l.toId][l.fromId]=1)}for(var h=t.length,c=0;h>c;c++)for(var d=0;h-1>d;d++)for(var u=d+1;h>u;u++)r[t[d]][t[u]]=Math.min(r[t[d]][t[u]],r[t[d]][t[c]]+r[t[c]][t[u]]),r[t[u]][t[d]]=r[t[d]][t[u]];return r}}]),e}();t["default"]=n},function(e,t){"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(e,t,i){this.beginPath(),this.arc(e,t,i,0,2*Math.PI,!1),this.closePath()},CanvasRenderingContext2D.prototype.square=function(e,t,i){this.beginPath(),this.rect(e-i,t-i,2*i,2*i),this.closePath()},CanvasRenderingContext2D.prototype.triangle=function(e,t,i){this.beginPath(),i*=1.15,t+=.275*i;var r=2*i,n=r/2,o=Math.sqrt(3)/6*r,a=Math.sqrt(r*r-n*n);this.moveTo(e,t-(a-o)),this.lineTo(e+n,t+o),this.lineTo(e-n,t+o),this.lineTo(e,t-(a-o)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(e,t,i){this.beginPath(),i*=1.15,t-=.275*i;var r=2*i,n=r/2,o=Math.sqrt(3)/6*r,a=Math.sqrt(r*r-n*n);this.moveTo(e,t+(a-o)),this.lineTo(e+n,t-o),this.lineTo(e-n,t-o),this.lineTo(e,t+(a-o)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(e,t,i){this.beginPath(),i*=.82,t+=.1*i;for(var r=0;10>r;r++){var n=r%2===0?1.3*i:.5*i;this.lineTo(e+n*Math.sin(2*r*Math.PI/10),t-n*Math.cos(2*r*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.diamond=function(e,t,i){this.beginPath(),this.lineTo(e,t+i),this.lineTo(e+i,t),this.lineTo(e,t-i),this.lineTo(e-i,t),this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(e,t,i,r,n){var o=Math.PI/180;0>i-2*n&&(n=i/2),0>r-2*n&&(n=r/2),this.beginPath(),this.moveTo(e+n,t),this.lineTo(e+i-n,t),this.arc(e+i-n,t+n,n,270*o,360*o,!1),this.lineTo(e+i,t+r-n),this.arc(e+i-n,t+r-n,n,0,90*o,!1),this.lineTo(e+n,t+r),this.arc(e+n,t+r-n,n,90*o,180*o,!1),this.lineTo(e,t+n),this.arc(e+n,t+n,n,180*o,270*o,!1),this.closePath()},CanvasRenderingContext2D.prototype.ellipse=function(e,t,i,r){var n=.5522848,o=i/2*n,a=r/2*n,s=e+i,l=t+r,h=e+i/2,c=t+r/2;this.beginPath(),this.moveTo(e,c),this.bezierCurveTo(e,c-a,h-o,t,h,t),this.bezierCurveTo(h+o,t,s,c-a,s,c),this.bezierCurveTo(s,c+a,h+o,l,h,l),this.bezierCurveTo(h-o,l,e,c+a,e,c),this.closePath()},CanvasRenderingContext2D.prototype.database=function(e,t,i,r){var n=1/3,o=i,a=r*n,s=.5522848,l=o/2*s,h=a/2*s,c=e+o,d=t+a,u=e+o/2,f=t+a/2,p=t+(r-a/2),m=t+r;this.beginPath(),this.moveTo(c,f),this.bezierCurveTo(c,f+h,u+l,d,u,d),this.bezierCurveTo(u-l,d,e,f+h,e,f),this.bezierCurveTo(e,f-h,u-l,t,u,t),this.bezierCurveTo(u+l,t,c,f-h,c,f),this.lineTo(c,p),this.bezierCurveTo(c,p+h,u+l,m,u,m),this.bezierCurveTo(u-l,m,e,p+h,e,p),this.lineTo(e,f)},CanvasRenderingContext2D.prototype.arrow=function(e,t,i,r){var n=e-r*Math.cos(i),o=t-r*Math.sin(i),a=e-.9*r*Math.cos(i),s=t-.9*r*Math.sin(i),l=n+r/3*Math.cos(i+.5*Math.PI),h=o+r/3*Math.sin(i+.5*Math.PI),c=n+r/3*Math.cos(i-.5*Math.PI),d=o+r/3*Math.sin(i-.5*Math.PI);this.beginPath(),this.moveTo(e,t),this.lineTo(l,h),this.lineTo(a,s),this.lineTo(c,d),this.closePath()},CanvasRenderingContext2D.prototype.dashedLine=function(e,t,i,r,n){this.beginPath(),this.moveTo(e,t);for(var o=n.length,a=i-e,s=r-t,l=s/a,h=Math.sqrt(a*a+s*s),c=0,d=!0,u=0,f=n[0];h>=.1;)f=n[c++%o],f>h&&(f=h),u=Math.sqrt(f*f/(1+l*l)),u=0>a?-u:u,e+=u,t+=l*u,d===!0?this.lineTo(e,t):this.moveTo(e,t),h-=f,d=!d})},function(e,t){function i(e){return P=e,f()}function r(){D=0,H=P.charAt(0)}function n(){D++,H=P.charAt(D)}function o(){return P.charAt(D+1)}function a(e){return I.test(e)}function s(e,t){if(e||(e={}),t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function l(e,t,i){for(var r=t.split("."),n=e;r.length;){var o=r.shift();r.length?(n[o]||(n[o]={}),n=n[o]):n[o]=i}}function h(e,t){for(var i,r,n=null,o=[e],a=e;a.parent;)o.push(a.parent),a=a.parent;if(a.nodes)for(i=0,r=a.nodes.length;r>i;i++)if(t.id===a.nodes[i].id){n=a.nodes[i];break}for(n||(n={id:t.id},e.node&&(n.attr=s(n.attr,e.node))),i=o.length-1;i>=0;i--){var l=o[i];l.nodes||(l.nodes=[]),-1===l.nodes.indexOf(n)&&l.nodes.push(n)}t.attr&&(n.attr=s(n.attr,t.attr))}function c(e,t){if(e.edges||(e.edges=[]),e.edges.push(t),e.edge){var i=s({},e.edge);t.attr=s(i,t.attr)}}function d(e,t,i,r,n){var o={from:t,to:i,type:r};return e.edge&&(o.attr=s({},e.edge)),o.attr=s(o.attr||{},n),o}function u(){for(L=k.NULL,O="";" "===H||"    "===H||"\n"===H||"\r"===H;)n();do{var e=!1;if("#"===H){for(var t=D-1;" "===P.charAt(t)||"   "===P.charAt(t);)t--;if("\n"===P.charAt(t)||""===P.charAt(t)){for(;""!=H&&"\n"!=H;)n();e=!0}}if("/"===H&&"/"===o()){for(;""!=H&&"\n"!=H;)n();e=!0}if("/"===H&&"*"===o()){for(;""!=H;){if("*"===H&&"/"===o()){n(),n();break}n()}e=!0}for(;" "===H||" "===H||"\n"===H||"\r"===H;)n()}while(e);if(""===H)return void(L=k.DELIMITER);var i=H+o();if(M[i])return L=k.DELIMITER,O=i,n(),void n();if(M[H])return L=k.DELIMITER,O=H,void n();if(a(H)||"-"===H){for(O+=H,n();a(H);)O+=H,n();return"false"===O?O=!1:"true"===O?O=!0:isNaN(Number(O))||(O=Number(O)),void(L=k.IDENTIFIER)}if('"'===H){for(n();""!=H&&('"'!=H||'"'===H&&'"'===o());)O+=H,'"'===H&&n(),n();if('"'!=H)throw E('End of string " expected');return n(),void(L=k.IDENTIFIER)}for(L=k.UNKNOWN;""!=H;)O+=H,n();throw new SyntaxError('Syntax error in part "'+x(O,30)+'"')}function f(){var e={};if(r(),u(),"strict"===O&&(e.strict=!0,u()),"graph"!==O&&"digraph"!==O||(e.type=O,u()),L===k.IDENTIFIER&&(e.id=O,u()),"{"!=O)throw E("Angle bracket { expected");if(u(),p(e),"}"!=O)throw E("Angle bracket } expected");if(u(),""!==O)throw E("End of file expected");return u(),delete e.node,delete e.edge,delete e.graph,e}function p(e){for(;""!==O&&"}"!=O;)m(e),";"===O&&u()}function m(e){var t=g(e);if(t)return void A(e,t);var i=v(e);if(!i){if(L!=k.IDENTIFIER)throw E("Identifier expected");var r=O;if(u(),"="===O){if(u(),L!=k.IDENTIFIER)throw E("Identifier expected");e[r]=O,u()}else y(e,r)}}function g(e){var t=null;if("subgraph"===O&&(t={},t.type="subgraph",u(),L===k.IDENTIFIER&&(t.id=O,u())),"{"===O){if(u(),t||(t={}),t.parent=e,t.node=e.node,t.edge=e.edge,t.graph=e.graph,p(t),"}"!=O)throw E("Angle bracket } expected");u(),delete t.node,delete t.edge,delete t.graph,delete t.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(t)}return t}function v(e){return"node"===O?(u(),e.node=b(),"node"):"edge"===O?(u(),e.edge=b(),"edge"):"graph"===O?(u(),e.graph=b(),"graph"):null}function y(e,t){var i={id:t},r=b();r&&(i.attr=r),h(e,i),A(e,t)}function A(e,t){for(;"->"===O||"--"===O;){var i,r=O;u();var n=g(e);if(n)i=n;else{if(L!=k.IDENTIFIER)throw E("Identifier or subgraph expected");i=O,h(e,{id:i}),u()}var o=b(),a=d(e,t,i,r,o);c(e,a),t=i}}function b(){for(var e=null;"["===O;){for(u(),e={};""!==O&&"]"!=O;){if(L!=k.IDENTIFIER)throw E("Attribute name expected");var t=O;if(u(),"="!=O)throw E("Equal sign = expected");if(u(),L!=k.IDENTIFIER)throw E("Attribute value expected");var i=O;l(e,t,i),u(),","==O&&u()}if("]"!=O)throw E("Bracket ] expected");u()}return e}function E(e){return new SyntaxError(e+', got "'+x(O,30)+'" (char '+D+")")}function x(e,t){return e.length<=t?e:e.substr(0,27)+"..."}function w(e,t,i){Array.isArray(e)?e.forEach(function(e){Array.isArray(t)?t.forEach(function(t){i(e,t)}):i(e,t)}):Array.isArray(t)?t.forEach(function(t){i(e,t)}):i(e,t)}function T(e,t,i){for(var r=t.split("."),n=r.pop(),o=e,a=0;a<r.length;a++){var s=r[a];s in o||(o[s]={}),o=o[s]}return o[n]=i,e}function _(e,t){var i={};for(var r in e)if(e.hasOwnProperty(r)){var n=t[r];Array.isArray(n)?n.forEach(function(t){T(i,t,e[r])}):"string"==typeof n?T(i,n,e[r]):T(i,r,e[r])}return i}function S(e){var t=i(e),r={nodes:[],edges:[],options:{}};if(t.nodes&&t.nodes.forEach(function(e){var t={id:e.id,label:String(e.label||e.id)};s(t,_(e.attr,C)),t.image&&(t.shape="image"),r.nodes.push(t)}),t.edges){var n=function(e){var t={from:e.from,to:e.to};return s(t,_(e.attr,R)),t.arrows="->"===e.type?"to":void 0,t};t.edges.forEach(function(e){var t,i;t=e.from instanceof Object?e.from.nodes:{id:e.from},i=e.to instanceof Object?e.to.nodes:{id:e.to},e.from instanceof Object&&e.from.edges&&e.from.edges.forEach(function(e){var t=n(e);r.edges.push(t)}),w(t,i,function(t,i){var o=d(r,t.id,i.id,e.type,e.attr),a=n(o);r.edges.push(a)}),e.to instanceof Object&&e.to.edges&&e.to.edges.forEach(function(e){var t=n(e);r.edges.push(t)})})}return t.attr&&(r.options=t.attr),r}var C={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},R=Object.create(C);R.color="color.color";var k={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},M={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},P="",D=0,H="",O="",L=k.NULL,I=/[a-zA-Z_0-9.:#]/;t.parseDOT=i,t.DOTToGraph=S},function(e,t){function i(e,t){var i=[],r=[],n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};void 0!==t&&(void 0!==t.fixed&&(n.nodes.fixed=t.fixed),void 0!==t.parseColor&&(n.nodes.parseColor=t.parseColor),void 0!==t.inheritColor&&(n.edges.inheritColor=t.inheritColor));for(var o=e.edges,a=e.nodes,s=0;s<o.length;s++){var l={},h=o[s];l.id=h.id,l.from=h.source,l.to=h.target,l.attributes=h.attributes,l.label=h.label,l.title=void 0!==h.attributes?h.attributes.title:void 0,"Directed"===h.type&&(l.arrows="to"),h.color&&n.inheritColor===!1&&(l.color=h.color),i.push(l)}for(var s=0;s<a.length;s++){var c={},d=a[s];c.id=d.id,c.attributes=d.attributes,c.title=d.title,c.x=d.x,c.y=d.y,c.label=d.label,c.title=void 0!==d.attributes?d.attributes.title:void 0,n.nodes.parseColor===!0?c.color=d.color:c.color=void 0!==d.color?{background:d.color,border:d.color,highlight:{background:d.color,border:d.color},hover:{background:d.color,border:d.color}}:void 0,c.size=d.size,c.fixed=n.nodes.fixed&&void 0!==d.x&&void 0!==d.y,r.push(c)}return{nodes:r,edges:i}}t.parseGephi=i},function(e,t){t.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},t.en_EN=t.en,t.en_US=t.en,t.de={edit:"Editieren",del:"Lösche Auswahl",back:"Zurück",addNode:"Knoten hinzufügen",addEdge:"Kante hinzufügen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster können nicht gelöscht werden.",
editClusterError:"Cluster können nicht editiert werden."},t.de_DE=t.de,t.es={edit:"Editar",del:"Eliminar selección",back:"Átras",addNode:"Añadir nodo",addEdge:"Añadir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},t.es_ES=t.es,t.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},t.nl_NL=t.nl,t.nl_BE=t.nl}])});var THREE={REVISION:"69"};"object"==typeof module&&(module.exports=THREE),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:e>0?1:0}),THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.MinEquation=103,THREE.MaxEquation=104,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.RGB_PVRTC_4BPPV1_Format=2100,THREE.RGB_PVRTC_2BPPV1_Format=2101,THREE.RGBA_PVRTC_4BPPV1_Format=2102,THREE.RGBA_PVRTC_2BPPV1_Format=2103,THREE.Color=function(e){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(e)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){return e instanceof THREE.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(e,t,i){if(0===t)this.r=this.g=this.b=i;else{var r=function(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+6*(t-e)*(2/3-i):e},n=.5>=i?i*(1+t):i+t-i*t,o=2*i-n;this.r=r(o,n,e+1/3),this.g=r(o,n,e),this.b=r(o,n,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){var t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(e)){var t=/^\#([0-9a-f]{6})$/i.exec(e);return this.setHex(parseInt(t[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){var t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);return this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this}return/^(\w+)$/i.test(e)?(this.setHex(THREE.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b;return this.r=e*e,this.g=t*t,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,i,r=e||{h:0,s:0,l:0},n=this.r,o=this.g,a=this.b,s=Math.max(n,o,a),l=Math.min(n,o,a),h=(l+s)/2;if(l===s)t=0,i=0;else{var c=s-l;switch(i=.5>=h?c/(s+l):c/(2-s-l),s){case n:t=(o-a)/c+(a>o?6:0);break;case o:t=(a-n)/c+2;break;case a:t=(n-o)/c+4}t/=6}return r.h=t,r.s=i,r.l=h,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,i){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=i,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==r?r:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this.onChangeCallback(),this},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(e instanceof THREE.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=Math.cos(e._x/2),r=Math.cos(e._y/2),n=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=o*r*n+i*a*s,this._y=i*a*n-o*r*s,this._z=i*r*s+o*a*n,this._w=i*r*n-o*a*s):"YXZ"===e.order?(this._x=o*r*n+i*a*s,this._y=i*a*n-o*r*s,this._z=i*r*s-o*a*n,this._w=i*r*n+o*a*s):"ZXY"===e.order?(this._x=o*r*n-i*a*s,this._y=i*a*n+o*r*s,this._z=i*r*s+o*a*n,this._w=i*r*n-o*a*s):"ZYX"===e.order?(this._x=o*r*n-i*a*s,this._y=i*a*n+o*r*s,this._z=i*r*s-o*a*n,this._w=i*r*n+o*a*s):"YZX"===e.order?(this._x=o*r*n+i*a*s,this._y=i*a*n+o*r*s,this._z=i*r*s-o*a*n,this._w=i*r*n-o*a*s):"XZY"===e.order&&(this._x=o*r*n-i*a*s,this._y=i*a*n-o*r*s,this._z=i*r*s+o*a*n,this._w=i*r*n+o*a*s),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,i=e.elements,r=i[0],n=i[4],o=i[8],a=i[1],s=i[5],l=i[9],h=i[2],c=i[6],d=i[10],u=r+s+d;return u>0?(t=.5/Math.sqrt(u+1),this._w=.25/t,this._x=(c-l)*t,this._y=(o-h)*t,this._z=(a-n)*t):r>s&&r>d?(t=2*Math.sqrt(1+r-s-d),this._w=(c-l)/t,this._x=.25*t,this._y=(n+a)/t,this._z=(o+h)/t):s>d?(t=2*Math.sqrt(1+s-r-d),this._w=(o-h)/t,this._x=(n+a)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+d-r-s),this._w=(a-n)/t,this._x=(o+h)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t,i=1e-6;return function(r,n){return void 0===e&&(e=new THREE.Vector3),t=r.dot(n)+1,i>t?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e._x,r=e._y,n=e._z,o=e._w,a=t._x,s=t._y,l=t._z,h=t._w;return this._x=i*h+o*a+r*l-n*s,this._y=r*h+o*s+n*a-i*l,this._z=n*h+o*l+i*s-r*a,this._w=o*h-i*a-r*s-n*l,this.onChangeCallback(),this},multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,r=this._y,n=this._z,o=this._w,a=o*e._w+i*e._x+r*e._y+n*e._z;if(0>a?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=n,this;var s=Math.acos(a),l=Math.sqrt(1-a*a);if(Math.abs(l)<.001)return this._w=.5*(o+this._w),this._x=.5*(i+this._x),this._y=.5*(r+this._y),this._z=.5*(n+this._z),this;var h=Math.sin((1-t)*s)/l,c=Math.sin(t*s)/l;return this._w=o*h+this._w*c,this._x=i*h+this._x*c,this._y=r*h+this._y*c,this._z=n*h+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(e,t,i,r){return i.copy(e).slerp(t,r)},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t}else this.x=0,this.y=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(){var e,t;return function(i,r){return void 0===e&&(e=new THREE.Vector2,t=new THREE.Vector2),e.set(i,i),t.set(r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return t instanceof THREE.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e;return function(t,i){return void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,i)),this}}(),applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6]*r,this.y=n[1]*t+n[4]*i+n[7]*r,this.z=n[2]*t+n[5]*i+n[8]*r,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r+n[12],this.y=n[1]*t+n[5]*i+n[9]*r+n[13],this.z=n[2]*t+n[6]*i+n[10]*r+n[14],this},applyProjection:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements,o=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*o,this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*o,this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*o,this},applyQuaternion:function(e){var t=this.x,i=this.y,r=this.z,n=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*i,h=s*i+a*t-n*r,c=s*r+n*i-o*t,d=-n*t-o*i-a*r;return this.x=l*s+d*-n+h*-a-c*-o,this.y=h*s+d*-o+c*-n-l*-a,this.z=c*s+d*-a+l*-o-h*-n,this},project:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r,this.y=n[1]*t+n[5]*i+n[9]*r,this.z=n[2]*t+n[6]*i+n[10]*r,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e,t;return function(i,r){return void 0===e&&(e=new THREE.Vector3,t=new THREE.Vector3),e.set(i,i,i),t.set(r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var i=this.x,r=this.y,n=this.z;return this.x=r*e.z-n*e.y,this.y=n*e.x-i*e.z,this.z=i*e.y-r*e.x,this},crossVectors:function(e,t){var i=e.x,r=e.y,n=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-n*a,this.y=n*o-i*s,this.z=i*a-r*o,this},projectOnVector:function(){var e,t;return function(i){return void 0===e&&(e=new THREE.Vector3),e.copy(i).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(THREE.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r},setEulerFromRotationMatrix:function(e,t){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(e,t){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),i=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),r=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=i,this.z=r,this},setFromMatrixColumn:function(e,t){var i=4*e,r=t.elements;return this.x=r[i],this.y=r[i+1],this.z=r[i+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(e,t,i,r){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==r?r:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*n,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*n,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*n,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*n,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t,this.w*=t}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,i,r,n,o=.01,a=.1,s=e.elements,l=s[0],h=s[4],c=s[8],d=s[1],u=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(h-d)<o&&Math.abs(c-p)<o&&Math.abs(f-m)<o){if(Math.abs(h+d)<a&&Math.abs(c+p)<a&&Math.abs(f+m)<a&&Math.abs(l+u+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var v=(l+1)/2,y=(u+1)/2,A=(g+1)/2,b=(h+d)/4,E=(c+p)/4,x=(f+m)/4;return v>y&&v>A?o>v?(i=0,r=.707106781,n=.707106781):(i=Math.sqrt(v),r=b/i,n=E/i):y>A?o>y?(i=.707106781,r=0,n=.707106781):(r=Math.sqrt(y),i=b/r,n=x/r):o>A?(i=.707106781,r=.707106781,n=0):(n=Math.sqrt(A),i=E/n,r=x/n),this.set(i,r,n,t),this}var w=Math.sqrt((m-f)*(m-f)+(c-p)*(c-p)+(d-h)*(d-h));return Math.abs(w)<.001&&(w=1),this.x=(m-f)/w,this.y=(c-p)/w,this.z=(d-h)/w,this.w=Math.acos((l+u+g-1)/2),this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(){var e,t;return function(i,r){return void 0===e&&(e=new THREE.Vector4,t=new THREE.Vector4),e.set(i,i,i,i),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._order=r||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,i,r){
return this._x=e,this._y=t,this._z=i,this._order=r||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t){var i=THREE.Math.clamp,r=e.elements,n=r[0],o=r[4],a=r[8],s=r[1],l=r[5],h=r[9],c=r[2],d=r[6],u=r[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-h,u),this._z=Math.atan2(-o,n)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(a,u),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,n),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-c,u),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,n))):"ZYX"===t?(this._y=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(d,u),this._z=Math.atan2(s,n)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,n)):(this._x=0,this._y=Math.atan2(a,u))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-h,u),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,this.onChangeCallback(),this},setFromQuaternion:function(e,t,i){var r=THREE.Math.clamp,n=e.x*e.x,o=e.y*e.y,a=e.z*e.z,s=e.w*e.w;return t=t||this._order,"XYZ"===t?(this._x=Math.atan2(2*(e.x*e.w-e.y*e.z),s-n-o+a),this._y=Math.asin(r(2*(e.x*e.z+e.y*e.w),-1,1)),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),s+n-o-a)):"YXZ"===t?(this._x=Math.asin(r(2*(e.x*e.w-e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),s-n-o+a),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),s-n+o-a)):"ZXY"===t?(this._x=Math.asin(r(2*(e.x*e.w+e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.y*e.w-e.z*e.x),s-n-o+a),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),s-n+o-a)):"ZYX"===t?(this._x=Math.atan2(2*(e.x*e.w+e.z*e.y),s-n-o+a),this._y=Math.asin(r(2*(e.y*e.w-e.x*e.z),-1,1)),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),s+n-o-a)):"YZX"===t?(this._x=Math.atan2(2*(e.x*e.w-e.z*e.y),s-n+o-a),this._y=Math.atan2(2*(e.y*e.w-e.x*e.z),s+n-o-a),this._z=Math.asin(r(2*(e.x*e.y+e.z*e.w),-1,1))):"XZY"===t?(this._x=Math.atan2(2*(e.x*e.w+e.y*e.z),s-n+o-a),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),s+n-o-a),this._z=Math.asin(r(2*(e.z*e.w-e.x*e.y),-1,1))):console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+t),this._order=t,i!==!1&&this.onChangeCallback(),this},reorder:function(){var e=new THREE.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(e,t){this.start=void 0!==e?e:new THREE.Vector3,this.end=void 0!==t?t:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var i=t||new THREE.Vector3;return this.delta(i).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i,r){e.subVectors(i,this.start),t.subVectors(this.end,this.start);var n=t.dot(t),o=t.dot(e),a=o/n;return r&&(a=THREE.Math.clamp(a,0,1)),a}}(),closestPointToPoint:function(e,t,i){var r=this.closestPointToPointParameter(e,t),n=i||new THREE.Vector3;return this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(e,t){this.min=void 0!==e?e:new THREE.Vector2(1/0,1/0),this.max=void 0!==t?t:new THREE.Vector2(-(1/0),-(1/0))},THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;i>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector2;return function(t,i){var r=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new THREE.Vector2;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector2;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var i=t||new THREE.Vector2;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var i=t||new THREE.Vector2;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector2;return function(t){var i=e.copy(t).clamp(this.min,this.max);return i.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(e,t){this.min=void 0!==e?e:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new THREE.Vector3(-(1/0),-(1/0),-(1/0))},THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;i>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector3;return function(t,i){var r=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e=new THREE.Vector3;return function(t){var i=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var r=t.geometry;if(void 0!==r)if(r instanceof THREE.Geometry)for(var n=r.vertices,o=0,a=n.length;a>o;o++)e.copy(n[o]),e.applyMatrix4(t.matrixWorld),i.expandByPoint(e);else if(r instanceof THREE.BufferGeometry&&void 0!==r.attributes.position)for(var s=r.attributes.position.array,o=0,a=s.length;a>o;o+=3)e.set(s[o],s[o+1],s[o+2]),e.applyMatrix4(t.matrixWorld),i.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var i=t||new THREE.Vector3;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},clampPoint:function(e,t){var i=t||new THREE.Vector3;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var i=e.copy(t).clamp(this.min,this.max);return i.sub(t).length()}}(),getBoundingSphere:function(){var e=new THREE.Vector3;return function(t){var i=t||new THREE.Sphere;return i.center=this.center(),i.radius=.5*this.size(e).length(),i}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,i,r,n,o,a,s,l){var h=this.elements;return h[0]=e,h[3]=t,h[6]=i,h[1]=r,h[4]=n,h[7]=o,h[2]=a,h[5]=s,h[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length);for(var n=0,o=i;r>n;n+=3,o+=3)e.x=t[o],e.y=t[o+1],e.z=t[o+2],e.applyMatrix3(this),t[o]=e.x,t[o+1]=e.y,t[o+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],a=e[5],s=e[6],l=e[7],h=e[8];return t*o*h-t*a*l-i*n*h+i*a*s+r*n*l-r*o*s},getInverse:function(e,t){var i=e.elements,r=this.elements;r[0]=i[10]*i[5]-i[6]*i[9],r[1]=-i[10]*i[1]+i[2]*i[9],r[2]=i[6]*i[1]-i[2]*i[5],r[3]=-i[10]*i[4]+i[6]*i[8],r[4]=i[10]*i[0]-i[2]*i[8],r[5]=-i[6]*i[0]+i[2]*i[4],r[6]=i[9]*i[4]-i[5]*i[8],r[7]=-i[9]*i[0]+i[1]*i[8],r[8]=i[5]*i[0]-i[1]*i[4];var n=i[0]*r[0]+i[1]*r[3]+i[2]*r[6];if(0===n){var o="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(o);return console.warn(o),this.identity(),this}return this.multiplyScalar(1/n),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){return(new THREE.Matrix3).fromArray(this.elements)}},THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,i,r,n,o,a,s,l,h,c,d,u,f,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=n,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=h,g[10]=c,g[14]=d,g[3]=u,g[7]=f,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this},extractRotation:function(){var e=new THREE.Vector3;return function(t){var i=this.elements,r=t.elements,n=1/e.set(r[0],r[1],r[2]).length(),o=1/e.set(r[4],r[5],r[6]).length(),a=1/e.set(r[8],r[9],r[10]).length();return i[0]=r[0]*n,i[1]=r[1]*n,i[2]=r[2]*n,i[4]=r[4]*o,i[5]=r[5]*o,i[6]=r[6]*o,i[8]=r[8]*a,i[9]=r[9]*a,i[10]=r[10]*a,this}}(),makeRotationFromEuler:function(e){e instanceof THREE.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,r=e.y,n=e.z,o=Math.cos(i),a=Math.sin(i),s=Math.cos(r),l=Math.sin(r),h=Math.cos(n),c=Math.sin(n);if("XYZ"===e.order){var d=o*h,u=o*c,f=a*h,p=a*c;t[0]=s*h,t[4]=-s*c,t[8]=l,t[1]=u+f*l,t[5]=d-p*l,t[9]=-a*s,t[2]=p-d*l,t[6]=f+u*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*h,g=s*c,v=l*h,y=l*c;t[0]=m+y*a,t[4]=v*a-g,t[8]=o*l,t[1]=o*c,t[5]=o*h,t[9]=-a,t[2]=g*a-v,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){var m=s*h,g=s*c,v=l*h,y=l*c;t[0]=m-y*a,t[4]=-o*c,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*h,t[9]=y-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){var d=o*h,u=o*c,f=a*h,p=a*c;t[0]=s*h,t[4]=f*l-u,t[8]=d*l+p,t[1]=s*c,t[5]=p*l+d,t[9]=u*l-f,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var A=o*s,b=o*l,E=a*s,x=a*l;t[0]=s*h,t[4]=x-A*c,t[8]=E*c+b,t[1]=c,t[5]=o*h,t[9]=-a*h,t[2]=-l*h,t[6]=b*c+E,t[10]=A-x*c}else if("XZY"===e.order){var A=o*s,b=o*l,E=a*s,x=a*l;t[0]=s*h,t[4]=-c,t[8]=l*h,t[1]=A*c+x,t[5]=o*h,t[9]=b*c-E,t[2]=E*c-b,t[6]=a*h,t[10]=x*c+A}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,i=e.x,r=e.y,n=e.z,o=e.w,a=i+i,s=r+r,l=n+n,h=i*a,c=i*s,d=i*l,u=r*s,f=r*l,p=n*l,m=o*a,g=o*s,v=o*l;return t[0]=1-(u+p),t[4]=c-v,t[8]=d+g,t[1]=c+v,t[5]=1-(h+p),t[9]=f-m,t[2]=d-g,t[6]=f+m,t[10]=1-(h+u),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,o){var a=this.elements;return i.subVectors(r,n).normalize(),0===i.length()&&(i.z=1),e.crossVectors(o,i).normalize(),0===e.length()&&(i.x+=1e-4,e.crossVectors(o,i).normalize()),t.crossVectors(i,e),a[0]=e.x,a[4]=t.x,a[8]=i.x,a[1]=e.y,a[5]=t.y,a[9]=i.y,a[2]=e.z,a[6]=t.z,a[10]=i.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var i=e.elements,r=t.elements,n=this.elements,o=i[0],a=i[4],s=i[8],l=i[12],h=i[1],c=i[5],d=i[9],u=i[13],f=i[2],p=i[6],m=i[10],g=i[14],v=i[3],y=i[7],A=i[11],b=i[15],E=r[0],x=r[4],w=r[8],T=r[12],_=r[1],S=r[5],C=r[9],R=r[13],k=r[2],M=r[6],P=r[10],D=r[14],H=r[3],O=r[7],L=r[11],I=r[15];return n[0]=o*E+a*_+s*k+l*H,n[4]=o*x+a*S+s*M+l*O,n[8]=o*w+a*C+s*P+l*L,n[12]=o*T+a*R+s*D+l*I,n[1]=h*E+c*_+d*k+u*H,n[5]=h*x+c*S+d*M+u*O,n[9]=h*w+c*C+d*P+u*L,n[13]=h*T+c*R+d*D+u*I,n[2]=f*E+p*_+m*k+g*H,n[6]=f*x+p*S+m*M+g*O,n[10]=f*w+p*C+m*P+g*L,n[14]=f*T+p*R+m*D+g*I,n[3]=v*E+y*_+A*k+b*H,n[7]=v*x+y*S+A*M+b*O,n[11]=v*w+y*C+A*P+b*L,n[15]=v*T+y*R+A*D+b*I,this},multiplyToArray:function(e,t,i){var r=this.elements;return this.multiplyMatrices(e,t),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length);for(var n=0,o=i;r>n;n+=3,o+=3)e.x=t[o],e.y=t[o+1],e.z=t[o+2],e.applyMatrix4(this),t[o]=e.x,t[o+1]=e.y,t[o+2]=e.z;return t}}(),rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],o=e[1],a=e[5],s=e[9],l=e[13],h=e[2],c=e[6],d=e[10],u=e[14],f=e[3],p=e[7],m=e[11],g=e[15];return f*(+n*s*c-r*l*c-n*a*d+i*l*d+r*a*u-i*s*u)+p*(+t*s*u-t*l*d+n*o*d-r*o*u+r*l*h-n*s*h)+m*(+t*l*c-t*a*u-n*o*c+i*o*u+n*a*h-i*l*h)+g*(-r*a*h-t*s*c+t*a*d+r*o*c-i*o*d+i*s*h)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e},getPosition:function(){var e=new THREE.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,r=e.elements,n=r[0],o=r[4],a=r[8],s=r[12],l=r[1],h=r[5],c=r[9],d=r[13],u=r[2],f=r[6],p=r[10],m=r[14],g=r[3],v=r[7],y=r[11],A=r[15];i[0]=c*m*v-d*p*v+d*f*y-h*m*y-c*f*A+h*p*A,i[4]=s*p*v-a*m*v-s*f*y+o*m*y+a*f*A-o*p*A,i[8]=a*d*v-s*c*v+s*h*y-o*d*y-a*h*A+o*c*A,i[12]=s*c*f-a*d*f-s*h*p+o*d*p+a*h*m-o*c*m,i[1]=d*p*g-c*m*g-d*u*y+l*m*y+c*u*A-l*p*A,i[5]=a*m*g-s*p*g+s*u*y-n*m*y-a*u*A+n*p*A,i[9]=s*c*g-a*d*g-s*l*y+n*d*y+a*l*A-n*c*A,i[13]=a*d*u-s*c*u+s*l*p-n*d*p-a*l*m+n*c*m,i[2]=h*m*g-d*f*g+d*u*v-l*m*v-h*u*A+l*f*A,i[6]=s*f*g-o*m*g-s*u*v+n*m*v+o*u*A-n*f*A,i[10]=o*d*g-s*h*g+s*l*v-n*d*v-o*l*A+n*h*A,i[14]=s*h*u-o*d*u-s*l*f+n*d*f+o*l*m-n*h*m,i[3]=c*f*g-h*p*g-c*u*v+l*p*v+h*u*y-l*f*y,i[7]=o*p*g-a*f*g+a*u*v-n*p*v-o*u*y+n*f*y,i[11]=a*h*g-o*c*g-a*l*v+n*c*v+o*l*y-n*h*y,i[15]=o*c*u-a*h*u+a*l*f-n*c*f-o*l*p+n*h*p;var b=n*i[0]+l*i[4]+u*i[8]+g*i[12];if(0==b){var E="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(E);return console.warn(E),this.identity(),this}return this.multiplyScalar(1/b),this},translate:function(e){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,i=e.x,r=e.y,n=e.z;return t[0]*=i,t[4]*=r,t[8]*=n,t[1]*=i,t[5]*=r,t[9]*=n,t[2]*=i,t[6]*=r,t[10]*=n,t[3]*=i,t[7]*=r,t[11]*=n,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(i,r)))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t),r=Math.sin(t),n=1-i,o=e.x,a=e.y,s=e.z,l=n*o,h=n*a;return this.set(l*o+i,l*a-r*s,l*s+r*a,0,l*a+r*s,h*a+i,h*s-r*o,0,l*s-r*a,h*s+r*o,n*s*s+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},compose:function(e,t,i){return this.makeRotationFromQuaternion(t),this.scale(i),this.setPosition(e),this},decompose:function(){var e=new THREE.Vector3,t=new THREE.Matrix4;return function(i,r,n){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length(),h=this.determinant();0>h&&(a=-a),i.x=o[12],i.y=o[13],i.z=o[14],t.elements.set(this.elements);var c=1/a,d=1/s,u=1/l;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=d,t.elements[5]*=d,t.elements[6]*=d,t.elements[8]*=u,t.elements[9]*=u,t.elements[10]*=u,r.setFromRotationMatrix(t),n.x=a,n.y=s,n.z=l,this}}(),makeFrustum:function(e,t,i,r,n,o){var a=this.elements,s=2*n/(t-e),l=2*n/(r-i),h=(t+e)/(t-e),c=(r+i)/(r-i),d=-(o+n)/(o-n),u=-2*o*n/(o-n);return a[0]=s,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=u,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,i,r){var n=i*Math.tan(THREE.Math.degToRad(.5*e)),o=-n,a=o*t,s=n*t;return this.makeFrustum(a,s,o,n,i,r)},makeOrthographic:function(e,t,i,r,n,o){var a=this.elements,s=t-e,l=i-r,h=o-n,c=(t+e)/s,d=(i+r)/l,u=(o+n)/h;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2/l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2/h,a[14]=-u,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)}},THREE.Ray=function(e,t){this.origin=void 0!==e?e:new THREE.Vector3,this.direction=void 0!==t?t:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var i=t||new THREE.Vector3;return i.copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new THREE.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var i=t||new THREE.Vector3;i.subVectors(e,this.origin);var r=i.dot(this.direction);return 0>r?i.copy(this.origin):i.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var i=e.subVectors(t,this.origin).dot(this.direction);return 0>i?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(i).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(e,t,i,r){var n,o,a,s,l=e.clone().add(t).multiplyScalar(.5),h=t.clone().sub(e).normalize(),c=.5*e.distanceTo(t),d=this.origin.clone().sub(l),u=-this.direction.dot(h),f=d.dot(this.direction),p=-d.dot(h),m=d.lengthSq(),g=Math.abs(1-u*u);if(g>=0)if(n=u*p-f,o=u*f-p,s=c*g,n>=0)if(o>=-s)if(s>=o){var v=1/g;n*=v,o*=v,a=n*(n+u*o+2*f)+o*(u*n+o+2*p)+m}else o=c,n=Math.max(0,-(u*o+f)),a=-n*n+o*(o+2*p)+m;else o=-c,n=Math.max(0,-(u*o+f)),a=-n*n+o*(o+2*p)+m;else-s>=o?(n=Math.max(0,-(-u*c+f)),o=n>0?-c:Math.min(Math.max(-c,-p),c),a=-n*n+o*(o+2*p)+m):s>=o?(n=0,o=Math.min(Math.max(-c,-p),c),a=o*(o+2*p)+m):(n=Math.max(0,-(u*c+f)),o=n>0?c:Math.min(Math.max(-c,-p),c),a=-n*n+o*(o+2*p)+m);else o=u>0?-c:c,n=Math.max(0,-(u*o+f)),a=-n*n+o*(o+2*p)+m;return i&&i.copy(this.direction.clone().multiplyScalar(n).add(this.origin)),r&&r.copy(h.clone().multiplyScalar(o).add(l)),a},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new THREE.Vector3;return function(t,i){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),n=e.dot(e)-r*r,o=t.radius*t.radius;if(n>o)return null;var a=Math.sqrt(o-n),s=r-a,l=r+a;return 0>s&&0>l?null:0>s?this.at(l,i):this.at(s,i)}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var i=e.normal.dot(this.direction);return 0>i*t},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0==t)return 0==e.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);return null===i?null:this.at(i,t)},isIntersectionBox:function(){var e=new THREE.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var i,r,n,o,a,s,l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(i=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(i=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),h>=0?(n=(e.min.y-d.y)*h,o=(e.max.y-d.y)*h):(n=(e.max.y-d.y)*h,o=(e.min.y-d.y)*h),i>o||n>r?null:((n>i||i!==i)&&(i=n),(r>o||r!==r)&&(r=o),c>=0?(a=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(a=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),i>s||a>r?null:((a>i||i!==i)&&(i=a),(r>s||r!==r)&&(r=s),0>r?null:this.at(i>=0?i:r,t)))},intersectTriangle:function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3,r=new THREE.Vector3;return function(n,o,a,s,l){t.subVectors(o,n),i.subVectors(a,n),r.crossVectors(t,i);var h,c=this.direction.dot(r);if(c>0){if(s)return null;h=1}else{if(!(0>c))return null;h=-1,c=-c}e.subVectors(this.origin,n);var d=h*this.direction.dot(i.crossVectors(e,i));if(0>d)return null;var u=h*this.direction.dot(t.cross(e));if(0>u)return null;if(d+u>c)return null;var f=-h*e.dot(r);return 0>f?null:this.at(f/c,l)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(e,t){this.center=void 0!==e?e:new THREE.Vector3,this.radius=void 0!==t?t:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new THREE.Box3;return function(t,i){var r=this.center;void 0!==i?r.copy(i):e.setFromPoints(t).center(r);for(var n=0,o=0,a=t.length;a>o;o++)n=Math.max(n,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(n),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var i=this.center.distanceToSquared(e),r=t||new THREE.Vector3;return r.copy(e),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new THREE.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(e,t,i,r,n,o){this.planes=[void 0!==e?e:new THREE.Plane,void 0!==t?t:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==o?o:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,i,r,n,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(n),a[5].copy(o),this},copy:function(e){for(var t=this.planes,i=0;6>i;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements,r=i[0],n=i[1],o=i[2],a=i[3],s=i[4],l=i[5],h=i[6],c=i[7],d=i[8],u=i[9],f=i[10],p=i[11],m=i[12],g=i[13],v=i[14],y=i[15];return t[0].setComponents(a-r,c-s,p-d,y-m).normalize(),t[1].setComponents(a+r,c+s,p+d,y+m).normalize(),t[2].setComponents(a+n,c+l,p+u,y+g).normalize(),t[3].setComponents(a-n,c-l,p-u,y-g).normalize(),t[4].setComponents(a-o,c-h,p-f,y-v).normalize(),t[5].setComponents(a+o,c+h,p+f,y+v).normalize(),this},intersectsObject:function(){var e=new THREE.Sphere;return function(t){var i=t.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),e.copy(i.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,i=e.center,r=-e.radius,n=0;6>n;n++){var o=t[n].distanceToPoint(i);if(r>o)return!1}return!0},intersectsBox:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i){for(var r=this.planes,n=0;6>n;n++){var o=r[n];e.x=o.normal.x>0?i.min.x:i.max.x,t.x=o.normal.x>0?i.max.x:i.min.x,e.y=o.normal.y>0?i.min.y:i.max.y,t.y=o.normal.y>0?i.max.y:i.min.y,e.z=o.normal.z>0?i.min.z:i.max.z,t.z=o.normal.z>0?i.max.z:i.min.z;var a=o.distanceToPoint(e),s=o.distanceToPoint(t);if(0>a&&0>s)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,i=0;6>i;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(e,t){this.normal=void 0!==e?e:new THREE.Vector3(1,0,0),this.constant=void 0!==t?t:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){return this.normal.copy(e),
this.constant=t,this},setComponents:function(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i,r,n){var o=e.subVectors(n,r).cross(t.subVectors(i,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,i),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var i=this.distanceToPoint(e),r=t||new THREE.Vector3;return r.copy(this.normal).multiplyScalar(i)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return 0>t&&i>0||0>i&&t>0},intersectLine:function(){var e=new THREE.Vector3;return function(t,i){var r=i||new THREE.Vector3,n=t.delta(e),o=this.normal.dot(n);if(0!=o){var a=-(t.start.dot(this.normal)+this.constant)/o;if(!(0>a||a>1))return r.copy(n).multiplyScalar(a).add(t.start)}else if(0==this.distanceToPoint(t.start))return r.copy(t.start)}}(),coplanarPoint:function(e){var t=e||new THREE.Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Matrix3;return function(r,n){var o=n||i.getNormalMatrix(r),a=e.copy(this.normal).applyMatrix3(o),s=this.coplanarPoint(t);return s.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(a,s),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),r=0;return function(){for(var n=0;36>n;n++)8==n||13==n||18==n||23==n?i[n]="-":14==n?i[n]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,i[n]=t[19==n?3&e|8:e]);return i.join("")}}(),clamp:function(e,t,i){return t>e?t:e>i?i:e},clampBottom:function(e,t){return t>e?t:e},mapLinear:function(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)},smoothstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))},smootherstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e}},THREE.Spline=function(e){function t(e,t,i,r,n,o,a){var s=.5*(i-e),l=.5*(r-t);return(2*(t-i)+s+l)*a+(-3*(t-i)-2*s-l)*o+s*n+t}this.points=e;var i,r,n,o,a,s,l,h,c,d=[],u={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return i=(this.points.length-1)*e,r=Math.floor(i),n=i-r,d[0]=0===r?r:r-1,d[1]=r,d[2]=r>this.points.length-2?this.points.length-1:r+1,d[3]=r>this.points.length-3?this.points.length-1:r+2,s=this.points[d[0]],l=this.points[d[1]],h=this.points[d[2]],c=this.points[d[3]],o=n*n,a=n*o,u.x=t(s.x,l.x,h.x,c.x,n,o,a),u.y=t(s.y,l.y,h.y,c.y,n,o,a),u.z=t(s.z,l.z,h.z,c.z,n,o,a),u},this.getControlPointsArray=function(){var e,t,i=this.points.length,r=[];for(e=0;i>e;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,i,r,n,o=0,a=0,s=0,l=new THREE.Vector3,h=new THREE.Vector3,c=[],d=0;for(c[0]=0,e||(e=100),r=this.points.length*e,l.copy(this.points[0]),t=1;r>t;t++)i=t/r,n=this.getPoint(i),h.copy(n),d+=h.distanceTo(l),l.copy(n),o=(this.points.length-1)*i,a=Math.floor(o),a!=s&&(c[a]=d,s=a);return c[c.length]=d,{chunks:c,total:d}},this.reparametrizeByArcLength=function(e){var t,i,r,n,o,a,s,l,h=[],c=new THREE.Vector3,d=this.getLength();for(h.push(c.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(a=d.chunks[t]-d.chunks[t-1],s=Math.ceil(e*a/d.total),n=(t-1)/(this.points.length-1),o=t/(this.points.length-1),i=1;s-1>i;i++)r=n+i*(1/s)*(o-n),l=this.getPoint(r),h.push(c.copy(l).clone());h.push(c.copy(this.points[t]).clone())}this.points=h}},THREE.Triangle=function(e,t,i){this.a=void 0!==e?e:new THREE.Vector3,this.b=void 0!==t?t:new THREE.Vector3,this.c=void 0!==i?i:new THREE.Vector3},THREE.Triangle.normal=function(){var e=new THREE.Vector3;return function(t,i,r,n){var o=n||new THREE.Vector3;o.subVectors(r,i),e.subVectors(t,i),o.cross(e);var a=o.lengthSq();return a>0?o.multiplyScalar(1/Math.sqrt(a)):o.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,o,a,s){e.subVectors(a,n),t.subVectors(o,n),i.subVectors(r,n);var l=e.dot(e),h=e.dot(t),c=e.dot(i),d=t.dot(t),u=t.dot(i),f=l*d-h*h,p=s||new THREE.Vector3;if(0==f)return p.set(-2,-1,-1);var m=1/f,g=(d*c-h*u)*m,v=(l*u-h*c)*m;return p.set(1-g-v,v,g)}}(),THREE.Triangle.containsPoint=function(){var e=new THREE.Vector3;return function(t,i,r,n){var o=THREE.Triangle.barycoordFromPoint(t,i,r,n,e);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new THREE.Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Clock=function(e){this.autoStart=void 0!==e?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener,e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners,r=i[e];if(void 0!==r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,i=t[e.type];if(void 0!==i){e.target=this;for(var r=[],n=i.length,o=0;n>o;o++)r[o]=i[o];for(var o=0;n>o;o++)r[o].call(this,e)}}}},function(e){e.Raycaster=function(t,i,r,n){this.ray=new e.Ray(t,i),this.near=r||0,this.far=n||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var t=function(e,t){return e.distance-t.distance},i=function(e,t,r,n){if(e.raycast(t,r),n===!0)for(var o=e.children,a=0,s=o.length;s>a;a++)i(o[a],t,r,!0)};e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},intersectObject:function(e,r){var n=[];return i(e,this,n,r),n.sort(t),n},intersectObjects:function(e,r){var n=[];if(e instanceof Array==!1)return console.log("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var o=0,a=e.length;a>o;o++)i(e[o],this,n,r);return n.sort(t),n}}}(THREE),THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=THREE.Object3D.DefaultUp.clone();var e=new THREE.Vector3,t=new THREE.Euler,i=new THREE.Quaternion,r=new THREE.Vector3(1,1,1),n=function(){i.setFromEuler(t,!1)},o=function(){t.setFromQuaternion(i,void 0,!1)};t.onChange(n),i.onChange(o),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:r}}),this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0),THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new THREE.Quaternion;return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new THREE.Vector3;return function(t,i){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(i)),this}}(),translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new THREE.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new THREE.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add:",e,"can't be added as a child of itself."),this):(e instanceof THREE.Object3D?(void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add:",e,"is not an instance of THREE.Object3D."),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var i=this.children.indexOf(e);-1!==i&&(e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getChildByName:function(e,t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e,t)},getObjectById:function(e,t){if(this.id===e)return this;for(var i=0,r=this.children.length;r>i;i++){var n=this.children[i],o=n.getObjectById(e,t);if(void 0!==o)return o}},getObjectByName:function(e,t){if(this.name===e)return this;for(var i=0,r=this.children.length;r>i;i++){var n=this.children[i],o=n.getObjectByName(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){var t=e||new THREE.Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i){var r=i||new THREE.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,r,t),r}}(),getWorldRotation:function(){var e=new THREE.Quaternion;return function(t){var i=t||new THREE.Euler;return this.getWorldQuaternion(e),i.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new THREE.Vector3,t=new THREE.Quaternion;return function(i){var r=i||new THREE.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(){var e=new THREE.Quaternion;return function(t){var i=t||new THREE.Vector3;return this.getWorldQuaternion(e),i.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=0,i=this.children.length;i>t;t++)this.children[t].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=0,i=this.children.length;i>t;t++)this.children[t].traverseVisible(e)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&e!==!0||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,i=this.children.length;i>t;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(){var e={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},t={},i=function(i){if(void 0===e.geometries&&(e.geometries=[]),void 0===t[i.uuid]){var r=i.toJSON();delete r.metadata,t[i.uuid]=r,e.geometries.push(r)}return i.uuid},r={},n=function(t){if(void 0===e.materials&&(e.materials=[]),void 0===r[t.uuid]){var i=t.toJSON();delete i.metadata,r[t.uuid]=i,e.materials.push(i)}return t.uuid},o=function(e){var t={};if(t.uuid=e.uuid,t.type=e.type,""!==e.name&&(t.name=e.name),"{}"!==JSON.stringify(e.userData)&&(t.userData=e.userData),e.visible!==!0&&(t.visible=e.visible),e instanceof THREE.PerspectiveCamera?(t.fov=e.fov,t.aspect=e.aspect,t.near=e.near,t.far=e.far):e instanceof THREE.OrthographicCamera?(t.left=e.left,t.right=e.right,t.top=e.top,t.bottom=e.bottom,t.near=e.near,t.far=e.far):e instanceof THREE.AmbientLight?t.color=e.color.getHex():e instanceof THREE.DirectionalLight?(t.color=e.color.getHex(),t.intensity=e.intensity):e instanceof THREE.PointLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance):e instanceof THREE.SpotLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance,t.angle=e.angle,t.exponent=e.exponent):e instanceof THREE.HemisphereLight?(t.color=e.color.getHex(),t.groundColor=e.groundColor.getHex()):e instanceof THREE.Mesh?(t.geometry=i(e.geometry),t.material=n(e.material)):e instanceof THREE.Line?(t.geometry=i(e.geometry),t.material=n(e.material)):e instanceof THREE.Sprite&&(t.material=n(e.material)),t.matrix=e.matrix.toArray(),e.children.length>0){t.children=[];for(var r=0;r<e.children.length;r++)t.children.push(o(e.children[r]))}return t};return e.object=o(this),e},clone:function(e,t){if(void 0===e&&(e=new THREE.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.renderDepth=this.renderDepth,e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),t===!0)for(var i=0;i<this.children.length;i++){var r=this.children[i];e.add(r.clone())}return e}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Projector=function(){console.warn("THREE.Projector has been moved to /examples/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() has been removed.")}},THREE.Face3=function(e,t,i,r,n,o){this.a=e,this.b=t,this.c=i,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=n instanceof THREE.Color?n:new THREE.Color,this.vertexColors=n instanceof Array?n:[],this.vertexTangents=[],this.materialIndex=void 0!==o?o:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e=new THREE.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.materialIndex=this.materialIndex;for(var t=0,i=this.vertexNormals.length;i>t;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(var t=0,i=this.vertexColors.length;i>t;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(var t=0,i=this.vertexTangents.length;i>t;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},THREE.Face4=function(e,t,i,r,n,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(e,t,i,n,o,a)},THREE.BufferAttribute=function(e,t){this.array=e,this.itemSize=t,this.needsUpdate=!1},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var r=0,n=this.itemSize;n>r;r++)this.array[e+r]=t.array[i+r]},set:function(e){return this.array.set(e),this},setX:function(e,t){return this.array[e*this.itemSize]=t,this},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,r){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this.array[e+2]=r,this},setXYZW:function(e,t,i,r,n){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=n,this},clone:function(){return new THREE.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},THREE.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.drawcalls=[],this.offsets=this.drawcalls,this.boundingBox=null,this.boundingSphere=null},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(e,t){return t instanceof THREE.BufferAttribute==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void(this.attributes[e]={array:arguments[1],itemSize:arguments[2]})):(this.attributes[e]=t,void(this.attributesKeys=Object.keys(this.attributes)))},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,i){this.drawcalls.push({start:e,count:t,index:void 0!==i?i:0})},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){var r=(new THREE.Matrix3).getNormalMatrix(e);r.applyToVector3Array(i.array),i.needsUpdate=!0}},center:function(){},fromGeometry:function(e,t){t=t||{vertexColors:THREE.NoColors};var i=e.vertices,r=e.faces,n=e.faceVertexUvs,o=t.vertexColors,a=n[0].length>0,s=3==r[0].vertexNormals.length,l=new Float32Array(3*r.length*3);this.addAttribute("position",new THREE.BufferAttribute(l,3));var h=new Float32Array(3*r.length*3);if(this.addAttribute("normal",new THREE.BufferAttribute(h,3)),o!==THREE.NoColors){var c=new Float32Array(3*r.length*3);this.addAttribute("color",new THREE.BufferAttribute(c,3))}if(a===!0){var d=new Float32Array(3*r.length*2);this.addAttribute("uv",new THREE.BufferAttribute(d,2))}for(var u=0,f=0,p=0;u<r.length;u++,f+=6,p+=9){var m=r[u],g=i[m.a],v=i[m.b],y=i[m.c];if(l[p]=g.x,l[p+1]=g.y,l[p+2]=g.z,l[p+3]=v.x,l[p+4]=v.y,l[p+5]=v.z,l[p+6]=y.x,l[p+7]=y.y,l[p+8]=y.z,s===!0){var A=m.vertexNormals[0],b=m.vertexNormals[1],E=m.vertexNormals[2];h[p]=A.x,h[p+1]=A.y,h[p+2]=A.z,h[p+3]=b.x,h[p+4]=b.y,h[p+5]=b.z,h[p+6]=E.x,h[p+7]=E.y,h[p+8]=E.z}else{var x=m.normal;h[p]=x.x,h[p+1]=x.y,h[p+2]=x.z,h[p+3]=x.x,h[p+4]=x.y,h[p+5]=x.z,h[p+6]=x.x,h[p+7]=x.y,h[p+8]=x.z}if(o===THREE.FaceColors){var w=m.color;c[p]=w.r,c[p+1]=w.g,c[p+2]=w.b,c[p+3]=w.r,c[p+4]=w.g,c[p+5]=w.b,c[p+6]=w.r,c[p+7]=w.g,c[p+8]=w.b}else if(o===THREE.VertexColors){var T=m.vertexColors[0],_=m.vertexColors[1],S=m.vertexColors[2];c[p]=T.r,c[p+1]=T.g,c[p+2]=T.b,c[p+3]=_.r,c[p+4]=_.g,c[p+5]=_.b,c[p+6]=S.r,c[p+7]=S.g,c[p+8]=S.b}if(a===!0){var C=n[0][u][0],R=n[0][u][1],k=n[0][u][2];d[f]=C.x,d[f+1]=C.y,d[f+2]=R.x,d[f+3]=R.y,d[f+4]=k.x,d[f+5]=k.y}}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var e=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.attributes.position.array;if(t){var i=this.boundingBox;i.makeEmpty();for(var r=0,n=t.length;n>r;r+=3)e.set(t[r],t[r+1],t[r+2]),i.expandByPoint(e)}void 0!==t&&0!==t.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}(),computeBoundingSphere:function(){var e=new THREE.Box3,t=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var i=this.attributes.position.array;if(i){e.makeEmpty();for(var r=this.boundingSphere.center,n=0,o=i.length;o>n;n+=3)t.set(i[n],i[n+1],i[n+2]),e.expandByPoint(t);e.center(r);for(var a=0,n=0,o=i.length;o>n;n+=3)t.set(i[n],i[n+1],i[n+2]),a=Math.max(a,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.attributes;if(e.position){var t=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(t.length),3));else for(var i=e.normal.array,r=0,n=i.length;n>r;r++)i[r]=0;var o,a,s,i=e.normal.array,l=new THREE.Vector3,h=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3,u=new THREE.Vector3;if(e.index)for(var f=e.index.array,p=this.offsets.length>0?this.offsets:[{start:0,count:f.length,index:0}],m=0,g=p.length;g>m;++m)for(var v=p[m].start,y=p[m].count,A=p[m].index,r=v,n=v+y;n>r;r+=3)o=3*(A+f[r]),a=3*(A+f[r+1]),s=3*(A+f[r+2]),l.fromArray(t,o),h.fromArray(t,a),c.fromArray(t,s),d.subVectors(c,h),u.subVectors(l,h),d.cross(u),i[o]+=d.x,i[o+1]+=d.y,i[o+2]+=d.z,i[a]+=d.x,i[a+1]+=d.y,i[a+2]+=d.z,i[s]+=d.x,i[s+1]+=d.y,i[s+2]+=d.z;else for(var r=0,n=t.length;n>r;r+=9)l.fromArray(t,r),h.fromArray(t,r+3),c.fromArray(t,r+6),d.subVectors(c,h),u.subVectors(l,h),d.cross(u),i[r]=d.x,i[r+1]=d.y,i[r+2]=d.z,i[r+3]=d.x,i[r+4]=d.y,i[r+5]=d.z,i[r+6]=d.x,i[r+7]=d.y,i[r+8]=d.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},computeTangents:function(){function e(e,t,i){k.fromArray(r,3*e),M.fromArray(r,3*t),P.fromArray(r,3*i),D.fromArray(o,2*e),H.fromArray(o,2*t),O.fromArray(o,2*i),d=M.x-k.x,u=P.x-k.x,f=M.y-k.y,p=P.y-k.y,m=M.z-k.z,g=P.z-k.z,v=H.x-D.x,y=O.x-D.x,A=H.y-D.y,b=O.y-D.y,E=1/(v*b-y*A),L.set((b*d-A*u)*E,(b*f-A*p)*E,(b*m-A*g)*E),I.set((v*u-y*d)*E,(v*p-y*f)*E,(v*g-y*m)*E),l[e].add(L),l[t].add(L),l[i].add(L),h[e].add(I),h[t].add(I),h[i].add(I)}function t(e){Y.fromArray(n,3*e),q.copy(Y),j=l[e],G.copy(j),G.sub(Y.multiplyScalar(Y.dot(j))).normalize(),W.crossVectors(q,j),V=W.dot(h[e]),U=0>V?-1:1,s[4*e]=G.x,s[4*e+1]=G.y,s[4*e+2]=G.z,s[4*e+3]=U}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)return void console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");var i=this.attributes.index.array,r=this.attributes.position.array,n=this.attributes.normal.array,o=this.attributes.uv.array,a=r.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*a),4));for(var s=this.attributes.tangent.array,l=[],h=[],c=0;a>c;c++)l[c]=new THREE.Vector3,h[c]=new THREE.Vector3;var d,u,f,p,m,g,v,y,A,b,E,x,w,T,_,S,C,R,k=new THREE.Vector3,M=new THREE.Vector3,P=new THREE.Vector3,D=new THREE.Vector2,H=new THREE.Vector2,O=new THREE.Vector2,L=new THREE.Vector3,I=new THREE.Vector3;0===this.drawcalls.length&&this.addDrawCall(0,i.length,0);var B=this.drawcalls;for(T=0,_=B.length;_>T;++T){var N=B[T].start,F=B[T].count,z=B[T].index;for(x=N,w=N+F;w>x;x+=3)S=z+i[x],C=z+i[x+1],R=z+i[x+2],e(S,C,R)}var U,j,V,G=new THREE.Vector3,W=new THREE.Vector3,Y=new THREE.Vector3,q=new THREE.Vector3;for(T=0,_=B.length;_>T;++T){var N=B[T].start,F=B[T].count,z=B[T].index;for(x=N,w=N+F;w>x;x+=3)S=z+i[x],C=z+i[x+1],R=z+i[x+2],t(S),t(C),t(R)}},computeOffsets:function(e){var t=e;void 0===e&&(t=65535);for(var i=(Date.now(),this.attributes.index.array),r=this.attributes.position.array,n=(r.length/3,i.length/3),o=new Uint16Array(i.length),a=0,s=0,l=[{start:0,count:0,index:0}],h=l[0],c=0,d=0,u=new Int32Array(6),f=new Int32Array(r.length),p=new Int32Array(r.length),m=0;m<r.length;m++)f[m]=-1,p[m]=-1;for(var g=0;n>g;g++){d=0;for(var v=0;3>v;v++){var y=i[3*g+v];-1==f[y]?(u[2*v]=y,u[2*v+1]=-1,d++):f[y]<h.index?(u[2*v]=y,u[2*v+1]=-1,c++):(u[2*v]=y,u[2*v+1]=f[y])}var A=s+d;if(A>h.index+t){var b={start:a,count:0,index:s};l.push(b),h=b;for(var E=0;6>E;E+=2){var x=u[E+1];x>-1&&x<h.index&&(u[E+1]=-1)}}for(var E=0;6>E;E+=2){var y=u[E],x=u[E+1];-1===x&&(x=s++),f[y]=x,p[x]=y,o[a++]=x-h.index,h.count++}}return this.reorderBuffers(o,p,s),this.offsets=l,l},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var e,t,i,r,n=this.attributes.normal.array,o=0,a=n.length;a>o;o+=3)e=n[o],t=n[o+1],i=n[o+2],r=1/Math.sqrt(e*e+t*t+i*i),n[o]*=r,n[o+1]*=r,n[o+2]*=r},reorderBuffers:function(e,t,i){var r={};for(var n in this.attributes)if("index"!=n){var o=this.attributes[n].array;r[n]=new o.constructor(this.attributes[n].itemSize*i)}for(var a=0;i>a;a++){var s=t[a];for(var n in this.attributes)if("index"!=n)for(var l=this.attributes[n].array,h=this.attributes[n].itemSize,c=r[n],d=0;h>d;d++)c[a*h+d]=l[s*h+d]}this.attributes.index.array=e;for(var n in this.attributes)"index"!=n&&(this.attributes[n].array=r[n],this.attributes[n].numItems=this.attributes[n].itemSize*i)},toJSON:function(){var e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},t=this.attributes,i=this.offsets,r=this.boundingSphere;for(var n in t){for(var o=t[n],a=[],s=o.array,l=0,h=s.length;h>l;l++)a[l]=s[l];e.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:a}}return i.length>0&&(e.data.offsets=JSON.parse(JSON.stringify(i))),null!==r&&(e.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),e},clone:function(){var e=new THREE.BufferGeometry;for(var t in this.attributes){var i=this.attributes[t];e.addAttribute(t,i.clone())}for(var r=0,n=this.offsets.length;n>r;r++){var o=this.offsets[r];e.offsets.push({start:o.start,index:o.index,count:o.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,
this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){for(var t=(new THREE.Matrix3).getNormalMatrix(e),i=0,r=this.vertices.length;r>i;i++){var n=this.vertices[i];n.applyMatrix4(e)}for(var i=0,r=this.faces.length;r>i;i++){var o=this.faces[i];o.normal.applyMatrix3(t).normalize();for(var a=0,s=o.vertexNormals.length;s>a;a++)o.vertexNormals[a].applyMatrix3(t).normalize()}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},fromBufferGeometry:function(e){for(var t=this,i=e.attributes,r=i.position.array,n=void 0!==i.index?i.index.array:void 0,o=void 0!==i.normal?i.normal.array:void 0,a=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,l=[],h=[],c=0,d=0;c<r.length;c+=3,d+=2)t.vertices.push(new THREE.Vector3(r[c],r[c+1],r[c+2])),void 0!==o&&l.push(new THREE.Vector3(o[c],o[c+1],o[c+2])),void 0!==a&&t.colors.push(new THREE.Color(a[c],a[c+1],a[c+2])),void 0!==s&&h.push(new THREE.Vector2(s[d],s[d+1]));var u=function(e,i,r){var n=void 0!==o?[l[e].clone(),l[i].clone(),l[r].clone()]:[],s=void 0!==a?[t.colors[e].clone(),t.colors[i].clone(),t.colors[r].clone()]:[];t.faces.push(new THREE.Face3(e,i,r,n,s)),t.faceVertexUvs[0].push([h[e],h[i],h[r]])};if(void 0!==n)for(var c=0;c<n.length;c+=3)u(n[c],n[c+1],n[c+2]);else for(var c=0;c<r.length/3;c+=3)u(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=new THREE.Vector3;return e.addVectors(this.boundingBox.min,this.boundingBox.max),e.multiplyScalar(-.5),this.applyMatrix((new THREE.Matrix4).makeTranslation(e.x,e.y,e.z)),this.computeBoundingBox(),e},computeFaceNormals:function(){for(var e=new THREE.Vector3,t=new THREE.Vector3,i=0,r=this.faces.length;r>i;i++){var n=this.faces[i],o=this.vertices[n.a],a=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){var t,i,r,n,o,a;for(a=new Array(this.vertices.length),t=0,i=this.vertices.length;i>t;t++)a[t]=new THREE.Vector3;if(e){var s,l,h,c=new THREE.Vector3,d=new THREE.Vector3;new THREE.Vector3,new THREE.Vector3,new THREE.Vector3;for(r=0,n=this.faces.length;n>r;r++)o=this.faces[r],s=this.vertices[o.a],l=this.vertices[o.b],h=this.vertices[o.c],c.subVectors(h,l),d.subVectors(s,l),c.cross(d),a[o.a].add(c),a[o.b].add(c),a[o.c].add(c)}else for(r=0,n=this.faces.length;n>r;r++)o=this.faces[r],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,i=this.vertices.length;i>t;t++)a[t].normalize();for(r=0,n=this.faces.length;n>r;r++)o=this.faces[r],o.vertexNormals[0]=a[o.a].clone(),o.vertexNormals[1]=a[o.b].clone(),o.vertexNormals[2]=a[o.c].clone()},computeMorphNormals:function(){var e,t,i,r,n;for(i=0,r=this.faces.length;r>i;i++)for(n=this.faces[i],n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;t>e;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var o=new THREE.Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;t>e;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a,s,l=this.morphNormals[e].faceNormals,h=this.morphNormals[e].vertexNormals;for(i=0,r=this.faces.length;r>i;i++)a=new THREE.Vector3,s={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},l.push(a),h.push(s)}var c=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var a,s;for(i=0,r=this.faces.length;r>i;i++)n=this.faces[i],a=c.faceNormals[i],s=c.vertexNormals[i],a.copy(n.normal),s.a.copy(n.vertexNormals[0]),s.b.copy(n.vertexNormals[1]),s.c.copy(n.vertexNormals[2])}for(i=0,r=this.faces.length;r>i;i++)n=this.faces[i],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeTangents:function(){function e(e,t,i,r,n,o,a){h=e.vertices[t],c=e.vertices[i],d=e.vertices[r],u=l[n],f=l[o],p=l[a],m=c.x-h.x,g=d.x-h.x,v=c.y-h.y,y=d.y-h.y,A=c.z-h.z,b=d.z-h.z,E=f.x-u.x,x=p.x-u.x,w=f.y-u.y,T=p.y-u.y,_=1/(E*T-x*w),P.set((T*m-w*g)*_,(T*v-w*y)*_,(T*A-w*b)*_),D.set((E*g-x*m)*_,(E*y-x*v)*_,(E*b-x*A)*_),k[t].add(P),k[i].add(P),k[r].add(P),M[t].add(D),M[i].add(D),M[r].add(D)}var t,i,r,n,o,a,s,l,h,c,d,u,f,p,m,g,v,y,A,b,E,x,w,T,_,S,C,R,k=[],M=[],P=new THREE.Vector3,D=new THREE.Vector3,H=new THREE.Vector3,O=new THREE.Vector3,L=new THREE.Vector3;for(r=0,n=this.vertices.length;n>r;r++)k[r]=new THREE.Vector3,M[r]=new THREE.Vector3;for(t=0,i=this.faces.length;i>t;t++)s=this.faces[t],l=this.faceVertexUvs[0][t],e(this,s.a,s.b,s.c,0,1,2);var I=["a","b","c","d"];for(t=0,i=this.faces.length;i>t;t++)for(s=this.faces[t],o=0;o<Math.min(s.vertexNormals.length,3);o++)L.copy(s.vertexNormals[o]),a=s[I[o]],S=k[a],H.copy(S),H.sub(L.multiplyScalar(L.dot(S))).normalize(),O.crossVectors(s.vertexNormals[o],S),C=O.dot(M[a]),R=0>C?-1:1,s.vertexTangents[o]=new THREE.Vector4(H.x,H.y,H.z,R);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,i=0,r=t.length;r>i;i++)i>0&&(e+=t[i].distanceTo(t[i-1])),this.lineDistances[i]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(e instanceof THREE.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var r,n=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,h=this.faceVertexUvs[0],c=e.faceVertexUvs[0];void 0===i&&(i=0),void 0!==t&&(r=(new THREE.Matrix3).getNormalMatrix(t));for(var d=0,u=a.length;u>d;d++){var f=a[d],p=f.clone();void 0!==t&&p.applyMatrix4(t),o.push(p)}for(d=0,u=l.length;u>d;d++){var m,g,v,y=l[d],A=y.vertexNormals,b=y.vertexColors;m=new THREE.Face3(y.a+n,y.b+n,y.c+n),m.normal.copy(y.normal),void 0!==r&&m.normal.applyMatrix3(r).normalize();for(var E=0,x=A.length;x>E;E++)g=A[E].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),m.vertexNormals.push(g);m.color.copy(y.color);for(var E=0,x=b.length;x>E;E++)v=b[E],m.vertexColors.push(v.clone());m.materialIndex=y.materialIndex+i,s.push(m)}for(d=0,u=c.length;u>d;d++){var w=c[d],T=[];if(void 0!==w){for(var E=0,x=w.length;x>E;E++)T.push(new THREE.Vector2(w[E].x,w[E].y));h.push(T)}}},mergeVertices:function(){var e,t,i,r,n,o,a,s,l={},h=[],c=[],d=4,u=Math.pow(10,d);for(i=0,r=this.vertices.length;r>i;i++)e=this.vertices[i],t=Math.round(e.x*u)+"_"+Math.round(e.y*u)+"_"+Math.round(e.z*u),void 0===l[t]?(l[t]=i,h.push(this.vertices[i]),c[i]=h.length-1):c[i]=c[l[t]];var f=[];for(i=0,r=this.faces.length;r>i;i++){n=this.faces[i],n.a=c[n.a],n.b=c[n.b],n.c=c[n.c],o=[n.a,n.b,n.c];for(var p=-1,m=0;3>m;m++)if(o[m]==o[(m+1)%3]){p=m,f.push(i);break}}for(i=f.length-1;i>=0;i--){var g=f[i];for(this.faces.splice(g,1),a=0,s=this.faceVertexUvs.length;s>a;a++)this.faceVertexUvs[a].splice(g,1)}var v=this.vertices.length-h.length;return this.vertices=h,v},toJSON:function(){function e(e,t,i){return i?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]?u[t]:(u[t]=d.length/3,d.push(e.x,e.y,e.z),u[t])}function i(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==p[t]?p[t]:(p[t]=f.length,f.push(e.getHex()),p[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==g[t]?g[t]:(g[t]=m.length/2,m.push(e.x,e.y),g[t])}var n={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(""!==this.name&&(n.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(n[a]=o[a]);return n}for(var s=[],l=0;l<this.vertices.length;l++){var h=this.vertices[l];s.push(h.x,h.y,h.z)}for(var c=[],d=[],u={},f=[],p={},m=[],g={},l=0;l<this.faces.length;l++){var v=this.faces[l],y=!1,A=!1,b=void 0!==this.faceVertexUvs[0][l],E=v.normal.length()>0,x=v.vertexNormals.length>0,w=1!==v.color.r||1!==v.color.g||1!==v.color.b,T=v.vertexColors.length>0,_=0;if(_=e(_,0,0),_=e(_,1,y),_=e(_,2,A),_=e(_,3,b),_=e(_,4,E),_=e(_,5,x),_=e(_,6,w),_=e(_,7,T),c.push(_),c.push(v.a,v.b,v.c),b){var S=this.faceVertexUvs[0][l];c.push(r(S[0]),r(S[1]),r(S[2]))}if(E&&c.push(t(v.normal)),x){var C=v.vertexNormals;c.push(t(C[0]),t(C[1]),t(C[2]))}if(w&&c.push(i(v.color)),T){var R=v.vertexColors;c.push(i(R[0]),i(R[1]),i(R[2]))}}return n.data={},n.data.vertices=s,n.data.normals=d,f.length>0&&(n.data.colors=f),m.length>0&&(n.data.uvs=[m]),n.data.faces=c,n},clone:function(){for(var e=new THREE.Geometry,t=this.vertices,i=0,r=t.length;r>i;i++)e.vertices.push(t[i].clone());for(var n=this.faces,i=0,r=n.length;r>i;i++)e.faces.push(n[i].clone());for(var o=this.faceVertexUvs[0],i=0,r=o.length;r>i;i++){for(var a=o[i],s=[],l=0,h=a.length;h>l;l++)s.push(new THREE.Vector2(a[l].x,a[l].y));e.faceVertexUvs[0].push(s)}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.Camera=function(){THREE.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.getWorldDirection=function(){var e=new THREE.Quaternion;return function(t){var i=t||new THREE.Vector3;return this.getWorldQuaternion(e),i.set(0,0,-1).applyQuaternion(e)}}(),THREE.Camera.prototype.lookAt=function(){var e=new THREE.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),THREE.Camera.prototype.clone=function(e){return void 0===e&&(e=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},THREE.CubeCamera=function(e,t,i){THREE.Object3D.call(this),this.type="CubeCamera";var r=90,n=1,o=new THREE.PerspectiveCamera(r,n,e,t);o.up.set(0,-1,0),o.lookAt(new THREE.Vector3(1,0,0)),this.add(o);var a=new THREE.PerspectiveCamera(r,n,e,t);a.up.set(0,-1,0),a.lookAt(new THREE.Vector3(-1,0,0)),this.add(a);var s=new THREE.PerspectiveCamera(r,n,e,t);s.up.set(0,0,1),s.lookAt(new THREE.Vector3(0,1,0)),this.add(s);var l=new THREE.PerspectiveCamera(r,n,e,t);l.up.set(0,0,-1),l.lookAt(new THREE.Vector3(0,-1,0)),this.add(l);var h=new THREE.PerspectiveCamera(r,n,e,t);h.up.set(0,-1,0),h.lookAt(new THREE.Vector3(0,0,1)),this.add(h);var c=new THREE.PerspectiveCamera(r,n,e,t);c.up.set(0,-1,0),c.lookAt(new THREE.Vector3(0,0,-1)),this.add(c),this.renderTarget=new THREE.WebGLRenderTargetCube(i,i,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(e,t){var i=this.renderTarget,r=i.generateMipmaps;i.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,o,i),i.activeCubeFace=1,e.render(t,a,i),i.activeCubeFace=2,e.render(t,s,i),i.activeCubeFace=3,e.render(t,l,i),i.activeCubeFace=4,e.render(t,h,i),i.generateMipmaps=r,i.activeCubeFace=5,e.render(t,c,i)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.OrthographicCamera=function(e,t,i,r,n,o){THREE.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=void 0!==n?n:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(i-e,i+e,r+t,r-t,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var e=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},THREE.PerspectiveCamera=function(e,t,i,r){THREE.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==i?i:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*THREE.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,i,r,n,o){this.fullWidth=e,this.fullHeight=t,this.x=i,this.y=r,this.width=n,this.height=o,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight,i=Math.tan(THREE.Math.degToRad(.5*e))*this.near,r=-i,n=t*r,o=t*i,a=Math.abs(o-n),s=Math.abs(i-r);this.projectionMatrix.makeFrustum(n+this.x*a/this.fullWidth,n+(this.x+this.width)*a/this.fullWidth,i-(this.y+this.height)*s/this.fullHeight,i-this.y*s/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var e=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},THREE.Light=function(e){THREE.Object3D.call(this),this.type="Light",this.color=new THREE.Color(e)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.clone=function(e){return void 0===e&&(e=new THREE.Light),THREE.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},THREE.AmbientLight=function(e){THREE.Light.call(this,e),this.type="AmbientLight"},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.clone=function(){var e=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,e),e},THREE.AreaLight=function(e,t){THREE.Light.call(this,e),this.type="AreaLight",this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.clone=function(){var e=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraLeft=this.shadowCameraLeft,e.shadowCameraRight=this.shadowCameraRight,e.shadowCameraTop=this.shadowCameraTop,e.shadowCameraBottom=this.shadowCameraBottom,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e.shadowCascade=this.shadowCascade,e.shadowCascadeOffset.copy(this.shadowCascadeOffset),e.shadowCascadeCount=this.shadowCascadeCount,e.shadowCascadeBias=this.shadowCascadeBias.slice(0),e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),e},THREE.HemisphereLight=function(e,t,i){THREE.Light.call(this,e),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new THREE.Color(t),this.intensity=void 0!==i?i:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.clone=function(){var e=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},THREE.PointLight=function(e,t,i){THREE.Light.call(this,e),this.type="PointLight",this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.clone=function(){var e=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},THREE.SpotLight=function(e,t,i,r,n){THREE.Light.call(this,e),this.type="SpotLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0,this.angle=void 0!==r?r:Math.PI/3,this.exponent=void 0!==n?n:10,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.clone=function(){var e=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraFov=this.shadowCameraFov,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e},THREE.Cache=function(){this.files={}},THREE.Cache.prototype={constructor:THREE.Cache,add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},THREE.Loader=function(e){this.showStatus=e,this.statusDomElement=e?THREE.Loader.prototype.addStatusElement():null,this.imageLoader=new THREE.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ";t+=e.total?(100*e.loaded/e.total).toFixed(0)+"%":(e.loaded/1024).toFixed(2)+" KB",this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t);return i},needsTangents:function(e){for(var t=0,i=e.length;i>t;t++){var r=e[t];if(r instanceof THREE.ShaderMaterial)return!0}return!1},createMaterial:function(e,t){function i(e){var t=Math.log(e)/Math.LN2;return Math.pow(2,Math.round(t))}function r(e,r,n,a,s,l,h){var c,d=t+n,u=THREE.Loader.Handlers.get(d);if(null!==u?c=u.load(d):(c=new THREE.Texture,u=o.imageLoader,u.crossOrigin=o.crossOrigin,u.load(d,function(e){if(THREE.Math.isPowerOfTwo(e.width)===!1||THREE.Math.isPowerOfTwo(e.height)===!1){var t=i(e.width),r=i(e.height),n=document.createElement("canvas");n.width=t,n.height=r;var o=n.getContext("2d");o.drawImage(e,0,0,t,r),c.image=n}else c.image=e;c.needsUpdate=!0})),c.sourceFile=n,a&&(c.repeat.set(a[0],a[1]),1!==a[0]&&(c.wrapS=THREE.RepeatWrapping),1!==a[1]&&(c.wrapT=THREE.RepeatWrapping)),s&&c.offset.set(s[0],s[1]),l){var f={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==f[l[0]]&&(c.wrapS=f[l[0]]),void 0!==f[l[1]]&&(c.wrapT=f[l[1]])}h&&(c.anisotropy=h),e[r]=c}function n(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var o=this,a="MeshLambertMaterial",s={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var l=e.shading.toLowerCase();"phong"===l?a="MeshPhongMaterial":"basic"===l&&(a="MeshBasicMaterial")}if(void 0!==e.blending&&void 0!==THREE[e.blending]&&(s.blending=THREE[e.blending]),(void 0!==e.transparent||e.opacity<1)&&(s.transparent=e.transparent),void 0!==e.depthTest&&(s.depthTest=e.depthTest),void 0!==e.depthWrite&&(s.depthWrite=e.depthWrite),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.flipSided&&(s.side=THREE.BackSide),void 0!==e.doubleSided&&(s.side=THREE.DoubleSide),void 0!==e.wireframe&&(s.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?s.vertexColors=THREE.FaceColors:e.vertexColors&&(s.vertexColors=THREE.VertexColors)),e.colorDiffuse?s.color=n(e.colorDiffuse):e.DbgColor&&(s.color=e.DbgColor),e.colorSpecular&&(s.specular=n(e.colorSpecular)),e.colorAmbient&&(s.ambient=n(e.colorAmbient)),e.colorEmissive&&(s.emissive=n(e.colorEmissive)),e.transparency&&(s.opacity=e.transparency),e.specularCoef&&(s.shininess=e.specularCoef),e.mapDiffuse&&t&&r(s,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&r(s,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&r(s,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&r(s,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&r(s,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapAlpha&&t&&r(s,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy),e.mapBumpScale&&(s.bumpScale=e.mapBumpScale),e.mapNormal){var h=THREE.ShaderLib.normalmap,c=THREE.UniformsUtils.clone(h.uniforms);c.tNormal.value=s.normalMap,e.mapNormalFactor&&c.uNormalScale.value.set(e.mapNormalFactor,e.mapNormalFactor),s.map&&(c.tDiffuse.value=s.map,c.enableDiffuse.value=!0),s.specularMap&&(c.tSpecular.value=s.specularMap,c.enableSpecular.value=!0),s.lightMap&&(c.tAO.value=s.lightMap,c.enableAO.value=!0),c.diffuse.value.setHex(s.color),c.specular.value.setHex(s.specular),c.ambient.value.setHex(s.ambient),c.shininess.value=s.shininess,void 0!==s.opacity&&(c.opacity.value=s.opacity);var d={fragmentShader:h.fragmentShader,vertexShader:h.vertexShader,uniforms:c,lights:!0,fog:!0},u=new THREE.ShaderMaterial(d);s.transparent&&(u.transparent=!0)}else var u=new THREE[a](s);return void 0!==e.DbgName&&(u.name=e.DbgName),u}},THREE.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,i=this.handlers.length;i>t;t+=2){var r=this.handlers[t],n=this.handlers[t+1];if(r.test(e))return n}return null}},THREE.XHRLoader=function(e){this.cache=new THREE.Cache,this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(e,t,i,r){var n=this,o=n.cache.get(e);if(void 0!==o)return void(t&&t(o));var a=new XMLHttpRequest;a.open("GET",e,!0),a.addEventListener("load",function(i){n.cache.add(e,this.response),t&&t(this.response),n.manager.itemEnd(e)},!1),void 0!==i&&a.addEventListener("progress",function(e){i(e)},!1),void 0!==r&&a.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(a.responseType=this.responseType),a.send(null),n.manager.itemStart(e)},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.ImageLoader=function(e){this.cache=new THREE.Cache,this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t,i,r){var n=this,o=n.cache.get(e);if(void 0!==o)return void t(o);var a=document.createElement("img");return void 0!==t&&a.addEventListener("load",function(i){n.cache.add(e,this),t(this),n.manager.itemEnd(e)},!1),void 0!==i&&a.addEventListener("progress",function(e){i(e)},!1),void 0!==r&&a.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),a.src=e,n.manager.itemStart(e),a},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.JSONLoader=function(e){THREE.Loader.call(this,e),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.load=function(e,t,i){i=i&&"string"==typeof i?i:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,i)},THREE.JSONLoader.prototype.loadAjaxJSON=function(e,t,i,r,n){var o=new XMLHttpRequest,a=0;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(200===o.status||0===o.status){if(o.responseText){var s=JSON.parse(o.responseText);if(void 0!==s.metadata&&"scene"===s.metadata.type)return void console.error('THREE.JSONLoader: "'+t+'" seems to be a Scene. Use THREE.SceneLoader instead.');var l=e.parse(s,r);i(l.geometry,l.materials)}else console.error('THREE.JSONLoader: "'+t+'" seems to be unreachable or the file is empty.');e.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+t+'" ('+o.status+")");else o.readyState===o.LOADING?n&&(0===a&&(a=o.getResponseHeader("Content-Length")),n({total:a,loaded:o.responseText.length})):o.readyState===o.HEADERS_RECEIVED&&void 0!==n&&(a=o.getResponseHeader("Content-Length"))},o.open("GET",t,!0),o.withCredentials=this.withCredentials,o.send(null)},THREE.JSONLoader.prototype.parse=function(e,t){function i(t){function i(e,t){return e&1<<t}var r,n,a,s,l,h,c,d,u,f,p,m,g,v,y,A,b,E,x,w,T,_,S,C,R,k,M,P=e.faces,D=e.vertices,H=e.normals,O=e.colors,L=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&L++;for(r=0;L>r;r++)o.faceVertexUvs[r]=[]}for(s=0,l=D.length;l>s;)E=new THREE.Vector3,E.x=D[s++]*t,E.y=D[s++]*t,E.z=D[s++]*t,o.vertices.push(E);for(s=0,l=P.length;l>s;)if(f=P[s++],p=i(f,0),m=i(f,1),g=i(f,3),v=i(f,4),y=i(f,5),A=i(f,6),b=i(f,7),p){if(w=new THREE.Face3,w.a=P[s],w.b=P[s+1],w.c=P[s+3],T=new THREE.Face3,T.a=P[s+1],T.b=P[s+2],T.c=P[s+3],s+=4,m&&(u=P[s++],w.materialIndex=u,T.materialIndex=u),a=o.faces.length,g)for(r=0;L>r;r++)for(C=e.uvs[r],o.faceVertexUvs[r][a]=[],o.faceVertexUvs[r][a+1]=[],n=0;4>n;n++)d=P[s++],k=C[2*d],M=C[2*d+1],R=new THREE.Vector2(k,M),2!==n&&o.faceVertexUvs[r][a].push(R),0!==n&&o.faceVertexUvs[r][a+1].push(R);if(v&&(c=3*P[s++],w.normal.set(H[c++],H[c++],H[c]),T.normal.copy(w.normal)),y)for(r=0;4>r;r++)c=3*P[s++],S=new THREE.Vector3(H[c++],H[c++],H[c]),2!==r&&w.vertexNormals.push(S),0!==r&&T.vertexNormals.push(S);if(A&&(h=P[s++],_=O[h],w.color.setHex(_),T.color.setHex(_)),b)for(r=0;4>r;r++)h=P[s++],_=O[h],2!==r&&w.vertexColors.push(new THREE.Color(_)),0!==r&&T.vertexColors.push(new THREE.Color(_));o.faces.push(w),o.faces.push(T)}else{if(x=new THREE.Face3,x.a=P[s++],x.b=P[s++],x.c=P[s++],m&&(u=P[s++],x.materialIndex=u),a=o.faces.length,g)for(r=0;L>r;r++)for(C=e.uvs[r],o.faceVertexUvs[r][a]=[],n=0;3>n;n++)d=P[s++],k=C[2*d],M=C[2*d+1],R=new THREE.Vector2(k,M),o.faceVertexUvs[r][a].push(R);if(v&&(c=3*P[s++],x.normal.set(H[c++],H[c++],H[c])),y)for(r=0;3>r;r++)c=3*P[s++],S=new THREE.Vector3(H[c++],H[c++],H[c]),x.vertexNormals.push(S);if(A&&(h=P[s++],x.color.setHex(O[h])),b)for(r=0;3>r;r++)h=P[s++],x.vertexColors.push(new THREE.Color(O[h]));o.faces.push(x)}}function r(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;r>i;i+=t){var n=e.skinWeights[i],a=t>1?e.skinWeights[i+1]:0,s=t>2?e.skinWeights[i+2]:0,l=t>3?e.skinWeights[i+3]:0;o.skinWeights.push(new THREE.Vector4(n,a,s,l))}if(e.skinIndices)for(var i=0,r=e.skinIndices.length;r>i;i+=t){var h=e.skinIndices[i],c=t>1?e.skinIndices[i+1]:0,d=t>2?e.skinIndices[i+2]:0,u=t>3?e.skinIndices[i+3]:0;o.skinIndices.push(new THREE.Vector4(h,c,d,u))}o.bones=e.bones,o.bones&&o.bones.length>0&&(o.skinWeights.length!==o.skinIndices.length||o.skinIndices.length!==o.vertices.length)&&console.warn("When skinning, number of vertices ("+o.vertices.length+"), skinIndices ("+o.skinIndices.length+"), and skinWeights ("+o.skinWeights.length+") should match."),o.animation=e.animation,o.animations=e.animations}function n(t){if(void 0!==e.morphTargets){var i,r,n,a,s,l;for(i=0,r=e.morphTargets.length;r>i;i++)for(o.morphTargets[i]={},o.morphTargets[i].name=e.morphTargets[i].name,o.morphTargets[i].vertices=[],s=o.morphTargets[i].vertices,l=e.morphTargets[i].vertices,n=0,a=l.length;a>n;n+=3){var h=new THREE.Vector3;h.x=l[n]*t,h.y=l[n+1]*t,h.z=l[n+2]*t,s.push(h)}}if(void 0!==e.morphColors){var i,r,c,d,u,f,p;for(i=0,r=e.morphColors.length;r>i;i++)for(o.morphColors[i]={},o.morphColors[i].name=e.morphColors[i].name,o.morphColors[i].colors=[],u=o.morphColors[i].colors,f=e.morphColors[i].colors,c=0,d=f.length;d>c;c+=3)p=new THREE.Color(16755200),p.setRGB(f[c],f[c+1],f[c+2]),u.push(p)}}var o=new THREE.Geometry,a=void 0!==e.scale?1/e.scale:1;if(i(a),r(),n(a),o.computeFaceNormals(),o.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:o};var s=this.initMaterials(e.materials,t);return this.needsTangents(s)&&o.computeTangents(),{geometry:o,materials:s}},THREE.LoadingManager=function(e,t,i){var r=this,n=0,o=0;this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){o++},this.itemEnd=function(e){n++,void 0!==r.onProgress&&r.onProgress(e,n,o),n===o&&void 0!==r.onLoad&&r.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(e,t,i,r){var n=this,o=new THREE.XHRLoader;o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE.BufferGeometry,i=e.attributes;for(var r in i){var n=i[r],o=new self[n.type](n.array);t.addAttribute(r,new THREE.BufferAttribute(o,n.itemSize))}var a=e.offsets;void 0!==a&&(t.offsets=JSON.parse(JSON.stringify(a)));var s=e.boundingSphere;if(void 0!==s){var l=new THREE.Vector3;void 0!==s.center&&l.fromArray(s.center),t.boundingSphere=new THREE.Sphere(l,s.radius)}return t}},THREE.MaterialLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t,i,r){var n=this,o=new THREE.XHRLoader;o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(n.parse(JSON.parse(e)));
},i,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.ambient&&t.ambient.setHex(e.ambient),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.materials)for(var i=0,r=e.materials.length;r>i;i++)t.materials.push(this.parse(e.materials[i]));return t}},THREE.ObjectLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t,i,r){var n=this,o=new THREE.XHRLoader(n.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),i=this.parseMaterials(e.materials),r=this.parseObject(e.object,t,i);return r},parseGeometries:function(e){var t={};if(void 0!==e)for(var i=new THREE.JSONLoader,r=new THREE.BufferGeometryLoader,n=0,o=e.length;o>n;n++){var a,s=e[n];switch(s.type){case"PlaneGeometry":a=new THREE.PlaneGeometry(s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"CubeGeometry":a=new THREE.BoxGeometry(s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":a=new THREE.CircleGeometry(s.radius,s.segments);break;case"CylinderGeometry":a=new THREE.CylinderGeometry(s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded);break;case"SphereGeometry":a=new THREE.SphereGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"IcosahedronGeometry":a=new THREE.IcosahedronGeometry(s.radius,s.detail);break;case"TorusGeometry":a=new THREE.TorusGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":a=new THREE.TorusKnotGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.p,s.q,s.heightScale);break;case"BufferGeometry":a=r.parse(s.data);break;case"Geometry":a=i.parse(s.data).geometry}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e){var t={};if(void 0!==e)for(var i=new THREE.MaterialLoader,r=0,n=e.length;n>r;r++){var o=e[r],a=i.parse(o);a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),t[o.uuid]=a}return t},parseObject:function(){var e=new THREE.Matrix4;return function(t,i,r){var n;switch(t.type){case"Scene":n=new THREE.Scene;break;case"PerspectiveCamera":n=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":n=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":n=new THREE.AmbientLight(t.color);break;case"DirectionalLight":n=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":n=new THREE.PointLight(t.color,t.intensity,t.distance);break;case"SpotLight":n=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent);break;case"HemisphereLight":n=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":var o=i[t.geometry],a=r[t.material];void 0===o&&console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry),void 0===a&&console.warn("THREE.ObjectLoader: Undefined material",t.material),n=new THREE.Mesh(o,a);break;case"Line":var o=i[t.geometry],a=r[t.material];void 0===o&&console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry),void 0===a&&console.warn("THREE.ObjectLoader: Undefined material",t.material),n=new THREE.Line(o,a);break;case"Sprite":var a=r[t.material];void 0===a&&console.warn("THREE.ObjectLoader: Undefined material",t.material),n=new THREE.Sprite(a);break;case"Group":n=new THREE.Group;break;default:n=new THREE.Object3D}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.children)for(var s in t.children)n.add(this.parseObject(t.children[s],i,r));return n}}()},THREE.TextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,t,i,r){var n=this,o=new THREE.ImageLoader(n.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){var i=new THREE.Texture(e);i.needsUpdate=!0,void 0!==t&&t(i)},i,r)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.CompressedTextureLoader=function(){this._parser=null},THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(e,t,i){var r=this,n=[],o=new THREE.CompressedTexture;o.image=n;var a=new THREE.XHRLoader;if(a.setResponseType("arraybuffer"),e instanceof Array)for(var s=0,l=function(i){a.load(e[i],function(e){var a=r._parser(e,!0);n[i]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps},s+=1,6===s&&(1==a.mipmapCount&&(o.minFilter=THREE.LinearFilter),o.format=a.format,o.needsUpdate=!0,t&&t(o))})},h=0,c=e.length;c>h;++h)l(h);else a.load(e,function(e){var i=r._parser(e,!0);if(i.isCubemap)for(var a=i.mipmaps.length/i.mipmapCount,s=0;a>s;s++){n[s]={mipmaps:[]};for(var l=0;l<i.mipmapCount;l++)n[s].mipmaps.push(i.mipmaps[s*i.mipmapCount+l]),n[s].format=i.format,n[s].width=i.width,n[s].height=i.height}else o.image.width=i.width,o.image.height=i.height,o.mipmaps=i.mipmaps;1===i.mipmapCount&&(o.minFilter=THREE.LinearFilter),o.format=i.format,o.needsUpdate=!0,t&&t(o)});return o}},THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Material",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},THREE.Material.prototype={constructor:THREE.Material,setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){if(t in this){var r=this[t];r instanceof THREE.Color?r.set(i):r instanceof THREE.Vector3&&i instanceof THREE.Vector3?r.copy(i):"overdraw"==t?this[t]=Number(i):this[t]=i}}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(){var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(e.name=this.name),this instanceof THREE.MeshBasicMaterial?(e.color=this.color.getHex(),this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshLambertMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshPhongMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),e.specular=this.specular.getHex(),e.shininess=this.shininess,this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshNormalMaterial?(this.shading!==THREE.FlatShading&&(e.shading=this.shading),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshDepthMaterial?(this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.ShaderMaterial?(e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader):this instanceof THREE.SpriteMaterial&&(e.color=this.color.getHex()),this.opacity<1&&(e.opacity=this.opacity),this.transparent!==!1&&(e.transparent=this.transparent),this.wireframe!==!1&&(e.wireframe=this.wireframe),e},clone:function(e){return void 0===e&&(e=new THREE.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.type="LineBasicMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.clone=function(){var e=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.LineDashedMaterial=function(e){THREE.Material.call(this),this.type="LineDashedMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.clone=function(){var e=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.MeshBasicMaterial=function(e){THREE.Material.call(this),this.type="MeshBasicMaterial",this.color=new THREE.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.clone=function(){var e=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},THREE.MeshLambertMaterial=function(e){THREE.Material.call(this),this.type="MeshLambertMaterial",this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.clone=function(){var e=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshPhongMaterial=function(e){THREE.Material.call(this),this.type="MeshPhongMaterial",this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.clone=function(){var e=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.clone=function(){var e=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.type="MeshNormalMaterial",this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.clone=function(){var e=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshFaceMaterial=function(e){this.uuid=THREE.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=e instanceof Array?e:[]},THREE.MeshFaceMaterial.prototype={constructor:THREE.MeshFaceMaterial,toJSON:function(){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},t=0,i=this.materials.length;i>t;t++)e.materials.push(this.materials[t].toJSON());return e},clone:function(){for(var e=new THREE.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e}},THREE.PointCloudMaterial=function(e){THREE.Material.call(this),this.type="PointCloudMaterial",this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype),THREE.PointCloudMaterial.prototype.clone=function(){var e=new THREE.PointCloudMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(e)},THREE.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(e)},THREE.ShaderMaterial=function(e){THREE.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(e)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.clone=function(){var e=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=THREE.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.RawShaderMaterial=function(e){THREE.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.clone=function(){var e=new THREE.RawShaderMaterial;return THREE.ShaderMaterial.prototype.clone.call(this,e),e},THREE.SpriteMaterial=function(e){THREE.Material.call(this),this.type="SpriteMaterial",this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.clone=function(){var e=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},THREE.Texture=function(e,t,i,r,n,o,a,s,l){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.image=void 0!==e?e:THREE.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:THREE.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==n?n:THREE.LinearFilter,this.minFilter=void 0!==o?o:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:THREE.RGBAFormat,this.type=void 0!==s?s:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},THREE.Texture.DEFAULT_IMAGE=void 0,THREE.Texture.DEFAULT_MAPPING=new THREE.UVMapping,THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new THREE.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CubeTexture=function(e,t,i,r,n,o,a,s,l){THREE.Texture.call(this,e,t,i,r,n,o,a,s,l),this.images=e},THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CubeTexture.clone=function(e){return void 0===e&&(e=new THREE.CubeTexture),THREE.Texture.prototype.clone.call(this,e),e.images=this.images,e},THREE.CompressedTexture=function(e,t,i,r,n,o,a,s,l,h,c){THREE.Texture.call(this,null,o,a,s,l,h,r,n,c),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.clone=function(){var e=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.DataTexture=function(e,t,i,r,n,o,a,s,l,h,c){THREE.Texture.call(this,null,o,a,s,l,h,r,n,c),this.image={data:e,width:t,height:i}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.VideoTexture=function(e,t,i,r,n,o,a,s,l){THREE.Texture.call(this,e,t,i,r,n,o,a,s,l),this.generateMipmaps=!1;var h=this,c=function(){requestAnimationFrame(c),e.readyState===e.HAVE_ENOUGH_DATA&&(h.needsUpdate=!0)};c()},THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype),THREE.Group=function(){THREE.Object3D.call(this),this.type="Group"},THREE.Group.prototype=Object.create(THREE.Object3D.prototype),THREE.PointCloud=function(e,t){THREE.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.PointCloudMaterial({color:16777215*Math.random()}),this.sortParticles=!1},THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype),THREE.PointCloud.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray;return function(i,r){var n=this,o=n.geometry,a=i.params.PointCloud.threshold;if(e.getInverse(this.matrixWorld),t.copy(i.ray).applyMatrix4(e),null===o.boundingBox||t.isIntersectionBox(o.boundingBox)!==!1){var s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=new THREE.Vector3,h=function(e,o){var a=t.distanceToPoint(e);if(s>a){var l=t.closestPointToPoint(e);l.applyMatrix4(n.matrixWorld);var h=i.ray.origin.distanceTo(l);r.push({distance:h,distanceToRay:a,point:l.clone(),index:o,face:null,object:n})}};if(o instanceof THREE.BufferGeometry){var c=o.attributes,d=c.position.array;if(void 0!==c.index){var u=c.index.array,f=o.offsets;if(0===f.length){var p={start:0,count:u.length,index:0};f=[p]}for(var m=0,g=f.length;g>m;++m)for(var v=f[m].start,y=f[m].count,A=f[m].index,b=v,E=v+y;E>b;b++){var x=A+u[b];l.fromArray(d,3*x),h(l,x)}}else for(var w=d.length/3,b=0;w>b;b++)l.set(d[3*b],d[3*b+1],d[3*b+2]),h(l,b)}else for(var T=this.geometry.vertices,b=0;b<T.length;b++)h(T[b],b)}}}(),THREE.PointCloud.prototype.clone=function(e){return void 0===e&&(e=new THREE.PointCloud(this.geometry,this.material)),e.sortParticles=this.sortParticles,THREE.Object3D.prototype.clone.call(this,e),e},THREE.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new THREE.PointCloud(e,t)},THREE.Line=function(e,t,i){THREE.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==i?i:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,i=new THREE.Sphere;return function(r,n){var o=r.linePrecision,a=o*o,s=this.geometry;if(null===s.boundingSphere&&s.computeBoundingSphere(),i.copy(s.boundingSphere),i.applyMatrix4(this.matrixWorld),r.ray.isIntersectionSphere(i)!==!1&&(e.getInverse(this.matrixWorld),t.copy(r.ray).applyMatrix4(e),s instanceof THREE.Geometry))for(var l=s.vertices,h=l.length,c=new THREE.Vector3,d=new THREE.Vector3,u=this.mode===THREE.LineStrip?1:2,f=0;h-1>f;f+=u){var p=t.distanceSqToSegment(l[f],l[f+1],d,c);if(!(p>a)){var m=t.origin.distanceTo(d);m<r.near||m>r.far||n.push({distance:m,point:c.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}}(),THREE.Line.prototype.clone=function(e){return void 0===e&&(e=new THREE.Line(this.geometry,this.material,this.mode)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;t>e;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,i=new THREE.Sphere,r=new THREE.Vector3,n=new THREE.Vector3,o=new THREE.Vector3;return function(a,s){var l=this.geometry;if(null===l.boundingSphere&&l.computeBoundingSphere(),i.copy(l.boundingSphere),i.applyMatrix4(this.matrixWorld),a.ray.isIntersectionSphere(i)!==!1&&(e.getInverse(this.matrixWorld),t.copy(a.ray).applyMatrix4(e),null===l.boundingBox||t.isIntersectionBox(l.boundingBox)!==!1))if(l instanceof THREE.BufferGeometry){var h=this.material;if(void 0===h)return;var c,d,u,f=l.attributes,p=a.precision;if(void 0!==f.index){var m=f.index.array,g=f.position.array,v=l.offsets;0===v.length&&(v=[{start:0,count:m.length,index:0}]);for(var y=0,A=v.length;A>y;++y)for(var b=v[y].start,E=v[y].count,x=v[y].index,w=b,T=b+E;T>w;w+=3){if(c=x+m[w],d=x+m[w+1],u=x+m[w+2],r.fromArray(g,3*c),n.fromArray(g,3*d),o.fromArray(g,3*u),h.side===THREE.BackSide)var _=t.intersectTriangle(o,n,r,!0);else var _=t.intersectTriangle(r,n,o,h.side!==THREE.DoubleSide);if(null!==_){_.applyMatrix4(this.matrixWorld);var S=a.ray.origin.distanceTo(_);p>S||S<a.near||S>a.far||s.push({distance:S,point:_,face:new THREE.Face3(c,d,u,THREE.Triangle.normal(r,n,o)),faceIndex:null,object:this})}}}else for(var g=f.position.array,w=0,C=0,T=g.length;T>w;w+=3,C+=9){if(c=w,d=w+1,u=w+2,r.fromArray(g,C),n.fromArray(g,C+3),o.fromArray(g,C+6),h.side===THREE.BackSide)var _=t.intersectTriangle(o,n,r,!0);else var _=t.intersectTriangle(r,n,o,h.side!==THREE.DoubleSide);if(null!==_){_.applyMatrix4(this.matrixWorld);var S=a.ray.origin.distanceTo(_);p>S||S<a.near||S>a.far||s.push({distance:S,point:_,face:new THREE.Face3(c,d,u,THREE.Triangle.normal(r,n,o)),faceIndex:null,object:this})}}}else if(l instanceof THREE.Geometry)for(var c,d,u,R=this.material instanceof THREE.MeshFaceMaterial,k=R===!0?this.material.materials:null,p=a.precision,M=l.vertices,P=0,D=l.faces.length;D>P;P++){var H=l.faces[P],h=R===!0?k[H.materialIndex]:this.material;if(void 0!==h){if(c=M[H.a],d=M[H.b],u=M[H.c],h.morphTargets===!0){var O=l.morphTargets,L=this.morphTargetInfluences;r.set(0,0,0),n.set(0,0,0),o.set(0,0,0);for(var I=0,B=O.length;B>I;I++){var N=L[I];if(0!==N){var F=O[I].vertices;r.x+=(F[H.a].x-c.x)*N,r.y+=(F[H.a].y-c.y)*N,r.z+=(F[H.a].z-c.z)*N,n.x+=(F[H.b].x-d.x)*N,n.y+=(F[H.b].y-d.y)*N,n.z+=(F[H.b].z-d.z)*N,o.x+=(F[H.c].x-u.x)*N,o.y+=(F[H.c].y-u.y)*N,o.z+=(F[H.c].z-u.z)*N}}r.add(c),n.add(d),o.add(u),c=r,d=n,u=o}if(h.side===THREE.BackSide)var _=t.intersectTriangle(u,d,c,!0);else var _=t.intersectTriangle(c,d,u,h.side!==THREE.DoubleSide);if(null!==_){_.applyMatrix4(this.matrixWorld);var S=a.ray.origin.distanceTo(_);p>S||S<a.near||S>a.far||s.push({distance:S,point:_,face:H,faceIndex:P,object:this})}}}}}(),THREE.Mesh.prototype.clone=function(e,t){return void 0===e&&(e=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e,t),e},THREE.Bone=function(e){THREE.Object3D.call(this),this.skin=e},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Skeleton=function(e,t,i){if(this.useVertexTexture=void 0!==i?i:!0,this.identityMatrix=new THREE.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var r;r=this.bones.length>256?64:this.bones.length>64?32:this.bones.length>16?16:8,this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var n=0,o=this.bones.length;o>n;n++)this.boneInverses.push(new THREE.Matrix4)}},THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;t>e;e++){var i=new THREE.Matrix4;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},THREE.Skeleton.prototype.pose=function(){for(var e,t=0,i=this.bones.length;i>t;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,i=this.bones.length;i>t;t++)e=this.bones[t],e&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},THREE.Skeleton.prototype.update=function(){
var e=new THREE.Matrix4;return function(){for(var t=0,i=this.bones.length;i>t;t++){var r=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(r,this.boneInverses[t]),e.flattenToArrayOffset(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh=function(e,t,i){THREE.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var n,o,a,s,l,h=0,c=this.geometry.bones.length;c>h;++h)o=this.geometry.bones[h],a=o.pos,s=o.rotq,l=o.scl,n=new THREE.Bone(this),r.push(n),n.name=o.name,n.position.set(a[0],a[1],a[2]),n.quaternion.set(s[0],s[1],s[2],s[3]),void 0!==l?n.scale.set(l[0],l[1],l[2]):n.scale.set(1,1,1);for(var h=0,c=this.geometry.bones.length;c>h;++h)o=this.geometry.bones[h],-1!==o.parent?r[o.parent].add(r[h]):this.add(r[h])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new THREE.Skeleton(r,void 0,i))},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],i=1/t.lengthManhattan();i!==1/0?t.multiplyScalar(i):t.set(1)}},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(e){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},THREE.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,e),e},THREE.MorphAnimMesh=function(e,t){THREE.Mesh.call(this,e,t),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,i=e.animations,r=/([a-z]+)_?(\d+)/,n=0,o=e.morphTargets.length;o>n;n++){var a=e.morphTargets[n],s=a.name.match(r);if(s&&s.length>1){var l=s[1];s[2];i[l]||(i[l]={start:1/0,end:-(1/0)});var h=i[l];n<h.start&&(h.start=n),n>h.end&&(h.end=n),t||(t=l)}}e.firstAnimation=t},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,i){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:i}},THREE.MorphAnimMesh.prototype.playAnimation=function(e,t){var i=this.geometry.animations[e];i?(this.setFrameRange(i.start,i.end),this.duration=1e3*((i.end-i.start)/t),this.time=0):console.warn("animation["+e+"] undefined")},THREE.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var i=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/t),0,this.length-1);i!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[i]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=i);var r=this.time%t/t;this.directionBackwards&&(r=1-r),this.morphTargetInfluences[this.currentKeyframe]=r,this.morphTargetInfluences[this.lastKeyframe]=1-r},THREE.MorphAnimMesh.prototype.interpolateTargets=function(e,t,i){for(var r=this.morphTargetInfluences,n=0,o=r.length;o>n;n++)r[n]=0;e>-1&&(r[e]=1-i),t>-1&&(r[t]=i)},THREE.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,e),e},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=0;i<this.objects.length&&!(t<this.objects[i].distance);i++);this.objects.splice(i,0,{distance:t,object:e}),this.add(e)},THREE.LOD.prototype.getObjectForDistance=function(e){for(var t=1,i=this.objects.length;i>t&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},THREE.LOD.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,i){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,i)}}(),THREE.LOD.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i){if(this.objects.length>1){e.setFromMatrixPosition(i.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);this.objects[0].object.visible=!0;for(var n=1,o=this.objects.length;o>n&&r>=this.objects[n].distance;n++)this.objects[n-1].object.visible=!1,this.objects[n].object.visible=!0;for(;o>n;n++)this.objects[n].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(e){void 0===e&&(e=new THREE.LOD),THREE.Object3D.prototype.clone.call(this,e);for(var t=0,i=this.objects.length;i>t;t++){var r=this.objects[t].object.clone();r.visible=0===t,e.addLevel(r,this.objects[t].distance)}return e},THREE.Sprite=function(){var e=new Uint16Array([0,1,2,0,2,3]),t=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),i=new Float32Array([0,0,1,0,1,1,0,1]),r=new THREE.BufferGeometry;return r.addAttribute("index",new THREE.BufferAttribute(e,1)),r.addAttribute("position",new THREE.BufferAttribute(t,3)),r.addAttribute("uv",new THREE.BufferAttribute(i,2)),function(e){THREE.Object3D.call(this),this.type="Sprite",this.geometry=r,this.material=void 0!==e?e:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,i){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.distanceToPoint(e);r>this.scale.x||i.push({distance:r,point:this.position,face:null,object:this})}}(),THREE.Sprite.prototype.clone=function(e){return void 0===e&&(e=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Particle=THREE.Sprite,THREE.LensFlare=function(e,t,i,r,n){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,i,r,n)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.add=function(e,t,i,r,n,o){void 0===t&&(t=-1),void 0===i&&(i=0),void 0===o&&(o=1),void 0===n&&(n=new THREE.Color(16777215)),void 0===r&&(r=THREE.NormalBlending),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:e,size:t,distance:i,x:0,y:0,z:0,scale:1,rotation:1,opacity:o,color:n,blending:r})},THREE.LensFlare.prototype.updateLensFlares=function(){var e,t,i=this.lensFlares.length,r=2*-this.positionScreen.x,n=2*-this.positionScreen.y;for(e=0;i>e;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+n*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},THREE.Scene=function(){THREE.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.clone=function(e){return void 0===e&&(e=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},THREE.Fog=function(e,t,i){this.name="",this.color=new THREE.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(e,t){this.name="",this.color=new THREE.Color(e),this.density=void 0!==t?t:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.ShaderChunk={},THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n",THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n	vec3 dirVector = normalize( lDirection.xyz );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float lDistance = 1.0;\n			if ( spotLightDistance[ i ] > 0.0 )\n				lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif",THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",THREE.ShaderChunk.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n	mvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n	mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n	mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n	normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	vec3 pointDiffuse = vec3( 0.0 );\n	vec3 pointSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n				// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		pointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	vec3 spotDiffuse = vec3( 0.0 );\n	vec3 spotSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( spotLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n					// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n					// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	vec3 dirDiffuse = vec3( 0.0 );\n	vec3 dirSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n		vec3 dirVector = normalize( lDirection.xyz );\n\n				// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		dirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	vec3 hemiDiffuse = vec3( 0.0 );\n	vec3 hemiSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		hemiDiffuse += diffuse * hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n	totalDiffuse += dirDiffuse;\n	totalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	totalDiffuse += hemiDiffuse;\n	totalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	totalDiffuse += pointDiffuse;\n	totalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	totalDiffuse += spotDiffuse;\n	totalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	uniform samplerCube envMap;\n	uniform float flipEnvMap;\n	uniform int combine;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform bool useRefract;\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif",THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n			// Per-Pixel Tangent Space Normal Mapping\n			// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	#ifdef GAMMA_INPUT\n\n		texelColor.xyz *= texelColor.xyz;\n\n	#endif\n\n	gl_FragColor = gl_FragColor * texelColor;\n\n#endif",THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif",THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	#ifdef GAMMA_INPUT\n\n		vColor = color * color;\n\n	#else\n\n		vColor = color;\n\n	#endif\n\n#endif",THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n	uniform bool useRefract;\n\n#endif\n",THREE.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n	gl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif",THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	vec3 reflectVec;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n		// Transforming Normal Vectors with the Inverse Transformation\n\n		vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n		if ( useRefract ) {\n\n			reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		} else { \n\n			reflectVec = reflect( cameraToVertex, worldNormal );\n\n		}\n\n	#else\n\n		reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n		vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#else\n\n		vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#endif\n\n	#ifdef GAMMA_INPUT\n\n		cubeColor.xyz *= cubeColor.xyz;\n\n	#endif\n\n	if ( combine == 1 ) {\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n	} else if ( combine == 2 ) {\n\n		gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n	} else {\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n	}\n\n#endif",THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		const float LOG2 = 1.442695;\n		float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n		fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif",THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n			// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n			//	http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n			// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif",THREE.ShaderChunk.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n	objectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n	objectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n	objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;",THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif",THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif",THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n	worldNormal = normalize( worldNormal );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	if ( useRefract ) {\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	} else {\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	}\n\n#endif",THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	#ifdef GAMMA_OUTPUT\n\n		shadowColor *= shadowColor;\n\n	#endif\n\n	gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n",THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#endif\n\n	#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#endif\n\n	#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif",THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	gl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",THREE.UniformsUtils={merge:function(e){for(var t={},i=0;i<e.length;i++){var r=this.clone(e[i]);for(var n in r)t[n]=r[n]}return t},clone:function(e){var t={};for(var i in e){t[i]={};for(var r in e[i]){var n=e[i][r];n instanceof THREE.Color||n instanceof THREE.Vector2||n instanceof THREE.Vector3||n instanceof THREE.Vector4||n instanceof THREE.Matrix4||n instanceof THREE.Texture?t[i][r]=n.clone():n instanceof Array?t[i][r]=n.slice():t[i][r]=n}}return t}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED","		if ( gl_FrontFacing )","			gl_FragColor.xyz *= vLightFront;","		else","			gl_FragColor.xyz *= vLightBack;","	#else","		gl_FragColor.xyz *= vLightFront;","	#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","	#else","		gl_PointSize = size;","	#endif","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;","	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	if ( mod( vLineDistance, totalSize ) > dashSize ) {","		discard;","	}","	gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	float color = 1.0 - smoothstep( mNear, mFar, depth );","	gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new THREE.Color(16777215)},specular:{type:"c",value:new THREE.Color(1118481)},ambient:{type:"c",value:new THREE.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;","uniform samplerCube tCube;","uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float refractionRatio;","uniform float reflectivity;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","	uniform vec3 wrapRGB;","#endif","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	gl_FragColor = vec4( vec3( 1.0 ), opacity );","	vec3 specularTex = vec3( 1.0 );","	vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","	normalTex.xy *= uNormalScale;","	normalTex = normalize( normalTex );","	if( enableDiffuse ) {","		#ifdef GAMMA_INPUT","			vec4 texelColor = texture2D( tDiffuse, vUv );","			texelColor.xyz *= texelColor.xyz;","			gl_FragColor = gl_FragColor * texelColor;","		#else","			gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );","		#endif","	}","	if( enableAO ) {","		#ifdef GAMMA_INPUT","			vec4 aoColor = texture2D( tAO, vUv );","			aoColor.xyz *= aoColor.xyz;","			gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;","		#else","			gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;","		#endif","	}",THREE.ShaderChunk.alphatest_fragment,"	if( enableSpecular )","		specularTex = texture2D( tSpecular, vUv ).xyz;","	mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","	vec3 finalNormal = tsb * normalTex;","	#ifdef FLIP_SIDED","		finalNormal = -finalNormal;","	#endif","	vec3 normal = normalize( finalNormal );","	vec3 viewPosition = normalize( vViewPosition );","	#if MAX_POINT_LIGHTS > 0","		vec3 pointDiffuse = vec3( 0.0 );","		vec3 pointSpecular = vec3( 0.0 );","		for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","			vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","			vec3 pointVector = lPosition.xyz + vViewPosition.xyz;","			float pointDistance = 1.0;","			if ( pointLightDistance[ i ] > 0.0 )","				pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","			pointVector = normalize( pointVector );","			#ifdef WRAP_AROUND","				float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","				float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","				vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","			#else","				float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","			#endif","			pointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;","			vec3 pointHalfVector = normalize( pointVector + viewPosition );","			float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","			float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );","			pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;","		}","	#endif","	#if MAX_SPOT_LIGHTS > 0","		vec3 spotDiffuse = vec3( 0.0 );","		vec3 spotSpecular = vec3( 0.0 );","		for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","			vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","			vec3 spotVector = lPosition.xyz + vViewPosition.xyz;","			float spotDistance = 1.0;","			if ( spotLightDistance[ i ] > 0.0 )","				spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","			spotVector = normalize( spotVector );","			float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","			if ( spotEffect > spotLightAngleCos[ i ] ) {","				spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );","				#ifdef WRAP_AROUND","					float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","					float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","					vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","				#else","					float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );","				#endif","				spotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;","				vec3 spotHalfVector = normalize( spotVector + viewPosition );","				float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","				float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );","				float specularNormalization = ( shininess + 2.0 ) / 8.0;","				vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );","				spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;","			}","		}","	#endif","	#if MAX_DIR_LIGHTS > 0","		vec3 dirDiffuse = vec3( 0.0 );","		vec3 dirSpecular = vec3( 0.0 );","		for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","			vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","			vec3 dirVector = normalize( lDirection.xyz );","			#ifdef WRAP_AROUND","				float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","				float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","				vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );","			#else","				float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","			#endif","			dirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;","			vec3 dirHalfVector = normalize( dirVector + viewPosition );","			float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","			float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );","			dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","		}","	#endif","	#if MAX_HEMI_LIGHTS > 0","		vec3 hemiDiffuse = vec3( 0.0 );","		vec3 hemiSpecular = vec3( 0.0 );","		for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","			vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","			vec3 lVector = normalize( lDirection.xyz );","			float dotProduct = dot( normal, lVector );","			float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","			vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","			hemiDiffuse += diffuse * hemiColor;","			vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","			float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","			float hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );","			vec3 lVectorGround = -lVector;","			vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","			float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","			float hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );","			float dotProductGround = dot( normal, lVectorGround );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );","			vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );","			hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","		}","	#endif","	vec3 totalDiffuse = vec3( 0.0 );","	vec3 totalSpecular = vec3( 0.0 );","	#if MAX_DIR_LIGHTS > 0","		totalDiffuse += dirDiffuse;","		totalSpecular += dirSpecular;","	#endif","	#if MAX_HEMI_LIGHTS > 0","		totalDiffuse += hemiDiffuse;","		totalSpecular += hemiSpecular;","	#endif","	#if MAX_POINT_LIGHTS > 0","		totalDiffuse += pointDiffuse;","		totalSpecular += pointSpecular;","	#endif","	#if MAX_SPOT_LIGHTS > 0","		totalDiffuse += spotDiffuse;","		totalSpecular += spotSpecular;","	#endif","	#ifdef METAL","		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );","	#else","		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","	#endif","	if ( enableReflection ) {","		vec3 vReflect;","		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","		if ( useRefract ) {","			vReflect = refract( cameraToVertex, normal, refractionRatio );","		} else {","			vReflect = reflect( cameraToVertex, normal );","		}","		vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","		#ifdef GAMMA_INPUT","			cubeColor.xyz *= cubeColor.xyz;","		#endif","		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );","	}",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),
vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","	uniform sampler2D tDisplacement;","	uniform float uDisplacementScale;","	uniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"	#ifdef USE_SKINNING","		vNormal = normalize( normalMatrix * skinnedNormal.xyz );","		vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","		vTangent = normalize( normalMatrix * skinnedTangent.xyz );","	#else","		vNormal = normalize( normalMatrix * normal );","		vTangent = normalize( normalMatrix * tangent.xyz );","	#endif","	vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );","	vUv = uv * uRepeat + uOffset;","	vec3 displacedPosition;","	#ifdef VERTEX_TEXTURES","		if ( enableDisplacement ) {","			vec3 dv = texture2D( tDisplacement, uv ).xyz;","			float df = uDisplacementScale * dv.x + uDisplacementBias;","			displacedPosition = position + normalize( normal ) * df;","		} else {","			#ifdef USE_SKINNING","				vec4 skinVertex = bindMatrix * vec4( position, 1.0 );","				vec4 skinned = vec4( 0.0 );","				skinned += boneMatX * skinVertex * skinWeight.x;","				skinned += boneMatY * skinVertex * skinWeight.y;","				skinned += boneMatZ * skinVertex * skinWeight.z;","				skinned += boneMatW * skinVertex * skinWeight.w;","				skinned  = bindMatrixInverse * skinned;","				displacedPosition = skinned.xyz;","			#else","				displacedPosition = position;","			#endif","		}","	#else","		#ifdef USE_SKINNING","			vec4 skinVertex = bindMatrix * vec4( position, 1.0 );","			vec4 skinned = vec4( 0.0 );","			skinned += boneMatX * skinVertex * skinWeight.x;","			skinned += boneMatY * skinVertex * skinWeight.y;","			skinned += boneMatZ * skinVertex * skinWeight.z;","			skinned += boneMatW * skinVertex * skinWeight.w;","			skinned  = bindMatrixInverse * skinned;","			displacedPosition = skinned.xyz;","		#else","			displacedPosition = position;","		#endif","	#endif","	vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","	vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"	vWorldPosition = worldPosition.xyz;","	vViewPosition = -mvPosition.xyz;","	#ifdef USE_SHADOWMAP","		for( int i = 0; i < MAX_SHADOWS; i ++ ) {","			vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","		}","	#endif","}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bit_mask;","	return res;","}","void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","	#else","		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","	#endif","}"].join("\n")}},THREE.WebGLRenderer=function(e){function t(){Ie.clearColor(0,0,0,1),Ie.clearDepth(1),Ie.clearStencil(0),Ie.enable(Ie.DEPTH_TEST),Ie.depthFunc(Ie.LEQUAL),Ie.frontFace(Ie.CCW),Ie.cullFace(Ie.BACK),Ie.enable(Ie.CULL_FACE),Ie.enable(Ie.BLEND),Ie.blendEquation(Ie.FUNC_ADD),Ie.blendFunc(Ie.SRC_ALPHA,Ie.ONE_MINUS_SRC_ALPHA),Ie.viewport(rt,nt,ot,at),Ie.clearColor(Ce.r,Ce.g,Ce.b,Re)}function i(e){e.__webglVertexBuffer=Ie.createBuffer(),e.__webglColorBuffer=Ie.createBuffer(),Be.info.memory.geometries++}function r(e){e.__webglVertexBuffer=Ie.createBuffer(),e.__webglColorBuffer=Ie.createBuffer(),e.__webglLineDistanceBuffer=Ie.createBuffer(),Be.info.memory.geometries++}function n(e){e.__webglVertexBuffer=Ie.createBuffer(),e.__webglNormalBuffer=Ie.createBuffer(),e.__webglTangentBuffer=Ie.createBuffer(),e.__webglColorBuffer=Ie.createBuffer(),e.__webglUVBuffer=Ie.createBuffer(),e.__webglUV2Buffer=Ie.createBuffer(),e.__webglSkinIndicesBuffer=Ie.createBuffer(),e.__webglSkinWeightsBuffer=Ie.createBuffer(),e.__webglFaceBuffer=Ie.createBuffer(),e.__webglLineBuffer=Ie.createBuffer();var t,i;if(e.numMorphTargets)for(e.__webglMorphTargetsBuffers=[],t=0,i=e.numMorphTargets;i>t;t++)e.__webglMorphTargetsBuffers.push(Ie.createBuffer());if(e.numMorphNormals)for(e.__webglMorphNormalsBuffers=[],t=0,i=e.numMorphNormals;i>t;t++)e.__webglMorphNormalsBuffers.push(Ie.createBuffer());Be.info.memory.geometries++}function o(e){var t=e.geometry,i=e.material,r=t.vertices.length;if(i.attributes){void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[]);for(var n in i.attributes){var o=i.attributes[n];if(!o.__webglInitialized||o.createUniqueBuffers){o.__webglInitialized=!0;var a=1;"v2"===o.type?a=2:"v3"===o.type?a=3:"v4"===o.type?a=4:"c"===o.type&&(a=3),o.size=a,o.array=new Float32Array(r*a),o.buffer=Ie.createBuffer(),o.buffer.belongsToAttribute=n,o.needsUpdate=!0}t.__webglCustomAttributesList.push(o)}}}function a(e,t){var i=e.vertices.length;e.__vertexArray=new Float32Array(3*i),e.__colorArray=new Float32Array(3*i),e.__sortArray=[],e.__webglParticleCount=i,o(t)}function s(e,t){var i=e.vertices.length;e.__vertexArray=new Float32Array(3*i),e.__colorArray=new Float32Array(3*i),e.__lineDistanceArray=new Float32Array(1*i),e.__webglLineCount=i,o(t)}function l(e,t){var i=t.geometry,r=e.faces3,n=3*r.length,o=1*r.length,a=3*r.length,s=h(t,e);e.__vertexArray=new Float32Array(3*n),e.__normalArray=new Float32Array(3*n),e.__colorArray=new Float32Array(3*n),e.__uvArray=new Float32Array(2*n),i.faceVertexUvs.length>1&&(e.__uv2Array=new Float32Array(2*n)),i.hasTangents&&(e.__tangentArray=new Float32Array(4*n)),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*n),e.__skinWeightArray=new Float32Array(4*n));var l=null!==bt.get("OES_element_index_uint")&&o>21845?Uint32Array:Uint16Array;e.__typeArray=l,e.__faceArray=new l(3*o),e.__lineArray=new l(2*a);var c,d;if(e.numMorphTargets)for(e.__morphTargetsArrays=[],c=0,d=e.numMorphTargets;d>c;c++)e.__morphTargetsArrays.push(new Float32Array(3*n));if(e.numMorphNormals)for(e.__morphNormalsArrays=[],c=0,d=e.numMorphNormals;d>c;c++)e.__morphNormalsArrays.push(new Float32Array(3*n));if(e.__webglFaceCount=3*o,e.__webglLineCount=2*a,s.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var u in s.attributes){var f=s.attributes[u],p={};for(var m in f)p[m]=f[m];if(!p.__webglInitialized||p.createUniqueBuffers){p.__webglInitialized=!0;var g=1;"v2"===p.type?g=2:"v3"===p.type?g=3:"v4"===p.type?g=4:"c"===p.type&&(g=3),p.size=g,p.array=new Float32Array(n*g),p.buffer=Ie.createBuffer(),p.buffer.belongsToAttribute=u,f.needsUpdate=!0,p.__original=f}e.__webglCustomAttributesList.push(p)}}e.__inittedArrays=!0}function h(e,t){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function c(e){return e&&void 0!==e.shading&&e.shading===THREE.SmoothShading}function d(e,t,i){var r,n,o,a,s,l,h,c,d,u,f,p,m=e.vertices,g=m.length,v=e.colors,y=v.length,A=e.__vertexArray,b=e.__colorArray,E=e.__sortArray,w=e.verticesNeedUpdate,T=(e.elementsNeedUpdate,e.colorsNeedUpdate),_=e.__webglCustomAttributesList;if(i.sortParticles){for(ft.copy(ut),ft.multiply(i.matrixWorld),r=0;g>r;r++)o=m[r],pt.copy(o),pt.applyProjection(ft),E[r]=[pt.z,r];for(E.sort(x),r=0;g>r;r++)o=m[E[r][1]],a=3*r,A[a]=o.x,A[a+1]=o.y,A[a+2]=o.z;for(n=0;y>n;n++)a=3*n,l=v[E[n][1]],b[a]=l.r,b[a+1]=l.g,b[a+2]=l.b;if(_)for(h=0,c=_.length;c>h;h++)if(p=_[h],void 0===p.boundTo||"vertices"===p.boundTo)if(a=0,u=p.value.length,1===p.size)for(d=0;u>d;d++)s=E[d][1],p.array[d]=p.value[s];else if(2===p.size)for(d=0;u>d;d++)s=E[d][1],f=p.value[s],p.array[a]=f.x,p.array[a+1]=f.y,a+=2;else if(3===p.size)if("c"===p.type)for(d=0;u>d;d++)s=E[d][1],f=p.value[s],p.array[a]=f.r,p.array[a+1]=f.g,p.array[a+2]=f.b,a+=3;else for(d=0;u>d;d++)s=E[d][1],f=p.value[s],p.array[a]=f.x,p.array[a+1]=f.y,p.array[a+2]=f.z,a+=3;else if(4===p.size)for(d=0;u>d;d++)s=E[d][1],f=p.value[s],p.array[a]=f.x,p.array[a+1]=f.y,p.array[a+2]=f.z,p.array[a+3]=f.w,a+=4}else{if(w)for(r=0;g>r;r++)o=m[r],a=3*r,A[a]=o.x,A[a+1]=o.y,A[a+2]=o.z;if(T)for(n=0;y>n;n++)l=v[n],a=3*n,b[a]=l.r,b[a+1]=l.g,b[a+2]=l.b;if(_)for(h=0,c=_.length;c>h;h++)if(p=_[h],p.needsUpdate&&(void 0===p.boundTo||"vertices"===p.boundTo))if(u=p.value.length,a=0,1===p.size)for(d=0;u>d;d++)p.array[d]=p.value[d];else if(2===p.size)for(d=0;u>d;d++)f=p.value[d],p.array[a]=f.x,p.array[a+1]=f.y,a+=2;else if(3===p.size)if("c"===p.type)for(d=0;u>d;d++)f=p.value[d],p.array[a]=f.r,p.array[a+1]=f.g,p.array[a+2]=f.b,a+=3;else for(d=0;u>d;d++)f=p.value[d],p.array[a]=f.x,p.array[a+1]=f.y,p.array[a+2]=f.z,a+=3;else if(4===p.size)for(d=0;u>d;d++)f=p.value[d],p.array[a]=f.x,p.array[a+1]=f.y,p.array[a+2]=f.z,p.array[a+3]=f.w,a+=4}if((w||i.sortParticles)&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglVertexBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,A,t)),(T||i.sortParticles)&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglColorBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,b,t)),_)for(h=0,c=_.length;c>h;h++)p=_[h],(p.needsUpdate||i.sortParticles)&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,p.buffer),Ie.bufferData(Ie.ARRAY_BUFFER,p.array,t))}function u(e,t){var i,r,n,o,a,s,l,h,c,d,u,f,p=e.vertices,m=e.colors,g=e.lineDistances,v=p.length,y=m.length,A=g.length,b=e.__vertexArray,E=e.__colorArray,x=e.__lineDistanceArray,w=e.verticesNeedUpdate,T=e.colorsNeedUpdate,_=e.lineDistancesNeedUpdate,S=e.__webglCustomAttributesList;if(w){for(i=0;v>i;i++)o=p[i],a=3*i,b[a]=o.x,b[a+1]=o.y,b[a+2]=o.z;Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglVertexBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,b,t)}if(T){for(r=0;y>r;r++)s=m[r],a=3*r,E[a]=s.r,E[a+1]=s.g,E[a+2]=s.b;Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglColorBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,E,t)}if(_){for(n=0;A>n;n++)x[n]=g[n];Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglLineDistanceBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,x,t)}if(S)for(l=0,h=S.length;h>l;l++)if(f=S[l],f.needsUpdate&&(void 0===f.boundTo||"vertices"===f.boundTo)){if(a=0,d=f.value.length,1===f.size)for(c=0;d>c;c++)f.array[c]=f.value[c];else if(2===f.size)for(c=0;d>c;c++)u=f.value[c],f.array[a]=u.x,f.array[a+1]=u.y,a+=2;else if(3===f.size)if("c"===f.type)for(c=0;d>c;c++)u=f.value[c],f.array[a]=u.r,f.array[a+1]=u.g,f.array[a+2]=u.b,a+=3;else for(c=0;d>c;c++)u=f.value[c],f.array[a]=u.x,f.array[a+1]=u.y,f.array[a+2]=u.z,a+=3;else if(4===f.size)for(c=0;d>c;c++)u=f.value[c],f.array[a]=u.x,f.array[a+1]=u.y,f.array[a+2]=u.z,f.array[a+3]=u.w,a+=4;Ie.bindBuffer(Ie.ARRAY_BUFFER,f.buffer),Ie.bufferData(Ie.ARRAY_BUFFER,f.array,t)}}function f(e,t,i,r,n){if(e.__inittedArrays){var o,a,s,l,h,d,u,f,p,m,g,v,y,A,b,E,x,w,T,_,S,C,R,k,M,P,D,H,O,L,I,B,N,F,z,U,j,V,G,W,Y,q,X=c(n),Q=0,Z=0,K=0,J=0,$=0,ee=0,te=0,ie=0,re=0,ne=0,oe=0,ae=0,se=0,le=e.__vertexArray,he=e.__uvArray,ce=e.__uv2Array,de=e.__normalArray,ue=e.__tangentArray,fe=e.__colorArray,pe=e.__skinIndexArray,me=e.__skinWeightArray,ge=e.__morphTargetsArrays,ve=e.__morphNormalsArrays,ye=e.__webglCustomAttributesList,Ae=e.__faceArray,be=e.__lineArray,Ee=t.geometry,xe=Ee.verticesNeedUpdate,we=Ee.elementsNeedUpdate,Te=Ee.uvsNeedUpdate,_e=Ee.normalsNeedUpdate,Se=Ee.tangentsNeedUpdate,Ce=Ee.colorsNeedUpdate,Re=Ee.morphTargetsNeedUpdate,ke=Ee.vertices,Me=e.faces3,Pe=Ee.faces,De=Ee.faceVertexUvs[0],He=Ee.faceVertexUvs[1],Oe=(Ee.colors,Ee.skinIndices),Le=Ee.skinWeights,Be=Ee.morphTargets,Ne=Ee.morphNormals;if(xe){for(o=0,a=Me.length;a>o;o++)l=Pe[Me[o]],v=ke[l.a],y=ke[l.b],A=ke[l.c],le[Z]=v.x,le[Z+1]=v.y,le[Z+2]=v.z,le[Z+3]=y.x,le[Z+4]=y.y,le[Z+5]=y.z,le[Z+6]=A.x,le[Z+7]=A.y,le[Z+8]=A.z,Z+=9;Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglVertexBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,le,i)}if(Re)for(z=0,U=Be.length;U>z;z++){for(oe=0,o=0,a=Me.length;a>o;o++)G=Me[o],l=Pe[G],v=Be[z].vertices[l.a],y=Be[z].vertices[l.b],A=Be[z].vertices[l.c],j=ge[z],j[oe]=v.x,j[oe+1]=v.y,j[oe+2]=v.z,j[oe+3]=y.x,j[oe+4]=y.y,j[oe+5]=y.z,j[oe+6]=A.x,j[oe+7]=A.y,j[oe+8]=A.z,n.morphNormals&&(X?(W=Ne[z].vertexNormals[G],w=W.a,T=W.b,_=W.c):(w=Ne[z].faceNormals[G],T=w,_=w),V=ve[z],V[oe]=w.x,V[oe+1]=w.y,V[oe+2]=w.z,V[oe+3]=T.x,V[oe+4]=T.y,V[oe+5]=T.z,V[oe+6]=_.x,V[oe+7]=_.y,V[oe+8]=_.z),oe+=9;Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[z]),Ie.bufferData(Ie.ARRAY_BUFFER,ge[z],i),n.morphNormals&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[z]),Ie.bufferData(Ie.ARRAY_BUFFER,ve[z],i))}if(Le.length){for(o=0,a=Me.length;a>o;o++)l=Pe[Me[o]],k=Le[l.a],M=Le[l.b],P=Le[l.c],me[ne]=k.x,me[ne+1]=k.y,me[ne+2]=k.z,me[ne+3]=k.w,me[ne+4]=M.x,me[ne+5]=M.y,me[ne+6]=M.z,me[ne+7]=M.w,me[ne+8]=P.x,me[ne+9]=P.y,me[ne+10]=P.z,me[ne+11]=P.w,D=Oe[l.a],H=Oe[l.b],O=Oe[l.c],pe[ne]=D.x,pe[ne+1]=D.y,pe[ne+2]=D.z,pe[ne+3]=D.w,pe[ne+4]=H.x,pe[ne+5]=H.y,pe[ne+6]=H.z,pe[ne+7]=H.w,pe[ne+8]=O.x,pe[ne+9]=O.y,pe[ne+10]=O.z,pe[ne+11]=O.w,ne+=12;ne>0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,pe,i),Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,me,i))}if(Ce){for(o=0,a=Me.length;a>o;o++)l=Pe[Me[o]],u=l.vertexColors,f=l.color,3===u.length&&n.vertexColors===THREE.VertexColors?(S=u[0],C=u[1],R=u[2]):(S=f,C=f,R=f),fe[re]=S.r,fe[re+1]=S.g,fe[re+2]=S.b,fe[re+3]=C.r,fe[re+4]=C.g,fe[re+5]=C.b,fe[re+6]=R.r,fe[re+7]=R.g,fe[re+8]=R.b,re+=9;re>0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglColorBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,fe,i))}if(Se&&Ee.hasTangents){for(o=0,a=Me.length;a>o;o++)l=Pe[Me[o]],p=l.vertexTangents,b=p[0],E=p[1],x=p[2],ue[te]=b.x,ue[te+1]=b.y,ue[te+2]=b.z,ue[te+3]=b.w,ue[te+4]=E.x,ue[te+5]=E.y,ue[te+6]=E.z,ue[te+7]=E.w,ue[te+8]=x.x,ue[te+9]=x.y,ue[te+10]=x.z,ue[te+11]=x.w,te+=12;Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglTangentBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,ue,i)}if(_e){for(o=0,a=Me.length;a>o;o++)if(l=Pe[Me[o]],h=l.vertexNormals,d=l.normal,3===h.length&&X)for(L=0;3>L;L++)B=h[L],de[ee]=B.x,de[ee+1]=B.y,de[ee+2]=B.z,ee+=3;else for(L=0;3>L;L++)de[ee]=d.x,de[ee+1]=d.y,de[ee+2]=d.z,ee+=3;Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglNormalBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,de,i)}if(Te&&De){for(o=0,a=Me.length;a>o;o++)if(s=Me[o],m=De[s],void 0!==m)for(L=0;3>L;L++)N=m[L],he[K]=N.x,he[K+1]=N.y,K+=2;K>0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglUVBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,he,i))}if(Te&&He){for(o=0,a=Me.length;a>o;o++)if(s=Me[o],g=He[s],void 0!==g)for(L=0;3>L;L++)F=g[L],ce[J]=F.x,ce[J+1]=F.y,J+=2;J>0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglUV2Buffer),Ie.bufferData(Ie.ARRAY_BUFFER,ce,i))}if(we){for(o=0,a=Me.length;a>o;o++)Ae[$]=Q,Ae[$+1]=Q+1,Ae[$+2]=Q+2,$+=3,be[ie]=Q,be[ie+1]=Q+1,be[ie+2]=Q,be[ie+3]=Q+2,be[ie+4]=Q+1,be[ie+5]=Q+2,ie+=6,Q+=3;Ie.bindBuffer(Ie.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),Ie.bufferData(Ie.ELEMENT_ARRAY_BUFFER,Ae,i),Ie.bindBuffer(Ie.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),Ie.bufferData(Ie.ELEMENT_ARRAY_BUFFER,be,i)}if(ye)for(L=0,I=ye.length;I>L;L++)if(q=ye[L],q.__original.needsUpdate){if(ae=0,se=0,1===q.size){if(void 0===q.boundTo||"vertices"===q.boundTo)for(o=0,a=Me.length;a>o;o++)l=Pe[Me[o]],q.array[ae]=q.value[l.a],q.array[ae+1]=q.value[l.b],q.array[ae+2]=q.value[l.c],ae+=3;else if("faces"===q.boundTo)for(o=0,a=Me.length;a>o;o++)Y=q.value[Me[o]],q.array[ae]=Y,q.array[ae+1]=Y,q.array[ae+2]=Y,ae+=3}else if(2===q.size){if(void 0===q.boundTo||"vertices"===q.boundTo)for(o=0,a=Me.length;a>o;o++)l=Pe[Me[o]],v=q.value[l.a],y=q.value[l.b],A=q.value[l.c],q.array[ae]=v.x,q.array[ae+1]=v.y,q.array[ae+2]=y.x,q.array[ae+3]=y.y,q.array[ae+4]=A.x,q.array[ae+5]=A.y,ae+=6;else if("faces"===q.boundTo)for(o=0,a=Me.length;a>o;o++)Y=q.value[Me[o]],v=Y,y=Y,A=Y,q.array[ae]=v.x,q.array[ae+1]=v.y,q.array[ae+2]=y.x,q.array[ae+3]=y.y,q.array[ae+4]=A.x,q.array[ae+5]=A.y,ae+=6}else if(3===q.size){var Fe;if(Fe="c"===q.type?["r","g","b"]:["x","y","z"],void 0===q.boundTo||"vertices"===q.boundTo)for(o=0,a=Me.length;a>o;o++)l=Pe[Me[o]],v=q.value[l.a],y=q.value[l.b],A=q.value[l.c],q.array[ae]=v[Fe[0]],q.array[ae+1]=v[Fe[1]],q.array[ae+2]=v[Fe[2]],q.array[ae+3]=y[Fe[0]],q.array[ae+4]=y[Fe[1]],q.array[ae+5]=y[Fe[2]],q.array[ae+6]=A[Fe[0]],q.array[ae+7]=A[Fe[1]],q.array[ae+8]=A[Fe[2]],ae+=9;else if("faces"===q.boundTo)for(o=0,a=Me.length;a>o;o++)Y=q.value[Me[o]],v=Y,y=Y,A=Y,q.array[ae]=v[Fe[0]],q.array[ae+1]=v[Fe[1]],q.array[ae+2]=v[Fe[2]],q.array[ae+3]=y[Fe[0]],q.array[ae+4]=y[Fe[1]],q.array[ae+5]=y[Fe[2]],q.array[ae+6]=A[Fe[0]],q.array[ae+7]=A[Fe[1]],q.array[ae+8]=A[Fe[2]],ae+=9;else if("faceVertices"===q.boundTo)for(o=0,a=Me.length;a>o;o++)Y=q.value[Me[o]],v=Y[0],y=Y[1],A=Y[2],q.array[ae]=v[Fe[0]],q.array[ae+1]=v[Fe[1]],q.array[ae+2]=v[Fe[2]],q.array[ae+3]=y[Fe[0]],q.array[ae+4]=y[Fe[1]],q.array[ae+5]=y[Fe[2]],q.array[ae+6]=A[Fe[0]],q.array[ae+7]=A[Fe[1]],q.array[ae+8]=A[Fe[2]],ae+=9}else if(4===q.size)if(void 0===q.boundTo||"vertices"===q.boundTo)for(o=0,a=Me.length;a>o;o++)l=Pe[Me[o]],v=q.value[l.a],y=q.value[l.b],A=q.value[l.c],q.array[ae]=v.x,q.array[ae+1]=v.y,q.array[ae+2]=v.z,q.array[ae+3]=v.w,q.array[ae+4]=y.x,q.array[ae+5]=y.y,q.array[ae+6]=y.z,q.array[ae+7]=y.w,q.array[ae+8]=A.x,q.array[ae+9]=A.y,q.array[ae+10]=A.z,q.array[ae+11]=A.w,ae+=12;else if("faces"===q.boundTo)for(o=0,a=Me.length;a>o;o++)Y=q.value[Me[o]],v=Y,y=Y,A=Y,q.array[ae]=v.x,q.array[ae+1]=v.y,q.array[ae+2]=v.z,q.array[ae+3]=v.w,q.array[ae+4]=y.x,q.array[ae+5]=y.y,q.array[ae+6]=y.z,q.array[ae+7]=y.w,q.array[ae+8]=A.x,q.array[ae+9]=A.y,q.array[ae+10]=A.z,q.array[ae+11]=A.w,ae+=12;else if("faceVertices"===q.boundTo)for(o=0,a=Me.length;a>o;o++)Y=q.value[Me[o]],v=Y[0],y=Y[1],A=Y[2],q.array[ae]=v.x,q.array[ae+1]=v.y,q.array[ae+2]=v.z,q.array[ae+3]=v.w,q.array[ae+4]=y.x,q.array[ae+5]=y.y,q.array[ae+6]=y.z,q.array[ae+7]=y.w,q.array[ae+8]=A.x,q.array[ae+9]=A.y,q.array[ae+10]=A.z,q.array[ae+11]=A.w,ae+=12;Ie.bindBuffer(Ie.ARRAY_BUFFER,q.buffer),Ie.bufferData(Ie.ARRAY_BUFFER,q.array,i)}r&&(delete e.__inittedArrays,delete e.__colorArray,delete e.__normalArray,delete e.__tangentArray,delete e.__uvArray,delete e.__uv2Array,delete e.__faceArray,delete e.__vertexArray,delete e.__lineArray,delete e.__skinIndexArray,delete e.__skinWeightArray)}}function p(e){for(var t=e.attributes,i=e.attributesKeys,r=0,n=i.length;n>r;r++){var o=i[r],a=t[o];if(void 0===a.buffer&&(a.buffer=Ie.createBuffer(),a.needsUpdate=!0),a.needsUpdate===!0){var s="index"===o?Ie.ELEMENT_ARRAY_BUFFER:Ie.ARRAY_BUFFER;Ie.bindBuffer(s,a.buffer),Ie.bufferData(s,a.array,Ie.STATIC_DRAW),a.needsUpdate=!1}}}function m(e,t,i,r){for(var n=i.attributes,o=t.attributes,a=t.attributesKeys,s=0,l=a.length;l>s;s++){var h=a[s],c=o[h];if(c>=0){var d=n[h];if(void 0!==d){var u=d.itemSize;Ie.bindBuffer(Ie.ARRAY_BUFFER,d.buffer),v(c),Ie.vertexAttribPointer(c,u,Ie.FLOAT,!1,0,r*u*4)}else void 0!==e.defaultAttributeValues&&(2===e.defaultAttributeValues[h].length?Ie.vertexAttrib2fv(c,e.defaultAttributeValues[h]):3===e.defaultAttributeValues[h].length&&Ie.vertexAttrib3fv(c,e.defaultAttributeValues[h]))}}y()}function g(){for(var e=0,t=ht.length;t>e;e++)ht[e]=0}function v(e){ht[e]=1,0===ct[e]&&(Ie.enableVertexAttribArray(e),ct[e]=1)}function y(){for(var e=0,t=ct.length;t>e;e++)ct[e]!==ht[e]&&(Ie.disableVertexAttribArray(e),ct[e]=0)}function A(e,t,i){var r=e.program.attributes;if(-1!==i.morphTargetBase&&r.position>=0?(Ie.bindBuffer(Ie.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[i.morphTargetBase]),v(r.position),Ie.vertexAttribPointer(r.position,3,Ie.FLOAT,!1,0,0)):r.position>=0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,t.__webglVertexBuffer),v(r.position),Ie.vertexAttribPointer(r.position,3,Ie.FLOAT,!1,0,0)),i.morphTargetForcedOrder.length)for(var n=0,o=i.morphTargetForcedOrder,a=i.morphTargetInfluences;n<e.numSupportedMorphTargets&&n<o.length;)r["morphTarget"+n]>=0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[o[n]]),v(r["morphTarget"+n]),Ie.vertexAttribPointer(r["morphTarget"+n],3,Ie.FLOAT,!1,0,0)),r["morphNormal"+n]>=0&&e.morphNormals&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[o[n]]),v(r["morphNormal"+n]),Ie.vertexAttribPointer(r["morphNormal"+n],3,Ie.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[n]=a[o[n]],n++;else{var s,l,h=[],a=i.morphTargetInfluences,c=a.length;for(l=0;c>l;l++)s=a[l],s>0&&h.push([s,l]);h.length>e.numSupportedMorphTargets?(h.sort(x),h.length=e.numSupportedMorphTargets):h.length>e.numSupportedMorphNormals?h.sort(x):0===h.length&&h.push([0,0]);for(var d,n=0;n<e.numSupportedMorphTargets;)h[n]?(d=h[n][1],r["morphTarget"+n]>=0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[d]),v(r["morphTarget"+n]),Ie.vertexAttribPointer(r["morphTarget"+n],3,Ie.FLOAT,!1,0,0)),r["morphNormal"+n]>=0&&e.morphNormals&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[d]),v(r["morphNormal"+n]),Ie.vertexAttribPointer(r["morphNormal"+n],3,Ie.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[n]=a[d]):i.__webglMorphTargetInfluences[n]=0,n++}null!==e.program.uniforms.morphTargetInfluences&&Ie.uniform1fv(e.program.uniforms.morphTargetInfluences,i.__webglMorphTargetInfluences)}function b(e,t){return e.material.id!==t.material.id?t.material.id-e.material.id:e.z!==t.z?t.z-e.z:e.id-t.id}function E(e,t){return e.z!==t.z?e.z-t.z:e.id-t.id}function x(e,t){return t[0]-e[0]}function w(e,t){if(t.visible!==!1){if(t instanceof THREE.Scene||t instanceof THREE.Group);else if(R(t,e),t instanceof THREE.Light)ke.push(t);else if(t instanceof THREE.Sprite)Oe.push(t);else if(t instanceof THREE.LensFlare)Le.push(t);else{var i=Me[t.id];if(i&&(t.frustumCulled===!1||dt.intersectsObject(t)===!0)){H(t,e);for(var r=0,n=i.length;n>r;r++){var o=i[r];C(o),o.render=!0,Be.sortObjects===!0&&(null!==t.renderDepth?o.z=t.renderDepth:(pt.setFromMatrixPosition(t.matrixWorld),pt.applyProjection(ut),o.z=pt.z))}}}for(var r=0,n=t.children.length;n>r;r++)w(e,t.children[r])}}function T(e,t,i,r,n,o){for(var a,s=e.length-1;-1!==s;s--){var l=e[s],h=l.object,c=l.buffer;if($(h,t),o)a=o;else{if(a=l.material,!a)continue;n&&Be.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst),Be.setDepthTest(a.depthTest),Be.setDepthWrite(a.depthWrite),ne(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}Be.setMaterialFaces(a),c instanceof THREE.BufferGeometry?Be.renderBufferDirect(t,i,r,a,c,h):Be.renderBuffer(t,i,r,a,c,h)}}function _(e,t,i,r,n,o,a){for(var s,l=0,h=e.length;h>l;l++){var c=e[l],d=c.object;if(d.visible){if(a)s=a;else{if(s=c[t],!s)continue;o&&Be.setBlending(s.blending,s.blendEquation,s.blendSrc,s.blendDst),Be.setDepthTest(s.depthTest),Be.setDepthWrite(s.depthWrite),ne(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits)}Be.renderImmediateObject(i,r,n,s,d)}}}function S(e){var t=e.object,i=t.material;i.transparent?(e.transparent=i,e.opaque=null):(e.opaque=i,e.transparent=null)}function C(e){var t=e.object,i=e.buffer,r=t.geometry,n=t.material;if(n instanceof THREE.MeshFaceMaterial){var o=r instanceof THREE.BufferGeometry?0:i.materialIndex;n=n.materials[o],e.material=n,n.transparent?He.push(e):De.push(e)}else n&&(e.material=n,n.transparent?He.push(e):De.push(e))}function R(e,t){void 0===e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new THREE.Matrix4,e._normalMatrix=new THREE.Matrix3,e.addEventListener("removed",Bt));var n=e.geometry;if(void 0===n||void 0===n.__webglInit&&(n.__webglInit=!0,n.addEventListener("dispose",Nt),n instanceof THREE.BufferGeometry||(e instanceof THREE.Mesh?M(t,e,n):e instanceof THREE.Line?void 0===n.__webglVertexBuffer&&(r(n),s(n,e),n.verticesNeedUpdate=!0,n.colorsNeedUpdate=!0,n.lineDistancesNeedUpdate=!0):e instanceof THREE.PointCloud&&void 0===n.__webglVertexBuffer&&(i(n),a(n,e),n.verticesNeedUpdate=!0,n.colorsNeedUpdate=!0))),void 0===e.__webglActive)if(e.__webglActive=!0,e instanceof THREE.Mesh){if(n instanceof THREE.BufferGeometry)P(Me,n,e);else if(n instanceof THREE.Geometry)for(var o=qt[n.id],l=0,h=o.length;h>l;l++)P(Me,o[l],e)}else e instanceof THREE.Line||e instanceof THREE.PointCloud?P(Me,n,e):(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)&&D(Pe,e)}function k(e,t){for(var i,r,n=bt.get("OES_element_index_uint")?4294967296:65535,o={},a=e.morphTargets.length,s=e.morphNormals.length,l={},h=[],c=0,d=e.faces.length;d>c;c++){var u=e.faces[c],f=t?u.materialIndex:0;f in o||(o[f]={hash:f,counter:0}),i=o[f].hash+"_"+o[f].counter,i in l||(r={id:Xt++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:a,numMorphNormals:s},l[i]=r,h.push(r)),l[i].vertices+3>n&&(o[f].counter+=1,i=o[f].hash+"_"+o[f].counter,i in l||(r={id:Xt++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:a,numMorphNormals:s},l[i]=r,h.push(r))),l[i].faces3.push(c),l[i].vertices+=3}return h}function M(e,t,i){var r=t.material,o=!1;void 0!==qt[i.id]&&i.groupsNeedUpdate!==!0||(delete Me[t.id],qt[i.id]=k(i,r instanceof THREE.MeshFaceMaterial),i.groupsNeedUpdate=!1);for(var a=qt[i.id],s=0,h=a.length;h>s;s++){var c=a[s];void 0===c.__webglVertexBuffer?(n(c),l(c,t),i.verticesNeedUpdate=!0,i.morphTargetsNeedUpdate=!0,i.elementsNeedUpdate=!0,i.uvsNeedUpdate=!0,i.normalsNeedUpdate=!0,i.tangentsNeedUpdate=!0,i.colorsNeedUpdate=!0,o=!0):o=!1,(o||void 0===t.__webglActive)&&P(Me,c,t)}t.__webglActive=!0}function P(e,t,i){var r=i.id;e[r]=e[r]||[],e[r].push({id:r,buffer:t,object:i,material:null,z:0})}function D(e,t){e.push({id:null,object:t,opaque:null,transparent:null,z:0})}function H(e,t){var i,r,n=e.geometry;if(n instanceof THREE.BufferGeometry)p(n);else if(e instanceof THREE.Mesh){n.groupsNeedUpdate===!0&&M(t,e,n);for(var o=qt[n.id],a=0,s=o.length;s>a;a++){var c=o[a];r=h(e,c),n.groupsNeedUpdate===!0&&l(c,e),i=r.attributes&&O(r),(n.verticesNeedUpdate||n.morphTargetsNeedUpdate||n.elementsNeedUpdate||n.uvsNeedUpdate||n.normalsNeedUpdate||n.colorsNeedUpdate||n.tangentsNeedUpdate||i)&&f(c,e,Ie.DYNAMIC_DRAW,!n.dynamic,r)}n.verticesNeedUpdate=!1,n.morphTargetsNeedUpdate=!1,n.elementsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.tangentsNeedUpdate=!1,r.attributes&&L(r)}else e instanceof THREE.Line?(r=h(e,n),i=r.attributes&&O(r),(n.verticesNeedUpdate||n.colorsNeedUpdate||n.lineDistancesNeedUpdate||i)&&u(n,Ie.DYNAMIC_DRAW),n.verticesNeedUpdate=!1,n.colorsNeedUpdate=!1,n.lineDistancesNeedUpdate=!1,r.attributes&&L(r)):e instanceof THREE.PointCloud&&(r=h(e,n),i=r.attributes&&O(r),(n.verticesNeedUpdate||n.colorsNeedUpdate||e.sortParticles||i)&&d(n,Ie.DYNAMIC_DRAW,e),n.verticesNeedUpdate=!1,n.colorsNeedUpdate=!1,r.attributes&&L(r))}function O(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function L(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function I(e){e instanceof THREE.Mesh||e instanceof THREE.PointCloud||e instanceof THREE.Line?delete Me[e.id]:(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)&&B(Pe,e),delete e.__webglInit,delete e._modelViewMatrix,delete e._normalMatrix,delete e.__webglActive}function B(e,t){for(var i=e.length-1;i>=0;i--)e[i].object===t&&e.splice(i,1)}function N(e,t,i,r){e.addEventListener("dispose",Ut);var n;if(e instanceof THREE.MeshDepthMaterial?n="depth":e instanceof THREE.MeshNormalMaterial?n="normal":e instanceof THREE.MeshBasicMaterial?n="basic":e instanceof THREE.MeshLambertMaterial?n="lambert":e instanceof THREE.MeshPhongMaterial?n="phong":e instanceof THREE.LineBasicMaterial?n="basic":e instanceof THREE.LineDashedMaterial?n="dashed":e instanceof THREE.PointCloudMaterial&&(n="particle_basic"),n){var o=THREE.ShaderLib[n];e.__webglShader={uniforms:THREE.UniformsUtils.clone(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}}else e.__webglShader={uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};var a=me(t),s=ge(t),l=pe(r),h={precision:Ae,supportsVertexTextures:_t,map:!!e.map,envMap:!!e.envMap,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,vertexColors:e.vertexColors,fog:i,useFog:e.fog,fogExp:i instanceof THREE.FogExp2,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:Se,skinning:e.skinning,maxBones:l,useVertexTexture:St&&r&&r.skeleton&&r.skeleton.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:Be.maxMorphTargets,maxMorphNormals:Be.maxMorphNormals,maxDirLights:a.directional,maxPointLights:a.point,maxSpotLights:a.spot,maxHemiLights:a.hemi,maxShadows:s,shadowMapEnabled:Be.shadowMapEnabled&&r.receiveShadow&&s>0,shadowMapType:Be.shadowMapType,shadowMapDebug:Be.shadowMapDebug,shadowMapCascade:Be.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,wrapAround:e.wrapAround,doubleSided:e.side===THREE.DoubleSide,flipSided:e.side===THREE.BackSide},c=[];if(n?c.push(n):(c.push(e.fragmentShader),c.push(e.vertexShader)),void 0!==e.defines)for(var d in e.defines)c.push(d),c.push(e.defines[d]);for(var d in h)c.push(d),c.push(h[d]);for(var u,f=c.join(),p=0,m=Ne.length;m>p;p++){var g=Ne[p];if(g.code===f){u=g,u.usedTimes++;break}}void 0===u&&(u=new THREE.WebGLProgram(Be,f,e,h),Ne.push(u),Be.info.memory.programs=Ne.length),e.program=u;var v=u.attributes;if(e.morphTargets){e.numSupportedMorphTargets=0;for(var y,A="morphTarget",b=0;b<Be.maxMorphTargets;b++)y=A+b,v[y]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;var y,A="morphNormal";for(b=0;b<Be.maxMorphNormals;b++)y=A+b,v[y]>=0&&e.numSupportedMorphNormals++}e.uniformsList=[];for(var E in e.__webglShader.uniforms){var x=e.program.uniforms[E];x&&e.uniformsList.push([e.__webglShader.uniforms[E],x])}}function F(e,t,i,r,n){Ge=0,r.needsUpdate&&(r.program&&Yt(r),N(r,t,i,n),r.needsUpdate=!1),r.morphTargets&&(n.__webglMorphTargetInfluences||(n.__webglMorphTargetInfluences=new Float32Array(Be.maxMorphTargets)));var o=!1,a=!1,s=!1,l=r.program,h=l.uniforms,c=r.__webglShader.uniforms;if(l.id!==Fe&&(Ie.useProgram(l.program),Fe=l.id,o=!0,a=!0,s=!0),r.id!==Ue&&(-1===Ue&&(s=!0),Ue=r.id,a=!0),(o||e!==Ve)&&(Ie.uniformMatrix4fv(h.projectionMatrix,!1,e.projectionMatrix.elements),Se&&Ie.uniform1f(h.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==Ve&&(Ve=e),(r instanceof THREE.ShaderMaterial||r instanceof THREE.MeshPhongMaterial||r.envMap)&&null!==h.cameraPosition&&(pt.setFromMatrixPosition(e.matrixWorld),Ie.uniform3f(h.cameraPosition,pt.x,pt.y,pt.z)),(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.ShaderMaterial||r.skinning)&&null!==h.viewMatrix&&Ie.uniformMatrix4fv(h.viewMatrix,!1,e.matrixWorldInverse.elements)),r.skinning)if(n.bindMatrix&&null!==h.bindMatrix&&Ie.uniformMatrix4fv(h.bindMatrix,!1,n.bindMatrix.elements),n.bindMatrixInverse&&null!==h.bindMatrixInverse&&Ie.uniformMatrix4fv(h.bindMatrixInverse,!1,n.bindMatrixInverse.elements),St&&n.skeleton&&n.skeleton.useVertexTexture){
if(null!==h.boneTexture){var d=K();Ie.uniform1i(h.boneTexture,d),Be.setTexture(n.skeleton.boneTexture,d)}null!==h.boneTextureWidth&&Ie.uniform1i(h.boneTextureWidth,n.skeleton.boneTextureWidth),null!==h.boneTextureHeight&&Ie.uniform1i(h.boneTextureHeight,n.skeleton.boneTextureHeight)}else n.skeleton&&n.skeleton.boneMatrices&&null!==h.boneGlobalMatrices&&Ie.uniformMatrix4fv(h.boneGlobalMatrices,!1,n.skeleton.boneMatrices);return a&&(i&&r.fog&&G(c,i),(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r.lights)&&(gt&&(s=!0,ie(t),gt=!1),s?(q(c,vt),X(c,!0)):X(c,!1)),(r instanceof THREE.MeshBasicMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshPhongMaterial)&&z(c,r),r instanceof THREE.LineBasicMaterial?U(c,r):r instanceof THREE.LineDashedMaterial?(U(c,r),j(c,r)):r instanceof THREE.PointCloudMaterial?V(c,r):r instanceof THREE.MeshPhongMaterial?W(c,r):r instanceof THREE.MeshLambertMaterial?Y(c,r):r instanceof THREE.MeshDepthMaterial?(c.mNear.value=e.near,c.mFar.value=e.far,c.opacity.value=r.opacity):r instanceof THREE.MeshNormalMaterial&&(c.opacity.value=r.opacity),n.receiveShadow&&!r._shadowPass&&Q(c,t),J(r.uniformsList)),Z(h,n),null!==h.modelMatrix&&Ie.uniformMatrix4fv(h.modelMatrix,!1,n.matrixWorld.elements),l}function z(e,t){e.opacity.value=t.opacity,Be.gammaInput?e.diffuse.value.copyGammaToLinear(t.color):e.diffuse.value=t.color,e.map.value=t.map,e.lightMap.value=t.lightMap,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));var i;if(t.map?i=t.map:t.specularMap?i=t.specularMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.alphaMap&&(i=t.alphaMap),void 0!==i){var r=i.offset,n=i.repeat;e.offsetRepeat.value.set(r.x,r.y,n.x,n.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,Be.gammaInput?e.reflectivity.value=t.reflectivity:e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.combine.value=t.combine,e.useRefract.value=t.envMap&&t.envMap.mapping instanceof THREE.CubeRefractionMapping}function U(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function j(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function V(e,t){e.psColor.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size,e.scale.value=ve.height/2,e.map.value=t.map}function G(e,t){e.fogColor.value=t.color,t instanceof THREE.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof THREE.FogExp2&&(e.fogDensity.value=t.density)}function W(e,t){e.shininess.value=t.shininess,Be.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive),e.specular.value.copyGammaToLinear(t.specular)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive,e.specular.value=t.specular),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function Y(e,t){Be.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function q(e,t){e.ambientLightColor.value=t.ambient,e.directionalLightColor.value=t.directional.colors,e.directionalLightDirection.value=t.directional.positions,e.pointLightColor.value=t.point.colors,e.pointLightPosition.value=t.point.positions,e.pointLightDistance.value=t.point.distances,e.spotLightColor.value=t.spot.colors,e.spotLightPosition.value=t.spot.positions,e.spotLightDistance.value=t.spot.distances,e.spotLightDirection.value=t.spot.directions,e.spotLightAngleCos.value=t.spot.anglesCos,e.spotLightExponent.value=t.spot.exponents,e.hemisphereLightSkyColor.value=t.hemi.skyColors,e.hemisphereLightGroundColor.value=t.hemi.groundColors,e.hemisphereLightDirection.value=t.hemi.positions}function X(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function Q(e,t){if(e.shadowMatrix)for(var i=0,r=0,n=t.length;n>r;r++){var o=t[r];o.castShadow&&(o instanceof THREE.SpotLight||o instanceof THREE.DirectionalLight&&!o.shadowCascade)&&(e.shadowMap.value[i]=o.shadowMap,e.shadowMapSize.value[i]=o.shadowMapSize,e.shadowMatrix.value[i]=o.shadowMatrix,e.shadowDarkness.value[i]=o.shadowDarkness,e.shadowBias.value[i]=o.shadowBias,i++)}}function Z(e,t){Ie.uniformMatrix4fv(e.modelViewMatrix,!1,t._modelViewMatrix.elements),e.normalMatrix&&Ie.uniformMatrix3fv(e.normalMatrix,!1,t._normalMatrix.elements)}function K(){var e=Ge;return e>=Et&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Et),Ge+=1,e}function J(e){for(var t,i,r,n=0,o=e.length;o>n;n++){var a=e[n][0];if(a.needsUpdate!==!1){var s=a.type,l=a.value,h=e[n][1];switch(s){case"1i":Ie.uniform1i(h,l);break;case"1f":Ie.uniform1f(h,l);break;case"2f":Ie.uniform2f(h,l[0],l[1]);break;case"3f":Ie.uniform3f(h,l[0],l[1],l[2]);break;case"4f":Ie.uniform4f(h,l[0],l[1],l[2],l[3]);break;case"1iv":Ie.uniform1iv(h,l);break;case"3iv":Ie.uniform3iv(h,l);break;case"1fv":Ie.uniform1fv(h,l);break;case"2fv":Ie.uniform2fv(h,l);break;case"3fv":Ie.uniform3fv(h,l);break;case"4fv":Ie.uniform4fv(h,l);break;case"Matrix3fv":Ie.uniformMatrix3fv(h,!1,l);break;case"Matrix4fv":Ie.uniformMatrix4fv(h,!1,l);break;case"i":Ie.uniform1i(h,l);break;case"f":Ie.uniform1f(h,l);break;case"v2":Ie.uniform2f(h,l.x,l.y);break;case"v3":Ie.uniform3f(h,l.x,l.y,l.z);break;case"v4":Ie.uniform4f(h,l.x,l.y,l.z,l.w);break;case"c":Ie.uniform3f(h,l.r,l.g,l.b);break;case"iv1":Ie.uniform1iv(h,l);break;case"iv":Ie.uniform3iv(h,l);break;case"fv1":Ie.uniform1fv(h,l);break;case"fv":Ie.uniform3fv(h,l);break;case"v2v":void 0===a._array&&(a._array=new Float32Array(2*l.length));for(var c=0,d=l.length;d>c;c++)r=2*c,a._array[r]=l[c].x,a._array[r+1]=l[c].y;Ie.uniform2fv(h,a._array);break;case"v3v":void 0===a._array&&(a._array=new Float32Array(3*l.length));for(var c=0,d=l.length;d>c;c++)r=3*c,a._array[r]=l[c].x,a._array[r+1]=l[c].y,a._array[r+2]=l[c].z;Ie.uniform3fv(h,a._array);break;case"v4v":void 0===a._array&&(a._array=new Float32Array(4*l.length));for(var c=0,d=l.length;d>c;c++)r=4*c,a._array[r]=l[c].x,a._array[r+1]=l[c].y,a._array[r+2]=l[c].z,a._array[r+3]=l[c].w;Ie.uniform4fv(h,a._array);break;case"m3":Ie.uniformMatrix3fv(h,!1,l.elements);break;case"m3v":void 0===a._array&&(a._array=new Float32Array(9*l.length));for(var c=0,d=l.length;d>c;c++)l[c].flattenToArrayOffset(a._array,9*c);Ie.uniformMatrix3fv(h,!1,a._array);break;case"m4":Ie.uniformMatrix4fv(h,!1,l.elements);break;case"m4v":void 0===a._array&&(a._array=new Float32Array(16*l.length));for(var c=0,d=l.length;d>c;c++)l[c].flattenToArrayOffset(a._array,16*c);Ie.uniformMatrix4fv(h,!1,a._array);break;case"t":if(t=l,i=K(),Ie.uniform1i(h,i),!t)continue;t instanceof THREE.CubeTexture||t.image instanceof Array&&6===t.image.length?se(t,i):t instanceof THREE.WebGLRenderTargetCube?le(t,i):Be.setTexture(t,i);break;case"tv":void 0===a._array&&(a._array=[]);for(var c=0,d=a.value.length;d>c;c++)a._array[c]=K();Ie.uniform1iv(h,a._array);for(var c=0,d=a.value.length;d>c;c++)t=a.value[c],i=a._array[c],t&&Be.setTexture(t,i);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+s)}}}}function $(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function ee(e,t,i,r){e[t]=i.r*i.r*r,e[t+1]=i.g*i.g*r,e[t+2]=i.b*i.b*r}function te(e,t,i,r){e[t]=i.r*r,e[t+1]=i.g*r,e[t+2]=i.b*r}function ie(e){var t,i,r,n,o,a,s,l,h,c=0,d=0,u=0,f=vt,p=f.directional.colors,m=f.directional.positions,g=f.point.colors,v=f.point.positions,y=f.point.distances,A=f.spot.colors,b=f.spot.positions,E=f.spot.distances,x=f.spot.directions,w=f.spot.anglesCos,T=f.spot.exponents,_=f.hemi.skyColors,S=f.hemi.groundColors,C=f.hemi.positions,R=0,k=0,M=0,P=0,D=0,H=0,O=0,L=0,I=0,B=0,N=0,F=0;for(t=0,i=e.length;i>t;t++)if(r=e[t],!r.onlyShadow)if(n=r.color,s=r.intensity,h=r.distance,r instanceof THREE.AmbientLight){if(!r.visible)continue;Be.gammaInput?(c+=n.r*n.r,d+=n.g*n.g,u+=n.b*n.b):(c+=n.r,d+=n.g,u+=n.b)}else if(r instanceof THREE.DirectionalLight){if(D+=1,!r.visible)continue;mt.setFromMatrixPosition(r.matrixWorld),pt.setFromMatrixPosition(r.target.matrixWorld),mt.sub(pt),mt.normalize(),I=3*R,m[I]=mt.x,m[I+1]=mt.y,m[I+2]=mt.z,Be.gammaInput?ee(p,I,n,s*s):te(p,I,n,s),R+=1}else if(r instanceof THREE.PointLight){if(H+=1,!r.visible)continue;B=3*k,Be.gammaInput?ee(g,B,n,s*s):te(g,B,n,s),pt.setFromMatrixPosition(r.matrixWorld),v[B]=pt.x,v[B+1]=pt.y,v[B+2]=pt.z,y[k]=h,k+=1}else if(r instanceof THREE.SpotLight){if(O+=1,!r.visible)continue;N=3*M,Be.gammaInput?ee(A,N,n,s*s):te(A,N,n,s),mt.setFromMatrixPosition(r.matrixWorld),b[N]=mt.x,b[N+1]=mt.y,b[N+2]=mt.z,E[M]=h,pt.setFromMatrixPosition(r.target.matrixWorld),mt.sub(pt),mt.normalize(),x[N]=mt.x,x[N+1]=mt.y,x[N+2]=mt.z,w[M]=Math.cos(r.angle),T[M]=r.exponent,M+=1}else if(r instanceof THREE.HemisphereLight){if(L+=1,!r.visible)continue;mt.setFromMatrixPosition(r.matrixWorld),mt.normalize(),F=3*P,C[F]=mt.x,C[F+1]=mt.y,C[F+2]=mt.z,o=r.color,a=r.groundColor,Be.gammaInput?(l=s*s,ee(_,F,o,l),ee(S,F,a,l)):(te(_,F,o,s),te(S,F,a,s)),P+=1}for(t=3*R,i=Math.max(p.length,3*D);i>t;t++)p[t]=0;for(t=3*k,i=Math.max(g.length,3*H);i>t;t++)g[t]=0;for(t=3*M,i=Math.max(A.length,3*O);i>t;t++)A[t]=0;for(t=3*P,i=Math.max(_.length,3*L);i>t;t++)_[t]=0;for(t=3*P,i=Math.max(S.length,3*L);i>t;t++)S[t]=0;f.directional.length=R,f.point.length=k,f.spot.length=M,f.hemi.length=P,f.ambient[0]=c,f.ambient[1]=d,f.ambient[2]=u}function re(e){e!==it&&(Ie.lineWidth(e),it=e)}function ne(e,t,i){$e!==e&&(e?Ie.enable(Ie.POLYGON_OFFSET_FILL):Ie.disable(Ie.POLYGON_OFFSET_FILL),$e=e),!e||et===t&&tt===i||(Ie.polygonOffset(t,i),et=t,tt=i)}function oe(e,t,i){var r;i?(Ie.texParameteri(e,Ie.TEXTURE_WRAP_S,fe(t.wrapS)),Ie.texParameteri(e,Ie.TEXTURE_WRAP_T,fe(t.wrapT)),Ie.texParameteri(e,Ie.TEXTURE_MAG_FILTER,fe(t.magFilter)),Ie.texParameteri(e,Ie.TEXTURE_MIN_FILTER,fe(t.minFilter))):(Ie.texParameteri(e,Ie.TEXTURE_WRAP_S,Ie.CLAMP_TO_EDGE),Ie.texParameteri(e,Ie.TEXTURE_WRAP_T,Ie.CLAMP_TO_EDGE),Ie.texParameteri(e,Ie.TEXTURE_MAG_FILTER,ue(t.magFilter)),Ie.texParameteri(e,Ie.TEXTURE_MIN_FILTER,ue(t.minFilter))),r=bt.get("EXT_texture_filter_anisotropic"),r&&t.type!==THREE.FloatType&&(t.anisotropy>1||t.__oldAnisotropy)&&(Ie.texParameterf(e,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,Be.getMaxAnisotropy())),t.__oldAnisotropy=t.anisotropy)}function ae(e,t){if(e.width>t||e.height>t){var i=t/Math.max(e.width,e.height),r=document.createElement("canvas");r.width=Math.floor(e.width*i),r.height=Math.floor(e.height*i);var n=r.getContext("2d");return n.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.log("THREE.WebGLRenderer:",e,"is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height+"."),r}return e}function se(e,t){if(6===e.image.length)if(e.needsUpdate){e.image.__webglTextureCube||(e.addEventListener("dispose",Ft),e.image.__webglTextureCube=Ie.createTexture(),Be.info.memory.textures++),Ie.activeTexture(Ie.TEXTURE0+t),Ie.bindTexture(Ie.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),Ie.pixelStorei(Ie.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var i=e instanceof THREE.CompressedTexture,r=e.image[0]instanceof THREE.DataTexture,n=[],o=0;6>o;o++)!Be.autoScaleCubemaps||i||r?n[o]=r?e.image[o].image:e.image[o]:n[o]=ae(e.image[o],Tt);var a=n[0],s=THREE.Math.isPowerOfTwo(a.width)&&THREE.Math.isPowerOfTwo(a.height),l=fe(e.format),h=fe(e.type);oe(Ie.TEXTURE_CUBE_MAP,e,s);for(var o=0;6>o;o++)if(i)for(var c,d=n[o].mipmaps,u=0,f=d.length;f>u;u++)c=d[u],e.format!==THREE.RGBAFormat&&e.format!==THREE.RGBFormat?Pt().indexOf(l)>-1?Ie.compressedTexImage2D(Ie.TEXTURE_CUBE_MAP_POSITIVE_X+o,u,l,c.width,c.height,0,c.data):console.warn("Attempt to load unsupported compressed texture format"):Ie.texImage2D(Ie.TEXTURE_CUBE_MAP_POSITIVE_X+o,u,l,c.width,c.height,0,l,h,c.data);else r?Ie.texImage2D(Ie.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,n[o].width,n[o].height,0,l,h,n[o].data):Ie.texImage2D(Ie.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,l,h,n[o]);e.generateMipmaps&&s&&Ie.generateMipmap(Ie.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Ie.activeTexture(Ie.TEXTURE0+t),Ie.bindTexture(Ie.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}function le(e,t){Ie.activeTexture(Ie.TEXTURE0+t),Ie.bindTexture(Ie.TEXTURE_CUBE_MAP,e.__webglTexture)}function he(e,t,i){Ie.bindFramebuffer(Ie.FRAMEBUFFER,e),Ie.framebufferTexture2D(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,i,t.__webglTexture,0)}function ce(e,t){Ie.bindRenderbuffer(Ie.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Ie.renderbufferStorage(Ie.RENDERBUFFER,Ie.DEPTH_COMPONENT16,t.width,t.height),Ie.framebufferRenderbuffer(Ie.FRAMEBUFFER,Ie.DEPTH_ATTACHMENT,Ie.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Ie.renderbufferStorage(Ie.RENDERBUFFER,Ie.DEPTH_STENCIL,t.width,t.height),Ie.framebufferRenderbuffer(Ie.FRAMEBUFFER,Ie.DEPTH_STENCIL_ATTACHMENT,Ie.RENDERBUFFER,e)):Ie.renderbufferStorage(Ie.RENDERBUFFER,Ie.RGBA4,t.width,t.height)}function de(e){e instanceof THREE.WebGLRenderTargetCube?(Ie.bindTexture(Ie.TEXTURE_CUBE_MAP,e.__webglTexture),Ie.generateMipmap(Ie.TEXTURE_CUBE_MAP),Ie.bindTexture(Ie.TEXTURE_CUBE_MAP,null)):(Ie.bindTexture(Ie.TEXTURE_2D,e.__webglTexture),Ie.generateMipmap(Ie.TEXTURE_2D),Ie.bindTexture(Ie.TEXTURE_2D,null))}function ue(e){return e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter?Ie.NEAREST:Ie.LINEAR}function fe(e){var t;if(e===THREE.RepeatWrapping)return Ie.REPEAT;if(e===THREE.ClampToEdgeWrapping)return Ie.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return Ie.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return Ie.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return Ie.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return Ie.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return Ie.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return Ie.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return Ie.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return Ie.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return Ie.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return Ie.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return Ie.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return Ie.BYTE;if(e===THREE.ShortType)return Ie.SHORT;if(e===THREE.UnsignedShortType)return Ie.UNSIGNED_SHORT;if(e===THREE.IntType)return Ie.INT;if(e===THREE.UnsignedIntType)return Ie.UNSIGNED_INT;if(e===THREE.FloatType)return Ie.FLOAT;if(e===THREE.AlphaFormat)return Ie.ALPHA;if(e===THREE.RGBFormat)return Ie.RGB;if(e===THREE.RGBAFormat)return Ie.RGBA;if(e===THREE.LuminanceFormat)return Ie.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return Ie.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return Ie.FUNC_ADD;if(e===THREE.SubtractEquation)return Ie.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return Ie.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return Ie.ZERO;if(e===THREE.OneFactor)return Ie.ONE;if(e===THREE.SrcColorFactor)return Ie.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return Ie.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return Ie.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return Ie.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return Ie.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return Ie.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return Ie.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return Ie.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return Ie.SRC_ALPHA_SATURATE;if(t=bt.get("WEBGL_compressed_texture_s3tc"),null!==t){if(e===THREE.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t=bt.get("WEBGL_compressed_texture_pvrtc"),null!==t){if(e===THREE.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===THREE.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===THREE.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===THREE.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t=bt.get("EXT_blend_minmax"),null!==t){if(e===THREE.MinEquation)return t.MIN_EXT;if(e===THREE.MaxEquation)return t.MAX_EXT}return 0}function pe(e){if(St&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var t=Ie.getParameter(Ie.MAX_VERTEX_UNIFORM_VECTORS),i=Math.floor((t-20)/4),r=i;return void 0!==e&&e instanceof THREE.SkinnedMesh&&(r=Math.min(e.skeleton.bones.length,r),r<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)")),r}function me(e){for(var t=0,i=0,r=0,n=0,o=0,a=e.length;a>o;o++){var s=e[o];s.onlyShadow||s.visible===!1||(s instanceof THREE.DirectionalLight&&t++,s instanceof THREE.PointLight&&i++,s instanceof THREE.SpotLight&&r++,s instanceof THREE.HemisphereLight&&n++)}return{directional:t,point:i,spot:r,hemi:n}}function ge(e){for(var t=0,i=0,r=e.length;r>i;i++){var n=e[i];n.castShadow&&(n instanceof THREE.SpotLight&&t++,n instanceof THREE.DirectionalLight&&!n.shadowCascade&&t++)}return t}console.log("THREE.WebGLRenderer",THREE.REVISION),e=e||{};var ve=void 0!==e.canvas?e.canvas:document.createElement("canvas"),ye=void 0!==e.context?e.context:null,Ae=void 0!==e.precision?e.precision:"highp",be=void 0!==e.alpha?e.alpha:!1,Ee=void 0!==e.depth?e.depth:!0,xe=void 0!==e.stencil?e.stencil:!0,we=void 0!==e.antialias?e.antialias:!1,Te=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,_e=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,Se=void 0!==e.logarithmicDepthBuffer?e.logarithmicDepthBuffer:!1,Ce=new THREE.Color(0),Re=0,ke=[],Me={},Pe=[],De=[],He=[],Oe=[],Le=[];this.domElement=ve,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaInput=!1,this.gammaOutput=!1,this.shadowMapEnabled=!1,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var Ie,Be=this,Ne=[],Fe=null,ze=null,Ue=-1,je=-1,Ve=null,Ge=0,We=-1,Ye=-1,qe=-1,Xe=-1,Qe=-1,Ze=-1,Ke=-1,Je=-1,$e=null,et=null,tt=null,it=null,rt=0,nt=0,ot=ve.width,at=ve.height,st=0,lt=0,ht=new Uint8Array(16),ct=new Uint8Array(16),dt=new THREE.Frustum,ut=new THREE.Matrix4,ft=new THREE.Matrix4,pt=new THREE.Vector3,mt=new THREE.Vector3,gt=!0,vt={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};try{var yt={alpha:be,depth:Ee,stencil:xe,antialias:we,premultipliedAlpha:Te,preserveDrawingBuffer:_e};if(Ie=ye||ve.getContext("webgl",yt)||ve.getContext("experimental-webgl",yt),null===Ie)throw null!==ve.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context."}catch(At){console.error(At)}void 0===Ie.getShaderPrecisionFormat&&(Ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var bt=new THREE.WebGLExtensions(Ie);bt.get("OES_texture_float"),bt.get("OES_texture_float_linear"),bt.get("OES_standard_derivatives"),Se&&bt.get("EXT_frag_depth"),t(),this.context=Ie;var Et=Ie.getParameter(Ie.MAX_TEXTURE_IMAGE_UNITS),xt=Ie.getParameter(Ie.MAX_VERTEX_TEXTURE_IMAGE_UNITS),wt=Ie.getParameter(Ie.MAX_TEXTURE_SIZE),Tt=Ie.getParameter(Ie.MAX_CUBE_MAP_TEXTURE_SIZE),_t=xt>0,St=_t&&bt.get("OES_texture_float"),Ct=Ie.getShaderPrecisionFormat(Ie.VERTEX_SHADER,Ie.HIGH_FLOAT),Rt=Ie.getShaderPrecisionFormat(Ie.VERTEX_SHADER,Ie.MEDIUM_FLOAT),kt=(Ie.getShaderPrecisionFormat(Ie.VERTEX_SHADER,Ie.LOW_FLOAT),Ie.getShaderPrecisionFormat(Ie.FRAGMENT_SHADER,Ie.HIGH_FLOAT)),Mt=Ie.getShaderPrecisionFormat(Ie.FRAGMENT_SHADER,Ie.MEDIUM_FLOAT),Pt=(Ie.getShaderPrecisionFormat(Ie.FRAGMENT_SHADER,Ie.LOW_FLOAT),function(){var e;return function(){if(void 0!==e)return e;if(e=[],bt.get("WEBGL_compressed_texture_pvrtc")||bt.get("WEBGL_compressed_texture_s3tc"))for(var t=Ie.getParameter(Ie.COMPRESSED_TEXTURE_FORMATS),i=0;i<t.length;i++)e.push(t[i]);return e}}()),Dt=Ct.precision>0&&kt.precision>0,Ht=Rt.precision>0&&Mt.precision>0;"highp"!==Ae||Dt||(Ht?(Ae="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(Ae="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==Ae||Ht||(Ae="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var Ot=new THREE.ShadowMapPlugin(this,ke,Me,Pe),Lt=new THREE.SpritePlugin(this,Oe),It=new THREE.LensFlarePlugin(this,Le);this.getContext=function(){return Ie},this.supportsVertexTextures=function(){return _t},this.supportsFloatTextures=function(){return bt.get("OES_texture_float")},this.supportsStandardDerivatives=function(){return bt.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return bt.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return bt.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return bt.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var e;return function(){if(void 0!==e)return e;var t=bt.get("EXT_texture_filter_anisotropic");return e=null!==t?Ie.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return Ae},this.setSize=function(e,t,i){ve.width=e*this.devicePixelRatio,ve.height=t*this.devicePixelRatio,i!==!1&&(ve.style.width=e+"px",ve.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,i,r){rt=e*this.devicePixelRatio,nt=t*this.devicePixelRatio,ot=i*this.devicePixelRatio,at=r*this.devicePixelRatio,Ie.viewport(rt,nt,ot,at)},this.setScissor=function(e,t,i,r){Ie.scissor(e*this.devicePixelRatio,t*this.devicePixelRatio,i*this.devicePixelRatio,r*this.devicePixelRatio)},this.enableScissorTest=function(e){e?Ie.enable(Ie.SCISSOR_TEST):Ie.disable(Ie.SCISSOR_TEST)},this.setClearColor=function(e,t){Ce.set(e),Re=void 0!==t?t:1,Ie.clearColor(Ce.r,Ce.g,Ce.b,Re)},this.setClearColorHex=function(e,t){console.warn("THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return Ce},this.getClearAlpha=function(){return Re},this.clear=function(e,t,i){var r=0;(void 0===e||e)&&(r|=Ie.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Ie.DEPTH_BUFFER_BIT),(void 0===i||i)&&(r|=Ie.STENCIL_BUFFER_BIT),Ie.clear(r)},this.clearColor=function(){Ie.clear(Ie.COLOR_BUFFER_BIT)},this.clearDepth=function(){Ie.clear(Ie.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Ie.clear(Ie.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,i,r){this.setRenderTarget(e),this.clear(t,i,r)},this.resetGLState=function(){Fe=null,Ve=null,qe=-1,Ke=-1,Je=-1,We=-1,Ye=-1,je=-1,Ue=-1,gt=!0};var Bt=function(e){var t=e.target;t.traverse(function(e){e.removeEventListener("remove",Bt),I(e)})},Nt=function(e){var t=e.target;t.removeEventListener("dispose",Nt),Vt(t)},Ft=function(e){var t=e.target;t.removeEventListener("dispose",Ft),Gt(t),Be.info.memory.textures--},zt=function(e){var t=e.target;t.removeEventListener("dispose",zt),Wt(t),Be.info.memory.textures--},Ut=function(e){var t=e.target;t.removeEventListener("dispose",Ut),Yt(t)},jt=function(e){for(var t=["__webglVertexBuffer","__webglNormalBuffer","__webglTangentBuffer","__webglColorBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","__webglLineDistanceBuffer"],i=0,r=t.length;r>i;i++){var n=t[i];void 0!==e[n]&&(Ie.deleteBuffer(e[n]),delete e[n])}if(void 0!==e.__webglCustomAttributesList){for(var n in e.__webglCustomAttributesList)Ie.deleteBuffer(e.__webglCustomAttributesList[n].buffer);delete e.__webglCustomAttributesList}Be.info.memory.geometries--},Vt=function(e){if(delete e.__webglInit,e instanceof THREE.BufferGeometry){for(var t in e.attributes){var i=e.attributes[t];void 0!==i.buffer&&(Ie.deleteBuffer(i.buffer),delete i.buffer)}Be.info.memory.geometries--}else{var r=qt[e.id];if(void 0!==r){for(var n=0,o=r.length;o>n;n++){var a=r[n];if(void 0!==a.numMorphTargets){for(var s=0,l=a.numMorphTargets;l>s;s++)Ie.deleteBuffer(a.__webglMorphTargetsBuffers[s]);delete a.__webglMorphTargetsBuffers}if(void 0!==a.numMorphNormals){for(var s=0,l=a.numMorphNormals;l>s;s++)Ie.deleteBuffer(a.__webglMorphNormalsBuffers[s]);delete a.__webglMorphNormalsBuffers}jt(a)}delete qt[e.id]}else jt(e)}je=-1},Gt=function(e){if(e.image&&e.image.__webglTextureCube)Ie.deleteTexture(e.image.__webglTextureCube),delete e.image.__webglTextureCube;else{if(void 0===e.__webglInit)return;Ie.deleteTexture(e.__webglTexture),delete e.__webglTexture,delete e.__webglInit}},Wt=function(e){if(e&&void 0!==e.__webglTexture){if(Ie.deleteTexture(e.__webglTexture),delete e.__webglTexture,e instanceof THREE.WebGLRenderTargetCube)for(var t=0;6>t;t++)Ie.deleteFramebuffer(e.__webglFramebuffer[t]),Ie.deleteRenderbuffer(e.__webglRenderbuffer[t]);else Ie.deleteFramebuffer(e.__webglFramebuffer),Ie.deleteRenderbuffer(e.__webglRenderbuffer);delete e.__webglFramebuffer,delete e.__webglRenderbuffer}},Yt=function(e){var t=e.program.program;if(void 0!==t){e.program=void 0;var i,r,n,o=!1;for(i=0,r=Ne.length;r>i;i++)if(n=Ne[i],n.program===t){n.usedTimes--,0===n.usedTimes&&(o=!0);break}if(o===!0){var a=[];for(i=0,r=Ne.length;r>i;i++)n=Ne[i],n.program!==t&&a.push(n);Ne=a,Ie.deleteProgram(t),Be.info.memory.programs--}}};this.renderBufferImmediate=function(e,t,i){if(g(),e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=Ie.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=Ie.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=Ie.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=Ie.createBuffer()),e.hasPositions&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglVertexBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,e.positionArray,Ie.DYNAMIC_DRAW),v(t.attributes.position),Ie.vertexAttribPointer(t.attributes.position,3,Ie.FLOAT,!1,0,0)),e.hasNormals){if(Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglNormalBuffer),i.shading===THREE.FlatShading){var r,n,o,a,s,l,h,c,d,u,f,p,m,A,b=3*e.count;for(A=0;b>A;A+=9)m=e.normalArray,a=m[A],h=m[A+1],u=m[A+2],s=m[A+3],c=m[A+4],f=m[A+5],l=m[A+6],d=m[A+7],p=m[A+8],r=(a+s+l)/3,n=(h+c+d)/3,o=(u+f+p)/3,m[A]=r,m[A+1]=n,m[A+2]=o,m[A+3]=r,m[A+4]=n,m[A+5]=o,m[A+6]=r,m[A+7]=n,m[A+8]=o}Ie.bufferData(Ie.ARRAY_BUFFER,e.normalArray,Ie.DYNAMIC_DRAW),v(t.attributes.normal),Ie.vertexAttribPointer(t.attributes.normal,3,Ie.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglUvBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,e.uvArray,Ie.DYNAMIC_DRAW),v(t.attributes.uv),Ie.vertexAttribPointer(t.attributes.uv,2,Ie.FLOAT,!1,0,0)),e.hasColors&&i.vertexColors!==THREE.NoColors&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,e.__webglColorBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,e.colorArray,Ie.DYNAMIC_DRAW),v(t.attributes.color),Ie.vertexAttribPointer(t.attributes.color,3,Ie.FLOAT,!1,0,0)),y(),Ie.drawArrays(Ie.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,r,n,o){if(r.visible!==!1){var a=F(e,t,i,r,o),s=!1,l=r.wireframe?1:0,h=16777215*n.id+2*a.id+l;if(h!==je&&(je=h,s=!0),s&&g(),o instanceof THREE.Mesh){var c=r.wireframe===!0?Ie.LINES:Ie.TRIANGLES,d=n.attributes.index;if(d){var u,f;d.array instanceof Uint32Array&&bt.get("OES_element_index_uint")?(u=Ie.UNSIGNED_INT,f=4):(u=Ie.UNSIGNED_SHORT,f=2);var p=n.offsets;if(0===p.length)s&&(m(r,a,n,0),Ie.bindBuffer(Ie.ELEMENT_ARRAY_BUFFER,d.buffer)),Ie.drawElements(c,d.array.length,u,0),Be.info.render.calls++,Be.info.render.vertices+=d.array.length,Be.info.render.faces+=d.array.length/3;else{s=!0;for(var v=0,y=p.length;y>v;v++){var A=p[v].index;s&&(m(r,a,n,A),Ie.bindBuffer(Ie.ELEMENT_ARRAY_BUFFER,d.buffer)),Ie.drawElements(c,p[v].count,u,p[v].start*f),Be.info.render.calls++,Be.info.render.vertices+=p[v].count,Be.info.render.faces+=p[v].count/3}}}else{s&&m(r,a,n,0);var b=n.attributes.position;Ie.drawArrays(c,0,b.array.length/3),Be.info.render.calls++,Be.info.render.vertices+=b.array.length/3,Be.info.render.faces+=b.array.length/9}}else if(o instanceof THREE.PointCloud){s&&m(r,a,n,0);var b=n.attributes.position;Ie.drawArrays(Ie.POINTS,0,b.array.length/3),Be.info.render.calls++,Be.info.render.points+=b.array.length/3}else if(o instanceof THREE.Line){var c=o.mode===THREE.LineStrip?Ie.LINE_STRIP:Ie.LINES;re(r.linewidth);var d=n.attributes.index;if(d){var u,f;d.array instanceof Uint32Array?(u=Ie.UNSIGNED_INT,f=4):(u=Ie.UNSIGNED_SHORT,f=2);var p=n.offsets;if(0===p.length)s&&(m(r,a,n,0),Ie.bindBuffer(Ie.ELEMENT_ARRAY_BUFFER,d.buffer)),Ie.drawElements(c,d.array.length,u,0),Be.info.render.calls++,Be.info.render.vertices+=d.array.length;else{p.length>1&&(s=!0);for(var v=0,y=p.length;y>v;v++){var A=p[v].index;s&&(m(r,a,n,A),Ie.bindBuffer(Ie.ELEMENT_ARRAY_BUFFER,d.buffer)),Ie.drawElements(c,p[v].count,u,p[v].start*f),Be.info.render.calls++,Be.info.render.vertices+=p[v].count}}}else{s&&m(r,a,n,0);var b=n.attributes.position;Ie.drawArrays(c,0,b.array.length/3),Be.info.render.calls++,Be.info.render.points+=b.array.length/3}}}},this.renderBuffer=function(e,t,i,r,n,o){if(r.visible!==!1){var a=F(e,t,i,r,o),s=a.attributes,l=!1,h=r.wireframe?1:0,c=16777215*n.id+2*a.id+h;if(c!==je&&(je=c,l=!0),l&&g(),!r.morphTargets&&s.position>=0?l&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,n.__webglVertexBuffer),v(s.position),Ie.vertexAttribPointer(s.position,3,Ie.FLOAT,!1,0,0)):o.morphTargetBase&&A(r,n,o),l){if(n.__webglCustomAttributesList)for(var d=0,u=n.__webglCustomAttributesList.length;u>d;d++){var f=n.__webglCustomAttributesList[d];s[f.buffer.belongsToAttribute]>=0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,f.buffer),v(s[f.buffer.belongsToAttribute]),Ie.vertexAttribPointer(s[f.buffer.belongsToAttribute],f.size,Ie.FLOAT,!1,0,0))}s.color>=0&&(o.geometry.colors.length>0||o.geometry.faces.length>0?(Ie.bindBuffer(Ie.ARRAY_BUFFER,n.__webglColorBuffer),v(s.color),Ie.vertexAttribPointer(s.color,3,Ie.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Ie.vertexAttrib3fv(s.color,r.defaultAttributeValues.color)),s.normal>=0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,n.__webglNormalBuffer),v(s.normal),Ie.vertexAttribPointer(s.normal,3,Ie.FLOAT,!1,0,0)),s.tangent>=0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,n.__webglTangentBuffer),v(s.tangent),Ie.vertexAttribPointer(s.tangent,4,Ie.FLOAT,!1,0,0)),s.uv>=0&&(o.geometry.faceVertexUvs[0]?(Ie.bindBuffer(Ie.ARRAY_BUFFER,n.__webglUVBuffer),v(s.uv),Ie.vertexAttribPointer(s.uv,2,Ie.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Ie.vertexAttrib2fv(s.uv,r.defaultAttributeValues.uv)),s.uv2>=0&&(o.geometry.faceVertexUvs[1]?(Ie.bindBuffer(Ie.ARRAY_BUFFER,n.__webglUV2Buffer),v(s.uv2),Ie.vertexAttribPointer(s.uv2,2,Ie.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Ie.vertexAttrib2fv(s.uv2,r.defaultAttributeValues.uv2)),r.skinning&&s.skinIndex>=0&&s.skinWeight>=0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,n.__webglSkinIndicesBuffer),v(s.skinIndex),
Ie.vertexAttribPointer(s.skinIndex,4,Ie.FLOAT,!1,0,0),Ie.bindBuffer(Ie.ARRAY_BUFFER,n.__webglSkinWeightsBuffer),v(s.skinWeight),Ie.vertexAttribPointer(s.skinWeight,4,Ie.FLOAT,!1,0,0)),s.lineDistance>=0&&(Ie.bindBuffer(Ie.ARRAY_BUFFER,n.__webglLineDistanceBuffer),v(s.lineDistance),Ie.vertexAttribPointer(s.lineDistance,1,Ie.FLOAT,!1,0,0))}if(y(),o instanceof THREE.Mesh){var p=n.__typeArray===Uint32Array?Ie.UNSIGNED_INT:Ie.UNSIGNED_SHORT;r.wireframe?(re(r.wireframeLinewidth),l&&Ie.bindBuffer(Ie.ELEMENT_ARRAY_BUFFER,n.__webglLineBuffer),Ie.drawElements(Ie.LINES,n.__webglLineCount,p,0)):(l&&Ie.bindBuffer(Ie.ELEMENT_ARRAY_BUFFER,n.__webglFaceBuffer),Ie.drawElements(Ie.TRIANGLES,n.__webglFaceCount,p,0)),Be.info.render.calls++,Be.info.render.vertices+=n.__webglFaceCount,Be.info.render.faces+=n.__webglFaceCount/3}else if(o instanceof THREE.Line){var m=o.mode===THREE.LineStrip?Ie.LINE_STRIP:Ie.LINES;re(r.linewidth),Ie.drawArrays(m,0,n.__webglLineCount),Be.info.render.calls++}else o instanceof THREE.PointCloud&&(Ie.drawArrays(Ie.POINTS,0,n.__webglParticleCount),Be.info.render.calls++,Be.info.render.points+=n.__webglParticleCount)}},this.render=function(e,t,i,r){if(t instanceof THREE.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var n=e.fog;je=-1,Ue=-1,Ve=null,gt=!0,e.autoUpdate===!0&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),e.traverse(function(e){e instanceof THREE.SkinnedMesh&&e.skeleton.update()}),t.matrixWorldInverse.getInverse(t.matrixWorld),ut.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),dt.setFromMatrix(ut),ke.length=0,De.length=0,He.length=0,Oe.length=0,Le.length=0,w(e,e),Be.sortObjects===!0&&(De.sort(b),He.sort(E)),Ot.render(e,t),Be.info.render.calls=0,Be.info.render.vertices=0,Be.info.render.faces=0,Be.info.render.points=0,this.setRenderTarget(i),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);for(var o=0,a=Pe.length;a>o;o++){var s=Pe[o],l=s.object;l.visible&&($(l,t),S(s))}if(e.overrideMaterial){var h=e.overrideMaterial;this.setBlending(h.blending,h.blendEquation,h.blendSrc,h.blendDst),this.setDepthTest(h.depthTest),this.setDepthWrite(h.depthWrite),ne(h.polygonOffset,h.polygonOffsetFactor,h.polygonOffsetUnits),T(De,t,ke,n,!0,h),T(He,t,ke,n,!0,h),_(Pe,"",t,ke,n,!1,h)}else{var h=null;this.setBlending(THREE.NoBlending),T(De,t,ke,n,!1,h),_(Pe,"opaque",t,ke,n,!1,h),T(He,t,ke,n,!0,h),_(Pe,"transparent",t,ke,n,!0,h)}Lt.render(e,t),It.render(e,t,st,lt),i&&i.generateMipmaps&&i.minFilter!==THREE.NearestFilter&&i.minFilter!==THREE.LinearFilter&&de(i),this.setDepthTest(!0),this.setDepthWrite(!0)},this.renderImmediateObject=function(e,t,i,r,n){var o=F(e,t,i,r,n);je=-1,Be.setMaterialFaces(r),n.immediateRenderCallback?n.immediateRenderCallback(o,Ie,dt):n.render(function(e){Be.renderBufferImmediate(e,o,r)})};var qt={},Xt=0;this.setFaceCulling=function(e,t){e===THREE.CullFaceNone?Ie.disable(Ie.CULL_FACE):(t===THREE.FrontFaceDirectionCW?Ie.frontFace(Ie.CW):Ie.frontFace(Ie.CCW),e===THREE.CullFaceBack?Ie.cullFace(Ie.BACK):e===THREE.CullFaceFront?Ie.cullFace(Ie.FRONT):Ie.cullFace(Ie.FRONT_AND_BACK),Ie.enable(Ie.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===THREE.DoubleSide,i=e.side===THREE.BackSide;We!==t&&(t?Ie.disable(Ie.CULL_FACE):Ie.enable(Ie.CULL_FACE),We=t),Ye!==i&&(i?Ie.frontFace(Ie.CW):Ie.frontFace(Ie.CCW),Ye=i)},this.setDepthTest=function(e){Ke!==e&&(e?Ie.enable(Ie.DEPTH_TEST):Ie.disable(Ie.DEPTH_TEST),Ke=e)},this.setDepthWrite=function(e){Je!==e&&(Ie.depthMask(e),Je=e)},this.setBlending=function(e,t,i,r){e!==qe&&(e===THREE.NoBlending?Ie.disable(Ie.BLEND):e===THREE.AdditiveBlending?(Ie.enable(Ie.BLEND),Ie.blendEquation(Ie.FUNC_ADD),Ie.blendFunc(Ie.SRC_ALPHA,Ie.ONE)):e===THREE.SubtractiveBlending?(Ie.enable(Ie.BLEND),Ie.blendEquation(Ie.FUNC_ADD),Ie.blendFunc(Ie.ZERO,Ie.ONE_MINUS_SRC_COLOR)):e===THREE.MultiplyBlending?(Ie.enable(Ie.BLEND),Ie.blendEquation(Ie.FUNC_ADD),Ie.blendFunc(Ie.ZERO,Ie.SRC_COLOR)):e===THREE.CustomBlending?Ie.enable(Ie.BLEND):(Ie.enable(Ie.BLEND),Ie.blendEquationSeparate(Ie.FUNC_ADD,Ie.FUNC_ADD),Ie.blendFuncSeparate(Ie.SRC_ALPHA,Ie.ONE_MINUS_SRC_ALPHA,Ie.ONE,Ie.ONE_MINUS_SRC_ALPHA)),qe=e),e===THREE.CustomBlending?(t!==Xe&&(Ie.blendEquation(fe(t)),Xe=t),i===Qe&&r===Ze||(Ie.blendFunc(fe(i),fe(r)),Qe=i,Ze=r)):(Xe=null,Qe=null,Ze=null)},this.uploadTexture=function(e){void 0===e.__webglInit&&(e.__webglInit=!0,e.addEventListener("dispose",Ft),e.__webglTexture=Ie.createTexture(),Be.info.memory.textures++),Ie.bindTexture(Ie.TEXTURE_2D,e.__webglTexture),Ie.pixelStorei(Ie.UNPACK_FLIP_Y_WEBGL,e.flipY),Ie.pixelStorei(Ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Ie.pixelStorei(Ie.UNPACK_ALIGNMENT,e.unpackAlignment),e.image=ae(e.image,wt);var t=e.image,i=THREE.Math.isPowerOfTwo(t.width)&&THREE.Math.isPowerOfTwo(t.height),r=fe(e.format),n=fe(e.type);oe(Ie.TEXTURE_2D,e,i);var o,a=e.mipmaps;if(e instanceof THREE.DataTexture)if(a.length>0&&i){for(var s=0,l=a.length;l>s;s++)o=a[s],Ie.texImage2D(Ie.TEXTURE_2D,s,r,o.width,o.height,0,r,n,o.data);e.generateMipmaps=!1}else Ie.texImage2D(Ie.TEXTURE_2D,0,r,t.width,t.height,0,r,n,t.data);else if(e instanceof THREE.CompressedTexture)for(var s=0,l=a.length;l>s;s++)o=a[s],e.format!==THREE.RGBAFormat&&e.format!==THREE.RGBFormat?Pt().indexOf(r)>-1?Ie.compressedTexImage2D(Ie.TEXTURE_2D,s,r,o.width,o.height,0,o.data):console.warn("Attempt to load unsupported compressed texture format"):Ie.texImage2D(Ie.TEXTURE_2D,s,r,o.width,o.height,0,r,n,o.data);else if(a.length>0&&i){for(var s=0,l=a.length;l>s;s++)o=a[s],Ie.texImage2D(Ie.TEXTURE_2D,s,r,r,n,o);e.generateMipmaps=!1}else Ie.texImage2D(Ie.TEXTURE_2D,0,r,r,n,e.image);e.generateMipmaps&&i&&Ie.generateMipmap(Ie.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()},this.setTexture=function(e,t){Ie.activeTexture(Ie.TEXTURE0+t),e.needsUpdate?Be.uploadTexture(e):Ie.bindTexture(Ie.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof THREE.WebGLRenderTargetCube;if(e&&void 0===e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",zt),e.__webglTexture=Ie.createTexture(),Be.info.memory.textures++;var i=THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height),r=fe(e.format),n=fe(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Ie.bindTexture(Ie.TEXTURE_CUBE_MAP,e.__webglTexture),oe(Ie.TEXTURE_CUBE_MAP,e,i);for(var o=0;6>o;o++)e.__webglFramebuffer[o]=Ie.createFramebuffer(),e.__webglRenderbuffer[o]=Ie.createRenderbuffer(),Ie.texImage2D(Ie.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,r,e.width,e.height,0,r,n,null),he(e.__webglFramebuffer[o],e,Ie.TEXTURE_CUBE_MAP_POSITIVE_X+o),ce(e.__webglRenderbuffer[o],e);i&&Ie.generateMipmap(Ie.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Ie.createFramebuffer(),e.shareDepthFrom?e.__webglRenderbuffer=e.shareDepthFrom.__webglRenderbuffer:e.__webglRenderbuffer=Ie.createRenderbuffer(),Ie.bindTexture(Ie.TEXTURE_2D,e.__webglTexture),oe(Ie.TEXTURE_2D,e,i),Ie.texImage2D(Ie.TEXTURE_2D,0,r,e.width,e.height,0,r,n,null),he(e.__webglFramebuffer,e,Ie.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Ie.framebufferRenderbuffer(Ie.FRAMEBUFFER,Ie.DEPTH_ATTACHMENT,Ie.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Ie.framebufferRenderbuffer(Ie.FRAMEBUFFER,Ie.DEPTH_STENCIL_ATTACHMENT,Ie.RENDERBUFFER,e.__webglRenderbuffer):ce(e.__webglRenderbuffer,e),i&&Ie.generateMipmap(Ie.TEXTURE_2D);t?Ie.bindTexture(Ie.TEXTURE_CUBE_MAP,null):Ie.bindTexture(Ie.TEXTURE_2D,null),Ie.bindRenderbuffer(Ie.RENDERBUFFER,null),Ie.bindFramebuffer(Ie.FRAMEBUFFER,null)}var a,s,l,h,c;e?(a=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,s=e.width,l=e.height,h=0,c=0):(a=null,s=ot,l=at,h=rt,c=nt),a!==ze&&(Ie.bindFramebuffer(Ie.FRAMEBUFFER,a),Ie.viewport(h,c,s,l),ze=a),st=s,lt=l},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},THREE.WebGLRenderTarget=function(e,t,i){this.width=e,this.height=t,i=i||{},this.wrapS=void 0!==i.wrapS?i.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==i.wrapT?i.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==i.magFilter?i.magFilter:THREE.LinearFilter,this.minFilter=void 0!==i.minFilter?i.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==i.format?i.format:THREE.RGBAFormat,this.type=void 0!==i.type?i.type:THREE.UnsignedByteType,this.depthBuffer=void 0!==i.depthBuffer?i.depthBuffer:!0,this.stencilBuffer=void 0!==i.stencilBuffer?i.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(e,t){this.width=e,this.height=t},clone:function(){var e=new THREE.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(e,t,i){THREE.WebGLRenderTarget.call(this,e,t,i),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.WebGLExtensions=function(e){var t={};this.get=function(i){if(void 0!==t[i])return t[i];var r;switch(i){case"OES_texture_float":r=e.getExtension("OES_texture_float");break;case"OES_texture_float_linear":r=e.getExtension("OES_texture_float_linear");break;case"OES_standard_derivatives":r=e.getExtension("OES_standard_derivatives");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"OES_element_index_uint":r=e.getExtension("OES_element_index_uint");break;case"EXT_blend_minmax":r=e.getExtension("EXT_blend_minmax");break;case"EXT_frag_depth":r=e.getExtension("EXT_frag_depth")}return null===r&&console.log("THREE.WebGLRenderer: "+i+" extension not supported."),t[i]=r,r}},THREE.WebGLProgram=function(){var e=0,t=function(e){var t,i,r=[];for(var n in e)t=e[n],t!==!1&&(i="#define "+n+" "+t,r.push(i));return r.join("\n")},i=function(e,t,i){for(var r={},n=0,o=i.length;o>n;n++){var a=i[n];r[a]=e.getUniformLocation(t,a)}return r},r=function(e,t,i){for(var r={},n=0,o=i.length;o>n;n++){var a=i[n];r[a]=e.getAttribLocation(t,a)}return r};return function(n,o,a,s){var l=n,h=l.context,c=a.defines,d=a.__webglShader.uniforms,u=a.attributes,f=a.__webglShader.vertexShader,p=a.__webglShader.fragmentShader,m=a.index0AttributeName;void 0===m&&s.morphTargets===!0&&(m="position");var g="SHADOWMAP_TYPE_BASIC";s.shadowMapType===THREE.PCFShadowMap?g="SHADOWMAP_TYPE_PCF":s.shadowMapType===THREE.PCFSoftShadowMap&&(g="SHADOWMAP_TYPE_PCF_SOFT");var v,y,A=t(c),b=h.createProgram();a instanceof THREE.RawShaderMaterial?(v="",y=""):(v=["precision "+s.precision+" float;","precision "+s.precision+" int;",A,s.supportsVertexTextures?"#define VERTEX_TEXTURES":"",l.gammaInput?"#define GAMMA_INPUT":"",l.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+s.maxDirLights,"#define MAX_POINT_LIGHTS "+s.maxPointLights,"#define MAX_SPOT_LIGHTS "+s.maxSpotLights,"#define MAX_HEMI_LIGHTS "+s.maxHemiLights,"#define MAX_SHADOWS "+s.maxShadows,"#define MAX_BONES "+s.maxBones,s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.lightMap?"#define USE_LIGHTMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexColors?"#define USE_COLOR":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals?"#define USE_MORPHNORMALS":"",s.wrapAround?"#define WRAP_AROUND":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+g:"",s.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",s.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",""].join("\n"),y=["precision "+s.precision+" float;","precision "+s.precision+" int;",s.bumpMap||s.normalMap?"#extension GL_OES_standard_derivatives : enable":"",A,"#define MAX_DIR_LIGHTS "+s.maxDirLights,"#define MAX_POINT_LIGHTS "+s.maxPointLights,"#define MAX_SPOT_LIGHTS "+s.maxSpotLights,"#define MAX_HEMI_LIGHTS "+s.maxHemiLights,"#define MAX_SHADOWS "+s.maxShadows,s.alphaTest?"#define ALPHATEST "+s.alphaTest:"",l.gammaInput?"#define GAMMA_INPUT":"",l.gammaOutput?"#define GAMMA_OUTPUT":"",s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.lightMap?"#define USE_LIGHTMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexColors?"#define USE_COLOR":"",s.metal?"#define METAL":"",s.wrapAround?"#define WRAP_AROUND":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+g:"",s.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",s.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"));var E=new THREE.WebGLShader(h,h.VERTEX_SHADER,v+f),x=new THREE.WebGLShader(h,h.FRAGMENT_SHADER,y+p);h.attachShader(b,E),h.attachShader(b,x),void 0!==m&&h.bindAttribLocation(b,0,m),h.linkProgram(b),h.getProgramParameter(b,h.LINK_STATUS)===!1&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",h.getProgramParameter(b,h.VALIDATE_STATUS)),console.error("gl.getError()",h.getError())),""!==h.getProgramInfoLog(b)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",h.getProgramInfoLog(b)),h.deleteShader(E),h.deleteShader(x);var w=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences","bindMatrix","bindMatrixInverse"];s.useVertexTexture?(w.push("boneTexture"),w.push("boneTextureWidth"),w.push("boneTextureHeight")):w.push("boneGlobalMatrices"),s.logarithmicDepthBuffer&&w.push("logDepthBufFC");for(var T in d)w.push(T);this.uniforms=i(h,b,w),w=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(var _=0;_<s.maxMorphTargets;_++)w.push("morphTarget"+_);for(var _=0;_<s.maxMorphNormals;_++)w.push("morphNormal"+_);for(var S in u)w.push(S);return this.attributes=r(h,b,w),this.attributesKeys=Object.keys(this.attributes),this.id=e++,this.code=o,this.usedTimes=1,this.program=b,this.vertexShader=E,this.fragmentShader=x,this}}(),THREE.WebGLShader=function(){var e=function(e){for(var t=e.split("\n"),i=0;i<t.length;i++)t[i]=i+1+": "+t[i];return t.join("\n")};return function(t,i,r){var n=t.createShader(i);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(n)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t.getShaderInfoLog(n)),console.warn(e(r))),n}}(),THREE.LensFlarePlugin=function(e,t){function i(t){var i=d.createProgram(),r=d.createShader(d.FRAGMENT_SHADER),n=d.createShader(d.VERTEX_SHADER),o="precision "+e.getPrecision()+" float;\n";return d.shaderSource(r,o+t.fragmentShader),d.shaderSource(n,o+t.vertexShader),d.compileShader(r),d.compileShader(n),d.attachShader(i,r),d.attachShader(i,n),d.linkProgram(i),i}var r,n,o,a,s,l,h,c,d=e.context,u=function(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);r=d.createBuffer(),n=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,r),d.bufferData(d.ARRAY_BUFFER,e,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,n),d.bufferData(d.ELEMENT_ARRAY_BUFFER,t,d.STATIC_DRAW),h=d.createTexture(),c=d.createTexture(),d.bindTexture(d.TEXTURE_2D,h),d.texImage2D(d.TEXTURE_2D,0,d.RGB,16,16,0,d.RGB,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.bindTexture(d.TEXTURE_2D,c),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,16,16,0,d.RGBA,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),l=d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;var u;u=l?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},o=i(u),a={vertex:d.getAttribLocation(o,"position"),uv:d.getAttribLocation(o,"uv")},s={renderType:d.getUniformLocation(o,"renderType"),map:d.getUniformLocation(o,"map"),occlusionMap:d.getUniformLocation(o,"occlusionMap"),opacity:d.getUniformLocation(o,"opacity"),color:d.getUniformLocation(o,"color"),scale:d.getUniformLocation(o,"scale"),rotation:d.getUniformLocation(o,"rotation"),screenPosition:d.getUniformLocation(o,"screenPosition")}};this.render=function(i,f,p,m){if(0!==t.length){var g=new THREE.Vector3,v=m/p,y=.5*p,A=.5*m,b=16/m,E=new THREE.Vector2(b*v,b),x=new THREE.Vector3(1,1,0),w=new THREE.Vector2(1,1);void 0===o&&u(),d.useProgram(o),d.enableVertexAttribArray(a.vertex),d.enableVertexAttribArray(a.uv),d.uniform1i(s.occlusionMap,0),d.uniform1i(s.map,1),d.bindBuffer(d.ARRAY_BUFFER,r),d.vertexAttribPointer(a.vertex,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(a.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,n),d.disable(d.CULL_FACE),d.depthMask(!1);for(var T=0,_=t.length;_>T;T++){b=16/m,E.set(b*v,b);var S=t[T];if(g.set(S.matrixWorld.elements[12],S.matrixWorld.elements[13],S.matrixWorld.elements[14]),g.applyMatrix4(f.matrixWorldInverse),g.applyProjection(f.projectionMatrix),x.copy(g),w.x=x.x*y+y,w.y=x.y*A+A,l||w.x>0&&w.x<p&&w.y>0&&w.y<m){d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,h),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGB,w.x-8,w.y-8,16,16,0),d.uniform1i(s.renderType,0),d.uniform2f(s.scale,E.x,E.y),d.uniform3f(s.screenPosition,x.x,x.y,x.z),d.disable(d.BLEND),d.enable(d.DEPTH_TEST),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,c),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,w.x-8,w.y-8,16,16,0),d.uniform1i(s.renderType,1),d.disable(d.DEPTH_TEST),d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,h),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),S.positionScreen.copy(x),S.customUpdateCallback?S.customUpdateCallback(S):S.updateLensFlares(),d.uniform1i(s.renderType,2),d.enable(d.BLEND);for(var C=0,R=S.lensFlares.length;R>C;C++){var k=S.lensFlares[C];k.opacity>.001&&k.scale>.001&&(x.x=k.x,x.y=k.y,x.z=k.z,b=k.size*k.scale/m,E.x=b*v,E.y=b,d.uniform3f(s.screenPosition,x.x,x.y,x.z),d.uniform2f(s.scale,E.x,E.y),d.uniform1f(s.rotation,k.rotation),d.uniform1f(s.opacity,k.opacity),d.uniform3f(s.color,k.color.r,k.color.g,k.color.b),e.setBlending(k.blending,k.blendEquation,k.blendSrc,k.blendDst),e.setTexture(k.texture,1),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0))}}}d.enable(d.CULL_FACE),d.enable(d.DEPTH_TEST),d.depthMask(!0),e.resetGLState()}}},THREE.ShadowMapPlugin=function(e,t,i,r){function n(e,t,r){if(t.visible){var o=i[t.id];if(o&&t.castShadow&&(t.frustumCulled===!1||p.intersectsObject(t)===!0))for(var a=0,s=o.length;s>a;a++){var l=o[a];t._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),A.push(l)}for(var a=0,s=t.children.length;s>a;a++)n(e,t.children[a],r)}}function o(e,t){var i=new THREE.DirectionalLight;i.isVirtual=!0,i.onlyShadow=!0,i.castShadow=!0,i.shadowCameraNear=e.shadowCameraNear,i.shadowCameraFar=e.shadowCameraFar,i.shadowCameraLeft=e.shadowCameraLeft,i.shadowCameraRight=e.shadowCameraRight,i.shadowCameraBottom=e.shadowCameraBottom,i.shadowCameraTop=e.shadowCameraTop,i.shadowCameraVisible=e.shadowCameraVisible,i.shadowDarkness=e.shadowDarkness,i.shadowBias=e.shadowCascadeBias[t],i.shadowMapWidth=e.shadowCascadeWidth[t],i.shadowMapHeight=e.shadowCascadeHeight[t],i.pointsWorld=[],i.pointsFrustum=[];for(var r=i.pointsWorld,n=i.pointsFrustum,o=0;8>o;o++)r[o]=new THREE.Vector3,n[o]=new THREE.Vector3;var a=e.shadowCascadeNearZ[t],s=e.shadowCascadeFarZ[t];return n[0].set(-1,-1,a),n[1].set(1,-1,a),n[2].set(-1,1,a),n[3].set(1,1,a),n[4].set(-1,-1,s),n[5].set(1,-1,s),n[6].set(-1,1,s),n[7].set(1,1,s),i}function a(e,t){var i=e.shadowCascadeArray[t];i.position.copy(e.position),i.target.position.copy(e.target.position),i.lookAt(i.target),i.shadowCameraVisible=e.shadowCameraVisible,i.shadowDarkness=e.shadowDarkness,i.shadowBias=e.shadowCascadeBias[t];var r=e.shadowCascadeNearZ[t],n=e.shadowCascadeFarZ[t],o=i.pointsFrustum;o[0].z=r,o[1].z=r,o[2].z=r,o[3].z=r,o[4].z=n,o[5].z=n,o[6].z=n,o[7].z=n}function s(e,t){var i=t.shadowCamera,r=t.pointsFrustum,n=t.pointsWorld;g.set(1/0,1/0,1/0),v.set(-(1/0),-(1/0),-(1/0));for(var o=0;8>o;o++){var a=n[o];a.copy(r[o]),a.unproject(e),a.applyMatrix4(i.matrixWorldInverse),a.x<g.x&&(g.x=a.x),a.x>v.x&&(v.x=a.x),a.y<g.y&&(g.y=a.y),a.y>v.y&&(v.y=a.y),a.z<g.z&&(g.z=a.z),a.z>v.z&&(v.z=a.z)}i.left=g.x,i.right=v.x,i.top=v.y,i.bottom=g.y,i.updateProjectionMatrix()}function l(e){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[0]:e.material}var h,c,d,u,f=e.context,p=new THREE.Frustum,m=new THREE.Matrix4,g=new THREE.Vector3,v=new THREE.Vector3,y=new THREE.Vector3,A=[],b=THREE.ShaderLib.depthRGBA,E=THREE.UniformsUtils.clone(b.uniforms);h=new THREE.ShaderMaterial({uniforms:E,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader}),c=new THREE.ShaderMaterial({uniforms:E,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,morphTargets:!0}),d=new THREE.ShaderMaterial({uniforms:E,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,skinning:!0}),u=new THREE.ShaderMaterial({uniforms:E,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,morphTargets:!0,skinning:!0}),h._shadowPass=!0,c._shadowPass=!0,d._shadowPass=!0,u._shadowPass=!0,this.render=function(i,g){if(e.shadowMapEnabled!==!1){var v,b,E,x,w,T,_,S,C,R,k,M,P,D=[],H=0,O=null;for(f.clearColor(1,1,1,1),f.disable(f.BLEND),f.enable(f.CULL_FACE),f.frontFace(f.CCW),e.shadowMapCullFace===THREE.CullFaceFront?f.cullFace(f.FRONT):f.cullFace(f.BACK),e.setDepthTest(!0),v=0,b=t.length;b>v;v++)if(P=t[v],P.castShadow)if(P instanceof THREE.DirectionalLight&&P.shadowCascade)for(w=0;w<P.shadowCascadeCount;w++){var L;if(P.shadowCascadeArray[w])L=P.shadowCascadeArray[w];else{L=o(P,w),L.originalCamera=g;var I=new THREE.Gyroscope;I.position.copy(P.shadowCascadeOffset),I.add(L),I.add(L.target),g.add(I),P.shadowCascadeArray[w]=L,console.log("Created virtualLight",L)}a(P,w),D[H]=L,H++}else D[H]=P,H++;for(v=0,b=D.length;b>v;v++){if(P=D[v],!P.shadowMap){var B=THREE.LinearFilter;e.shadowMapType===THREE.PCFSoftShadowMap&&(B=THREE.NearestFilter);var N={minFilter:B,magFilter:B,format:THREE.RGBAFormat};P.shadowMap=new THREE.WebGLRenderTarget(P.shadowMapWidth,P.shadowMapHeight,N),P.shadowMapSize=new THREE.Vector2(P.shadowMapWidth,P.shadowMapHeight),P.shadowMatrix=new THREE.Matrix4}if(!P.shadowCamera){if(P instanceof THREE.SpotLight)P.shadowCamera=new THREE.PerspectiveCamera(P.shadowCameraFov,P.shadowMapWidth/P.shadowMapHeight,P.shadowCameraNear,P.shadowCameraFar);else{if(!(P instanceof THREE.DirectionalLight)){console.error("Unsupported light type for shadow");continue}P.shadowCamera=new THREE.OrthographicCamera(P.shadowCameraLeft,P.shadowCameraRight,P.shadowCameraTop,P.shadowCameraBottom,P.shadowCameraNear,P.shadowCameraFar)}i.add(P.shadowCamera),i.autoUpdate===!0&&i.updateMatrixWorld()}P.shadowCameraVisible&&!P.cameraHelper&&(P.cameraHelper=new THREE.CameraHelper(P.shadowCamera),i.add(P.cameraHelper)),P.isVirtual&&L.originalCamera==g&&s(g,P),T=P.shadowMap,_=P.shadowMatrix,S=P.shadowCamera,S.position.setFromMatrixPosition(P.matrixWorld),y.setFromMatrixPosition(P.target.matrixWorld),S.lookAt(y),S.updateMatrixWorld(),S.matrixWorldInverse.getInverse(S.matrixWorld),P.cameraHelper&&(P.cameraHelper.visible=P.shadowCameraVisible),P.shadowCameraVisible&&P.cameraHelper.update(),_.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),_.multiply(S.projectionMatrix),_.multiply(S.matrixWorldInverse),m.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse),p.setFromMatrix(m),e.setRenderTarget(T),e.clear(),A.length=0,n(i,i,S);var F,z,U;for(E=0,x=A.length;x>E;E++)k=A[E],M=k.object,C=k.buffer,F=l(M),z=void 0!==M.geometry.morphTargets&&M.geometry.morphTargets.length>0&&F.morphTargets,U=M instanceof THREE.SkinnedMesh&&F.skinning,R=M.customDepthMaterial?M.customDepthMaterial:U?z?u:d:z?c:h,e.setMaterialFaces(F),C instanceof THREE.BufferGeometry?e.renderBufferDirect(S,t,O,R,C,M):e.renderBuffer(S,t,O,R,C,M);for(E=0,x=r.length;x>E;E++)k=r[E],M=k.object,M.visible&&M.castShadow&&(M._modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,M.matrixWorld),e.renderImmediateObject(S,t,O,h,M))}var j=e.getClearColor(),V=e.getClearAlpha();f.clearColor(j.r,j.g,j.b,V),f.enable(f.BLEND),e.shadowMapCullFace===THREE.CullFaceFront&&f.cullFace(f.BACK),e.resetGLState()}}},THREE.SpritePlugin=function(e,t){function i(){var t=c.createProgram(),i=c.createShader(c.VERTEX_SHADER),r=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(i,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),c.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),
c.compileShader(i),c.compileShader(r),c.attachShader(t,i),c.attachShader(t,r),c.linkProgram(t),t}function r(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var n,o,a,s,l,h,c=e.context,d=function(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);n=c.createBuffer(),o=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,n),c.bufferData(c.ARRAY_BUFFER,e,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),c.bufferData(c.ELEMENT_ARRAY_BUFFER,t,c.STATIC_DRAW),a=i(),s={position:c.getAttribLocation(a,"position"),uv:c.getAttribLocation(a,"uv")},l={uvOffset:c.getUniformLocation(a,"uvOffset"),uvScale:c.getUniformLocation(a,"uvScale"),rotation:c.getUniformLocation(a,"rotation"),scale:c.getUniformLocation(a,"scale"),color:c.getUniformLocation(a,"color"),map:c.getUniformLocation(a,"map"),opacity:c.getUniformLocation(a,"opacity"),modelViewMatrix:c.getUniformLocation(a,"modelViewMatrix"),projectionMatrix:c.getUniformLocation(a,"projectionMatrix"),fogType:c.getUniformLocation(a,"fogType"),fogDensity:c.getUniformLocation(a,"fogDensity"),fogNear:c.getUniformLocation(a,"fogNear"),fogFar:c.getUniformLocation(a,"fogFar"),fogColor:c.getUniformLocation(a,"fogColor"),alphaTest:c.getUniformLocation(a,"alphaTest")};var r=document.createElement("canvas");r.width=8,r.height=8;var d=r.getContext("2d");d.fillStyle="white",d.fillRect(0,0,8,8),h=new THREE.Texture(r),h.needsUpdate=!0};this.render=function(i,u){if(0!==t.length){void 0===a&&d(),c.useProgram(a),c.enableVertexAttribArray(s.position),c.enableVertexAttribArray(s.uv),c.disable(c.CULL_FACE),c.enable(c.BLEND),c.bindBuffer(c.ARRAY_BUFFER,n),c.vertexAttribPointer(s.position,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(s.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),c.uniformMatrix4fv(l.projectionMatrix,!1,u.projectionMatrix.elements),c.activeTexture(c.TEXTURE0),c.uniform1i(l.map,0);var f=0,p=0,m=i.fog;m?(c.uniform3f(l.fogColor,m.color.r,m.color.g,m.color.b),m instanceof THREE.Fog?(c.uniform1f(l.fogNear,m.near),c.uniform1f(l.fogFar,m.far),c.uniform1i(l.fogType,1),f=1,p=1):m instanceof THREE.FogExp2&&(c.uniform1f(l.fogDensity,m.density),c.uniform1i(l.fogType,2),f=2,p=2)):(c.uniform1i(l.fogType,0),f=0,p=0);for(var g=0,v=t.length;v>g;g++){var y=t[g];y._modelViewMatrix.multiplyMatrices(u.matrixWorldInverse,y.matrixWorld),null===y.renderDepth?y.z=-y._modelViewMatrix.elements[14]:y.z=y.renderDepth}t.sort(r);for(var A=[],g=0,v=t.length;v>g;g++){var y=t[g],b=y.material;c.uniform1f(l.alphaTest,b.alphaTest),c.uniformMatrix4fv(l.modelViewMatrix,!1,y._modelViewMatrix.elements),A[0]=y.scale.x,A[1]=y.scale.y;var E=0;i.fog&&b.fog&&(E=p),f!==E&&(c.uniform1i(l.fogType,E),f=E),null!==b.map?(c.uniform2f(l.uvOffset,b.map.offset.x,b.map.offset.y),c.uniform2f(l.uvScale,b.map.repeat.x,b.map.repeat.y)):(c.uniform2f(l.uvOffset,0,0),c.uniform2f(l.uvScale,1,1)),c.uniform1f(l.opacity,b.opacity),c.uniform3f(l.color,b.color.r,b.color.g,b.color.b),c.uniform1f(l.rotation,b.rotation),c.uniform2fv(l.scale,A),e.setBlending(b.blending,b.blendEquation,b.blendSrc,b.blendDst),e.setDepthTest(b.depthTest),e.setDepthWrite(b.depthWrite),b.map&&b.map.image&&b.map.image.width?e.setTexture(b.map,0):e.setTexture(h,0),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)}c.enable(c.CULL_FACE),e.resetGLState()}}},THREE.GeometryUtils={merge:function(e,t,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,i)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,i,r){var n=new THREE.ImageLoader;n.crossOrigin=this.crossOrigin;var o=new THREE.Texture(void 0,t);return n.load(e,function(e){o.image=e,o.needsUpdate=!0,i&&i(o)},void 0,function(e){r&&r(e)}),o.sourceFile=e,o},loadTextureCube:function(e,t,i,r){var n=[],o=new THREE.ImageLoader;o.crossOrigin=this.crossOrigin;var a=new THREE.CubeTexture(n,t);a.flipY=!1;for(var s=0,l=function(t){o.load(e[t],function(e){a.images[t]=e,s+=1,6===s&&(a.needsUpdate=!0,i&&i(a))})},h=0,c=e.length;c>h;++h)l(h);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(e,t){var i=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},r=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},n=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t=1|t;var o=e.width,a=e.height,s=document.createElement("canvas");s.width=o,s.height=a;var l=s.getContext("2d");l.drawImage(e,0,0);for(var h=l.getImageData(0,0,o,a).data,c=l.createImageData(o,a),d=c.data,u=0;o>u;u++)for(var f=0;a>f;f++){var p=0>f-1?0:f-1,m=f+1>a-1?a-1:f+1,g=0>u-1?0:u-1,v=u+1>o-1?o-1:u+1,y=[],A=[0,0,h[4*(f*o+u)]/255*t];y.push([-1,0,h[4*(f*o+g)]/255*t]),y.push([-1,-1,h[4*(p*o+g)]/255*t]),y.push([0,-1,h[4*(p*o+u)]/255*t]),y.push([1,-1,h[4*(p*o+v)]/255*t]),y.push([1,0,h[4*(f*o+v)]/255*t]),y.push([1,1,h[4*(m*o+v)]/255*t]),y.push([0,1,h[4*(m*o+u)]/255*t]),y.push([-1,1,h[4*(m*o+g)]/255*t]);for(var b=[],E=y.length,x=0;E>x;x++){var w=y[x],T=y[(x+1)%E];w=r(w,A),T=r(T,A),b.push(n(i(w,T)))}for(var _=[0,0,0],x=0;x<b.length;x++)_[0]+=b[x][0],_[1]+=b[x][1],_[2]+=b[x][2];_[0]/=b.length,_[1]/=b.length,_[2]/=b.length;var S=4*(f*o+u);d[S]=(_[0]+1)/2*255|0,d[S+1]=(_[1]+1)/2*255|0,d[S+2]=255*_[2]|0,d[S+3]=255}return l.putImageData(c,0,0),s},generateDataTexture:function(e,t,i){for(var r=e*t,n=new Uint8Array(3*r),o=Math.floor(255*i.r),a=Math.floor(255*i.g),s=Math.floor(255*i.b),l=0;r>l;l++)n[3*l]=o,n[3*l+1]=a,n[3*l+2]=s;var h=new THREE.DataTexture(n,e,t,THREE.RGBFormat);return h.needsUpdate=!0,h}},THREE.SceneUtils={createMultiMaterialObject:function(e,t){for(var i=new THREE.Object3D,r=0,n=t.length;n>r;r++)i.add(new THREE.Mesh(e,t[r]));return i},detach:function(e,t,i){e.applyMatrix(t.matrixWorld),t.remove(e),i.add(e)},attach:function(e,t,i){var r=new THREE.Matrix4;r.getInverse(i.matrixWorld),e.applyMatrix(r),t.remove(e),i.add(e)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase(),i=this;i.faces[t]=i.faces[t]||{},i.faces[t][e.cssFontWeight]=i.faces[t][e.cssFontWeight]||{},i.faces[t][e.cssFontWeight][e.cssFontStyle]=e;i.faces[t][e.cssFontWeight][e.cssFontStyle]=e;return e},drawText:function(e){var t,i=this.getFace(),r=this.size/i.resolution,n=0,o=String(e).split(""),a=o.length,s=[];for(t=0;a>t;t++){var l=new THREE.Path,h=this.extractGlyphPoints(o[t],i,r,n,l);n+=h.offset,s.push(h.path)}var c=n/2;return{paths:s,offset:c}},extractGlyphPoints:function(e,t,i,r,n){var o,a,s,l,h,c,d,u,f,p,m,g,v,y,A,b,E,x,w,T=[],_=t.glyphs[e]||t.glyphs["?"];if(_){if(_.o)for(l=_._cachedOutline||(_._cachedOutline=_.o.split(" ")),c=l.length,d=i,u=i,o=0;c>o;)switch(h=l[o++]){case"m":f=l[o++]*d+r,p=l[o++]*u,n.moveTo(f,p);break;case"l":f=l[o++]*d+r,p=l[o++]*u,n.lineTo(f,p);break;case"q":if(m=l[o++]*d+r,g=l[o++]*u,A=l[o++]*d+r,b=l[o++]*u,n.quadraticCurveTo(A,b,m,g),w=T[T.length-1])for(v=w.x,y=w.y,a=1,s=this.divisions;s>=a;a++){var S=a/s;THREE.Shape.Utils.b2(S,v,A,m),THREE.Shape.Utils.b2(S,y,b,g)}break;case"b":if(m=l[o++]*d+r,g=l[o++]*u,A=l[o++]*d+r,b=l[o++]*u,E=l[o++]*d+r,x=l[o++]*u,n.bezierCurveTo(A,b,E,x,m,g),w=T[T.length-1])for(v=w.x,y=w.y,a=1,s=this.divisions;s>=a;a++){var S=a/s;THREE.Shape.Utils.b3(S,v,A,E,m),THREE.Shape.Utils.b3(S,y,b,x,g)}}return{offset:_.ha*i,path:n}}}},THREE.FontUtils.generateShapes=function(e,t){t=t||{};var i=void 0!==t.size?t.size:100,r=void 0!==t.curveSegments?t.curveSegments:4,n=void 0!==t.font?t.font:"helvetiker",o=void 0!==t.weight?t.weight:"normal",a=void 0!==t.style?t.style:"normal";THREE.FontUtils.size=i,THREE.FontUtils.divisions=r,THREE.FontUtils.face=n,THREE.FontUtils.weight=o,THREE.FontUtils.style=a;for(var s=THREE.FontUtils.drawText(e),l=s.paths,h=[],c=0,d=l.length;d>c;c++)Array.prototype.push.apply(h,l[c].toShapes());return h},function(e){var t=1e-10,i=function(e,t){var i=e.length;if(3>i)return null;var o,a,s,l=[],h=[],c=[];if(r(e)>0)for(a=0;i>a;a++)h[a]=a;else for(a=0;i>a;a++)h[a]=i-1-a;var d=i,u=2*d;for(a=d-1;d>2;){if(u--<=0)return console.log("Warning, unable to triangulate polygon!"),t?c:l;if(o=a,o>=d&&(o=0),a=o+1,a>=d&&(a=0),s=a+1,s>=d&&(s=0),n(e,o,a,s,d,h)){var f,p,m,g,v;for(f=h[o],p=h[a],m=h[s],l.push([e[f],e[p],e[m]]),c.push([h[o],h[a],h[s]]),g=a,v=a+1;d>v;g++,v++)h[g]=h[v];d--,u=2*d}}return t?c:l},r=function(e){for(var t=e.length,i=0,r=t-1,n=0;t>n;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return.5*i},n=function(e,i,r,n,o,a){var s,l,h,c,d,u,f,p,m;if(l=e[a[i]].x,h=e[a[i]].y,c=e[a[r]].x,d=e[a[r]].y,u=e[a[n]].x,f=e[a[n]].y,t>(c-l)*(f-h)-(d-h)*(u-l))return!1;var g,v,y,A,b,E,x,w,T,_,S,C,R,k,M;for(g=u-c,v=f-d,y=l-u,A=h-f,b=c-l,E=d-h,s=0;o>s;s++)if(p=e[a[s]].x,m=e[a[s]].y,!(p===l&&m===h||p===c&&m===d||p===u&&m===f)&&(x=p-l,w=m-h,T=p-c,_=m-d,S=p-u,C=m-f,M=g*_-v*T,R=b*w-E*x,k=y*C-A*S,M>=-t&&k>=-t&&R>=-t))return!1;return!0};return e.Triangulate=i,e.Triangulate.area=r,e}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Audio=function(e){THREE.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},THREE.Audio.prototype=Object.create(THREE.Object3D.prototype),THREE.Audio.prototype.load=function(e){var t=this,i=new XMLHttpRequest;return i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(e){t.context.decodeAudioData(this.response,function(e){t.source.buffer=e,t.source.connect(t.panner),t.source.start(0)})},i.send(),this},THREE.Audio.prototype.setLoop=function(e){this.source.loop=e},THREE.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e},THREE.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},THREE.Audio.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3;return function(t){THREE.Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}(),THREE.AudioListener=function(){THREE.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype),THREE.AudioListener.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3,t=new THREE.Quaternion,i=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Vector3,o=new THREE.Vector3;return function(a){THREE.Object3D.prototype.updateMatrixWorld.call(this,a);var s=this.context.listener;this.matrixWorld.decompose(e,t,i),r.set(0,0,-1).applyQuaternion(t),n.subVectors(e,o),s.setPosition(e.x,e.y,e.z),s.setOrientation(r.x,r.y,r.z,this.up.x,this.up.y,this.up.z),s.setVelocity(n.x,n.y,n.z),o.copy(e)}}(),THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(e){return console.log("Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},THREE.Curve.prototype.getPoints=function(e){e||(e=5);var t,i=[];for(t=0;e>=t;t++)i.push(this.getPoint(t/e));return i},THREE.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,i=[];for(t=0;e>=t;t++)i.push(this.getPointAt(t/e));return i},THREE.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},THREE.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i,r=[],n=this.getPoint(0),o=0;for(r.push(0),i=1;e>=i;i++)t=this.getPoint(i/e),o+=t.distanceTo(n),r.push(o),n=t;return this.cacheArcLengths=r,r},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(e,t){var i,r=this.getLengths(),n=0,o=r.length;i=t?t:e*r[o-1];for(var a,s=0,l=o-1;l>=s;)if(n=Math.floor(s+(l-s)/2),a=r[n]-i,0>a)s=n+1;else{if(!(a>0)){l=n;break}l=n-1}if(n=l,r[n]==i){var h=n/(o-1);return h}var c=r[n],d=r[n+1],u=d-c,f=(i-c)/u,h=(n+f)/(o-1);return h},THREE.Curve.prototype.getTangent=function(e){var t=1e-4,i=e-t,r=e+t;0>i&&(i=0),r>1&&(r=1);var n=this.getPoint(i),o=this.getPoint(r),a=o.clone().sub(n);return a.normalize()},THREE.Curve.prototype.getTangentAt=function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},THREE.Curve.Utils={tangentQuadraticBezier:function(e,t,i,r){return 2*(1-e)*(i-t)+2*e*(r-i)},tangentCubicBezier:function(e,t,i,r,n){return-3*t*(1-e)*(1-e)+3*i*(1-e)*(1-e)-6*e*i*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*n},tangentSpline:function(e,t,i,r,n){var o=6*e*e-6*e,a=3*e*e-4*e+1,s=-6*e*e+6*e,l=3*e*e-2*e;return o+a+s+l},interpolate:function(e,t,i,r,n){var o=.5*(i-e),a=.5*(r-t),s=n*n,l=n*s;return(2*t-2*i+o+a)*l+(-3*t+3*i-2*o-a)*s+o*n+t}},THREE.Curve.create=function(e,t){return e.prototype=Object.create(THREE.Curve.prototype),e.prototype.getPoint=t,e},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.add=function(e){this.curves.push(e)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new THREE.LineCurve(t,e))},THREE.CurvePath.prototype.getPoint=function(e){for(var t,i,r=e*this.getLength(),n=this.getCurveLengths(),o=0;o<n.length;){if(n[o]>=r){t=n[o]-r,i=this.curves[o];var a=1-t/i.getLength();return i.getPointAt(a)}o++}return null},THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],i=0,r=this.curves.length;for(e=0;r>e;e++)i+=this.curves[e].getLength(),t.push(i);return this.cacheLengths=t,t},THREE.CurvePath.prototype.getBoundingBox=function(){var e,t,i,r,n,o,a=this.getPoints();e=t=Number.NEGATIVE_INFINITY,r=n=Number.POSITIVE_INFINITY;var s,l,h,c,d=a[0]instanceof THREE.Vector3;for(c=d?new THREE.Vector3:new THREE.Vector2,l=0,h=a.length;h>l;l++)s=a[l],s.x>e?e=s.x:s.x<r&&(r=s.x),s.y>t?t=s.y:s.y<n&&(n=s.y),d&&(s.z>i?i=s.z:s.z<o&&(o=s.z)),c.add(s);var u={minX:r,minY:n,maxX:e,maxY:t};return d&&(u.maxZ=i,u.minZ=o),u},THREE.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createGeometry=function(e){for(var t=new THREE.Geometry,i=0;i<e.length;i++)t.vertices.push(new THREE.Vector3(e[i].x,e[i].y,e[i].z||0));return t},THREE.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},THREE.CurvePath.prototype.getTransformedPoints=function(e,t){var i,r,n=this.getPoints(e);for(t||(t=this.bends),i=0,r=t.length;r>i;i++)n=this.getWrapPoints(n,t[i]);return n},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var i,r,n=this.getSpacedPoints(e);for(t||(t=this.bends),i=0,r=t.length;r>i;i++)n=this.getWrapPoints(n,t[i]);return n},THREE.CurvePath.prototype.getWrapPoints=function(e,t){var i,r,n,o,a,s,l=this.getBoundingBox();for(i=0,r=e.length;r>i;i++){n=e[i],o=n.x,a=n.y,s=o/l.maxX,s=t.getUtoTmapping(s,o);var h=t.getPoint(s),c=t.getTangent(s);c.set(-c.y,c.x).multiplyScalar(a),n.x=h.x+c.x,n.y=h.y+c.y}return e},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3,t=new THREE.Quaternion,i=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Quaternion,o=new THREE.Vector3;return function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(r,n,o),this.matrix.decompose(e,t,i),this.matrixWorld.compose(r,t,o)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var s=0,l=this.children.length;l>s;s++)this.children[s].updateMatrixWorld(a)}}(),THREE.Path=function(e){THREE.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;i>t;t++)this.lineTo(e[t].x,e[t].y)},THREE.Path.prototype.moveTo=function(e,t){var i=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:i})},THREE.Path.prototype.lineTo=function(e,t){var i=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,n=r[r.length-2],o=r[r.length-1],a=new THREE.LineCurve(new THREE.Vector2(n,o),new THREE.Vector2(e,t));this.curves.push(a),this.actions.push({action:THREE.PathActions.LINE_TO,args:i})},THREE.Path.prototype.quadraticCurveTo=function(e,t,i,r){var n=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,a=o[o.length-2],s=o[o.length-1],l=new THREE.QuadraticBezierCurve(new THREE.Vector2(a,s),new THREE.Vector2(e,t),new THREE.Vector2(i,r));this.curves.push(l),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:n})},THREE.Path.prototype.bezierCurveTo=function(e,t,i,r,n,o){var a=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,l=s[s.length-2],h=s[s.length-1],c=new THREE.CubicBezierCurve(new THREE.Vector2(l,h),new THREE.Vector2(e,t),new THREE.Vector2(i,r),new THREE.Vector2(n,o));this.curves.push(c),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:a})},THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,r=i[i.length-2],n=i[i.length-1],o=[new THREE.Vector2(r,n)];Array.prototype.push.apply(o,e);var a=new THREE.SplineCurve(o);this.curves.push(a),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:t})},THREE.Path.prototype.arc=function(e,t,i,r,n,o){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],l=a[a.length-1];this.absarc(e+s,t+l,i,r,n,o)},THREE.Path.prototype.absarc=function(e,t,i,r,n,o){this.absellipse(e,t,i,i,r,n,o)},THREE.Path.prototype.ellipse=function(e,t,i,r,n,o,a){var s=this.actions[this.actions.length-1].args,l=s[s.length-2],h=s[s.length-1];this.absellipse(e+l,t+h,i,r,n,o,a)},THREE.Path.prototype.absellipse=function(e,t,i,r,n,o,a){var s=Array.prototype.slice.call(arguments),l=new THREE.EllipseCurve(e,t,i,r,n,o,a);this.curves.push(l);var h=l.getPoint(1);s.push(h.x),s.push(h.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:s})},THREE.Path.prototype.getSpacedPoints=function(e,t){e||(e=40);for(var i=[],r=0;e>r;r++)i.push(this.getPoint(r/e));return i},THREE.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var i,r,n,o,a,s,l,h,c,d,u,f,p,m,g,v,y,A,b=[];for(i=0,r=this.actions.length;r>i;i++)switch(n=this.actions[i],o=n.action,a=n.args,o){case THREE.PathActions.MOVE_TO:b.push(new THREE.Vector2(a[0],a[1]));break;case THREE.PathActions.LINE_TO:b.push(new THREE.Vector2(a[0],a[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(s=a[2],l=a[3],d=a[0],u=a[1],b.length>0?(m=b[b.length-1],f=m.x,p=m.y):(m=this.actions[i-1].args,f=m[m.length-2],p=m[m.length-1]),g=1;e>=g;g++)v=g/e,y=THREE.Shape.Utils.b2(v,f,d,s),A=THREE.Shape.Utils.b2(v,p,u,l),b.push(new THREE.Vector2(y,A));break;case THREE.PathActions.BEZIER_CURVE_TO:for(s=a[4],l=a[5],d=a[0],u=a[1],h=a[2],c=a[3],b.length>0?(m=b[b.length-1],f=m.x,p=m.y):(m=this.actions[i-1].args,f=m[m.length-2],p=m[m.length-1]),g=1;e>=g;g++)v=g/e,y=THREE.Shape.Utils.b3(v,f,d,h,s),A=THREE.Shape.Utils.b3(v,p,u,c,l),b.push(new THREE.Vector2(y,A));break;case THREE.PathActions.CSPLINE_THRU:m=this.actions[i-1].args;var E=new THREE.Vector2(m[m.length-2],m[m.length-1]),x=[E],w=e*a[0].length;x=x.concat(a[0]);var T=new THREE.SplineCurve(x);for(g=1;w>=g;g++)b.push(T.getPointAt(g/w));break;case THREE.PathActions.ARC:var _,S=a[0],C=a[1],R=a[2],k=a[3],M=a[4],P=!!a[5],D=M-k,H=2*e;for(g=1;H>=g;g++)v=g/H,P||(v=1-v),_=k+v*D,y=S+R*Math.cos(_),A=C+R*Math.sin(_),b.push(new THREE.Vector2(y,A));break;case THREE.PathActions.ELLIPSE:var _,S=a[0],C=a[1],O=a[2],L=a[3],k=a[4],M=a[5],P=!!a[6],D=M-k,H=2*e;for(g=1;H>=g;g++)v=g/H,P||(v=1-v),_=k+v*D,y=S+O*Math.cos(_),A=C+L*Math.sin(_),b.push(new THREE.Vector2(y,A))}var I=b[b.length-1],B=1e-10;return Math.abs(I.x-b[0].x)<B&&Math.abs(I.y-b[0].y)<B&&b.splice(b.length-1,1),t&&b.push(b[0]),b},THREE.Path.prototype.toShapes=function(e,t){function i(e){var t,i,r,n,o,a=[],s=new THREE.Path;for(t=0,i=e.length;i>t;t++)r=e[t],o=r.args,n=r.action,n==THREE.PathActions.MOVE_TO&&0!=s.actions.length&&(a.push(s),s=new THREE.Path),s[n].apply(s,o);return 0!=s.actions.length&&a.push(s),a}function r(e){for(var t=[],i=0,r=e.length;r>i;i++){var n=e[i],o=new THREE.Shape;o.actions=n.actions,o.curves=n.curves,t.push(o)}return t}function n(e,t){for(var i=1e-10,r=t.length,n=!1,o=r-1,a=0;r>a;o=a++){var s=t[o],l=t[a],h=l.x-s.x,c=l.y-s.y;if(Math.abs(c)>i){if(0>c&&(s=t[a],h=-h,l=t[o],c=-c),e.y<s.y||e.y>l.y)continue;if(e.y==s.y){if(e.x==s.x)return!0}else{var d=c*(e.x-s.x)-h*(e.y-s.y);if(0==d)return!0;if(0>d)continue;n=!n}}else{if(e.y!=s.y)continue;if(l.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=l.x)return!0}}return n}var o=i(this.actions);if(0==o.length)return[];if(t===!0)return r(o);var a,s,l,h=[];if(1==o.length)return s=o[0],l=new THREE.Shape,l.actions=s.actions,l.curves=s.curves,h.push(l),h;var c=!THREE.Shape.Utils.isClockWise(o[0].getPoints());c=e?!c:c;var d,u=[],f=[],p=[],m=0;f[m]=void 0,p[m]=[];var g,v;for(g=0,v=o.length;v>g;g++)s=o[g],d=s.getPoints(),a=THREE.Shape.Utils.isClockWise(d),a=e?!a:a,a?(!c&&f[m]&&m++,f[m]={s:new THREE.Shape,p:d},f[m].s.actions=s.actions,f[m].s.curves=s.curves,c&&m++,p[m]=[]):p[m].push({h:s,p:d[0]});if(!f[0])return r(o);if(f.length>1){for(var y=!1,A=[],b=0,E=f.length;E>b;b++)u[b]=[];for(var b=0,E=f.length;E>b;b++)for(var x=(f[b],p[b]),w=0;w<x.length;w++){for(var T=x[w],_=!0,S=0;S<f.length;S++)n(T.p,f[S].p)&&(b!=S&&A.push({froms:b,tos:S,hole:w}),_?(_=!1,u[S].push(T)):y=!0);_&&u[b].push(T)}A.length>0&&(y||(p=u))}var C,R,k;for(g=0,v=f.length;v>g;g++)for(l=f[g].s,h.push(l),C=p[g],R=0,k=C.length;k>R;R++)l.holes.push(C[R].h);return h},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.extrude=function(e){var t=new THREE.ExtrudeGeometry(this,e);return t},THREE.Shape.prototype.makeGeometry=function(e){var t=new THREE.ShapeGeometry(this,e);return t},THREE.Shape.prototype.getPointsHoles=function(e){var t,i=this.holes.length,r=[];for(t=0;i>t;t++)r[t]=this.holes[t].getTransformedPoints(e,this.bends);return r},THREE.Shape.prototype.getSpacedPointsHoles=function(e){var t,i=this.holes.length,r=[];for(t=0;i>t;t++)r[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return r},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},THREE.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},THREE.Shape.Utils={triangulateShape:function(e,t){function i(e,t,i){return e.x!=t.x?e.x<t.x?e.x<=i.x&&i.x<=t.x:t.x<=i.x&&i.x<=e.x:e.y<t.y?e.y<=i.y&&i.y<=t.y:t.y<=i.y&&i.y<=e.y}function r(e,t,r,n,o){var a=1e-10,s=t.x-e.x,l=t.y-e.y,h=n.x-r.x,c=n.y-r.y,d=e.x-r.x,u=e.y-r.y,f=l*h-s*c,p=l*d-s*u;if(Math.abs(f)>a){var m;if(f>0){if(0>p||p>f)return[];if(m=c*d-h*u,0>m||m>f)return[]}else{if(p>0||f>p)return[];if(m=c*d-h*u,m>0||f>m)return[]}if(0==m)return!o||0!=p&&p!=f?[e]:[];if(m==f)return!o||0!=p&&p!=f?[t]:[];if(0==p)return[r];if(p==f)return[n];var g=m/f;return[{x:e.x+g*s,y:e.y+g*l}]}if(0!=p||c*d!=h*u)return[];var v=0==s&&0==l,y=0==h&&0==c;if(v&&y)return e.x!=r.x||e.y!=r.y?[]:[e];if(v)return i(r,n,e)?[e]:[];if(y)return i(e,t,r)?[r]:[];var A,b,E,x,w,T,_,S;return 0!=s?(e.x<t.x?(A=e,E=e.x,b=t,x=t.x):(A=t,E=t.x,b=e,x=e.x),r.x<n.x?(w=r,_=r.x,T=n,S=n.x):(w=n,_=n.x,T=r,S=r.x)):(e.y<t.y?(A=e,E=e.y,b=t,x=t.y):(A=t,E=t.y,b=e,x=e.y),r.y<n.y?(w=r,_=r.y,T=n,S=n.y):(w=n,_=n.y,T=r,S=r.y)),_>=E?_>x?[]:x==_?o?[]:[w]:S>=x?[w,b]:[w,T]:E>S?[]:E==S?o?[]:[A]:S>=x?[A,b]:[A,T]}function n(e,t,i,r){var n=1e-10,o=t.x-e.x,a=t.y-e.y,s=i.x-e.x,l=i.y-e.y,h=r.x-e.x,c=r.y-e.y,d=o*l-a*s,u=o*c-a*h;if(Math.abs(d)>n){var f=h*l-c*s;return d>0?u>=0&&f>=0:u>=0||f>=0}return u>0}function o(e,t){function i(e,t){var i=y.length-1,r=e-1;0>r&&(r=i);var o=e+1;o>i&&(o=0);var a=n(y[e],y[r],y[o],s[t]);if(!a)return!1;var l=s.length-1,h=t-1;0>h&&(h=l);var c=t+1;return c>l&&(c=0),a=n(s[t],s[h],s[c],y[e]),!!a}function o(e,t){var i,n,o;for(i=0;i<y.length;i++)if(n=i+1,n%=y.length,o=r(e,t,y[i],y[n],!0),o.length>0)return!0;return!1}function a(e,i){var n,o,a,s,l;for(n=0;n<A.length;n++)for(o=t[A[n]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,l=r(e,i,o[a],o[s],!0),l.length>0)return!0;return!1}for(var s,l,h,c,d,u,f,p,m,g,v,y=e.concat(),A=[],b=[],E=0,x=t.length;x>E;E++)A.push(E);for(var w=0,T=2*A.length;A.length>0;){if(T--,0>T){console.log("Infinite Loop! Holes left:"+A.length+", Probably Hole outside Shape!");break}for(h=w;h<y.length;h++){c=y[h],l=-1;for(var E=0;E<A.length;E++)if(u=A[E],f=c.x+":"+c.y+":"+u,void 0===b[f]){s=t[u];for(var _=0;_<s.length;_++)if(d=s[_],i(h,_)&&!o(c,d)&&!a(c,d)){l=_,A.splice(E,1),p=y.slice(0,h+1),m=y.slice(h),g=s.slice(l),v=s.slice(0,l+1),y=p.concat(g).concat(v).concat(m),w=h;break}if(l>=0)break;b[f]=!0}if(l>=0)break}}return y}for(var a,s,l,h,c,d,u={},f=e.concat(),p=0,m=t.length;m>p;p++)Array.prototype.push.apply(f,t[p]);for(a=0,s=f.length;s>a;a++)c=f[a].x+":"+f[a].y,void 0!==u[c]&&console.log("Duplicate point",c),u[c]=a;var g=o(e,t),v=THREE.FontUtils.Triangulate(g,!1);for(a=0,s=v.length;s>a;a++)for(h=v[a],l=0;3>l;l++)c=h[l].x+":"+h[l].y,d=u[c],void 0!==d&&(h[l]=d);return v.concat()},isClockWise:function(e){return THREE.FontUtils.Triangulate.area(e)<0},b2p0:function(e,t){var i=1-e;return i*i*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,i,r){return this.b2p0(e,t)+this.b2p1(e,i)+this.b2p2(e,r)},b3p0:function(e,t){var i=1-e;return i*i*i*t},b3p1:function(e,t){var i=1-e;return 3*i*i*e*t},b3p2:function(e,t){var i=1-e;return 3*i*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,i,r,n){return this.b3p0(e,t)+this.b3p1(e,i)+this.b3p2(e,r)+this.b3p3(e,n)}},THREE.LineCurve=function(e,t){this.v1=e,this.v2=t},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},THREE.LineCurve.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()},THREE.QuadraticBezierCurve=function(e,t,i){this.v0=e,this.v1=t,this.v2=i},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t=new THREE.Vector2;return t.x=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t},THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t=new THREE.Vector2;return t.x=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y),t.normalize()},THREE.CubicBezierCurve=function(e,t,i,r){this.v0=e,this.v1=t,this.v2=i,this.v3=r},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.getPoint=function(e){var t,i;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(t,i)},THREE.CubicBezierCurve.prototype.getTangent=function(e){var t,i;t=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var r=new THREE.Vector2(t,i);return r.normalize(),r},THREE.SplineCurve=function(e){this.points=void 0==e?[]:e},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.getPoint=function(e){var t=this.points,i=(t.length-1)*e,r=Math.floor(i),n=i-r,o=t[0==r?r:r-1],a=t[r],s=t[r>t.length-2?t.length-1:r+1],l=t[r>t.length-3?t.length-1:r+2],h=new THREE.Vector2;return h.x=THREE.Curve.Utils.interpolate(o.x,a.x,s.x,l.x,n),h.y=THREE.Curve.Utils.interpolate(o.y,a.y,s.y,l.y,n),h},THREE.EllipseCurve=function(e,t,i,r,n,o,a){this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=o,this.aClockwise=a},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle;0>t&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI);var i;i=this.aClockwise===!0?this.aEndAngle+(1-e)*(2*Math.PI-t):this.aStartAngle+e*t;var r=new THREE.Vector2;return r.x=this.aX+this.xRadius*Math.cos(i),r.y=this.aY+this.yRadius*Math.sin(i),r},THREE.ArcCurve=function(e,t,i,r,n,o){THREE.EllipseCurve.call(this,e,t,i,i,r,n,o)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new THREE.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,i){this.v0=e,this.v1=t,this.v2=i},function(e){var t=new THREE.Vector3;return t.x=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t.z=THREE.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),t}),THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,i,r){this.v0=e,this.v1=t,this.v2=i,this.v3=r},function(e){var t=new THREE.Vector3;return t.x=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t.y=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t.z=THREE.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),t}),THREE.SplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points,i=(t.length-1)*e,r=Math.floor(i),n=i-r,o=t[0==r?r:r-1],a=t[r],s=t[r>t.length-2?t.length-1:r+1],l=t[r>t.length-3?t.length-1:r+2],h=new THREE.Vector3;return h.x=THREE.Curve.Utils.interpolate(o.x,a.x,s.x,l.x,n),h.y=THREE.Curve.Utils.interpolate(o.y,a.y,s.y,l.y,n),h.z=THREE.Curve.Utils.interpolate(o.z,a.z,s.z,l.z,n),h}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points,i=(t.length-0)*e,r=Math.floor(i),n=i-r;r+=r>0?0:(Math.floor(Math.abs(r)/t.length)+1)*t.length;var o=t[(r-1)%t.length],a=t[r%t.length],s=t[(r+1)%t.length],l=t[(r+2)%t.length],h=new THREE.Vector3;
return h.x=THREE.Curve.Utils.interpolate(o.x,a.x,s.x,l.x,n),h.y=THREE.Curve.Utils.interpolate(o.y,a.y,s.y,l.y,n),h.z=THREE.Curve.Utils.interpolate(o.z,a.z,s.z,l.z,n),h}),THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(e){if(e.initialized!==!0){for(var t=0;t<e.hierarchy.length;t++){for(var i=0;i<e.hierarchy[t].keys.length;i++)if(e.hierarchy[t].keys[i].time<0&&(e.hierarchy[t].keys[i].time=0),void 0!==e.hierarchy[t].keys[i].rot&&!(e.hierarchy[t].keys[i].rot instanceof THREE.Quaternion)){var r=e.hierarchy[t].keys[i].rot;e.hierarchy[t].keys[i].rot=(new THREE.Quaternion).fromArray(r)}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){for(var n={},i=0;i<e.hierarchy[t].keys.length;i++)for(var o=0;o<e.hierarchy[t].keys[i].morphTargets.length;o++){var a=e.hierarchy[t].keys[i].morphTargets[o];n[a]=-1}e.hierarchy[t].usedMorphTargets=n;for(var i=0;i<e.hierarchy[t].keys.length;i++){var s={};for(var a in n){for(var o=0;o<e.hierarchy[t].keys[i].morphTargets.length;o++)if(e.hierarchy[t].keys[i].morphTargets[o]===a){s[a]=e.hierarchy[t].keys[i].morphTargetsInfluences[o];break}o===e.hierarchy[t].keys[i].morphTargets.length&&(s[a]=0)}e.hierarchy[t].keys[i].morphTargetsInfluences=s}}for(var i=1;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].time===e.hierarchy[t].keys[i-1].time&&(e.hierarchy[t].keys.splice(i,1),i--);for(var i=0;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].index=i}return e.initialized=!0,e}},parse:function(e){var t=function(e,i){i.push(e);for(var r=0;r<e.children.length;r++)t(e.children[r],i)},i=[];if(e instanceof THREE.SkinnedMesh)for(var r=0;r<e.skeleton.bones.length;r++)i.push(e.skeleton.bones[r]);else t(e,i);return i},play:function(e){-1===this.animations.indexOf(e)&&this.animations.push(e)},stop:function(e){var t=this.animations.indexOf(e);-1!==t&&this.animations.splice(t,1)},update:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].resetBlendWeights();for(var t=0;t<this.animations.length;t++)this.animations[t].update(e)}},THREE.Animation=function(e,t){this.root=e,this.data=THREE.AnimationHandler.init(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=THREE.AnimationHandler.LINEAR},THREE.Animation.prototype.keyTypes=["pos","rot","scl"],THREE.Animation.prototype.play=function(e,t){this.currentTime=void 0!==e?e:0,this.weight=void 0!==t?t:1,this.isPlaying=!0,this.reset(),THREE.AnimationHandler.play(this)},THREE.Animation.prototype.stop=function(){this.isPlaying=!1,THREE.AnimationHandler.stop(this)},THREE.Animation.prototype.reset=function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var i=this.hierarchy[e];i.matrixAutoUpdate=!0,void 0===i.animationCache&&(i.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}}),void 0===i.animationCache.animations[this.data.name]&&(i.animationCache.animations[this.data.name]={},i.animationCache.animations[this.data.name].prevKey={pos:0,rot:0,scl:0},i.animationCache.animations[this.data.name].nextKey={pos:0,rot:0,scl:0},i.animationCache.animations[this.data.name].originalMatrix=i.matrix);for(var r=i.animationCache.animations[this.data.name],n=0;3>n;n++){for(var o=this.keyTypes[n],a=this.data.hierarchy[e].keys[0],s=this.getNextKeyWith(o,e,1);s.time<this.currentTime&&s.index>a.index;)a=s,s=this.getNextKeyWith(o,e,s.index+1);r.prevKey[o]=a,r.nextKey[o]=s}}},THREE.Animation.prototype.resetBlendWeights=function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var i=this.hierarchy[e];void 0!==i.animationCache&&(i.animationCache.blending.positionWeight=0,i.animationCache.blending.quaternionWeight=0,i.animationCache.blending.scaleWeight=0)}},THREE.Animation.prototype.update=function(){var e=[],t=new THREE.Vector3,i=new THREE.Vector3,r=new THREE.Quaternion,n=function(e,t){var i,r,n,a,s,l,h,c,d,u=[],f=[];return i=(e.length-1)*t,r=Math.floor(i),n=i-r,u[0]=0===r?r:r-1,u[1]=r,u[2]=r>e.length-2?r:r+1,u[3]=r>e.length-3?r:r+2,l=e[u[0]],h=e[u[1]],c=e[u[2]],d=e[u[3]],a=n*n,s=n*a,f[0]=o(l[0],h[0],c[0],d[0],n,a,s),f[1]=o(l[1],h[1],c[1],d[1],n,a,s),f[2]=o(l[2],h[2],c[2],d[2],n,a,s),f},o=function(e,t,i,r,n,o,a){var s=.5*(i-e),l=.5*(r-t);return(2*(t-i)+s+l)*a+(-3*(t-i)-2*s-l)*o+s*n+t};return function(o){if(this.isPlaying!==!1&&(this.currentTime+=o*this.timeScale,0!==this.weight)){var a=this.data.length;if(this.currentTime>a||this.currentTime<0){if(!this.loop)return void this.stop();this.currentTime%=a,this.currentTime<0&&(this.currentTime+=a),this.reset()}for(var s=0,l=this.hierarchy.length;l>s;s++)for(var h=this.hierarchy[s],c=h.animationCache.animations[this.data.name],d=h.animationCache.blending,u=0;3>u;u++){var f=this.keyTypes[u],p=c.prevKey[f],m=c.nextKey[f];if(this.timeScale>0&&m.time<=this.currentTime||this.timeScale<0&&p.time>=this.currentTime){for(p=this.data.hierarchy[s].keys[0],m=this.getNextKeyWith(f,s,1);m.time<this.currentTime&&m.index>p.index;)p=m,m=this.getNextKeyWith(f,s,m.index+1);c.prevKey[f]=p,c.nextKey[f]=m}h.matrixAutoUpdate=!0,h.matrixWorldNeedsUpdate=!0;var g=(this.currentTime-p.time)/(m.time-p.time),v=p[f],y=m[f];if(0>g&&(g=0),g>1&&(g=1),"pos"===f){if(this.interpolationType===THREE.AnimationHandler.LINEAR){i.x=v[0]+(y[0]-v[0])*g,i.y=v[1]+(y[1]-v[1])*g,i.z=v[2]+(y[2]-v[2])*g;var A=this.weight/(this.weight+d.positionWeight);h.position.lerp(i,A),d.positionWeight+=this.weight}else if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){e[0]=this.getPrevKeyWith("pos",s,p.index-1).pos,e[1]=v,e[2]=y,e[3]=this.getNextKeyWith("pos",s,m.index+1).pos,g=.33*g+.33;var b=n(e,g),A=this.weight/(this.weight+d.positionWeight);d.positionWeight+=this.weight;var E=h.position;if(E.x=E.x+(b[0]-E.x)*A,E.y=E.y+(b[1]-E.y)*A,E.z=E.z+(b[2]-E.z)*A,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){var x=n(e,1.01*g);t.set(x[0],x[1],x[2]),t.sub(E),t.y=0,t.normalize();var w=Math.atan2(t.x,t.z);h.rotation.set(0,w,0)}}}else if("rot"===f)if(THREE.Quaternion.slerp(v,y,r,g),0===d.quaternionWeight)h.quaternion.copy(r),d.quaternionWeight=this.weight;else{var A=this.weight/(this.weight+d.quaternionWeight);THREE.Quaternion.slerp(h.quaternion,r,h.quaternion,A),d.quaternionWeight+=this.weight}else if("scl"===f){i.x=v[0]+(y[0]-v[0])*g,i.y=v[1]+(y[1]-v[1])*g,i.z=v[2]+(y[2]-v[2])*g;var A=this.weight/(this.weight+d.scaleWeight);h.scale.lerp(i,A),d.scaleWeight+=this.weight}}return!0}}}(),THREE.Animation.prototype.getNextKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?i=i<r.length-1?i:r.length-1:i%=r.length;i<r.length;i++)if(void 0!==r[i][e])return r[i];return this.data.hierarchy[t].keys[0]},THREE.Animation.prototype.getPrevKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(i=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?i>0?i:0:i>=0?i:i+r.length;i>=0;i--)if(void 0!==r[i][e])return r[i];return this.data.hierarchy[t].keys[r.length-1]},THREE.KeyFrameAnimation=function(e){this.root=e.node,this.data=THREE.AnimationHandler.init(e),this.hierarchy=THREE.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0;for(var t=0,i=this.hierarchy.length;i>t;t++){var r=this.data.hierarchy[t].keys,n=this.data.hierarchy[t].sids,o=this.hierarchy[t];if(r.length&&n){for(var a=0;a<n.length;a++){var s=n[a],l=this.getNextKeyWith(s,t,0);l&&l.apply(s)}o.matrixAutoUpdate=!1,this.data.hierarchy[t].node.updateMatrix(),o.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype.play=function(e){if(this.currentTime=void 0!==e?e:0,this.isPlaying===!1){this.isPlaying=!0;var t,i,r,n=this.hierarchy.length;for(t=0;n>t;t++){i=this.hierarchy[t],r=this.data.hierarchy[t],void 0===r.animationCache&&(r.animationCache={},r.animationCache.prevKey=null,r.animationCache.nextKey=null,r.animationCache.originalMatrix=i.matrix);var o=this.data.hierarchy[t].keys;o.length&&(r.animationCache.prevKey=o[0],r.animationCache.nextKey=o[1],this.startTime=Math.min(o[0].time,this.startTime),this.endTime=Math.max(o[o.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.play(this)},THREE.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.stop(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],i=this.data.hierarchy[e];if(void 0!==i.animationCache){var r=i.animationCache.originalMatrix;r.copy(t.matrix),t.matrix=r,delete i.animationCache}}},THREE.KeyFrameAnimation.prototype.update=function(e){if(this.isPlaying!==!1){this.currentTime+=e*this.timeScale;var t=this.data.length;this.loop===!0&&this.currentTime>t&&(this.currentTime%=t),this.currentTime=Math.min(this.currentTime,t);for(var i=0,r=this.hierarchy.length;r>i;i++){var n=this.hierarchy[i],o=this.data.hierarchy[i],a=o.keys,s=o.animationCache;if(a.length){var l=s.prevKey,h=s.nextKey;if(h.time<=this.currentTime){for(;h.time<this.currentTime&&h.index>l.index;)l=h,h=a[l.index+1];s.prevKey=l,s.nextKey=h}h.time>=this.currentTime?l.interpolate(h,this.currentTime):l.interpolate(h,h.time),this.data.hierarchy[i].node.updateMatrix(),n.matrixWorldNeedsUpdate=!0}}}},THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(i%=r.length;i<r.length;i++)if(r[i].hasTarget(e))return r[i];return r[0]},THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(i=i>=0?i:i+r.length;i>=0;i--)if(r[i].hasTarget(e))return r[i];return r[r.length-1]},THREE.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.isPlaying=!1},THREE.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(){var e=0,t=0;return function(i){if(this.isPlaying!==!1){this.currentTime+=i,this.loop===!0&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration);var r=this.duration/this.frames,n=Math.floor(this.currentTime/r);n!=t&&(this.mesh.morphTargetInfluences[e]=0,this.mesh.morphTargetInfluences[t]=1,this.mesh.morphTargetInfluences[n]=0,e=t,t=n),this.mesh.morphTargetInfluences[n]=this.currentTime%r/r,this.mesh.morphTargetInfluences[e]=1-this.mesh.morphTargetInfluences[n]}}}()},THREE.BoxGeometry=function(e,t,i,r,n,o){function a(e,t,i,r,n,o,a,l){var h,c,d,u=s.widthSegments,f=s.heightSegments,p=n/2,m=o/2,g=s.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?h="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(h="y",f=s.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(h="x",u=s.depthSegments);var v=u+1,y=f+1,A=n/u,b=o/f,E=new THREE.Vector3;for(E[h]=a>0?1:-1,d=0;y>d;d++)for(c=0;v>c;c++){var x=new THREE.Vector3;x[e]=(c*A-p)*i,x[t]=(d*b-m)*r,x[h]=a,s.vertices.push(x)}for(d=0;f>d;d++)for(c=0;u>c;c++){var w=c+v*d,T=c+v*(d+1),_=c+1+v*(d+1),S=c+1+v*d,C=new THREE.Vector2(c/u,1-d/f),R=new THREE.Vector2(c/u,1-(d+1)/f),k=new THREE.Vector2((c+1)/u,1-(d+1)/f),M=new THREE.Vector2((c+1)/u,1-d/f),P=new THREE.Face3(w+g,T+g,S+g);P.normal.copy(E),P.vertexNormals.push(E.clone(),E.clone(),E.clone()),P.materialIndex=l,s.faces.push(P),s.faceVertexUvs[0].push([C,R,M]),P=new THREE.Face3(T+g,_+g,S+g),P.normal.copy(E),P.vertexNormals.push(E.clone(),E.clone(),E.clone()),P.materialIndex=l,s.faces.push(P),s.faceVertexUvs[0].push([R.clone(),k,M.clone()])}}THREE.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:o},this.widthSegments=r||1,this.heightSegments=n||1,this.depthSegments=o||1;var s=this,l=e/2,h=t/2,c=i/2;a("z","y",-1,-1,i,t,l,0),a("z","y",1,-1,i,t,-l,1),a("x","z",1,1,e,i,h,2),a("x","z",1,-1,e,i,-h,3),a("x","y",1,-1,e,t,c,4),a("x","y",-1,-1,e,t,-c,5),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry=function(e,t,i,r){THREE.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var n,o=[],a=new THREE.Vector3,s=new THREE.Vector2(.5,.5);for(this.vertices.push(a),o.push(s),n=0;t>=n;n++){var l=new THREE.Vector3,h=i+n/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),this.vertices.push(l),o.push(new THREE.Vector2((l.x/e+1)/2,(l.y/e+1)/2))}var c=new THREE.Vector3(0,0,1);for(n=1;t>=n;n++)this.faces.push(new THREE.Face3(n,n+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([o[n].clone(),o[n+1].clone(),s.clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CubeGeometry=function(e,t,i,r,n,o){return console.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new THREE.BoxGeometry(e,t,i,r,n,o)},THREE.CylinderGeometry=function(e,t,i,r,n,o){THREE.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:o},e=void 0!==e?e:20,t=void 0!==t?t:20,i=void 0!==i?i:100,r=r||8,n=n||1,o=void 0!==o?o:!1;var a,s,l=i/2,h=[],c=[];for(s=0;n>=s;s++){var d=[],u=[],f=s/n,p=f*(t-e)+e;for(a=0;r>=a;a++){var m=a/r,g=new THREE.Vector3;g.x=p*Math.sin(m*Math.PI*2),g.y=-f*i+l,g.z=p*Math.cos(m*Math.PI*2),this.vertices.push(g),d.push(this.vertices.length-1),u.push(new THREE.Vector2(m,1-f))}h.push(d),c.push(u)}var v,y,A=(t-e)/i;for(a=0;r>a;a++)for(0!==e?(v=this.vertices[h[0][a]].clone(),y=this.vertices[h[0][a+1]].clone()):(v=this.vertices[h[1][a]].clone(),y=this.vertices[h[1][a+1]].clone()),v.setY(Math.sqrt(v.x*v.x+v.z*v.z)*A).normalize(),y.setY(Math.sqrt(y.x*y.x+y.z*y.z)*A).normalize(),s=0;n>s;s++){var b=h[s][a],E=h[s+1][a],x=h[s+1][a+1],w=h[s][a+1],T=v.clone(),_=v.clone(),S=y.clone(),C=y.clone(),R=c[s][a].clone(),k=c[s+1][a].clone(),M=c[s+1][a+1].clone(),P=c[s][a+1].clone();this.faces.push(new THREE.Face3(b,E,w,[T,_,C])),this.faceVertexUvs[0].push([R,k,P]),this.faces.push(new THREE.Face3(E,x,w,[_.clone(),S,C.clone()])),this.faceVertexUvs[0].push([k.clone(),M,P.clone()])}if(o===!1&&e>0)for(this.vertices.push(new THREE.Vector3(0,l,0)),a=0;r>a;a++){var b=h[0][a],E=h[0][a+1],x=this.vertices.length-1,T=new THREE.Vector3(0,1,0),_=new THREE.Vector3(0,1,0),S=new THREE.Vector3(0,1,0),R=c[0][a].clone(),k=c[0][a+1].clone(),M=new THREE.Vector2(k.x,0);this.faces.push(new THREE.Face3(b,E,x,[T,_,S])),this.faceVertexUvs[0].push([R,k,M])}if(o===!1&&t>0)for(this.vertices.push(new THREE.Vector3(0,-l,0)),a=0;r>a;a++){var b=h[s][a+1],E=h[s][a],x=this.vertices.length-1,T=new THREE.Vector3(0,-1,0),_=new THREE.Vector3(0,-1,0),S=new THREE.Vector3(0,-1,0),R=c[s][a+1].clone(),k=c[s][a].clone(),M=new THREE.Vector2(k.x,1);this.faces.push(new THREE.Face3(b,E,x,[T,_,S])),this.faceVertexUvs[0].push([R,k,M])}this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry=function(e,t){return"undefined"==typeof e?void(e=[]):(THREE.Geometry.call(this),this.type="ExtrudeGeometry",e=e instanceof Array?e:[e],this.addShapeList(e,t),void this.computeFaceNormals())},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var i=e.length,r=0;i>r;r++){var n=e[r];this.addShape(n,t)}},THREE.ExtrudeGeometry.prototype.addShape=function(e,t){function i(e,t,i){return t||console.log("die"),t.clone().multiplyScalar(i).add(e)}function r(e,t,i){var r,n,o=1e-10,a=1,s=e.x-t.x,l=e.y-t.y,h=i.x-e.x,c=i.y-e.y,d=s*s+l*l,u=s*c-l*h;if(Math.abs(u)>o){var f=Math.sqrt(d),p=Math.sqrt(h*h+c*c),m=t.x-l/f,g=t.y+s/f,v=i.x-c/p,y=i.y+h/p,A=((v-m)*c-(y-g)*h)/(s*c-l*h);r=m+s*A-e.x,n=g+l*A-e.y;var b=r*r+n*n;if(2>=b)return new THREE.Vector2(r,n);a=Math.sqrt(b/2)}else{var E=!1;s>o?h>o&&(E=!0):-o>s?-o>h&&(E=!0):Math.sign(l)==Math.sign(c)&&(E=!0),E?(r=-l,n=s,a=Math.sqrt(d)):(r=s,n=l,a=Math.sqrt(d/2))}return new THREE.Vector2(r/a,n/a)}function n(){if(A){var e=0,t=G*e;for(q=0;W>q;q++)V=I[q],l(V[2]+t,V[1]+t,V[0]+t);for(e=E+2*y,t=G*e,q=0;W>q;q++)V=I[q],l(V[0]+t,V[1]+t,V[2]+t)}else{for(q=0;W>q;q++)V=I[q],l(V[2],V[1],V[0]);for(q=0;W>q;q++)V=I[q],l(V[0]+G*E,V[1]+G*E,V[2]+G*E)}}function o(){var e=0;for(a(B,e),e+=B.length,R=0,k=O.length;k>R;R++)C=O[R],a(C,e),e+=C.length}function a(e,t){var i,r;for(q=e.length;--q>=0;){i=q,r=q-1,0>r&&(r=e.length-1);var n=0,o=E+2*y;for(n=0;o>n;n++){var a=G*n,s=G*(n+1),l=t+i+a,c=t+r+a,d=t+r+s,u=t+i+s;h(l,c,d,u,e,n,o,i,r)}}}function s(e,t,i){M.vertices.push(new THREE.Vector3(e,t,i))}function l(e,t,i){e+=P,t+=P,i+=P,M.faces.push(new THREE.Face3(e,t,i,null,null,T));var r=S.generateTopUV(M,e,t,i);M.faceVertexUvs[0].push(r)}function h(e,t,i,r,n,o,a,s,l){e+=P,t+=P,i+=P,r+=P,M.faces.push(new THREE.Face3(e,t,r,null,null,_)),M.faces.push(new THREE.Face3(t,i,r,null,null,_));var h=S.generateSideWallUV(M,e,t,i,r);M.faceVertexUvs[0].push([h[0],h[1],h[3]]),M.faceVertexUvs[0].push([h[1],h[2],h[3]])}var c,d,u,f,p,m=void 0!==t.amount?t.amount:100,g=void 0!==t.bevelThickness?t.bevelThickness:6,v=void 0!==t.bevelSize?t.bevelSize:g-2,y=void 0!==t.bevelSegments?t.bevelSegments:3,A=void 0!==t.bevelEnabled?t.bevelEnabled:!0,b=void 0!==t.curveSegments?t.curveSegments:12,E=void 0!==t.steps?t.steps:1,x=t.extrudePath,w=!1,T=t.material,_=t.extrudeMaterial,S=void 0!==t.UVGenerator?t.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;x&&(c=x.getSpacedPoints(E),w=!0,A=!1,d=void 0!==t.frames?t.frames:new THREE.TubeGeometry.FrenetFrames(x,E,!1),u=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3),A||(y=0,g=0,v=0);var C,R,k,M=this,P=this.vertices.length,D=e.extractPoints(b),H=D.shape,O=D.holes,L=!THREE.Shape.Utils.isClockWise(H);if(L){for(H=H.reverse(),R=0,k=O.length;k>R;R++)C=O[R],THREE.Shape.Utils.isClockWise(C)&&(O[R]=C.reverse());L=!1}var I=THREE.Shape.Utils.triangulateShape(H,O),B=H;for(R=0,k=O.length;k>R;R++)C=O[R],H=H.concat(C);for(var N,F,z,U,j,V,G=H.length,W=I.length,Y=(B.length,180/Math.PI,[]),q=0,X=B.length,Q=X-1,Z=q+1;X>q;q++,Q++,Z++){Q===X&&(Q=0),Z===X&&(Z=0);B[q],B[Q],B[Z];Y[q]=r(B[q],B[Q],B[Z])}var K,J=[],$=Y.concat();for(R=0,k=O.length;k>R;R++){for(C=O[R],K=[],q=0,X=C.length,Q=X-1,Z=q+1;X>q;q++,Q++,Z++)Q===X&&(Q=0),Z===X&&(Z=0),K[q]=r(C[q],C[Q],C[Z]);J.push(K),$=$.concat(K)}for(N=0;y>N;N++){for(z=N/y,U=g*(1-z),F=v*Math.sin(z*Math.PI/2),q=0,X=B.length;X>q;q++)j=i(B[q],Y[q],F),s(j.x,j.y,-U);for(R=0,k=O.length;k>R;R++)for(C=O[R],K=J[R],q=0,X=C.length;X>q;q++)j=i(C[q],K[q],F),s(j.x,j.y,-U)}for(F=v,q=0;G>q;q++)j=A?i(H[q],$[q],F):H[q],w?(f.copy(d.normals[0]).multiplyScalar(j.x),u.copy(d.binormals[0]).multiplyScalar(j.y),p.copy(c[0]).add(f).add(u),s(p.x,p.y,p.z)):s(j.x,j.y,0);var ee;for(ee=1;E>=ee;ee++)for(q=0;G>q;q++)j=A?i(H[q],$[q],F):H[q],w?(f.copy(d.normals[ee]).multiplyScalar(j.x),u.copy(d.binormals[ee]).multiplyScalar(j.y),p.copy(c[ee]).add(f).add(u),s(p.x,p.y,p.z)):s(j.x,j.y,m/E*ee);for(N=y-1;N>=0;N--){for(z=N/y,U=g*(1-z),F=v*Math.sin(z*Math.PI/2),q=0,X=B.length;X>q;q++)j=i(B[q],Y[q],F),s(j.x,j.y,m+U);for(R=0,k=O.length;k>R;R++)for(C=O[R],K=J[R],q=0,X=C.length;X>q;q++)j=i(C[q],K[q],F),w?s(j.x,j.y+c[E-1].y,c[E-1].x+U):s(j.x,j.y,m+U)}n(),o()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,i,r){var n=e.vertices,o=n[t],a=n[i],s=n[r];return[new THREE.Vector2(o.x,o.y),new THREE.Vector2(a.x,a.y),new THREE.Vector2(s.x,s.y)]},generateSideWallUV:function(e,t,i,r,n){var o=e.vertices,a=o[t],s=o[i],l=o[r],h=o[n];return Math.abs(a.y-s.y)<.01?[new THREE.Vector2(a.x,1-a.z),new THREE.Vector2(s.x,1-s.z),new THREE.Vector2(l.x,1-l.z),new THREE.Vector2(h.x,1-h.z)]:[new THREE.Vector2(a.y,1-a.z),new THREE.Vector2(s.y,1-s.z),new THREE.Vector2(l.y,1-l.z),new THREE.Vector2(h.y,1-h.z)]}},THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this),this.type="ShapeGeometry",e instanceof Array==!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var i=0,r=e.length;r>i;i++)this.addShape(e[i],t);return this},THREE.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var i,r,n,o=void 0!==t.curveSegments?t.curveSegments:12,a=t.material,s=void 0===t.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,l=this.vertices.length,h=e.extractPoints(o),c=h.shape,d=h.holes,u=!THREE.Shape.Utils.isClockWise(c);if(u){for(c=c.reverse(),i=0,r=d.length;r>i;i++)n=d[i],THREE.Shape.Utils.isClockWise(n)&&(d[i]=n.reverse());u=!1}var f=THREE.Shape.Utils.triangulateShape(c,d),p=c;for(i=0,r=d.length;r>i;i++)n=d[i],c=c.concat(n);var m,g,v=c.length,y=f.length;p.length;for(i=0;v>i;i++)m=c[i],this.vertices.push(new THREE.Vector3(m.x,m.y,0));for(i=0;y>i;i++){g=f[i];var A=g[0]+l,b=g[1]+l,E=g[2]+l;this.faces.push(new THREE.Face3(A,b,E,null,null,a)),this.faceVertexUvs[0].push(s.generateTopUV(this,A,b,E))}},THREE.LatheGeometry=function(e,t,i,r){THREE.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=t||12,i=i||0,r=r||2*Math.PI;for(var n=1/(e.length-1),o=1/t,a=0,s=t;s>=a;a++)for(var l=i+a*o*r,h=Math.cos(l),c=Math.sin(l),d=0,u=e.length;u>d;d++){var f=e[d],p=new THREE.Vector3;p.x=h*f.x-c*f.y,p.y=c*f.x+h*f.y,p.z=f.z,this.vertices.push(p)}for(var m=e.length,a=0,s=t;s>a;a++)for(var d=0,u=e.length-1;u>d;d++){var g=d+m*a,v=g,y=g+m,h=g+1+m,A=g+1,b=a*o,E=d*n,x=b+o,w=E+n;this.faces.push(new THREE.Face3(v,y,A)),this.faceVertexUvs[0].push([new THREE.Vector2(b,E),new THREE.Vector2(x,E),new THREE.Vector2(b,w)]),this.faces.push(new THREE.Face3(y,h,A)),this.faceVertexUvs[0].push([new THREE.Vector2(x,E),new THREE.Vector2(x,w),new THREE.Vector2(b,w)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry=function(e,t,i,r){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),THREE.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new THREE.PlaneBufferGeometry(e,t,i,r))},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneBufferGeometry=function(e,t,i,r){THREE.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};for(var n=e/2,o=t/2,a=i||1,s=r||1,l=a+1,h=s+1,c=e/a,d=t/s,u=new Float32Array(l*h*3),f=new Float32Array(l*h*3),p=new Float32Array(l*h*2),m=0,g=0,v=0;h>v;v++)for(var y=v*d-o,A=0;l>A;A++){var b=A*c-n;u[m]=b,u[m+1]=-y,f[m+2]=1,p[g]=A/a,p[g+1]=1-v/s,m+=3,g+=2}m=0;for(var E=new(u.length/3>65535?Uint32Array:Uint16Array)(a*s*6),v=0;s>v;v++)for(var A=0;a>A;A++){var x=A+l*v,w=A+l*(v+1),T=A+1+l*(v+1),_=A+1+l*v;E[m]=x,E[m+1]=w,E[m+2]=_,E[m+3]=w,E[m+4]=T,E[m+5]=_,m+=6}this.addAttribute("index",new THREE.BufferAttribute(E,1)),this.addAttribute("position",new THREE.BufferAttribute(u,3)),this.addAttribute("normal",new THREE.BufferAttribute(f,3)),this.addAttribute("uv",new THREE.BufferAttribute(p,2))},THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.RingGeometry=function(e,t,i,r,n,o){THREE.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:o},e=e||0,t=t||50,n=void 0!==n?n:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8,r=void 0!==r?Math.max(1,r):8;var a,s,l=[],h=e,c=(t-e)/r;for(a=0;r+1>a;a++){for(s=0;i+1>s;s++){var d=new THREE.Vector3,u=n+s/i*o;d.x=h*Math.cos(u),d.y=h*Math.sin(u),this.vertices.push(d),l.push(new THREE.Vector2((d.x/t+1)/2,(d.y/t+1)/2))}h+=c}var f=new THREE.Vector3(0,0,1);for(a=0;r>a;a++){var p=a*(i+1);for(s=0;i>s;s++){var u=s+p,m=u,g=u+i+1,v=u+i+2;this.faces.push(new THREE.Face3(m,g,v,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[m].clone(),l[g].clone(),l[v].clone()]),m=u,g=u+i+2,v=u+1,this.faces.push(new THREE.Face3(m,g,v,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[m].clone(),l[g].clone(),l[v].clone()])}}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,h)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry=function(e,t,i,r,n,o,a){THREE.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:o,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,l,h=[],c=[];for(l=0;i>=l;l++){var d=[],u=[];for(s=0;t>=s;s++){var f=s/t,p=l/i,m=new THREE.Vector3;m.x=-e*Math.cos(r+f*n)*Math.sin(o+p*a),m.y=e*Math.cos(o+p*a),m.z=e*Math.sin(r+f*n)*Math.sin(o+p*a),this.vertices.push(m),d.push(this.vertices.length-1),u.push(new THREE.Vector2(f,1-p))}h.push(d),c.push(u)}for(l=0;i>l;l++)for(s=0;t>s;s++){var g=h[l][s+1],v=h[l][s],y=h[l+1][s],A=h[l+1][s+1],b=this.vertices[g].clone().normalize(),E=this.vertices[v].clone().normalize(),x=this.vertices[y].clone().normalize(),w=this.vertices[A].clone().normalize(),T=c[l][s+1].clone(),_=c[l][s].clone(),S=c[l+1][s].clone(),C=c[l+1][s+1].clone();Math.abs(this.vertices[g].y)===e?(T.x=(T.x+_.x)/2,this.faces.push(new THREE.Face3(g,y,A,[b,x,w])),this.faceVertexUvs[0].push([T,S,C])):Math.abs(this.vertices[y].y)===e?(S.x=(S.x+C.x)/2,this.faces.push(new THREE.Face3(g,v,y,[b,E,x])),this.faceVertexUvs[0].push([T,_,S])):(this.faces.push(new THREE.Face3(g,v,A,[b,E,w])),this.faceVertexUvs[0].push([T,_,C]),this.faces.push(new THREE.Face3(v,y,A,[E.clone(),x,w.clone()])),this.faceVertexUvs[0].push([_.clone(),S,C.clone()]))}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TextGeometry=function(e,t){t=t||{};var i=THREE.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,i,t),this.type="TextGeometry"},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TorusGeometry=function(e,t,i,r,n){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n},e=e||100,t=t||40,i=i||8,r=r||6,n=n||2*Math.PI;for(var o=new THREE.Vector3,a=[],s=[],l=0;i>=l;l++)for(var h=0;r>=h;h++){var c=h/r*n,d=l/i*Math.PI*2;o.x=e*Math.cos(c),o.y=e*Math.sin(c);var u=new THREE.Vector3;u.x=(e+t*Math.cos(d))*Math.cos(c),u.y=(e+t*Math.cos(d))*Math.sin(c),u.z=t*Math.sin(d),this.vertices.push(u),a.push(new THREE.Vector2(h/r,l/i)),s.push(u.clone().sub(o).normalize())}for(var l=1;i>=l;l++)for(var h=1;r>=h;h++){var f=(r+1)*l+h-1,p=(r+1)*(l-1)+h-1,m=(r+1)*(l-1)+h,g=(r+1)*l+h,v=new THREE.Face3(f,p,g,[s[f].clone(),s[p].clone(),s[g].clone()]);this.faces.push(v),this.faceVertexUvs[0].push([a[f].clone(),a[p].clone(),a[g].clone()]),v=new THREE.Face3(p,m,g,[s[p].clone(),s[m].clone(),s[g].clone()]),this.faces.push(v),this.faceVertexUvs[0].push([a[p].clone(),a[m].clone(),a[g].clone()])}this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry=function(e,t,i,r,n,o,a){function s(e,t,i,r,n){var o=Math.cos(e),a=Math.sin(e),s=t/i*e,l=Math.cos(s),h=r*(2+l)*.5*o,c=r*(2+l)*a*.5,d=n*r*Math.sin(s)*.5;return new THREE.Vector3(h,c,d)}THREE.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,p:n,q:o,heightScale:a},e=e||100,t=t||40,i=i||64,r=r||8,n=n||2,o=o||3,a=a||1;for(var l=new Array(i),h=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3,u=0;i>u;++u){l[u]=new Array(r);var f=u/i*2*n*Math.PI,p=s(f,o,n,e,a),m=s(f+.01,o,n,e,a);h.subVectors(m,p),c.addVectors(m,p),d.crossVectors(h,c),c.crossVectors(d,h),d.normalize(),c.normalize();for(var g=0;r>g;++g){var v=g/r*2*Math.PI,y=-t*Math.cos(v),A=t*Math.sin(v),b=new THREE.Vector3;b.x=p.x+y*c.x+A*d.x,b.y=p.y+y*c.y+A*d.y,b.z=p.z+y*c.z+A*d.z,l[u][g]=this.vertices.push(b)-1}}for(var u=0;i>u;++u)for(var g=0;r>g;++g){var E=(u+1)%i,x=(g+1)%r,w=l[u][g],T=l[E][g],_=l[E][x],S=l[u][x],C=new THREE.Vector2(u/i,g/r),R=new THREE.Vector2((u+1)/i,g/r),k=new THREE.Vector2((u+1)/i,(g+1)/r),M=new THREE.Vector2(u/i,(g+1)/r);this.faces.push(new THREE.Face3(w,T,S)),this.faceVertexUvs[0].push([C,R,M]),this.faces.push(new THREE.Face3(T,_,S)),this.faceVertexUvs[0].push([R.clone(),k,M.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry=function(e,t,i,r,n){function o(e,t,i){return C.vertices.push(new THREE.Vector3(e,t,i))-1}THREE.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:i,radialSegments:r,closed:n},t=t||64,i=i||1,r=r||8,n=n||!1;var a,s,l,h,c,d,u,f,p,m,g,v,y,A,b,E,x,w,T,_,S=[],C=this,R=t+1,k=new THREE.Vector3,M=new THREE.TubeGeometry.FrenetFrames(e,t,n),P=M.tangents,D=M.normals,H=M.binormals;for(this.tangents=P,this.normals=D,this.binormals=H,p=0;R>p;p++)for(S[p]=[],h=p/(R-1),f=e.getPointAt(h),a=P[p],s=D[p],l=H[p],m=0;r>m;m++)c=m/r*2*Math.PI,d=-i*Math.cos(c),u=i*Math.sin(c),k.copy(f),k.x+=d*s.x+u*l.x,k.y+=d*s.y+u*l.y,k.z+=d*s.z+u*l.z,S[p][m]=o(k.x,k.y,k.z);for(p=0;t>p;p++)for(m=0;r>m;m++)g=n?(p+1)%t:p+1,v=(m+1)%r,y=S[p][m],A=S[g][m],b=S[g][v],E=S[p][v],x=new THREE.Vector2(p/t,m/r),w=new THREE.Vector2((p+1)/t,m/r),T=new THREE.Vector2((p+1)/t,(m+1)/r),_=new THREE.Vector2(p/t,(m+1)/r),this.faces.push(new THREE.Face3(y,A,E)),this.faceVertexUvs[0].push([x,w,_]),this.faces.push(new THREE.Face3(A,b,E)),this.faceVertexUvs[0].push([w.clone(),T,_.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.FrenetFrames=function(e,t,i){function r(){f[0]=new THREE.Vector3,p[0]=new THREE.Vector3,o=Number.MAX_VALUE,a=Math.abs(u[0].x),s=Math.abs(u[0].y),l=Math.abs(u[0].z),o>=a&&(o=a,d.set(1,0,0)),o>=s&&(o=s,d.set(0,1,0)),o>=l&&d.set(0,0,1),m.crossVectors(u[0],d).normalize(),f[0].crossVectors(u[0],m),p[0].crossVectors(u[0],f[0])}var n,o,a,s,l,h,c,d=(new THREE.Vector3,new THREE.Vector3),u=(new THREE.Vector3,[]),f=[],p=[],m=new THREE.Vector3,g=new THREE.Matrix4,v=t+1,y=1e-4;for(this.tangents=u,this.normals=f,this.binormals=p,h=0;v>h;h++)c=h/(v-1),u[h]=e.getTangentAt(c),u[h].normalize();for(r(),h=1;v>h;h++)f[h]=f[h-1].clone(),p[h]=p[h-1].clone(),m.crossVectors(u[h-1],u[h]),m.length()>y&&(m.normalize(),n=Math.acos(THREE.Math.clamp(u[h-1].dot(u[h]),-1,1)),f[h].applyMatrix4(g.makeRotationAxis(m,n))),p[h].crossVectors(u[h],f[h]);if(i)for(n=Math.acos(THREE.Math.clamp(f[0].dot(f[v-1]),-1,1)),n/=v-1,u[0].dot(m.crossVectors(f[0],f[v-1]))>0&&(n=-n),h=1;v>h;h++)f[h].applyMatrix4(g.makeRotationAxis(u[h],n*h)),p[h].crossVectors(u[h],f[h])},THREE.PolyhedronGeometry=function(e,t,i,r){function n(e){var t=e.normalize().clone();t.index=c.vertices.push(t)-1;var i=s(e)/2/Math.PI+.5,r=l(e)/Math.PI+.5;return t.uv=new THREE.Vector2(i,1-r),t}function o(e,t,i){var r=new THREE.Face3(e.index,t.index,i.index,[e.clone(),t.clone(),i.clone()]);c.faces.push(r),A.copy(e).add(t).add(i).divideScalar(3);var n=s(A);c.faceVertexUvs[0].push([h(e.uv,e,n),h(t.uv,t,n),h(i.uv,i,n)])}function a(e,t){for(var i=Math.pow(2,t),r=(Math.pow(4,t),
n(c.vertices[e.a])),a=n(c.vertices[e.b]),s=n(c.vertices[e.c]),l=[],h=0;i>=h;h++){l[h]=[];for(var d=n(r.clone().lerp(s,h/i)),u=n(a.clone().lerp(s,h/i)),f=i-h,p=0;f>=p;p++)0==p&&h==i?l[h][p]=d:l[h][p]=n(d.clone().lerp(u,p/f))}for(var h=0;i>h;h++)for(var p=0;2*(i-h)-1>p;p++){var m=Math.floor(p/2);p%2==0?o(l[h][m+1],l[h+1][m],l[h][m]):o(l[h][m+1],l[h+1][m+1],l[h+1][m])}}function s(e){return Math.atan2(e.z,-e.x)}function l(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function h(e,t,i){return 0>i&&1===e.x&&(e=new THREE.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new THREE.Vector2(i/2/Math.PI+.5,e.y)),e.clone()}THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r},i=i||1,r=r||0;for(var c=this,d=0,u=e.length;u>d;d+=3)n(new THREE.Vector3(e[d],e[d+1],e[d+2]));for(var f=this.vertices,p=[],d=0,m=0,u=t.length;u>d;d+=3,m++){var g=f[t[d]],v=f[t[d+1]],y=f[t[d+2]];p[m]=new THREE.Face3(g.index,v.index,y.index,[g.clone(),v.clone(),y.clone()])}for(var A=new THREE.Vector3,d=0,u=p.length;u>d;d++)a(p[d],r);for(var d=0,u=this.faceVertexUvs[0].length;u>d;d++){var b=this.faceVertexUvs[0][d],E=b[0].x,x=b[1].x,w=b[2].x,T=Math.max(E,Math.max(x,w)),_=Math.min(E,Math.min(x,w));T>.9&&.1>_&&(.2>E&&(b[0].x+=1),.2>x&&(b[1].x+=1),.2>w&&(b[2].x+=1))}for(var d=0,u=this.vertices.length;u>d;d++)this.vertices[d].multiplyScalar(i);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,i)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.DodecahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var i=(1+Math.sqrt(5))/2,r=1/i,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];THREE.PolyhedronGeometry.call(this,n,o,e,t)},THREE.DodecahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry=function(e,t){var i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];THREE.PolyhedronGeometry.call(this,r,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];THREE.PolyhedronGeometry.call(this,i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry=function(e,t){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];THREE.PolyhedronGeometry.call(this,i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry=function(e,t,i){THREE.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i};var r,n,o,a,s,l=this.vertices,h=this.faces,c=this.faceVertexUvs[0],d=t+1;for(r=0;i>=r;r++)for(s=r/i,n=0;t>=n;n++)a=n/t,o=e(a,s),l.push(o);var u,f,p,m,g,v,y,A;for(r=0;i>r;r++)for(n=0;t>n;n++)u=r*d+n,f=r*d+n+1,p=(r+1)*d+n+1,m=(r+1)*d+n,g=new THREE.Vector2(n/t,r/i),v=new THREE.Vector2((n+1)/t,r/i),y=new THREE.Vector2((n+1)/t,(r+1)/i),A=new THREE.Vector2(n/t,(r+1)/i),h.push(new THREE.Face3(u,f,m)),c.push([g,v,A]),h.push(new THREE.Face3(f,p,m)),c.push([v.clone(),y,A.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),i=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),r=new THREE.BufferGeometry;r.addAttribute("position",new THREE.BufferAttribute(t,3)),r.addAttribute("color",new THREE.BufferAttribute(i,3));var n=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,r,n,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.ArrowHelper=function(){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var t=new THREE.CylinderGeometry(0,.5,1,5,1);return t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),function(i,r,n,o,a,s){THREE.Object3D.call(this),void 0===o&&(o=16776960),void 0===n&&(n=1),void 0===a&&(a=.2*n),void 0===s&&(s=.2*a),this.position.copy(r),this.line=new THREE.Line(e,new THREE.LineBasicMaterial({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new THREE.Mesh(t,new THREE.MeshBasicMaterial({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(i),this.setLength(n,a,s)}}(),THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.setDirection=function(){var e,t=new THREE.Vector3;return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(i.z,0,-i.x).normalize(),e=Math.acos(i.y),this.quaternion.setFromAxisAngle(t,e))}}(),THREE.ArrowHelper.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,e,1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},THREE.BoxHelper=function(e){var t=new THREE.BufferGeometry;t.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3)),THREE.Line.call(this,t,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==e&&this.update(e)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var i=t.boundingBox.min,r=t.boundingBox.max,n=this.geometry.attributes.position.array;n[0]=r.x,n[1]=r.y,n[2]=r.z,n[3]=i.x,n[4]=r.y,n[5]=r.z,n[6]=i.x,n[7]=r.y,n[8]=r.z,n[9]=i.x,n[10]=i.y,n[11]=r.z,n[12]=i.x,n[13]=i.y,n[14]=r.z,n[15]=r.x,n[16]=i.y,n[17]=r.z,n[18]=r.x,n[19]=i.y,n[20]=r.z,n[21]=r.x,n[22]=r.y,n[23]=r.z,n[24]=r.x,n[25]=r.y,n[26]=i.z,n[27]=i.x,n[28]=r.y,n[29]=i.z,n[30]=i.x,n[31]=r.y,n[32]=i.z,n[33]=i.x,n[34]=i.y,n[35]=i.z,n[36]=i.x,n[37]=i.y,n[38]=i.z,n[39]=r.x,n[40]=i.y,n[41]=i.z,n[42]=r.x,n[43]=i.y,n[44]=i.z,n[45]=r.x,n[46]=r.y,n[47]=i.z,n[48]=r.x,n[49]=r.y,n[50]=r.z,n[51]=r.x,n[52]=r.y,n[53]=i.z,n[54]=i.x,n[55]=r.y,n[56]=r.z,n[57]=i.x,n[58]=r.y,n[59]=i.z,n[60]=i.x,n[61]=i.y,n[62]=r.z,n[63]=i.x,n[64]=i.y,n[65]=i.z,n[66]=r.x,n[67]=i.y,n[68]=r.z,n[69]=r.x,n[70]=i.y,n[71]=i.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.BoundingBoxHelper=function(e,t){var i=void 0!==t?t:8947848;this.object=e,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:i,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(e){function t(e,t,r){i(e,r),i(t,r)}function i(e,t){r.vertices.push(new THREE.Vector3),r.colors.push(new THREE.Color(t)),void 0===o[e]&&(o[e]=[]),o[e].push(r.vertices.length-1)}var r=new THREE.Geometry,n=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),o={},a=16755200,s=16711680,l=43775,h=16777215,c=3355443;t("n1","n2",a),t("n2","n4",a),t("n4","n3",a),t("n3","n1",a),t("f1","f2",a),t("f2","f4",a),t("f4","f3",a),t("f3","f1",a),t("n1","f1",a),t("n2","f2",a),t("n3","f3",a),t("n4","f4",a),t("p","n1",s),t("p","n2",s),t("p","n3",s),t("p","n4",s),t("u1","u2",l),t("u2","u3",l),t("u3","u1",l),t("c","t",h),t("p","c",c),t("cn1","cn2",c),t("cn3","cn4",c),t("cf1","cf2",c),t("cf3","cf4",c),THREE.Line.call(this,r,n,THREE.LinePieces),this.camera=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.update=function(){var e,t,i=new THREE.Vector3,r=new THREE.Camera,n=function(n,o,a,s){i.set(o,a,s).unproject(r);var l=t[n];if(void 0!==l)for(var h=0,c=l.length;c>h;h++)e.vertices[l[h]].copy(i)};return function(){e=this.geometry,t=this.pointMap;var i=1,o=1;r.projectionMatrix.copy(this.camera.projectionMatrix),n("c",0,0,-1),n("t",0,0,1),n("n1",-i,-o,-1),n("n2",i,-o,-1),n("n3",-i,o,-1),n("n4",i,o,-1),n("f1",-i,-o,1),n("f2",i,-o,1),n("f3",-i,o,1),n("f4",i,o,1),n("u1",.7*i,1.1*o,-1),n("u2",.7*-i,1.1*o,-1),n("u3",0,2*o,-1),n("cf1",-i,0,1),n("cf2",i,0,1),n("cf3",0,-o,1),n("cf4",0,o,1),n("cn1",-i,0,-1),n("cn2",i,0,-1),n("cn3",0,-o,-1),n("cn4",0,o,-1),e.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var i=new THREE.Geometry;i.vertices.push(new THREE.Vector3(-t,t,0),new THREE.Vector3(t,t,0),new THREE.Vector3(t,-t,0),new THREE.Vector3(-t,-t,0),new THREE.Vector3(-t,t,0));var r=new THREE.LineBasicMaterial({fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(i,r),this.add(this.lightPlane),i=new THREE.Geometry,i.vertices.push(new THREE.Vector3,new THREE.Vector3),r=new THREE.LineBasicMaterial({fog:!1}),r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(i,r),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(t,e),this.lightPlane.lookAt(i),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(i),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(e,t){var i=void 0!==t?t:16777215,r=[0,0],n={},o=function(e,t){return e-t},a=["a","b","c"],s=new THREE.BufferGeometry,l=e.geometry.clone();l.mergeVertices(),l.computeFaceNormals();for(var h=l.vertices,c=l.faces,d=0,u=0,f=c.length;f>u;u++)for(var p=c[u],m=0;3>m;m++){r[0]=p[a[m]],r[1]=p[a[(m+1)%3]],r.sort(o);var g=r.toString();void 0===n[g]?(n[g]={vert1:r[0],vert2:r[1],face1:u,face2:void 0},d++):n[g].face2=u}var v=new Float32Array(2*d*3),y=0;for(var g in n){var A=n[g];if(void 0===A.face2||c[A.face1].normal.dot(c[A.face2].normal)<.9999){var b=h[A.vert1];v[y++]=b.x,v[y++]=b.y,v[y++]=b.z,b=h[A.vert2],v[y++]=b.x,v[y++]=b.y,v[y++]=b.z}}s.addAttribute("position",new THREE.BufferAttribute(v,3)),THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:i}),THREE.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper=function(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;for(var n=void 0!==i?i:16776960,o=void 0!==r?r:1,a=new THREE.Geometry,s=this.object.geometry.faces,l=0,h=s.length;h>l;l++)a.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:n,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices,t=this.object,i=t.geometry.vertices,r=t.geometry.faces,n=t.matrixWorld;t.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(n);for(var o=0,a=0,s=r.length;s>o;o++,a+=2){var l=r[o];e[a].copy(i[l.a]).add(i[l.b]).add(i[l.c]).divideScalar(3).applyMatrix4(n),e[a+1].copy(l.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[a])}return this.geometry.verticesNeedUpdate=!0,this},THREE.GridHelper=function(e,t){var i=new THREE.Geometry,r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var n=-e;e>=n;n+=t){i.vertices.push(new THREE.Vector3(-e,0,n),new THREE.Vector3(e,0,n),new THREE.Vector3(n,0,-e),new THREE.Vector3(n,0,e));var o=0===n?this.color1:this.color2;i.colors.push(o,o,o,o)}THREE.Line.call(this,i,r,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(e,t,i,r){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var n=new THREE.SphereGeometry(t,4,2);n.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var o=0,a=8;a>o;o++)n.faces[o].color=this.colors[4>o?0:1];var s=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(n,s),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var i=new THREE.SphereGeometry(t,4,2),r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new THREE.Geometry,i=0;i<this.bones.length;i++){var r=this.bones[i];r.parent instanceof THREE.Bone&&(t.vertices.push(new THREE.Vector3),t.vertices.push(new THREE.Vector3),t.colors.push(new THREE.Color(0,0,1)),t.colors.push(new THREE.Color(0,1,0)))}var n=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.Line.call(this,t,n,THREE.LinePieces),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype),THREE.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof THREE.Bone&&t.push(e);for(var i=0;i<e.children.length;i++)t.push.apply(t,this.getBoneList(e.children[i]));return t},THREE.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new THREE.Matrix4).getInverse(this.root.matrixWorld),i=new THREE.Matrix4,r=0,n=0;n<this.bones.length;n++){var o=this.bones[n];o.parent instanceof THREE.Bone&&(i.multiplyMatrices(t,o.matrixWorld),e.vertices[r].setFromMatrixPosition(i),i.multiplyMatrices(t,o.parent.matrixWorld),e.vertices[r+1].setFromMatrixPosition(i),r+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},THREE.SpotLightHelper=function(e){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new THREE.CylinderGeometry(0,1,1,8,1,!0);t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var i=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(t,i),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){var i=this.light.distance?this.light.distance:1e4,r=i*Math.tan(this.light.angle);this.cone.scale.set(r,r,i),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;for(var n=void 0!==i?i:16711680,o=void 0!==r?r:1,a=new THREE.Geometry,s=(e.geometry.vertices,e.geometry.faces),l=0,h=s.length;h>l;l++)for(var c=s[l],d=0,u=c.vertexNormals.length;u>d;d++)a.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:n,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.update=function(e){var t=new THREE.Vector3;return function(e){var i=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var r=this.geometry.vertices,n=this.object.geometry.vertices,o=this.object.geometry.faces,a=this.object.matrixWorld,s=0,l=0,h=o.length;h>l;l++)for(var c=o[l],d=0,u=c.vertexNormals.length;u>d;d++){var f=c[i[d]],p=n[f],m=c.vertexNormals[d];r[s].copy(p).applyMatrix4(a),t.copy(m).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),t.add(r[s]),s+=1,r[s].copy(t),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;for(var n=void 0!==i?i:255,o=void 0!==r?r:1,a=new THREE.Geometry,s=(e.geometry.vertices,e.geometry.faces),l=0,h=s.length;h>l;l++)for(var c=s[l],d=0,u=c.vertexTangents.length;u>d;d++)a.vertices.push(new THREE.Vector3),a.vertices.push(new THREE.Vector3);THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:n,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.update=function(e){var t=new THREE.Vector3;return function(e){var i=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var r=this.geometry.vertices,n=this.object.geometry.vertices,o=this.object.geometry.faces,a=this.object.matrixWorld,s=0,l=0,h=o.length;h>l;l++)for(var c=o[l],d=0,u=c.vertexTangents.length;u>d;d++){var f=c[i[d]],p=n[f],m=c.vertexTangents[d];r[s].copy(p).applyMatrix4(a),t.copy(m).transformDirection(a).multiplyScalar(this.size),t.add(r[s]),s+=1,r[s].copy(t),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(e,t){var i=void 0!==t?t:16777215,r=[0,0],n={},o=function(e,t){return e-t},a=["a","b","c"],s=new THREE.BufferGeometry;if(e.geometry instanceof THREE.Geometry){for(var l=e.geometry.vertices,h=e.geometry.faces,c=0,d=new Uint32Array(6*h.length),u=0,f=h.length;f>u;u++)for(var p=h[u],m=0;3>m;m++){r[0]=p[a[m]],r[1]=p[a[(m+1)%3]],r.sort(o);var g=r.toString();void 0===n[g]&&(d[2*c]=r[0],d[2*c+1]=r[1],n[g]=!0,c++)}for(var v=new Float32Array(2*c*3),u=0,f=c;f>u;u++)for(var m=0;2>m;m++){var y=l[d[2*u+m]],A=6*u+3*m;v[A+0]=y.x,v[A+1]=y.y,v[A+2]=y.z}s.addAttribute("position",new THREE.BufferAttribute(v,3))}else if(e.geometry instanceof THREE.BufferGeometry)if(void 0!==e.geometry.attributes.index){var l=e.geometry.attributes.position.array,b=e.geometry.attributes.index.array,E=e.geometry.drawcalls,c=0;0===E.length&&(E=[{count:b.length,index:0,start:0}]);for(var d=new Uint32Array(2*b.length),x=0,w=E.length;w>x;++x)for(var T=E[x].start,_=E[x].count,A=E[x].index,u=T,S=T+_;S>u;u+=3)for(var m=0;3>m;m++){r[0]=A+b[u+m],r[1]=A+b[u+(m+1)%3],r.sort(o);var g=r.toString();void 0===n[g]&&(d[2*c]=r[0],d[2*c+1]=r[1],n[g]=!0,c++)}for(var v=new Float32Array(2*c*3),u=0,f=c;f>u;u++)for(var m=0;2>m;m++){var A=6*u+3*m,C=3*d[2*u+m];v[A+0]=l[C],v[A+1]=l[C+1],v[A+2]=l[C+2]}s.addAttribute("position",new THREE.BufferAttribute(v,3))}else{for(var l=e.geometry.attributes.position.array,c=l.length/3,R=c/3,v=new Float32Array(2*c*3),u=0,f=R;f>u;u++)for(var m=0;3>m;m++){var A=18*u+6*m,k=9*u+3*m;v[A+0]=l[k],v[A+1]=l[k+1],v[A+2]=l[k+2];var C=9*u+3*((m+1)%3);v[A+3]=l[C],v[A+4]=l[C+1],v[A+5]=l[C+2]}s.addAttribute("position",new THREE.BufferAttribute(v,3))}THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:i}),THREE.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(e){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length,r="__default",n=0,o=i-1,a=i/1;this.createAnimation(r,n,o,a),this.setAnimationWeight(r,1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,i,r){var n={startFrame:t,endFrame:i,length:i-t+1,fps:r,duration:(i-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=n,this.animationsList.push(n)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,i=/([a-z]+)_?(\d+)/,r={},n=this.geometry,o=0,a=n.morphTargets.length;a>o;o++){var s=n.morphTargets[o],l=s.name.match(i);if(l&&l.length>1){var h=l[1];l[2];r[h]||(r[h]={start:1/0,end:-(1/0)});var c=r[h];o<c.start&&(c.start=o),o>c.end&&(c.end=o),t||(t=h)}}for(var h in r){var c=r[h];this.createAnimation(h,c.start,c.end,e)}this.firstAnimation=t},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var i=this.animationsMap[e];i&&(i.fps=t,i.duration=(i.end-i.start)/i.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var i=this.animationsMap[e];i&&(i.duration=t,i.fps=(i.end-i.start)/i.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var i=this.animationsMap[e];i&&(i.weight=t)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var i=this.animationsMap[e];i&&(i.time=t)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,i=this.animationsMap[e];return i&&(t=i.time),t},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,i=this.animationsMap[e];return i&&(t=i.duration),t},THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("animation["+e+"] undefined")},THREE.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,i=this.animationsList.length;i>t;t++){var r=this.animationsList[t];if(r.active){var n=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var o=r.startFrame+THREE.Math.clamp(Math.floor(r.time/n),0,r.length-1),a=r.weight;o!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*a,this.morphTargetInfluences[o]=0,r.lastFrame=r.currentFrame,r.currentFrame=o);var s=r.time%n/n;r.directionBackwards&&(s=1-s),this.morphTargetInfluences[r.currentFrame]=s*a,this.morphTargetInfluences[r.lastFrame]=(1-s)*a}}};var Stats=function(){var e=Date.now(),t=e,i=0,r=1/0,n=0,o=0,a=1/0,s=0,l=0,h=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(e){e.preventDefault(),y(++h%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var d=document.createElement("div");d.id="fps",d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(d);var u=document.createElement("div");u.id="fpsText",u.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",u.innerHTML="FPS",d.appendChild(u);var f=document.createElement("div");for(f.id="fpsGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",d.appendChild(f);f.children.length<74;){var p=document.createElement("span");p.style.cssText="width:1px;height:30px;float:left;background-color:#113",f.appendChild(p)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var g=document.createElement("div");g.id="msText",g.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",g.innerHTML="MS",m.appendChild(g);var v=document.createElement("div");for(v.id="msGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(v);v.children.length<74;){var p=document.createElement("span");p.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(p)}var y=function(e){switch(h=e){case 0:d.style.display="block",m.style.display="none";break;case 1:d.style.display="none",m.style.display="block"}},A=function(e,t){var i=e.appendChild(e.firstChild);i.style.height=t+"px"};return{REVISION:11,domElement:c,setMode:y,begin:function(){e=Date.now()},end:function(){var h=Date.now();return i=h-e,r=Math.min(r,i),n=Math.max(n,i),g.textContent=i+" MS ("+r+"-"+n+")",A(v,Math.min(30,30-i/200*30)),l++,h>t+1e3&&(o=Math.round(1e3*l/(h-t)),a=Math.min(a,o),s=Math.max(s,o),u.textContent=o+" FPS ("+a+"-"+s+")",A(f,Math.min(30,30-o/100*30)),t=h,l=0),h},update:function(){e=this.end()}}},dat=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css=function(){return{load:function(e,t){t=t||document;var i=t.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,t.getElementsByTagName("head")[0].appendChild(i)},inject:function(e,t){t=t||document;var i=document.createElement("style");i.type="text/css",i.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(i)}}}(),dat.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var i in t)this.isUndefined(t[i])||(e[i]=t[i])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var i in t)this.isUndefined(e[i])&&(e[i]=t[i])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var i=t.call(arguments),r=e.length-1;r>=0;r--)i=[e[r].apply(this,i)];return i[0]}},each:function(t,i,r){if(e&&t.forEach===e)t.forEach(i,r);else if(t.length===t.length+0)for(var n=0,o=t.length;o>n&&!(n in t&&i.call(r,t[n],n)===this.BREAK);n++);else for(n in t)if(i.call(r,t[n],n)===this.BREAK)break},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),dat.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onFinishChange=this.__onChange=void 0};return e.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(dat.utils.common),dat.dom.dom=function(e){function t(t){return"0"===t||e.isUndefined(t)?0:(t=t.match(r),e.isNull(t)?0:parseFloat(t[1]))}var i={};e.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(t,r){e.each(t,function(e){i[e]=r})});var r=/(\d+(\.\d+)?)px/,n={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,i,r){e.isUndefined(i)&&(i=!0),e.isUndefined(r)&&(r=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,r,n,o){n=n||{};var a=i[r];if(!a)throw Error("Event type "+r+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":s.initMouseEvent(r,n.bubbles||!1,n.cancelable||!0,window,n.clickCount||1,0,0,n.x||n.clientX||0,n.y||n.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":a=s.initKeyboardEvent||s.initKeyEvent,e.defaults(n,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),a(r,n.bubbles||!1,n.cancelable,window,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.keyCode,n.charCode);break;default:s.initEvent(r,n.bubbles||!1,n.cancelable||!0)}e.defaults(s,o),t.dispatchEvent(s)},bind:function(e,t,i,r){return e.addEventListener?e.addEventListener(t,i,r||!1):e.attachEvent&&e.attachEvent("on"+t,i),n},unbind:function(e,t,i,r){return e.removeEventListener?e.removeEventListener(t,i,r||!1):e.detachEvent&&e.detachEvent("on"+t,i),n},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var i=e.className.split(/ +/);-1==i.indexOf(t)&&(i.push(t),e.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return n},removeClass:function(e,t){if(t){if(void 0!==e.className)if(e.className===t)e.removeAttribute("class");else{var i=e.className.split(/ +/),r=i.indexOf(t);-1!=r&&(i.splice(r,1),e.className=i.join(" "))}}else e.className=void 0;return n},hasClass:function(e,t){return RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){return e=getComputedStyle(e),t(e["border-left-width"])+t(e["border-right-width"])+t(e["padding-left"])+t(e["padding-right"])+t(e.width)},getHeight:function(e){return e=getComputedStyle(e),t(e["border-top-width"])+t(e["border-bottom-width"])+t(e["padding-top"])+t(e["padding-bottom"])+t(e.height);
},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return n}(dat.utils.common),dat.controllers.OptionController=function(e,t,i){var r=function(e,n,o){r.superclass.call(this,e,n);var a=this;if(this.__select=document.createElement("select"),i.isArray(o)){var s={};i.each(o,function(e){s[e]=e}),o=s}i.each(o,function(e,t){var i=document.createElement("option");i.innerHTML=t,i.setAttribute("value",e),a.__select.appendChild(i)}),this.updateDisplay(),t.bind(this.__select,"change",function(){a.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return r.superclass=e,i.extend(r.prototype,e.prototype,{setValue:function(e){return e=r.superclass.prototype.setValue.call(this,e),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(e,t){var i=function(e,r,n){i.superclass.call(this,e,r),n=n||{},this.__min=n.min,this.__max=n.max,this.__step=n.step,t.isUndefined(this.__step)?this.__impliedStep=0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,e=this.__impliedStep,e=e.toString(),e=-1<e.indexOf(".")?e.length-e.indexOf(".")-1:0,this.__precision=e};return i.superclass=e,t.extend(i.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&0!=e%this.__step&&(e=Math.round(e/this.__step)*this.__step),i.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),i}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(e,t,i){var r=function(e,n,o){function a(){var e=parseFloat(c.__input.value);i.isNaN(e)||c.setValue(e)}function s(e){var t=h-e.clientY;c.setValue(c.getValue()+t*c.__impliedStep),h=e.clientY}function l(){t.unbind(window,"mousemove",s),t.unbind(window,"mouseup",l)}this.__truncationSuspended=!1,r.superclass.call(this,e,n,o);var h,c=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",a),t.bind(this.__input,"blur",function(){a(),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}),t.bind(this.__input,"mousedown",function(e){t.bind(window,"mousemove",s),t.bind(window,"mouseup",l),h=e.clientY}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(c.__truncationSuspended=!0,this.blur(),c.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,i.extend(r.prototype,e.prototype,{updateDisplay:function(){var e,t=this.__input;if(this.__truncationSuspended)e=this.getValue();else{e=this.getValue();var i=Math.pow(10,this.__precision);e=Math.round(e*i)/i}return t.value=e,r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(e,t,i,r,n){function o(e,t,i,r,n){return r+(e-t)/(i-t)*(n-r)}var a=function(e,i,r,n,s){function l(e){e.preventDefault();var i=t.getOffset(c.__background),r=t.getWidth(c.__background);return c.setValue(o(e.clientX,i.left,i.left+r,c.__min,c.__max)),!1}function h(){t.unbind(window,"mousemove",l),t.unbind(window,"mouseup",h),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}a.superclass.call(this,e,i,{min:r,max:n,step:s});var c=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",function(e){t.bind(window,"mousemove",l),t.bind(window,"mouseup",h),l(e)}),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return a.superclass=e,a.useDefaultStyles=function(){i.inject(n)},r.extend(a.prototype,e.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",a.superclass.prototype.updateDisplay.call(this)}}),a}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,"/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),dat.controllers.FunctionController=function(e,t,i){var r=function(e,i,n){r.superclass.call(this,e,i);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===n?"Fire":n,t.bind(this.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=e,i.extend(r.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(e,t,i){var r=function(e,i){r.superclass.call(this,e,i);var n=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",function(){n.setValue(!n.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=e,i.extend(r.prototype,e.prototype,{setValue:function(e){return e=r.superclass.prototype.setValue.call(this,e),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(t=t.hex.toString(16);6>t.length;)t="0"+t;return"#"+t}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(dat.utils.common),dat.color.interpret=function(e,t){var i,r,n=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){return e=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i),null===e?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){return e=e.match(/^#([A-F0-9]{6})$/i),null===e?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:e},CSS_RGB:{read:function(e){return e=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/),null===e?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:e},CSS_RGBA:{read:function(e){return e=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/),null===e?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3!=e.length?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4!=e.length?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){r=!1;var e=1<arguments.length?t.toArray(arguments):arguments[0];return t.each(n,function(n){return n.litmus(e)?(t.each(n.conversions,function(n,o){return i=n.read(e),!1===r&&!1!==i?(r=i,i.conversionName=o,i.conversion=n,t.BREAK):void 0}),t.BREAK):void 0}),r}}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(e,t,i,r,n,o,a,s,l,h,c,d,u,f,p){function m(e,t,i,o){if(void 0===t[i])throw Error("Object "+t+' has no property "'+i+'"');o.color?t=new c(t,i):(t=[t,i].concat(o.factoryArgs),t=r.apply(e,t)),o.before instanceof n&&(o.before=o.before.__li),y(e,t),f.addClass(t.domElement,"c"),i=document.createElement("span"),f.addClass(i,"property-name"),i.innerHTML=t.property;var a=document.createElement("div");return a.appendChild(i),a.appendChild(t.domElement),o=g(e,a,o.before),f.addClass(o,O.CLASS_CONTROLLER_ROW),f.addClass(o,typeof t.getValue()),v(e,o,t),e.__controllers.push(t),t}function g(e,t,i){var r=document.createElement("li");return t&&r.appendChild(t),i?e.__ul.insertBefore(r,params.before):e.__ul.appendChild(r),e.onResize(),r}function v(e,t,i){if(i.__li=t,i.__gui=e,p.extend(i,{options:function(t){return 1<arguments.length?(i.remove(),m(e,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[p.toArray(arguments)]})):p.isArray(t)||p.isObject(t)?(i.remove(),m(e,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return i.__li.firstElementChild.firstElementChild.innerHTML=e,i},listen:function(){return i.__gui.listen(i),i},remove:function(){return i.__gui.remove(i),i}}),i instanceof l){var r=new s(i.object,i.property,{min:i.__min,max:i.__max,step:i.__step});p.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=i[e],n=r[e];i[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(i,e),n.apply(r,e)}}),f.addClass(t,"has-slider"),i.domElement.insertBefore(r.domElement,i.domElement.firstElementChild)}else if(i instanceof s){var n=function(t){return p.isNumber(i.__min)&&p.isNumber(i.__max)?(i.remove(),m(e,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[i.__min,i.__max,i.__step]})):t};i.min=p.compose(n,i.min),i.max=p.compose(n,i.max)}else i instanceof o?(f.bind(t,"click",function(){f.fakeEvent(i.__checkbox,"click")}),f.bind(i.__checkbox,"click",function(e){e.stopPropagation()})):i instanceof a?(f.bind(t,"click",function(){f.fakeEvent(i.__button,"click")}),f.bind(t,"mouseover",function(){f.addClass(i.__button,"hover")}),f.bind(t,"mouseout",function(){f.removeClass(i.__button,"hover")})):i instanceof c&&(f.addClass(t,"color"),i.updateDisplay=p.compose(function(e){return t.style.borderLeftColor=i.__color.toString(),e},i.updateDisplay),i.updateDisplay());i.setValue=p.compose(function(t){return e.getRoot().__preset_select&&i.isModified()&&T(e.getRoot(),!0),t},i.setValue)}function y(e,t){var i=e.getRoot(),r=i.__rememberedObjects.indexOf(t.object);if(-1!=r){var n=i.__rememberedObjectIndecesToControllers[r];if(void 0===n&&(n={},i.__rememberedObjectIndecesToControllers[r]=n),n[t.property]=t,i.load&&i.load.remembered){if(i=i.load.remembered,i[e.preset])i=i[e.preset];else{if(!i[C])return;i=i[C]}i[r]&&void 0!==i[r][t.property]&&(r=i[r][t.property],t.initialValue=r,t.setValue(r))}}}function A(e){var t=e.__save_row=document.createElement("li");f.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),f.addClass(t,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",f.addClass(i,"button gears");var r=document.createElement("span");r.innerHTML="Save",f.addClass(r,"button"),f.addClass(r,"save");var n=document.createElement("span");n.innerHTML="New",f.addClass(n,"button"),f.addClass(n,"save-as");var o=document.createElement("span");o.innerHTML="Revert",f.addClass(o,"button"),f.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?p.each(e.load.remembered,function(t,i){w(e,i,i==e.preset)}):w(e,C,!1),f.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(i),t.appendChild(r),t.appendChild(n),t.appendChild(o),S){var t=document.getElementById("dg-save-locally"),s=document.getElementById("dg-local-explain");t.style.display="block",t=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(document.location.href+".isLocal")&&t.setAttribute("checked","checked");var l=function(){s.style.display=e.useLocalStorage?"block":"none"};l(),f.bind(t,"change",function(){e.useLocalStorage=!e.useLocalStorage,l()})}var h=document.getElementById("dg-new-constructor");f.bind(h,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||k.hide()}),f.bind(i,"click",function(){h.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),k.show(),h.focus(),h.select()}),f.bind(r,"click",function(){e.save()}),f.bind(n,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),f.bind(o,"click",function(){e.revert()})}function b(e){function t(t){return t.preventDefault(),n=t.clientX,f.addClass(e.__closeButton,O.CLASS_DRAG),f.bind(window,"mousemove",i),f.bind(window,"mouseup",r),!1}function i(t){return t.preventDefault(),e.width+=n-t.clientX,e.onResize(),n=t.clientX,!1}function r(){f.removeClass(e.__closeButton,O.CLASS_DRAG),f.unbind(window,"mousemove",i),f.unbind(window,"mouseup",r)}e.__resize_handle=document.createElement("div"),p.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var n;f.bind(e.__resize_handle,"mousedown",t),f.bind(e.__closeButton,"mousedown",t),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function E(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function x(e,t){var i={};return p.each(e.__rememberedObjects,function(r,n){var o={};p.each(e.__rememberedObjectIndecesToControllers[n],function(e,i){o[i]=t?e.initialValue:e.getValue()}),i[n]=o}),i}function w(e,t,i){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),i&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function T(e,t){var i=e.__preset_select[e.__preset_select.selectedIndex];i.innerHTML=t?i.value+"*":i.value}function _(e){0!=e.length&&d(function(){_(e)}),p.each(e,function(e){e.updateDisplay()})}e.inject(i);var S,C="Default";try{S="localStorage"in window&&null!==window.localStorage}catch(R){S=!1}var k,M,P=!0,D=!1,H=[],O=function(e){function t(){localStorage.setItem(document.location.href+".gui",JSON.stringify(r.getSaveObject()))}function i(){var e=r.getRoot();e.width+=1,p.defer(function(){e.width-=1})}var r=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),f.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=e||{},e=p.defaults(e,{autoPlace:!0,width:O.DEFAULT_WIDTH}),e=p.defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),p.isUndefined(e.load)?e.load={preset:C}:e.preset&&(e.load.preset=e.preset),p.isUndefined(e.parent)&&e.hideable&&H.push(this),e.resizable=p.isUndefined(e.parent)&&e.resizable,e.autoPlace&&p.isUndefined(e.scrollable)&&(e.scrollable=!0);var n=S&&"true"===localStorage.getItem(document.location.href+".isLocal");if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},preset:{get:function(){return r.parent?r.getRoot().preset:e.load.preset},set:function(t){for(r.parent?r.getRoot().preset=t:e.load.preset=t,t=0;t<this.__preset_select.length;t++)this.__preset_select[t].value==this.preset&&(this.__preset_select.selectedIndex=t);r.revert()}},width:{get:function(){return e.width},set:function(t){e.width=t,E(r,t)}},name:{get:function(){return e.name},set:function(t){e.name=t,a&&(a.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(t){e.closed=t,e.closed?f.addClass(r.__ul,O.CLASS_CLOSED):f.removeClass(r.__ul,O.CLASS_CLOSED),this.onResize(),r.__closeButton&&(r.__closeButton.innerHTML=t?O.TEXT_OPEN:O.TEXT_CLOSED)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return n},set:function(e){S&&((n=e)?f.bind(window,"unload",t):f.unbind(window,"unload",t),localStorage.setItem(document.location.href+".isLocal",e))}}}),p.isUndefined(e.parent)){if(e.closed=!1,f.addClass(this.domElement,O.CLASS_MAIN),f.makeSelectable(this.domElement,!1),S&&n){r.useLocalStorage=!0;var o=localStorage.getItem(document.location.href+".gui");o&&(e.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=O.TEXT_CLOSED,f.addClass(this.__closeButton,O.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),f.bind(this.__closeButton,"click",function(){r.closed=!r.closed})}else{void 0===e.closed&&(e.closed=!0);var a=document.createTextNode(e.name);f.addClass(a,"controller-name"),o=g(r,a),f.addClass(this.__ul,O.CLASS_CLOSED),f.addClass(o,"title"),f.bind(o,"click",function(e){return e.preventDefault(),r.closed=!r.closed,!1}),e.closed||(this.closed=!1)}e.autoPlace&&(p.isUndefined(e.parent)&&(P&&(M=document.createElement("div"),f.addClass(M,"dg"),f.addClass(M,O.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(M),P=!1),M.appendChild(this.domElement),f.addClass(this.domElement,O.CLASS_AUTO_PLACE)),this.parent||E(r,e.width)),f.bind(window,"resize",function(){r.onResize()}),f.bind(this.__ul,"webkitTransitionEnd",function(){r.onResize()}),f.bind(this.__ul,"transitionend",function(){r.onResize()}),f.bind(this.__ul,"oTransitionEnd",function(){r.onResize()}),this.onResize(),e.resizable&&b(this),r.getRoot(),e.parent||i()};return O.toggleHide=function(){D=!D,p.each(H,function(e){e.domElement.style.zIndex=D?-999:999,e.domElement.style.opacity=D?0:1})},O.CLASS_AUTO_PLACE="a",O.CLASS_AUTO_PLACE_CONTAINER="ac",O.CLASS_MAIN="main",O.CLASS_CONTROLLER_ROW="cr",O.CLASS_TOO_TALL="taller-than-window",O.CLASS_CLOSED="closed",O.CLASS_CLOSE_BUTTON="close-button",O.CLASS_DRAG="drag",O.DEFAULT_WIDTH=245,O.TEXT_CLOSED="Close Controls",O.TEXT_OPEN="Open Controls",f.bind(window,"keydown",function(e){"text"===document.activeElement.type||72!==e.which&&72!=e.keyCode||O.toggleHide()},!1),p.extend(O.prototype,{add:function(e,t){return m(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return m(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;p.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&M.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};return t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]),t=new O(t),this.__folders[e]=t,e=g(this,t.domElement),f.addClass(e,"folder"),t},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=f.getOffset(e.__ul).top,i=0;p.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(i+=f.getHeight(t))}),window.innerHeight-t-20<i?(f.addClass(e.domElement,O.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(f.removeClass(e.domElement,O.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&p.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(p.isUndefined(k)&&(k=new u,k.domElement.innerHTML=t),this.parent)throw Error("You can only call remember on a top level GUI.");var e=this;p.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&A(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&E(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,0<this.__rememberedObjects.length&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=x(this)),e.folders={},p.each(this.__folders,function(t,i){e.folders[i]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=x(this),T(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[C]=x(this,!0)),this.load.remembered[e]=x(this),this.preset=e,w(this,e,!0)},revert:function(e){p.each(this.__controllers,function(t){this.getRoot().load.remembered?y(e||this.getRoot(),t):t.setValue(t.initialValue)},this),p.each(this.__folders,function(e){e.revert(e)}),e||T(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&_(this.__listening)}}),O}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n",dat.controllers.factory=function(e,t,i,r,n,o,a){return function(s,l,h,c){var d=s[l];return a.isArray(h)||a.isObject(h)?new e(s,l,h):a.isNumber(d)?a.isNumber(h)&&a.isNumber(c)?new i(s,l,h,c):new t(s,l,{min:h,max:c}):a.isString(d)?new r(s,l):a.isFunction(d)?new n(s,l,""):a.isBoolean(d)?new o(s,l):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(e,t,i){var r=function(e,i){function n(){o.setValue(o.__input.value)}r.superclass.call(this,e,i);var o=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",n),t.bind(this.__input,"change",n),t.bind(this.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue());
}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,i.extend(r.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(e,t,i,r,n){function o(e,t,i,r){e.style.background="",n.each(l,function(n){e.style.cssText+="background: "+n+"linear-gradient("+t+", "+i+" 0%, "+r+" 100%); "})}function a(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var s=function(e,l){function h(e){f(e),t.bind(window,"mousemove",f),t.bind(window,"mouseup",c)}function c(){t.unbind(window,"mousemove",f),t.unbind(window,"mouseup",c)}function d(){var e=r(this.value);!1!==e?(m.__color.__state=e,m.setValue(m.__color.toOriginal())):this.value=m.__color.toString()}function u(){t.unbind(window,"mousemove",p),t.unbind(window,"mouseup",u)}function f(e){e.preventDefault();var i=t.getWidth(m.__saturation_field),r=t.getOffset(m.__saturation_field),n=(e.clientX-r.left+document.body.scrollLeft)/i;return e=1-(e.clientY-r.top+document.body.scrollTop)/i,e>1?e=1:0>e&&(e=0),n>1?n=1:0>n&&(n=0),m.__color.v=e,m.__color.s=n,m.setValue(m.__color.toOriginal()),!1}function p(e){e.preventDefault();var i=t.getHeight(m.__hue_field),r=t.getOffset(m.__hue_field);return e=1-(e.clientY-r.top+document.body.scrollTop)/i,e>1?e=1:0>e&&(e=0),m.__color.h=360*e,m.setValue(m.__color.toOriginal()),!1}s.superclass.call(this,e,l),this.__color=new i(this.getValue()),this.__temp=new i(0);var m=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&d.call(this)}),t.bind(this.__input,"blur",d),t.bind(this.__selector,"mousedown",function(e){t.addClass(this,"drag").bind(window,"mouseup",function(e){t.removeClass(m.__selector,"drag")})});var g=document.createElement("div");n.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),n.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(.5>this.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),n.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),n.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),n.extend(g.style,{width:"100%",height:"100%",background:"none"}),o(g,"top","rgba(0,0,0,0)","#000"),n.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),a(this.__hue_field),n.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",h),t.bind(this.__field_knob,"mousedown",h),t.bind(this.__hue_field,"mousedown",function(e){p(e),t.bind(window,"mousemove",p),t.bind(window,"mouseup",u)}),this.__saturation_field.appendChild(g),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};s.superclass=e,n.extend(s.prototype,e.prototype,{updateDisplay:function(){var e=r(this.getValue());if(!1!==e){var t=!1;n.each(i.COMPONENTS,function(i){return n.isUndefined(e[i])||n.isUndefined(this.__color.__state[i])||e[i]===this.__color.__state[i]?void 0:(t=!0,{})},this),t&&n.extend(this.__color.__state,e)}n.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=.5>this.__color.v||.5<this.__color.s?255:0,s=255-a;n.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),n.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+s+","+s+","+s+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];return s}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(e,t,i,r){function n(e,t,i){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(a(this,t,i),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(a(this,t,i),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(s(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(s(this),this.__state.space="HSV"),this.__state[t]=e}})}function a(e,i,n){if("HEX"===e.__state.space)e.__state[i]=t.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw"Corrupted color state";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function s(e){var i=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:i.s,v:i.v}),r.isNaN(i.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=i.h}var l=function(){if(this.__state=e.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return l.COMPONENTS="r g b h s v hex a".split(" "),r.extend(l.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),n(l.prototype,"r",2),n(l.prototype,"g",1),n(l.prototype,"b",0),o(l.prototype,"h"),o(l.prototype,"s"),o(l.prototype,"v"),Object.defineProperty(l.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(l.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),l}(dat.color.interpret,dat.color.math=function(){var e;return{hsv_to_rgb:function(e,t,i){var r=e/60-Math.floor(e/60),n=i*(1-t),o=i*(1-r*t);return t=i*(1-(1-r)*t),e=[[i,t,n],[o,i,n],[n,i,t],[n,o,i],[t,n,i],[i,n,o]][Math.floor(e/60)%6],{r:255*e[0],g:255*e[1],b:255*e[2]}},rgb_to_hsv:function(e,t,i){var r=Math.min(e,t,i),n=Math.max(e,t,i),r=n-r;return 0==n?{h:NaN,s:0,v:0}:(e=(e==n?(t-i)/r:t==n?2+(i-e)/r:4+(e-t)/r)/6,0>e&&(e+=1),{h:360*e,s:r/n,v:n/255})},rgb_to_hex:function(e,t,i){return e=this.hex_with_component(0,2,e),e=this.hex_with_component(e,1,t),e=this.hex_with_component(e,0,i)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,i,r){return r<<(e=8*i)|t&~(255<<e)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),dat.dom.CenteredDiv=function(e,t){var i=function(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var i=this;e.bind(this.backgroundElement,"click",function(){i.hide()})};return i.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},i.prototype.hide=function(){var t=this,i=function(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",i),e.unbind(t.domElement,"transitionend",i),e.unbind(t.domElement,"oTransitionEnd",i)};e.bind(this.domElement,"webkitTransitionEnd",i),e.bind(this.domElement,"transitionend",i),e.bind(this.domElement,"oTransitionEnd",i),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},i.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},i}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common);